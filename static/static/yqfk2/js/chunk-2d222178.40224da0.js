(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d222178"],{ccac:function(e,t,n){"use strict";n.r(t),n.d(t,"createLabelFunction",(function(){return f})),n.d(t,"formatField",(function(){return y}));var r=n("e92d"),a=n("ce50"),u=n("82fa"),i=n("c1da"),l=n("4653"),c=n("21e2"),s=n("80b7"),o=n("7b39");const d=r["a"].getLogger("esri.layers.support.labelFormatUtils"),p={type:"simple",evaluate:()=>null},b={getAttribute:(e,t)=>e.field(t)};async function f(e,t,r){if(!e||!e.symbol)return p;const l=e.where,c=Object(o["b"])(e),f=l?await n.e("chunk-2d0d03a7").then(n.bind(null,"66a2")):null;let g;if("arcade"===c.type){const e=await Object(u["c"])(c.expression,r,t);g={type:"arcade",evaluate(n){try{const t=e.evaluate({$feature:"attributes"in n?e.repurposeFeature(n):e.repurposeAdapter(n)});if(null!=t)return t.toString()}catch(t){d.error(new a["a"]("bad-arcade-expression","Encountered an error when evaluating label expression for feature",{feature:n,expression:c}))}return null},needsHydrationToEvaluate:()=>null==Object(o["e"])(c.expression)}}else g={type:"simple",evaluate:e=>c.expression.replace(/{[^}]*}/g,n=>{const r=n.slice(1,-1),a=Object(i["n"])(t,r);if(!a)return n;let u=null;return"attributes"in e?e&&e.attributes&&(u=e.attributes[a.name]):u=e.field(a.name),null==u?"":y(u,a)})};if(l){let e;try{e=f.WhereClause.create(l,new s["a"](t))}catch(m){return p}const n=g.evaluate;g.evaluate=t=>{const r="attributes"in t?void 0:b;return e.testFeature(t,r)?n(t):null}}return g}function y(e,t){if(null==e)return"";const n=t.domain;if(n)if("codedValue"===n.type||"coded-value"===n.type){const t=e;for(const e of n.codedValues)if(e.code===t)return e.name}else if("range"===n.type){const t=+e,r="range"in n?n.range[0]:n.minValue,a="range"in n?n.range[1]:n.maxValue;if(r<=t&&t<=a)return n.name}let r=e;return"date"===t.type||"esriFieldTypeDate"===t.type?r=Object(l["b"])(r,Object(l["a"])("short-date")):Object(i["r"])(t)&&(r=Object(c["b"])(+r)),r||""}}}]);