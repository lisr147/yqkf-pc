(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-921ac0b8"],{"81be":function(e,t,a){"use strict";var l=a("4795"),r=a.n(l),i=a("c1df"),n=a.n(i);function s(e,t,a,l,r,i,n){try{var s=e[i](n),o=s.value}catch(u){return void a(u)}s.done?t(o):Promise.resolve(o).then(l,r)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(l,r){var i=e.apply(t,a);function n(e){s(i,l,r,n,o,"next",e)}function o(e){s(i,l,r,n,o,"throw",e)}n(void 0)}))}}t["a"]={methods:{getTableKeys:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"10001",l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(function(){var i=o(r.a.mark((function i(s){var o;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.tableShow=!1,e.tableListData=e.$options.data().tableListData,r.next=4,e.$Api().ImportDataController.get_config.request({path:{id:a}});case 4:if(o=r.sent,e.dataKeys=o.columns,e.dataKeys.forEach((function(e){"jdid"===e.storeFiled&&(e.fieldName="隔离酒店")})),"10001"===a&&(e.tableListData.tableKeys.push({id:"glzt",label:"隔离状态",minWidth:120}),e.tableListData.tableKeys.push({id:"yglsc",label:"已隔离时长",minWidth:120,formatter:function(e){if(!e.ksglsj)return"未知";var t=new Date(e.ksglsj).getTime(),a=(new Date).getTime(),l=(a-t)/1e3/60/60;if(l<0)return"未知";if(l<24)return Math.floor(l)+"小时";var r=Math.floor(l%24);return l=Math.floor(l/24),l+"天"+r+"小时"}}),e.tableListData.tableKeys.push({id:"ksglsj",label:"开始隔离时间",minWidth:160})),o.columns.forEach((function(t){if(t.show){if("jdid"===t.storeFiled)return;e.tableListData.tableKeys.push({id:t.storeFiled,label:t.fieldName,minWidth:30*t.fieldName.length,searchable:t.searchable,allways:["sfzhzhm","lxdh","xm"].includes(t.storeFiled),formatter:function(e){var a;return e.hasOwnProperty(t.storeFiled)?a=e[t.storeFiled]:e.GAData&&e.GAData.hasOwnProperty(t.storeFiled)&&(a=e.GAData[t.storeFiled]),!a||"createTime"!==t.storeFiled&&"updateTime"!==t.storeFiled||(a=n()(a).format("YYYY-MM-DD HH:mm:ss")),a}})}t.searchable&&e.$set(e.filter,t.storeFiled,"")})),e.tableListData.tableKeys.sort((function(e,a){return t.indexOf(a.id)-t.indexOf(e.id)})),e.tableShow=!0,l){r.next=14;break}return s(),r.abrupt("return");case 14:e.resetSearch(),s();case 16:case"end":return r.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())}}}},b575:function(e,t,a){"use strict";t["a"]={data:function(){return{multiData:[]}},methods:{tableSelectionChange:function(e){this.multiData=e},sizeChange:function(e){this.filter.pageSize=e,this.getData()},currentChange:function(e){this.filter.pageNum=e,this.getData()},sortChange:function(e){e.column;var t=e.prop,a=e.order;a?(this.filter.sortOrder="ascending"===a?"ASC":"DESC",this.filter.sortName=t):(this.filter.sortOrder="",this.filter.sortName=""),this.getData()},search:function(){this.filter.pageNum=1,this.getData()},resetSearch:function(){var e=this.filter.pageNum,t=this.filter.pageSize,a=this.filter.rowTotal;this.filter=this.$options.data().filter,this.filter.pageNum=e,this.filter.pageSize=t,this.filter.rowTotal=a,this.getData()}}}},c0c9:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.tableListData.tableKeys.length?a("table-page",{attrs:{data:e.tableListData,filter:e.filter},on:{search:e.search,resetSearch:e.resetSearch,sizeChange:e.sizeChange,currentChange:e.currentChange,tableSelectionChange:e.tableSelectionChange}},[a("template",{slot:"searchFilter"},[a("el-form",{staticClass:"area-main-filter",attrs:{inline:!0,model:e.filter,"label-width":"150px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}}},[a("el-form-item",{attrs:{label:"密接类型"}},[a("el-select",{model:{value:e.filter.mjlx,callback:function(t){e.$set(e.filter,"mjlx",t)},expression:"filter.mjlx"}},[a("el-option",{attrs:{value:"",label:"全部"}}),a("el-option",{attrs:{value:"密切接触者"}}),a("el-option",{attrs:{value:"密接的密接"}}),a("el-option",{attrs:{value:"一般接触者"}}),a("el-option",{attrs:{value:"重点人群"}}),a("el-option",{attrs:{value:"一般人群"}}),a("el-option",{attrs:{value:"其他"}})],1)],1),a("el-form-item",{attrs:{label:"是否运转"}},[a("el-select",{model:{value:e.filter.yz,callback:function(t){e.$set(e.filter,"yz",t)},expression:"filter.yz"}},[a("el-option",{attrs:{value:"",label:"全部"}}),a("el-option",{attrs:{value:"1",label:"是"}}),a("el-option",{attrs:{value:"0",label:"否"}})],1)],1),a("el-form-item",{attrs:{label:"是否分配隔离酒店"}},[a("el-select",{model:{value:e.filter.fpgljd,callback:function(t){e.$set(e.filter,"fpgljd",t)},expression:"filter.fpgljd"}},[a("el-option",{attrs:{value:"",label:"全部"}}),a("el-option",{attrs:{value:"1",label:"是"}}),a("el-option",{attrs:{value:"0",label:"否"}})],1)],1),a("el-form-item",{attrs:{label:"隔离酒店"}},[a("el-select",{model:{value:e.filter.jdid,callback:function(t){e.$set(e.filter,"jdid",t)},expression:"filter.jdid"}},[a("el-option",{attrs:{value:"",label:"全部"}},[e._v("全部")]),e._l(e.hotelList,(function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.jkgcjd}},[e._v(e._s(t.jkgcjd))])}))],2)],1),a("el-form-item",{attrs:{label:"房间人数"}},[a("el-select",{model:{value:e.filter.fjrs,callback:function(t){e.$set(e.filter,"fjrs",t)},expression:"filter.fjrs"}},[a("el-option",{attrs:{value:"",label:"全部"}}),a("el-option",{attrs:{value:"1",label:"1"}}),a("el-option",{attrs:{value:"2",label:"2"}}),a("el-option",{attrs:{value:"3",label:"2个以上"}})],1)],1),a("el-form-item",{attrs:{label:"相同身份证数"}},[a("el-select",{model:{value:e.filter.xtsfzh,callback:function(t){e.$set(e.filter,"xtsfzh",t)},expression:"filter.xtsfzh"}},[a("el-option",{attrs:{value:"",label:"全部"}}),a("el-option",{attrs:{value:"1",label:"1"}}),a("el-option",{attrs:{value:"2",label:"2"}}),a("el-option",{attrs:{value:"3",label:"2个以上"}})],1)],1),a("el-form-item",{attrs:{label:"相同人员是否合并"}},[a("el-select",{model:{value:e.filter.xtrysfhb,callback:function(t){e.$set(e.filter,"xtrysfhb",t)},expression:"filter.xtrysfhb"}},[a("el-option",{attrs:{value:"1",label:"是"}}),a("el-option",{attrs:{value:"0",label:"否"}})],1)],1)],1)],1),a("template",{slot:"controler"},[a("el-button",{attrs:{icon:"el-icon-download",type:"primary"},on:{click:e.exportFile}},[e._v("导出筛选结果")]),a("label",{staticStyle:{"margin-left":"10px"}},[e._v("共有"+e._s(e.count)+"人在公安流调库和疾控流调库中")])],1)],2):e._e()],1)},r=[],i=a("4795"),n=a.n(i),s=a("b575"),o=a("05d5"),u=a("d2b8"),c=a("81be"),f=a("c1df"),d=a.n(f);function h(e,t,a,l,r,i,n){try{var s=e[i](n),o=s.value}catch(u){return void a(u)}s.done?t(o):Promise.resolve(o).then(l,r)}function p(e){return function(){var t=this,a=arguments;return new Promise((function(l,r){var i=e.apply(t,a);function n(e){h(i,l,r,n,s,"next",e)}function s(e){h(i,l,r,n,s,"throw",e)}n(void 0)}))}}var m={name:"same-person",components:{TablePage:o["a"]},mixins:[s["a"],c["a"]],data:function(){return{dialog:null,filter:{pageNum:1,pageSize:u["g"][0],rowTotal:0,pageSizes:u["g"],mjlx:"",yz:"",fpgljd:"",jdid:"",fjrs:"",xtsfzh:"",xtrysfhb:"0"},tableListData:{selection:!1,columnFunctionsWidth:220,tableData:[],tableKeys:[],tableFunctions:[]},hotelList:[],detail:null,dataKeys:[],count:-1}},mounted:function(){var e=this;return p(n.a.mark((function t(){var a;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Api().HotelController.get_getAllHotelList.request();case 2:return e.hotelList=t.sent,t.next=5,e.getTableKeys(["sfzhzhm","lxdh","xm"],"10001",!1);case 5:return a=JSON.parse(JSON.stringify(e.tableListData.tableKeys)),e.tableListData.tableKeys=[],t.next=9,e.getTableKeys([],"10002",!1);case 9:e.tableListData.tableKeys=e.tableListData.tableKeys.map((function(e){return e.id="GAData."+e.id,e})),a=a.map((function(e){return e.label="(疾控)"+e.label,e.minWidth+=40,e})),e.tableListData.tableKeys=e.tableListData.tableKeys.concat(a),e.resetSearch();case 13:case"end":return t.stop()}}),t)})))()},methods:{getData:function(){var e=this;return p(n.a.mark((function t(){var a,l;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(JSON.stringify(e.filter)),delete a.rowTotal,delete a.pageSizes,t.next=5,e.$Api().ConnectionController.post_searchMjInGa.request({data:a,heaaders:{hideNotify:!0}});case 5:l=t.sent,l.data.forEach((function(e){e.createTime=d()(e.createTime).format("YYYY-MM-DD HH:mm:ss"),e.updateTime=d()(e.updateTime).format("YYYY-MM-DD HH:mm:ss"),e.GAData.createTime=d()(e.GAData.createTime).format("YYYY-MM-DD HH:mm:ss"),e.GAData.updateTime=d()(e.GAData.updateTime).format("YYYY-MM-DD HH:mm:ss")})),e.tableListData.tableData=l.data,e.filter.pageNum=l.pageNum,e.filter.pageSize=l.pageSize,e.filter.rowTotal=l.rowTotal,-1===e.count&&(e.count=l.rowTotal);case 12:case"end":return t.stop()}}),t)})))()},exportFile:function(){var e=this;return p(n.a.mark((function t(){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Api().ConnectionController.post_exportDatanGa.request({data:e.filter,responseType:"blob"});case 2:t.sent,e.$message({message:"导出成功",type:"success",duration:3e3,showClose:!0});case 4:case"end":return t.stop()}}),t)})))()}}},b=m,v=a("2877"),g=Object(v["a"])(b,l,r,!1,null,null,null);t["default"]=g.exports}}]);