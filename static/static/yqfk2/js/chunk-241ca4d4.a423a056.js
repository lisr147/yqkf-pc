(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-241ca4d4","chunk-166bccf7"],{"002c":function(e,t,i){"use strict";i.d(t,"a",(function(){return Fe}));var n=i("b2b2"),r=i("38a4"),a=i("0b2d"),o=i("e431"),s=i("8188"),l=i("0fc4"),c=i("7577"),u=i("4261"),h=i("f091"),d=i("caf7"),p=i("a915"),f=i("d791"),m=i("9180"),g=i("dae5"),v=i("afe1"),y=i("02f1"),_=i("1c92"),b=i("3349"),x=i("fc00"),w=i("1153"),T=i("1038"),S=i("b623"),O=i("da1c");function C(e){return e instanceof Float32Array&&e.length>=16}function k(e){return Array.isArray(e)&&e.length>=16}function P(e){return C(e)||k(e)}var E=i("68af"),A=i("7c51"),I=i("35b3"),M=i("5957"),D=i("0d96"),j=i("a4ee"),L=i("c3a4"),R=i("ca98"),N=i("da35"),z=i("fa1e"),B=i("8e374"),V=i("189c"),F=i("8e97"),U=i("d272"),G=i("2f98"),H=i("d0cb"),W=i("9617"),q=i("7079"),Z=i("6a07"),Y=i("be24"),X=i("17b0"),K=i("7438");class $ extends R["a"]{initializeProgram(e){const t=$.shader.get(),i=this.configuration,n=t.build({output:i.output,FrontFacePass:2===i.transparencyPassType,viewingMode:e.viewingMode,occlusionTestEnabled:i.occlusionTestEnabled,signedDistanceFieldEnabled:i.sdf,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,debugDrawBorder:i.debugDrawBorder,binaryHighlightOcclusionEnabled:i.binaryHighlightOcclusion,screenCenterOffsetUnitsEnabled:i.screenCenterOffsetUnitsEnabled,screenSizePerspectiveEnabled:i.screenSizePerspective,verticalOffsetEnabled:i.verticalOffset,pixelSnappingEnabled:i.pixelSnappingEnabled,vvSize:i.vvSize,vvColor:i.vvColor,vvInstancingEnabled:!1,isDraped:i.isDraped,multipassGeometryEnabled:i.multipassGeometryEnabled});return new B["a"](e.rctx,n.generateSource("vertex"),n.generateSource("fragment"),z["a"])}bindPass(e,t,i){F["a"].bindProjectionMatrix(this.program,i.camera.projectionMatrix),this.program.setUniform1f("cameraGroundRelative",i.camera.aboveGround?1:-1),this.program.setUniform1f("perDistancePixelRatio",Math.tan(i.camera.fovY/2)/(i.camera.fullViewport[2]/2)),this.program.setUniformMatrix4fv("viewNormal",i.camera.viewInverseTransposeMatrix),this.program.setUniform1f("polygonOffset",t.shaderPolygonOffset),X["a"].bindUniforms(this.program,t,i),G["a"].bindUniforms(this.program,t),this.program.setUniform1f("pixelRatio",i.camera.pixelRatio||1),F["a"].bindViewport(this.program,i),6===this.configuration.output?(q["a"].bindUniforms(this.program),this.program.setUniform2fv("cameraNearFar",i.camera.nearFar),this.program.setUniform2fv("inverseViewport",i.inverseViewport),Object(W["a"])(this.program,e,i)):(H["a"].bindUniforms(this.program,i),D["a"].bindUniforms(this.program,t,i.camera.pixelRatio||1),Y["a"].bindUniforms(this.program,t),this.configuration.occlusionTestEnabled&&H["a"].bindVisibilityTexture(e,this.program,i)),4===this.configuration.output&&Z["a"].bindOutputHighlight(e,this.program,i)}bindDraw(e){F["a"].bindView(this.program,e),F["a"].bindCamPosition(this.program,e.origin,e.camera.viewInverseTransposeMatrix),U["a"].bindUniformsWithOrigin(this.program,this.configuration,e)}setPipelineState(e){const t=this.configuration,i=3===e,n=2===e,r=515,a=this.configuration.polygonOffsetEnabled&&Q,o=(i||n)&&4!==t.output?(t.depthEnabled||6===t.output)&&V["c"]:null;return Object(V["d"])({blending:0===t.output||7===t.output||4===t.output?i?J:Object(K["a"])(e):null,depthTest:{func:r},depthWrite:o,colorWrite:V["b"],polygonOffset:a})}initializePipeline(){return this.setPipelineState(this.configuration.transparencyPassType)}get primitiveType(){return 6===this.configuration.output?0:4}}$.shader=new L["a"](D["b"],()=>i.e("chunk-2d0db7d8").then(i.bind(null,"6fa3")));const Q={factor:0,units:-4},J=Object(V["f"])(1,771);class ee extends N["a"]{constructor(){super(...arguments),this.output=0,this.occlusionTestEnabled=!0,this.sdf=!1,this.vvSize=!1,this.vvColor=!1,this.verticalOffset=!1,this.screenSizePerspective=!1,this.screenCenterOffsetUnitsEnabled=0,this.debugDrawBorder=!0,this.binaryHighlightOcclusion=!0,this.slicePlaneEnabled=!1,this.polygonOffsetEnabled=!1,this.depthEnabled=!0,this.transparencyPassType=3,this.pixelSnappingEnabled=!0,this.isDraped=!1,this.multipassGeometryEnabled=!1}}Object(j["a"])([Object(N["b"])({count:8})],ee.prototype,"output",void 0),Object(j["a"])([Object(N["b"])()],ee.prototype,"occlusionTestEnabled",void 0),Object(j["a"])([Object(N["b"])()],ee.prototype,"sdf",void 0),Object(j["a"])([Object(N["b"])()],ee.prototype,"vvSize",void 0),Object(j["a"])([Object(N["b"])()],ee.prototype,"vvColor",void 0),Object(j["a"])([Object(N["b"])()],ee.prototype,"verticalOffset",void 0),Object(j["a"])([Object(N["b"])()],ee.prototype,"screenSizePerspective",void 0),Object(j["a"])([Object(N["b"])({count:2})],ee.prototype,"screenCenterOffsetUnitsEnabled",void 0),Object(j["a"])([Object(N["b"])()],ee.prototype,"debugDrawBorder",void 0),Object(j["a"])([Object(N["b"])()],ee.prototype,"binaryHighlightOcclusion",void 0),Object(j["a"])([Object(N["b"])()],ee.prototype,"slicePlaneEnabled",void 0),Object(j["a"])([Object(N["b"])()],ee.prototype,"polygonOffsetEnabled",void 0),Object(j["a"])([Object(N["b"])()],ee.prototype,"depthEnabled",void 0),Object(j["a"])([Object(N["b"])({count:4})],ee.prototype,"transparencyPassType",void 0),Object(j["a"])([Object(N["b"])()],ee.prototype,"pixelSnappingEnabled",void 0),Object(j["a"])([Object(N["b"])()],ee.prototype,"isDraped",void 0),Object(j["a"])([Object(N["b"])()],ee.prototype,"multipassGeometryEnabled",void 0);class te extends I["a"]{constructor(e){super(e,Oe),this.techniqueConfig=new ee}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.verticalOffset=!!this.params.verticalOffset,this.techniqueConfig.screenSizePerspective=!!this.params.screenSizePerspective,this.techniqueConfig.screenCenterOffsetUnitsEnabled="screen"===this.params.centerOffsetUnits?1:0,this.techniqueConfig.polygonOffsetEnabled=this.params.polygonOffset,this.techniqueConfig.isDraped=this.params.isDraped,this.techniqueConfig.occlusionTestEnabled=this.params.occlusionTest,this.techniqueConfig.pixelSnappingEnabled=this.params.pixelSnappingEnabled,this.techniqueConfig.sdf=this.params.textureIsSignedDistanceField,this.techniqueConfig.vvSize=!!this.params.vvSizeEnabled,this.techniqueConfig.vvColor=!!this.params.vvColorEnabled,0===e&&(this.techniqueConfig.debugDrawBorder=!!this.params.debugDrawBorder),4===e&&(this.techniqueConfig.binaryHighlightOcclusion=this.params.binaryHighlightOcclusion),this.techniqueConfig.depthEnabled=this.params.depthEnabled,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.multipassGeometryEnabled=!!t&&t.multipassGeometryEnabled,this.techniqueConfig}intersect(e,t,i,n,r,a,o,s,l){l?this.intersectDrapedHudGeometry(e,a,o,s):this.intersectHudGeometry(e,t,i,n,o,s)}intersectDrapedHudGeometry(e,t,i,r){const a=e.vertexAttributes.get("position"),o=e.vertexAttributes.get("size"),s=this.params,l=Object(D["d"])(s);let c=1,u=1;if(Object(n["k"])(r)){const e=r(be);c=e[0],u=e[5]}c*=e.screenToWorldRatio,u*=e.screenToWorldRatio;const h=we*e.screenToWorldRatio;for(let n=0;n<a.data.length/a.size;n++){const r=n*a.size,d=a.data[r],p=a.data[r+1],f=n*o.size;let m;Te[0]=o.data[f]*c,Te[1]=o.data[f+1]*u,s.textureIsSignedDistanceField&&(m=s.outlineSize*e.screenToWorldRatio/2),se(t,d,p,Te,h,m,s,l)&&i()}}intersectHudGeometry(e,t,i,r,s,l){if(!r.options.selectionMode||!r.options.hud)return;if(Object(S["d"])(t))return;const c=this.params;let u=1,h=1;if(Object(_["d"])(me,i),Object(n["k"])(l)){const e=l(be);u=e[0],h=e[5],oe(me)}const d=e.vertexAttributes.get("position"),p=e.vertexAttributes.get("size"),m=e.vertexAttributes.get("normal"),g=e.vertexAttributes.get("auxpos1");Object(w["a"])(d.size>=3);const v=r.point,y=r.camera,b=Object(D["d"])(c);u*=y.pixelRatio,h*=y.pixelRatio;const x="screen"===this.params.centerOffsetUnits;for(let n=0;n<d.data.length/d.size;n++){const e=n*d.size;Object(o["v"])(ue,d.data[e],d.data[e+1],d.data[e+2]),Object(o["l"])(ue,ue,i);const t=n*p.size;Te[0]=p.data[t]*u,Te[1]=p.data[t+1]*h,Object(o["l"])(ue,ue,y.viewMatrix);const l=n*g.size;if(Object(o["v"])(ye,g.data[l+0],g.data[l+1],g.data[l+2]),!x&&(ue[0]+=ye[0],ue[1]+=ye[1],0!==ye[2])){const e=ye[2];Object(o["q"])(ye,ue),Object(o["i"])(ue,ue,Object(o["d"])(ye,ye,e))}const _=n*m.size;if(Object(o["v"])(he,m.data[_],m.data[_+1],m.data[_+2]),this.normalAndViewAngle(he,me,y,_e),this.applyVerticalOffsetTransformationView(ue,_e,y,le),y.applyProjection(ue,de),de[0]>-1){let e=Math.floor(de[0])+this.params.screenOffset[0],t=Math.floor(de[1])+this.params.screenOffset[1];x&&(e+=ye[0],0!==ye[1]&&(t+=Object(O["b"])(ye[1],le.factorAlignment))),Object(O["a"])(Te,le.factor,Te);const i=xe*y.pixelRatio;let n;if(c.textureIsSignedDistanceField&&(n=c.outlineSize*y.pixelRatio/2),se(v,e,t,Te,i,n,c,b)){const e=r.ray;if(Object(o["l"])(fe,ue,Object(f["a"])(ve,y.viewMatrix)),de[0]=v[0],de[1]=v[1],y.unprojectFromRenderScreen(de,ue)){const t=Object(a["e"])();Object(o["j"])(t,e.direction);const i=1/Object(o["o"])(t);Object(o["d"])(t,t,i),s(Object(o["n"])(e.origin,ue)*i,t,-1,1,!0,fe)}}}}}computeAttachmentOrigin(e,t){const i=e.vertexAttributes;if(!i)return!1;const n=i.get("position"),r=e.indices.get("position");return Object(T["b"])(n,r,t)}createBufferWriter(){return new ke(this)}normalAndViewAngle(e,t,i,n){return P(t)&&(t=Object(_["d"])(ge,t)),Object(o["w"])(n.normal,e,t),Object(o["l"])(n.normal,n.normal,i.viewInverseTransposeMatrix),n.cosAngle=Object(o["g"])(pe,Se),n}updateScaleInfo(e,t,i){const n=this.params;n.screenSizePerspective?Object(O["c"])(i,t,n.screenSizePerspective,e.factor):(e.factor.scale=1,e.factor.factor=0,e.factor.minPixelSize=0,e.factor.paddingPixels=0),n.screenSizePerspectiveAlignment?Object(O["c"])(i,t,n.screenSizePerspectiveAlignment,e.factorAlignment):(e.factorAlignment.factor=e.factor.factor,e.factorAlignment.scale=e.factor.scale,e.factorAlignment.minPixelSize=e.factor.minPixelSize,e.factorAlignment.paddingPixels=e.factor.paddingPixels)}applyShaderOffsetsView(e,t,i,n,r,a,o){const s=this.normalAndViewAngle(t,i,r,_e);return this.applyVerticalGroundOffsetView(e,s,r,o),this.applyVerticalOffsetTransformationView(o,s,r,a),this.applyPolygonOffsetView(o,s,n[3],r,o),this.applyCenterOffsetView(o,n,o),o}applyShaderOffsetsNDC(e,t,i,r,a){return this.applyCenterOffsetNDC(e,t,i,r),Object(n["k"])(a)&&Object(o["j"])(a,r),this.applyPolygonOffsetNDC(r,t,i,r),r}applyPolygonOffsetView(e,t,i,n,a){const s=n.aboveGround?1:-1;let l=Object(r["n"])(i);0===l&&(l=s);const c=s*l;if(this.params.shaderPolygonOffset<=0)return Object(o["j"])(a,e);const u=Object(r["c"])(Math.abs(t.cosAngle),.01,1),h=1-Math.sqrt(1-u*u)/u/n.viewport[2];return Object(o["d"])(a,e,c>0?h:1/h),a}applyVerticalGroundOffsetView(e,t,i,n){const r=Object(o["o"])(e),a=i.aboveGround?1:-1,s=.5*i.computeRenderPixelSizeAtDist(r),l=Object(o["d"])(ue,t.normal,a*s);return Object(o["e"])(n,e,l),n}applyVerticalOffsetTransformationView(e,t,i,n){const r=this.params;if(!r.verticalOffset||!r.verticalOffset.screenLength){if(r.screenSizePerspective||r.screenSizePerspectiveAlignment){const i=Object(o["o"])(e);this.updateScaleInfo(n,i,t.cosAngle)}else n.factor.scale=1,n.factorAlignment.scale=1;return e}const a=Object(o["o"])(e),s=r.screenSizePerspectiveAlignment||r.screenSizePerspective,l=Object(A["g"])(i,a,r.verticalOffset,t.cosAngle,s);return this.updateScaleInfo(n,a,t.cosAngle),Object(o["d"])(t.normal,t.normal,l),Object(o["e"])(e,e,t.normal)}applyCenterOffsetView(e,t,i){const n="screen"!==this.params.centerOffsetUnits;return i!==e&&Object(o["j"])(i,e),n&&(i[0]+=t[0],i[1]+=t[1],t[2]&&(Object(o["q"])(he,i),Object(o["e"])(i,i,Object(o["d"])(he,he,t[2])))),i}applyCenterOffsetNDC(e,t,i,n){const r="screen"!==this.params.centerOffsetUnits;return n!==e&&Object(o["j"])(n,e),r||(n[0]+=t[0]/i.fullWidth*2,n[1]+=t[1]/i.fullHeight*2),n}applyPolygonOffsetNDC(e,t,i,n){const a=this.params.shaderPolygonOffset;if(e!==n&&Object(o["j"])(n,e),a){const e=i.aboveGround?1:-1,o=e*Object(r["n"])(t[3]);n[2]-=(o||e)*a}return n}getGLMaterial(e){return 0===e.output||7===e.output?new ne(e):4===e.output?new re(e):void 0}calculateRelativeScreenBounds(e,t,i=Object(m["g"])()){return ae(this.params,e,t,i),i[2]=i[0]+e[0],i[3]=i[1]+e[1],i}}class ie extends E["a"]{constructor(e){super({...e,...e.material.params}),this.updateParameters()}beginSlot(e){return e===(this.material.params.drawInSecondSlot?19:18)}updateParameters(e){this.updateTexture(this.material.params.textureId),this.selectProgram(e)}selectProgram(e){this.technique=this.techniqueRep.acquireAndReleaseExisting($,this.material.getTechniqueConfig(this.output,e),this.technique)}ensureParameters(e){this.updateParameters(e)}bind(e,t){e.bindProgram(this.technique.program),this.bindTexture(e,this.technique.program),this.bindTextureScale(e,this.technique.program),this.technique.bindPass(e,this.material.params,t)}}class ne extends ie{constructor(e){super(e),this.isOcclusionSlot=!1}beginSlot(e){const t=this.material.params.drawInSecondSlot?19:18;return this.material.params.occlusionTest?(this.isOcclusionSlot=12===e,12===e||e===t):(this.isOcclusionSlot=!1,e===t)}getTechnique(){return this.isOcclusionSlot?this.occlusionTechnique:this.technique}selectProgram(e){this.technique=this.techniqueRep.acquireAndReleaseExisting($,this.material.getTechniqueConfig(this.output,e),this.technique),this.occlusionTechnique=this.techniqueRep.acquireAndReleaseExisting($,this.material.getTechniqueConfig(6,e),this.occlusionTechnique)}bind(e,t){const i=this.getTechnique();e.bindProgram(i.program),this.isOcclusionSlot||(this.bindTexture(e,i.program),this.bindTextureScale(e,i.program)),i.bindPass(e,this.material.params,t)}}class re extends ie{constructor(e){super({...e,output:4})}}function ae(e,t,i,n=ce){return Object(b["c"])(n,e.anchorPos),n[0]*=-t[0],n[1]*=-t[1],n[0]+=e.screenOffset[0]*i,n[1]+=e.screenOffset[1]*i,n}function oe(e){const t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=1/Math.sqrt(t*t+i*i+n*n),h=1/Math.sqrt(r*r+a*a+o*o),d=1/Math.sqrt(s*s+l*l+c*c);return e[0]=t*u,e[1]=i*u,e[2]=n*u,e[3]=r*h,e[4]=a*h,e[5]=o*h,e[6]=s*d,e[7]=l*d,e[8]=c*d,e}function se(e,t,i,n,r,a,o,s){let l=t-r-(s[0]>0?n[0]*s[0]:0),c=l+n[0]+2*r,u=i-r-(s[1]>0?n[1]*s[1]:0),h=u+n[1]+2*r;if(o.textureIsSignedDistanceField){const e=o.distanceFieldBoundingBox;l+=n[0]*e[0],u+=n[1]*e[1],c-=n[0]*(1-e[2]),h-=n[1]*(1-e[3]),l-=a,c+=a,u-=a,h+=a}return e[0]>l&&e[0]<c&&e[1]>u&&e[1]<h}const le={factor:{scale:0,factor:0,minPixelSize:0,paddingPixels:0},factorAlignment:{scale:0,factor:0,minPixelSize:0,paddingPixels:0}},ce=Object(y["a"])(),ue=Object(a["e"])(),he=Object(a["e"])(),de=Object(p["d"])(),pe=Object(a["e"])(),fe=Object(a["e"])(),me=Object(g["a"])(),ge=Object(g["a"])(),ve=Object(v["b"])(),ye=Object(a["e"])(),_e={normal:pe,cosAngle:0},be=Object(v["b"])(),xe=1,we=2,Te=[0,0],Se=Object(a["g"])(0,0,1),Oe={texCoordScale:[1,1],occlusionTest:!0,binaryHighlightOcclusion:!0,drawInSecondSlot:!1,color:[1,1,1,1],outlineColor:[1,1,1,1],outlineSize:0,textureIsSignedDistanceField:!1,distanceFieldBoundingBox:null,vvSizeEnabled:!1,vvSizeMinSize:[1,1,1],vvSizeMaxSize:[100,100,100],vvSizeOffset:[0,0,0],vvSizeFactor:[1,1,1],vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],screenOffset:[0,0],verticalOffset:null,screenSizePerspective:null,screenSizePerspectiveAlignment:null,slicePlaneEnabled:!1,anchorPos:Object(y["e"])(.5,.5),shaderPolygonOffset:1e-5,polygonOffset:!1,textureId:null,centerOffsetUnits:"world",depthEnabled:!0,pixelSnappingEnabled:!0,debugDrawBorder:!1,isDraped:!1,...I["b"]},Ce=Object(x["a"])().vec3f("position").vec3f("normal").vec2f("uv0").vec4u8("color").vec2f("size").vec4f("auxpos1").vec4f("auxpos2");class ke{constructor(e){this.material=e,this.vertexBufferLayout=Ce}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return 6*e.indices.get("position").length}write(e,t,i,n){Object(M["e"])(t.indices.get("position"),t.vertexAttributes.get("position").data,e.transformation,i.position,n,6),Object(M["d"])(t.indices.get("normal"),t.vertexAttributes.get("normal").data,e.invTranspTransformation,i.normal,n,6);{const e=t.vertexAttributes.get("uv0").data;let r,a,o,s;if(null==e||e.length<4){const e=this.material.params;r=0,a=0,o=e.texCoordScale[0],s=e.texCoordScale[1]}else r=e[0],a=e[1],o=e[2],s=e[3];o=Math.min(1.99999,o+1),s=Math.min(1.99999,s+1);const l=t.indices.get("position").length,c=i.uv0;let u=n;for(let t=0;t<l;++t)c.set(u,0,r),c.set(u,1,a),u+=1,c.set(u,0,o),c.set(u,1,a),u+=1,c.set(u,0,o),c.set(u,1,s),u+=1,c.set(u,0,o),c.set(u,1,s),u+=1,c.set(u,0,r),c.set(u,1,s),u+=1,c.set(u,0,r),c.set(u,1,a),u+=1}Object(M["b"])(t.indices.get("color"),t.vertexAttributes.get("color").data,4,i.color,n,6);{const e=t.indices.get("size"),r=t.vertexAttributes.get("size").data,a=e.length,o=i.size;let s=n;for(let t=0;t<a;++t){const i=r[2*e[t]],n=r[2*e[t]+1];for(let e=0;e<6;++e)o.set(s,0,i),o.set(s,1,n),s+=1}}t.indices.get("auxpos1")&&t.vertexAttributes.get("auxpos1")&&Object(M["a"])(t.indices.get("auxpos1"),t.vertexAttributes.get("auxpos1").data,i.auxpos1,n,6),t.indices.get("auxpos2")&&t.vertexAttributes.get("auxpos2")&&Object(M["a"])(t.indices.get("auxpos2"),t.vertexAttributes.get("auxpos2").data,i.auxpos2,n,6)}}var Pe=i("2e0f"),Ee=i("0eb9");i("c120");function Ae(e,t,i){switch(e){case"circle":return Ie(t,i);case"square":return Me(t,i);case"cross":return je(t,i);case"x":return Le(t,i);case"kite":return De(t,i);case"triangle":return Re(t,i);default:return Ie(t,i)}}function Ie(e,t){const i=e,n=new Uint8Array(4*i*i),r=i/2-.5,a=t/2;for(let o=0;o<i;o++)for(let t=0;t<i;t++){const s=t+i*o,l=t-r,c=o-r;let u=Math.sqrt(l*l+c*c)-a;u=u/e+.5,Object(w["h"])(u,n,4*s)}return n}function Me(e,t){return Ne(e,t,!1)}function De(e,t){return Ne(e,t,!0)}function je(e,t){return ze(e,t,!1)}function Le(e,t){return ze(e,t,!0)}function Re(e,t){const i=new Uint8Array(4*e*e),n=1,r=-.5,a=Math.sqrt(n*n+r*r),o=(e-t)/2;for(let s=0;s<e;s++)for(let l=0;l<e;l++){const c=s*e+l,u=(l-o)/t,h=(s-o+.75)/t,d=-(n*u+r*h)/a,p=(n*(u-1)+r*-h)/a,f=-h,m=Math.max(d,p,f);Object(w["h"])(m*t/e+.5,i,4*c)}return i}function Ne(e,t,i){i&&(t/=Math.SQRT2);const n=new Uint8Array(4*e*e);for(let r=0;r<e;r++)for(let a=0;a<e;a++){let o=a-.5*e+.25,s=.5*e-r-.75;const l=r*e+a;if(i){const e=(o+s)/Math.SQRT2;s=(s-o)/Math.SQRT2,o=e}let c=Math.max(Math.abs(o),Math.abs(s))-.5*t;c=c/e+.5,Object(w["h"])(c,n,4*l)}return n}function ze(e,t,i){i&&(t*=Math.SQRT2);const n=.5*t,r=new Uint8Array(4*e*e);for(let a=0;a<e;a++)for(let t=0;t<e;t++){let o=t-.5*e,s=.5*e-a-1;const l=a*e+t;if(i){const e=(o+s)/Math.SQRT2;s=(s-o)/Math.SQRT2,o=e}let c;o=Math.abs(o),s=Math.abs(s),c=o>s?o>n?Math.sqrt((o-n)*(o-n)+s*s):s:s>n?Math.sqrt(o*o+(s-n)*(s-n)):o,c=c/e+.5,Object(w["h"])(c,r,4*l)}return r}var Be=i("1e2c"),Ve=i("dd63");class Fe{constructor(e){this.view=null,this._geometry=null,this._size=3,this._color=Object(l["d"])(1,0,1,1),this._pixelSnappingEnabled=!0,this._primitive="square",this._outlineSize=1,this._outlineColor=Object(l["d"])(1,1,1,1),this._elevationInfo=null,this.resources=new Ve["a"]({view:e.view,createResources:e=>this.createResources(e),recreateGeometry:(e,t)=>(e.geometry=this.recreateGeometry(t,e.material),Object(n["k"])(e.geometry)?[e.geometry]:[])});let t=!0;for(const i in e)i in this?"attached"===i?t=e[i]:this[i]=e[i]:console.error("Cannot set unknown property",i);this.attached=t}destroy(){this.resources.destroy()}get visible(){return this.resources.visible}set visible(e){this.resources.visible=e}get attached(){return this.resources.attached}set attached(e){this.resources.attached=e}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.resources.recreateGeometry()}get size(){return this._size}set size(e){if(e!==this._size){const t=this.preferredTextureSize;this._size=e,t<this.preferredTextureSize?Object(n["k"])(this.resources)&&this.resources.recreate():this.updateSizeAttribute()}}get color(){return this._color}set color(e){Object(c["g"])(e,this._color)||(Object(c["c"])(this._color,e),this.updateMaterial())}get pixelSnappingEnabled(){return this._pixelSnappingEnabled}set pixelSnappingEnabled(e){this._pixelSnappingEnabled!==e&&(this._pixelSnappingEnabled=e,this.updateMaterial())}get primitive(){return this._primitive}set primitive(e){this._primitive!==e&&(this._primitive=e,Object(n["k"])(this.resources)&&this.resources.recreate())}get outlineSize(){return this._outlineSize}set outlineSize(e){e!==this._outlineSize&&(this._outlineSize=e,this.updateMaterial())}get outlineColor(){return this._outlineColor}set outlineColor(e){Object(c["g"])(e,this._outlineColor)||(Object(c["c"])(this._outlineColor,e),this.updateMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.resources&&this.resources.recreateGeometry()}updateMaterial(){const e=this.resources.resources;Object(n["j"])(e)||e.material.setParameterValues(this.materialParameters(e.texture.id))}updateSizeAttribute(){const e=this.resources.resources,t=this.resources.object;if(Object(n["j"])(e)||Object(n["j"])(t))return;const i=e.geometry;if(Object(n["j"])(i))return;const r=i.getMutableAttribute("size").data,a=this.geometrySize;r[0]=a,r[1]=a,t.geometryVertexAttrsUpdated(0)}materialParameters(e){return{color:this._color,textureIsSignedDistanceField:!0,distanceFieldBoundingBox:Ge,occlusionTest:!1,outlineColor:this._outlineColor,outlineSize:this._outlineSize,textureId:e,polygonOffset:!1,shaderPolygonOffset:0,drawInSecondSlot:!0,depthEnabled:!1,pixelSnappingEnabled:this.pixelSnappingEnabled}}get geometrySize(){return this._size/Ue}recreateGeometry(e,t){const i=this.createRenderGeometry();return Object(n["k"])(i)&&e.addGeometry(i,t),i}createResources(e){const t=this.createTexture(),i=new te(this.materialParameters(t.id)),r=this.recreateGeometry(e,i);return{material:i,texture:t,geometry:r,forEach(e){e(t),e(i),Object(n["k"])(this.geometry)&&e(this.geometry)}}}get preferredTextureSize(){return Object(r["c"])(Object(r["k"])(2*this.geometrySize),16,128)}createTexture(){const e=this.preferredTextureSize;return new Be["a"](Ae(this._primitive,e,e*Ue),{mipmap:!1,wrap:{s:33071,t:33071},width:e,height:e,components:4,noUnpackFlip:!0})}calculateMapBounds(e){if(Object(n["j"])(this.resources.resources)||Object(n["j"])(this.resources.resources.geometry))return!1;const t=this.resources.resources.geometry.vertexAttributes.get("position");return Object(s["o"])(t.data,this.view.renderCoordsHelper.spatialReference,He,this.view.spatialReference),Object(u["h"])(e,He),!0}createRenderGeometry(){const e=this.geometry;if(Object(n["j"])(e))return null;const{renderCoordsHelper:t,elevationProvider:i}=this.view,r=Object(Pe["c"])(e,i,Ee["a"].fromElevationInfo(this.elevationInfo),t),a=Object(o["v"])(h["d"].get(),e.x,e.y,r),l=h["d"].get();Object(s["o"])(a,e.spatialReference,l,t.spatialReference);const c=this.geometrySize;return d["a"].createPointGeometry(null,l,null,[c,c],[0,0,0,1])}}const Ue=.5,Ge=[Ue/2,Ue/2,1-Ue/2,1-Ue/2],He=Object(a["e"])()},"007d":function(e,t,i){var n=i("3eba");i("cb8f"),i("a96b"),i("42f6"),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},(function(){})),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},(function(){}))},"008c":function(e,t,i){"use strict";i.d(t,"a",(function(){return C})),i.d(t,"b",(function(){return T})),i.d(t,"c",(function(){return s})),i.d(t,"d",(function(){return k})),i.d(t,"e",(function(){return P})),i.d(t,"f",(function(){return E})),i.d(t,"g",(function(){return A}));var n=i("a9ab");const r=(e,t,i)=>[t,i],a=(e,t,i)=>[t,i,e[2]],o=(e,t,i)=>[t,i,e[2],e[3]];function s(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:e.extent?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function l({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function c({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function u(e,t,i){const n=[];let r,a,o,s;for(let u=0;u<i.length;u++){const h=i[u];u>0?(o=l(e,h[0]),s=c(e,h[1]),o===r&&s===a||(n.push(t(h,o-r,s-a)),r=o,a=s)):(r=l(e,h[0]),a=c(e,h[1]),n.push(t(h,r,a)))}return n.length>0?n:null}function h(e,t,i,n){return u(e,i?n?o:a:n?a:r,t)}function d(e,t,i,n){const s=[],l=i?n?o:a:n?a:r;for(let r=0;r<t.length;r++){const i=u(e,l,t[r]);i&&i.length>=3&&s.push(i)}return s.length?s:null}function p(e,t,i,n){const s=[],l=i?n?o:a:n?a:r;for(let r=0;r<t.length;r++){const i=u(e,l,t[r]);i&&i.length>=2&&s.push(i)}return s.length?s:null}function f({scale:e,translate:t},i){return i*e[0]+t[0]}function m({scale:e,translate:t},i){return t[1]-i*e[1]}function g(e,t,i){const n=new Array(i.length);if(!i.length)return n;const[r,a]=e.scale;let o=f(e,i[0][0]),s=m(e,i[0][1]);n[0]=t(i[0],o,s);for(let l=1;l<i.length;l++){const e=i[l];o+=e[0]*r,s-=e[1]*a,n[l]=t(e,o,s)}return n}function v(e,t,i){const n=new Array(i.length);for(let r=0;r<i.length;r++)n[r]=g(e,t,i[r]);return n}function y(e,t,i,n){return g(e,i?n?o:a:n?a:r,t)}function _(e,t,i,n){return v(e,i?n?o:a:n?a:r,t)}function b(e,t,i,n){return v(e,i?n?o:a:n?a:r,t)}function x(e,t,i,n,r){return t.xmin=l(e,i.xmin),t.ymin=c(e,i.ymin),t.xmax=l(e,i.xmax),t.ymax=c(e,i.ymax),t!==i&&(n&&(t.zmin=i.zmin,t.zmax=i.zmax),r&&(t.mmin=i.mmin,t.mmax=i.mmax)),t}function w(e,t,i,n,r){return t.points=h(e,i.points,n,r),t}function T(e,t,i,n,r){return t.x=l(e,i.x),t.y=c(e,i.y),t!==i&&(n&&(t.z=i.z),r&&(t.m=i.m)),t}function S(e,t,i,n,r){const a=d(e,i.rings,n,r);return a?(t.rings=a,t):null}function O(e,t,i,n,r){const a=p(e,i.paths,n,r);return a?(t.paths=a,t):null}function C(e,t){return e&&t?Object(n["f"])(t)?T(e,{},t,!1,!1):Object(n["h"])(t)?O(e,{},t,!1,!1):Object(n["g"])(t)?S(e,{},t,!1,!1):Object(n["e"])(t)?w(e,{},t,!1,!1):Object(n["d"])(t)?x(e,{},t,!1,!1):null:null}function k(e,t,i,n,r){return t.points=y(e,i.points,n,r),t}function P(e,t,i,n,r){return t.x=f(e,i.x),t.y=m(e,i.y),t!==i&&(n&&(t.z=i.z),r&&(t.m=i.m)),t}function E(e,t,i,n,r){return t.rings=b(e,i.rings,n,r),t}function A(e,t,i,n,r){return t.paths=_(e,i.paths,n,r),t}},"0156":function(e,t,i){var n=i("6d8b");function r(e,t,i){i=i||{};var r=e.coordinateSystem,a=t.axis,o={},s=a.getAxesOnZeroOf()[0],l=a.position,c=s?"onZero":l,u=a.dim,h=r.getRect(),d=[h.x,h.x+h.width,h.y,h.y+h.height],p={left:0,right:1,top:0,bottom:1,onZero:2},f=t.get("offset")||0,m="x"===u?[d[2]-f,d[3]+f]:[d[0]-f,d[1]+f];if(s){var g=s.toGlobalCoord(s.dataToCoord(0));m[p.onZero]=Math.max(Math.min(g,m[1]),m[0])}o.position=["y"===u?m[p[c]]:d[0],"x"===u?m[p[c]]:d[3]],o.rotation=Math.PI/2*("x"===u?0:1);var v={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=v[l],o.labelOffset=s?m[p[l]]-m[p.onZero]:0,t.get("axisTick.inside")&&(o.tickDirection=-o.tickDirection),n.retrieve(i.labelInside,t.get("axisLabel.inside"))&&(o.labelDirection=-o.labelDirection);var y=t.get("axisLabel.rotate");return o.labelRotate="top"===c?-y:y,o.z2=1,o}t.layout=r},"01ed":function(e,t,i){var n=i("3eba"),r=i("6d8b"),a=i("2306");i("5aa9"),i("af24"),n.extendComponentView({type:"grid",render:function(e,t){this.group.removeAll(),e.get("show")&&this.group.add(new a.Rect({shape:e.coordinateSystem.getRect(),style:r.defaults({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))}}),n.registerPreprocessor((function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})}))},"01ef":function(e,t){function i(e,t,i){var n=e.target,r=n.position;r[0]+=t,r[1]+=i,n.dirty()}function n(e,t,i,n){var r=e.target,a=e.zoomLimit,o=r.position,s=r.scale,l=e.zoom=e.zoom||1;if(l*=t,a){var c=a.min||0,u=a.max||1/0;l=Math.max(Math.min(u,l),c)}var h=l/e.zoom;e.zoom=l,o[0]-=(i-o[0])*(h-1),o[1]-=(n-o[1])*(h-1),s[0]*=h,s[1]*=h,r.dirty()}t.updateViewOnPan=i,t.updateViewOnZoom=n},"025c":function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return l}));var n=i("b2b2"),r=i("a915"),a=i("f408"),o=i("1a54");class s{constructor(e,t,i,n=null){this.elevationInfo=e,this.defaultZ=t,this.view=i,this.excludeGraphics=n}screenToMap(e){if(Object(n["k"])(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(r["f"])(e.x,e.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);const t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(r["f"])(e.x,e.y),this.elevationInfo,0,this.excludeGraphics);return Object(n["k"])(t)&&(t.z=void 0),t}mapToScreen(e){const t=Object(o["d"])(e.x,e.y,Object(a["a"])(this.view,e,this.elevationInfo),e.spatialReference);return this.view.toScreen(t)}}class l{constructor(e,t,i=[]){this.view=e,this.elevationInfo=t,this.exclude=i}screenToMap(e){const t=this.view.toMap(e,{exclude:this.exclude});return Object(n["k"])(t)&&(t.z=Object(a["f"])(t,this.view,this.elevationInfo)),t}mapToScreen(e){let t=e;return Object(n["k"])(this.elevationInfo)&&(t=Object(o["d"])(e.x,e.y,Object(a["a"])(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(t)}}},"0352":function(e,t,i){var n=i("6cb7"),r=i("b12f"),a=i("0f99"),o=a.detectSourceFormat,s=i("93d0"),l=s.SERIES_LAYOUT_BY_COLUMN;n.extend({type:"dataset",defaultOption:{seriesLayoutBy:l,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){o(this)}}),r.extend({type:"dataset"})},"044a":function(e,t,i){},"045f":function(e,t,i){"use strict";var n=i("be09"),r=i("a559"),a=i("8362"),o=function(e){var t={};return e?(e.trim().split("\n").forEach((function(e){var i=e.indexOf(":"),n=e.slice(0,i).trim().toLowerCase(),r=e.slice(i+1).trim();"undefined"===typeof t[n]?t[n]=r:Array.isArray(t[n])?t[n].push(r):t[n]=[t[n],r]})),t):t};function s(e,t){for(var i=0;i<e.length;i++)t(e[i])}function l(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function c(e,t,i){var n=e;return a(t)?(i=t,"string"===typeof e&&(n={uri:e})):n=r({},t,{uri:e}),n.callback=i,n}function u(e,t,i){return t=c(e,t,i),h(t)}function h(e){if("undefined"===typeof e.callback)throw new Error("callback argument missing");var t=!1,i=function(i,n,r){t||(t=!0,e.callback(i,n,r))};function n(){4===p.readyState&&setTimeout(s,0)}function r(){var e=void 0;if(e=p.response?p.response:p.responseText||d(p),b)try{e=JSON.parse(e)}catch(t){}return e}function a(e){return clearTimeout(f),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,i(e,x)}function s(){if(!h){var t;clearTimeout(f),t=e.useXDR&&void 0===p.status?200:1223===p.status?204:p.status;var n=x,a=null;return 0!==t?(n={body:r(),statusCode:t,method:g,headers:{},url:m,rawRequest:p},p.getAllResponseHeaders&&(n.headers=o(p.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),i(a,n,n.body)}}var c,h,p=e.xhr||null;p||(p=e.cors||e.useXDR?new u.XDomainRequest:new u.XMLHttpRequest);var f,m=p.url=e.uri||e.url,g=p.method=e.method||"GET",v=e.body||e.data,y=p.headers=e.headers||{},_=!!e.sync,b=!1,x={body:void 0,headers:{},statusCode:0,method:g,url:m,rawRequest:p};if("json"in e&&!1!==e.json&&(b=!0,y["accept"]||y["Accept"]||(y["Accept"]="application/json"),"GET"!==g&&"HEAD"!==g&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),v=JSON.stringify(!0===e.json?v:e.json))),p.onreadystatechange=n,p.onload=s,p.onerror=a,p.onprogress=function(){},p.onabort=function(){h=!0},p.ontimeout=a,p.open(g,m,!_,e.username,e.password),_||(p.withCredentials=!!e.withCredentials),!_&&e.timeout>0&&(f=setTimeout((function(){if(!h){h=!0,p.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",a(e)}}),e.timeout)),p.setRequestHeader)for(c in y)y.hasOwnProperty(c)&&p.setRequestHeader(c,y[c]);else if(e.headers&&!l(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(p.responseType=e.responseType),"beforeSend"in e&&"function"===typeof e.beforeSend&&e.beforeSend(p),p.send(v||null),p}function d(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(i){}return null}function p(){}e.exports=u,e.exports.default=u,u.XMLHttpRequest=n.XMLHttpRequest||p,u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:n.XDomainRequest,s(["get","put","post","patch","head","delete"],(function(e){u["delete"===e?"del":e]=function(t,i,n){return i=c(t,i,n),i.method=e.toUpperCase(),h(i)}}))},"04f6":function(e,t){var i=32,n=7;function r(e){var t=0;while(e>=i)t|=1&e,e>>=1;return e+t}function a(e,t,i,n){var r=t+1;if(r===i)return 1;if(n(e[r++],e[t])<0){while(r<i&&n(e[r],e[r-1])<0)r++;o(e,t,r)}else while(r<i&&n(e[r],e[r-1])>=0)r++;return r-t}function o(e,t,i){i--;while(t<i){var n=e[t];e[t++]=e[i],e[i--]=n}}function s(e,t,i,n,r){for(n===t&&n++;n<i;n++){var a,o=e[n],s=t,l=n;while(s<l)a=s+l>>>1,r(o,e[a])<0?l=a:s=a+1;var c=n-s;switch(c){case 3:e[s+3]=e[s+2];case 2:e[s+2]=e[s+1];case 1:e[s+1]=e[s];break;default:while(c>0)e[s+c]=e[s+c-1],c--}e[s]=o}}function l(e,t,i,n,r,a){var o=0,s=0,l=1;if(a(e,t[i+r])>0){s=n-r;while(l<s&&a(e,t[i+r+l])>0)o=l,l=1+(l<<1),l<=0&&(l=s);l>s&&(l=s),o+=r,l+=r}else{s=r+1;while(l<s&&a(e,t[i+r-l])<=0)o=l,l=1+(l<<1),l<=0&&(l=s);l>s&&(l=s);var c=o;o=r-l,l=r-c}o++;while(o<l){var u=o+(l-o>>>1);a(e,t[i+u])>0?o=u+1:l=u}return l}function c(e,t,i,n,r,a){var o=0,s=0,l=1;if(a(e,t[i+r])<0){s=r+1;while(l<s&&a(e,t[i+r-l])<0)o=l,l=1+(l<<1),l<=0&&(l=s);l>s&&(l=s);var c=o;o=r-l,l=r-c}else{s=n-r;while(l<s&&a(e,t[i+r+l])>=0)o=l,l=1+(l<<1),l<=0&&(l=s);l>s&&(l=s),o+=r,l+=r}o++;while(o<l){var u=o+(l-o>>>1);a(e,t[i+u])<0?l=u:o=u+1}return l}function u(e,t){var i,r,a=n,o=0,s=0;o=e.length;var u=[];function h(e,t){i[s]=e,r[s]=t,s+=1}function d(){while(s>1){var e=s-2;if(e>=1&&r[e-1]<=r[e]+r[e+1]||e>=2&&r[e-2]<=r[e]+r[e-1])r[e-1]<r[e+1]&&e--;else if(r[e]>r[e+1])break;f(e)}}function p(){while(s>1){var e=s-2;e>0&&r[e-1]<r[e+1]&&e--,f(e)}}function f(n){var a=i[n],o=r[n],u=i[n+1],h=r[n+1];r[n]=o+h,n===s-3&&(i[n+1]=i[n+2],r[n+1]=r[n+2]),s--;var d=c(e[u],e,a,o,0,t);a+=d,o-=d,0!==o&&(h=l(e[a+o-1],e,u,h,h-1,t),0!==h&&(o<=h?m(a,o,u,h):g(a,o,u,h)))}function m(i,r,o,s){var h=0;for(h=0;h<r;h++)u[h]=e[i+h];var d=0,p=o,f=i;if(e[f++]=e[p++],0!==--s)if(1!==r){var m,g,v,y=a;while(1){m=0,g=0,v=!1;do{if(t(e[p],u[d])<0){if(e[f++]=e[p++],g++,m=0,0===--s){v=!0;break}}else if(e[f++]=u[d++],m++,g=0,1===--r){v=!0;break}}while((m|g)<y);if(v)break;do{if(m=c(e[p],u,d,r,0,t),0!==m){for(h=0;h<m;h++)e[f+h]=u[d+h];if(f+=m,d+=m,r-=m,r<=1){v=!0;break}}if(e[f++]=e[p++],0===--s){v=!0;break}if(g=l(u[d],e,p,s,0,t),0!==g){for(h=0;h<g;h++)e[f+h]=e[p+h];if(f+=g,p+=g,s-=g,0===s){v=!0;break}}if(e[f++]=u[d++],1===--r){v=!0;break}y--}while(m>=n||g>=n);if(v)break;y<0&&(y=0),y+=2}if(a=y,a<1&&(a=1),1===r){for(h=0;h<s;h++)e[f+h]=e[p+h];e[f+s]=u[d]}else{if(0===r)throw new Error;for(h=0;h<r;h++)e[f+h]=u[d+h]}}else{for(h=0;h<s;h++)e[f+h]=e[p+h];e[f+s]=u[d]}else for(h=0;h<r;h++)e[f+h]=u[d+h]}function g(i,r,o,s){var h=0;for(h=0;h<s;h++)u[h]=e[o+h];var d=i+r-1,p=s-1,f=o+s-1,m=0,g=0;if(e[f--]=e[d--],0!==--r)if(1!==s){var v=a;while(1){var y=0,_=0,b=!1;do{if(t(u[p],e[d])<0){if(e[f--]=e[d--],y++,_=0,0===--r){b=!0;break}}else if(e[f--]=u[p--],_++,y=0,1===--s){b=!0;break}}while((y|_)<v);if(b)break;do{if(y=r-c(u[p],e,i,r,r-1,t),0!==y){for(f-=y,d-=y,r-=y,g=f+1,m=d+1,h=y-1;h>=0;h--)e[g+h]=e[m+h];if(0===r){b=!0;break}}if(e[f--]=u[p--],1===--s){b=!0;break}if(_=s-l(e[d],u,0,s,s-1,t),0!==_){for(f-=_,p-=_,s-=_,g=f+1,m=p+1,h=0;h<_;h++)e[g+h]=u[m+h];if(s<=1){b=!0;break}}if(e[f--]=e[d--],0===--r){b=!0;break}v--}while(y>=n||_>=n);if(b)break;v<0&&(v=0),v+=2}if(a=v,a<1&&(a=1),1===s){for(f-=r,d-=r,g=f+1,m=d+1,h=r-1;h>=0;h--)e[g+h]=e[m+h];e[f]=u[p]}else{if(0===s)throw new Error;for(m=f-(s-1),h=0;h<s;h++)e[m+h]=u[h]}}else{for(f-=r,d-=r,g=f+1,m=d+1,h=r-1;h>=0;h--)e[g+h]=e[m+h];e[f]=u[p]}else for(m=f-(s-1),h=0;h<s;h++)e[m+h]=u[h]}i=[],r=[],this.mergeRuns=d,this.forceMergeRuns=p,this.pushRun=h}function h(e,t,n,o){n||(n=0),o||(o=e.length);var l=o-n;if(!(l<2)){var c=0;if(l<i)return c=a(e,n,o,t),void s(e,n,o,n+c,t);var h=new u(e,t),d=r(l);do{if(c=a(e,n,o,t),c<d){var p=l;p>d&&(p=d),s(e,n,n+p,n+c,t),c=p}h.pushRun(n,c),h.mergeRuns(),l-=c,n+=c}while(0!==l);h.forceMergeRuns()}}e.exports=h},"058e":function(e,t,i){},"0655":function(e,t,i){var n=i("8728"),r=1e-8;function a(e,t){return Math.abs(e-t)<r}function o(e,t,i){var r=0,o=e[0];if(!o)return!1;for(var s=1;s<e.length;s++){var l=e[s];r+=n(o[0],o[1],l[0],l[1],t,i),o=l}var c=e[0];return a(o[0],c[0])&&a(o[1],c[1])||(r+=n(o[0],o[1],c[0],c[1],t,i)),0!==r}t.contain=o},"068a":function(e){e.exports=JSON.parse('{"gd":{"url":"//webapi.amap.com/maps?v=1.4.15&key=96c44e4b9d6a4bb04b520127932bdf0e"},"loca":{"url":"//webapi.amap.com/loca?v=1.3.2&key=96c44e4b9d6a4bb04b520127932bdf0e"}}')},"06ad":function(e,t,i){var n=i("4436"),r=i("41ef"),a=i("6d8b"),o=a.isArrayLike,s=Array.prototype.slice;function l(e,t){return e[t]}function c(e,t,i){e[t]=i}function u(e,t,i){return(t-e)*i+e}function h(e,t,i){return i>.5?t:e}function d(e,t,i,n,r){var a=e.length;if(1===r)for(var o=0;o<a;o++)n[o]=u(e[o],t[o],i);else{var s=a&&e[0].length;for(o=0;o<a;o++)for(var l=0;l<s;l++)n[o][l]=u(e[o][l],t[o][l],i)}}function p(e,t,i){var n=e.length,r=t.length;if(n!==r){var a=n>r;if(a)e.length=r;else for(var o=n;o<r;o++)e.push(1===i?t[o]:s.call(t[o]))}var l=e[0]&&e[0].length;for(o=0;o<e.length;o++)if(1===i)isNaN(e[o])&&(e[o]=t[o]);else for(var c=0;c<l;c++)isNaN(e[o][c])&&(e[o][c]=t[o][c])}function f(e,t,i){if(e===t)return!0;var n=e.length;if(n!==t.length)return!1;if(1===i){for(var r=0;r<n;r++)if(e[r]!==t[r])return!1}else{var a=e[0].length;for(r=0;r<n;r++)for(var o=0;o<a;o++)if(e[r][o]!==t[r][o])return!1}return!0}function m(e,t,i,n,r,a,o,s,l){var c=e.length;if(1===l)for(var u=0;u<c;u++)s[u]=g(e[u],t[u],i[u],n[u],r,a,o);else{var h=e[0].length;for(u=0;u<c;u++)for(var d=0;d<h;d++)s[u][d]=g(e[u][d],t[u][d],i[u][d],n[u][d],r,a,o)}}function g(e,t,i,n,r,a,o){var s=.5*(i-e),l=.5*(n-t);return(2*(t-i)+s+l)*o+(-3*(t-i)-2*s-l)*a+s*r+t}function v(e){if(o(e)){var t=e.length;if(o(e[0])){for(var i=[],n=0;n<t;n++)i.push(s.call(e[n]));return i}return s.call(e)}return e}function y(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}function _(e){var t=e[e.length-1].value;return o(t&&t[0])?2:1}function b(e,t,i,a,s,l){var c=e._getter,v=e._setter,b="spline"===t,x=a.length;if(x){var w,T=a[0].value,S=o(T),O=!1,C=!1,k=S?_(a):0;a.sort((function(e,t){return e.time-t.time})),w=a[x-1].time;for(var P=[],E=[],A=a[0].value,I=!0,M=0;M<x;M++){P.push(a[M].time/w);var D=a[M].value;if(S&&f(D,A,k)||!S&&D===A||(I=!1),A=D,"string"===typeof D){var j=r.parse(D);j?(D=j,O=!0):C=!0}E.push(D)}if(l||!I){var L=E[x-1];for(M=0;M<x-1;M++)S?p(E[M],L,k):!isNaN(E[M])||isNaN(L)||C||O||(E[M]=L);S&&p(c(e._target,s),L,k);var R,N,z,B,V,F,U=0,G=0;if(O)var H=[0,0,0,0];var W=function(e,t){var i;if(t<0)i=0;else if(t<G){for(R=Math.min(U+1,x-1),i=R;i>=0;i--)if(P[i]<=t)break;i=Math.min(i,x-2)}else{for(i=U;i<x;i++)if(P[i]>t)break;i=Math.min(i-1,x-2)}U=i,G=t;var n=P[i+1]-P[i];if(0!==n)if(N=(t-P[i])/n,b)if(B=E[i],z=E[0===i?i:i-1],V=E[i>x-2?x-1:i+1],F=E[i>x-3?x-1:i+2],S)m(z,B,V,F,N,N*N,N*N*N,c(e,s),k);else{if(O)r=m(z,B,V,F,N,N*N,N*N*N,H,1),r=y(H);else{if(C)return h(B,V,N);r=g(z,B,V,F,N,N*N,N*N*N)}v(e,s,r)}else if(S)d(E[i],E[i+1],N,c(e,s),k);else{var r;if(O)d(E[i],E[i+1],N,H,1),r=y(H);else{if(C)return h(E[i],E[i+1],N);r=u(E[i],E[i+1],N)}v(e,s,r)}},q=new n({target:e._target,life:w,loop:e._loop,delay:e._delay,onframe:W,ondestroy:i});return t&&"spline"!==t&&(q.easing=t),q}}}var x=function(e,t,i,n){this._tracks={},this._target=e,this._loop=t||!1,this._getter=i||l,this._setter=n||c,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};x.prototype={when:function(e,t){var i=this._tracks;for(var n in t)if(t.hasOwnProperty(n)){if(!i[n]){i[n]=[];var r=this._getter(this._target,n);if(null==r)continue;0!==e&&i[n].push({time:0,value:v(r)})}i[n].push({time:e,value:t[n]})}return this},during:function(e){return this._onframeList.push(e),this},pause:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].pause();this._paused=!0},resume:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var e=this._doneList,t=e.length,i=0;i<t;i++)e[i].call(this)},start:function(e,t){var i,n=this,r=0,a=function(){r--,r||n._doneCallback()};for(var o in this._tracks)if(this._tracks.hasOwnProperty(o)){var s=b(this,e,a,this._tracks[o],o,t);s&&(this._clipList.push(s),r++,this.animation&&this.animation.addClip(s),i=s)}if(i){var l=i.onframe;i.onframe=function(e,t){l(e,t);for(var i=0;i<n._onframeList.length;i++)n._onframeList[i](e,t)}}return r||this._doneCallback(),this},stop:function(e){for(var t=this._clipList,i=this.animation,n=0;n<t.length;n++){var r=t[n];e&&r.onframe(this._target,1),i&&i.removeClip(r)}t.length=0},delay:function(e){return this._delay=e,this},done:function(e){return e&&this._doneList.push(e),this},getClips:function(){return this._clipList}};var w=x;e.exports=w},"07d7":function(e,t,i){var n=i("6d8b"),r=i("41ef"),a=i("607d"),o=i("65ed"),s=i("22d1"),l=i("eda2"),c=n.each,u=l.toCamelCase,h=["","-webkit-","-moz-","-o-"],d="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;";function p(e){var t="cubic-bezier(0.23, 1, 0.32, 1)",i="left "+e+"s "+t+",top "+e+"s "+t;return n.map(h,(function(e){return e+"transition:"+i})).join(";")}function f(e){var t=[],i=e.get("fontSize"),n=e.getTextColor();n&&t.push("color:"+n),t.push("font:"+e.getFont());var r=e.get("lineHeight");null==r&&(r=Math.round(3*i/2)),i&&t.push("line-height:"+r+"px");var a=e.get("textShadowColor"),o=e.get("textShadowBlur")||0,s=e.get("textShadowOffsetX")||0,l=e.get("textShadowOffsetY")||0;return o&&t.push("text-shadow:"+s+"px "+l+"px "+o+"px "+a),c(["decoration","align"],(function(i){var n=e.get(i);n&&t.push("text-"+i+":"+n)})),t.join(";")}function m(e){var t=[],i=e.get("transitionDuration"),n=e.get("backgroundColor"),a=e.getModel("textStyle"),o=e.get("padding");return i&&t.push(p(i)),n&&(s.canvasSupported?t.push("background-Color:"+n):(t.push("background-Color:#"+r.toHex(n)),t.push("filter:alpha(opacity=70)"))),c(["width","color","radius"],(function(i){var n="border-"+i,r=u(n),a=e.get(r);null!=a&&t.push(n+":"+a+("color"===i?"":"px"))})),t.push(f(a)),null!=o&&t.push("padding:"+l.normalizeCssArray(o).join("px ")+"px"),t.join(";")+";"}function g(e,t,i,n,r){var a=t&&t.painter;if(i){var s=a&&a.getViewportRoot();s&&o.transformLocalCoord(e,s,document.body,n,r)}else{e[0]=n,e[1]=r;var l=a&&a.getViewportRootOffset();l&&(e[0]+=l.offsetLeft,e[1]+=l.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}function v(e,t,i){if(s.wxa)return null;var n=document.createElement("div");n.domBelongToZr=!0,this.el=n;var r=this._zr=t.getZr(),o=this._appendToBody=i&&i.appendToBody;this._styleCoord=[0,0,0,0],g(this._styleCoord,r,o,t.getWidth()/2,t.getHeight()/2),o?document.body.appendChild(n):e.appendChild(n),this._container=e,this._show=!1,this._hideTimeout;var l=this;n.onmouseenter=function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0},n.onmousemove=function(e){if(e=e||window.event,!l._enterable){var t=r.handler,i=r.painter.getViewportRoot();a.normalizeEvent(i,e,!0),t.dispatch("mousemove",e)}},n.onmouseleave=function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1}}v.prototype={constructor:v,_enterable:!0,update:function(e){var t=this._container,i=t.currentStyle||document.defaultView.getComputedStyle(t),n=t.style;"absolute"!==n.position&&"absolute"!==i.position&&(n.position="relative");var r=e.get("alwaysShowContent");r&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var e=this._styleCoord[2],t=this._styleCoord[3],i=e*this._zr.getWidth(),n=t*this._zr.getHeight();this.moveTo(i,n)},show:function(e){clearTimeout(this._hideTimeout);var t=this.el,i=this._styleCoord;t.style.cssText=d+m(e)+";left:"+i[0]+"px;top:"+i[1]+"px;"+(e.get("extraCssText")||""),t.style.display=t.innerHTML?"block":"none",t.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(e){this.el.innerHTML=null==e?"":e},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el;return[e.clientWidth,e.clientHeight]},moveTo:function(e,t){var i=this._styleCoord;g(i,this._zr,this._appendToBody,e,t);var n=this.el.style;n.left=i[0]+"px",n.top=i[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(n.bind(this.hide,this),e)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var e=this.el.clientWidth,t=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var i=document.defaultView.getComputedStyle(this.el);i&&(e+=parseInt(i.borderLeftWidth,10)+parseInt(i.borderRightWidth,10),t+=parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10))}return{width:e,height:t}}};var y=v;e.exports=y},"0a27":function(e,t,i){},"0a6d":function(e,t,i){i("e4d1"),i("7f72")},"0b44":function(e,t,i){var n=i("607d"),r=function(){this._track=[]};function a(e){var t=e[1][0]-e[0][0],i=e[1][1]-e[0][1];return Math.sqrt(t*t+i*i)}function o(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}r.prototype={constructor:r,recognize:function(e,t,i){return this._doTrack(e,t,i),this._recognize(e)},clear:function(){return this._track.length=0,this},_doTrack:function(e,t,i){var r=e.touches;if(r){for(var a={points:[],touches:[],target:t,event:e},o=0,s=r.length;o<s;o++){var l=r[o],c=n.clientToLocal(i,l,{});a.points.push([c.zrX,c.zrY]),a.touches.push(l)}this._track.push(a)}},_recognize:function(e){for(var t in s)if(s.hasOwnProperty(t)){var i=s[t](this._track,e);if(i)return i}}};var s={pinch:function(e,t){var i=e.length;if(i){var n=(e[i-1]||{}).points,r=(e[i-2]||{}).points||n;if(r&&r.length>1&&n&&n.length>1){var s=a(n)/a(r);!isFinite(s)&&(s=1),t.pinchScale=s;var l=o(n);return t.pinchX=l[0],t.pinchY=l[1],{type:"pinch",target:e[0].target,event:t}}}}},l=r;e.exports=l},"0b4b":function(e,t,i){i("d28f"),i("f14c"),i("0ee7"),i("ebf9")},"0c37":function(e,t,i){var n=i("6d8b"),r="--\x3e",a=function(e){return e.get("autoCurveness")||null},o=function(e,t){var i=a(e),r=20,o=[];if("number"===typeof i)r=i;else if(n.isArray(i))return void(e.__curvenessList=i);t>r&&(r=t);var s=r%2?r+2:r+3;o=[];for(var l=0;l<s;l++)o.push((l%2?l+1:l)/10*(l%2?-1:1));e.__curvenessList=o},s=function(e,t,i){var n=[e.id,e.dataIndex].join("."),a=[t.id,t.dataIndex].join(".");return[i.uid,n,a].join(r)},l=function(e){var t=e.split(r);return[t[0],t[2],t[1]].join(r)},c=function(e,t){var i=s(e.node1,e.node2,t);return t.__edgeMap[i]},u=function(e,t){var i=h(s(e.node1,e.node2,t),t),n=h(s(e.node2,e.node1,t),t);return i+n},h=function(e,t){var i=t.__edgeMap;return i[e]?i[e].length:0};function d(e){a(e)&&(e.__curvenessList=[],e.__edgeMap={},o(e))}function p(e,t,i,n){if(a(i)){var r=s(e,t,i),o=i.__edgeMap,c=o[l(r)];o[r]&&!c?o[r].isForward=!0:c&&o[r]&&(c.isForward=!0,o[r].isForward=!1),o[r]=o[r]||[],o[r].push(n)}}function f(e,t,i,r){var d=a(t),p=n.isArray(d);if(!d)return null;var f=c(e,t);if(!f)return null;for(var m=-1,g=0;g<f.length;g++)if(f[g]===i){m=g;break}var v=u(e,t);o(t,v),e.lineStyle=e.lineStyle||{};var y=s(e.node1,e.node2,t),_=t.__curvenessList,b=p||v%2?0:1;if(f.isForward)return _[b+m];var x=l(y),w=h(x,t),T=_[m+w+b];return r?p?d&&0===d[0]?(w+b)%2?T:-T:((w%2?0:1)+b)%2?T:-T:(w+b)%2?T:-T:_[m+w+b]}t.initCurvenessList=d,t.createEdgeMapForCurveness=p,t.getCurvenessForEdge=f},"0cb9":function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return a}));var n=i("b2b2"),r=i("1a54");function a(e){return"array"in e}function o(e,t,i="ground"){if(Object(r["c"])(t))return e.getElevation(t.x,t.y,t.z||0,t.spatialReference,i);if(a(t)){let r=t.offset;return e.getElevation(t.array[r++],t.array[r++],t.array[r]||0,Object(n["r"])(t.spatialReference,e.spatialReference),i)}return e.getElevation(t[0],t[1],t[2]||0,e.spatialReference,i)}},"0cbc":function(e,t,i){"use strict";i("939c")},"0cde":function(e,t,i){var n=i("1687"),r=i("401b"),a=n.identity,o=5e-5;function s(e){return e>o||e<-o}var l=function(e){e=e||{},e.position||(this.position=[0,0]),null==e.rotation&&(this.rotation=0),e.scale||(this.scale=[1,1]),this.origin=this.origin||null},c=l.prototype;c.transform=null,c.needLocalTransform=function(){return s(this.rotation)||s(this.position[0])||s(this.position[1])||s(this.scale[0]-1)||s(this.scale[1]-1)};var u=[];c.updateTransform=function(){var e=this.parent,t=e&&e.transform,i=this.needLocalTransform(),r=this.transform;if(i||t){r=r||n.create(),i?this.getLocalTransform(r):a(r),t&&(i?n.mul(r,e.transform,r):n.copy(r,e.transform)),this.transform=r;var o=this.globalScaleRatio;if(null!=o&&1!==o){this.getGlobalScale(u);var s=u[0]<0?-1:1,l=u[1]<0?-1:1,c=((u[0]-s)*o+s)/u[0]||0,h=((u[1]-l)*o+l)/u[1]||0;r[0]*=c,r[1]*=c,r[2]*=h,r[3]*=h}this.invTransform=this.invTransform||n.create(),n.invert(this.invTransform,r)}else r&&a(r)},c.getLocalTransform=function(e){return l.getLocalTransform(this,e)},c.setTransform=function(e){var t=this.transform,i=e.dpr||1;t?e.setTransform(i*t[0],i*t[1],i*t[2],i*t[3],i*t[4],i*t[5]):e.setTransform(i,0,0,i,0,0)},c.restoreTransform=function(e){var t=e.dpr||1;e.setTransform(t,0,0,t,0,0)};var h=[],d=n.create();c.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],i=e[2]*e[2]+e[3]*e[3],n=this.position,r=this.scale;s(t-1)&&(t=Math.sqrt(t)),s(i-1)&&(i=Math.sqrt(i)),e[0]<0&&(t=-t),e[3]<0&&(i=-i),n[0]=e[4],n[1]=e[5],r[0]=t,r[1]=i,this.rotation=Math.atan2(-e[1]/i,e[0]/t)}},c.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(n.mul(h,e.invTransform,t),t=h);var i=this.origin;i&&(i[0]||i[1])&&(d[4]=i[0],d[5]=i[1],n.mul(h,t,d),h[4]-=i[0],h[5]-=i[1],t=h),this.setLocalTransform(t)}},c.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},c.transformCoordToLocal=function(e,t){var i=[e,t],n=this.invTransform;return n&&r.applyTransform(i,i,n),i},c.transformCoordToGlobal=function(e,t){var i=[e,t],n=this.transform;return n&&r.applyTransform(i,i,n),i},l.getLocalTransform=function(e,t){t=t||[],a(t);var i=e.origin,r=e.scale||[1,1],o=e.rotation||0,s=e.position||[0,0];return i&&(t[4]-=i[0],t[5]-=i[1]),n.scale(t,t,r),o&&n.rotate(t,t,o),i&&(t[4]+=i[0],t[5]+=i[1]),t[4]+=s[0],t[5]+=s[1],t};var p=l;e.exports=p},"0d96":function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return T})),i.d(t,"c",(function(){return _})),i.d(t,"d",(function(){return b}));var n,r=i("02f1"),a=i("0fc4"),o=i("3349"),s=i("38862"),l=i("690a"),c=i("4377"),u=i("7c1d"),h=i("d272"),d=i("2f98"),p=i("d0cb"),f=i("501b"),m=i("7079"),g=i("6a07"),v=i("be24"),y=i("ebd5");function _(e){const t=new l["a"],i=e.signedDistanceFieldEnabled;if(t.include(u["a"]),t.include(p["a"],e),t.include(h["a"],e),6===e.output)return t.include(m["b"],e),t;t.include(d["a"]),t.fragment.include(f["a"]),t.fragment.include(c["a"]),t.include(v["a"],e),t.varyings.add("vcolor","vec4"),t.varyings.add("vtc","vec2"),t.varyings.add("vsize","vec2"),e.binaryHighlightOcclusionEnabled&&t.varyings.add("voccluded","float"),t.vertex.uniforms.add("screenOffset","vec2").add("anchorPos","vec2").add("textureCoordinateScaleFactor","vec2").add("materialColor","vec4"),i&&t.vertex.uniforms.add("outlineColor","vec4"),e.screenSizePerspectiveEnabled&&t.vertex.uniforms.add("screenSizePerspective","vec4"),(e.debugDrawBorder||e.binaryHighlightOcclusionEnabled)&&t.varyings.add("debugBorderCoords","vec4"),t.attributes.add("uv0","vec2"),t.attributes.add("color","vec4"),t.attributes.add("size","vec2"),t.attributes.add("auxpos2","vec4"),t.vertex.code.add(s["a"]`
    void main(void) {
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);

      if (rejectBySlice(projectAux.posModel)) {
        // Project outside of clip plane
        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
        return;
      }
      vec2 inputSize;
      ${e.screenSizePerspectiveEnabled?s["a"]`
      inputSize = screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);
      vec2 screenOffsetScaled = screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);
         `:s["a"]`
      inputSize = size;
      vec2 screenOffsetScaled = screenOffset;`}

      ${e.vvSize?"inputSize *= vvScale(auxpos2).xx;":""}

      vec2 combinedSize = inputSize * pixelRatio;
      vec4 quadOffset = vec4(0.0);

      ${e.occlusionTestEnabled||e.binaryHighlightOcclusionEnabled?"bool visible = testVisibilityHUD(posProj);":""}

      ${e.binaryHighlightOcclusionEnabled?"voccluded = visible ? 0.0 : 1.0;":""}
    `);const n=s["a"]`
      vec2 uv01 = floor(uv0);
      vec2 uv = uv0 - uv01;
      quadOffset.xy = ((uv01 - anchorPos) * 2.0 * combinedSize + screenOffsetScaled) / viewport.zw * posProj.w;
  `,r=e.pixelSnappingEnabled?i?s["a"]`
  posProj = alignToPixelOrigin(posProj, viewport.zw) + quadOffset;`:s["a"]`
  posProj += quadOffset;
  if (inputSize.x == size.x) {
    posProj = alignToPixelOrigin(posProj, viewport.zw);
  }`:s["a"]`posProj += quadOffset;`;t.vertex.code.add(s["a"]`
      ${e.occlusionTestEnabled?"if (visible) {":""}
      ${n}
      ${e.vvColor?"vcolor = vvGetColor(auxpos2, vvColorValues, vvColorColors) * materialColor;":"vcolor = color / 255.0 * materialColor;"}

      bool alphaDiscard = vcolor.a < ${s["a"].float(y["c"])};
      ${i?`alphaDiscard = alphaDiscard && outlineColor.a < ${s["a"].float(y["c"])};`:""}
      if (alphaDiscard) {
        // "early discard" if both symbol color (= fill) and outline color (if applicable) are transparent
        gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
        return;
      } else {
        ${r}
        gl_Position = posProj;
      }

      vtc = uv * textureCoordinateScaleFactor;

      ${e.debugDrawBorder?"debugBorderCoords = vec4(uv01, 1.5 / combinedSize);":""}
      vsize = inputSize;
      ${e.occlusionTestEnabled?s["a"]`} else { vtc = vec2(0.0);
        ${e.debugDrawBorder?"debugBorderCoords = vec4(0.5, 0.5, 1.5 / combinedSize);}":"}"}`:""}
    }
    `),t.fragment.uniforms.add("tex","sampler2D"),i&&(t.fragment.uniforms.add("outlineColor","vec4"),t.fragment.uniforms.add("outlineSize","float"));const a=e.debugDrawBorder?s["a"]`(isBorder > 0.0 ? 0.0 : ${s["a"].float(y["b"])})`:s["a"].float(y["b"]),o=s["a"]`
    ${e.debugDrawBorder?s["a"]`
      float isBorder = float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));`:""}

    ${i?s["a"]`
      vec4 fillPixelColor = vcolor;

      // Attempt to sample texel centers to avoid that thin cross outlines
      // disappear with large symbol sizes.
      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/7058#issuecomment-603041
      const float txSize = 128.0;
      const float texelSize = 1.0 / txSize;
      // Calculate how much we have to add/subtract to/from each texel to reach the size of an onscreen pixel
      vec2 scaleFactor = (vsize - txSize) * texelSize;
      vec2 samplePos = vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;

      // Get distance and map it into [-0.5, 0.5]
      float d = rgba2float(texture2D(tex, samplePos)) - 0.5;

      // Distance in output units (i.e. pixels)
      float dist = d * vsize.x;

      // Create smooth transition from the icon into its outline
      float fillAlphaFactor = clamp(0.5 - dist, 0.0, 1.0);
      fillPixelColor.a *= fillAlphaFactor;

      if (outlineSize > 0.25) {
        vec4 outlinePixelColor = outlineColor;
        float clampedOutlineSize = min(outlineSize, 0.5*vsize.x);

        // Create smooth transition around outline
        float outlineAlphaFactor = clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);
        outlinePixelColor.a *= outlineAlphaFactor;

        if (
          outlineAlphaFactor + fillAlphaFactor < ${a} ||
          fillPixelColor.a + outlinePixelColor.a < ${s["a"].float(y["c"])}
        ) {
          discard;
        }

        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Description)
        float compositeAlpha = outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);
        vec3 compositeColor = vec3(outlinePixelColor) * outlinePixelColor.a +
          vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);

        gl_FragColor = vec4(compositeColor, compositeAlpha);
      } else {
        if (fillAlphaFactor < ${a}) {
          discard;
        }

        gl_FragColor = premultiplyAlpha(fillPixelColor);
      }

      // visualize SDF:
      // gl_FragColor = vec4(clamp(-dist/vsize.x*2.0, 0.0, 1.0), clamp(dist/vsize.x*2.0, 0.0, 1.0), 0.0, 1.0);
      `:s["a"]`
          vec4 texColor = texture2D(tex, vtc, -0.5);
          if (texColor.a < ${a}) {
            discard;
          }
          gl_FragColor = texColor * premultiplyAlpha(vcolor);
          `}

    ${e.debugDrawBorder?s["a"]`gl_FragColor = mix(gl_FragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder);`:""}
  `;return 7===e.output&&t.fragment.code.add(s["a"]`
      void main() {
        ${o}
        gl_FragColor = vec4(gl_FragColor.a);
      }
      `),0===e.output&&t.fragment.code.add(s["a"]`
    void main() {
      ${o}
      ${e.FrontFacePass?"gl_FragColor.rgb /= gl_FragColor.a;":""}
    }
    `),4===e.output&&(t.include(g["a"]),t.fragment.code.add(s["a"]`
    void main() {
      ${o}
      ${e.binaryHighlightOcclusionEnabled?s["a"]`
          if (voccluded == 1.0) {
            gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);
          } else {
            gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);
          }`:"outputHighlight();"}
    }
    `)),t}function b(e,t=w){return e.textureIsSignedDistanceField?x(e.anchorPos,e.distanceFieldBoundingBox,t):Object(o["c"])(t,e.anchorPos),t}function x(e,t,i){i[0]=e[0]*(t[2]-t[0])+t[0],i[1]=e[1]*(t[3]-t[1])+t[1]}!function(e){function t(e,t,i){e.setUniform4fv("materialColor",t.color),t.textureIsSignedDistanceField&&(t.outlineColor[3]<=0||t.outlineSize<=0?(e.setUniform4fv("outlineColor",a["b"]),e.setUniform1f("outlineSize",0)):(e.setUniform4fv("outlineColor",t.outlineColor),e.setUniform1f("outlineSize",t.outlineSize))),e.setUniform2f("screenOffset",2*t.screenOffset[0]*i,2*t.screenOffset[1]*i),e.setUniform2fv("anchorPos",b(t))}e.bindUniforms=t}(n||(n={}));const w=Object(r["a"])();var T=Object.freeze({__proto__:null,build:_,get HUDMaterial(){return n},calculateAnchorPosForRendering:b})},"0da8":function(e,t,i){var n=i("19eb"),r=i("9850"),a=i("6d8b"),o=i("5e76");function s(e){n.call(this,e)}s.prototype={constructor:s,type:"image",brush:function(e,t){var i=this.style,n=i.image;i.bind(e,this,t);var r=this._image=o.createOrUpdateImage(n,this._image,this,this.onload);if(r&&o.isImageReady(r)){var a=i.x||0,s=i.y||0,l=i.width,c=i.height,u=r.width/r.height;if(null==l&&null!=c?l=c*u:null==c&&null!=l?c=l/u:null==l&&null==c&&(l=r.width,c=r.height),this.setTransform(e),i.sWidth&&i.sHeight){var h=i.sx||0,d=i.sy||0;e.drawImage(r,h,d,i.sWidth,i.sHeight,a,s,l,c)}else if(i.sx&&i.sy){h=i.sx,d=i.sy;var p=l-h,f=c-d;e.drawImage(r,h,d,p,f,a,s,l,c)}else e.drawImage(r,a,s,l,c);null!=i.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))}},getBoundingRect:function(){var e=this.style;return this._rect||(this._rect=new r(e.x||0,e.y||0,e.width||0,e.height||0)),this._rect}},a.inherits(s,n);var l=s;e.exports=l},"0e3a":function(e,t,i){},"0eb9":function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("b2b2"),r=i("8076"),a=i("e92d"),o=(i("82fa"),i("d3cf"));const s=a["a"].getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils");function l(e){return{cachedResult:e.cachedResult,arcade:e.arcade?{func:e.arcade.func,context:e.arcade.modules.arcadeUtils.createExecContext(null,{sr:e.arcade.context.spatialReference}),modules:e.arcade.modules}:null}}function c(e,t,i){return e.arcadeUtils.createFeature(t.attributes,t.geometry,i)}function u(e,t){if(null!=e&&!d(e)){if(!t||!e.arcade)return void s.errorOncePerTick("Arcade support required but not provided");const i=t;i._geometry&&(i._geometry=Object(o["b"])(i._geometry)),e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context,t)}}function h(e){if(null!=e){if(d(e))return e.cachedResult;const t=e.arcade;let i=e.arcade.modules.arcadeUtils.executeFunction(t.func,t.context);return"number"!=typeof i&&(e.cachedResult=0,i=0),i}return 0}function d(e){return null!=e.cachedResult}class p{constructor(){this._meterUnitOffset=0,this._renderUnitOffset=0,this._unit="meters",this._metersPerElevationInfoUnit=1,this._featureExpressionInfoContext=null,this.centerPointInElevationSR=null,this.mode=null}get featureExpressionInfoContext(){return this._featureExpressionInfoContext}get meterUnitOffset(){return this._meterUnitOffset}get unit(){return this._unit}set unit(e){this._unit=e,this._metersPerElevationInfoUnit=Object(r["a"])(e)}reset(){this.mode=null,this._meterUnitOffset=0,this._renderUnitOffset=0,this._featureExpressionInfoContext=null,this.unit="meters"}set offsetMeters(e){this._meterUnitOffset=e,this._renderUnitOffset=0}set offsetElevationInfoUnits(e){this._meterUnitOffset=e*this._metersPerElevationInfoUnit,this._renderUnitOffset=0}addOffsetRenderUnits(e){this._renderUnitOffset+=e}geometryZWithOffset(e,t){const i=this.calculateOffsetRenderUnits(t);return null!=this.featureExpressionInfoContext?i:e+i}calculateOffsetRenderUnits(e){let t=this._meterUnitOffset;const i=this.featureExpressionInfoContext;return null!=i&&(t+=h(i)*this._metersPerElevationInfoUnit),t/e.unitInMeters+this._renderUnitOffset}setFromElevationInfo(e){this.mode=e.mode,this.unit=Object(r["c"])(e.unit)?e.unit:"meters",this.offsetElevationInfoUnits=Object(n["r"])(e.offset,0)}updateFeatureExpressionInfoContext(e,t,i){if(Object(n["j"])(e))return void(this._featureExpressionInfoContext=null);const r=e&&e.arcade;r&&Object(n["k"])(t)&&Object(n["k"])(i)?(this._featureExpressionInfoContext=l(e),u(this._featureExpressionInfoContext,c(r.modules,t,i))):this._featureExpressionInfoContext=e}static fromElevationInfo(e){const t=new p;return Object(n["k"])(e)&&t.setFromElevationInfo(e),t}}},"0ee7":function(e,t,i){var n=i("6d8b"),r=i("2306"),a=i("f934"),o=i("5e97"),s=r.Group,l=["width","height"],c=["x","y"],u=o.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){u.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new s),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new s),this._showController},resetInner:function(){u.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(e,t,i,a,o,s,l){var c=this;u.superCall(this,"renderInner",e,t,i,a,o,s,l);var h=this._controllerGroup,d=t.get("pageIconSize",!0);n.isArray(d)||(d=[d,d]),f("pagePrev",0);var p=t.getModel("pageTextStyle");function f(e,i){var o=e+"DataIndex",s=r.createIcon(t.get("pageIcons",!0)[t.getOrient().name][i],{onclick:n.bind(c._pageGo,c,o,t,a)},{x:-d[0]/2,y:-d[1]/2,width:d[0],height:d[1]});s.name=e,h.add(s)}h.add(new r.Text({name:"pageText",style:{textFill:p.getTextColor(),font:p.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),f("pageNext",1)},layoutInner:function(e,t,i,r,o,s){var u=this.getSelectorGroup(),h=e.getOrient().index,d=l[h],p=c[h],f=l[1-h],m=c[1-h];o&&a.box("horizontal",u,e.get("selectorItemGap",!0));var g=e.get("selectorButtonGap",!0),v=u.getBoundingRect(),y=[-v.x,-v.y],_=n.clone(i);o&&(_[d]=i[d]-v[d]-g);var b=this._layoutContentAndController(e,r,_,h,d,f,m);if(o){if("end"===s)y[h]+=b[d]+g;else{var x=v[d]+g;y[h]-=x,b[p]-=x}b[d]+=v[d]+g,y[1-h]+=b[m]+b[f]/2-v[f]/2,b[f]=Math.max(b[f],v[f]),b[m]=Math.min(b[m],v[m]+y[1-h]),u.attr("position",y)}return b},_layoutContentAndController:function(e,t,i,o,s,l,c){var u=this.getContentGroup(),h=this._containerGroup,d=this._controllerGroup;a.box(e.get("orient"),u,e.get("itemGap"),o?i.width:null,o?null:i.height),a.box("horizontal",d,e.get("pageButtonItemGap",!0));var p=u.getBoundingRect(),f=d.getBoundingRect(),m=this._showController=p[s]>i[s],g=[-p.x,-p.y];t||(g[o]=u.position[o]);var v=[0,0],y=[-f.x,-f.y],_=n.retrieve2(e.get("pageButtonGap",!0),e.get("itemGap",!0));if(m){var b=e.get("pageButtonPosition",!0);"end"===b?y[o]+=i[s]-f[s]:v[o]+=f[s]+_}y[1-o]+=p[l]/2-f[l]/2,u.attr("position",g),h.attr("position",v),d.attr("position",y);var x={x:0,y:0};if(x[s]=m?i[s]:p[s],x[l]=Math.max(p[l],f[l]),x[c]=Math.min(0,f[c]+y[1-o]),h.__rectSize=i[s],m){var w={x:0,y:0};w[s]=Math.max(i[s]-f[s]-_,0),w[l]=x[l],h.setClipPath(new r.Rect({shape:w})),h.__rectSize=w[s]}else d.eachChild((function(e){e.attr({invisible:!0,silent:!0})}));var T=this._getPageInfo(e);return null!=T.pageIndex&&r.updateProps(u,{position:T.contentPosition},!!m&&e),this._updatePageInfoView(e,T),x},_pageGo:function(e,t,i){var n=this._getPageInfo(t)[e];null!=n&&i.dispatchAction({type:"legendScroll",scrollDataIndex:n,legendId:t.id})},_updatePageInfoView:function(e,t){var i=this._controllerGroup;n.each(["pagePrev","pageNext"],(function(n){var r=null!=t[n+"DataIndex"],a=i.childOfName(n);a&&(a.setStyle("fill",r?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),a.cursor=r?"pointer":"default")}));var r=i.childOfName("pageText"),a=e.get("pageFormatter"),o=t.pageIndex,s=null!=o?o+1:0,l=t.pageCount;r&&a&&r.setStyle("text",n.isString(a)?a.replace("{current}",s).replace("{total}",l):a({current:s,total:l}))},_getPageInfo:function(e){var t=e.get("scrollDataIndex",!0),i=this.getContentGroup(),n=this._containerGroup.__rectSize,r=e.getOrient().index,a=l[r],o=c[r],s=this._findTargetItemIndex(t),u=i.children(),h=u[s],d=u.length,p=d?1:0,f={contentPosition:i.position.slice(),pageCount:p,pageIndex:p-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return f;var m=b(h);f.contentPosition[r]=-m.s;for(var g=s+1,v=m,y=m,_=null;g<=d;++g)_=b(u[g]),(!_&&y.e>v.s+n||_&&!x(_,v.s))&&(v=y.i>v.i?y:_,v&&(null==f.pageNextDataIndex&&(f.pageNextDataIndex=v.i),++f.pageCount)),y=_;for(g=s-1,v=m,y=m,_=null;g>=-1;--g)_=b(u[g]),_&&x(y,_.s)||!(v.i<y.i)||(y=v,null==f.pagePrevDataIndex&&(f.pagePrevDataIndex=v.i),++f.pageCount,++f.pageIndex),v=_;return f;function b(e){if(e){var t=e.getBoundingRect(),i=t[o]+e.position[r];return{s:i,e:i+t[a],i:e.__legendDataIndex}}}function x(e,t){return e.e>=t&&e.s<=t+n}},_findTargetItemIndex:function(e){if(!this._showController)return 0;var t,i,n=this.getContentGroup();return n.eachChild((function(n,r){var a=n.__legendDataIndex;null==i&&null!=a&&(i=r),a===e&&(t=r)})),null!=t?t:i}}),h=u;e.exports=h},"0f94":function(e,t,i){"use strict";i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return f})),i.d(t,"d",(function(){return m})),i.d(t,"e",(function(){return s})),i.d(t,"f",(function(){return h})),i.d(t,"g",(function(){return c})),i.d(t,"h",(function(){return u}));var n=i("38a4"),r=i("02f1"),a=i("3349");function o(e,t){return e[0]*t[1]-e[1]*t[0]}function s(e,t,i){const n=(t[0]-e[0])*(i[1]-e[1])-(t[1]-e[1])*(i[0]-e[0]);return Math.abs(n)/Object(a["i"])(t,i)}function l(e,t,i){const n=Object(a["g"])(i,t)/Object(a["p"])(i);return Object(a["a"])(e,i,n)}function c(e,t,i,n,r=i){return Object(a["d"])(v,n,i),Object(a["d"])(_,t,r),l(b,_,v),Object(a["h"])(e,r,b)}function u(e,t,i,n){Object(a["d"])(v,n,i),Object(a["d"])(_,t,i);const r=Object(a["g"])(v,_)/Object(a["p"])(v);return r>0?Object(a["o"])(e,i,v,r):Object(a["c"])(e,i)}function h(e,t,i,n){Object(a["d"])(v,t,i);const r=n/Object(a["l"])(v);return Object(a["o"])(e,i,v,r)}function d(e,t){return c(_,t,e.start,e.end),Object(n["e"])(_[0],t[0])&&Object(n["e"])(_[1],t[1])?[Object(r["b"])(t)]:[]}function p(e,t,i){return h(_,i,e,t),Object(n["e"])(_[0],i[0])&&Object(n["e"])(_[1],i[1])?[Object(r["b"])(i)]:[]}function f(e,t){const i=e.start,n=e.end,r=t.start,s=t.end,l=Object(a["d"])(v,n,i),c=Object(a["d"])(y,s,r),u=o(l,c);if(Math.abs(u)<=g)return[];const h=Object(a["d"])(_,i,r),d=o(c,h)/u,p=o(l,h)/u;if(d>=0){if(p>=0||1===t.type)return[Object(a["o"])(b,i,l,d)]}else if(1===e.type&&(p>=0||1===t.type))return[Object(a["o"])(b,i,l,d)];return[]}function m(e,t,i){const n=[],r=Object(a["d"])(v,e.end,e.start),o=Object(a["d"])(y,e.start,t),s=Object(a["p"])(r),l=2*Object(a["g"])(r,o),c=l*l-4*s*(Object(a["p"])(o)-i*i);if(0===c){const t=-l/(2*s);(1===e.type||t>=0)&&n.push(Object(a["o"])(b,e.start,r,t))}else if(c>0){const t=Math.sqrt(c),i=(-l+t)/(2*s);(1===e.type||i>=0)&&n.push(Object(a["o"])(b,e.start,r,i));const o=(-l-t)/(2*s);(1===e.type||o>=0)&&n.push(Object(a["o"])(_,e.start,r,o))}return n}const g=1e-6,v=Object(r["a"])(),y=Object(r["a"])(),_=Object(r["a"])(),b=Object(r["a"])()},"0f99":function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("e0d3")),a=r.makeInner,o=r.getDataItemValue,s=i("6d8b"),l=s.createHashMap,c=s.each,u=s.map,h=s.isArray,d=s.isString,p=s.isObject,f=s.isTypedArray,m=s.isArrayLike,g=s.extend,v=(s.assert,i("ec6f")),y=i("93d0"),_=y.SOURCE_FORMAT_ORIGINAL,b=y.SOURCE_FORMAT_ARRAY_ROWS,x=y.SOURCE_FORMAT_OBJECT_ROWS,w=y.SOURCE_FORMAT_KEYED_COLUMNS,T=y.SOURCE_FORMAT_UNKNOWN,S=y.SOURCE_FORMAT_TYPED_ARRAY,O=y.SERIES_LAYOUT_BY_ROW,C={Must:1,Might:2,Not:3},k=a();function P(e){var t=e.option.source,i=T;if(f(t))i=S;else if(h(t)){0===t.length&&(i=b);for(var n=0,r=t.length;n<r;n++){var a=t[n];if(null!=a){if(h(a)){i=b;break}if(p(a)){i=x;break}}}}else if(p(t)){for(var o in t)if(t.hasOwnProperty(o)&&m(t[o])){i=w;break}}else if(null!=t)throw new Error("Invalid data");k(e).sourceFormat=i}function E(e){return k(e).source}function A(e){k(e).datasetMap=l()}function I(e){var t=e.option,i=t.data,n=f(i)?S:_,r=!1,a=t.seriesLayoutBy,o=t.sourceHeader,s=t.dimensions,l=z(e);if(l){var c=l.option;i=c.source,n=k(l).sourceFormat,r=!0,a=a||c.seriesLayoutBy,null==o&&(o=c.sourceHeader),s=s||c.dimensions}var u=M(i,n,a,o,s);k(e).source=new v({data:i,fromDataset:r,seriesLayoutBy:a,sourceFormat:n,dimensionsDefine:u.dimensionsDefine,startIndex:u.startIndex,dimensionsDetectCount:u.dimensionsDetectCount,encodeDefine:t.encode})}function M(e,t,i,n,r){if(!e)return{dimensionsDefine:D(r)};var a,s;if(t===b)"auto"===n||null==n?j((function(e){null!=e&&"-"!==e&&(d(e)?null==s&&(s=1):s=0)}),i,e,10):s=n?1:0,r||1!==s||(r=[],j((function(e,t){r[t]=null!=e?e:""}),i,e)),a=r?r.length:i===O?e.length:e[0]?e[0].length:null;else if(t===x)r||(r=L(e));else if(t===w)r||(r=[],c(e,(function(e,t){r.push(t)})));else if(t===_){var l=o(e[0]);a=h(l)&&l.length||1}return{startIndex:s,dimensionsDefine:D(r),dimensionsDetectCount:a}}function D(e){if(e){var t=l();return u(e,(function(e,i){if(e=g({},p(e)?e:{name:e}),null==e.name)return e;e.name+="",null==e.displayName&&(e.displayName=e.name);var n=t.get(e.name);return n?e.name+="-"+n.count++:t.set(e.name,{count:1}),e}))}}function j(e,t,i,n){if(null==n&&(n=1/0),t===O)for(var r=0;r<i.length&&r<n;r++)e(i[r]?i[r][0]:null,r);else{var a=i[0]||[];for(r=0;r<a.length&&r<n;r++)e(a[r],r)}}function L(e){var t,i=0;while(i<e.length&&!(t=e[i++]));if(t){var n=[];return c(t,(function(e,t){n.push(t)})),n}}function R(e,t,i){var n={},r=z(t);if(!r||!e)return n;var a,o,s=[],l=[],u=t.ecModel,h=k(u).datasetMap,d=r.uid+"_"+i.seriesLayoutBy;e=e.slice(),c(e,(function(t,i){!p(t)&&(e[i]={name:t}),"ordinal"===t.type&&null==a&&(a=i,o=g(e[i])),n[t.name]=[]}));var f=h.get(d)||h.set(d,{categoryWayDim:o,valueWayDim:0});function m(e,t,i){for(var n=0;n<i;n++)e.push(t+n)}function g(e){var t=e.dimsDef;return t?t.length:1}return c(e,(function(e,t){var i=e.name,r=g(e);if(null==a){var o=f.valueWayDim;m(n[i],o,r),m(l,o,r),f.valueWayDim+=r}else if(a===t)m(n[i],0,r),m(s,0,r);else{o=f.categoryWayDim;m(n[i],o,r),m(l,o,r),f.categoryWayDim+=r}})),s.length&&(n.itemName=s),l.length&&(n.seriesName=l),n}function N(e,t,i){var n={},r=z(e);if(!r)return n;var a,o=t.sourceFormat,s=t.dimensionsDefine;o!==x&&o!==w||c(s,(function(e,t){"name"===(p(e)?e.name:e)&&(a=t)}));var l=function(){for(var e={},n={},r=[],l=0,c=Math.min(5,i);l<c;l++){var u=V(t.data,o,t.seriesLayoutBy,s,t.startIndex,l);r.push(u);var h=u===C.Not;if(h&&null==e.v&&l!==a&&(e.v=l),(null==e.n||e.n===e.v||!h&&r[e.n]===C.Not)&&(e.n=l),d(e)&&r[e.n]!==C.Not)return e;h||(u===C.Might&&null==n.v&&l!==a&&(n.v=l),null!=n.n&&n.n!==n.v||(n.n=l))}function d(e){return null!=e.v&&null!=e.n}return d(e)?e:d(n)?n:null}();if(l){n.value=l.v;var u=null!=a?a:l.n;n.itemName=[u],n.seriesName=[u]}return n}function z(e){var t=e.option,i=t.data;if(!i)return e.ecModel.getComponent("dataset",t.datasetIndex||0)}function B(e,t){return V(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function V(e,t,i,n,r,a){var s,l,c,u=5;if(f(e))return C.Not;if(n){var m=n[a];p(m)?(l=m.name,c=m.type):d(m)&&(l=m)}if(null!=c)return"ordinal"===c?C.Must:C.Not;if(t===b)if(i===O){for(var g=e[a],v=0;v<(g||[]).length&&v<u;v++)if(null!=(s=k(g[r+v])))return s}else for(v=0;v<e.length&&v<u;v++){var y=e[r+v];if(y&&null!=(s=k(y[a])))return s}else if(t===x){if(!l)return C.Not;for(v=0;v<e.length&&v<u;v++){var T=e[v];if(T&&null!=(s=k(T[l])))return s}}else if(t===w){if(!l)return C.Not;g=e[l];if(!g||f(g))return C.Not;for(v=0;v<g.length&&v<u;v++)if(null!=(s=k(g[v])))return s}else if(t===_)for(v=0;v<e.length&&v<u;v++){T=e[v];var S=o(T);if(!h(S))return C.Not;if(null!=(s=k(S[a])))return s}function k(e){var t=d(e);return null!=e&&isFinite(e)&&""!==e?t?C.Might:C.Not:t&&"-"!==e?C.Must:void 0}return C.Not}t.BE_ORDINAL=C,t.detectSourceFormat=P,t.getSource=E,t.resetSourceDefaulter=A,t.prepareSource=I,t.makeSeriesEncodeForAxisCoordSys=R,t.makeSeriesEncodeForNameBased=N,t.guessOrdinal=B},"11cf":function(e,t,i){},"133d":function(e,t,i){var n=i("6d8b"),r=i("e0d3");function a(e,t){var i,a=[],o=e.seriesIndex;if(null==o||!(i=t.getSeriesByIndex(o)))return{point:[]};var s=i.getData(),l=r.queryDataIndex(s,e);if(null==l||l<0||n.isArray(l))return{point:[]};var c=s.getItemGraphicEl(l),u=i.coordinateSystem;if(i.getTooltipPosition)a=i.getTooltipPosition(l)||[];else if(u&&u.dataToPoint)a=u.dataToPoint(s.getValues(n.map(u.dimensions,(function(e){return s.mapDimension(e)})),l,!0))||[];else if(c){var h=c.getBoundingRect().clone();h.applyTransform(c.transform),a=[h.x+h.width/2,h.y+h.height/2]}return{point:a,el:c}}e.exports=a},1381:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var n=i("c649"),r=i("4ae5"),a=i("521c"),o=(i("e06a"),i("4cac")),s=i("a915"),l=i("db52"),c=i("4dc9"),u=(i("1fd7"),i("8d60")),h=i("0b2d"),d=i("02f1"),p=i("3349"),f=i("7779"),m=i("c9fb"),g=i("65a7");class v extends g["a"]{visualizeIntersectionPoint(e,t){return this._visualizeSnappingIndicator({geometry:new r["a"]({x:e.intersectionPoint[0],y:e.intersectionPoint[1],spatialReference:t.coordinateHelper.spatialReference}),symbol:b,context:t})}visualizePoint(e,t){return this._visualizeSnappingIndicator({geometry:new r["a"]({x:e.point[0],y:e.point[1],spatialReference:t.coordinateHelper.spatialReference}),symbol:x,context:t})}visualizeLine(e,t){return this._visualizeSnappingIndicator({geometry:new a["a"]({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.coordinateHelper.spatialReference}),symbol:w,context:t})}visualizeParallelSign(e,t){return this._visualizeSnappingIndicator({geometry:new a["a"]({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.coordinateHelper.spatialReference}),symbol:T,context:t})}visualizeRightAngleQuad(e,t){return this._visualizeSnappingIndicator({geometry:new a["a"]({paths:[[e.previousVertex,e.centerVertex,e.nextVertex]],spatialReference:t.coordinateHelper.spatialReference}),symbol:k(e),context:t})}_visualizeSnappingIndicator(e){const{geometry:t,symbol:i,context:r}=e,a=new u["a"]({geometry:t,symbol:i});return r.view.graphics.add(a),Object(n["c"])(()=>{r.view.graphics.remove(a)})}}const y=f["a"].main.toArray(),_=[...f["a"].main.toRgb(),100],b=new c["a"]({outline:new l["a"]({width:1.5,color:y}),size:15,color:[0,0,0,0]}),x=new c["a"]({outline:{width:.5,color:[0,0,0,1]},size:10,color:y}),w=new o["a"]({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:Object(s["h"])(m["a"].lineHintWidthTarget),color:y}]}}}),T=new o["a"]({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:y}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:y}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),S=e=>new o["a"]({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:Object(s["h"])(m["a"].rightAngleHintSize),rotation:e,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:Object(s["h"])(m["a"].rightAngleHintOutlineSize),color:y},{type:"CIMSolidFill",enable:!0,color:_}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),O=S(45),C=S(225),k=(()=>{const e=Object(d["a"])(),t=Object(d["a"])(),i=Object(h["e"])();return n=>(Object(p["d"])(e,n.centerVertex,n.previousVertex),Object(p["d"])(t,n.nextVertex,n.previousVertex),Object(p["f"])(i,e,t),i[2]<0?O:C)})()},1418:function(e,t,i){var n=i("6d8b"),r=i("a15a"),a=r.createSymbol,o=i("2306"),s=i("3842"),l=s.parsePercent,c=i("c775"),u=c.getDefaultLabel;function h(e,t,i){o.Group.call(this),this.updateData(e,t,i)}var d=h.prototype,p=h.getSymbolSize=function(e,t){var i=e.getItemVisual(t,"symbolSize");return i instanceof Array?i.slice():[+i,+i]};function f(e){return[e[0]/2,e[1]/2]}function m(e,t){this.parent.drift(e,t)}d._createSymbol=function(e,t,i,n,r){this.removeAll();var o=t.getItemVisual(i,"color"),s=a(e,-1,-1,2,2,o,r);s.attr({z2:100,culling:!0,scale:f(n)}),s.drift=m,this._symbolType=e,this.add(s)},d.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(e)},d.getSymbolPath=function(){return this.childAt(0)},d.getScale=function(){return this.childAt(0).scale},d.highlight=function(){this.childAt(0).trigger("emphasis")},d.downplay=function(){this.childAt(0).trigger("normal")},d.setZ=function(e,t){var i=this.childAt(0);i.zlevel=e,i.z=t},d.setDraggable=function(e){var t=this.childAt(0);t.draggable=e,t.cursor=e?"move":t.cursor},d.updateData=function(e,t,i){this.silent=!1;var n=e.getItemVisual(t,"symbol")||"circle",r=e.hostModel,a=p(e,t),s=n!==this._symbolType;if(s){var l=e.getItemVisual(t,"symbolKeepAspect");this._createSymbol(n,e,t,a,l)}else{var c=this.childAt(0);c.silent=!1,o.updateProps(c,{scale:f(a)},r,t)}if(this._updateCommon(e,t,a,i),s){c=this.childAt(0);var u=i&&i.fadeIn,h={scale:c.scale.slice()};u&&(h.style={opacity:c.style.opacity}),c.scale=[0,0],u&&(c.style.opacity=0),o.initProps(c,h,r,t)}this._seriesModel=r};var g=["itemStyle"],v=["emphasis","itemStyle"],y=["label"],_=["emphasis","label"];function b(e,t){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===t){var i=this.__symbolOriginalScale,n=i[1]/i[0],r={scale:[Math.max(1.1*i[0],i[0]+3),Math.max(1.1*i[1],i[1]+3*n)]};this.animateTo(r,400,"elasticOut")}else"normal"===t&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}d._updateCommon=function(e,t,i,r){var a=this.childAt(0),s=e.hostModel,c=e.getItemVisual(t,"color");"image"!==a.type?a.useStyle({strokeNoScale:!0}):a.setStyle({opacity:1,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var h=r&&r.itemStyle,d=r&&r.hoverItemStyle,p=r&&r.symbolOffset,m=r&&r.labelModel,x=r&&r.hoverLabelModel,w=r&&r.hoverAnimation,T=r&&r.cursorStyle;if(!r||e.hasItemOption){var S=r&&r.itemModel?r.itemModel:e.getItemModel(t);h=S.getModel(g).getItemStyle(["color"]),d=S.getModel(v).getItemStyle(),p=S.getShallow("symbolOffset"),m=S.getModel(y),x=S.getModel(_),w=S.getShallow("hoverAnimation"),T=S.getShallow("cursor")}else d=n.extend({},d);var O=a.style,C=e.getItemVisual(t,"symbolRotate");a.attr("rotation",(C||0)*Math.PI/180||0),p&&a.attr("position",[l(p[0],i[0]),l(p[1],i[1])]),T&&a.attr("cursor",T),a.setColor(c,r&&r.symbolInnerColor),a.setStyle(h);var k=e.getItemVisual(t,"opacity");null!=k&&(O.opacity=k);var P=e.getItemVisual(t,"liftZ"),E=a.__z2Origin;null!=P?null==E&&(a.__z2Origin=a.z2,a.z2+=P):null!=E&&(a.z2=E,a.__z2Origin=null);var A=r&&r.useNameLabel;function I(t,i){return A?e.getName(t):u(e,t)}o.setLabelStyle(O,d,m,x,{labelFetcher:s,labelDataIndex:t,defaultText:I,isRectText:!0,autoColor:c}),a.__symbolOriginalScale=f(i),a.hoverStyle=d,a.highDownOnUpdate=w&&s.isAnimationEnabled()?b:null,o.setHoverStyle(a)},d.fadeOut=function(e,t){var i=this.childAt(0);this.silent=i.silent=!0,(!t||!t.keepLabel)&&(i.style.text=null),o.updateProps(i,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,e)},n.inherits(h,o.Group);var x=h;e.exports=x},1456:function(e,t,i){function n(e){this.options=e||{locator:{}}}function r(e,t,i){if(!e){if(t instanceof a)return t;e=t}var n={},r=e instanceof Function;function o(t){var a=e[t];!a&&r&&(a=2==e.length?function(i){e(t,i)}:e),n[t]=a&&function(e){a("[xmldom "+t+"]\t"+e+s(i))}||function(){}}return i=i||{},o("warning"),o("error"),o("fatalError"),n}function a(){this.cdata=!1}function o(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function s(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function l(e,t,i){return"string"==typeof e?e.substr(t,i):e.length>=t+i||t?new java.lang.String(e,t,i)+"":e}function c(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}n.prototype.parseFromString=function(e,t){var i=this.options,n=new d,o=i.domBuilder||new a,s=i.errorHandler,l=i.locator,c=i.xmlns||{},h=/\/x?html?$/.test(t),p=h?u.entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return l&&o.setDocumentLocator(l),n.errorHandler=r(s,o,l),n.domBuilder=i.domBuilder||o,h&&(c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",e&&"string"===typeof e?n.parse(e,c,p):n.errorHandler.error("invalid doc source"),o.doc},a.prototype={startDocument:function(){this.doc=(new f).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,i,n){var r=this.doc,a=r.createElementNS(e,i||t),s=n.length;c(this,a),this.currentElement=a,this.locator&&o(this.locator,a);for(var l=0;l<s;l++){e=n.getURI(l);var u=n.getValue(l),h=(i=n.getQName(l),r.createAttributeNS(e,i));this.locator&&o(n.getLocator(l),h),h.value=h.nodeValue=u,a.setAttributeNode(h)}},endElement:function(e,t,i){var n=this.currentElement;n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var i=this.doc.createProcessingInstruction(e,t);this.locator&&o(this.locator,i),c(this,i)},ignorableWhitespace:function(e,t,i){},characters:function(e,t,i){if(e=l.apply(this,arguments),e){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&o(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,i){e=l.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&o(this.locator,n),c(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,i){var n=this.doc.implementation;if(n&&n.createDocumentType){var r=n.createDocumentType(e,t,i);this.locator&&o(this.locator,r),c(this,r)}},warning:function(e){console.warn("[xmldom warning]\t"+e,s(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,s(this.locator))},fatalError:function(e){throw new p(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){a.prototype[e]=function(){return null}}));var u=i("d4a2"),h=i("8f7b"),d=h.XMLReader,p=h.ParseError,f=t.DOMImplementation=i("c1dd").DOMImplementation;t.XMLSerializer=i("c1dd").XMLSerializer,t.DOMParser=n,t.__DOMHandler=a},1548:function(e,t,i){var n=i("6d8b"),r=i("3301"),a=i("697e"),o=i("2023"),s=i("4319"),l=i("f934");l.getLayoutRect;t.getLayoutRect=l.getLayoutRect;var c=i("ee1a"),u=c.enableDataStack,h=c.isDimensionStacked,d=c.getStackedDimension,p=i("862d");t.completeDimensions=p;var f=i("b1d4");t.createDimensions=f;var m=i("a15a");function g(e){return r(e.getSource(),e)}t.createSymbol=m.createSymbol;var v={isDimensionStacked:h,enableDataStack:u,getStackedDimension:d};function y(e,t){var i=t;s.isInstance(t)||(i=new s(t),n.mixin(i,o));var r=a.createScaleByModel(i);return r.setExtent(e[0],e[1]),a.niceScaleExtent(r,i),r}function _(e){n.mixin(e,o)}t.createList=g,t.dataStack=v,t.createScale=y,t.mixinAxisModelCommonMethods=_},"157c":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("34f2");class r extends n["a"]{constructor(e,t,i,n){super(e),this.dx=t,this.dy=i,this.dz=n}move(e,t,i,n){this.helper.addDelta(e.pos,t,i,n)}apply(e){this.move(e,this.dx,this.dy,this.dz)}undo(e){this.move(e,-this.dx,-this.dy,-this.dz)}canAccumulate(e){return e instanceof r}accumulate(e,t){this.move(e,t.dx,t.dy,t.dz)}accumulateParams(e){this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz}}},1687:function(e,t){var i="undefined"===typeof Float32Array?Array:Float32Array;function n(){var e=new i(6);return r(e),e}function r(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function o(e,t,i){var n=t[0]*i[0]+t[2]*i[1],r=t[1]*i[0]+t[3]*i[1],a=t[0]*i[2]+t[2]*i[3],o=t[1]*i[2]+t[3]*i[3],s=t[0]*i[4]+t[2]*i[5]+t[4],l=t[1]*i[4]+t[3]*i[5]+t[5];return e[0]=n,e[1]=r,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e}function s(e,t,i){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+i[0],e[5]=t[5]+i[1],e}function l(e,t,i){var n=t[0],r=t[2],a=t[4],o=t[1],s=t[3],l=t[5],c=Math.sin(i),u=Math.cos(i);return e[0]=n*u+o*c,e[1]=-n*c+o*u,e[2]=r*u+s*c,e[3]=-r*c+u*s,e[4]=u*a+c*l,e[5]=u*l-c*a,e}function c(e,t,i){var n=i[0],r=i[1];return e[0]=t[0]*n,e[1]=t[1]*r,e[2]=t[2]*n,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*r,e}function u(e,t){var i=t[0],n=t[2],r=t[4],a=t[1],o=t[3],s=t[5],l=i*o-a*n;return l?(l=1/l,e[0]=o*l,e[1]=-a*l,e[2]=-n*l,e[3]=i*l,e[4]=(n*s-o*r)*l,e[5]=(a*r-i*s)*l,e):null}function h(e){var t=n();return a(t,e),t}t.create=n,t.identity=r,t.copy=a,t.mul=o,t.translate=s,t.rotate=l,t.scale=c,t.invert=u,t.clone=h},"16f5":function(e,t,i){},"17b8":function(e,t,i){var n=i("3014"),r=n.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});e.exports=r},"17d6":function(e,t,i){var n=i("6d8b"),r=i("22d1"),a=i("e0d3"),o=a.makeInner,s=o(),l=n.each;function c(e,t,i){if(!r.node){var n=t.getZr();s(n).records||(s(n).records={}),u(n,t);var a=s(n).records[e]||(s(n).records[e]={});a.handler=i}}function u(e,t){function i(i,n){e.on(i,(function(i){var r=f(t);l(s(e).records,(function(e){e&&n(e,i,r.dispatchAction)})),h(r.pendings,t)}))}s(e).initialized||(s(e).initialized=!0,i("click",n.curry(p,"click")),i("mousemove",n.curry(p,"mousemove")),i("globalout",d))}function h(e,t){var i,n=e.showTip.length,r=e.hideTip.length;n?i=e.showTip[n-1]:r&&(i=e.hideTip[r-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function d(e,t,i){e.handler("leave",null,i)}function p(e,t,i,n){t.handler(e,i,n)}function f(e){var t={showTip:[],hideTip:[]},i=function(n){var r=t[n.type];r?r.push(n):(n.dispatchAction=i,e.dispatchAction(n))};return{dispatchAction:i,pendings:t}}function m(e,t){if(!r.node){var i=t.getZr(),n=(s(i).records||{})[e];n&&(s(i).records[e]=null)}}t.register=c,t.unregister=m},"18c0":function(e,t,i){var n=i("6d8b"),r=i("e0d8"),a=i("8e43"),o=r.prototype,s=r.extend({type:"ordinal",init:function(e,t){e&&!n.isArray(e)||(e=new a({categories:e})),this._ordinalMeta=e,this._extent=t||[0,e.categories.length-1]},parse:function(e){return"string"===typeof e?this._ordinalMeta.getOrdinal(e):Math.round(e)},contain:function(e){return e=this.parse(e),o.contain.call(this,e)&&null!=this._ordinalMeta.categories[e]},normalize:function(e){return o.normalize.call(this,this.parse(e))},scale:function(e){return Math.round(o.scale.call(this,e))},getTicks:function(){var e=[],t=this._extent,i=t[0];while(i<=t[1])e.push(i),i++;return e},getLabel:function(e){if(!this.isBlank())return this._ordinalMeta.categories[e]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:n.noop,niceExtent:n.noop});s.create=function(){return new s};var l=s;e.exports=l},1953:function(e,t,i){var n=i("2449"),r=n.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}});e.exports=r},1962:function(e,t,i){"use strict";i.d(t,"a",(function(){return m})),i.d(t,"b",(function(){return f}));var n=i("38862"),r=i("4db9"),a=i("690a"),o=i("4377"),s=i("d272"),l=i("d047"),c=i("6a07"),u=i("ebd5"),h=i("c6d7"),d=i("c2d1"),p=i("6d5b");function f(e){const t=new a["a"],i=1===e.output;return t.include(r["a"],{linearDepth:i}),t.include(p["a"],e),t.vertex.uniforms.add("proj","mat4").add("view","mat4"),t.attributes.add("position","vec3"),t.varyings.add("vpos","vec3"),e.multipassTerrainEnabled&&t.varyings.add("depth","float"),i&&(t.include(d["a"],e),t.vertex.uniforms.add("cameraNearFar","vec2"),t.varyings.add("linearDepth","float")),t.vertex.code.add(n["a"]`
    void main(void) {
      vpos = position;
      forwardNormalizedVertexColor();
      ${e.multipassTerrainEnabled?"depth = (view * vec4(vpos, 1.0)).z;":""}
      gl_Position = ${i?n["a"]`transformPositionWithDepth(proj, view, vpos, cameraNearFar, linearDepth);`:n["a"]`transformPosition(proj, view, vpos);`}
    }
  `),t.include(s["a"],e),t.fragment.include(o["a"]),e.multipassTerrainEnabled&&(t.fragment.include(l["a"]),t.include(h["b"],e)),t.fragment.uniforms.add("eColor","vec4"),4===e.output&&t.include(c["a"]),t.fragment.code.add(n["a"]`
  void main() {
    discardBySlice(vpos);
    ${e.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":""}
    vec4 color = ${e.attributeColor?"vColor * eColor;":"eColor;"}

    if (color.a < ${n["a"].float(u["c"])}) {
      discard;
    }

    ${7===e.output?n["a"]`gl_FragColor = vec4(color.a);`:""}

    ${0===e.output?n["a"]`gl_FragColor = highlightSlice(color, vpos); ${e.OITEnabled?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}`:""}
    ${4===e.output?n["a"]`outputHighlight();`:""};
    ${1===e.output?n["a"]`outputDepth(linearDepth);`:""};
  }
  `),t}var m=Object.freeze({__proto__:null,build:f})},"19eb":function(e,t,i){var n=i("6d8b"),r=i("2b61"),a=i("d5b7"),o=i("9e2e");function s(e){for(var t in e=e||{},a.call(this,e),e)e.hasOwnProperty(t)&&"style"!==t&&(this[t]=e[t]);this.style=new r(e.style,this),this._rect=null,this.__clipPaths=null}s.prototype={constructor:s,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(e){},afterBrush:function(e){},brush:function(e,t){},getBoundingRect:function(){},contain:function(e,t){return this.rectContain(e,t)},traverse:function(e,t){e.call(t,this)},rectContain:function(e,t){var i=this.transformCoordToLocal(e,t),n=this.getBoundingRect();return n.contain(i[0],i[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(e){return this.animate("style",e)},attrKV:function(e,t){"style"!==e?a.prototype.attrKV.call(this,e,t):this.style.set(t)},setStyle:function(e,t){return this.style.set(e,t),this.dirty(!1),this},useStyle:function(e){return this.style=new r(e,this),this.dirty(!1),this},calculateTextPosition:null},n.inherits(s,a),n.mixin(s,o);var l=s;e.exports=l},"1a54":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return s})),i.d(t,"d",(function(){return l}));i("c120"),i("a21b"),i("b2b2"),i("5996"),i("74e2"),i("f2e0");var n=i("9180"),r=(i("a1f3"),i("f0b9"),i("4261"));i("008c"),i("3563");class a{constructor(e,t,i){this.uid=e,this.geometry=t,this.attributes=i,this.visible=!0,this.objectId=null,this.centroid=null}}class o{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function s(e){return"point"===e.type}function l(e,t,i,n){return{x:e,y:t,z:i,hasZ:null!=i,hasM:!1,spatialReference:n,type:"point"}}Object(r["d"])(),Object(n["g"])()},"1ab36":function(e,t,i){var n=i("6d8b"),r=i("2306"),a=i("e887");function o(e,t,i,n){var r=t.getData(),a=this.dataIndex,o=r.getName(a),l=t.get("selectedOffset");n.dispatchAction({type:"pieToggleSelect",from:e,name:o,seriesId:t.id}),r.each((function(e){s(r.getItemGraphicEl(e),r.getItemLayout(e),t.isSelected(r.getName(e)),l,i)}))}function s(e,t,i,n,r){var a=(t.startAngle+t.endAngle)/2,o=Math.cos(a),s=Math.sin(a),l=i?n:0,c=[o*l,s*l];r?e.animate().when(200,{position:c}).start("bounceOut"):e.attr("position",c)}function l(e,t){r.Group.call(this);var i=new r.Sector({z2:2}),n=new r.Polyline,a=new r.Text;this.add(i),this.add(n),this.add(a),this.updateData(e,t,!0)}var c=l.prototype;c.updateData=function(e,t,i){var a=this.childAt(0),o=this.childAt(1),l=this.childAt(2),c=e.hostModel,u=e.getItemModel(t),h=e.getItemLayout(t),d=n.extend({},h);d.label=null;var p=c.getShallow("animationTypeUpdate");if(i){a.setShape(d);var f=c.getShallow("animationType");"scale"===f?(a.shape.r=h.r0,r.initProps(a,{shape:{r:h.r}},c,t)):(a.shape.endAngle=h.startAngle,r.updateProps(a,{shape:{endAngle:h.endAngle}},c,t))}else"expansion"===p?a.setShape(d):r.updateProps(a,{shape:d},c,t);var m=e.getItemVisual(t,"color");a.useStyle(n.defaults({lineJoin:"bevel",fill:m},u.getModel("itemStyle").getItemStyle())),a.hoverStyle=u.getModel("emphasis.itemStyle").getItemStyle();var g=u.getShallow("cursor");g&&a.attr("cursor",g),s(this,e.getItemLayout(t),c.isSelected(e.getName(t)),c.get("selectedOffset"),c.get("animation"));var v=!i&&"transition"===p;this._updateLabel(e,t,v),this.highDownOnUpdate=c.get("silent")?null:function(e,t){var i=c.isAnimationEnabled()&&u.get("hoverAnimation");"emphasis"===t?(o.ignore=o.hoverIgnore,l.ignore=l.hoverIgnore,i&&(a.stopAnimation(!0),a.animateTo({shape:{r:h.r+c.get("hoverOffset")}},300,"elasticOut"))):(o.ignore=o.normalIgnore,l.ignore=l.normalIgnore,i&&(a.stopAnimation(!0),a.animateTo({shape:{r:h.r}},300,"elasticOut")))},r.setHoverStyle(this)},c._updateLabel=function(e,t,i){var n=this.childAt(1),a=this.childAt(2),o=e.hostModel,s=e.getItemModel(t),l=e.getItemLayout(t),c=l.label,u=e.getItemVisual(t,"color");if(!c||isNaN(c.x)||isNaN(c.y))a.ignore=a.normalIgnore=a.hoverIgnore=n.ignore=n.normalIgnore=n.hoverIgnore=!0;else{var h={points:c.linePoints||[[c.x,c.y],[c.x,c.y],[c.x,c.y]]},d={x:c.x,y:c.y};i?(r.updateProps(n,{shape:h},o,t),r.updateProps(a,{style:d},o,t)):(n.attr({shape:h}),a.attr({style:d})),a.attr({rotation:c.rotation,origin:[c.x,c.y],z2:10});var p=s.getModel("label"),f=s.getModel("emphasis.label"),m=s.getModel("labelLine"),g=s.getModel("emphasis.labelLine");u=e.getItemVisual(t,"color");r.setLabelStyle(a.style,a.hoverStyle={},p,f,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:c.text,autoColor:u,useInsideStyle:!!c.inside},{textAlign:c.textAlign,textVerticalAlign:c.verticalAlign,opacity:e.getItemVisual(t,"opacity")}),a.ignore=a.normalIgnore=!p.get("show"),a.hoverIgnore=!f.get("show"),n.ignore=n.normalIgnore=!m.get("show"),n.hoverIgnore=!g.get("show"),n.setStyle({stroke:u,opacity:e.getItemVisual(t,"opacity")}),n.setStyle(m.getModel("lineStyle").getLineStyle()),n.hoverStyle=g.getModel("lineStyle").getLineStyle();var v=m.get("smooth");v&&!0===v&&(v=.4),n.setShape({smooth:v})}},n.inherits(l,r.Group);var u=a.extend({type:"pie",init:function(){var e=new r.Group;this._sectorGroup=e},render:function(e,t,i,r){if(!r||r.from!==this.uid){var a=e.getData(),s=this._data,c=this.group,u=t.get("animation"),h=!s,d=e.get("animationType"),p=e.get("animationTypeUpdate"),f=n.curry(o,this.uid,e,u,i),m=e.get("selectedMode");if(a.diff(s).add((function(e){var t=new l(a,e);h&&"scale"!==d&&t.eachChild((function(e){e.stopAnimation(!0)})),m&&t.on("click",f),a.setItemGraphicEl(e,t),c.add(t)})).update((function(e,t){var i=s.getItemGraphicEl(t);h||"transition"===p||i.eachChild((function(e){e.stopAnimation(!0)})),i.updateData(a,e),i.off("click"),m&&i.on("click",f),c.add(i),a.setItemGraphicEl(e,i)})).remove((function(e){var t=s.getItemGraphicEl(e);c.remove(t)})).execute(),u&&a.count()>0&&(h?"scale"!==d:"transition"!==p)){for(var g=a.getItemLayout(0),v=1;isNaN(g.startAngle)&&v<a.count();++v)g=a.getItemLayout(v);var y=Math.max(i.getWidth(),i.getHeight())/2,_=n.bind(c.removeClipPath,c);c.setClipPath(this._createClipPath(g.cx,g.cy,y,g.startAngle,g.clockwise,_,e,h))}else c.removeClipPath();this._data=a}},dispose:function(){},_createClipPath:function(e,t,i,n,a,o,s,l){var c=new r.Sector({shape:{cx:e,cy:t,r0:0,r:i,startAngle:n,endAngle:n,clockwise:a}}),u=l?r.initProps:r.updateProps;return u(c,{shape:{endAngle:n+(a?1:-1)*Math.PI*2}},s,o),c},containPoint:function(e,t){var i=t.getData(),n=i.getItemLayout(0);if(n){var r=e[0]-n.cx,a=e[1]-n.cy,o=Math.sqrt(r*r+a*a);return o<=n.r&&o>=n.r0}}}),h=u;e.exports=h},"1c5f":function(e,t,i){var n=i("401b"),r=i("6d8b"),a=i("0c37"),o=a.getCurvenessForEdge;function s(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var i=e.getGraph();i.eachNode((function(e){var t=e.getModel();e.setLayout([+t.get("x"),+t.get("y")])})),l(i,e)}}function l(e,t){e.eachEdge((function(e,i){var a=r.retrieve3(e.getModel().get("lineStyle.curveness"),-o(e,t,i,!0),0),s=n.clone(e.node1.getLayout()),l=n.clone(e.node2.getLayout()),c=[s,l];+a&&c.push([(s[0]+l[0])/2-(s[1]-l[1])*a,(s[1]+l[1])/2-(l[0]-s[0])*a]),e.setLayout(c)}))}t.simpleLayout=s,t.simpleLayoutEdge=l},"1f1c":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.geometry=e.geometry,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.visualizer=e.visualizer}get coordinateHelper(){return this.geometry.editGeometry.coordinateHelper}}},"1fab":function(e,t){var i=Array.prototype.slice,n=function(e){this._$handlers={},this._$eventProcessor=e};function r(e,t){var i=e._$eventProcessor;return null!=t&&i&&i.normalizeQuery&&(t=i.normalizeQuery(t)),t}function a(e,t,i,n,a,o){var s=e._$handlers;if("function"===typeof i&&(a=n,n=i,i=null),!n||!t)return e;i=r(e,i),s[t]||(s[t]=[]);for(var l=0;l<s[t].length;l++)if(s[t][l].h===n)return e;var c={h:n,one:o,query:i,ctx:a||e,callAtLast:n.zrEventfulCallAtLast},u=s[t].length-1,h=s[t][u];return h&&h.callAtLast?s[t].splice(u,0,c):s[t].push(c),e}n.prototype={constructor:n,one:function(e,t,i,n){return a(this,e,t,i,n,!0)},on:function(e,t,i,n){return a(this,e,t,i,n,!1)},isSilent:function(e){var t=this._$handlers;return!t[e]||!t[e].length},off:function(e,t){var i=this._$handlers;if(!e)return this._$handlers={},this;if(t){if(i[e]){for(var n=[],r=0,a=i[e].length;r<a;r++)i[e][r].h!==t&&n.push(i[e][r]);i[e]=n}i[e]&&0===i[e].length&&delete i[e]}else delete i[e];return this},trigger:function(e){var t=this._$handlers[e],n=this._$eventProcessor;if(t){var r=arguments,a=r.length;a>3&&(r=i.call(r,1));for(var o=t.length,s=0;s<o;){var l=t[s];if(n&&n.filter&&null!=l.query&&!n.filter(e,l.query))s++;else{switch(a){case 1:l.h.call(l.ctx);break;case 2:l.h.call(l.ctx,r[1]);break;case 3:l.h.call(l.ctx,r[1],r[2]);break;default:l.h.apply(l.ctx,r);break}l.one?(t.splice(s,1),o--):s++}}}return n&&n.afterTrigger&&n.afterTrigger(e),this},triggerWithContext:function(e){var t=this._$handlers[e],n=this._$eventProcessor;if(t){var r=arguments,a=r.length;a>4&&(r=i.call(r,1,r.length-1));for(var o=r[r.length-1],s=t.length,l=0;l<s;){var c=t[l];if(n&&n.filter&&null!=c.query&&!n.filter(e,c.query))l++;else{switch(a){case 1:c.h.call(o);break;case 2:c.h.call(o,r[1]);break;case 3:c.h.call(o,r[1],r[2]);break;default:c.h.apply(o,r);break}c.one?(t.splice(l,1),s--):l++}}}return n&&n.afterTrigger&&n.afterTrigger(e),this}};var o=n;e.exports=o},"1fb5":function(e,t,i){"use strict";t.byteLength=u,t.toByteArray=d,t.fromByteArray=m;for(var n=[],r=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");-1===i&&(i=t);var n=i===t?0:4-i%4;return[i,n]}function u(e){var t=c(e),i=t[0],n=t[1];return 3*(i+n)/4-n}function h(e,t,i){return 3*(t+i)/4-i}function d(e){var t,i,n=c(e),o=n[0],s=n[1],l=new a(h(e,o,s)),u=0,d=s>0?o-4:o;for(i=0;i<d;i+=4)t=r[e.charCodeAt(i)]<<18|r[e.charCodeAt(i+1)]<<12|r[e.charCodeAt(i+2)]<<6|r[e.charCodeAt(i+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===s&&(t=r[e.charCodeAt(i)]<<2|r[e.charCodeAt(i+1)]>>4,l[u++]=255&t),1===s&&(t=r[e.charCodeAt(i)]<<10|r[e.charCodeAt(i+1)]<<4|r[e.charCodeAt(i+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l}function p(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function f(e,t,i){for(var n,r=[],a=t;a<i;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),r.push(p(n));return r.join("")}function m(e){for(var t,i=e.length,r=i%3,a=[],o=16383,s=0,l=i-r;s<l;s+=o)a.push(f(e,s,s+o>l?l:s+o));return 1===r?(t=e[i-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[i-2]<<8)+e[i-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},2023:function(e,t,i){var n=i("6d8b"),r={getMin:function(e){var t=this.option,i=e||null==t.rangeStart?t.min:t.rangeStart;return this.axis&&null!=i&&"dataMin"!==i&&"function"!==typeof i&&!n.eqNaN(i)&&(i=this.axis.scale.parse(i)),i},getMax:function(e){var t=this.option,i=e||null==t.rangeEnd?t.max:t.rangeEnd;return this.axis&&null!=i&&"dataMax"!==i&&"function"!==typeof i&&!n.eqNaN(i)&&(i=this.axis.scale.parse(i)),i},getNeedCrossZero:function(){var e=this.option;return null==e.rangeStart&&null==e.rangeEnd&&!e.scale},getCoordSysModel:n.noop,setRange:function(e,t){this.option.rangeStart=e,this.option.rangeEnd=t},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}};e.exports=r},2039:function(e,t,i){var n=i("6d8b"),r={};function a(){this._coordinateSystems=[]}a.prototype={constructor:a,create:function(e,t){var i=[];n.each(r,(function(n,r){var a=n.create(e,t);i=i.concat(a||[])})),this._coordinateSystems=i},update:function(e,t){n.each(this._coordinateSystems,(function(i){i.update&&i.update(e,t)}))},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},a.register=function(e,t){r[e]=t},a.get=function(e){return r[e]};var o=a;e.exports=o},2075:function(e,t,i){},"20c8":function(e,t,i){var n=i("4a3f"),r=i("401b"),a=i("e263"),o=i("9850"),s=i("2cf4"),l=s.devicePixelRatio,c={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},u=[],h=[],d=[],p=[],f=Math.min,m=Math.max,g=Math.cos,v=Math.sin,y=Math.sqrt,_=Math.abs,b="undefined"!==typeof Float32Array,x=function(e){this._saveData=!e,this._saveData&&(this.data=[]),this._ctx=null};x.prototype={constructor:x,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(e,t,i){i=i||0,this._ux=_(i/l/e)||0,this._uy=_(i/l/t)||0},getContext:function(){return this._ctx},beginPath:function(e){return this._ctx=e,e&&e.beginPath(),e&&(this.dpr=e.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(e,t){return this.addData(c.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},lineTo:function(e,t){var i=_(e-this._xi)>this._ux||_(t-this._yi)>this._uy||this._len<5;return this.addData(c.L,e,t),this._ctx&&i&&(this._needsDash()?this._dashedLineTo(e,t):this._ctx.lineTo(e,t)),i&&(this._xi=e,this._yi=t),this},bezierCurveTo:function(e,t,i,n,r,a){return this.addData(c.C,e,t,i,n,r,a),this._ctx&&(this._needsDash()?this._dashedBezierTo(e,t,i,n,r,a):this._ctx.bezierCurveTo(e,t,i,n,r,a)),this._xi=r,this._yi=a,this},quadraticCurveTo:function(e,t,i,n){return this.addData(c.Q,e,t,i,n),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(e,t,i,n):this._ctx.quadraticCurveTo(e,t,i,n)),this._xi=i,this._yi=n,this},arc:function(e,t,i,n,r,a){return this.addData(c.A,e,t,i,i,n,r-n,0,a?0:1),this._ctx&&this._ctx.arc(e,t,i,n,r,a),this._xi=g(r)*i+e,this._yi=v(r)*i+t,this},arcTo:function(e,t,i,n,r){return this._ctx&&this._ctx.arcTo(e,t,i,n,r),this},rect:function(e,t,i,n){return this._ctx&&this._ctx.rect(e,t,i,n),this.addData(c.R,e,t,i,n),this},closePath:function(){this.addData(c.Z);var e=this._ctx,t=this._x0,i=this._y0;return e&&(this._needsDash()&&this._dashedLineTo(t,i),e.closePath()),this._xi=t,this._yi=i,this},fill:function(e){e&&e.fill(),this.toStatic()},stroke:function(e){e&&e.stroke(),this.toStatic()},setLineDash:function(e){if(e instanceof Array){this._lineDash=e,this._dashIdx=0;for(var t=0,i=0;i<e.length;i++)t+=e[i];this._dashSum=t}return this},setLineDashOffset:function(e){return this._dashOffset=e,this},len:function(){return this._len},setData:function(e){var t=e.length;this.data&&this.data.length===t||!b||(this.data=new Float32Array(t));for(var i=0;i<t;i++)this.data[i]=e[i];this._len=t},appendPath:function(e){e instanceof Array||(e=[e]);for(var t=e.length,i=0,n=this._len,r=0;r<t;r++)i+=e[r].len();b&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+i));for(r=0;r<t;r++)for(var a=e[r].data,o=0;o<a.length;o++)this.data[n++]=a[o];this._len=n},addData:function(e){if(this._saveData){var t=this.data;this._len+arguments.length>t.length&&(this._expandData(),t=this.data);for(var i=0;i<arguments.length;i++)t[this._len++]=arguments[i];this._prevCmd=e}},_expandData:function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(e,t){var i,n,r=this._dashSum,a=this._dashOffset,o=this._lineDash,s=this._ctx,l=this._xi,c=this._yi,u=e-l,h=t-c,d=y(u*u+h*h),p=l,g=c,v=o.length;u/=d,h/=d,a<0&&(a=r+a),a%=r,p-=a*u,g-=a*h;while(u>0&&p<=e||u<0&&p>=e||0===u&&(h>0&&g<=t||h<0&&g>=t))n=this._dashIdx,i=o[n],p+=u*i,g+=h*i,this._dashIdx=(n+1)%v,u>0&&p<l||u<0&&p>l||h>0&&g<c||h<0&&g>c||s[n%2?"moveTo":"lineTo"](u>=0?f(p,e):m(p,e),h>=0?f(g,t):m(g,t));u=p-e,h=g-t,this._dashOffset=-y(u*u+h*h)},_dashedBezierTo:function(e,t,i,r,a,o){var s,l,c,u,h,d=this._dashSum,p=this._dashOffset,f=this._lineDash,m=this._ctx,g=this._xi,v=this._yi,_=n.cubicAt,b=0,x=this._dashIdx,w=f.length,T=0;for(p<0&&(p=d+p),p%=d,s=0;s<1;s+=.1)l=_(g,e,i,a,s+.1)-_(g,e,i,a,s),c=_(v,t,r,o,s+.1)-_(v,t,r,o,s),b+=y(l*l+c*c);for(;x<w;x++)if(T+=f[x],T>p)break;s=(T-p)/b;while(s<=1)u=_(g,e,i,a,s),h=_(v,t,r,o,s),x%2?m.moveTo(u,h):m.lineTo(u,h),s+=f[x]/b,x=(x+1)%w;x%2!==0&&m.lineTo(a,o),l=a-u,c=o-h,this._dashOffset=-y(l*l+c*c)},_dashedQuadraticTo:function(e,t,i,n){var r=i,a=n;i=(i+2*e)/3,n=(n+2*t)/3,e=(this._xi+2*e)/3,t=(this._yi+2*t)/3,this._dashedBezierTo(e,t,i,n,r,a)},toStatic:function(){var e=this.data;e instanceof Array&&(e.length=this._len,b&&(this.data=new Float32Array(e)))},getBoundingRect:function(){u[0]=u[1]=d[0]=d[1]=Number.MAX_VALUE,h[0]=h[1]=p[0]=p[1]=-Number.MAX_VALUE;for(var e=this.data,t=0,i=0,n=0,s=0,l=0;l<e.length;){var f=e[l++];switch(1===l&&(t=e[l],i=e[l+1],n=t,s=i),f){case c.M:n=e[l++],s=e[l++],t=n,i=s,d[0]=n,d[1]=s,p[0]=n,p[1]=s;break;case c.L:a.fromLine(t,i,e[l],e[l+1],d,p),t=e[l++],i=e[l++];break;case c.C:a.fromCubic(t,i,e[l++],e[l++],e[l++],e[l++],e[l],e[l+1],d,p),t=e[l++],i=e[l++];break;case c.Q:a.fromQuadratic(t,i,e[l++],e[l++],e[l],e[l+1],d,p),t=e[l++],i=e[l++];break;case c.A:var m=e[l++],y=e[l++],_=e[l++],b=e[l++],x=e[l++],w=e[l++]+x;l+=1;var T=1-e[l++];1===l&&(n=g(x)*_+m,s=v(x)*b+y),a.fromArc(m,y,_,b,x,w,T,d,p),t=g(w)*_+m,i=v(w)*b+y;break;case c.R:n=t=e[l++],s=i=e[l++];var S=e[l++],O=e[l++];a.fromLine(n,s,n+S,s+O,d,p);break;case c.Z:t=n,i=s;break}r.min(u,u,d),r.max(h,h,p)}return 0===l&&(u[0]=u[1]=h[0]=h[1]=0),new o(u[0],u[1],h[0]-u[0],h[1]-u[1])},rebuildPath:function(e){for(var t,i,n,r,a,o,s=this.data,l=this._ux,u=this._uy,h=this._len,d=0;d<h;){var p=s[d++];switch(1===d&&(n=s[d],r=s[d+1],t=n,i=r),p){case c.M:t=n=s[d++],i=r=s[d++],e.moveTo(n,r);break;case c.L:a=s[d++],o=s[d++],(_(a-n)>l||_(o-r)>u||d===h-1)&&(e.lineTo(a,o),n=a,r=o);break;case c.C:e.bezierCurveTo(s[d++],s[d++],s[d++],s[d++],s[d++],s[d++]),n=s[d-2],r=s[d-1];break;case c.Q:e.quadraticCurveTo(s[d++],s[d++],s[d++],s[d++]),n=s[d-2],r=s[d-1];break;case c.A:var f=s[d++],m=s[d++],y=s[d++],b=s[d++],x=s[d++],w=s[d++],T=s[d++],S=s[d++],O=y>b?y:b,C=y>b?1:y/b,k=y>b?b/y:1,P=Math.abs(y-b)>.001,E=x+w;P?(e.translate(f,m),e.rotate(T),e.scale(C,k),e.arc(0,0,O,x,E,1-S),e.scale(1/C,1/k),e.rotate(-T),e.translate(-f,-m)):e.arc(f,m,O,x,E,1-S),1===d&&(t=g(x)*y+f,i=v(x)*b+m),n=g(E)*y+f,r=v(E)*b+m;break;case c.R:t=n=s[d],i=r=s[d+1],e.rect(s[d++],s[d++],s[d++],s[d++]);break;case c.Z:e.closePath(),n=t,r=i}}}},x.CMD=c;var w=x;e.exports=w},"216a":function(e,t,i){var n=i("6d8b"),r=i("3842"),a=i("eda2"),o=i("944e"),s=i("89e3"),l=s.prototype,c=Math.ceil,u=Math.floor,h=1e3,d=60*h,p=60*d,f=24*p,m=function(e,t,i,n){while(i<n){var r=i+n>>>1;e[r][1]<t?i=r+1:n=r}return i},g=s.extend({type:"time",getLabel:function(e){var t=this._stepLvl,i=new Date(e);return a.formatTime(t[0],i,this.getSetting("useUTC"))},niceExtent:function(e){var t=this._extent;if(t[0]===t[1]&&(t[0]-=f,t[1]+=f),t[1]===-1/0&&t[0]===1/0){var i=new Date;t[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),t[0]=t[1]-f}this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var n=this._interval;e.fixMin||(t[0]=r.round(u(t[0]/n)*n)),e.fixMax||(t[1]=r.round(c(t[1]/n)*n))},niceTicks:function(e,t,i){e=e||10;var n=this._extent,a=n[1]-n[0],s=a/e;null!=t&&s<t&&(s=t),null!=i&&s>i&&(s=i);var l=v.length,h=m(v,s,0,l),d=v[Math.min(h,l-1)],p=d[1];if("year"===d[0]){var f=a/p,g=r.nice(f/e,!0);p*=g}var y=this.getSetting("useUTC")?0:60*new Date(+n[0]||+n[1]).getTimezoneOffset()*1e3,_=[Math.round(c((n[0]-y)/p)*p+y),Math.round(u((n[1]-y)/p)*p+y)];o.fixExtent(_,n),this._stepLvl=d,this._interval=p,this._niceExtent=_},parse:function(e){return+r.parseDate(e)}});n.each(["contain","normalize"],(function(e){g.prototype[e]=function(t){return l[e].call(this,this.parse(t))}}));var v=[["hh:mm:ss",h],["hh:mm:ss",5*h],["hh:mm:ss",10*h],["hh:mm:ss",15*h],["hh:mm:ss",30*h],["hh:mm\nMM-dd",d],["hh:mm\nMM-dd",5*d],["hh:mm\nMM-dd",10*d],["hh:mm\nMM-dd",15*d],["hh:mm\nMM-dd",30*d],["hh:mm\nMM-dd",p],["hh:mm\nMM-dd",2*p],["hh:mm\nMM-dd",6*p],["hh:mm\nMM-dd",12*p],["MM-dd\nyyyy",f],["MM-dd\nyyyy",2*f],["MM-dd\nyyyy",3*f],["MM-dd\nyyyy",4*f],["MM-dd\nyyyy",5*f],["MM-dd\nyyyy",6*f],["week",7*f],["MM-dd\nyyyy",10*f],["week",14*f],["week",21*f],["month",31*f],["week",42*f],["month",62*f],["week",70*f],["quarter",95*f],["month",31*f*4],["month",31*f*5],["half-year",380*f/2],["month",31*f*8],["month",31*f*10],["year",380*f]];g.create=function(e){return new g({useUTC:e.ecModel.get("useUTC")})};var y=g;e.exports=y},"217b":function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("3301")),a=i("4f85"),o=a.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(e,t){return r(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});e.exports=o},"22d1":function(e,t){var i={};i="object"===typeof wx&&"function"===typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"===typeof document&&"undefined"!==typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"===typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:r(navigator.userAgent);var n=i;function r(e){var t={},i={},n=e.match(/Firefox\/([\d.]+)/),r=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),a=e.match(/Edge\/([\d.]+)/),o=/micromessenger/i.test(e);return n&&(i.firefox=!0,i.version=n[1]),r&&(i.ie=!0,i.version=r[1]),a&&(i.edge=!0,i.version=a[1]),o&&(i.weChat=!0),{browser:i,os:t,node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!==typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!i.ie&&!i.edge,pointerEventsSupported:"onpointerdown"in window&&(i.edge||i.ie&&i.version>=11),domSupported:"undefined"!==typeof document}}e.exports=n},2306:function(e,t,i){var n=i("6d8b"),r=i("342d"),a=i("41ef"),o=i("1687"),s=i("401b"),l=i("cbe5"),c=i("0cde"),u=i("0da8");t.Image=u;var h=i("e1fc");t.Group=h;var d=i("76a5");t.Text=d;var p=i("d9fc");t.Circle=p;var f=i("4aa2");t.Sector=f;var m=i("4573");t.Ring=m;var g=i("87b1");t.Polygon=g;var v=i("d498");t.Polyline=v;var y=i("c7a2");t.Rect=y;var _=i("cb11");t.Line=_;var b=i("ac0f");t.BezierCurve=b;var x=i("8d32");t.Arc=x;var w=i("d4c6");t.CompoundPath=w;var T=i("48a9");t.LinearGradient=T;var S=i("dded");t.RadialGradient=S;var O=i("9850");t.BoundingRect=O;var C=i("392f");t.IncrementalDisplayable=C;var k=i("9cf9"),P=Math.max,E=Math.min,A={},I=1,M={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},D="emphasis",j="normal",L=1,R={},N={};function z(e){return l.extend(e)}function B(e,t){return r.extendFromString(e,t)}function V(e,t){N[e]=t}function F(e){if(N.hasOwnProperty(e))return N[e]}function U(e,t,i,n){var a=r.createFromString(e,t);return i&&("center"===n&&(i=H(i,a.getBoundingRect())),q(a,i)),a}function G(e,t,i){var n=new u({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(e){if("center"===i){var r={width:e.width,height:e.height};n.setStyle(H(t,r))}}});return n}function H(e,t){var i,n=t.width/t.height,r=e.height*n;r<=e.width?i=e.height:(r=e.width,i=r/n);var a=e.x+e.width/2,o=e.y+e.height/2;return{x:a-r/2,y:o-i/2,width:r,height:i}}var W=r.mergePath;function q(e,t){if(e.applyTransform){var i=e.getBoundingRect(),n=i.calculateTransform(t);e.applyTransform(n)}}function Z(e){return k.subPixelOptimizeLine(e.shape,e.shape,e.style),e}function Y(e){return k.subPixelOptimizeRect(e.shape,e.shape,e.style),e}var X=k.subPixelOptimize;function K(e){return null!=e&&"none"!==e}var $=n.createHashMap(),Q=0;function J(e){if("string"!==typeof e)return e;var t=$.get(e);return t||(t=a.lift(e,-.1),Q<1e4&&($.set(e,t),Q++)),t}function ee(e){if(e.__hoverStlDirty){e.__hoverStlDirty=!1;var t=e.__hoverStl;if(t){var i=e.__cachedNormalStl={};e.__cachedNormalZ2=e.z2;var n=e.style;for(var r in t)null!=t[r]&&(i[r]=n[r]);i.fill=n.fill,i.stroke=n.stroke}else e.__cachedNormalStl=e.__cachedNormalZ2=null}}function te(e){var t=e.__hoverStl;if(t&&!e.__highlighted){var i=e.__zr,n=e.useHoverLayer&&i&&"canvas"===i.painter.type;if(e.__highlighted=n?"layer":"plain",!(e.isGroup||!i&&e.useHoverLayer)){var r=e,a=e.style;n&&(r=i.addHover(e),a=r.style),Se(a),n||ee(r),a.extendFrom(t),ie(a,t,"fill"),ie(a,t,"stroke"),Te(a),n||(e.dirty(!1),e.z2+=I)}}}function ie(e,t,i){!K(t[i])&&K(e[i])&&(e[i]=J(e[i]))}function ne(e){var t=e.__highlighted;if(t&&(e.__highlighted=!1,!e.isGroup))if("layer"===t)e.__zr&&e.__zr.removeHover(e);else{var i=e.style,n=e.__cachedNormalStl;n&&(Se(i),e.setStyle(n),Te(i));var r=e.__cachedNormalZ2;null!=r&&e.z2-r===I&&(e.z2=r)}}function re(e,t,i){var n,r=j,a=j;e.__highlighted&&(r=D,n=!0),t(e,i),e.__highlighted&&(a=D,n=!0),e.isGroup&&e.traverse((function(e){!e.isGroup&&t(e,i)})),n&&e.__highDownOnUpdate&&e.__highDownOnUpdate(r,a)}function ae(e,t){t=e.__hoverStl=!1!==t&&(e.hoverStyle||t||{}),e.__hoverStlDirty=!0,e.__highlighted&&(e.__cachedNormalStl=null,ne(e),te(e))}function oe(e){!ue(this,e)&&!this.__highByOuter&&re(this,te)}function se(e){!ue(this,e)&&!this.__highByOuter&&re(this,ne)}function le(e){this.__highByOuter|=1<<(e||0),re(this,te)}function ce(e){!(this.__highByOuter&=~(1<<(e||0)))&&re(this,ne)}function ue(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function he(e,t){de(e,!0),re(e,ae,t)}function de(e,t){var i=!1===t;if(e.__highDownSilentOnTouch=e.highDownSilentOnTouch,e.__highDownOnUpdate=e.highDownOnUpdate,!i||e.__highDownDispatcher){var n=i?"off":"on";e[n]("mouseover",oe)[n]("mouseout",se),e[n]("emphasis",le)[n]("normal",ce),e.__highByOuter=e.__highByOuter||0,e.__highDownDispatcher=!i}}function pe(e){return!(!e||!e.__highDownDispatcher)}function fe(e){var t=R[e];return null==t&&L<=32&&(t=R[e]=L++),t}function me(e,t,i,r,a,o,s){a=a||A;var l,c=a.labelFetcher,u=a.labelDataIndex,h=a.labelDimIndex,d=a.labelProp,p=i.getShallow("show"),f=r.getShallow("show");(p||f)&&(c&&(l=c.getFormattedLabel(u,"normal",null,h,d)),null==l&&(l=n.isFunction(a.defaultText)?a.defaultText(u,a):a.defaultText));var m=p?l:null,g=f?n.retrieve2(c?c.getFormattedLabel(u,"emphasis",null,h,d):null,l):null;null==m&&null==g||(ve(e,i,o,a),ve(t,r,s,a,!0)),e.text=m,t.text=g}function ge(e,t,i){var r=e.style;t&&(Se(r),e.setStyle(t),Te(r)),r=e.__hoverStl,i&&r&&(Se(r),n.extend(r,i),Te(r))}function ve(e,t,i,r,a){return _e(e,t,r,a),i&&n.extend(e,i),e}function ye(e,t,i){var n,r={isRectText:!0};!1===i?n=!0:r.autoColor=i,_e(e,t,r,n)}function _e(e,t,i,r){if(i=i||A,i.isRectText){var a;i.getTextPosition?a=i.getTextPosition(t,r):(a=t.getShallow("position")||(r?null:"inside"),"outside"===a&&(a="top")),e.textPosition=a,e.textOffset=t.getShallow("offset");var o=t.getShallow("rotate");null!=o&&(o*=Math.PI/180),e.textRotation=o,e.textDistance=n.retrieve2(t.getShallow("distance"),r?null:5)}var s,l=t.ecModel,c=l&&l.option.textStyle,u=be(t);if(u)for(var h in s={},u)if(u.hasOwnProperty(h)){var d=t.getModel(["rich",h]);xe(s[h]={},d,c,i,r)}return e.rich=s,xe(e,t,c,i,r,!0),i.forceRich&&!i.textStyle&&(i.textStyle={}),e}function be(e){var t;while(e&&e!==e.ecModel){var i=(e.option||A).rich;if(i)for(var n in t=t||{},i)i.hasOwnProperty(n)&&(t[n]=1);e=e.parentModel}return t}function xe(e,t,i,r,a,o){i=!a&&i||A,e.textFill=we(t.getShallow("color"),r)||i.color,e.textStroke=we(t.getShallow("textBorderColor"),r)||i.textBorderColor,e.textStrokeWidth=n.retrieve2(t.getShallow("textBorderWidth"),i.textBorderWidth),a||(o&&(e.insideRollbackOpt=r,Te(e)),null==e.textFill&&(e.textFill=r.autoColor)),e.fontStyle=t.getShallow("fontStyle")||i.fontStyle,e.fontWeight=t.getShallow("fontWeight")||i.fontWeight,e.fontSize=t.getShallow("fontSize")||i.fontSize,e.fontFamily=t.getShallow("fontFamily")||i.fontFamily,e.textAlign=t.getShallow("align"),e.textVerticalAlign=t.getShallow("verticalAlign")||t.getShallow("baseline"),e.textLineHeight=t.getShallow("lineHeight"),e.textWidth=t.getShallow("width"),e.textHeight=t.getShallow("height"),e.textTag=t.getShallow("tag"),o&&r.disableBox||(e.textBackgroundColor=we(t.getShallow("backgroundColor"),r),e.textPadding=t.getShallow("padding"),e.textBorderColor=we(t.getShallow("borderColor"),r),e.textBorderWidth=t.getShallow("borderWidth"),e.textBorderRadius=t.getShallow("borderRadius"),e.textBoxShadowColor=t.getShallow("shadowColor"),e.textBoxShadowBlur=t.getShallow("shadowBlur"),e.textBoxShadowOffsetX=t.getShallow("shadowOffsetX"),e.textBoxShadowOffsetY=t.getShallow("shadowOffsetY")),e.textShadowColor=t.getShallow("textShadowColor")||i.textShadowColor,e.textShadowBlur=t.getShallow("textShadowBlur")||i.textShadowBlur,e.textShadowOffsetX=t.getShallow("textShadowOffsetX")||i.textShadowOffsetX,e.textShadowOffsetY=t.getShallow("textShadowOffsetY")||i.textShadowOffsetY}function we(e,t){return"auto"!==e?e:t&&t.autoColor?t.autoColor:null}function Te(e){var t,i=e.textPosition,n=e.insideRollbackOpt;if(n&&null==e.textFill){var r=n.autoColor,a=n.isRectText,o=n.useInsideStyle,s=!1!==o&&(!0===o||a&&i&&"string"===typeof i&&i.indexOf("inside")>=0),l=!s&&null!=r;(s||l)&&(t={textFill:e.textFill,textStroke:e.textStroke,textStrokeWidth:e.textStrokeWidth}),s&&(e.textFill="#fff",null==e.textStroke&&(e.textStroke=r,null==e.textStrokeWidth&&(e.textStrokeWidth=2))),l&&(e.textFill=r)}e.insideRollback=t}function Se(e){var t=e.insideRollback;t&&(e.textFill=t.textFill,e.textStroke=t.textStroke,e.textStrokeWidth=t.textStrokeWidth,e.insideRollback=null)}function Oe(e,t){var i=t&&t.getModel("textStyle");return n.trim([e.fontStyle||i&&i.getShallow("fontStyle")||"",e.fontWeight||i&&i.getShallow("fontWeight")||"",(e.fontSize||i&&i.getShallow("fontSize")||12)+"px",e.fontFamily||i&&i.getShallow("fontFamily")||"sans-serif"].join(" "))}function Ce(e,t,i,n,r,a){"function"===typeof r&&(a=r,r=null);var o=n&&n.isAnimationEnabled();if(o){var s=e?"Update":"",l=n.getShallow("animationDuration"+s),c=n.getShallow("animationEasing"+s),u=n.getShallow("animationDelay"+s);"function"===typeof u&&(u=u(r,n.getAnimationDelayParams?n.getAnimationDelayParams(t,r):null)),"function"===typeof l&&(l=l(r)),l>0?t.animateTo(i,l,u||0,c,a,!!a):(t.stopAnimation(),t.attr(i),a&&a())}else t.stopAnimation(),t.attr(i),a&&a()}function ke(e,t,i,n,r){Ce(!0,e,t,i,n,r)}function Pe(e,t,i,n,r){Ce(!1,e,t,i,n,r)}function Ee(e,t){var i=o.identity([]);while(e&&e!==t)o.mul(i,e.getLocalTransform(),i),e=e.parent;return i}function Ae(e,t,i){return t&&!n.isArrayLike(t)&&(t=c.getLocalTransform(t)),i&&(t=o.invert([],t)),s.applyTransform([],e,t)}function Ie(e,t,i){var n=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),r=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),a=["left"===e?-n:"right"===e?n:0,"top"===e?-r:"bottom"===e?r:0];return a=Ae(a,t,i),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function Me(e,t,i,r){if(e&&t){var a=o(e);t.traverse((function(e){if(!e.isGroup&&e.anid){var t=a[e.anid];if(t){var n=l(e);e.attr(l(t)),ke(e,n,i,e.dataIndex)}}}))}function o(e){var t={};return e.traverse((function(e){!e.isGroup&&e.anid&&(t[e.anid]=e)})),t}function l(e){var t={position:s.clone(e.position),rotation:e.rotation};return e.shape&&(t.shape=n.extend({},e.shape)),t}}function De(e,t){return n.map(e,(function(e){var i=e[0];i=P(i,t.x),i=E(i,t.x+t.width);var n=e[1];return n=P(n,t.y),n=E(n,t.y+t.height),[i,n]}))}function je(e,t){var i=P(e.x,t.x),n=E(e.x+e.width,t.x+t.width),r=P(e.y,t.y),a=E(e.y+e.height,t.y+t.height);if(n>=i&&a>=r)return{x:i,y:r,width:n-i,height:a-r}}function Le(e,t,i){t=n.extend({rectHover:!0},t);var r=t.style={strokeNoScale:!0};if(i=i||{x:-1,y:-1,width:2,height:2},e)return 0===e.indexOf("image://")?(r.image=e.slice(8),n.defaults(r,i),new u(t)):U(e.replace("path://",""),t,i,"center")}function Re(e,t,i,n,r){for(var a=0,o=r[r.length-1];a<r.length;a++){var s=r[a];if(Ne(e,t,i,n,s[0],s[1],o[0],o[1]))return!0;o=s}}function Ne(e,t,i,n,r,a,o,s){var l=i-e,c=n-t,u=o-r,h=s-a,d=ze(u,h,l,c);if(Be(d))return!1;var p=e-r,f=t-a,m=ze(p,f,l,c)/d;if(m<0||m>1)return!1;var g=ze(p,f,u,h)/d;return!(g<0||g>1)}function ze(e,t,i,n){return e*n-i*t}function Be(e){return e<=1e-6&&e>=-1e-6}V("circle",p),V("sector",f),V("ring",m),V("polygon",g),V("polyline",v),V("rect",y),V("line",_),V("bezierCurve",b),V("arc",x),t.Z2_EMPHASIS_LIFT=I,t.CACHED_LABEL_STYLE_PROPERTIES=M,t.extendShape=z,t.extendPath=B,t.registerShape=V,t.getShapeClass=F,t.makePath=U,t.makeImage=G,t.mergePath=W,t.resizePath=q,t.subPixelOptimizeLine=Z,t.subPixelOptimizeRect=Y,t.subPixelOptimize=X,t.setElementHoverStyle=ae,t.setHoverStyle=he,t.setAsHighDownDispatcher=de,t.isHighDownDispatcher=pe,t.getHighlightDigit=fe,t.setLabelStyle=me,t.modifyLabelStyle=ge,t.setTextStyle=ve,t.setText=ye,t.getFont=Oe,t.updateProps=ke,t.initProps=Pe,t.getTransform=Ee,t.applyTransform=Ae,t.transformDirection=Ie,t.groupTransition=Me,t.clipPointsByRect=De,t.clipRectByRect=je,t.createIcon=Le,t.linePolygonIntersect=Re,t.lineLineIntersect=Ne},2325:function(e,t,i){var n=i("6d8b"),r=i("607d"),a=i("2306"),o=i("88b3"),s=i("7dcf"),l=i("3842"),c=i("f934"),u=i("ef6a"),h=a.Rect,d=l.linearMap,p=l.asc,f=n.bind,m=n.each,g=7,v=1,y=30,_="horizontal",b="vertical",x=5,w=["line","bar","candlestick","scatter"],T=s.extend({type:"dataZoom.slider",init:function(e,t){this._displayables={},this._orient,this._range,this._handleEnds,this._size,this._handleWidth,this._handleHeight,this._location,this._dragging,this._dataShadowInfo,this.api=t},render:function(e,t,i,n){T.superApply(this,"render",arguments),o.createOrUpdate(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=e.get("orient"),!1!==this.dataZoomModel.get("show")?(n&&"dataZoom"===n.type&&n.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){T.superApply(this,"remove",arguments),o.clear(this,"_dispatchZoomAction")},dispose:function(){T.superApply(this,"dispose",arguments),o.clear(this,"_dispatchZoomAction")},_buildView:function(){var e=this.group;e.removeAll(),this._resetLocation(),this._resetInterval();var t=this._displayables.barGroup=new a.Group;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},_resetLocation:function(){var e=this.dataZoomModel,t=this.api,i=this._findCoordRect(),r={width:t.getWidth(),height:t.getHeight()},a=this._orient===_?{right:r.width-i.x-i.width,top:r.height-y-g,width:i.width,height:y}:{right:g,top:i.y,width:y,height:i.height},o=c.getLayoutParams(e.option);n.each(["right","top","width","height"],(function(e){"ph"===o[e]&&(o[e]=a[e])}));var s=c.getLayoutRect(o,r,e.padding);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===b&&this._size.reverse()},_positionGroup:function(){var e=this.group,t=this._location,i=this._orient,n=this.dataZoomModel.getFirstTargetAxisModel(),r=n&&n.get("inverse"),a=this._displayables.barGroup,o=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(i!==_||r?i===_&&r?{scale:o?[-1,1]:[-1,-1]}:i!==b||r?{scale:o?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:o?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:o?[1,1]:[1,-1]});var s=e.getBoundingRect([a]);e.attr("position",[t.x-s.x,t.y-s.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var e=this.dataZoomModel,t=this._size,i=this._displayables.barGroup;i.add(new h({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40})),i.add(new h({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:n.bind(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(e){var t=this._size,i=e.series,r=i.getRawData(),o=i.getShadowDim?i.getShadowDim():e.otherDim;if(null!=o){var s=r.getDataExtent(o),l=.3*(s[1]-s[0]);s=[s[0]-l,s[1]+l];var c,u=[0,t[1]],h=[0,t[0]],p=[[t[0],0],[0,0]],f=[],m=h[1]/(r.count()-1),g=0,v=Math.round(r.count()/t[0]);r.each([o],(function(e,t){if(v>0&&t%v)g+=m;else{var i=null==e||isNaN(e)||""===e,n=i?0:d(e,s,u,!0);i&&!c&&t?(p.push([p[p.length-1][0],0]),f.push([f[f.length-1][0],0])):!i&&c&&(p.push([g,0]),f.push([g,0])),p.push([g,n]),f.push([g,n]),g+=m,c=i}}));var y=this.dataZoomModel;this._displayables.barGroup.add(new a.Polygon({shape:{points:p},style:n.defaults({fill:y.get("dataBackgroundColor")},y.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new a.Polyline({shape:{points:f},style:y.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var i,r=this.ecModel;return e.eachTargetAxis((function(a,o){var s=e.getAxisProxy(a.name,o).getTargetSeriesModels();n.each(s,(function(e){if(!i&&!(!0!==t&&n.indexOf(w,e.get("type"))<0)){var s,l=r.getComponent(a.axis,o).axis,c=S(a.name),u=e.coordinateSystem;null!=c&&u.getOtherAxis&&(s=u.getOtherAxis(l).inverse),c=e.getData().mapDimension(c),i={thisAxis:l,series:e,thisDim:a.name,otherDim:c,otherAxisInverse:s}}}),this)}),this),i}},_renderHandle:function(){var e=this._displayables,t=e.handles=[],i=e.handleLabels=[],n=this._displayables.barGroup,r=this._size,o=this.dataZoomModel;n.add(e.filler=new h({draggable:!0,cursor:O(this._orient),drift:f(this._onDragMove,this,"all"),ondragstart:f(this._showDataInfo,this,!0),ondragend:f(this._onDragEnd,this),onmouseover:f(this._showDataInfo,this,!0),onmouseout:f(this._showDataInfo,this,!1),style:{fill:o.get("fillerColor"),textPosition:"inside"}})),n.add(new h({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{stroke:o.get("dataBackgroundColor")||o.get("borderColor"),lineWidth:v,fill:"rgba(0,0,0,0)"}})),m([0,1],(function(e){var r=a.createIcon(o.get("handleIcon"),{cursor:O(this._orient),draggable:!0,drift:f(this._onDragMove,this,e),ondragend:f(this._onDragEnd,this),onmouseover:f(this._showDataInfo,this,!0),onmouseout:f(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),s=r.getBoundingRect();this._handleHeight=l.parsePercent(o.get("handleSize"),this._size[1]),this._handleWidth=s.width/s.height*this._handleHeight,r.setStyle(o.getModel("handleStyle").getItemStyle());var c=o.get("handleColor");null!=c&&(r.style.fill=c),n.add(t[e]=r);var u=o.textStyleModel;this.group.add(i[e]=new a.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:u.getTextColor(),textFont:u.getFont()},z2:10}))}),this)},_resetInterval:function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[d(e[0],[0,100],t,!0),d(e[1],[0,100],t,!0)]},_updateInterval:function(e,t){var i=this.dataZoomModel,n=this._handleEnds,r=this._getViewExtent(),a=i.findRepresentativeAxisProxy().getMinMaxSpan(),o=[0,100];u(t,n,r,i.get("zoomLock")?"all":e,null!=a.minSpan?d(a.minSpan,o,r,!0):null,null!=a.maxSpan?d(a.maxSpan,o,r,!0):null);var s=this._range,l=this._range=p([d(n[0],r,o,!0),d(n[1],r,o,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},_updateView:function(e){var t=this._displayables,i=this._handleEnds,n=p(i.slice()),r=this._size;m([0,1],(function(e){var n=t.handles[e],a=this._handleHeight;n.attr({scale:[a/2,a/2],position:[i[e],r[1]/2-a/2]})}),this),t.filler.setShape({x:n[0],y:0,width:n[1]-n[0],height:r[1]}),this._updateDataInfo(e)},_updateDataInfo:function(e){var t=this.dataZoomModel,i=this._displayables,n=i.handleLabels,r=this._orient,o=["",""];if(t.get("showDetail")){var s=t.findRepresentativeAxisProxy();if(s){var l=s.getAxisModel().axis,c=this._range,u=e?s.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:s.getDataValueWindow();o=[this._formatLabel(u[0],l),this._formatLabel(u[1],l)]}}var h=p(this._handleEnds.slice());function d(e){var t=a.getTransform(i.handles[e].parent,this.group),s=a.transformDirection(0===e?"right":"left",t),l=this._handleWidth/2+x,c=a.applyTransform([h[e]+(0===e?-l:l),this._size[1]/2],t);n[e].setStyle({x:c[0],y:c[1],textVerticalAlign:r===_?"middle":s,textAlign:r===_?s:"center",text:o[e]})}d.call(this,0),d.call(this,1)},_formatLabel:function(e,t){var i=this.dataZoomModel,r=i.get("labelFormatter"),a=i.get("labelPrecision");null!=a&&"auto"!==a||(a=t.getPixelPrecision());var o=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel(Math.round(e)):e.toFixed(Math.min(a,20));return n.isFunction(r)?r(e,o):n.isString(r)?r.replace("{value}",o):o},_showDataInfo:function(e){e=this._dragging||e;var t=this._displayables.handleLabels;t[0].attr("invisible",!e),t[1].attr("invisible",!e)},_onDragMove:function(e,t,i,n){this._dragging=!0,r.stop(n.event);var o=this._displayables.barGroup.getLocalTransform(),s=a.applyTransform([t,i],o,!0),l=this._updateInterval(e,s[0]),c=this.dataZoomModel.get("realtime");this._updateView(!c),l&&c&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1);var e=this.dataZoomModel.get("realtime");!e&&this._dispatchZoomAction()},_onClickPanelClick:function(e){var t=this._size,i=this._displayables.barGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(i[0]<0||i[0]>t[0]||i[1]<0||i[1]>t[1])){var n=this._handleEnds,r=(n[0]+n[1])/2,a=this._updateInterval("all",i[0]-r);this._updateView(),a&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:e[0],end:e[1]})},_findCoordRect:function(){var e;if(m(this.getTargetCoordInfo(),(function(t){if(!e&&t.length){var i=t[0].model.coordinateSystem;e=i.getRect&&i.getRect()}})),!e){var t=this.api.getWidth(),i=this.api.getHeight();e={x:.2*t,y:.2*i,width:.6*t,height:.6*i}}return e}});function S(e){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[e]}function O(e){return"vertical"===e?"ns-resize":"ew-resize"}var C=T;e.exports=C},"237f":function(e,t,i){var n=i("6d8b"),r=i("6179"),a=i("7368"),o=i("31d9"),s=i("b1d4"),l=i("2039"),c=i("3301");function u(e,t,i,u,h){for(var d=new a(u),p=0;p<e.length;p++)d.addNode(n.retrieve(e[p].id,e[p].name,p),p);var f=[],m=[],g=0;for(p=0;p<t.length;p++){var v=t[p],y=v.source,_=v.target;d.addEdge(y,_,g)&&(m.push(v),f.push(n.retrieve(v.id,y+" > "+_)),g++)}var b,x=i.get("coordinateSystem");if("cartesian2d"===x||"polar"===x)b=c(e,i);else{var w=l.get(x),T=w&&"view"!==w.type&&w.dimensions||[];n.indexOf(T,"value")<0&&T.concat(["value"]);var S=s(e,{coordDimensions:T});b=new r(S,i),b.initData(e)}var O=new r(["value"],i);return O.initData(m,f),h&&h(b,O),o({mainData:b,struct:d,structAttr:"graph",datas:{node:b,edge:O},datasAttr:{node:"data",edge:"edgeData"}}),d.update(),d}e.exports=u},"23ee":function(e,t,i){var n=i("3eba");i("879e"),i("9704"),i("d747");var r=i("675a"),a=i("7f96"),o=i("2943a"),s=i("de6e"),l=i("d357"),c=i("adda"),u=i("5866"),h=i("7b0c");n.registerProcessor(r),n.registerVisual(a("graph","circle",null)),n.registerVisual(o),n.registerVisual(s),n.registerLayout(l),n.registerLayout(n.PRIORITY.VISUAL.POST_CHART_LAYOUT,c),n.registerLayout(u),n.registerCoordinateSystem("graphView",{create:h})},"240c":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));i("c120");var n=i("b2b2"),r=i("b48e"),a=i("f408");function o(e){var t;if("graphics"!==(null==(t=e.layer)?void 0:t.type))return 1;const i=e.geometry;if(Object(n["j"])(i))return 2;switch(i.type){case"polygon":if(i instanceof r["a"])return 3;break;case"polyline":break;case"point":case"multipoint":case"extent":case"mesh":default:return 3}return"on-the-ground"!==Object(a["e"])(e)&&Object(a["g"])(e)?4:0}},"243f":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i("c120");var n=i("b2b2"),r=i("f408");function a(e){var t;if("graphics"!==(null==(t=e.layer)?void 0:t.type))return 1;if(Object(n["j"])(e.geometry))return 2;switch(e.geometry.type){case"polygon":case"point":case"polyline":break;case"multipoint":case"extent":case"mesh":default:return 3}return"on-the-ground"!==Object(r["e"])(e)&&Object(r["g"])(e)?4:0}},2449:function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("3eba")),a=i("6d8b"),o=i("22d1"),s=i("e0d3"),l=i("eda2"),c=i("38a2"),u=l.addCommas,h=l.encodeHTML;function d(e){s.defaultEmphasis(e,"label",["show"])}var p=r.extendComponentModel({type:"marker",dependencies:["series","grid","polar","geo"],init:function(e,t,i){this.mergeDefaultAndTheme(e,i),this._mergeOption(e,i,!1,!0)},isAnimationEnabled:function(){if(o.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},mergeOption:function(e,t){this._mergeOption(e,t,!1,!1)},_mergeOption:function(e,t,i,n){var r=this.constructor,o=this.mainType+"Model";i||t.eachSeries((function(e){var i=e.get(this.mainType,!0),s=e[o];i&&i.data?(s?s._mergeOption(i,t,!0):(n&&d(i),a.each(i.data,(function(e){e instanceof Array?(d(e[0]),d(e[1])):d(e)})),s=new r(i,this,t),a.extend(s,{mainType:this.mainType,seriesIndex:e.seriesIndex,name:e.name,createdBySelf:!0}),s.__hostSeries=e),e[o]=s):e[o]=null}),this)},formatTooltip:function(e,t,i,n){var r=this.getData(),o=this.getRawValue(e),s=a.isArray(o)?a.map(o,u).join(", "):u(o),l=r.getName(e),c=h(this.name),d="html"===n?"<br/>":"\n";return(null!=o||l)&&(c+=d),l&&(c+=h(l),null!=o&&(c+=" : ")),null!=o&&(c+=h(s)),c},getData:function(){return this._data},setData:function(e){this._data=e}});a.mixin(p,c);var f=p;e.exports=f},"25d4":function(e,t,i){},"269b":function(e,t,i){"use strict";i("8bb2")},"26ac":function(e,t,i){"use strict";i("4e56")},"26be":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"珠江街封控管理物资每日供应数据情况表",top:"20vh",width:"1100px",visible:e.showme,modal:!1},on:{close:e.handleClose}},[i("div",{staticClass:"goods-detail"},[i("el-form",{staticClass:"filter-field",attrs:{inline:!0,model:e.filter}},[i("el-form-item",{attrs:{label:"日期"}},[i("el-select",{model:{value:e.filter.date,callback:function(t){e.$set(e.filter,"date",t)},expression:"filter.date"}},e._l(e.dateList,(function(e,t){return i("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1),i("div",{staticClass:"fake-table"},[i("el-image",{attrs:{src:e.imgUrl}},[i("div",{staticClass:"fake-table-empty",attrs:{slot:"error"},slot:"error"},[e._v("没有对应的数据")])])],1)],1)])},r=[],a=i("d2b8"),o={name:"GoodsDetail",components:{},props:{showme:{type:Boolean},id:{type:[String,Number]}},model:{prop:"showme",event:"toggle"},watch:{showme:{handler:function(e){1==e&&this.id&&this.getData()},immediate:!0}},computed:{imgUrl:function(){var e=this.filter.date;return"".concat(a["b"],"/static/file/").concat(e,".png")}},data:function(){return{filter:{date:null},dateList:["2021-06-30","2021-06-29","2021-06-28","2021-06-27","2021-06-26","2021-06-25","2021-06-24","2021-06-22","2021-06-21","2021-06-20","2021-06-18","2021-06-17","2021-06-16"]}},mounted:function(){this.filter.date=this.dateList[0]},methods:{handleClose:function(){this.$emit("toggle",!1)}}},s=o,l=(i("d4ea"),i("2877")),c=Object(l["a"])(s,n,r,!1,null,null,null);t["default"]=c.exports},"26e1":function(e,t,i){var n=i("6d8b"),r=i("e0d3"),a=n.each,o=n.isObject,s=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function l(e){var t=e&&e.itemStyle;if(t)for(var i=0,r=s.length;i<r;i++){var a=s[i],o=t.normal,l=t.emphasis;o&&o[a]&&(e[a]=e[a]||{},e[a].normal?n.merge(e[a].normal,o[a]):e[a].normal=o[a],o[a]=null),l&&l[a]&&(e[a]=e[a]||{},e[a].emphasis?n.merge(e[a].emphasis,l[a]):e[a].emphasis=l[a],l[a]=null)}}function c(e,t,i){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var r=e[t].normal,a=e[t].emphasis;r&&(i?(e[t].normal=e[t].emphasis=null,n.defaults(e[t],r)):e[t]=r),a&&(e.emphasis=e.emphasis||{},e.emphasis[t]=a)}}function u(e){c(e,"itemStyle"),c(e,"lineStyle"),c(e,"areaStyle"),c(e,"label"),c(e,"labelLine"),c(e,"upperLabel"),c(e,"edgeLabel")}function h(e,t){var i=o(e)&&e[t],n=o(i)&&i.textStyle;if(n)for(var a=0,s=r.TEXT_STYLE_OPTIONS.length;a<s;a++){t=r.TEXT_STYLE_OPTIONS[a];n.hasOwnProperty(t)&&(i[t]=n[t])}}function d(e){e&&(u(e),h(e,"label"),e.emphasis&&h(e.emphasis,"label"))}function p(e){if(o(e)){l(e),u(e),h(e,"label"),h(e,"upperLabel"),h(e,"edgeLabel"),e.emphasis&&(h(e.emphasis,"label"),h(e.emphasis,"upperLabel"),h(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(l(t),d(t));var i=e.markLine;i&&(l(i),d(i));var r=e.markArea;r&&d(r);var a=e.data;if("graph"===e.type){a=a||e.nodes;var s=e.links||e.edges;if(s&&!n.isTypedArray(s))for(var p=0;p<s.length;p++)d(s[p]);n.each(e.categories,(function(e){u(e)}))}if(a&&!n.isTypedArray(a))for(p=0;p<a.length;p++)d(a[p]);t=e.markPoint;if(t&&t.data){var f=t.data;for(p=0;p<f.length;p++)d(f[p])}i=e.markLine;if(i&&i.data){var m=i.data;for(p=0;p<m.length;p++)n.isArray(m[p])?(d(m[p][0]),d(m[p][1])):d(m[p])}"gauge"===e.type?(h(e,"axisLabel"),h(e,"title"),h(e,"detail")):"treemap"===e.type?(c(e.breadcrumb,"itemStyle"),n.each(e.levels,(function(e){u(e)}))):"tree"===e.type&&u(e.leaves)}}function f(e){return n.isArray(e)?e:e?[e]:[]}function m(e){return(n.isArray(e)?e[0]:e)||{}}function g(e,t){a(f(e.series),(function(e){o(e)&&p(e)}));var i=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&i.push("valueAxis","categoryAxis","logAxis","timeAxis"),a(i,(function(t){a(f(e[t]),(function(e){e&&(h(e,"axisLabel"),h(e.axisPointer,"label"))}))})),a(f(e.parallel),(function(e){var t=e&&e.parallelAxisDefault;h(t,"axisLabel"),h(t&&t.axisPointer,"label")})),a(f(e.calendar),(function(e){c(e,"itemStyle"),h(e,"dayLabel"),h(e,"monthLabel"),h(e,"yearLabel")})),a(f(e.radar),(function(e){h(e,"name")})),a(f(e.geo),(function(e){o(e)&&(d(e),a(f(e.regions),(function(e){d(e)})))})),a(f(e.timeline),(function(e){d(e),c(e,"label"),c(e,"itemStyle"),c(e,"controlStyle",!0);var t=e.data;n.isArray(t)&&n.each(t,(function(e){n.isObject(e)&&(c(e,"label"),c(e,"itemStyle"))}))})),a(f(e.toolbox),(function(e){c(e,"iconStyle"),a(e.feature,(function(e){c(e,"iconStyle")}))})),h(m(e.axisPointer),"label"),h(m(e.tooltip).axisPointer,"label")}e.exports=g},"27df":function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("ce6d"),r=i("6ae9"),a=i("b2b2");class o{constructor(e,t,i){this.editGeometry=e,this.component=t,this.pos=i,this.addedVertex=null,this.originalEdge=null,this.left=null,this.right=null}apply(){let e="redo";if(Object(a["j"])(this.addedVertex)&&(e="apply",this.addedVertex=new r["d"](this.component)),0===this.component.vertices.length)this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,this.addedVertex.index=0;else{const e=Object(a["q"])(this.component.getLastVertex());let t=null;e.right&&(this.originalEdge=e.right,t=this.originalEdge.right,this.component.edges.splice(this.component.edges.indexOf(this.originalEdge),1)),this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,Object(a["j"])(this.left)&&(this.left=new r["b"](this.component,e,this.addedVertex)),this.component.edges.push(this.left),e.right=this.left,Object(a["k"])(this.originalEdge)&&Object(a["k"])(t)&&(Object(a["j"])(this.right)&&(this.right=new r["b"](this.component,this.addedVertex,t)),this.component.edges.push(this.right),t.left=this.right),this.component.updateVertexIndex(this.addedVertex,e.index+1)}const t={addedVertices:[this.addedVertex],operation:e};this.editGeometry.emit("change",t)}undo(){if(Object(a["j"])(this.addedVertex))return null;this.component.vertices.splice(this.component.vertices.indexOf(this.addedVertex),1),Object(a["k"])(this.left)&&(this.component.edges.splice(this.component.edges.indexOf(this.left),1),this.left.left.right=null),Object(a["k"])(this.right)&&(this.component.edges.splice(this.component.edges.indexOf(this.right),1),this.right.right.left=null),Object(a["k"])(this.originalEdge)&&(this.component.edges.push(this.originalEdge),this.originalEdge.left.right=this.originalEdge,this.originalEdge.right.left=this.originalEdge),Object(a["k"])(this.left)?this.component.updateVertexIndex(this.left.left,this.left.left.index):this.component.updateVertexIndex(this.addedVertex,0);const e={removedVertices:[this.addedVertex],operation:"undo"};this.editGeometry.emit("change",e)}accumulate(e){return!1}}var s=i("34f2");class l{constructor(e,t,i=0){this.editGeometry=e,this.removedVertices=null,this._minNumberOfVertices=0,this.vertices=t,this._minNumberOfVertices=i}apply(){let e="redo";null==this.removedVertices?(this.removedVertices=[],this.vertices.forEach(e=>{const t=this._removeVertex(e);Object(a["k"])(t)&&this.removedVertices.push(t)}),e="apply"):this.removedVertices.forEach(e=>{this._redoRemoveVertex(e)});const t={removedVertices:this.vertices,operation:e};this.editGeometry.emit("change",t)}undo(){this.removedVertices.forEach(e=>{this._undoRemoveVertex(e)});const e={addedVertices:this.vertices,operation:"undo"};this.editGeometry.emit("change",e)}accumulate(e){return!1}_removeVertex(e){const t=e.component;if(t.vertices.length<=this._minNumberOfVertices)return null;const i={removedVertex:e,createdEdge:null},n=e.left,a=e.right;return t.vertices.splice(t.vertices.indexOf(e),1),n&&(t.edges.splice(t.edges.indexOf(n),1),n.left.right=null),a&&(t.edges.splice(t.edges.indexOf(a),1),a.right.left=null),0===e.index&&a&&this.vertices.length>0&&t.swapVertices(t.vertices.indexOf(a.right),0),n&&a&&(i.createdEdge=new r["b"](t,n.left,a.right),t.edges.push(i.createdEdge)),a&&t.updateVertexIndex(a.right,a.right.index-1),i}_redoRemoveVertex(e){console.warn("redo remove vertex not implemented yet")}_undoRemoveVertex(e){const t=e.removedVertex,i=e.removedVertex.component,n=t.left,r=t.right;e.createdEdge&&i.edges.splice(i.edges.indexOf(e.createdEdge),1),i.vertices.push(t),n&&(i.edges.push(n),n.left.right=n),r&&(i.edges.push(r),r.right.left=r),i.updateVertexIndex(t,t.index)}}class c{constructor(e,t,i){this.editGeometry=e,this.edge=t,this.t=i,this.createdVertex=null,this.left=null,this.right=null}apply(){let e="redo";const t=this.edge,i=t.component,n=t.component.data,o=t.left,s=t.right;i.edges.splice(i.edges.indexOf(t),1),Object(a["j"])(this.createdVertex)&&(e="apply",this.createdVertex=new r["d"](t.component)),i.vertices.push(this.createdVertex),this.createdVertex.pos=n.coordinateHelper.lerp(t.left.pos,t.right.pos,this.t,n.coordinateHelper.createNew()),Object(a["j"])(this.left)&&(this.left=new r["b"](i,o,this.createdVertex)),this.left.left.left?i.edges.push(this.left):i.edges.unshift(this.left),o.right=this.left,Object(a["j"])(this.right)&&(this.right=new r["b"](i,this.createdVertex,s)),i.edges.push(this.right),s.left=this.right,i.updateVertexIndex(this.createdVertex,o.index+1);const l={addedVertices:[this.createdVertex],operation:e};this.editGeometry.emit("change",l)}undo(){if(Object(a["j"])(this.createdVertex)||Object(a["j"])(this.left)||Object(a["j"])(this.right))return null;const e=this.edge,t=e.component,i=this.createdVertex.left,n=this.createdVertex.right,r=i.left,o=n.right;t.vertices.splice(t.vertices.indexOf(this.createdVertex),1),t.edges.splice(t.edges.indexOf(this.left),1),t.edges.splice(t.edges.indexOf(this.right),1),this.edge.left.left?t.edges.push(this.edge):t.edges.unshift(this.edge),r.right=e,o.left=e,t.updateVertexIndex(r,r.index);const s={removedVertices:[this.createdVertex],operation:"undo"};this.editGeometry.emit("change",s)}accumulate(e){return!1}}var u=i("157c"),h=i("e1e0"),d=i("fbd0");class p extends n["a"]{constructor(e,t){super(),this.editGeometry=e,this.type=t,this._geometry=null,this._dirty=!0,this._listener=this.editGeometry.on("change",e=>{e.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:e.addedVertices,operation:e.operation}),e.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:e.removedVertices,operation:e.operation}),e.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:e.updatedVertices,operation:e.operation}),this._dirty=!0})}destroy(){this._listener.remove()}splitEdge(e,t){const i=new c(this.editGeometry,e,t);return this.editGeometry.apply(i),i}updateVertices(e,t,i=1){const n=new s["b"](this.editGeometry,e,t);return this.editGeometry.apply(n,i),n}moveVertices(e,t,i,n,r=1){return this.updateVertices(e,new u["a"](this.editGeometry.coordinateHelper,t,i,n),r)}scaleVertices(e,t,i,n,r,a=1,o=0){return this.updateVertices(e,new d["a"](this.editGeometry.coordinateHelper,t,i,n,r,o),a)}rotateVertices(e,t,i,n=1,r=0){return this.updateVertices(e,new h["a"](this.editGeometry.coordinateHelper,t,i,r),n)}removeVertices(e){let t=0;switch(this.type){case"point":t=1;break;case"polyline":t=2;break;case"polygon":t=3}const i=new l(this.editGeometry,e,t);return this.editGeometry.apply(i),i}appendVertex(e){if(0===this.editGeometry.components.length)return null;const t=new o(this.editGeometry,this.editGeometry.components[0],e);return this.editGeometry.apply(t),t}canRemoveVertex(){let e=0;switch(this.type){case"point":e=1;break;case"polyline":e=2;break;case"polygon":e=3}return this.editGeometry.components[0].vertices.length>e}undo(){return this.editGeometry.undo()}get canUndo(){return this.editGeometry.canUndo}redo(){return this.editGeometry.redo()}get canRedo(){return this.editGeometry.canRedo}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this.editGeometry.toPoint();break;case"polyline":this._geometry=this.editGeometry.toPolyline();break;case"polygon":this._geometry=this.editGeometry.toPolygon()}this._dirty=!1}return this._geometry}}},"282b":function(e,t,i){var n=i("6d8b");function r(e){for(var t=0;t<e.length;t++)e[t][1]||(e[t][1]=e[t][0]);return function(t,i,r){for(var a={},o=0;o<e.length;o++){var s=e[o][1];if(!(i&&n.indexOf(i,s)>=0||r&&n.indexOf(r,s)<0)){var l=t.getShallow(s);null!=l&&(a[e[o][0]]=l)}}return a}}e.exports=r},"28b9":function(e,t,i){"use strict";i("8eb3")},"291d":function(e,t,i){},"292e":function(e,t,i){var n=i("3842"),r=n.parsePercent,a=n.linearMap,o=i("f934"),s=i("bb70"),l=i("6d8b"),c=2*Math.PI,u=Math.PI/180;function h(e,t){return o.getLayoutRect(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function d(e,t,i,n){t.eachSeriesByType(e,(function(e){var t=e.getData(),n=t.mapDimension("value"),o=h(e,i),d=e.get("center"),p=e.get("radius");l.isArray(p)||(p=[0,p]),l.isArray(d)||(d=[d,d]);var f=r(o.width,i.getWidth()),m=r(o.height,i.getHeight()),g=Math.min(f,m),v=r(d[0],f)+o.x,y=r(d[1],m)+o.y,_=r(p[0],g/2),b=r(p[1],g/2),x=-e.get("startAngle")*u,w=e.get("minAngle")*u,T=0;t.each(n,(function(e){!isNaN(e)&&T++}));var S=t.getSum(n),O=Math.PI/(S||T)*2,C=e.get("clockwise"),k=e.get("roseType"),P=e.get("stillShowZeroSum"),E=t.getDataExtent(n);E[0]=0;var A=c,I=0,M=x,D=C?1:-1;if(t.each(n,(function(e,i){var n;if(isNaN(e))t.setItemLayout(i,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:C,cx:v,cy:y,r0:_,r:k?NaN:b,viewRect:o});else{n="area"!==k?0===S&&P?O:e*O:c/T,n<w?(n=w,A-=w):I+=e;var r=M+D*n;t.setItemLayout(i,{angle:n,startAngle:M,endAngle:r,clockwise:C,cx:v,cy:y,r0:_,r:k?a(e,E,[_,b]):b,viewRect:o}),M=r}})),A<c&&T)if(A<=.001){var j=c/T;t.each(n,(function(e,i){if(!isNaN(e)){var n=t.getItemLayout(i);n.angle=j,n.startAngle=x+D*i*j,n.endAngle=x+D*(i+1)*j}}))}else O=A/I,M=x,t.each(n,(function(e,i){if(!isNaN(e)){var n=t.getItemLayout(i),r=n.angle===w?w:e*O;n.startAngle=M,n.endAngle=M+D*r,M+=D*r}}));s(e,b,o.width,o.height,o.x,o.y)}))}e.exports=d},"2943a":function(e,t){function i(e){var t={};e.eachSeriesByType("graph",(function(e){var i=e.getCategoriesData(),n=e.getData(),r={};i.each((function(n){var a=i.getName(n);r["ec-"+a]=n;var o=i.getItemModel(n),s=o.get("itemStyle.color")||e.getColorFromPalette(a,t);i.setItemVisual(n,"color",s);for(var l=["opacity","symbol","symbolSize","symbolKeepAspect"],c=0;c<l.length;c++){var u=o.getShallow(l[c],!0);null!=u&&i.setItemVisual(n,l[c],u)}})),i.count()&&n.each((function(e){var t=n.getItemModel(e),a=t.getShallow("category");if(null!=a){"string"===typeof a&&(a=r["ec-"+a]);for(var o=["color","opacity","symbol","symbolSize","symbolKeepAspect"],s=0;s<o.length;s++)null==n.getItemVisual(e,o[s],!0)&&n.setItemVisual(e,o[s],i.getItemVisual(a,o[s]))}}))}))}e.exports=i},"29a8":function(e,t){var i={legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};e.exports=i},"2aad":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("38862");function r(e){e.attributes.add("position","vec2"),e.varyings.add("uv","vec2"),e.vertex.code.add(n["a"]`
    void main(void) {
      gl_Position = vec4(position, 0.0, 1.0);
      uv = position * 0.5 + vec2(0.5);
    }
  `)}},"2b17":function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("6d8b")),a=(r.isTypedArray,r.extend),o=(r.assert,r.each),s=r.isObject,l=i("e0d3"),c=l.getDataItemValue,u=l.isDataItemOption,h=i("3842"),d=h.parseDate,p=i("ec6f"),f=i("93d0"),m=f.SOURCE_FORMAT_TYPED_ARRAY,g=f.SOURCE_FORMAT_ARRAY_ROWS,v=f.SOURCE_FORMAT_ORIGINAL,y=f.SOURCE_FORMAT_OBJECT_ROWS;function _(e,t){p.isInstance(e)||(e=p.seriesDataToSource(e)),this._source=e;var i=this._data=e.data,n=e.sourceFormat;n===m&&(this._offset=0,this._dimSize=t,this._data=i);var r=x[n===g?n+"_"+e.seriesLayoutBy:n];a(this,r)}var b=_.prototype;b.pure=!1,b.persistent=!0,b.getSource=function(){return this._source};var x={arrayRows_column:{pure:!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(e){return this._data[e+this._source.startIndex]},appendData:S},arrayRows_row:{pure:!0,count:function(){var e=this._data[0];return e?Math.max(0,e.length-this._source.startIndex):0},getItem:function(e){e+=this._source.startIndex;for(var t=[],i=this._data,n=0;n<i.length;n++){var r=i[n];t.push(r?r[e]:null)}return t},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:w,getItem:T,appendData:S},keyedColumns:{pure:!0,count:function(){var e=this._source.dimensionsDefine[0].name,t=this._data[e];return t?t.length:0},getItem:function(e){for(var t=[],i=this._source.dimensionsDefine,n=0;n<i.length;n++){var r=this._data[i[n].name];t.push(r?r[e]:null)}return t},appendData:function(e){var t=this._data;o(e,(function(e,i){for(var n=t[i]||(t[i]=[]),r=0;r<(e||[]).length;r++)n.push(e[r])}))}},original:{count:w,getItem:T,appendData:S},typedArray:{persistent:!1,pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(e,t){e-=this._offset,t=t||[];for(var i=this._dimSize*e,n=0;n<this._dimSize;n++)t[n]=this._data[i+n];return t},appendData:function(e){this._data=e},clean:function(){this._offset+=this.count(),this._data=null}}};function w(){return this._data.length}function T(e){return this._data[e]}function S(e){for(var t=0;t<e.length;t++)this._data.push(e[t])}var O={arrayRows:C,objectRows:function(e,t,i,n){return null!=i?e[n]:e},keyedColumns:C,original:function(e,t,i,n){var r=c(e);return null!=i&&r instanceof Array?r[i]:r},typedArray:C};function C(e,t,i,n){return null!=i?e[i]:e}var k={arrayRows:P,objectRows:function(e,t,i,n){return E(e[t],this._dimensionInfos[t])},keyedColumns:P,original:function(e,t,i,n){var r=e&&(null==e.value?e:e.value);return!this._rawData.pure&&u(e)&&(this.hasItemOption=!0),E(r instanceof Array?r[n]:r,this._dimensionInfos[t])},typedArray:function(e,t,i,n){return e[n]}};function P(e,t,i,n){return E(e[n],this._dimensionInfos[t])}function E(e,t){var i=t&&t.type;if("ordinal"===i){var n=t&&t.ordinalMeta;return n?n.parseAndCollect(e):e}return"time"===i&&"number"!==typeof e&&null!=e&&"-"!==e&&(e=+d(e)),null==e||""===e?NaN:+e}function A(e,t,i){if(e){var n=e.getRawDataItem(t);if(null!=n){var r,a,o=e.getProvider().getSource().sourceFormat,s=e.getDimensionInfo(i);return s&&(r=s.name,a=s.index),O[o](n,t,a,r)}}}function I(e,t,i){if(e){var n=e.getProvider().getSource().sourceFormat;if(n===v||n===y){var r=e.getRawDataItem(t);return n!==v||s(r)||(r=null),r?r[i]:void 0}}}t.DefaultDataProvider=_,t.defaultDimValueGetters=k,t.retrieveRawValue=A,t.retrieveRawAttr=I},"2b53":function(e,t,i){},"2b61":function(e,t,i){var n=i("7d6d"),r=i("82eb"),a=r.ContextCachedBy,o=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],s=function(e){this.extendFrom(e,!1)};function l(e,t,i){var n=null==t.x?0:t.x,r=null==t.x2?1:t.x2,a=null==t.y?0:t.y,o=null==t.y2?0:t.y2;t.global||(n=n*i.width+i.x,r=r*i.width+i.x,a=a*i.height+i.y,o=o*i.height+i.y),n=isNaN(n)?0:n,r=isNaN(r)?1:r,a=isNaN(a)?0:a,o=isNaN(o)?0:o;var s=e.createLinearGradient(n,a,r,o);return s}function c(e,t,i){var n=i.width,r=i.height,a=Math.min(n,r),o=null==t.x?.5:t.x,s=null==t.y?.5:t.y,l=null==t.r?.5:t.r;t.global||(o=o*n+i.x,s=s*r+i.y,l*=a);var c=e.createRadialGradient(o,s,0,o,s,l);return c}s.prototype={constructor:s,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(e,t,i){var r=this,s=i&&i.style,l=!s||e.__attrCachedBy!==a.STYLE_BIND;e.__attrCachedBy=a.STYLE_BIND;for(var c=0;c<o.length;c++){var u=o[c],h=u[0];(l||r[h]!==s[h])&&(e[h]=n(e,h,r[h]||u[1]))}if((l||r.fill!==s.fill)&&(e.fillStyle=r.fill),(l||r.stroke!==s.stroke)&&(e.strokeStyle=r.stroke),(l||r.opacity!==s.opacity)&&(e.globalAlpha=null==r.opacity?1:r.opacity),(l||r.blend!==s.blend)&&(e.globalCompositeOperation=r.blend||"source-over"),this.hasStroke()){var d=r.lineWidth;e.lineWidth=d/(this.strokeNoScale&&t&&t.getLineScale?t.getLineScale():1)}},hasFill:function(){var e=this.fill;return null!=e&&"none"!==e},hasStroke:function(){var e=this.stroke;return null!=e&&"none"!==e&&this.lineWidth>0},extendFrom:function(e,t){if(e)for(var i in e)!e.hasOwnProperty(i)||!0!==t&&(!1===t?this.hasOwnProperty(i):null==e[i])||(this[i]=e[i])},set:function(e,t){"string"===typeof e?this[e]=t:this.extendFrom(e,!0)},clone:function(){var e=new this.constructor;return e.extendFrom(this,!0),e},getGradient:function(e,t,i){for(var n="radial"===t.type?c:l,r=n(e,t,i),a=t.colorStops,o=0;o<a.length;o++)r.addColorStop(a[o].offset,a[o].color);return r}};for(var u=s.prototype,h=0;h<o.length;h++){var d=o[h];d[0]in u||(u[d[0]]=d[1])}s.getGradient=u.getGradient;var p=s;e.exports=p},"2b8c":function(e,t,i){var n=i("be09"),r=e.exports={WebVTT:i("d02c"),VTTCue:i("b03ce"),VTTRegion:i("f97d")};n.vttjs=r,n.WebVTT=r.WebVTT;var a=r.VTTCue,o=r.VTTRegion,s=n.VTTCue,l=n.VTTRegion;r.shim=function(){n.VTTCue=a,n.VTTRegion=o},r.restore=function(){n.VTTCue=s,n.VTTRegion=l},n.VTTCue||r.shim()},"2c17":function(e,t,i){var n=i("3eba"),r=i("6d8b"),a=r.createHashMap,o=r.each;n.registerProcessor({getTargetSeries:function(e){var t=a();return e.eachComponent("dataZoom",(function(e){e.eachTargetAxis((function(e,i,n){var r=n.getAxisProxy(e.name,i);o(r.getTargetSeriesModels(),(function(e){t.set(e.uid,e)}))}))})),t},modifyOutputEnd:!0,overallReset:function(e,t){e.eachComponent("dataZoom",(function(e){e.eachTargetAxis((function(e,i,n){n.getAxisProxy(e.name,i).reset(n,t)})),e.eachTargetAxis((function(e,i,n){n.getAxisProxy(e.name,i).filterData(n,t)}))})),e.eachComponent("dataZoom",(function(e){var t=e.findRepresentativeAxisProxy(),i=t.getDataPercentWindow(),n=t.getDataValueWindow();e.setCalculatedRange({start:i[0],end:i[1],startValue:n[0],endValue:n[1]})}))}})},"2cf4":function(e,t){var i=1;"undefined"!==typeof window&&(i=Math.max(window.devicePixelRatio||1,1));var n=0,r=i;t.debugMode=n,t.devicePixelRatio=r},"2d20":function(e,t,i){},"2e0f":function(e,t,i){"use strict";i.d(t,"a",(function(){return m})),i.d(t,"b",(function(){return p})),i.d(t,"c",(function(){return f}));var n,r=i("6c97"),a=i("b2b2"),o=i("0b2d"),s=i("d791"),l=i("8188"),c=i("afe1"),u=i("1a54"),h=i("0cb9"),d=i("ba58");function p(e,t,i,n,r,a,o,s,c,u,h){const d=x[h.mode];let p,f,m=0;if(Object(l["j"])(e,t,i,n,c.spatialReference,r,s))return d.requiresAlignment(h)?(m=d.applyElevationAlignmentBuffer(n,r,a,o,s,c,u,h),p=a,f=o):(p=n,f=r),Object(l["j"])(p,c.spatialReference,f,a,u.spatialReference,o,s)?m:void 0}function f(e,t,i,n,o){const s=(Object(u["c"])(e)?e.z:Object(h["b"])(e)?e.array[e.offset+2]:e[2])||0;switch(i.mode){case"on-the-ground":{const i=Object(a["r"])(Object(h["a"])(t,e,"ground"),0);return o&&(o.verticalDistanceToGround=0,o.sampledElevation=i),i}case"relative-to-ground":{const r=Object(a["r"])(Object(h["a"])(t,e,"ground"),0),l=i.geometryZWithOffset(s,n);return o&&(o.verticalDistanceToGround=l,o.sampledElevation=r),l+r}case"relative-to-scene":{const r=Object(a["r"])(Object(h["a"])(t,e,"scene"),0),l=i.geometryZWithOffset(s,n);return o&&(o.verticalDistanceToGround=l,o.sampledElevation=r),l+r}case"absolute-height":{const r=i.geometryZWithOffset(s,n);if(o){const i=Object(a["r"])(Object(h["a"])(t,e,"ground"),0);o.verticalDistanceToGround=r-i,o.sampledElevation=i}return r}default:return Object(r["a"])(i.mode),0}}function m(e,t,i,n,r){const a=f(t,i,r,n,T);Object(d["b"])(e,T.verticalDistanceToGround);const o=T.sampledElevation,c=Object(s["c"])(w,e.transformation);return S[0]=t.x,S[1]=t.y,S[2]=a,Object(l["c"])(t.spatialReference,S,c,n.spatialReference)?e.transformation=c:console.warn("Could not locate symbol object properly, it might be misplaced"),o}function g(e,t,i,n,r,o){let s=0;const l=o.spatialReference;t*=3,n*=3;for(let c=0;c<r;++c){const r=e[t+0],c=e[t+1],u=e[t+2],h=Object(a["r"])(o.getElevation(r,c,u,l,"ground"),0);s+=h,i[n+0]=r,i[n+1]=c,i[n+2]=h,t+=3,n+=3}return s/r}function v(e,t,i,n,r,o,s,l){let c=0;const u=l.calculateOffsetRenderUnits(s),h=l.featureExpressionInfoContext,d=o.spatialReference;t*=3,n*=3;for(let p=0;p<r;++p){const r=e[t+0],s=e[t+1],l=e[t+2],p=Object(a["r"])(o.getElevation(r,s,l,d,"ground"),0);c+=p,i[n+0]=r,i[n+1]=s,i[n+2]=null==h?l+p+u:p+u,t+=3,n+=3}return c/r}function y(e,t,i,n,r,o,s,l){let c=0;const u=l.calculateOffsetRenderUnits(s),h=l.featureExpressionInfoContext,d=o.spatialReference;t*=3,n*=3;for(let p=0;p<r;++p){const r=e[t+0],s=e[t+1],l=e[t+2],p=Object(a["r"])(o.getElevation(r,s,l,d,"scene"),0);c+=p,i[n+0]=r,i[n+1]=s,i[n+2]=null==h?l+p+u:p+u,t+=3,n+=3}return c/r}function _(e){const t=e.meterUnitOffset,i=e.featureExpressionInfoContext;return 0!==t||null!=i}function b(e,t,i,n,r,a,o,s){const l=s.calculateOffsetRenderUnits(o),c=s.featureExpressionInfoContext;t*=3,n*=3;for(let u=0;u<r;++u){const r=e[t+0],a=e[t+1],o=e[t+2];i[n+0]=r,i[n+1]=a,i[n+2]=null==c?o+l:l,t+=3,n+=3}return 0}!function(e){e[e.NONE=0]="NONE",e[e.UPDATE=1]="UPDATE",e[e.RECREATE=2]="RECREATE"}(n||(n={}));const x={"absolute-height":{applyElevationAlignmentBuffer:b,requiresAlignment:_},"on-the-ground":{applyElevationAlignmentBuffer:g,requiresAlignment:()=>!0},"relative-to-ground":{applyElevationAlignmentBuffer:v,requiresAlignment:()=>!0},"relative-to-scene":{applyElevationAlignmentBuffer:y,requiresAlignment:()=>!0}},w=Object(c["b"])(),T={verticalDistanceToGround:0,sampledElevation:0},S=Object(o["e"])()},"2ebb":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));const n={divisor:0};function r(e,t={}){t={...n,...t};const i=e.stride;return e.fieldNames.filter(t=>{const i=e.fields.get(t).optional;return!(i&&i.glPadding)}).map(n=>{const r=e.fields.get(n),o=r.constructor.ElementCount,s=a(r.constructor.ElementType),l=r.offset,c=!(!r.optional||!r.optional.glNormalized);return{name:n,stride:i,count:o,type:s,offset:l,normalized:c,divisor:t.divisor}})}function a(e){const t=o[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}const o={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126}},"2f45":function(e,t,i){var n=i("6d8b"),r=n.each,a=n.createHashMap,o=(n.assert,i("4e08")),s=(o.__DEV__,a(["tooltip","label","itemName","itemId","seriesName"]));function l(e){var t={},i=t.encode={},n=a(),o=[],l=[],u=t.userOutput={dimensionNames:e.dimensions.slice(),encode:{}};r(e.dimensions,(function(t){var r=e.getDimensionInfo(t),a=r.coordDim;if(a){var d=r.coordDimIndex;c(i,a)[d]=t,r.isExtraCoord||(n.set(a,1),h(r.type)&&(o[0]=t),c(u.encode,a)[d]=r.index),r.defaultTooltip&&l.push(t)}s.each((function(e,t){var n=c(i,t),a=r.otherDims[t];null!=a&&!1!==a&&(n[a]=r.name)}))}));var d=[],p={};n.each((function(e,t){var n=i[t];p[t]=n[0],d=d.concat(n)})),t.dataDimsOnCoord=d,t.encodeFirstDimNotExtra=p;var f=i.label;f&&f.length&&(o=f.slice());var m=i.tooltip;return m&&m.length?l=m.slice():l.length||(l=o.slice()),i.defaultedLabel=o,i.defaultedTooltip=l,t}function c(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function u(e){return"category"===e?"ordinal":"time"===e?"time":"float"}function h(e){return!("ordinal"===e||"time"===e)}t.OTHER_DIMENSIONS=s,t.summarizeDimensions=l,t.getDimensionTypeByAxis=u},3014:function(e,t,i){var n=i("4f85"),r=i("3301"),a=n.extend({type:"series.__base_bar__",getInitialData:function(e,t){return r(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(e){var t=this.coordinateSystem;if(t){var i=t.dataToPoint(t.clampData(e)),n=this.getData(),r=n.getLayout("offset"),a=n.getLayout("size"),o=t.getBaseAxis().isHorizontal()?0:1;return i[o]+=r+a/2,i}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});e.exports=a},3041:function(e,t,i){var n=i("e1fc"),r=i("0da8"),a=i("76a5"),o=i("d9fc"),s=i("c7a2"),l=i("ae69"),c=i("cb11"),u=i("cbe5"),h=i("87b1"),d=i("d498"),p=i("48a9"),f=i("2b61"),m=i("1687"),g=i("342d"),v=g.createFromString,y=i("6d8b"),_=y.isString,b=y.extend,x=y.defaults,w=y.trim,T=y.each,S=/[\s,]+/;function O(e){if(_(e)){var t=new DOMParser;e=t.parseFromString(e,"text/xml")}9===e.nodeType&&(e=e.firstChild);while("svg"!==e.nodeName.toLowerCase()||1!==e.nodeType)e=e.nextSibling;return e}function C(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}C.prototype.parse=function(e,t){t=t||{};var i=O(e);if(!i)throw new Error("Illegal svg");var r=new n;this._root=r;var a=i.getAttribute("viewBox")||"",o=parseFloat(i.getAttribute("width")||t.width),l=parseFloat(i.getAttribute("height")||t.height);isNaN(o)&&(o=null),isNaN(l)&&(l=null),D(i,r,null,!0);var c,u,h=i.firstChild;while(h)this._parseNode(h,r),h=h.nextSibling;if(a){var d=w(a).split(S);d.length>=4&&(c={x:parseFloat(d[0]||0),y:parseFloat(d[1]||0),width:parseFloat(d[2]),height:parseFloat(d[3])})}if(c&&null!=o&&null!=l&&(u=V(c,o,l),!t.ignoreViewBox)){var p=r;r=new n,r.add(p),p.scale=u.scale.slice(),p.position=u.position.slice()}return t.ignoreRootClip||null==o||null==l||r.setClipPath(new s({shape:{x:0,y:0,width:o,height:l}})),{root:r,width:o,height:l,viewBoxRect:c,viewBoxTransform:u}},C.prototype._parseNode=function(e,t){var i,n=e.nodeName.toLowerCase();if("defs"===n?this._isDefine=!0:"text"===n&&(this._isText=!0),this._isDefine){var r=P[n];if(r){var a=r.call(this,e),o=e.getAttribute("id");o&&(this._defs[o]=a)}}else{r=k[n];r&&(i=r.call(this,e,t),t.add(i))}var s=e.firstChild;while(s)1===s.nodeType&&this._parseNode(s,i),3===s.nodeType&&this._isText&&this._parseText(s,i),s=s.nextSibling;"defs"===n?this._isDefine=!1:"text"===n&&(this._isText=!1)},C.prototype._parseText=function(e,t){if(1===e.nodeType){var i=e.getAttribute("dx")||0,n=e.getAttribute("dy")||0;this._textX+=parseFloat(i),this._textY+=parseFloat(n)}var r=new a({style:{text:e.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});A(t,r),D(e,r,this._defs);var o=r.style.fontSize;o&&o<9&&(r.style.fontSize=9,r.scale=r.scale||[1,1],r.scale[0]*=o/9,r.scale[1]*=o/9);var s=r.getBoundingRect();return this._textX+=s.width,t.add(r),r};var k={g:function(e,t){var i=new n;return A(t,i),D(e,i,this._defs),i},rect:function(e,t){var i=new s;return A(t,i),D(e,i,this._defs),i.setShape({x:parseFloat(e.getAttribute("x")||0),y:parseFloat(e.getAttribute("y")||0),width:parseFloat(e.getAttribute("width")||0),height:parseFloat(e.getAttribute("height")||0)}),i},circle:function(e,t){var i=new o;return A(t,i),D(e,i,this._defs),i.setShape({cx:parseFloat(e.getAttribute("cx")||0),cy:parseFloat(e.getAttribute("cy")||0),r:parseFloat(e.getAttribute("r")||0)}),i},line:function(e,t){var i=new c;return A(t,i),D(e,i,this._defs),i.setShape({x1:parseFloat(e.getAttribute("x1")||0),y1:parseFloat(e.getAttribute("y1")||0),x2:parseFloat(e.getAttribute("x2")||0),y2:parseFloat(e.getAttribute("y2")||0)}),i},ellipse:function(e,t){var i=new l;return A(t,i),D(e,i,this._defs),i.setShape({cx:parseFloat(e.getAttribute("cx")||0),cy:parseFloat(e.getAttribute("cy")||0),rx:parseFloat(e.getAttribute("rx")||0),ry:parseFloat(e.getAttribute("ry")||0)}),i},polygon:function(e,t){var i=e.getAttribute("points");i&&(i=I(i));var n=new h({shape:{points:i||[]}});return A(t,n),D(e,n,this._defs),n},polyline:function(e,t){var i=new u;A(t,i),D(e,i,this._defs);var n=e.getAttribute("points");n&&(n=I(n));var r=new d({shape:{points:n||[]}});return r},image:function(e,t){var i=new r;return A(t,i),D(e,i,this._defs),i.setStyle({image:e.getAttribute("xlink:href"),x:e.getAttribute("x"),y:e.getAttribute("y"),width:e.getAttribute("width"),height:e.getAttribute("height")}),i},text:function(e,t){var i=e.getAttribute("x")||0,r=e.getAttribute("y")||0,a=e.getAttribute("dx")||0,o=e.getAttribute("dy")||0;this._textX=parseFloat(i)+parseFloat(a),this._textY=parseFloat(r)+parseFloat(o);var s=new n;return A(t,s),D(e,s,this._defs),s},tspan:function(e,t){var i=e.getAttribute("x"),r=e.getAttribute("y");null!=i&&(this._textX=parseFloat(i)),null!=r&&(this._textY=parseFloat(r));var a=e.getAttribute("dx")||0,o=e.getAttribute("dy")||0,s=new n;return A(t,s),D(e,s,this._defs),this._textX+=a,this._textY+=o,s},path:function(e,t){var i=e.getAttribute("d")||"",n=v(i);return A(t,n),D(e,n,this._defs),n}},P={lineargradient:function(e){var t=parseInt(e.getAttribute("x1")||0,10),i=parseInt(e.getAttribute("y1")||0,10),n=parseInt(e.getAttribute("x2")||10,10),r=parseInt(e.getAttribute("y2")||0,10),a=new p(t,i,n,r);return E(e,a),a},radialgradient:function(e){}};function E(e,t){var i=e.firstChild;while(i){if(1===i.nodeType){var n=i.getAttribute("offset");n=n.indexOf("%")>0?parseInt(n,10)/100:n?parseFloat(n):0;var r=i.getAttribute("stop-color")||"#000000";t.addColorStop(n,r)}i=i.nextSibling}}function A(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),x(t.__inheritedStyle,e.__inheritedStyle))}function I(e){for(var t=w(e).split(S),i=[],n=0;n<t.length;n+=2){var r=parseFloat(t[n]),a=parseFloat(t[n+1]);i.push([r,a])}return i}var M={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function D(e,t,i,n){var r=t.__inheritedStyle||{},a="text"===t.type;if(1===e.nodeType&&(N(e,t),b(r,B(e)),!n))for(var o in M)if(M.hasOwnProperty(o)){var s=e.getAttribute(o);null!=s&&(r[M[o]]=s)}var l=a?"textFill":"fill",c=a?"textStroke":"stroke";t.style=t.style||new f;var u=t.style;null!=r.fill&&u.set(l,L(r.fill,i)),null!=r.stroke&&u.set(c,L(r.stroke,i)),T(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],(function(e){var t="lineWidth"===e&&a?"textStrokeWidth":e;null!=r[e]&&u.set(t,parseFloat(r[e]))})),r.textBaseline&&"auto"!==r.textBaseline||(r.textBaseline="alphabetic"),"alphabetic"===r.textBaseline&&(r.textBaseline="bottom"),"start"===r.textAlign&&(r.textAlign="left"),"end"===r.textAlign&&(r.textAlign="right"),T(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],(function(e){null!=r[e]&&u.set(e,r[e])})),r.lineDash&&(t.style.lineDash=w(r.lineDash).split(S)),u[c]&&"none"!==u[c]&&(t[c]=!0),t.__inheritedStyle=r}var j=/url\(\s*#(.*?)\)/;function L(e,t){var i=t&&e&&e.match(j);if(i){var n=w(i[1]),r=t[n];return r}return e}var R=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g;function N(e,t){var i=e.getAttribute("transform");if(i){i=i.replace(/,/g," ");var n=null,r=[];i.replace(R,(function(e,t,i){r.push(t,i)}));for(var a=r.length-1;a>0;a-=2){var o=r[a],s=r[a-1];switch(n=n||m.create(),s){case"translate":o=w(o).split(S),m.translate(n,n,[parseFloat(o[0]),parseFloat(o[1]||0)]);break;case"scale":o=w(o).split(S),m.scale(n,n,[parseFloat(o[0]),parseFloat(o[1]||o[0])]);break;case"rotate":o=w(o).split(S),m.rotate(n,n,parseFloat(o[0]));break;case"skew":o=w(o).split(S),console.warn("Skew transform is not supported yet");break;case"matrix":o=w(o).split(S);n[0]=parseFloat(o[0]),n[1]=parseFloat(o[1]),n[2]=parseFloat(o[2]),n[3]=parseFloat(o[3]),n[4]=parseFloat(o[4]),n[5]=parseFloat(o[5]);break}}t.setLocalTransform(n)}}var z=/([^\s:;]+)\s*:\s*([^:;]+)/g;function B(e){var t=e.getAttribute("style"),i={};if(!t)return i;var n,r={};z.lastIndex=0;while(null!=(n=z.exec(t)))r[n[1]]=n[2];for(var a in M)M.hasOwnProperty(a)&&null!=r[a]&&(i[M[a]]=r[a]);return i}function V(e,t,i){var n=t/e.width,r=i/e.height,a=Math.min(n,r),o=[a,a],s=[-(e.x+e.width/2)*a+t/2,-(e.y+e.height/2)*a+i/2];return{scale:o,position:s}}function F(e,t){var i=new C;return i.parse(e,t)}t.parseXML=O,t.makeViewBoxTransform=V,t.parseSVG=F},"307d":function(e,t,i){var n=i("6d8b"),r=i("6179"),a=i("3842"),o=i("923d"),s=i("73ca"),l=i("88f0"),c=i("ee1a"),u=c.getStackedDimension,h=function(e,t,i,r){var a=e.getData(),s=r.type;if(!n.isArray(r)&&("min"===s||"max"===s||"average"===s||"median"===s||null!=r.xAxis||null!=r.yAxis)){var l,c;if(null!=r.yAxis||null!=r.xAxis)l=t.getAxis(null!=r.yAxis?"y":"x"),c=n.retrieve(r.yAxis,r.xAxis);else{var h=o.getAxisInfo(r,a,t,e);l=h.valueAxis;var d=u(a,h.valueDataDim);c=o.numCalculate(a,d,s)}var p="x"===l.dim?0:1,f=1-p,m=n.clone(r),g={};m.type=null,m.coord=[],g.coord=[],m.coord[f]=-1/0,g.coord[f]=1/0;var v=i.get("precision");v>=0&&"number"===typeof c&&(c=+c.toFixed(Math.min(v,20))),m.coord[p]=g.coord[p]=c,r=[m,g,{type:s,valueIndex:r.valueIndex,value:c}]}return r=[o.dataTransform(e,r[0]),o.dataTransform(e,r[1]),n.extend({},r[2])],r[2].type=r[2].type||"",n.merge(r[2],r[0]),n.merge(r[2],r[1]),r};function d(e){return!isNaN(e)&&!isFinite(e)}function p(e,t,i,n){var r=1-e,a=n.dimensions[e];return d(t[r])&&d(i[r])&&t[e]===i[e]&&n.getAxis(a).containData(t[e])}function f(e,t){if("cartesian2d"===e.type){var i=t[0].coord,n=t[1].coord;if(i&&n&&(p(1,i,n,e)||p(0,i,n,e)))return!0}return o.dataFilter(e,t[0])&&o.dataFilter(e,t[1])}function m(e,t,i,n,r){var o,s=n.coordinateSystem,l=e.getItemModel(t),c=a.parsePercent(l.get("x"),r.getWidth()),u=a.parsePercent(l.get("y"),r.getHeight());if(isNaN(c)||isNaN(u)){if(n.getMarkerPosition)o=n.getMarkerPosition(e.getValues(e.dimensions,t));else{var h=s.dimensions,p=e.get(h[0],t),f=e.get(h[1],t);o=s.dataToPoint([p,f])}if("cartesian2d"===s.type){var m=s.getAxis("x"),g=s.getAxis("y");h=s.dimensions;d(e.get(h[0],t))?o[0]=m.toGlobalCoord(m.getExtent()[i?0:1]):d(e.get(h[1],t))&&(o[1]=g.toGlobalCoord(g.getExtent()[i?0:1]))}isNaN(c)||(o[0]=c),isNaN(u)||(o[1]=u)}else o=[c,u];e.setItemLayout(t,o)}var g=l.extend({type:"markLine",updateTransform:function(e,t,i){t.eachSeries((function(e){var t=e.markLineModel;if(t){var n=t.getData(),r=t.__from,a=t.__to;r.each((function(t){m(r,t,!0,e,i),m(a,t,!1,e,i)})),n.each((function(e){n.setItemLayout(e,[r.getItemLayout(e),a.getItemLayout(e)])})),this.markerGroupMap.get(e.id).updateLayout()}}),this)},renderSeries:function(e,t,i,r){var a=e.coordinateSystem,o=e.id,l=e.getData(),c=this.markerGroupMap,u=c.get(o)||c.set(o,new s);this.group.add(u.group);var h=v(a,e,t),d=h.from,p=h.to,f=h.line;t.__from=d,t.__to=p,t.setData(f);var g=t.get("symbol"),y=t.get("symbolSize");function _(t,i,n){var a=t.getItemModel(i);m(t,i,n,e,r),t.setItemVisual(i,{symbolRotate:a.get("symbolRotate"),symbolSize:a.get("symbolSize")||y[n?0:1],symbol:a.get("symbol",!0)||g[n?0:1],color:a.get("itemStyle.color")||l.getVisual("color")})}n.isArray(g)||(g=[g,g]),"number"===typeof y&&(y=[y,y]),h.from.each((function(e){_(d,e,!0),_(p,e,!1)})),f.each((function(e){var t=f.getItemModel(e).get("lineStyle.color");f.setItemVisual(e,{color:t||d.getItemVisual(e,"color")}),f.setItemLayout(e,[d.getItemLayout(e),p.getItemLayout(e)]),f.setItemVisual(e,{fromSymbolRotate:d.getItemVisual(e,"symbolRotate"),fromSymbolSize:d.getItemVisual(e,"symbolSize"),fromSymbol:d.getItemVisual(e,"symbol"),toSymbolRotate:p.getItemVisual(e,"symbolRotate"),toSymbolSize:p.getItemVisual(e,"symbolSize"),toSymbol:p.getItemVisual(e,"symbol")})})),u.updateData(f),h.line.eachItemGraphicEl((function(e,i){e.traverse((function(e){e.dataModel=t}))})),u.__keep=!0,u.group.silent=t.get("silent")||e.get("silent")}});function v(e,t,i){var a;a=e?n.map(e&&e.dimensions,(function(e){var i=t.getData().getDimensionInfo(t.getData().mapDimension(e))||{};return n.defaults({name:e},i)})):[{name:"value",type:"float"}];var s=new r(a,i),l=new r(a,i),c=new r([],i),u=n.map(i.get("data"),n.curry(h,t,e,i));e&&(u=n.filter(u,n.curry(f,e)));var d=e?o.dimValueGetter:function(e){return e.value};return s.initData(n.map(u,(function(e){return e[0]})),null,d),l.initData(n.map(u,(function(e){return e[1]})),null,d),c.initData(n.map(u,(function(e){return e[2]}))),c.hasItemOption=!0,{from:s,to:l,line:c}}e.exports=g},"30a3":function(e,t,i){var n=i("6d8b"),r=i("607d"),a=r.Dispatcher,o=i("98b7"),s=i("06ad"),l=function(e){e=e||{},this.stage=e.stage||{},this.onframe=e.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,a.call(this)};l.prototype={constructor:l,addClip:function(e){this._clips.push(e)},addAnimator:function(e){e.animation=this;for(var t=e.getClips(),i=0;i<t.length;i++)this.addClip(t[i])},removeClip:function(e){var t=n.indexOf(this._clips,e);t>=0&&this._clips.splice(t,1)},removeAnimator:function(e){for(var t=e.getClips(),i=0;i<t.length;i++)this.removeClip(t[i]);e.animation=null},_update:function(){for(var e=(new Date).getTime()-this._pausedTime,t=e-this._time,i=this._clips,n=i.length,r=[],a=[],o=0;o<n;o++){var s=i[o],l=s.step(e,t);l&&(r.push(l),a.push(s))}for(o=0;o<n;)i[o]._needsRemove?(i[o]=i[n-1],i.pop(),n--):o++;n=r.length;for(o=0;o<n;o++)a[o].fire(r[o]);this._time=e,this.onframe(t),this.trigger("frame",t),this.stage.update&&this.stage.update()},_startLoop:function(){var e=this;function t(){e._running&&(o(t),!e._paused&&e._update())}this._running=!0,o(t)},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(e,t){t=t||{};var i=new s(e,t.loop,t.getter,t.setter);return this.addAnimator(i),i}},n.mixin(l,a);var c=l;e.exports=c},"31d9":function(e,t,i){var n=i("6d8b"),r=n.each,a="\0__link_datas",o="\0__link_mainData";function s(e){var t=e.mainData,i=e.datas;i||(i={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,p(t,i,e),r(i,(function(i){r(t.TRANSFERABLE_METHODS,(function(t){i.wrapMethod(t,n.curry(l,e))}))})),t.wrapMethod("cloneShallow",n.curry(u,e)),r(t.CHANGABLE_METHODS,(function(i){t.wrapMethod(i,n.curry(c,e))})),n.assert(i[t.dataType]===t)}function l(e,t){if(d(this)){var i=n.extend({},this[a]);i[this.dataType]=t,p(t,i,e)}else f(t,this.dataType,this[o],e);return t}function c(e,t){return e.struct&&e.struct.update(this),t}function u(e,t){return r(t[a],(function(i,n){i!==t&&f(i.cloneShallow(),n,t,e)})),t}function h(e){var t=this[o];return null==e||null==t?t:t[a][e]}function d(e){return e[o]===e}function p(e,t,i){e[a]={},r(t,(function(t,n){f(t,n,e,i)}))}function f(e,t,i,n){i[a][t]=e,e[o]=i,e.dataType=t,n.struct&&(e[n.structAttr]=n.struct,n.struct[n.datasAttr[t]]=e),e.getLinkedData=h}var m=s;e.exports=m},"32a1":function(e,t,i){var n=i("6d8b"),r=i("7dcf"),a=i("ef6a"),o=i("5576"),s=n.bind,l=r.extend({type:"dataZoom.inside",init:function(e,t){this._range},render:function(e,t,i,r){l.superApply(this,"render",arguments),this._range=e.getPercentRange(),n.each(this.getTargetCoordInfo(),(function(t,r){var a=n.map(t,(function(e){return o.generateCoordId(e.model)}));n.each(t,(function(t){var l=t.model,u={};n.each(["pan","zoom","scrollMove"],(function(e){u[e]=s(c[e],this,t,r)}),this),o.register(i,{coordId:o.generateCoordId(l),allCoordIds:a,containsPoint:function(e,t,i){return l.coordinateSystem.containPoint([t,i])},dataZoomId:e.id,dataZoomModel:e,getRange:u})}),this)}),this)},dispose:function(){o.unregister(this.api,this.dataZoomModel.id),l.superApply(this,"dispose",arguments),this._range=null}}),c={zoom:function(e,t,i,n){var r=this._range,o=r.slice(),s=e.axisModels[0];if(s){var l=h[t](null,[n.originX,n.originY],s,i,e),c=(l.signal>0?l.pixelStart+l.pixelLength-l.pixel:l.pixel-l.pixelStart)/l.pixelLength*(o[1]-o[0])+o[0],u=Math.max(1/n.scale,0);o[0]=(o[0]-c)*u+c,o[1]=(o[1]-c)*u+c;var d=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return a(0,o,[0,100],0,d.minSpan,d.maxSpan),this._range=o,r[0]!==o[0]||r[1]!==o[1]?o:void 0}},pan:u((function(e,t,i,n,r,a){var o=h[n]([a.oldX,a.oldY],[a.newX,a.newY],t,r,i);return o.signal*(e[1]-e[0])*o.pixel/o.pixelLength})),scrollMove:u((function(e,t,i,n,r,a){var o=h[n]([0,0],[a.scrollDelta,a.scrollDelta],t,r,i);return o.signal*(e[1]-e[0])*a.scrollDelta}))};function u(e){return function(t,i,n,r){var o=this._range,s=o.slice(),l=t.axisModels[0];if(l){var c=e(s,l,t,i,n,r);return a(c,s,[0,100],"all"),this._range=s,o[0]!==s[0]||o[1]!==s[1]?s:void 0}}}var h={grid:function(e,t,i,n,r){var a=i.axis,o={},s=r.model.coordinateSystem.getRect();return e=e||[0,0],"x"===a.dim?(o.pixel=t[0]-e[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(e,t,i,n,r){var a=i.axis,o={},s=r.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),c=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),"radiusAxis"===i.mainType?(o.pixel=t[0]-e[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=c[1]-c[0],o.pixelStart=c[0],o.signal=a.inverse?-1:1),o},singleAxis:function(e,t,i,n,r){var a=i.axis,o=r.model.coordinateSystem.getRect(),s={};return e=e||[0,0],"horizontal"===a.orient?(s.pixel=t[0]-e[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}},d=l;e.exports=d},"32f1":function(e,t,i){"use strict";i("fd11")},3301:function(e,t,i){var n=i("6d8b"),r=i("6179"),a=i("b1d4"),o=i("93d0"),s=o.SOURCE_FORMAT_ORIGINAL,l=i("2f45"),c=l.getDimensionTypeByAxis,u=i("e0d3"),h=u.getDataItemValue,d=i("2039"),p=i("8b7f"),f=p.getCoordSysInfoBySeries,m=i("ec6f"),g=i("ee1a"),v=g.enableDataStack,y=i("0f99"),_=y.makeSeriesEncodeForAxisCoordSys;function b(e,t,i){i=i||{},m.isInstance(e)||(e=m.seriesDataToSource(e));var o,s=t.get("coordinateSystem"),l=d.get(s),u=f(t);u&&(o=n.map(u.coordSysDims,(function(e){var t={name:e},i=u.axisMap.get(e);if(i){var n=i.get("type");t.type=c(n)}return t}))),o||(o=l&&(l.getDimensionsInfo?l.getDimensionsInfo():l.dimensions.slice())||["x","y"]);var h,p,g=a(e,{coordDimensions:o,generateCoord:i.generateCoord,encodeDefaulter:i.useEncodeDefaulter?n.curry(_,o,t):null});u&&n.each(g,(function(e,t){var i=e.coordDim,n=u.categoryAxisMap.get(i);n&&(null==h&&(h=t),e.ordinalMeta=n.getOrdinalMeta()),null!=e.otherDims.itemName&&(p=!0)})),p||null==h||(g[h].otherDims.itemName=0);var y=v(t,g),b=new r(g,t);b.setCalculationInfo(y);var w=null!=h&&x(e)?function(e,t,i,n){return n===h?i:this.defaultDimValueGetter(e,t,i,n)}:null;return b.hasItemOption=!1,b.initData(e,null,w),b}function x(e){if(e.sourceFormat===s){var t=w(e.data||[]);return null!=t&&!n.isArray(h(t))}}function w(e){var t=0;while(t<e.length&&null==e[t])t++;return e[t]}var T=b;e.exports=T},"342d":function(e,t,i){var n=i("cbe5"),r=i("20c8"),a=i("ee84"),o=Math.sqrt,s=Math.sin,l=Math.cos,c=Math.PI,u=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},h=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(u(e)*u(t))},d=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(h(e,t))};function p(e,t,i,n,r,a,u,p,f,m,g){var v=f*(c/180),y=l(v)*(e-i)/2+s(v)*(t-n)/2,_=-1*s(v)*(e-i)/2+l(v)*(t-n)/2,b=y*y/(u*u)+_*_/(p*p);b>1&&(u*=o(b),p*=o(b));var x=(r===a?-1:1)*o((u*u*(p*p)-u*u*(_*_)-p*p*(y*y))/(u*u*(_*_)+p*p*(y*y)))||0,w=x*u*_/p,T=x*-p*y/u,S=(e+i)/2+l(v)*w-s(v)*T,O=(t+n)/2+s(v)*w+l(v)*T,C=d([1,0],[(y-w)/u,(_-T)/p]),k=[(y-w)/u,(_-T)/p],P=[(-1*y-w)/u,(-1*_-T)/p],E=d(k,P);h(k,P)<=-1&&(E=c),h(k,P)>=1&&(E=0),0===a&&E>0&&(E-=2*c),1===a&&E<0&&(E+=2*c),g.addData(m,S,O,u,p,C,E,v,a)}var f=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,m=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function g(e){if(!e)return new r;for(var t,i=0,n=0,a=i,o=n,s=new r,l=r.CMD,c=e.match(f),u=0;u<c.length;u++){for(var h,d=c[u],g=d.charAt(0),v=d.match(m)||[],y=v.length,_=0;_<y;_++)v[_]=parseFloat(v[_]);var b=0;while(b<y){var x,w,T,S,O,C,k,P=i,E=n;switch(g){case"l":i+=v[b++],n+=v[b++],h=l.L,s.addData(h,i,n);break;case"L":i=v[b++],n=v[b++],h=l.L,s.addData(h,i,n);break;case"m":i+=v[b++],n+=v[b++],h=l.M,s.addData(h,i,n),a=i,o=n,g="l";break;case"M":i=v[b++],n=v[b++],h=l.M,s.addData(h,i,n),a=i,o=n,g="L";break;case"h":i+=v[b++],h=l.L,s.addData(h,i,n);break;case"H":i=v[b++],h=l.L,s.addData(h,i,n);break;case"v":n+=v[b++],h=l.L,s.addData(h,i,n);break;case"V":n=v[b++],h=l.L,s.addData(h,i,n);break;case"C":h=l.C,s.addData(h,v[b++],v[b++],v[b++],v[b++],v[b++],v[b++]),i=v[b-2],n=v[b-1];break;case"c":h=l.C,s.addData(h,v[b++]+i,v[b++]+n,v[b++]+i,v[b++]+n,v[b++]+i,v[b++]+n),i+=v[b-2],n+=v[b-1];break;case"S":x=i,w=n;var A=s.len(),I=s.data;t===l.C&&(x+=i-I[A-4],w+=n-I[A-3]),h=l.C,P=v[b++],E=v[b++],i=v[b++],n=v[b++],s.addData(h,x,w,P,E,i,n);break;case"s":x=i,w=n;A=s.len(),I=s.data;t===l.C&&(x+=i-I[A-4],w+=n-I[A-3]),h=l.C,P=i+v[b++],E=n+v[b++],i+=v[b++],n+=v[b++],s.addData(h,x,w,P,E,i,n);break;case"Q":P=v[b++],E=v[b++],i=v[b++],n=v[b++],h=l.Q,s.addData(h,P,E,i,n);break;case"q":P=v[b++]+i,E=v[b++]+n,i+=v[b++],n+=v[b++],h=l.Q,s.addData(h,P,E,i,n);break;case"T":x=i,w=n;A=s.len(),I=s.data;t===l.Q&&(x+=i-I[A-4],w+=n-I[A-3]),i=v[b++],n=v[b++],h=l.Q,s.addData(h,x,w,i,n);break;case"t":x=i,w=n;A=s.len(),I=s.data;t===l.Q&&(x+=i-I[A-4],w+=n-I[A-3]),i+=v[b++],n+=v[b++],h=l.Q,s.addData(h,x,w,i,n);break;case"A":T=v[b++],S=v[b++],O=v[b++],C=v[b++],k=v[b++],P=i,E=n,i=v[b++],n=v[b++],h=l.A,p(P,E,i,n,C,k,T,S,O,h,s);break;case"a":T=v[b++],S=v[b++],O=v[b++],C=v[b++],k=v[b++],P=i,E=n,i+=v[b++],n+=v[b++],h=l.A,p(P,E,i,n,C,k,T,S,O,h,s);break}}"z"!==g&&"Z"!==g||(h=l.Z,s.addData(h),i=a,n=o),t=h}return s.toStatic(),s}function v(e,t){var i=g(e);return t=t||{},t.buildPath=function(e){if(e.setData){e.setData(i.data);var t=e.getContext();t&&e.rebuildPath(t)}else{t=e;i.rebuildPath(t)}},t.applyTransform=function(e){a(i,e),this.dirty(!0)},t}function y(e,t){return new n(v(e,t))}function _(e,t){return n.extend(v(e,t))}function b(e,t){for(var i=[],r=e.length,a=0;a<r;a++){var o=e[a];o.path||o.createPathProxy(),o.__dirtyPath&&o.buildPath(o.path,o.shape,!0),i.push(o.path)}var s=new n(t);return s.createPathProxy(),s.buildPath=function(e){e.appendPath(i);var t=e.getContext();t&&e.rebuildPath(t)},s}t.createFromString=y,t.extendFromString=_,t.mergePath=b},"34be":function(e,t,i){"use strict";i("11cf")},"34f2":function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return n}));class n{constructor(e,t,i){this.editGeometry=e,this.vertices=t,this.operation=i,this.undone=!1}apply(){this.vertices.forEach(e=>this.operation.apply(e)),this.editGeometry.components.forEach(e=>e.unnormalizeVertexPositions());const e={updatedVertices:this.vertices,operation:this.undone?"redo":"apply"};this.editGeometry.emit("change",e)}undo(){this.vertices.forEach(e=>{this.operation.undo(e)});const e={updatedVertices:this.vertices,operation:"undo"};this.editGeometry.emit("change",e),this.undone=!0}canAccumulate(e){if(this.undone)return!1;if(e.vertices.length!==this.vertices.length)return!1;for(let t=0;t<e.vertices.length;++t)if(e.vertices[t]!==this.vertices[t])return!1;return this.operation.canAccumulate(e.operation)}accumulate(e){if(e instanceof n&&this.canAccumulate(e)){this.vertices.forEach(t=>this.operation.accumulate(t,e.operation)),this.operation.accumulateParams(e.operation),this.editGeometry.components.forEach(e=>e.unnormalizeVertexPositions());const t={updatedVertices:this.vertices,operation:"apply"};return this.editGeometry.emit("change",t),!0}return!1}}class r{constructor(e){this.helper=e}}},3510:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("b2b2"),r=i("f4cc"),a=i("9305"),o=i("3563"),s=i("1f1c"),l=i("c20d");class c{constructor(){this.next=new l["a"]}createSnapDragEventPipelineStep({predicate:e=(()=>!0),cancel:t,snappingManager:i,snappingContext:c}){if(Object(n["j"])(i))return e=>e;let u=null,h=null;const d=()=>{u=Object(n["a"])(u),i.doneSnapping(),Object(n["k"])(h)&&h.frameTask.remove(),h=null};return t.next(e=>(d(),e)),this.next=new l["a"],t=>{if(!e(t))return t;if(u=Object(n["a"])(u),"start"===t.action){const e="3d"===i.view.type?i.view.resourceController.scheduler.registerTask(a["b"].SNAPPING,t=>Object(n["q"])(e).processQueue(t),()=>!1):a["a"];h={context:new s["a"]({geometry:c.geometry,elevationInfo:c.elevationInfo,pointer:c.pointer,vertexHandle:Object(n["k"])(t.info)?t.info.handle:null,excludeFeature:c.excludeFeature,visualizer:c.visualizer}),originalPos:Object(n["k"])(t.snapOrigin)?c.coordinateHelper.createDehydratedPoint(t.snapOrigin):t.mapStart,frameTask:e}}if(Object(n["k"])(h)){const e=h.context.coordinateHelper.createDehydratedPoint(h.context.coordinateHelper.fromArray([h.originalPos.x,h.originalPos.y,h.originalPos.z]));e.x+=t.mapEnd.x-t.mapStart.x,e.y+=t.mapEnd.y-t.mapStart.y;const n=t.mapStart.x-h.originalPos.x,a=t.mapStart.y-h.originalPos.y,s={...t,action:"udpate"},l=h.context,c=i.update(e,h.context);if(t.mapEnd.x=c.x+n,t.mapEnd.y=c.y+a,"end"!==t.action){const t=h.frameTask;u=Object(r["h"])(async r=>{const u=await t.schedule(()=>i.snap(e,l,r),r);if(u.valid){const e=await t.schedule(()=>u.apply(),r);Object(o["a"])(e,c)||(s.mapEnd.x=e.x+n,s.mapEnd.y=e.y+a,this.next.execute(s))}})}}return"end"===t.action&&d(),t}}}},3563:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));i("c120"),i("b2b2");function n(e,t){return!!r(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function r(e,t){return e===t||e&&t&&e.equals(t)}},"36c6":function(e,t){var i,n,r,a,o,s,l,c=9e4;i=function(e){return e*c},n=function(e,t){return e*t},r=function(e){return e/c},a=function(e,t){return e/t},o=function(e,t){return i(a(e,t))},s=function(e,t){return n(r(e),t)},l=function(e,t,i){return r(i?e:e-t)},e.exports={ONE_SECOND_IN_TS:c,secondsToVideoTs:i,secondsToAudioTs:n,videoTsToSeconds:r,audioTsToSeconds:a,audioTsToVideoTs:o,videoTsToAudioTs:s,metadataTsToSeconds:l}},3790:function(e,t,i){var n=i("3a561"),r=n.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}}),a=r;e.exports=a},3842:function(e,t,i){var n=i("6d8b"),r=1e-4;function a(e){return e.replace(/^\s+|\s+$/g,"")}function o(e,t,i,n){var r=t[1]-t[0],a=i[1]-i[0];if(0===r)return 0===a?i[0]:(i[0]+i[1])/2;if(n)if(r>0){if(e<=t[0])return i[0];if(e>=t[1])return i[1]}else{if(e>=t[0])return i[0];if(e<=t[1])return i[1]}else{if(e===t[0])return i[0];if(e===t[1])return i[1]}return(e-t[0])/r*a+i[0]}function s(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return"string"===typeof e?a(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):null==e?NaN:+e}function l(e,t,i){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),e=(+e).toFixed(t),i?e:+e}function c(e){return e.sort((function(e,t){return e-t})),e}function u(e){if(e=+e,isNaN(e))return 0;var t=1,i=0;while(Math.round(e*t)/t!==e)t*=10,i++;return i}function h(e){var t=e.toString(),i=t.indexOf("e");if(i>0){var n=+t.slice(i+1);return n<0?-n:0}var r=t.indexOf(".");return r<0?0:t.length-1-r}function d(e,t){var i=Math.log,n=Math.LN10,r=Math.floor(i(e[1]-e[0])/n),a=Math.round(i(Math.abs(t[1]-t[0]))/n),o=Math.min(Math.max(-r+a,0),20);return isFinite(o)?o:20}function p(e,t,i){if(!e[t])return 0;var r=n.reduce(e,(function(e,t){return e+(isNaN(t)?0:t)}),0);if(0===r)return 0;var a=Math.pow(10,i),o=n.map(e,(function(e){return(isNaN(e)?0:e)/r*a*100})),s=100*a,l=n.map(o,(function(e){return Math.floor(e)})),c=n.reduce(l,(function(e,t){return e+t}),0),u=n.map(o,(function(e,t){return e-l[t]}));while(c<s){for(var h=Number.NEGATIVE_INFINITY,d=null,p=0,f=u.length;p<f;++p)u[p]>h&&(h=u[p],d=p);++l[d],u[d]=0,++c}return l[t]/a}var f=9007199254740991;function m(e){var t=2*Math.PI;return(e%t+t)%t}function g(e){return e>-r&&e<r}var v=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function y(e){if(e instanceof Date)return e;if("string"===typeof e){var t=v.exec(e);if(!t)return new Date(NaN);if(t[8]){var i=+t[4]||0;return"Z"!==t[8].toUpperCase()&&(i-=t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,i,+(t[5]||0),+t[6]||0,+t[7]||0))}return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,+t[7]||0)}return null==e?new Date(NaN):new Date(Math.round(e))}function _(e){return Math.pow(10,b(e))}function b(e){if(0===e)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function x(e,t){var i,n=b(e),r=Math.pow(10,n),a=e/r;return i=t?a<1.5?1:a<2.5?2:a<4?3:a<7?5:10:a<1?1:a<2?2:a<3?3:a<5?5:10,e=i*r,n>=-20?+e.toFixed(n<0?-n:0):e}function w(e,t){var i=(e.length-1)*t+1,n=Math.floor(i),r=+e[n-1],a=i-n;return a?r+a*(e[n]-r):r}function T(e){e.sort((function(e,t){return s(e,t,0)?-1:1}));for(var t=-1/0,i=1,n=0;n<e.length;){for(var r=e[n].interval,a=e[n].close,o=0;o<2;o++)r[o]<=t&&(r[o]=t,a[o]=o?1:1-i),t=r[o],i=a[o];r[0]===r[1]&&a[0]*a[1]!==1?e.splice(n,1):n++}return e;function s(e,t,i){return e.interval[i]<t.interval[i]||e.interval[i]===t.interval[i]&&(e.close[i]-t.close[i]===(i?-1:1)||!i&&s(e,t,1))}}function S(e){return e-parseFloat(e)>=0}t.linearMap=o,t.parsePercent=s,t.round=l,t.asc=c,t.getPrecision=u,t.getPrecisionSafe=h,t.getPixelPrecision=d,t.getPercentWithPrecision=p,t.MAX_SAFE_INTEGER=f,t.remRadian=m,t.isRadianAroundZero=g,t.parseDate=y,t.quantity=_,t.quantityExponent=b,t.nice=x,t.quantile=w,t.reformIntervals=T,t.isNumeric=S},3876:function(e,t,i){"use strict";i("ce1f")},"38a2":function(e,t,i){var n=i("2b17"),r=n.retrieveRawValue,a=i("eda2"),o=a.getTooltipMarker,s=a.formatTpl,l=i("e0d3"),c=l.getTooltipRenderMode,u=/\{@(.+?)\}/g,h={getDataParams:function(e,t){var i=this.getData(t),n=this.getRawValue(e,t),r=i.getRawIndex(e),a=i.getName(e),s=i.getRawDataItem(e),l=i.getItemVisual(e,"color"),u=i.getItemVisual(e,"borderColor"),h=this.ecModel.getComponent("tooltip"),d=h&&h.get("renderMode"),p=c(d),f=this.mainType,m="series"===f,g=i.userOutput;return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:m?this.subType:null,seriesIndex:this.seriesIndex,seriesId:m?this.id:null,seriesName:m?this.name:null,name:a,dataIndex:r,data:s,dataType:t,value:n,color:l,borderColor:u,dimensionNames:g?g.dimensionNames:null,encode:g?g.encode:null,marker:o({color:l,renderMode:p}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(e,t,i,n,a){t=t||"normal";var o=this.getData(i),l=o.getItemModel(e),c=this.getDataParams(e,i);null!=n&&c.value instanceof Array&&(c.value=c.value[n]);var h=l.get("normal"===t?[a||"label","formatter"]:[t,a||"label","formatter"]);if("function"===typeof h)return c.status=t,c.dimensionIndex=n,h(c);if("string"===typeof h){var d=s(h,c);return d.replace(u,(function(t,i){var n=i.length;return"["===i.charAt(0)&&"]"===i.charAt(n-1)&&(i=+i.slice(1,n-1)),r(o,e,i)}))}},getRawValue:function(e,t){return r(this.getData(t),e)},formatTooltip:function(){}};e.exports=h},3901:function(e,t,i){var n=i("282b"),r=n([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),a={getLineStyle:function(e){var t=r(this,e);return t.lineDash=this.getLineDash(t.lineWidth),t},getLineDash:function(e){null==e&&(e=1);var t=this.get("type"),i=Math.max(e,2),n=4*e;return"solid"!==t&&null!=t&&("dashed"===t?[n,n]:[i,i])}};e.exports=a},"392f":function(e,t,i){var n=i("6d8b"),r=n.inherits,a=i("19eb"),o=i("9850");function s(e){a.call(this,e),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}s.prototype.incremental=!0,s.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},s.prototype.addDisplayable=function(e,t){t?this._temporaryDisplayables.push(e):this._displayables.push(e),this.dirty()},s.prototype.addDisplayables=function(e,t){t=t||!1;for(var i=0;i<e.length;i++)this.addDisplayable(e[i],t)},s.prototype.eachPendingDisplayable=function(e){for(var t=this._cursor;t<this._displayables.length;t++)e&&e(this._displayables[t]);for(t=0;t<this._temporaryDisplayables.length;t++)e&&e(this._temporaryDisplayables[t])},s.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++){var t=this._displayables[e];t.parent=this,t.update(),t.parent=null}for(e=0;e<this._temporaryDisplayables.length;e++){t=this._temporaryDisplayables[e];t.parent=this,t.update(),t.parent=null}},s.prototype.brush=function(e,t){for(var i=this._cursor;i<this._displayables.length;i++){var n=this._displayables[i];n.beforeBrush&&n.beforeBrush(e),n.brush(e,i===this._cursor?null:this._displayables[i-1]),n.afterBrush&&n.afterBrush(e)}this._cursor=i;for(i=0;i<this._temporaryDisplayables.length;i++){n=this._temporaryDisplayables[i];n.beforeBrush&&n.beforeBrush(e),n.brush(e,0===i?null:this._temporaryDisplayables[i-1]),n.afterBrush&&n.afterBrush(e)}this._temporaryDisplayables=[],this.notClear=!0};var l=[];s.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new o(1/0,1/0,-1/0,-1/0),t=0;t<this._displayables.length;t++){var i=this._displayables[t],n=i.getBoundingRect().clone();i.needLocalTransform()&&n.applyTransform(i.getLocalTransform(l)),e.union(n)}this._rect=e}return this._rect},s.prototype.contain=function(e,t){var i=this.transformCoordToLocal(e,t),n=this.getBoundingRect();if(n.contain(i[0],i[1]))for(var r=0;r<this._displayables.length;r++){var a=this._displayables[r];if(a.contain(e,t))return!0}return!1},r(s,a);var c=s;e.exports=c},"398e":function(e,t,i){},"3a07":function(e,t,i){"use strict";i("da8e")},"3a561":function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("3eba")),a=i("6d8b"),o=i("22d1"),s=i("e0d3"),l=i("50e5"),c=i("cc39"),u=a.each,h=l.eachAxisDim,d=r.extendComponentModel({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(e,t,i){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this.textStyleModel,this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var n=p(e);this.settledOption=n,this.mergeDefaultAndTheme(e,i),this.doInit(n)},mergeOption:function(e){var t=p(e);a.merge(this.option,e,!0),a.merge(this.settledOption,t,!0),this.doInit(t)},doInit:function(e){var t=this.option;o.canvasSupported||(t.realtime=!1),this._setDefaultThrottle(e),f(this,e);var i=this.settledOption;u([["start","startValue"],["end","endValue"]],(function(e,n){"value"===this._rangePropMode[n]&&(t[e[0]]=i[e[0]]=null)}),this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var e=this._axisProxies;this.eachTargetAxis((function(t,i,n,r){var a=this.dependentModels[t.axis][i],o=a.__dzAxisProxy||(a.__dzAxisProxy=new c(t.name,i,this,r));e[t.name+"_"+i]=o}),this)},_resetTarget:function(){var e=this.option,t=this._judgeAutoMode();h((function(t){var i=t.axisIndex;e[i]=s.normalizeToArray(e[i])}),this),"axisIndex"===t?this._autoSetAxisIndex():"orient"===t&&this._autoSetOrient()},_judgeAutoMode:function(){var e=this.option,t=!1;h((function(i){null!=e[i.axisIndex]&&(t=!0)}),this);var i=e.orient;return null==i&&t?"orient":t?void 0:(null==i&&(e.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var e=!0,t=this.get("orient",!0),i=this.option,n=this.dependentModels;if(e){var r="vertical"===t?"y":"x";n[r+"Axis"].length?(i[r+"AxisIndex"]=[0],e=!1):u(n.singleAxis,(function(n){e&&n.get("orient",!0)===t&&(i.singleAxisIndex=[n.componentIndex],e=!1)}))}e&&h((function(t){if(e){var n=[],r=this.dependentModels[t.axis];if(r.length&&!n.length)for(var a=0,o=r.length;a<o;a++)"category"===r[a].get("type")&&n.push(a);i[t.axisIndex]=n,n.length&&(e=!1)}}),this),e&&this.ecModel.eachSeries((function(e){this._isSeriesHasAllAxesTypeOf(e,"value")&&h((function(t){var n=i[t.axisIndex],r=e.get(t.axisIndex),o=e.get(t.axisId),s=e.ecModel.queryComponents({mainType:t.axis,index:r,id:o})[0];r=s.componentIndex,a.indexOf(n,r)<0&&n.push(r)}))}),this)},_autoSetOrient:function(){var e;this.eachTargetAxis((function(t){!e&&(e=t.name)}),this),this.option.orient="y"===e?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(e,t){var i=!0;return h((function(n){var r=e.get(n.axisIndex),a=this.dependentModels[n.axis][r];a&&a.get("type")===t||(i=!1)}),this),i},_setDefaultThrottle:function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var e;return h((function(t){if(null==e){var i=this.get(t.axisIndex);i.length&&(e=this.dependentModels[t.axis][i[0]])}}),this),e},eachTargetAxis:function(e,t){var i=this.ecModel;h((function(n){u(this.get(n.axisIndex),(function(r){e.call(t,n,r,this,i)}),this)}),this)},getAxisProxy:function(e,t){return this._axisProxies[e+"_"+t]},getAxisModel:function(e,t){var i=this.getAxisProxy(e,t);return i&&i.getAxisModel()},setRawRange:function(e){var t=this.option,i=this.settledOption;u([["start","startValue"],["end","endValue"]],(function(n){null==e[n[0]]&&null==e[n[1]]||(t[n[0]]=i[n[0]]=e[n[0]],t[n[1]]=i[n[1]]=e[n[1]])}),this),f(this,e)},setCalculatedRange:function(e){var t=this.option;u(["start","startValue","end","endValue"],(function(i){t[i]=e[i]}))},getPercentRange:function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},getValueRange:function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var i=this.findRepresentativeAxisProxy();return i?i.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(e){if(e)return e.__dzAxisProxy;var t=this._axisProxies;for(var i in t)if(t.hasOwnProperty(i)&&t[i].hostedBy(this))return t[i];for(var i in t)if(t.hasOwnProperty(i)&&!t[i].hostedBy(this))return t[i]},getRangePropMode:function(){return this._rangePropMode.slice()}});function p(e){var t={};return u(["start","end","startValue","endValue","throttle"],(function(i){e.hasOwnProperty(i)&&(t[i]=e[i])})),t}function f(e,t){var i=e._rangePropMode,n=e.get("rangeMode");u([["start","startValue"],["end","endValue"]],(function(e,r){var a=null!=t[e[0]],o=null!=t[e[1]];a&&!o?i[r]="percent":!a&&o?i[r]="value":n?i[r]=n[r]:a&&(i[r]="percent")}))}var m=d;e.exports=m},"3c96":function(e,t){function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e.exports=i,e.exports["default"]=e.exports,e.exports.__esModule=!0},"3cde3":function(e,t,i){"use strict";i("044a")},"3eba":function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("697e7")),a=i("6d8b"),o=i("41ef"),s=i("22d1"),l=i("04f6"),c=i("1fab"),u=i("7e63"),h=i("843e"),d=i("2039"),p=i("ca981"),f=i("fb05"),m=i("d15d"),g=i("6cb7"),v=i("4f85"),y=i("b12f"),_=i("e887"),b=i("2306"),x=i("e0d3"),w=i("88b3"),T=w.throttle,S=i("fd63"),O=i("b809"),C=i("998c"),k=i("69ff"),P=i("c533"),E=i("f219");i("0352");var A=i("ec34"),I=a.assert,M=a.each,D=a.isFunction,j=a.isObject,L=g.parseClassType,R="4.9.0",N={zrender:"4.3.2"},z=1,B=1e3,V=800,F=900,U=5e3,G=1e3,H=1100,W=2e3,q=3e3,Z=3500,Y=4e3,X=5e3,K={PROCESSOR:{FILTER:B,SERIES_FILTER:V,STATISTIC:U},VISUAL:{LAYOUT:G,PROGRESSIVE_LAYOUT:H,GLOBAL:W,CHART:q,POST_CHART_LAYOUT:Z,COMPONENT:Y,BRUSH:X}},$="__flagInMainProcess",Q="__optionUpdated",J=/^[a-zA-Z0-9_]+$/;function ee(e,t){return function(i,n,r){t||!this._disposed?(i=i&&i.toLowerCase(),c.prototype[e].call(this,i,n,r)):be(this.id)}}function te(){c.call(this)}function ie(e,t,i){i=i||{},"string"===typeof t&&(t=Me[t]),this.id,this.group,this._dom=e;var n="canvas",o=this._zr=r.init(e,{renderer:i.renderer||n,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height});this._throttledZrFlush=T(a.bind(o.flush,o),17);t=a.clone(t);t&&f(t,!0),this._theme=t,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new d;var s=this._api=Se(this);function u(e,t){return e.__prio-t.__prio}l(Ie,u),l(Pe,u),this._scheduler=new k(this,s,Pe,Ie),c.call(this,this._ecEventProcessor=new Oe),this._messageCenter=new te,this._initEvents(),this.resize=a.bind(this.resize,this),this._pendingActions=[],o.animation.on("frame",this._onframe,this),de(o,this),a.setAsPrimitive(this)}te.prototype.on=ee("on",!0),te.prototype.off=ee("off",!0),te.prototype.one=ee("one",!0),a.mixin(te,c);var ne=ie.prototype;function re(e,t,i){if(this._disposed)be(this.id);else{var n,r=this._model,a=this._coordSysMgr.getCoordinateSystems();t=x.parseFinder(r,t);for(var o=0;o<a.length;o++){var s=a[o];if(s[e]&&null!=(n=s[e](r,t,i)))return n}}}ne._onframe=function(){if(!this._disposed){var e=this._scheduler;if(this[Q]){var t=this[Q].silent;this[$]=!0,oe(this),ae.update.call(this),this[$]=!1,this[Q]=!1,ue.call(this,t),he.call(this,t)}else if(e.unfinished){var i=z,n=this._model,r=this._api;e.unfinished=!1;do{var a=+new Date;e.performSeriesTasks(n),e.performDataProcessorTasks(n),le(this,n),e.performVisualTasks(n),ve(this,this._model,r,"remain"),i-=+new Date-a}while(i>0&&e.unfinished);e.unfinished||this._zr.flush()}}},ne.getDom=function(){return this._dom},ne.getZr=function(){return this._zr},ne.setOption=function(e,t,i){if(this._disposed)be(this.id);else{var n;if(j(t)&&(i=t.lazyUpdate,n=t.silent,t=t.notMerge),this[$]=!0,!this._model||t){var r=new p(this._api),a=this._theme,o=this._model=new u;o.scheduler=this._scheduler,o.init(null,null,a,r)}this._model.setOption(e,Ee),i?(this[Q]={silent:n},this[$]=!1):(oe(this),ae.update.call(this),this._zr.flush(),this[Q]=!1,this[$]=!1,ue.call(this,n),he.call(this,n))}},ne.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},ne.getModel=function(){return this._model},ne.getOption=function(){return this._model&&this._model.getOption()},ne.getWidth=function(){return this._zr.getWidth()},ne.getHeight=function(){return this._zr.getHeight()},ne.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},ne.getRenderedCanvas=function(e){if(s.canvasSupported){e=e||{},e.pixelRatio=e.pixelRatio||1,e.backgroundColor=e.backgroundColor||this._model.get("backgroundColor");var t=this._zr;return t.painter.getRenderedCanvas(e)}},ne.getSvgDataURL=function(){if(s.svgSupported){var e=this._zr,t=e.storage.getDisplayList();return a.each(t,(function(e){e.stopAnimation(!0)})),e.painter.toDataURL()}},ne.getDataURL=function(e){if(!this._disposed){e=e||{};var t=e.excludeComponents,i=this._model,n=[],r=this;M(t,(function(e){i.eachComponent({mainType:e},(function(e){var t=r._componentsMap[e.__viewId];t.group.ignore||(n.push(t),t.group.ignore=!0)}))}));var a="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return M(n,(function(e){e.group.ignore=!1})),a}be(this.id)},ne.getConnectedDataURL=function(e){if(this._disposed)be(this.id);else if(s.canvasSupported){var t="svg"===e.type,i=this.group,n=Math.min,o=Math.max,l=1/0;if(Le[i]){var c=l,u=l,h=-l,d=-l,p=[],f=e&&e.pixelRatio||1;a.each(je,(function(r,s){if(r.group===i){var l=t?r.getZr().painter.getSvgDom().innerHTML:r.getRenderedCanvas(a.clone(e)),f=r.getDom().getBoundingClientRect();c=n(f.left,c),u=n(f.top,u),h=o(f.right,h),d=o(f.bottom,d),p.push({dom:l,left:f.left,top:f.top})}})),c*=f,u*=f,h*=f,d*=f;var m=h-c,g=d-u,v=a.createCanvas(),y=r.init(v,{renderer:t?"svg":"canvas"});if(y.resize({width:m,height:g}),t){var _="";return M(p,(function(e){var t=e.left-c,i=e.top-u;_+='<g transform="translate('+t+","+i+')">'+e.dom+"</g>"})),y.painter.getSvgRoot().innerHTML=_,e.connectedBackgroundColor&&y.painter.setBackgroundColor(e.connectedBackgroundColor),y.refreshImmediately(),y.painter.toDataURL()}return e.connectedBackgroundColor&&y.add(new b.Rect({shape:{x:0,y:0,width:m,height:g},style:{fill:e.connectedBackgroundColor}})),M(p,(function(e){var t=new b.Image({style:{x:e.left*f-c,y:e.top*f-u,image:e.dom}});y.add(t)})),y.refreshImmediately(),v.toDataURL("image/"+(e&&e.type||"png"))}return this.getDataURL(e)}},ne.convertToPixel=a.curry(re,"convertToPixel"),ne.convertFromPixel=a.curry(re,"convertFromPixel"),ne.containPixel=function(e,t){if(!this._disposed){var i,n=this._model;return e=x.parseFinder(n,e),a.each(e,(function(e,n){n.indexOf("Models")>=0&&a.each(e,(function(e){var r=e.coordinateSystem;if(r&&r.containPoint)i|=!!r.containPoint(t);else if("seriesModels"===n){var a=this._chartsMap[e.__viewId];a&&a.containPoint&&(i|=a.containPoint(t,e))}}),this)}),this),!!i}be(this.id)},ne.getVisual=function(e,t){var i=this._model;e=x.parseFinder(i,e,{defaultMainType:"series"});var n=e.seriesModel,r=n.getData(),a=e.hasOwnProperty("dataIndexInside")?e.dataIndexInside:e.hasOwnProperty("dataIndex")?r.indexOfRawIndex(e.dataIndex):null;return null!=a?r.getItemVisual(a,t):r.getVisual(t)},ne.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},ne.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]};var ae={prepareAndUpdate:function(e){oe(this),ae.update.call(this,e)},update:function(e){var t=this._model,i=this._api,n=this._zr,r=this._coordSysMgr,a=this._scheduler;if(t){a.restoreData(t,e),a.performSeriesTasks(t),r.create(t,i),a.performDataProcessorTasks(t,e),le(this,t),r.update(t,i),fe(t),a.performVisualTasks(t,e),me(this,t,i,e);var l=t.get("backgroundColor")||"transparent";if(s.canvasSupported)n.setBackgroundColor(l);else{var c=o.parse(l);l=o.stringify(c,"rgb"),0===c[3]&&(l="transparent")}ye(t,i)}},updateTransform:function(e){var t=this._model,i=this,n=this._api;if(t){var r=[];t.eachComponent((function(a,o){var s=i.getViewOfComponentModel(o);if(s&&s.__alive)if(s.updateTransform){var l=s.updateTransform(o,t,n,e);l&&l.update&&r.push(s)}else r.push(s)}));var o=a.createHashMap();t.eachSeries((function(r){var a=i._chartsMap[r.__viewId];if(a.updateTransform){var s=a.updateTransform(r,t,n,e);s&&s.update&&o.set(r.uid,1)}else o.set(r.uid,1)})),fe(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0,dirtyMap:o}),ve(i,t,n,e,o),ye(t,this._api)}},updateView:function(e){var t=this._model;t&&(_.markUpdateMethod(e,"updateView"),fe(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0}),me(this,this._model,this._api,e),ye(t,this._api))},updateVisual:function(e){ae.update.call(this,e)},updateLayout:function(e){ae.update.call(this,e)}};function oe(e){var t=e._model,i=e._scheduler;i.restorePipelines(t),i.prepareStageTasks(),pe(e,"component",t,i),pe(e,"chart",t,i),i.plan()}function se(e,t,i,n,r){var o=e._model;if(n){var s={};s[n+"Id"]=i[n+"Id"],s[n+"Index"]=i[n+"Index"],s[n+"Name"]=i[n+"Name"];var l={mainType:n,query:s};r&&(l.subType=r);var c=i.excludeSeriesId;null!=c&&(c=a.createHashMap(x.normalizeToArray(c))),o&&o.eachComponent(l,(function(t){c&&null!=c.get(t.id)||u(e["series"===n?"_chartsMap":"_componentsMap"][t.__viewId])}),e)}else M(e._componentsViews.concat(e._chartsViews),u);function u(n){n&&n.__alive&&n[t]&&n[t](n.__model,o,e._api,i)}}function le(e,t){var i=e._chartsMap,n=e._scheduler;t.eachSeries((function(e){n.updateStreamModes(e,i[e.__viewId])}))}function ce(e,t){var i=e.type,n=e.escapeConnect,r=Ce[i],o=r.actionInfo,s=(o.update||"update").split(":"),l=s.pop();s=null!=s[0]&&L(s[0]),this[$]=!0;var c=[e],u=!1;e.batch&&(u=!0,c=a.map(e.batch,(function(t){return t=a.defaults(a.extend({},t),e),t.batch=null,t})));var h,d=[],p="highlight"===i||"downplay"===i;M(c,(function(e){h=r.action(e,this._model,this._api),h=h||a.extend({},e),h.type=o.event||h.type,d.push(h),p?se(this,l,e,"series"):s&&se(this,l,e,s.main,s.sub)}),this),"none"===l||p||s||(this[Q]?(oe(this),ae.update.call(this,e),this[Q]=!1):ae[l].call(this,e)),h=u?{type:o.event||i,escapeConnect:n,batch:d}:d[0],this[$]=!1,!t&&this._messageCenter.trigger(h.type,h)}function ue(e){var t=this._pendingActions;while(t.length){var i=t.shift();ce.call(this,i,e)}}function he(e){!e&&this.trigger("updated")}function de(e,t){e.on("rendered",(function(){t.trigger("rendered"),!e.animation.isFinished()||t[Q]||t._scheduler.unfinished||t._pendingActions.length||t.trigger("finished")}))}function pe(e,t,i,n){for(var r="component"===t,a=r?e._componentsViews:e._chartsViews,o=r?e._componentsMap:e._chartsMap,s=e._zr,l=e._api,c=0;c<a.length;c++)a[c].__alive=!1;function u(e){var t="_ec_"+e.id+"_"+e.type,c=o[t];if(!c){var u=L(e.type),h=r?y.getClass(u.main,u.sub):_.getClass(u.sub);c=new h,c.init(i,l),o[t]=c,a.push(c),s.add(c.group)}e.__viewId=c.__id=t,c.__alive=!0,c.__model=e,c.group.__ecComponentInfo={mainType:e.mainType,index:e.componentIndex},!r&&n.prepareView(c,e,i,l)}r?i.eachComponent((function(e,t){"series"!==e&&u(t)})):i.eachSeries(u);for(c=0;c<a.length;){var h=a[c];h.__alive?c++:(!r&&h.renderTask.dispose(),s.remove(h.group),h.dispose(i,l),a.splice(c,1),delete o[h.__id],h.__id=h.group.__ecComponentInfo=null)}}function fe(e){e.clearColorPalette(),e.eachSeries((function(e){e.clearColorPalette()}))}function me(e,t,i,n){ge(e,t,i,n),M(e._chartsViews,(function(e){e.__alive=!1})),ve(e,t,i,n),M(e._chartsViews,(function(e){e.__alive||e.remove(t,i)}))}function ge(e,t,i,n,r){M(r||e._componentsViews,(function(e){var r=e.__model;e.render(r,t,i,n),Te(r,e)}))}function ve(e,t,i,n,r){var a,o=e._scheduler;t.eachSeries((function(t){var i=e._chartsMap[t.__viewId];i.__alive=!0;var s=i.renderTask;o.updatePayload(s,n),r&&r.get(t.uid)&&s.dirty(),a|=s.perform(o.getPerformArgs(s)),i.group.silent=!!t.get("silent"),Te(t,i),we(t,i)})),o.unfinished|=a,xe(e,t),O(e._zr.dom,t)}function ye(e,t){M(Ae,(function(i){i(e,t)}))}ne.resize=function(e){if(this._disposed)be(this.id);else{this._zr.resize(e);var t=this._model;if(this._loadingFX&&this._loadingFX.resize(),t){var i=t.resetOption("media"),n=e&&e.silent;this[$]=!0,i&&oe(this),ae.update.call(this),this[$]=!1,ue.call(this,n),he.call(this,n)}}},ne.showLoading=function(e,t){if(this._disposed)be(this.id);else if(j(e)&&(t=e,e=""),e=e||"default",this.hideLoading(),De[e]){var i=De[e](this._api,t),n=this._zr;this._loadingFX=i,n.add(i)}},ne.hideLoading=function(){this._disposed?be(this.id):(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},ne.makeActionFromEvent=function(e){var t=a.extend({},e);return t.type=ke[e.type],t},ne.dispatchAction=function(e,t){this._disposed?be(this.id):(j(t)||(t={silent:!!t}),Ce[e.type]&&this._model&&(this[$]?this._pendingActions.push(e):(ce.call(this,e,t.silent),t.flush?this._zr.flush(!0):!1!==t.flush&&s.browser.weChat&&this._throttledZrFlush(),ue.call(this,t.silent),he.call(this,t.silent))))},ne.appendData=function(e){if(this._disposed)be(this.id);else{var t=e.seriesIndex,i=this.getModel(),n=i.getSeriesByIndex(t);n.appendData(e),this._scheduler.unfinished=!0}},ne.on=ee("on",!1),ne.off=ee("off",!1),ne.one=ee("one",!1);var _e=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function be(e){}function xe(e,t){var i=e._zr,n=i.storage,r=0;n.traverse((function(e){r++})),r>t.get("hoverLayerThreshold")&&!s.node&&t.eachSeries((function(t){if(!t.preventUsingHoverLayer){var i=e._chartsMap[t.__viewId];i.__alive&&i.group.traverse((function(e){e.useHoverLayer=!0}))}}))}function we(e,t){var i=e.get("blendMode")||null;t.group.traverse((function(e){e.isGroup||e.style.blend!==i&&e.setStyle("blend",i),e.eachPendingDisplayable&&e.eachPendingDisplayable((function(e){e.setStyle("blend",i)}))}))}function Te(e,t){var i=e.get("z"),n=e.get("zlevel");t.group.traverse((function(e){"group"!==e.type&&(null!=i&&(e.z=i),null!=n&&(e.zlevel=n))}))}function Se(e){var t=e._coordSysMgr;return a.extend(new h(e),{getCoordinateSystems:a.bind(t.getCoordinateSystems,t),getComponentByElement:function(t){while(t){var i=t.__ecComponentInfo;if(null!=i)return e._model.getComponent(i.mainType,i.index);t=t.parent}}})}function Oe(){this.eventInfo}ne._initEvents=function(){M(_e,(function(e){var t=function(t){var i,n=this.getModel(),r=t.target,o="globalout"===e;if(o)i={};else if(r&&null!=r.dataIndex){var s=r.dataModel||n.getSeriesByIndex(r.seriesIndex);i=s&&s.getDataParams(r.dataIndex,r.dataType,r)||{}}else r&&r.eventData&&(i=a.extend({},r.eventData));if(i){var l=i.componentType,c=i.componentIndex;"markLine"!==l&&"markPoint"!==l&&"markArea"!==l||(l="series",c=i.seriesIndex);var u=l&&null!=c&&n.getComponent(l,c),h=u&&this["series"===u.mainType?"_chartsMap":"_componentsMap"][u.__viewId];i.event=t,i.type=e,this._ecEventProcessor.eventInfo={targetEl:r,packedEvent:i,model:u,view:h},this.trigger(e,i)}};t.zrEventfulCallAtLast=!0,this._zr.on(e,t,this)}),this),M(ke,(function(e,t){this._messageCenter.on(t,(function(e){this.trigger(t,e)}),this)}),this)},ne.isDisposed=function(){return this._disposed},ne.clear=function(){this._disposed?be(this.id):this.setOption({series:[]},!0)},ne.dispose=function(){if(this._disposed)be(this.id);else{this._disposed=!0,x.setAttribute(this.getDom(),ze,"");var e=this._api,t=this._model;M(this._componentsViews,(function(i){i.dispose(t,e)})),M(this._chartsViews,(function(i){i.dispose(t,e)})),this._zr.dispose(),delete je[this.id]}},a.mixin(ie,c),Oe.prototype={constructor:Oe,normalizeQuery:function(e){var t={},i={},n={};if(a.isString(e)){var r=L(e);t.mainType=r.main||null,t.subType=r.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};a.each(e,(function(e,r){for(var a=!1,l=0;l<o.length;l++){var c=o[l],u=r.lastIndexOf(c);if(u>0&&u===r.length-c.length){var h=r.slice(0,u);"data"!==h&&(t.mainType=h,t[c.toLowerCase()]=e,a=!0)}}s.hasOwnProperty(r)&&(i[r]=e,a=!0),a||(n[r]=e)}))}return{cptQuery:t,dataQuery:i,otherQuery:n}},filter:function(e,t,i){var n=this.eventInfo;if(!n)return!0;var r=n.targetEl,a=n.packedEvent,o=n.model,s=n.view;if(!o||!s)return!0;var l=t.cptQuery,c=t.dataQuery;return u(l,o,"mainType")&&u(l,o,"subType")&&u(l,o,"index","componentIndex")&&u(l,o,"name")&&u(l,o,"id")&&u(c,a,"name")&&u(c,a,"dataIndex")&&u(c,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,t.otherQuery,r,a));function u(e,t,i,n){return null==e[i]||t[n||i]===e[i]}},afterTrigger:function(){this.eventInfo=null}};var Ce={},ke={},Pe=[],Ee=[],Ae=[],Ie=[],Me={},De={},je={},Le={},Re=new Date-0,Ne=new Date-0,ze="_echarts_instance_";function Be(e){var t=0,i=1,n=2,r="__connectUpdateStatus";function a(e,t){for(var i=0;i<e.length;i++){var n=e[i];n[r]=t}}M(ke,(function(o,s){e._messageCenter.on(s,(function(o){if(Le[e.group]&&e[r]!==t){if(o&&o.escapeConnect)return;var s=e.makeActionFromEvent(o),l=[];M(je,(function(t){t!==e&&t.group===e.group&&l.push(t)})),a(l,t),M(l,(function(e){e[r]!==i&&e.dispatchAction(s)})),a(l,n)}}))}))}function Ve(e,t,i){var n=We(e);if(n)return n;var r=new ie(e,t,i);return r.id="ec_"+Re++,je[r.id]=r,x.setAttribute(e,ze,r.id),Be(r),r}function Fe(e){if(a.isArray(e)){var t=e;e=null,M(t,(function(t){null!=t.group&&(e=t.group)})),e=e||"g_"+Ne++,M(t,(function(t){t.group=e}))}return Le[e]=!0,e}function Ue(e){Le[e]=!1}var Ge=Ue;function He(e){"string"===typeof e?e=je[e]:e instanceof ie||(e=We(e)),e instanceof ie&&!e.isDisposed()&&e.dispose()}function We(e){return je[x.getAttribute(e,ze)]}function qe(e){return je[e]}function Ze(e,t){Me[e]=t}function Ye(e){Ee.push(e)}function Xe(e,t){it(Pe,e,t,B)}function Ke(e){Ae.push(e)}function $e(e,t,i){"function"===typeof t&&(i=t,t="");var n=j(e)?e.type:[e,e={event:t}][0];e.event=(e.event||n).toLowerCase(),t=e.event,I(J.test(n)&&J.test(t)),Ce[n]||(Ce[n]={action:i,actionInfo:e}),ke[t]=n}function Qe(e,t){d.register(e,t)}function Je(e){var t=d.get(e);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()}function et(e,t){it(Ie,e,t,G,"layout")}function tt(e,t){it(Ie,e,t,q,"visual")}function it(e,t,i,n,r){(D(t)||j(t))&&(i=t,t=n);var a=k.wrapStageHandler(i,r);return a.__prio=t,a.__raw=i,e.push(a),a}function nt(e,t){De[e]=t}function rt(e){return g.extend(e)}function at(e){return y.extend(e)}function ot(e){return v.extend(e)}function st(e){return _.extend(e)}function lt(e){a.$override("createCanvas",e)}function ct(e,t,i){A.registerMap(e,t,i)}function ut(e){var t=A.retrieveMap(e);return t&&t[0]&&{geoJson:t[0].geoJSON,specialAreas:t[0].specialAreas}}tt(W,S),Ye(f),Xe(F,m),nt("default",C),$e({type:"highlight",event:"highlight",update:"highlight"},a.noop),$e({type:"downplay",event:"downplay",update:"downplay"},a.noop),Ze("light",P),Ze("dark",E);var ht={};t.version=R,t.dependencies=N,t.PRIORITY=K,t.init=Ve,t.connect=Fe,t.disConnect=Ue,t.disconnect=Ge,t.dispose=He,t.getInstanceByDom=We,t.getInstanceById=qe,t.registerTheme=Ze,t.registerPreprocessor=Ye,t.registerProcessor=Xe,t.registerPostUpdate=Ke,t.registerAction=$e,t.registerCoordinateSystem=Qe,t.getCoordinateSystemDimensions=Je,t.registerLayout=et,t.registerVisual=tt,t.registerLoading=nt,t.extendComponentModel=rt,t.extendComponentView=at,t.extendSeriesModel=ot,t.extendChartView=st,t.setCanvasCreator=lt,t.registerMap=ct,t.getMap=ut,t.dataTool=ht;var dt=i("b719");(function(){for(var e in dt)dt.hasOwnProperty(e)&&(t[e]=dt[e])})()},4:function(e,t){},"401b":function(e,t){var i="undefined"===typeof Float32Array?Array:Float32Array;function n(e,t){var n=new i(2);return null==e&&(e=0),null==t&&(t=0),n[0]=e,n[1]=t,n}function r(e,t){return e[0]=t[0],e[1]=t[1],e}function a(e){var t=new i(2);return t[0]=e[0],t[1]=e[1],t}function o(e,t,i){return e[0]=t,e[1]=i,e}function s(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function l(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e}function c(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function u(e){return Math.sqrt(d(e))}var h=u;function d(e){return e[0]*e[0]+e[1]*e[1]}var p=d;function f(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function m(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function g(e,t){return e[0]*t[0]+e[1]*t[1]}function v(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function y(e,t){var i=u(t);return 0===i?(e[0]=0,e[1]=0):(e[0]=t[0]/i,e[1]=t[1]/i),e}function _(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var b=_;function x(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var w=x;function T(e,t){return e[0]=-t[0],e[1]=-t[1],e}function S(e,t,i,n){return e[0]=t[0]+n*(i[0]-t[0]),e[1]=t[1]+n*(i[1]-t[1]),e}function O(e,t,i){var n=t[0],r=t[1];return e[0]=i[0]*n+i[2]*r+i[4],e[1]=i[1]*n+i[3]*r+i[5],e}function C(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function k(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}t.create=n,t.copy=r,t.clone=a,t.set=o,t.add=s,t.scaleAndAdd=l,t.sub=c,t.len=u,t.length=h,t.lenSquare=d,t.lengthSquare=p,t.mul=f,t.div=m,t.dot=g,t.scale=v,t.normalize=y,t.distance=_,t.dist=b,t.distanceSquare=x,t.distSquare=w,t.negate=T,t.lerp=S,t.applyTransform=O,t.min=C,t.max=k},"41ef":function(e,t,i){var n=i("d51b"),r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(e){return e=Math.round(e),e<0?0:e>255?255:e}function o(e){return e=Math.round(e),e<0?0:e>360?360:e}function s(e){return e<0?0:e>1?1:e}function l(e){return e.length&&"%"===e.charAt(e.length-1)?a(parseFloat(e)/100*255):a(parseInt(e,10))}function c(e){return e.length&&"%"===e.charAt(e.length-1)?s(parseFloat(e)/100):s(parseFloat(e))}function u(e,t,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function h(e,t,i){return e+(t-e)*i}function d(e,t,i,n,r){return e[0]=t,e[1]=i,e[2]=n,e[3]=r,e}function p(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var f=new n(20),m=null;function g(e,t){m&&p(m,t),m=f.put(e,m||t.slice())}function v(e,t){if(e){t=t||[];var i=f.get(e);if(i)return p(t,i);e+="";var n=e.replace(/ /g,"").toLowerCase();if(n in r)return p(t,r[n]),g(e,t),t;if("#"!==n.charAt(0)){var a=n.indexOf("("),o=n.indexOf(")");if(-1!==a&&o+1===n.length){var s=n.substr(0,a),u=n.substr(a+1,o-(a+1)).split(","),h=1;switch(s){case"rgba":if(4!==u.length)return void d(t,0,0,0,1);h=c(u.pop());case"rgb":return 3!==u.length?void d(t,0,0,0,1):(d(t,l(u[0]),l(u[1]),l(u[2]),h),g(e,t),t);case"hsla":return 4!==u.length?void d(t,0,0,0,1):(u[3]=c(u[3]),y(u,t),g(e,t),t);case"hsl":return 3!==u.length?void d(t,0,0,0,1):(y(u,t),g(e,t),t);default:return}}d(t,0,0,0,1)}else{if(4===n.length){var m=parseInt(n.substr(1),16);return m>=0&&m<=4095?(d(t,(3840&m)>>4|(3840&m)>>8,240&m|(240&m)>>4,15&m|(15&m)<<4,1),g(e,t),t):void d(t,0,0,0,1)}if(7===n.length){m=parseInt(n.substr(1),16);return m>=0&&m<=16777215?(d(t,(16711680&m)>>16,(65280&m)>>8,255&m,1),g(e,t),t):void d(t,0,0,0,1)}}}}function y(e,t){var i=(parseFloat(e[0])%360+360)%360/360,n=c(e[1]),r=c(e[2]),o=r<=.5?r*(n+1):r+n-r*n,s=2*r-o;return t=t||[],d(t,a(255*u(s,o,i+1/3)),a(255*u(s,o,i)),a(255*u(s,o,i-1/3)),1),4===e.length&&(t[3]=e[3]),t}function _(e){if(e){var t,i,n=e[0]/255,r=e[1]/255,a=e[2]/255,o=Math.min(n,r,a),s=Math.max(n,r,a),l=s-o,c=(s+o)/2;if(0===l)t=0,i=0;else{i=c<.5?l/(s+o):l/(2-s-o);var u=((s-n)/6+l/2)/l,h=((s-r)/6+l/2)/l,d=((s-a)/6+l/2)/l;n===s?t=d-h:r===s?t=1/3+u-d:a===s&&(t=2/3+h-u),t<0&&(t+=1),t>1&&(t-=1)}var p=[360*t,i,c];return null!=e[3]&&p.push(e[3]),p}}function b(e,t){var i=v(e);if(i){for(var n=0;n<3;n++)i[n]=t<0?i[n]*(1-t)|0:(255-i[n])*t+i[n]|0,i[n]>255?i[n]=255:e[n]<0&&(i[n]=0);return P(i,4===i.length?"rgba":"rgb")}}function x(e){var t=v(e);if(t)return((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)}function w(e,t,i){if(t&&t.length&&e>=0&&e<=1){i=i||[];var n=e*(t.length-1),r=Math.floor(n),o=Math.ceil(n),l=t[r],c=t[o],u=n-r;return i[0]=a(h(l[0],c[0],u)),i[1]=a(h(l[1],c[1],u)),i[2]=a(h(l[2],c[2],u)),i[3]=s(h(l[3],c[3],u)),i}}var T=w;function S(e,t,i){if(t&&t.length&&e>=0&&e<=1){var n=e*(t.length-1),r=Math.floor(n),o=Math.ceil(n),l=v(t[r]),c=v(t[o]),u=n-r,d=P([a(h(l[0],c[0],u)),a(h(l[1],c[1],u)),a(h(l[2],c[2],u)),s(h(l[3],c[3],u))],"rgba");return i?{color:d,leftIndex:r,rightIndex:o,value:n}:d}}var O=S;function C(e,t,i,n){if(e=v(e),e)return e=_(e),null!=t&&(e[0]=o(t)),null!=i&&(e[1]=c(i)),null!=n&&(e[2]=c(n)),P(y(e),"rgba")}function k(e,t){if(e=v(e),e&&null!=t)return e[3]=s(t),P(e,"rgba")}function P(e,t){if(e&&e.length){var i=e[0]+","+e[1]+","+e[2];return"rgba"!==t&&"hsva"!==t&&"hsla"!==t||(i+=","+e[3]),t+"("+i+")"}}t.parse=v,t.lift=b,t.toHex=x,t.fastLerp=w,t.fastMapToColor=T,t.lerp=S,t.mapToColor=O,t.modifyHSL=C,t.modifyAlpha=k,t.stringify=P},"41fc":function(e){e.exports=JSON.parse('[{"name":"龙穴街道","englishName":"longxuejie","describe":"南沙龙穴岛","center":[113.671159,22.642888],"coordinates":[[113.656972,22.73416],[113.688019,22.69755],[113.708399,22.662165],[113.726908,22.600954],[113.738379,22.54352],[113.704515,22.542774],[113.693585,22.565951],[113.690209,22.571428],[113.686489,22.577063],[113.678535,22.588332],[113.67247,22.597019],[113.666405,22.610777],[113.656164,22.630365],[113.649762,22.639967],[113.636987,22.655557],[113.625758,22.669878],[113.618641,22.677296],[113.615448,22.679737],[113.612684,22.682179],[113.604415,22.688538],[113.591273,22.694863],[113.585624,22.704657],[113.583366,22.709819],[113.580265,22.721328],[113.614618,22.726415],[113.632192,22.729838],[113.656972,22.73416]]},{"name":"万顷沙镇","englishName":"wanqingsha","describe":"南沙万顷沙镇","center":[113.616227,22.629896],"coordinates":[[113.618567,22.583287],[113.602588,22.594301],[113.592445,22.596598],[113.585651,22.598262],[113.57817,22.603887],[113.574186,22.606076],[113.569249,22.599582],[113.562182,22.607292],[113.552566,22.62291],[113.53774,22.643808],[113.532268,22.655908],[113.53844,22.658182],[113.540235,22.664734],[113.537738,22.668751],[113.513579,22.685978],[113.528948,22.704512],[113.537408,22.698579],[113.544384,22.704322],[113.555309,22.714658],[113.563055,22.722911],[113.566553,22.726671],[113.570394,22.72964],[113.57313,22.727255],[113.575737,22.725068],[113.57975,22.721447],[113.585222,22.704721],[113.590994,22.694685],[113.606357,22.686924],[113.62069,22.675045],[113.652233,22.635956],[113.662511,22.616249],[113.667699,22.607122],[113.671856,22.597361],[113.694521,22.564348],[113.704579,22.542297],[113.676674,22.542228],[113.661471,22.541207],[113.646611,22.541613],[113.618567,22.583287]]},{"name":"珠江街道","englishName":"zhujiangjie","describe":"南沙珠江街","center":[113.52559,22.731897],"coordinates":[[113.565416,22.726196],[113.56091,22.721525],[113.555975,22.715904],[113.548293,22.708343],[113.54516,22.705217],[113.537607,22.698565],[113.508017,22.719715],[113.502062,22.726924],[113.499214,22.731479],[113.497832,22.733439],[113.496666,22.7354],[113.508446,22.740278],[113.511139,22.741292],[113.513532,22.742267],[113.517351,22.743672],[113.52057,22.744474],[113.525773,22.745369],[113.533422,22.745907],[113.538282,22.745789],[113.545288,22.745828],[113.553979,22.745868],[113.558163,22.741515],[113.568763,22.731183],[113.570136,22.729759],[113.568548,22.72873],[113.566875,22.727819],[113.565416,22.726196]]},{"name":"横沥镇","englishName":"hengli","describe":"南沙横沥镇","center":[113.49469185,22.74863871],"coordinates":[[113.496381,22.735387],[113.502547,22.72597],[113.508205,22.718966],[113.529059,22.704537],[113.513736,22.685919],[113.449662,22.730961],[113.438391,22.73271],[113.436704,22.739126],[113.444458,22.739209],[113.450928,22.738749],[113.460144,22.743988],[113.467542,22.748586],[113.474627,22.755712],[113.48025,22.759512],[113.484844,22.761729],[113.48953,22.762999],[113.482174,22.766137],[113.477994,22.769038],[113.470149,22.771673],[113.47329,22.774427],[113.47789,22.779159],[113.480872,22.782156],[113.483147,22.785242],[113.485336,22.788784],[113.494219,22.784026],[113.503317,22.778675],[113.506708,22.776697],[113.537092,22.763479],[113.546426,22.755099],[113.553786,22.746126],[113.539366,22.745908],[113.533315,22.746056],[113.525547,22.745492],[113.519582,22.744325],[113.512715,22.742108],[113.496381,22.735387],[113.496381,22.735387]]},{"name":"大岗镇","englishName":"dagang","describe":"南沙大岗镇","center":[113.4333119,22.7764102],"coordinates":[[113.429288,22.741634],[113.416843,22.745987],[113.395257,22.757069],[113.383176,22.76253],[113.376792,22.768584],[113.373387,22.769593],[113.363593,22.773244],[113.359557,22.78215],[113.356165,22.792558],[113.356849,22.795349],[113.360967,22.793077],[113.3669,22.795045],[113.369738,22.79595],[113.371726,22.797481],[113.374293,22.795193],[113.377597,22.797824],[113.381588,22.798536],[113.385386,22.801978],[113.390106,22.806468],[113.391876,22.808821],[113.392917,22.810166],[113.394513,22.815632],[113.396202,22.814885],[113.397718,22.814335],[113.398307,22.81685],[113.398724,22.819089],[113.398917,22.820352],[113.398851,22.821694],[113.401168,22.819782],[113.40267,22.818543],[113.406113,22.815981],[113.407626,22.817356],[113.408603,22.818592],[113.410121,22.819211],[113.411167,22.819611],[113.412631,22.82015],[113.413572,22.820513],[113.414516,22.820742],[113.415249,22.820955],[113.416006,22.821185],[113.415501,22.822089],[113.414466,22.825745],[113.414291,22.829788],[113.41472,22.83508],[113.415663,22.838474],[113.416113,22.839712],[113.416231,22.840331],[113.417164,22.845974],[113.418033,22.847036],[113.418816,22.846359],[113.423998,22.840594],[113.432587,22.832224],[113.458255,22.812738],[113.469381,22.80634],[113.474322,22.802191],[113.478962,22.797963],[113.483246,22.796254],[113.486349,22.794644],[113.485711,22.789703],[113.481861,22.783286],[113.480495,22.78166],[113.479043,22.780351],[113.474679,22.775714],[113.472153,22.773534],[113.471041,22.772583],[113.470035,22.771394],[113.47797,22.768693],[113.480541,22.766665],[113.488515,22.763083],[113.484001,22.761837],[113.479616,22.759364],[113.474651,22.755941],[113.467455,22.74856],[113.451498,22.739012],[113.446011,22.739912],[113.438643,22.739496],[113.429288,22.741634]]},{"name":"榄核镇","englishName":"lanhe","describe":"南沙榄核镇","center":[113.344315,22.847743],"coordinates":[[113.398894,22.820987],[113.398843,22.820257],[113.39861,22.818876],[113.397716,22.814374],[113.394512,22.815655],[113.392939,22.810131],[113.390242,22.811167],[113.388808,22.811823],[113.38703,22.8124],[113.383925,22.816583],[113.379189,22.820133],[113.373795,22.822881],[113.368165,22.821447],[113.36386,22.823645],[113.36115,22.823128],[113.358554,22.822649],[113.355336,22.822338],[113.352245,22.821709],[113.352593,22.819053],[113.351905,22.818481],[113.350053,22.818208],[113.348641,22.818659],[113.348645,22.81678],[113.346328,22.816093],[113.34515,22.819235],[113.344727,22.820657],[113.344021,22.820254],[113.340769,22.819855],[113.340045,22.820563],[113.339398,22.820516],[113.339453,22.820232],[113.33886,22.820126],[113.33896,22.819432],[113.335801,22.818665],[113.335268,22.818701],[113.334525,22.819898],[113.333669,22.820511],[113.332252,22.82228],[113.330753,22.823062],[113.327417,22.824594],[113.321197,22.825999],[113.316108,22.827459],[113.313296,22.82928],[113.311505,22.831888],[113.310842,22.834771],[113.310327,22.844895],[113.309531,22.851034],[113.305445,22.851094],[113.303327,22.85191],[113.302907,22.853533],[113.300775,22.855662],[113.299542,22.858922],[113.296743,22.857943],[113.296228,22.858552],[113.296595,22.859225],[113.296029,22.860068],[113.29697,22.860489],[113.295913,22.862546],[113.301045,22.866183],[113.299301,22.869218],[113.297938,22.872848],[113.298707,22.873592],[113.302931,22.875624],[113.306198,22.877176],[113.31187,22.879995],[113.326599,22.883082],[113.334931,22.885608],[113.34245,22.88694],[113.348385,22.890052],[113.351013,22.892121],[113.35913,22.893627],[113.361437,22.892532],[113.362265,22.89288],[113.366353,22.888669],[113.371052,22.885268],[113.374743,22.883015],[113.379608,22.880915],[113.383363,22.879635],[113.386045,22.877643],[113.390063,22.874752],[113.394036,22.871999],[113.396765,22.869482],[113.398325,22.868116],[113.406467,22.860823],[113.410259,22.85706],[113.414123,22.853836],[113.416936,22.849367],[113.417598,22.847579],[113.417845,22.847004],[113.416953,22.845747],[113.416052,22.840129],[113.414635,22.835212],[113.414266,22.828396],[113.414526,22.825676],[113.415491,22.822095],[113.416023,22.821187],[113.413617,22.820532],[113.412453,22.820093],[113.409895,22.819086],[113.408574,22.818589],[113.407726,22.817459],[113.406116,22.81603],[113.402467,22.818765],[113.398882,22.821638],[113.398894,22.820987]]},{"name":"东涌镇","englishName":"dongchong","describe":"南沙东涌镇","center":[113.455552,22.883174],"coordinates":[[113.482386,22.796614],[113.478986,22.798016],[113.475885,22.800853],[113.472077,22.804321],[113.469857,22.806149],[113.460078,22.81173],[113.456866,22.813947],[113.453869,22.816242],[113.449863,22.819368],[113.443268,22.824075],[113.436223,22.829791],[113.432785,22.832336],[113.430033,22.834881],[113.42664,22.83819],[113.42299,22.842014],[113.420456,22.844829],[113.417632,22.847709],[113.416741,22.849847],[113.414193,22.853822],[113.406645,22.860744],[113.405321,22.861994],[113.403343,22.863709],[113.399966,22.866902],[113.392199,22.873318],[113.390053,22.874831],[113.387961,22.876274],[113.385719,22.877886],[113.383423,22.879655],[113.379727,22.880905],[113.376363,22.882353],[113.374657,22.883117],[113.372501,22.884414],[113.368799,22.88686],[113.366391,22.888649],[113.364905,22.890171],[113.362319,22.89289],[113.369041,22.894926],[113.373158,22.895489],[113.375472,22.897633],[113.383454,22.901676],[113.402809,22.900411],[113.406092,22.902131],[113.408892,22.902516],[113.417529,22.907764],[113.427786,22.907339],[113.437828,22.90636],[113.445017,22.906691],[113.446508,22.906521],[113.45751,22.905843],[113.463105,22.904967],[113.471935,22.902869],[113.480314,22.898399],[113.481881,22.897731],[113.485856,22.895678],[113.491913,22.893361],[113.500517,22.890221],[113.508606,22.885261],[113.508777,22.87194],[113.498065,22.866621],[113.487611,22.860432],[113.486271,22.858057],[113.4846,22.853743],[113.485585,22.850923],[113.485797,22.848183],[113.485792,22.842385],[113.485397,22.833122],[113.485616,22.827932],[113.486006,22.822741],[113.486332,22.819429],[113.48653,22.816116],[113.487063,22.8141],[113.487596,22.812104],[113.487477,22.807797],[113.487169,22.805407],[113.485147,22.800438],[113.485306,22.797657],[113.486286,22.794842],[113.483983,22.796004],[113.482386,22.796614]]},{"name":"黄阁镇","englishName":"huangge","describe":"南沙黄阁镇","center":[113.504647,22.840783],"coordinates":[[113.526327,22.775654],[113.526026,22.77759],[113.525789,22.779031],[113.525623,22.780396],[113.525247,22.78368],[113.525097,22.78637],[113.525886,22.790562],[113.528123,22.794007],[113.531293,22.799071],[113.533991,22.803957],[113.534839,22.805065],[113.535944,22.806793],[113.536384,22.807334],[113.539066,22.813074],[113.539533,22.816096],[113.540281,22.818566],[113.540901,22.821035],[113.541447,22.823043],[113.54207,22.825159],[113.542757,22.826346],[113.544058,22.828875],[113.564242,22.824057],[113.581106,22.815368],[113.588421,22.811722],[113.593356,22.813687],[113.600779,22.816522],[113.588805,22.83067],[113.57488,22.845139],[113.560379,22.855816],[113.556521,22.859847],[113.551762,22.862882],[113.544384,22.867716],[113.534973,22.871985],[113.528808,22.875936],[113.523518,22.878976],[113.508788,22.885343],[113.508784,22.87213],[113.503618,22.869374],[113.495075,22.865066],[113.487734,22.860363],[113.486269,22.858074],[113.484584,22.853734],[113.485606,22.850402],[113.485856,22.84707],[113.485689,22.837816],[113.485486,22.832555],[113.486113,22.823685],[113.486599,22.817767],[113.486741,22.815843],[113.487558,22.81289],[113.487861,22.810491],[113.487542,22.806443],[113.48686,22.803949],[113.485619,22.801454],[113.485307,22.799968],[113.485511,22.798324],[113.485616,22.796955],[113.486537,22.794626],[113.485656,22.788776],[113.491143,22.785871],[113.506787,22.776796],[113.518597,22.771717],[113.526218,22.768466],[113.526327,22.775654]]},{"name":"南沙街道","englishName":"nanshajie","describe":"南沙街道","center":[113.55794907,22.78219586],"coordinates":[[113.588498,22.811662],[113.600683,22.816445],[113.608234,22.804929],[113.620587,22.790599],[113.656289,22.734837],[113.649679,22.733085],[113.643756,22.732282],[113.623899,22.728151],[113.612445,22.726223],[113.600992,22.724771],[113.58004,22.721754],[113.565311,22.73461],[113.554976,22.745265],[113.547546,22.754501],[113.53707,22.763856],[113.526416,22.768356],[113.526448,22.771986],[113.526599,22.773772],[113.525311,22.785803],[113.525687,22.788435],[113.525982,22.789949],[113.526363,22.79083],[113.530912,22.797601],[113.534173,22.803738],[113.536641,22.807619],[113.538765,22.811659],[113.540675,22.819813],[113.542188,22.824879],[113.544087,22.828876],[113.563956,22.823775],[113.588498,22.811662]]}]')},4261:function(e,t,i){"use strict";i.d(t,"a",(function(){return P})),i.d(t,"b",(function(){return f})),i.d(t,"c",(function(){return v})),i.d(t,"d",(function(){return a})),i.d(t,"e",(function(){return T})),i.d(t,"f",(function(){return k})),i.d(t,"g",(function(){return s})),i.d(t,"h",(function(){return c})),i.d(t,"i",(function(){return u})),i.d(t,"j",(function(){return l})),i.d(t,"k",(function(){return S})),i.d(t,"l",(function(){return o})),i.d(t,"m",(function(){return _})),i.d(t,"n",(function(){return C})),i.d(t,"o",(function(){return g})),i.d(t,"p",(function(){return y})),i.d(t,"q",(function(){return w})),i.d(t,"r",(function(){return x})),i.d(t,"s",(function(){return b})),i.d(t,"t",(function(){return m}));var n=i("b2b2");i("3af1"),i("9180");function r(e){return e}function a(e=E){return r([e[0],e[1],e[2],e[3],e[4],e[5]])}function o(e,t,i,n,r,o,s=a()){return s[0]=e,s[1]=t,s[2]=i,s[3]=n,s[4]=r,s[5]=o,s}function s(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function l(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function c(e,t,i=0,n=t.length/3){let r=e[0],a=e[1],o=e[2],s=e[3],l=e[4],c=e[5];for(let u=0;u<n;u++)r=Math.min(r,t[i+3*u]),a=Math.min(a,t[i+3*u+1]),o=Math.min(o,t[i+3*u+2]),s=Math.max(s,t[i+3*u]),l=Math.max(l,t[i+3*u+1]),c=Math.max(c,t[i+3*u+2]);e[0]=r,e[1]=a,e[2]=o,e[3]=s,e[4]=l,e[5]=c}function u(e,t,i){const n=t.length;let r=e[0],a=e[1],o=e[2],s=e[3],l=e[4],c=e[5];if(i)for(let u=0;u<n;u++){const e=t[u];r=Math.min(r,e[0]),a=Math.min(a,e[1]),o=Math.min(o,e[2]),s=Math.max(s,e[0]),l=Math.max(l,e[1]),c=Math.max(c,e[2])}else for(let u=0;u<n;u++){const e=t[u];r=Math.min(r,e[0]),a=Math.min(a,e[1]),s=Math.max(s,e[0]),l=Math.max(l,e[1])}e[0]=r,e[1]=a,e[2]=o,e[3]=s,e[4]=l,e[5]=c}function h(e){return e[0]>=e[3]?0:e[3]-e[0]}function d(e){return e[1]>=e[4]?0:e[4]-e[1]}function p(e){return e[2]>=e[5]?0:e[5]-e[2]}function f(e,t=[0,0,0]){return t[0]=e[0]+h(e)/2,t[1]=e[1]+d(e)/2,t[2]=e[2]+p(e)/2,t}function m(e,t=[0,0,0]){return t[0]=h(e),t[1]=d(e),t[2]=p(e),t}function g(e){return Math.max(h(e),p(e),d(e))}function v(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function y(e,t,i=e){const n=e[0]+h(e)/2,r=e[1]+d(e)/2,a=e[2]+p(e)/2;return i[0]=n+(e[0]-n)*t,i[1]=r+(e[1]-r)*t,i[2]=a+(e[2]-a)*t,i[3]=n+(e[3]-n)*t,i[4]=r+(e[4]-r)*t,i[5]=a+(e[5]-a)*t,i}function _(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function b(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function x(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function w(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function T(e){return e?w(e,P):a(P)}function S(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function O(e){return 6===e.length}function C(e){return 0===h(e)&&0===d(e)&&0===p(e)}function k(e,t,i){if(Object(n["j"])(e)||Object(n["j"])(t))return e===t;if(!O(e)||!O(t))return!1;if(i){for(let n=0;n<e.length;n++)if(!i(e[n],t[n]))return!1}else for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}r([-1/0,-1/0,-1/0,1/0,1/0,1/0]);const P=r([1/0,1/0,1/0,-1/0,-1/0,-1/0]),E=r([0,0,0,0,0,0]);a()},"42b5":function(e,t,i){"use strict";i("2b53")},"42e5":function(e,t){var i=function(e){this.colorStops=e||[]};i.prototype={constructor:i,addColorStop:function(e,t){this.colorStops.push({offset:e,color:t})}};var n=i;e.exports=n},"42f6":function(e,t,i){var n=i("3eba"),r=i("6d8b"),a=i("22d1"),o=i("07d7"),s=i("82f9"),l=i("eda2"),c=i("3842"),u=i("2306"),h=i("133d"),d=i("f934"),p=i("4319"),f=i("17d6"),m=i("697e"),g=i("ff2e"),v=i("e0d3"),y=v.getTooltipRenderMode,_=r.bind,b=r.each,x=c.parsePercent,w=new u.Rect({shape:{x:-1,y:-1,width:2,height:2}}),T=n.extendComponentView({type:"tooltip",init:function(e,t){if(!a.node){var i,n=e.getComponent("tooltip"),r=n.get("renderMode");this._renderMode=y(r),"html"===this._renderMode?(i=new o(t.getDom(),t,{appendToBody:n.get("appendToBody",!0)}),this._newLine="<br/>"):(i=new s(t),this._newLine="\n"),this._tooltipContent=i}},render:function(e,t,i){if(!a.node){this.group.removeAll(),this._tooltipModel=e,this._ecModel=t,this._api=i,this._lastDataByCoordSys=null,this._alwaysShowContent=e.get("alwaysShowContent");var n=this._tooltipContent;n.update(e),n.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var e=this._tooltipModel,t=e.get("triggerOn");f.register("itemTooltip",this._api,_((function(e,i,n){"none"!==t&&(t.indexOf(e)>=0?this._tryShow(i,n):"leave"===e&&this._hide(n))}),this))},_keepShow:function(){var e=this._tooltipModel,t=this._ecModel,i=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==e.get("triggerOn")){var n=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout((function(){!i.isDisposed()&&n.manuallyShowTip(e,t,i,{x:n._lastX,y:n._lastY})}))}},manuallyShowTip:function(e,t,i,n){if(n.from!==this.uid&&!a.node){var r=O(n,i);this._ticket="";var o=n.dataByCoordSys;if(n.tooltip&&null!=n.x&&null!=n.y){var s=w;s.position=[n.x,n.y],s.update(),s.tooltip=n.tooltip,this._tryShow({offsetX:n.x,offsetY:n.y,target:s},r)}else if(o)this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,dataByCoordSys:n.dataByCoordSys,tooltipOption:n.tooltipOption},r);else if(null!=n.seriesIndex){if(this._manuallyAxisShowTip(e,t,i,n))return;var l=h(n,t),c=l.point[0],u=l.point[1];null!=c&&null!=u&&this._tryShow({offsetX:c,offsetY:u,position:n.position,target:l.el},r)}else null!=n.x&&null!=n.y&&(i.dispatchAction({type:"updateAxisPointer",x:n.x,y:n.y}),this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,target:i.getZr().findHover(n.x,n.y).target},r))}},manuallyHideTip:function(e,t,i,n){var r=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&r.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,n.from!==this.uid&&this._hide(O(n,i))},_manuallyAxisShowTip:function(e,t,i,n){var r=n.seriesIndex,a=n.dataIndex,o=t.getComponent("axisPointer").coordSysAxesInfo;if(null!=r&&null!=a&&null!=o){var s=t.getSeriesByIndex(r);if(s){var l=s.getData();e=S([l.getItemModel(a),s,(s.coordinateSystem||{}).model,e]);if("axis"===e.get("trigger"))return i.dispatchAction({type:"updateAxisPointer",seriesIndex:r,dataIndex:a,position:n.position}),!0}}},_tryShow:function(e,t){var i=e.target,n=this._tooltipModel;if(n){this._lastX=e.offsetX,this._lastY=e.offsetY;var r=e.dataByCoordSys;r&&r.length?this._showAxisTooltip(r,e):i&&null!=i.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(e,i,t)):i&&i.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(e,i,t)):(this._lastDataByCoordSys=null,this._hide(t))}},_showOrMove:function(e,t){var i=e.get("showDelay");t=r.bind(t,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(t,i):t()},_showAxisTooltip:function(e,t){var i=this._ecModel,n=this._tooltipModel,a=[t.offsetX,t.offsetY],o=[],s=[],c=S([t.tooltipOption,n]),u=this._renderMode,h=this._newLine,d={};b(e,(function(e){b(e.dataByAxis,(function(e){var t=i.getComponent(e.axisDim+"Axis",e.axisIndex),n=e.value,a=[];if(t&&null!=n){var c=g.getValueLabel(n,t.axis,i,e.seriesDataIndices,e.valueLabelOpt);r.each(e.seriesDataIndices,(function(o){var l=i.getSeriesByIndex(o.seriesIndex),h=o.dataIndexInside,p=l&&l.getDataParams(h);if(p.axisDim=e.axisDim,p.axisIndex=e.axisIndex,p.axisType=e.axisType,p.axisId=e.axisId,p.axisValue=m.getAxisRawValue(t.axis,n),p.axisValueLabel=c,p){s.push(p);var f,g=l.formatTooltip(h,!0,null,u);if(r.isObject(g)){f=g.html;var v=g.markers;r.merge(d,v)}else f=g;a.push(f)}}));var p=c;"html"!==u?o.push(a.join(h)):o.push((p?l.encodeHTML(p)+h:"")+a.join(h))}}))}),this),o.reverse(),o=o.join(this._newLine+this._newLine);var p=t.position;this._showOrMove(c,(function(){this._updateContentNotChangedOnAxis(e)?this._updatePosition(c,p,a[0],a[1],this._tooltipContent,s):this._showTooltipContent(c,o,s,Math.random(),a[0],a[1],p,void 0,d)}))},_showSeriesItemTooltip:function(e,t,i){var n=this._ecModel,a=t.seriesIndex,o=n.getSeriesByIndex(a),s=t.dataModel||o,l=t.dataIndex,c=t.dataType,u=s.getData(c),h=S([u.getItemModel(l),s,o&&(o.coordinateSystem||{}).model,this._tooltipModel]),d=h.get("trigger");if(null==d||"item"===d){var p,f,m=s.getDataParams(l,c),g=s.formatTooltip(l,!1,c,this._renderMode);r.isObject(g)?(p=g.html,f=g.markers):(p=g,f=null);var v="item_"+s.name+"_"+l;this._showOrMove(h,(function(){this._showTooltipContent(h,p,m,v,e.offsetX,e.offsetY,e.position,e.target,f)})),i({type:"showTip",dataIndexInside:l,dataIndex:u.getRawIndex(l),seriesIndex:a,from:this.uid})}},_showComponentItemTooltip:function(e,t,i){var n=t.tooltip;if("string"===typeof n){var r=n;n={content:r,formatter:r}}var a=new p(n,this._tooltipModel,this._ecModel),o=a.get("content"),s=Math.random();this._showOrMove(a,(function(){this._showTooltipContent(a,o,a.get("formatterParams")||{},s,e.offsetX,e.offsetY,e.position,t)})),i({type:"showTip",from:this.uid})},_showTooltipContent:function(e,t,i,n,r,a,o,s,c){if(this._ticket="",e.get("showContent")&&e.get("show")){var u=this._tooltipContent,h=e.get("formatter");o=o||e.get("position");var d=t;if(h&&"string"===typeof h)d=l.formatTpl(h,i,!0);else if("function"===typeof h){var p=_((function(t,n){t===this._ticket&&(u.setContent(n,c,e),this._updatePosition(e,o,r,a,u,i,s))}),this);this._ticket=n,d=h(i,n,p)}u.setContent(d,c,e),u.show(e),this._updatePosition(e,o,r,a,u,i,s)}},_updatePosition:function(e,t,i,n,a,o,s){var l=this._api.getWidth(),c=this._api.getHeight();t=t||e.get("position");var u=a.getSize(),h=e.get("align"),p=e.get("verticalAlign"),f=s&&s.getBoundingRect().clone();if(s&&f.applyTransform(s.transform),"function"===typeof t&&(t=t([i,n],o,a.el,f,{viewSize:[l,c],contentSize:u.slice()})),r.isArray(t))i=x(t[0],l),n=x(t[1],c);else if(r.isObject(t)){t.width=u[0],t.height=u[1];var m=d.getLayoutRect(t,{width:l,height:c});i=m.x,n=m.y,h=null,p=null}else if("string"===typeof t&&s){var g=P(t,f,u);i=g[0],n=g[1]}else{g=C(i,n,a,l,c,h?null:20,p?null:20);i=g[0],n=g[1]}if(h&&(i-=E(h)?u[0]/2:"right"===h?u[0]:0),p&&(n-=E(p)?u[1]/2:"bottom"===p?u[1]:0),e.get("confine")){g=k(i,n,a,l,c);i=g[0],n=g[1]}a.moveTo(i,n)},_updateContentNotChangedOnAxis:function(e){var t=this._lastDataByCoordSys,i=!!t&&t.length===e.length;return i&&b(t,(function(t,n){var r=t.dataByAxis||{},a=e[n]||{},o=a.dataByAxis||[];i&=r.length===o.length,i&&b(r,(function(e,t){var n=o[t]||{},r=e.seriesDataIndices||[],a=n.seriesDataIndices||[];i&=e.value===n.value&&e.axisType===n.axisType&&e.axisId===n.axisId&&r.length===a.length,i&&b(r,(function(e,t){var n=a[t];i&=e.seriesIndex===n.seriesIndex&&e.dataIndex===n.dataIndex}))}))})),this._lastDataByCoordSys=e,!!i},_hide:function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},dispose:function(e,t){a.node||(this._tooltipContent.dispose(),f.unregister("itemTooltip",t))}});function S(e){var t=e.pop();while(e.length){var i=e.pop();i&&(p.isInstance(i)&&(i=i.get("tooltip",!0)),"string"===typeof i&&(i={formatter:i}),t=new p(i,t,t.ecModel))}return t}function O(e,t){return e.dispatchAction||r.bind(t.dispatchAction,t)}function C(e,t,i,n,r,a,o){var s=i.getOuterSize(),l=s.width,c=s.height;return null!=a&&(e+l+a>n?e-=l+a:e+=a),null!=o&&(t+c+o>r?t-=c+o:t+=o),[e,t]}function k(e,t,i,n,r){var a=i.getOuterSize(),o=a.width,s=a.height;return e=Math.min(e+o,n)-o,t=Math.min(t+s,r)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function P(e,t,i){var n=i[0],r=i[1],a=5,o=0,s=0,l=t.width,c=t.height;switch(e){case"inside":o=t.x+l/2-n/2,s=t.y+c/2-r/2;break;case"top":o=t.x+l/2-n/2,s=t.y-r-a;break;case"bottom":o=t.x+l/2-n/2,s=t.y+c+a;break;case"left":o=t.x-n-a,s=t.y+c/2-r/2;break;case"right":o=t.x+l+a,s=t.y+c/2-r/2}return[o,s]}function E(e){return"center"===e||"middle"===e}e.exports=T},4319:function(e,t,i){var n=i("6d8b"),r=i("22d1"),a=i("e0d3"),o=a.makeInner,s=i("625e"),l=s.enableClassExtend,c=s.enableClassCheck,u=i("3901"),h=i("9bdb"),d=i("fe21"),p=i("551f"),f=n.mixin,m=o();function g(e,t,i){this.parentModel=t,this.ecModel=i,this.option=e}function v(e,t,i){for(var n=0;n<t.length;n++)if(t[n]&&(e=e&&"object"===typeof e?e[t[n]]:null,null==e))break;return null==e&&i&&(e=i.get(t)),e}function y(e,t){var i=m(e).getParent;return i?i.call(e,t):e.parentModel}g.prototype={constructor:g,init:null,mergeOption:function(e){n.merge(this.option,e,!0)},get:function(e,t){return null==e?this.option:v(this.option,this.parsePath(e),!t&&y(this,e))},getShallow:function(e,t){var i=this.option,n=null==i?i:i[e],r=!t&&y(this,e);return null==n&&r&&(n=r.getShallow(e)),n},getModel:function(e,t){var i,n=null==e?this.option:v(this.option,e=this.parsePath(e));return t=t||(i=y(this,e))&&i.getModel(e),new g(n,t,this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){var e=this.constructor;return new e(n.clone(this.option))},setReadOnly:function(e){},parsePath:function(e){return"string"===typeof e&&(e=e.split(".")),e},customizeGetParent:function(e){m(this).getParent=e},isAnimationEnabled:function(){if(!r.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},l(g),c(g),f(g,u),f(g,h),f(g,d),f(g,p);var _=g;e.exports=_},"43e0":function(e,t,i){"use strict";i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return f})),i.d(t,"d",(function(){return c})),i.d(t,"e",(function(){return h}));var n=i("02f1"),r=i("3349"),a=i("c9fb"),o=i("6706"),s=i("0f94");class l{constructor(e){this.coordinateHelper=e}}class c extends l{constructor(e,t){super(e),this.point=t}objectEqual(e){return e instanceof c&&Object(o["d"])(this.point,e.point)}check(e){return Object(r["j"])(e,this.point)<a["a"].pointThreshold}closestTo(){return this.coordinateHelper.clone(this.point)}intersect(e){const t=[];return e instanceof u?t.push(...Object(s["b"])({start:e.start,end:e.end,type:e instanceof d?1:0},this.point)):e instanceof f&&t.push(...Object(s["a"])(e.center,e.radius,this.point)),t.map(t=>new p(this.coordinateHelper,t,this,e))}}class u extends l{constructor(e,t,i){super(e),this.start=t,this.end=i}objectEqual(e){return e instanceof u&&Object(o["d"])(this.start,e.start)&&Object(o["d"])(this.end,e.end)}intersect(e){const t=[];return e instanceof c?t.push(...Object(s["b"])({start:this.start,end:this.end,type:this instanceof d?1:0},e.point)):e instanceof u?t.push(...Object(s["c"])({start:this.start,end:this.end,type:this instanceof d?1:0},{start:e.start,end:e.end,type:e instanceof d?1:0})):e instanceof f&&t.push(...Object(s["d"])({start:this.start,end:this.end,type:this instanceof d?1:0},e.center,e.radius)),t.map(t=>new p(this.coordinateHelper,t,this,e))}}class h extends u{constructor(e,t,i){super(e,t,i),this.dir=Object(n["a"])(),this.p=Object(n["a"])()}objectEqual(e){return e instanceof h&&super.objectEqual(e)}check(e){return Object(r["d"])(this.dir,this.end,this.start),Object(r["d"])(this.p,e,this.start),Object(r["g"])(this.dir,this.p)>=0&&Object(s["e"])(e,this.start,this.end)<a["a"].pointOnLineThreshold}closestTo(e){const t=this.coordinateHelper.clone(e);return Object(s["h"])(t,e,this.start,this.end),t}}class d extends u{constructor(e,t,i){super(e,t,i)}objectEqual(e){return e instanceof d&&super.objectEqual(e)}check(e){return Object(s["e"])(e,this.start,this.end)<a["a"].pointOnLineThreshold}closestTo(e){const t=this.coordinateHelper.clone(e);return Object(s["g"])(t,e,this.start,this.end),t}}class p extends l{constructor(e,t,i,n){super(e),this.intersection=t,this.first=i,this.second=n}objectEqual(e){return e instanceof p&&this.first.objectEqual(e.first)&&this.second.objectEqual(e.second)}check(){return!1}closestTo(e){const t=this.coordinateHelper.clone(e);return Object(r["c"])(t,this.intersection),t}intersect(){return[]}}class f extends l{constructor(e,t,i){super(e),this.center=t,this.radius=i}objectEqual(e){return e instanceof f&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}check(){return!1}closestTo(e){const t=this.coordinateHelper.clone(e);return Object(s["f"])(t,e,this.center,this.radius),t}intersect(e){const t=[];return e instanceof u?t.push(...Object(s["d"])({start:e.start,end:e.end,type:e instanceof d?1:0},this.center,this.radius)):e instanceof c&&t.push(...Object(s["a"])(this.center,this.radius,e.point)),t.map(t=>new p(this.coordinateHelper,t,this,e))}}},4436:function(e,t,i){var n=i("74cb");function r(e){this._target=e.target,this._life=e.life||1e3,this._delay=e.delay||0,this._initialized=!1,this.loop=null!=e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this._pausedTime=0,this._paused=!1}r.prototype={constructor:r,step:function(e,t){if(this._initialized||(this._startTime=e+this._delay,this._initialized=!0),this._paused)this._pausedTime+=t;else{var i=(e-this._startTime-this._pausedTime)/this._life;if(!(i<0)){i=Math.min(i,1);var r=this.easing,a="string"===typeof r?n[r]:r,o="function"===typeof a?a(i):i;return this.fire("frame",o),1===i?this.loop?(this.restart(e),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(e){var t=(e-this._startTime-this._pausedTime)%this._life;this._startTime=e-t+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(e,t){e="on"+e,this[e]&&this[e](this._target,t)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var a=r;e.exports=a},4573:function(e,t,i){var n=i("cbe5"),r=n.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(e,t){var i=t.cx,n=t.cy,r=2*Math.PI;e.moveTo(i+t.r,n),e.arc(i,n,t.r,0,r,!1),e.moveTo(i+t.r0,n),e.arc(i,n,t.r0,0,r,!0)}});e.exports=r},4650:function(e,t,i){var n=i("3eba"),r=i("6d8b");function a(e,t,i){var n,a={},o="toggleSelected"===e;return i.eachComponent("legend",(function(i){o&&null!=n?i[n?"select":"unSelect"](t.name):"allSelect"===e||"inverseSelect"===e?i[e]():(i[e](t.name),n=i.isSelected(t.name));var s=i.getData();r.each(s,(function(e){var t=e.get("name");if("\n"!==t&&""!==t){var n=i.isSelected(t);a.hasOwnProperty(t)?a[t]=a[t]&&n:a[t]=n}}))})),"allSelect"===e||"inverseSelect"===e?{selected:a}:{name:t.name,selected:a}}n.registerAction("legendToggleSelect","legendselectchanged",r.curry(a,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",r.curry(a,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",r.curry(a,"inverseSelect")),n.registerAction("legendSelect","legendselected",r.curry(a,"select")),n.registerAction("legendUnSelect","legendunselected",r.curry(a,"unSelect"))},4772:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("a4ee"),r=(i("c120"),i("e92d"),i("cea0"),i("59b2")),a=i("d386"),o=(i("e041"),i("8eed"),i("f402"),i("f4cc")),s=i("fc29"),l=i("4e5e"),c=i("b2b2"),u=i("2c4f");class h{constructor(){this._isToolEditable=!0,this._manipulators=new u["a"],this._nextManipulatorId=0,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(e){this._isToolEditable=e}get length(){return this._manipulators.length}add(e,t=0){return this.addMany([e],t)[0]}addMany(e,t=0){return e.map(e=>{const i=this._nextManipulatorId++,n={id:i,manipulator:e,visibilityPredicate:t,attached:!1};return this._manipulators.add(n),this._attached&&this._updateManipulatorAttachment(n),i})}remove(e){if("number"==typeof e){const t=e;for(let e=0;e<this._manipulators.length;e++)if(this._manipulators.getItemAt(e).id===t){const t=this._manipulators.splice(e,1)[0];return this._detachManipulator(t),t.id}return null}const t=e;for(let i=0;i<this._manipulators.length;i++)if(this._manipulators.getItemAt(i).manipulator===t){const e=this._manipulators.splice(i,1)[0];return this._detachManipulator(e),e.id}return null}removeAll(){this._manipulators.forEach(e=>{this._detachManipulator(e)}),this._manipulators.removeAll()}attach(){this._manipulators.forEach(e=>{this._updateManipulatorAttachment(e)}),this._attached=!0}detach(){this._manipulators.forEach(e=>{this._detachManipulator(e)}),this._attached=!1}destroy(){this._manipulators.forEach(({manipulator:e})=>{e.destroy&&e.destroy()}),this._manipulators.destroy(),this._resourceContexts=null}on(e,t){return this._manipulators.on(e,e=>{t(e)})}forEach(e){for(const t of this._manipulators.items)e(t)}some(e){return this._manipulators.items.some(e)}toArray(){const e=[];return this.forEach(t=>e.push(t.manipulator)),e}intersect(e,t){let i=null,n=Number.MAX_VALUE;return this._manipulators.forEach(({id:r,manipulator:a,attached:o})=>{if(!o||!a.interactive)return;const s=a.intersectionDistance(e,t);Object(c["k"])(s)&&s<n&&(n=s,i={id:r,manipulator:a})}),i}findById(e){if(Object(c["j"])(e))return null;for(const t of this._manipulators.items)if(e===t.id)return t.manipulator;return null}_updateManipulatorAttachment(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}_attachManipulator(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}_detachManipulator(e){if(!e.attached)return;const t=e.manipulator;t.grabbing=!1,t.dragging=!1,t.hovering=!1,t.selected=!1,t.detach&&t.detach(this._resourceContexts),e.attached=!1}_isManipulatorItemVisible(e){return 2===e.visibilityPredicate||(this._isToolEditable?0===e.visibilityPredicate:1===e.visibilityPredicate)}}let d=class extends s["a"]{constructor(e){super(e),this.attached=!1,this.created=!1,this.completed=!1,this.manipulators=new h,this.deferCreation=!1,this._editableFlags=new Array,this._creationResolver=Object(o["g"])()}get active(){return null!=this.view&&this.view.activeTool===this}get isSupported(){return!0}set visible(e){this._set("visible",e),e||Object(l["d"])(this,!1),this.attached&&(e?this._show():this._hide())}get editable(){return this.hasEditableFlag(0)}set editable(e){this.setEditableFlag(0,e)}attach(){!this.attached&&this.isSupported&&(this.manipulators.attach(),this.onAttach(),this.visible&&this.onShow(),this._set("attached",!0))}detach(){this.attached&&(this.onHide(),this.onDetach(),this.manipulators.detach(),this._set("attached",!1))}handleInputEvent(e){this.attached&&this.onInputEvent(e)}handleInputEventAfter(e){this.attached&&this.onInputEventAfter(e)}destroy(){this.manipulators.destroy(),this._set("view",null),this._set("created",!1),this._set("completed",!1)}setEditableFlag(e,t){this._editableFlags[e]=t,this.manipulators.isToolEditable=this._editableFlags.every(e=>null==e||e),this._updateManipulatorAttachment(),0===e&&this.notifyChange("editable"),this.onEditableChange()}hasEditableFlag(e){const t=this._editableFlags[e];return null==t||t}when(){return this._creationResolver.promise}rejectCreation(e){this._creationResolver.reject(e)}initialize(){this.deferCreation||this.complete()}onAttach(){}onDetach(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.hasEditableFlag(0)&&this.hasEditableFlag(1)}create(){this.created||(this._set("created",!0),this._creationResolver.resolve(this))}complete(){this.create(),this._set("completed",!0)}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.attached&&this.visible?this.manipulators.attach():this.manipulators.detach()}};Object(n["a"])([Object(r["b"])({constructOnly:!0})],d.prototype,"view",void 0),Object(n["a"])([Object(r["b"])({readOnly:!0})],d.prototype,"active",null),Object(n["a"])([Object(r["b"])({value:!0})],d.prototype,"visible",null),Object(n["a"])([Object(r["b"])({value:!0})],d.prototype,"editable",null),Object(n["a"])([Object(r["b"])({readOnly:!0})],d.prototype,"attached",void 0),Object(n["a"])([Object(r["b"])({readOnly:!0})],d.prototype,"created",void 0),Object(n["a"])([Object(r["b"])({readOnly:!0})],d.prototype,"completed",void 0),Object(n["a"])([Object(r["b"])({readOnly:!0})],d.prototype,"manipulators",void 0),Object(n["a"])([Object(r["b"])({constructOnly:!0})],d.prototype,"deferCreation",void 0),d=Object(n["a"])([Object(a["a"])("esri.views.interactive.InteractiveToolBase")],d)},"47da":function(e,t,i){"use strict";i("bc56")},"480f":function(e,t,i){var n=i("4a3f"),r=i("401b"),a=i("53f3"),o=a.getSymbolSize,s=[],l=[],c=[],u=n.quadraticAt,h=r.distSquare,d=Math.abs;function p(e,t,i){for(var n,r=e[0],a=e[1],o=e[2],p=1/0,f=i*i,m=.1,g=.1;g<=.9;g+=.1){s[0]=u(r[0],a[0],o[0],g),s[1]=u(r[1],a[1],o[1],g);var v=d(h(s,t)-f);v<p&&(p=v,n=g)}for(var y=0;y<32;y++){var _=n+m;l[0]=u(r[0],a[0],o[0],n),l[1]=u(r[1],a[1],o[1],n),c[0]=u(r[0],a[0],o[0],_),c[1]=u(r[1],a[1],o[1],_);v=h(l,t)-f;if(d(v)<.01)break;var b=h(c,t)-f;m/=2,v<0?b>=0?n+=m:n-=m:b>=0?n-=m:n+=m}return n}function f(e,t){var i=[],a=n.quadraticSubdivide,s=[[],[],[]],l=[[],[]],c=[];t/=2,e.eachEdge((function(e,n){var u=e.getLayout(),h=e.getVisual("fromSymbol"),d=e.getVisual("toSymbol");u.__original||(u.__original=[r.clone(u[0]),r.clone(u[1])],u[2]&&u.__original.push(r.clone(u[2])));var f=u.__original;if(null!=u[2]){if(r.copy(s[0],f[0]),r.copy(s[1],f[2]),r.copy(s[2],f[1]),h&&"none"!==h){var m=o(e.node1),g=p(s,f[0],m*t);a(s[0][0],s[1][0],s[2][0],g,i),s[0][0]=i[3],s[1][0]=i[4],a(s[0][1],s[1][1],s[2][1],g,i),s[0][1]=i[3],s[1][1]=i[4]}if(d&&"none"!==d){m=o(e.node2),g=p(s,f[1],m*t);a(s[0][0],s[1][0],s[2][0],g,i),s[1][0]=i[1],s[2][0]=i[2],a(s[0][1],s[1][1],s[2][1],g,i),s[1][1]=i[1],s[2][1]=i[2]}r.copy(u[0],s[0]),r.copy(u[1],s[2]),r.copy(u[2],s[1])}else{if(r.copy(l[0],f[0]),r.copy(l[1],f[1]),r.sub(c,l[1],l[0]),r.normalize(c,c),h&&"none"!==h){m=o(e.node1);r.scaleAndAdd(l[0],l[0],c,m*t)}if(d&&"none"!==d){m=o(e.node2);r.scaleAndAdd(l[1],l[1],c,-m*t)}r.copy(u[0],l[0]),r.copy(u[1],l[1])}}))}e.exports=f},"48a9":function(e,t,i){var n=i("6d8b"),r=i("42e5"),a=function(e,t,i,n,a,o){this.x=null==e?0:e,this.y=null==t?0:t,this.x2=null==i?1:i,this.y2=null==n?0:n,this.type="linear",this.global=o||!1,r.call(this,a)};a.prototype={constructor:a},n.inherits(a,r);var o=a;e.exports=o},"48ac":function(e,t,i){var n=i("3eba"),r=n.extendComponentModel({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}}),a=r;e.exports=a},"48c7":function(e,t,i){var n=i("6d8b"),r=i("6cb7"),a=i("9e47"),o=i("2023"),s=r.extend({type:"cartesian2dAxis",axis:null,init:function(){s.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){s.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){s.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function l(e,t){return t.type||(t.data?"category":"value")}n.merge(s.prototype,o);var c={offset:0};a("x",s,l,c),a("y",s,l,c);var u=s;e.exports=u},4942:function(e,t,i){var n=i("2cf4"),r=n.debugMode,a=function(){};1===r&&(a=console.error);var o=a;e.exports=o},"4a01":function(e,t,i){var n=i("6d8b"),r=i("1fab"),a=i("607d"),o=i("a4fe");function s(e){this.pointerChecker,this._zr=e,this._opt={};var t=n.bind,i=t(l,this),a=t(c,this),o=t(u,this),s=t(h,this),p=t(d,this);r.call(this),this.setPointerChecker=function(e){this.pointerChecker=e},this.enable=function(t,r){this.disable(),this._opt=n.defaults(n.clone(r)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",i),e.on("mousemove",a),e.on("mouseup",o)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",s),e.on("pinch",p))},this.disable=function(){e.off("mousedown",i),e.off("mousemove",a),e.off("mouseup",o),e.off("mousewheel",s),e.off("pinch",p)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function l(e){if(!(a.isMiddleOrRightButtonOnMouseUpDown(e)||e.target&&e.target.draggable)){var t=e.offsetX,i=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,i)&&(this._x=t,this._y=i,this._dragging=!0)}}function c(e){if(this._dragging&&m("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!o.isTaken(this._zr,"globalPan")){var t=e.offsetX,i=e.offsetY,n=this._x,r=this._y,s=t-n,l=i-r;this._x=t,this._y=i,this._opt.preventDefaultMouseMove&&a.stop(e.event),f(this,"pan","moveOnMouseMove",e,{dx:s,dy:l,oldX:n,oldY:r,newX:t,newY:i})}}function u(e){a.isMiddleOrRightButtonOnMouseUpDown(e)||(this._dragging=!1)}function h(e){var t=m("zoomOnMouseWheel",e,this._opt),i=m("moveOnMouseWheel",e,this._opt),n=e.wheelDelta,r=Math.abs(n),a=e.offsetX,o=e.offsetY;if(0!==n&&(t||i)){if(t){var s=r>3?1.4:r>1?1.2:1.1,l=n>0?s:1/s;p(this,"zoom","zoomOnMouseWheel",e,{scale:l,originX:a,originY:o})}if(i){var c=Math.abs(n),u=(n>0?1:-1)*(c>3?.4:c>1?.15:.05);p(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:u,originX:a,originY:o})}}}function d(e){if(!o.isTaken(this._zr,"globalPan")){var t=e.pinchScale>1?1.1:1/1.1;p(this,"zoom",null,e,{scale:t,originX:e.pinchX,originY:e.pinchY})}}function p(e,t,i,n,r){e.pointerChecker&&e.pointerChecker(n,r.originX,r.originY)&&(a.stop(n.event),f(e,t,i,n,r))}function f(e,t,i,r,a){a.isAvailableBehavior=n.bind(m,null,i,r),e.trigger(t,a)}function m(e,t,i){var r=i[e];return!e||r&&(!n.isString(r)||t.event[r+"Key"])}n.mixin(s,r);var g=s;e.exports=g},"4a3f":function(e,t,i){var n=i("401b"),r=n.create,a=n.distSquare,o=Math.pow,s=Math.sqrt,l=1e-8,c=1e-4,u=s(3),h=1/3,d=r(),p=r(),f=r();function m(e){return e>-l&&e<l}function g(e){return e>l||e<-l}function v(e,t,i,n,r){var a=1-r;return a*a*(a*e+3*r*t)+r*r*(r*n+3*a*i)}function y(e,t,i,n,r){var a=1-r;return 3*(((t-e)*a+2*(i-t)*r)*a+(n-i)*r*r)}function _(e,t,i,n,r,a){var l=n+3*(t-i)-e,c=3*(i-2*t+e),d=3*(t-e),p=e-r,f=c*c-3*l*d,g=c*d-9*l*p,v=d*d-3*c*p,y=0;if(m(f)&&m(g))if(m(c))a[0]=0;else{var _=-d/c;_>=0&&_<=1&&(a[y++]=_)}else{var b=g*g-4*f*v;if(m(b)){var x=g/f,w=(_=-c/l+x,-x/2);_>=0&&_<=1&&(a[y++]=_),w>=0&&w<=1&&(a[y++]=w)}else if(b>0){var T=s(b),S=f*c+1.5*l*(-g+T),O=f*c+1.5*l*(-g-T);S=S<0?-o(-S,h):o(S,h),O=O<0?-o(-O,h):o(O,h);_=(-c-(S+O))/(3*l);_>=0&&_<=1&&(a[y++]=_)}else{var C=(2*f*c-3*l*g)/(2*s(f*f*f)),k=Math.acos(C)/3,P=s(f),E=Math.cos(k),A=(_=(-c-2*P*E)/(3*l),w=(-c+P*(E+u*Math.sin(k)))/(3*l),(-c+P*(E-u*Math.sin(k)))/(3*l));_>=0&&_<=1&&(a[y++]=_),w>=0&&w<=1&&(a[y++]=w),A>=0&&A<=1&&(a[y++]=A)}}return y}function b(e,t,i,n,r){var a=6*i-12*t+6*e,o=9*t+3*n-3*e-9*i,l=3*t-3*e,c=0;if(m(o)){if(g(a)){var u=-l/a;u>=0&&u<=1&&(r[c++]=u)}}else{var h=a*a-4*o*l;if(m(h))r[0]=-a/(2*o);else if(h>0){var d=s(h),p=(u=(-a+d)/(2*o),(-a-d)/(2*o));u>=0&&u<=1&&(r[c++]=u),p>=0&&p<=1&&(r[c++]=p)}}return c}function x(e,t,i,n,r,a){var o=(t-e)*r+e,s=(i-t)*r+t,l=(n-i)*r+i,c=(s-o)*r+o,u=(l-s)*r+s,h=(u-c)*r+c;a[0]=e,a[1]=o,a[2]=c,a[3]=h,a[4]=h,a[5]=u,a[6]=l,a[7]=n}function w(e,t,i,n,r,o,l,u,h,m,g){var y,_,b,x,w,T=.005,S=1/0;d[0]=h,d[1]=m;for(var O=0;O<1;O+=.05)p[0]=v(e,i,r,l,O),p[1]=v(t,n,o,u,O),x=a(d,p),x<S&&(y=O,S=x);S=1/0;for(var C=0;C<32;C++){if(T<c)break;_=y-T,b=y+T,p[0]=v(e,i,r,l,_),p[1]=v(t,n,o,u,_),x=a(p,d),_>=0&&x<S?(y=_,S=x):(f[0]=v(e,i,r,l,b),f[1]=v(t,n,o,u,b),w=a(f,d),b<=1&&w<S?(y=b,S=w):T*=.5)}return g&&(g[0]=v(e,i,r,l,y),g[1]=v(t,n,o,u,y)),s(S)}function T(e,t,i,n){var r=1-n;return r*(r*e+2*n*t)+n*n*i}function S(e,t,i,n){return 2*((1-n)*(t-e)+n*(i-t))}function O(e,t,i,n,r){var a=e-2*t+i,o=2*(t-e),l=e-n,c=0;if(m(a)){if(g(o)){var u=-l/o;u>=0&&u<=1&&(r[c++]=u)}}else{var h=o*o-4*a*l;if(m(h)){u=-o/(2*a);u>=0&&u<=1&&(r[c++]=u)}else if(h>0){var d=s(h),p=(u=(-o+d)/(2*a),(-o-d)/(2*a));u>=0&&u<=1&&(r[c++]=u),p>=0&&p<=1&&(r[c++]=p)}}return c}function C(e,t,i){var n=e+i-2*t;return 0===n?.5:(e-t)/n}function k(e,t,i,n,r){var a=(t-e)*n+e,o=(i-t)*n+t,s=(o-a)*n+a;r[0]=e,r[1]=a,r[2]=s,r[3]=s,r[4]=o,r[5]=i}function P(e,t,i,n,r,o,l,u,h){var m,g=.005,v=1/0;d[0]=l,d[1]=u;for(var y=0;y<1;y+=.05){p[0]=T(e,i,r,y),p[1]=T(t,n,o,y);var _=a(d,p);_<v&&(m=y,v=_)}v=1/0;for(var b=0;b<32;b++){if(g<c)break;var x=m-g,w=m+g;p[0]=T(e,i,r,x),p[1]=T(t,n,o,x);_=a(p,d);if(x>=0&&_<v)m=x,v=_;else{f[0]=T(e,i,r,w),f[1]=T(t,n,o,w);var S=a(f,d);w<=1&&S<v?(m=w,v=S):g*=.5}}return h&&(h[0]=T(e,i,r,m),h[1]=T(t,n,o,m)),s(v)}t.cubicAt=v,t.cubicDerivativeAt=y,t.cubicRootAt=_,t.cubicExtrema=b,t.cubicSubdivide=x,t.cubicProjectPoint=w,t.quadraticAt=T,t.quadraticDerivativeAt=S,t.quadraticRootAt=O,t.quadraticExtremum=C,t.quadraticSubdivide=k,t.quadraticProjectPoint=P},"4a4b":function(e,t){function i(t,n){return e.exports=i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports["default"]=e.exports,e.exports.__esModule=!0,i(t,n)}e.exports=i,e.exports["default"]=e.exports,e.exports.__esModule=!0},"4a9d":function(e,t,i){var n=i("dcb3"),r=i("ff2e"),a=i("0156"),o=i("6679"),s=n.extend({makeElOption:function(e,t,i,n,o){var s=i.axis,u=s.grid,h=n.get("type"),d=l(u,s).getOtherAxis(s).getGlobalExtent(),p=s.toGlobalCoord(s.dataToCoord(t,!0));if(h&&"none"!==h){var f=r.buildElStyle(n),m=c[h](s,p,d);m.style=f,e.graphicKey=m.type,e.pointer=m}var g=a.layout(u.model,i);r.buildCartesianSingleLabelElOption(t,e,g,i,n,o)},getHandleTransform:function(e,t,i){var n=a.layout(t.axis.grid.model,t,{labelInside:!1});return n.labelMargin=i.get("handle.margin"),{position:r.getTransformedPosition(t.axis,e,n),rotation:n.rotation+(n.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,i,n){var r=i.axis,a=r.grid,o=r.getGlobalExtent(!0),s=l(a,r).getOtherAxis(r).getGlobalExtent(),c="x"===r.dim?0:1,u=e.position;u[c]+=t[c],u[c]=Math.min(o[1],u[c]),u[c]=Math.max(o[0],u[c]);var h=(s[1]+s[0])/2,d=[h,h];d[c]=u[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{position:u,rotation:e.rotation,cursorPoint:d,tooltipOption:p[c]}}});function l(e,t){var i={};return i[t.dim+"AxisIndex"]=t.index,e.getCartesian(i)}var c={line:function(e,t,i){var n=r.makeLineShape([t,i[0]],[t,i[1]],u(e));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(e,t,i){var n=Math.max(1,e.getBandWidth()),a=i[1]-i[0];return{type:"Rect",shape:r.makeRectShape([t-n/2,i[0]],[n,a],u(e))}}};function u(e){return"x"===e.dim?0:1}o.registerAxisPointerClass("CartesianAxisPointer",s);var h=s;e.exports=h},"4aa2":function(e,t,i){var n=i("cbe5"),r=i("897a"),a=n.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:r(n.prototype.brush),buildPath:function(e,t){var i=t.cx,n=t.cy,r=Math.max(t.r0||0,0),a=Math.max(t.r,0),o=t.startAngle,s=t.endAngle,l=t.clockwise,c=Math.cos(o),u=Math.sin(o);e.moveTo(c*r+i,u*r+n),e.lineTo(c*a+i,u*a+n),e.arc(i,n,a,o,s,!l),e.lineTo(Math.cos(s)*r+i,Math.sin(s)*r+n),0!==r&&e.arc(i,n,r,s,o,l),e.closePath()}});e.exports=a},"4aa8":function(e,t,i){e.exports=i.p+"img/disconnect.dfe51de2.svg"},"4aea":function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return n}));const n=["freehand","hybrid","click"],r="click"},"4e08":function(e,t,i){(function(e){var i;"undefined"!==typeof window?i=window.__DEV__:"undefined"!==typeof e&&(i=e.__DEV__),"undefined"===typeof i&&(i=!0);var n=i;t.__DEV__=n}).call(this,i("c8ba"))},"4e21":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"分级管理措施",top:"25vh",width:"800px",visible:e.showme,modal:!1},on:{close:e.handleClose}},[i("div",{staticClass:"policy-detail"},[i("div",{staticClass:"fake-table"},[i("table",[i("tr",[i("th",[e._v("管控级别")]),i("th",[e._v("面积(平方公里)")]),i("th",[e._v("实有人口")]),i("th",[e._v("管理措施")])]),e._l(e.list,(function(t,n){return i("tr",{key:n},[i("td",{staticStyle:{width:"90px"}},[e._v(e._s(t.name))]),i("td",{staticStyle:{width:"100px"}},[e._v(e._s(t.area))]),i("td",[e._v(e._s(t.population))]),i("td",[e._v(e._s(t.rule))])])}))],2)])])])},r=[],a={name:"PolicyDetail",components:{},props:{showme:{type:Boolean},id:{type:[String,Number]}},model:{prop:"showme",event:"toggle"},watch:{showme:{handler:function(e){1==e&&this.id&&this.getData()},immediate:!0}},computed:{imgUrl:function(){}},data:function(){return{list:[{name:"封闭管理区",area:.16,population:3729,rule:"人员车辆只进不出，住户居民严格居家隔离。居家隔离人员每日一检；一般接触人员前7天每日一检，后7天三日两检查。统一配送生活物资。"},{name:"封控管理区",area:3,population:23e3,rule:"人员车辆只进不出，居民住户足不出户。核酸三日两检。 每 3 日每户限 1 人出门购买物资。 "},{name:"防控区",area:28,population:36158,rule:"划分为 18 个治安管控片区，设卡口管控。核酸三日两检。 设置 3 个物资供应点，可线上购物。"},{name:"健康管理区 ",area:156,population:"127036（常住）",rule:"不堂食；不聚集。非必要不外出，实行住家、单位“两点一线”健康管理。"}]}},mounted:function(){},methods:{handleClose:function(){this.$emit("toggle",!1)}}},o=a,s=(i("baea"),i("2877")),l=Object(s["a"])(o,n,r,!1,null,null,null);t["default"]=l.exports},"4e56":function(e,t,i){},"4f85":function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("6d8b")),a=i("22d1"),o=i("eda2"),s=o.formatTime,l=o.encodeHTML,c=o.addCommas,u=o.getTooltipMarker,h=i("e0d3"),d=i("6cb7"),p=i("e47b"),f=i("38a2"),m=i("f934"),g=m.getLayoutParams,v=m.mergeLayoutParam,y=i("f47d"),_=y.createTask,b=i("0f99"),x=b.prepareSource,w=b.getSource,T=i("2b17"),S=T.retrieveRawValue,O=h.makeInner(),C=d.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(e,t,i,n){this.seriesIndex=this.componentIndex,this.dataTask=_({count:E,reset:A}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,i),x(this);var r=this.getInitialData(e,i);M(r,this),this.dataTask.context.data=r,O(this).dataBeforeProcessed=r,k(this)},mergeDefaultAndTheme:function(e,t){var i=this.layoutMode,n=i?g(e):{},a=this.subType;d.hasClass(a)&&(a+="Series"),r.merge(e,t.getTheme().get(this.subType)),r.merge(e,this.getDefaultOption()),h.defaultEmphasis(e,"label",["show"]),this.fillDataTextStyle(e.data),i&&v(e,n,i)},mergeOption:function(e,t){e=r.merge(this.option,e,!0),this.fillDataTextStyle(e.data);var i=this.layoutMode;i&&v(this.option,e,i),x(this);var n=this.getInitialData(e,t);M(n,this),this.dataTask.dirty(),this.dataTask.context.data=n,O(this).dataBeforeProcessed=n,k(this)},fillDataTextStyle:function(e){if(e&&!r.isTypedArray(e))for(var t=["show"],i=0;i<e.length;i++)e[i]&&e[i].label&&h.defaultEmphasis(e[i],"label",t)},getInitialData:function(){},appendData:function(e){var t=this.getRawData();t.appendData(e.data)},getData:function(e){var t=j(this);if(t){var i=t.context.data;return null==e?i:i.getLinkedData(e)}return O(this).data},setData:function(e){var t=j(this);if(t){var i=t.context;i.data!==e&&t.modifyOutputEnd&&t.setOutputEnd(e.count()),i.outputData=e,t!==this.dataTask&&(i.data=e)}O(this).data=e},getSource:function(){return w(this)},getRawData:function(){return O(this).dataBeforeProcessed},getBaseAxis:function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},formatTooltip:function(e,t,i,n){var a=this;n=n||"html";var o="html"===n?"<br/>":"\n",d="richText"===n,p={},f=0;function m(i){var o=r.reduce(i,(function(e,t,i){var n=v.getDimensionInfo(i);return e|(n&&!1!==n.tooltip&&null!=n.displayName)}),0),h=[];function m(e,i){var r=v.getDimensionInfo(i);if(r&&!1!==r.otherDims.tooltip){var m=r.type,g="sub"+a.seriesIndex+"at"+f,y=u({color:w,type:"subItem",renderMode:n,markerId:g}),_="string"===typeof y?y:y.content,b=(o?_+l(r.displayName||"-")+": ":"")+l("ordinal"===m?e+"":"time"===m?t?"":s("yyyy/MM/dd hh:mm:ss",e):c(e));b&&h.push(b),d&&(p[g]=w,++f)}}y.length?r.each(y,(function(t){m(S(v,e,t),t)})):r.each(i,m);var g=o?d?"\n":"<br/>":"",_=g+h.join(g||", ");return{renderMode:n,content:_,style:p}}function g(e){return{renderMode:n,content:l(c(e)),style:p}}var v=this.getData(),y=v.mapDimension("defaultedTooltip",!0),_=y.length,b=this.getRawValue(e),x=r.isArray(b),w=v.getItemVisual(e,"color");r.isObject(w)&&w.colorStops&&(w=(w.colorStops[0]||{}).color),w=w||"transparent";var T=_>1||x&&!_?m(b):g(_?S(v,e,y[0]):x?b[0]:b),O=T.content,C=a.seriesIndex+"at"+f,k=u({color:w,type:"item",renderMode:n,markerId:C});p[C]=w,++f;var P=v.getName(e),E=this.name;h.isNameSpecified(this)||(E=""),E=E?l(E)+(t?": ":o):"";var A="string"===typeof k?k:k.content,I=t?A+E+O:E+A+(P?l(P)+": "+O:O);return{html:I,markers:p}},isAnimationEnabled:function(){if(a.node)return!1;var e=this.getShallow("animation");return e&&this.getData().count()>this.getShallow("animationThreshold")&&(e=!1),e},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(e,t,i){var n=this.ecModel,r=p.getColorFromPalette.call(this,e,t,i);return r||(r=n.getColorFromPalette(e,t,i)),r},coordDimToDataDim:function(e){return this.getRawData().mapDimension(e,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function k(e){var t=e.name;h.isNameSpecified(e)||(e.name=P(e)||t)}function P(e){var t=e.getRawData(),i=t.mapDimension("seriesName",!0),n=[];return r.each(i,(function(e){var i=t.getDimensionInfo(e);i.displayName&&n.push(i.displayName)})),n.join(" ")}function E(e){return e.model.getRawData().count()}function A(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),I}function I(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function M(e,t){r.each(e.CHANGABLE_METHODS,(function(i){e.wrapMethod(i,r.curry(D,t))}))}function D(e){var t=j(e);t&&t.setOutputEnd(this.count())}function j(e){var t=(e.ecModel||{}).scheduler,i=t&&t.getPipeline(e.uid);if(i){var n=i.currentTask;if(n){var r=n.agentStubMap;r&&(n=r.get(e.uid))}return n}}r.mixin(C,f),r.mixin(C,p);var L=C;e.exports=L},"4fac":function(e,t,i){var n=i("620b"),r=i("9c2c");function a(e,t,i){var a=t.points,o=t.smooth;if(a&&a.length>=2){if(o&&"spline"!==o){var s=r(a,o,i,t.smoothConstraint);e.moveTo(a[0][0],a[0][1]);for(var l=a.length,c=0;c<(i?l:l-1);c++){var u=s[2*c],h=s[2*c+1],d=a[(c+1)%l];e.bezierCurveTo(u[0],u[1],h[0],h[1],d[0],d[1])}}else{"spline"===o&&(a=n(a,i)),e.moveTo(a[0][0],a[0][1]);c=1;for(var p=a.length;c<p;c++)e.lineTo(a[c][0],a[c][1])}i&&e.closePath()}}t.buildPath=a},"50e5":function(e,t,i){var n=i("6d8b"),r=i("eda2"),a=["x","y","z","radius","angle","single"],o=["cartesian2d","polar","singleAxis"];function s(e){return n.indexOf(o,e)>=0}function l(e,t){e=e.slice();var i=n.map(e,r.capitalFirst);t=(t||[]).slice();var a=n.map(t,r.capitalFirst);return function(r,o){n.each(e,(function(e,n){for(var s={name:e,capital:i[n]},l=0;l<t.length;l++)s[t[l]]=e+a[l];r.call(o,s)}))}}var c=l(a,["axisIndex","axis","index","id"]);function u(e,t,i){return function(i){var n,s={nodes:[],records:{}};if(t((function(e){s.records[e.name]={}})),!i)return s;o(i,s);do{n=!1,e(l)}while(n);function l(e){!r(e,s)&&a(e,s)&&(o(e,s),n=!0)}return s};function r(e,t){return n.indexOf(t.nodes,e)>=0}function a(e,r){var a=!1;return t((function(t){n.each(i(e,t)||[],(function(e){r.records[t.name][e]&&(a=!0)}))})),a}function o(e,r){r.nodes.push(e),t((function(t){n.each(i(e,t)||[],(function(e){r.records[t.name][e]=!0}))}))}}t.isCoordSupported=s,t.createNameEach=l,t.eachAxisDim=c,t.createLinkedNodesFinder=u},"51a3":function(e,t,i){},5257:function(e,t,i){"use strict";i("82d2")},5269:function(e,t,i){"use strict";i("2075")},"53f3":function(e,t){function i(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var i=e.option.nodeScaleRatio,n=t.scale,r=n&&n[0]||1,a=t.getZoom(),o=(a-1)*i+1;return o/r}function n(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}t.getNodeGlobalScale=i,t.getSymbolSize=n},"551f":function(e,t,i){var n=i("282b"),r=n([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),a={getItemStyle:function(e,t){var i=r(this,e,t),n=this.getBorderLineDash();return n&&(i.lineDash=n),i},getBorderLineDash:function(){var e=this.get("borderType");return"solid"===e||null==e?null:"dashed"===e?[5,5]:[1,1]}};e.exports=a},"552e":function(e,t,i){},5576:function(e,t,i){var n=i("6d8b"),r=i("4a01"),a=i("88b3"),o="\0_ec_dataZoom_roams";function s(e,t){var i=u(e),r=t.dataZoomId,o=t.coordId;n.each(i,(function(e,i){var a=e.dataZoomInfos;a[r]&&n.indexOf(t.allCoordIds,o)<0&&(delete a[r],e.count--)})),d(i);var s=i[o];s||(s=i[o]={coordId:o,dataZoomInfos:{},count:0},s.controller=h(e,s),s.dispatchAction=n.curry(p,e)),!s.dataZoomInfos[r]&&s.count++,s.dataZoomInfos[r]=t;var l=f(s.dataZoomInfos);s.controller.enable(l.controlType,l.opt),s.controller.setPointerChecker(t.containsPoint),a.createOrUpdate(s,"dispatchAction",t.dataZoomModel.get("throttle",!0),"fixRate")}function l(e,t){var i=u(e);n.each(i,(function(e){e.controller.dispose();var i=e.dataZoomInfos;i[t]&&(delete i[t],e.count--)})),d(i)}function c(e){return e.type+"\0_"+e.id}function u(e){var t=e.getZr();return t[o]||(t[o]={})}function h(e,t){var i=new r(e.getZr());return n.each(["pan","zoom","scrollMove"],(function(e){i.on(e,(function(i){var r=[];n.each(t.dataZoomInfos,(function(n){if(i.isAvailableBehavior(n.dataZoomModel.option)){var a=(n.getRange||{})[e],o=a&&a(t.controller,i);!n.dataZoomModel.get("disabled",!0)&&o&&r.push({dataZoomId:n.dataZoomId,start:o[0],end:o[1]})}})),r.length&&t.dispatchAction(r)}))})),i}function d(e){n.each(e,(function(t,i){t.count||(t.controller.dispose(),delete e[i])}))}function p(e,t){e.dispatchAction({type:"dataZoom",batch:t})}function f(e){var t,i="type_",r={type_true:2,type_move:1,type_false:0,type_undefined:-1},a=!0;return n.each(e,(function(e){var n=e.dataZoomModel,o=!n.get("disabled",!0)&&(!n.get("zoomLock",!0)||"move");r[i+o]>r[i+t]&&(t=o),a&=n.get("preventDefaultMouseMove",!0)})),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!a}}}t.register=s,t.unregister=l,t.generateCoordId=c},"55b5":function(e,t,i){var n=i("4a4b");function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}e.exports=r,e.exports["default"]=e.exports,e.exports.__esModule=!0},"562e":function(e,t,i){var n=i("6d8b");function r(e){null!=e&&n.extend(this,e),this.otherDims={}}var a=r;e.exports=a},5693:function(e,t){function i(e,t){var i,n,r,a,o,s=t.x,l=t.y,c=t.width,u=t.height,h=t.r;c<0&&(s+=c,c=-c),u<0&&(l+=u,u=-u),"number"===typeof h?i=n=r=a=h:h instanceof Array?1===h.length?i=n=r=a=h[0]:2===h.length?(i=r=h[0],n=a=h[1]):3===h.length?(i=h[0],n=a=h[1],r=h[2]):(i=h[0],n=h[1],r=h[2],a=h[3]):i=n=r=a=0,i+n>c&&(o=i+n,i*=c/o,n*=c/o),r+a>c&&(o=r+a,r*=c/o,a*=c/o),n+r>u&&(o=n+r,n*=u/o,r*=u/o),i+a>u&&(o=i+a,i*=u/o,a*=u/o),e.moveTo(s+i,l),e.lineTo(s+c-n,l),0!==n&&e.arc(s+c-n,l+n,n,-Math.PI/2,0),e.lineTo(s+c,l+u-r),0!==r&&e.arc(s+c-r,l+u-r,r,0,Math.PI/2),e.lineTo(s+a,l+u),0!==a&&e.arc(s+a,l+u-a,a,Math.PI/2,Math.PI),e.lineTo(s,l+i),0!==i&&e.arc(s+i,l+i,i,Math.PI,1.5*Math.PI)}t.buildPath=i},"56d6":function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return o}));var n=i("38862"),r=i("690a"),a=i("9e77");function o(e){const t=new r["a"];return t.include(a["a"],e),t.vertex.uniforms.add("uModelViewMatrix","mat4"),t.vertex.uniforms.add("uProjectionMatrix","mat4"),t.attributes.add("start","vec3"),t.attributes.add("end","vec3"),t.attributes.add("up","vec3"),t.attributes.add("extrude","vec2"),t.varyings.add("uv","vec2"),t.varyings.add("vViewStart","vec3"),t.varyings.add("vViewEnd","vec3"),t.varyings.add("vViewPlane","vec4"),t.vertex.uniforms.add("glowWidth","float"),t.vertex.uniforms.add("pixelToNDC","vec2"),t.vertex.code.add(n["a"]`
  void main() {
    vec3 pos = mix(start, end, extrude.x);

    vec4 viewPos = uModelViewMatrix * vec4(pos, 1);
    vec4 projPos = uProjectionMatrix * viewPos;
    vec2 ndcPos = projPos.xy / projPos.w;

    vec3 viewUp = (uModelViewMatrix * vec4(extrude.y * up, 0)).xyz;
    vec4 projPosUp = uProjectionMatrix * vec4(viewPos.xyz + viewUp, 1);
    vec2 projExtrudeDir = normalize(projPosUp.xy / projPosUp.w - ndcPos);

    vec2 lxy = abs(sign(projExtrudeDir) - ndcPos);
    ndcPos += length(lxy) * projExtrudeDir;

    vec3 worldPlaneNormal = normalize(cross(up, normalize(end - start)));
    vec3 viewPlaneNormal = (uModelViewMatrix * vec4(worldPlaneNormal, 0)).xyz;

    vViewStart = (uModelViewMatrix * vec4(start, 1)).xyz;
    vViewEnd = (uModelViewMatrix * vec4(end, 1)).xyz;
    vViewPlane = vec4(viewPlaneNormal, -dot(viewPlaneNormal, vViewStart));

    // Add enough padding in the X screen space direction for glow
    float xPaddingPixels = sign(dot(viewPlaneNormal, viewPos.xyz)) * (extrude.x * 2.0 - 1.0) * glowWidth;
    ndcPos.x += xPaddingPixels * pixelToNDC.x;

    uv = ndcPos * 0.5 + 0.5;
    gl_Position = vec4(ndcPos, 0, 1);
  }
  `),t.fragment.uniforms.add("globalAlpha","float"),t.fragment.uniforms.add("perScreenPixelRatio","float"),t.fragment.code.add(n["a"]`
  float planeDistancePixels(vec4 plane, vec3 pos, vec3 start, vec3 end) {
    vec3 origin = mix(start, end, 0.5);
    vec3 basis = end - origin;
    vec3 posAtOrigin = pos - origin;

    float x = dot(normalize(basis), posAtOrigin);
    float y = dot(plane.xyz, posAtOrigin);

    float dx = max(abs(x) - length(basis), 0.0);
    float dy = y;

    float dist = length(vec2(dx, dy));

    float width = fwidth(y);
    float maxPixelDistance = length(pos) * perScreenPixelRatio * 2.0;
    float pixelDist = dist / min(width, maxPixelDistance);
    return abs(pixelDist);
  }

  void main() {
    vec3 pos;
    vec3 normal;
    float depthDiscontinuityAlpha;

    if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {
      discard;
    }

    float distance = planeDistancePixels(vViewPlane, pos, vViewStart, vViewEnd);

    vec4 color = laserlineProfile(distance);
    float alpha = 1.0 - smoothstep(0.995, 0.999, abs(dot(normal, vViewPlane.xyz)));

    gl_FragColor = laserlineOutput(color * alpha * depthDiscontinuityAlpha);
  }
  `),t}var s=Object.freeze({__proto__:null,build:o})},5715:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));i("c120");var n=i("e92d"),r=i("6706"),a=i("7dcb");n["a"].getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");class o extends a["a"]{constructor(e,t,i){super(),this.previousVertex=e,this.centerVertex=t,this.nextVertex=i}equals(e){return e instanceof o&&Object(r["d"])(this.previousVertex,e.previousVertex)&&Object(r["d"])(this.centerVertex,e.centerVertex)&&Object(r["d"])(this.nextVertex,e.nextVertex)}}},5866:function(e,t,i){var n=i("ef2b"),r=n.forceLayout,a=i("1c5f"),o=a.simpleLayout,s=i("94e41"),l=s.circularLayout,c=i("3842"),u=c.linearMap,h=i("401b"),d=i("6d8b"),p=i("0c37"),f=p.getCurvenessForEdge;function m(e){e.eachSeriesByType("graph",(function(e){var t=e.coordinateSystem;if(!t||"view"===t.type)if("force"===e.get("layout")){var i=e.preservedPoints||{},n=e.getGraph(),a=n.data,s=n.edgeData,c=e.getModel("force"),p=c.get("initLayout");e.preservedPoints?a.each((function(e){var t=a.getId(e);a.setItemLayout(e,i[t]||[NaN,NaN])})):p&&"none"!==p?"circular"===p&&l(e,"value"):o(e);var m=a.getDataExtent("value"),g=s.getDataExtent("value"),v=c.get("repulsion"),y=c.get("edgeLength");d.isArray(v)||(v=[v,v]),d.isArray(y)||(y=[y,y]),y=[y[1],y[0]];var _=a.mapArray("value",(function(e,t){var i=a.getItemLayout(t),n=u(e,m,v);return isNaN(n)&&(n=(v[0]+v[1])/2),{w:n,rep:n,fixed:a.getItemModel(t).get("fixed"),p:!i||isNaN(i[0])||isNaN(i[1])?null:i}})),b=s.mapArray("value",(function(t,i){var r=n.getEdgeByIndex(i),a=u(t,g,y);isNaN(a)&&(a=(y[0]+y[1])/2);var o=r.getModel(),s=d.retrieve3(o.get("lineStyle.curveness"),-f(r,e,i,!0),0);return{n1:_[r.node1.dataIndex],n2:_[r.node2.dataIndex],d:a,curveness:s,ignoreForceLayout:o.get("ignoreForceLayout")}})),x=(t=e.coordinateSystem,t.getBoundingRect()),w=r(_,b,{rect:x,gravity:c.get("gravity"),friction:c.get("friction")}),T=w.step;w.step=function(e){for(var t=0,r=_.length;t<r;t++)_[t].fixed&&h.copy(_[t].p,n.getNodeByIndex(t).getLayout());T((function(t,r,o){for(var s=0,l=t.length;s<l;s++)t[s].fixed||n.getNodeByIndex(s).setLayout(t[s].p),i[a.getId(s)]=t[s].p;for(s=0,l=r.length;s<l;s++){var c=r[s],u=n.getEdgeByIndex(s),d=c.n1.p,p=c.n2.p,f=u.getLayout();f=f?f.slice():[],f[0]=f[0]||[],f[1]=f[1]||[],h.copy(f[0],d),h.copy(f[1],p),+c.curveness&&(f[2]=[(d[0]+p[0])/2-(d[1]-p[1])*c.curveness,(d[1]+p[1])/2-(p[0]-d[0])*c.curveness]),u.setLayout(f)}e&&e(o)}))},e.forceLayout=w,e.preservedPoints=i,w.step()}else e.forceLayout=null}))}e.exports=m},"58df":function(e,t,i){var n=i("6d8b"),r=i("2306");function a(e,t,i,a){var o=i.axis;if(!o.scale.isBlank()){var s=i.getModel("splitArea"),l=s.getModel("areaStyle"),c=l.get("color"),u=a.coordinateSystem.getRect(),h=o.getTicksCoords({tickModel:s,clamp:!0});if(h.length){var d=c.length,p=e.__splitAreaColors,f=n.createHashMap(),m=0;if(p)for(var g=0;g<h.length;g++){var v=p.get(h[g].tickValue);if(null!=v){m=(v+(d-1)*g)%d;break}}var y=o.toGlobalCoord(h[0].coord),_=l.getAreaStyle();c=n.isArray(c)?c:[c];for(g=1;g<h.length;g++){var b,x,w,T,S=o.toGlobalCoord(h[g].coord);o.isHorizontal()?(b=y,x=u.y,w=S-b,T=u.height,y=b+w):(b=u.x,x=y,w=u.width,T=S-x,y=x+T);var O=h[g-1].tickValue;null!=O&&f.set(O,m),t.add(new r.Rect({anid:null!=O?"area_"+O:null,shape:{x:b,y:x,width:w,height:T},style:n.defaults({fill:c[m]},_),silent:!0})),m=(m+1)%d}e.__splitAreaColors=f}}}function o(e){e.__splitAreaColors=null}t.rectCoordAxisBuildSplitArea=a,t.rectCoordAxisHandleRemove=o},"5aa9":function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("6d8b")),a=r.isObject,o=r.each,s=r.map,l=r.indexOf,c=(r.retrieve,i("f934")),u=c.getLayoutRect,h=i("697e"),d=h.createScaleByModel,p=h.ifAxisCrossZero,f=h.niceScaleExtent,m=h.estimateLabelUnionRect,g=i("cbe9"),v=i("ec02"),y=i("2039"),_=i("ee1a"),b=_.getStackedDimension;function x(e,t,i){return e.getCoordSysModel()===t}function w(e,t,i){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(e,t,i),this.model=e}i("8ed2");var T=w.prototype;function S(e,t,i,n){i.getAxesOnZeroOf=function(){return r?[r]:[]};var r,a=e[t],o=i.model,s=o.get("axisLine.onZero"),l=o.get("axisLine.onZeroAxisIndex");if(s){if(null!=l)O(a[l])&&(r=a[l]);else for(var c in a)if(a.hasOwnProperty(c)&&O(a[c])&&!n[u(a[c])]){r=a[c];break}r&&(n[u(r)]=!0)}function u(e){return e.dim+"_"+e.index}}function O(e){return e&&"category"!==e.type&&"time"!==e.type&&p(e)}function C(e,t){var i=e.getExtent(),n=i[0]+i[1];e.toGlobalCoord="x"===e.dim?function(e){return e+t}:function(e){return n-e+t},e.toLocalCoord="x"===e.dim?function(e){return e-t}:function(e){return n-e+t}}T.type="grid",T.axisPointerEnabled=!0,T.getRect=function(){return this._rect},T.update=function(e,t){var i=this._axesMap;this._updateScale(e,this.model),o(i.x,(function(e){f(e.scale,e.model)})),o(i.y,(function(e){f(e.scale,e.model)}));var n={};o(i.x,(function(e){S(i,"y",e,n)})),o(i.y,(function(e){S(i,"x",e,n)})),this.resize(this.model,t)},T.resize=function(e,t,i){var n=u(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()});this._rect=n;var r=this._axesList;function a(){o(r,(function(e){var t=e.isHorizontal(),i=t?[0,n.width]:[0,n.height],r=e.inverse?1:0;e.setExtent(i[r],i[1-r]),C(e,t?n.x:n.y)}))}a(),!i&&e.get("containLabel")&&(o(r,(function(e){if(!e.model.get("axisLabel.inside")){var t=m(e);if(t){var i=e.isHorizontal()?"height":"width",r=e.model.get("axisLabel.margin");n[i]-=t[i]+r,"top"===e.position?n.y+=t.height+r:"left"===e.position&&(n.x+=t.width+r)}}})),a())},T.getAxis=function(e,t){var i=this._axesMap[e];if(null!=i){if(null==t)for(var n in i)if(i.hasOwnProperty(n))return i[n];return i[t]}},T.getAxes=function(){return this._axesList.slice()},T.getCartesian=function(e,t){if(null!=e&&null!=t){var i="x"+e+"y"+t;return this._coordsMap[i]}a(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var n=0,r=this._coordsList;n<r.length;n++)if(r[n].getAxis("x").index===e||r[n].getAxis("y").index===t)return r[n]},T.getCartesians=function(){return this._coordsList.slice()},T.convertToPixel=function(e,t,i){var n=this._findConvertTarget(e,t);return n.cartesian?n.cartesian.dataToPoint(i):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(i)):null},T.convertFromPixel=function(e,t,i){var n=this._findConvertTarget(e,t);return n.cartesian?n.cartesian.pointToData(i):n.axis?n.axis.coordToData(n.axis.toLocalCoord(i)):null},T._findConvertTarget=function(e,t){var i,n,r=t.seriesModel,a=t.xAxisModel||r&&r.getReferringComponents("xAxis")[0],o=t.yAxisModel||r&&r.getReferringComponents("yAxis")[0],s=t.gridModel,c=this._coordsList;if(r)i=r.coordinateSystem,l(c,i)<0&&(i=null);else if(a&&o)i=this.getCartesian(a.componentIndex,o.componentIndex);else if(a)n=this.getAxis("x",a.componentIndex);else if(o)n=this.getAxis("y",o.componentIndex);else if(s){var u=s.coordinateSystem;u===this&&(i=this._coordsList[0])}return{cartesian:i,axis:n}},T.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},T._initCartesian=function(e,t,i){var n={left:!1,right:!1,top:!1,bottom:!1},r={x:{},y:{}},a={x:0,y:0};if(t.eachComponent("xAxis",s("x"),this),t.eachComponent("yAxis",s("y"),this),!a.x||!a.y)return this._axesMap={},void(this._axesList=[]);function s(i){return function(o,s){if(x(o,e,t)){var l=o.get("position");"x"===i?"top"!==l&&"bottom"!==l&&(l=n.bottom?"top":"bottom"):"left"!==l&&"right"!==l&&(l=n.left?"right":"left"),n[l]=!0;var c=new v(i,d(o),[0,0],o.get("type"),l),u="category"===c.type;c.onBand=u&&o.get("boundaryGap"),c.inverse=o.get("inverse"),o.axis=c,c.model=o,c.grid=this,c.index=s,this._axesList.push(c),r[i][s]=c,a[i]++}}}this._axesMap=r,o(r.x,(function(t,i){o(r.y,(function(n,r){var a="x"+i+"y"+r,o=new g(a);o.grid=this,o.model=e,this._coordsMap[a]=o,this._coordsList.push(o),o.addAxis(t),o.addAxis(n)}),this)}),this)},T._updateScale=function(e,t){function i(e,t,i){o(e.mapDimension(t.dim,!0),(function(i){t.scale.unionExtentFromData(e,b(e,i))}))}o(this._axesList,(function(e){e.scale.setExtent(1/0,-1/0)})),e.eachSeries((function(n){if(E(n)){var r=P(n,e),a=r[0],o=r[1];if(!x(a,t,e)||!x(o,t,e))return;var s=this.getCartesian(a.componentIndex,o.componentIndex),l=n.getData(),c=s.getAxis("x"),u=s.getAxis("y");"list"===l.type&&(i(l,c,n),i(l,u,n))}}),this)},T.getTooltipAxes=function(e){var t=[],i=[];return o(this.getCartesians(),(function(n){var r=null!=e&&"auto"!==e?n.getAxis(e):n.getBaseAxis(),a=n.getOtherAxis(r);l(t,r)<0&&t.push(r),l(i,a)<0&&i.push(a)})),{baseAxes:t,otherAxes:i}};var k=["xAxis","yAxis"];function P(e,t){return s(k,(function(t){var i=e.getReferringComponents(t)[0];return i}))}function E(e){return"cartesian2d"===e.get("coordinateSystem")}w.create=function(e,t){var i=[];return e.eachComponent("grid",(function(n,r){var a=new w(n,e,t);a.name="grid_"+r,a.resize(n,t,!0),n.coordinateSystem=a,i.push(a)})),e.eachSeries((function(t){if(E(t)){var i=P(t,e),n=i[0],r=i[1],a=n.getCoordSysModel(),o=a.coordinateSystem;t.coordinateSystem=o.getCartesian(n.componentIndex,r.componentIndex)}})),i},w.dimensions=w.prototype.dimensions=g.prototype.dimensions,y.register("cartesian2d",w);var A=w;e.exports=A},"5be7":function(e,t,i){"use strict";i("a524")},"5c2d":function(e,t,i){"use strict";i("552e")},"5d38":function(e,t,i){},"5d85":function(e,t,i){"use strict";i("0a27")},"5e68":function(e,t,i){var n=i("6d8b"),r=i("2cf4"),a=r.devicePixelRatio,o=i("2b61"),s=i("dc2f");function l(){return!1}function c(e,t,i){var r=n.createCanvas(),a=t.getWidth(),o=t.getHeight(),s=r.style;return s&&(s.position="absolute",s.left=0,s.top=0,s.width=a+"px",s.height=o+"px",r.setAttribute("data-zr-dom-id",e)),r.width=a*i,r.height=o*i,r}var u=function(e,t,i){var r;i=i||a,"string"===typeof e?r=c(e,t,i):n.isObject(e)&&(r=e,e=r.id),this.id=e,this.dom=r;var o=r.style;o&&(r.onselectstart=l,o["-webkit-user-select"]="none",o["user-select"]="none",o["-webkit-touch-callout"]="none",o["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",o["padding"]=0,o["margin"]=0,o["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=t,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=i};u.prototype={constructor:u,__dirty:!0,__used:!1,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var e=this.dpr;this.domBack=c("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!==e&&this.ctxBack.scale(e,e)},resize:function(e,t){var i=this.dpr,n=this.dom,r=n.style,a=this.domBack;r&&(r.width=e+"px",r.height=t+"px"),n.width=e*i,n.height=t*i,a&&(a.width=e*i,a.height=t*i,1!==i&&this.ctxBack.scale(i,i))},clear:function(e,t){var i,n=this.dom,r=this.ctx,a=n.width,l=n.height,c=(t=t||this.clearColor,this.motionBlur&&!e),u=this.lastFrameAlpha,h=this.dpr;(c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(n,0,0,a/h,l/h)),r.clearRect(0,0,a,l),t&&"transparent"!==t)&&(t.colorStops?(i=t.__canvasGradient||o.getGradient(r,t,{x:0,y:0,width:a,height:l}),t.__canvasGradient=i):t.image&&(i=s.prototype.getCanvasPattern.call(t,r)),r.save(),r.fillStyle=i||t,r.fillRect(0,0,a,l),r.restore());if(c){var d=this.domBack;r.save(),r.globalAlpha=u,r.drawImage(d,0,0,a,l),r.restore()}}};var h=u;e.exports=h},"5e76":function(e,t,i){var n=i("d51b"),r=new n(50);function a(e){if("string"===typeof e){var t=r.get(e);return t&&t.image}return e}function o(e,t,i,n,a){if(e){if("string"===typeof e){if(t&&t.__zrImageSrc===e||!i)return t;var o=r.get(e),c={hostEl:i,cb:n,cbPayload:a};return o?(t=o.image,!l(t)&&o.pending.push(c)):(t=new Image,t.onload=t.onerror=s,r.put(e,t.__cachedImgObj={image:t,pending:[c]}),t.src=t.__zrImageSrc=e),t}return e}return t}function s(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var i=e.pending[t],n=i.cb;n&&n(this,i.cbPayload),i.hostEl.dirty()}e.pending.length=0}function l(e){return e&&e.width&&e.height}t.findExistImage=a,t.createOrUpdateImage=o,t.isImageReady=l},"5e97":function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("3eba")),a=i("6d8b"),o=i("a15a"),s=o.createSymbol,l=i("2306"),c=i("7919"),u=c.makeBackground,h=i("f934"),d=a.curry,p=a.each,f=l.Group,m=r.extendComponentView({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new f),this._backgroundEl,this.group.add(this._selectorGroup=new f),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(e,t,i){var n=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var r=e.get("align"),o=e.get("orient");r&&"auto"!==r||(r="right"===e.get("left")&&"vertical"===o?"right":"left");var s=e.get("selector",!0),l=e.get("selectorPosition",!0);!s||l&&"auto"!==l||(l="horizontal"===o?"end":"start"),this.renderInner(r,e,t,i,s,o,l);var c=e.getBoxLayoutParams(),d={width:i.getWidth(),height:i.getHeight()},p=e.get("padding"),f=h.getLayoutRect(c,d,p),m=this.layoutInner(e,r,f,n,s,l),g=h.getLayoutRect(a.defaults({width:m.width,height:m.height},c),d,p);this.group.attr("position",[g.x-m.x,g.y-m.y]),this.group.add(this._backgroundEl=u(m,e))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(e,t,i,n,r,o,s){var l=this.getContentGroup(),c=a.createHashMap(),u=t.get("selectedMode"),h=[];i.eachRawSeries((function(e){!e.get("legendHoverLink")&&h.push(e.id)})),p(t.getData(),(function(r,a){var o=r.get("name");if(this.newlineDisabled||""!==o&&"\n"!==o){var s=i.getSeriesByName(o)[0];if(!c.get(o))if(s){var p=s.getData(),m=p.getVisual("color"),g=p.getVisual("borderColor");"function"===typeof m&&(m=m(s.getDataParams(0))),"function"===typeof g&&(g=g(s.getDataParams(0)));var b=p.getVisual("legendSymbol")||"roundRect",x=p.getVisual("symbol"),w=this._createItem(o,a,r,t,b,x,e,m,g,u);w.on("click",d(v,o,null,n,h)).on("mouseover",d(y,s.name,null,n,h)).on("mouseout",d(_,s.name,null,n,h)),c.set(o,!0)}else i.eachRawSeries((function(i){if(!c.get(o)&&i.legendVisualProvider){var s=i.legendVisualProvider;if(!s.containName(o))return;var l=s.indexOfName(o),p=s.getItemVisual(l,"color"),f=s.getItemVisual(l,"borderColor"),m="roundRect",g=this._createItem(o,a,r,t,m,null,e,p,f,u);g.on("click",d(v,null,o,n,h)).on("mouseover",d(y,null,o,n,h)).on("mouseout",d(_,null,o,n,h)),c.set(o,!0)}}),this)}else l.add(new f({newline:!0}))}),this),r&&this._createSelector(r,t,n,o,s)},_createSelector:function(e,t,i,n,r){var a=this.getSelectorGroup();function o(e){var n=e.type,r=new l.Text({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:"all"===n?"legendAllSelect":"legendInverseSelect"})}});a.add(r);var o=t.getModel("selectorLabel"),s=t.getModel("emphasis.selectorLabel");l.setLabelStyle(r.style,r.hoverStyle={},o,s,{defaultText:e.title,isRectText:!1}),l.setHoverStyle(r)}p(e,(function(e){o(e)}))},_createItem:function(e,t,i,n,r,o,c,u,h,d){var p=n.get("itemWidth"),m=n.get("itemHeight"),v=n.get("inactiveColor"),y=n.get("inactiveBorderColor"),_=n.get("symbolKeepAspect"),b=n.getModel("itemStyle"),x=n.isSelected(e),w=new f,T=i.getModel("textStyle"),S=i.get("icon"),O=i.getModel("tooltip"),C=O.parentModel;r=S||r;var k=s(r,0,0,p,m,x?u:v,null==_||_);if(w.add(g(k,r,b,h,y,x)),!S&&o&&(o!==r||"none"===o)){var P=.8*m;"none"===o&&(o="circle");var E=s(o,(p-P)/2,(m-P)/2,P,P,x?u:v,null==_||_);w.add(g(E,o,b,h,y,x))}var A="left"===c?p+5:-5,I=c,M=n.get("formatter"),D=e;"string"===typeof M&&M?D=M.replace("{name}",null!=e?e:""):"function"===typeof M&&(D=M(e)),w.add(new l.Text({style:l.setTextStyle({},T,{text:D,x:A,y:m/2,textFill:x?T.getTextColor():v,textAlign:I,textVerticalAlign:"middle"})}));var j=new l.Rect({shape:w.getBoundingRect(),invisible:!0,tooltip:O.get("show")?a.extend({content:e,formatter:C.get("formatter",!0)||function(){return e},formatterParams:{componentType:"legend",legendIndex:n.componentIndex,name:e,$vars:["name"]}},O.option):null});return w.add(j),w.eachChild((function(e){e.silent=!0})),j.silent=!d,this.getContentGroup().add(w),l.setHoverStyle(w),w.__legendDataIndex=t,w},layoutInner:function(e,t,i,n,r,a){var o=this.getContentGroup(),s=this.getSelectorGroup();h.box(e.get("orient"),o,e.get("itemGap"),i.width,i.height);var l=o.getBoundingRect(),c=[-l.x,-l.y];if(r){h.box("horizontal",s,e.get("selectorItemGap",!0));var u=s.getBoundingRect(),d=[-u.x,-u.y],p=e.get("selectorButtonGap",!0),f=e.getOrient().index,m=0===f?"width":"height",g=0===f?"height":"width",v=0===f?"y":"x";"end"===a?d[f]+=l[m]+p:c[f]+=u[m]+p,d[1-f]+=l[g]/2-u[g]/2,s.attr("position",d),o.attr("position",c);var y={x:0,y:0};return y[m]=l[m]+p+u[m],y[g]=Math.max(l[g],u[g]),y[v]=Math.min(0,u[v]+d[1-f]),y}return o.attr("position",c),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function g(e,t,i,n,r,a){var o;return"line"!==t&&t.indexOf("empty")<0?(o=i.getItemStyle(),e.style.stroke=n,a||(o.stroke=r)):o=i.getItemStyle(["borderWidth","borderColor"]),e.setStyle(o)}function v(e,t,i,n){_(e,t,i,n),i.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),y(e,t,i,n)}function y(e,t,i,n){var r=i.getZr().storage.getDisplayList()[0];r&&r.useHoverLayer||i.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:n})}function _(e,t,i,n){var r=i.getZr().storage.getDisplayList()[0];r&&r.useHoverLayer||i.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:n})}e.exports=m},"5ef2":function(e,t,i){"use strict";function n(){return new Float32Array(4)}function r(e){const t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(e,t,i,n){const r=new Float32Array(4);return r[0]=e,r[1]=t,r[2]=i,r[3]=n,r}function o(e,t){return new Float32Array(e,t,4)}function s(){return n()}function l(){return a(1,1,1,1)}function c(){return a(1,0,0,0)}function u(){return a(0,1,0,0)}function h(){return a(0,0,1,0)}function d(){return a(0,0,0,1)}i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a}));const p=s(),f=l(),m=c(),g=u(),v=h(),y=d();Object.freeze({__proto__:null,create:n,clone:r,fromValues:a,createView:o,zeros:s,ones:l,unitX:c,unitY:u,unitZ:h,unitW:d,ZEROS:p,ONES:f,UNIT_X:m,UNIT_Y:g,UNIT_Z:v,UNIT_W:y})},"5fae":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("b2b2"),r=i("d791"),a=i("afe1"),o=i("5a22"),s=i("748f"),l=i("f53a");class c extends l["a"]{constructor(e){super(e.view),this._resources=null,this._transform=Object(a["b"])()}get object(){return Object(n["k"])(this._resources)?this._resources.object:null}get transform(){return this._transform}set transform(e){Object(r["c"])(this._transform,e),Object(n["k"])(this._resources)&&(this._resources.object.transformation=this._transform,this._resources.layer.commit())}recreate(){this.attached&&this.createResources()}recreateGeometry(){if(Object(n["j"])(this._resources))return;const e=this._resources.object,t=this.view._stage;t.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),this.visible||e.setVisible(this.visible),t.addMany(e.geometries),this._resources.layer.commit()}createResources(){this.destroyResources();const e=this.view._stage;if(!e)return;const t=new s["a"]({isPickable:!1});e.add(t);const i=new o["a"]({castShadow:!1});i.transformation=this._transform,this.createExternalResources(),this.createGeometries(i),e.addMany(i.geometries),this.forEachExternalMaterial(t=>e.add(t)),e.add(i),t.add(i),t.commit(),this.visible||(i.setVisible(!1),t.commit()),this._resources={layer:t,object:i}}destroyResources(){const e=this.view._stage;!Object(n["j"])(this._resources)&&e&&(e.remove(this._resources.object),e.remove(this._resources.layer),this.forEachExternalMaterial(t=>{e.remove(t),t.dispose()}),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}updateVisibility(e){Object(n["j"])(this._resources)||(this._resources.object.setVisible(e),this._resources.layer.commit())}}},"607d":function(e,t,i){var n=i("1fab");t.Dispatcher=n;var r=i("22d1"),a=i("65ed"),o=a.isCanvasEl,s=a.transformCoordWithViewport,l="undefined"!==typeof window&&!!window.addEventListener,c=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,u=[];function h(e,t,i,n){return i=i||{},n||!r.canvasSupported?d(e,t,i):r.browser.firefox&&null!=t.layerX&&t.layerX!==t.offsetX?(i.zrX=t.layerX,i.zrY=t.layerY):null!=t.offsetX?(i.zrX=t.offsetX,i.zrY=t.offsetY):d(e,t,i),i}function d(e,t,i){if(r.domSupported&&e.getBoundingClientRect){var n=t.clientX,a=t.clientY;if(o(e)){var l=e.getBoundingClientRect();return i.zrX=n-l.left,void(i.zrY=a-l.top)}if(s(u,e,n,a))return i.zrX=u[0],void(i.zrY=u[1])}i.zrX=i.zrY=0}function p(e){return e||window.event}function f(e,t,i){if(t=p(t),null!=t.zrX)return t;var n=t.type,r=n&&n.indexOf("touch")>=0;if(r){var a="touchend"!==n?t.targetTouches[0]:t.changedTouches[0];a&&h(e,a,t,i)}else h(e,t,t,i),t.zrDelta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3;var o=t.button;return null==t.which&&void 0!==o&&c.test(t.type)&&(t.which=1&o?1:2&o?3:4&o?2:0),t}function m(e,t,i,n){l?e.addEventListener(t,i,n):e.attachEvent("on"+t,i)}function g(e,t,i,n){l?e.removeEventListener(t,i,n):e.detachEvent("on"+t,i)}var v=l?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0};function y(e){return 2===e.which||3===e.which}function _(e){return e.which>1}t.clientToLocal=h,t.getNativeEvent=p,t.normalizeEvent=f,t.addEventListener=m,t.removeEventListener=g,t.stop=v,t.isMiddleOrRightButtonOnMouseUpDown=y,t.notLeftMouse=_},"609f":function(e,t,i){"use strict";i.d(t,"m",(function(){return r})),i.d(t,"k",(function(){return a})),i.d(t,"l",(function(){return o})),i.d(t,"n",(function(){return s})),i.d(t,"o",(function(){return l})),i.d(t,"a",(function(){return c})),i.d(t,"p",(function(){return u})),i.d(t,"w",(function(){return h})),i.d(t,"s",(function(){return d})),i.d(t,"r",(function(){return p})),i.d(t,"g",(function(){return f})),i.d(t,"q",(function(){return m})),i.d(t,"j",(function(){return g})),i.d(t,"i",(function(){return v})),i.d(t,"h",(function(){return y})),i.d(t,"t",(function(){return _})),i.d(t,"v",(function(){return b})),i.d(t,"u",(function(){return x})),i.d(t,"e",(function(){return w})),i.d(t,"f",(function(){return T})),i.d(t,"b",(function(){return S})),i.d(t,"c",(function(){return O})),i.d(t,"d",(function(){return C}));var n=i("b775");function r(){return Object(n["a"])({url:"/yqfk/chart/hotel/all/basic",method:"get"})}function a(){return Object(n["a"])({url:"/yqfk/personnel/findAll",method:"get"})}function o(e){return Object(n["a"])({url:"/yqfk/chart/hotel/detail/"+e,method:"get"})}function s(e){return Object(n["a"])({url:"/yqfk/personnel/query/"+e,method:"get"})}function l(e){return Object(n["a"])({url:"/yqfk/personGraph/query/"+e,method:"get"})}function c(e){return Object(n["a"])({url:"/yqfk/api/examinePeople/places/buildingSummary",method:"get",params:e})}function u(e){return Object(n["a"])({url:"/yqfk/chart/room/staff",method:"get",params:e})}function h(e){return Object(n["a"])({url:"/yqfk/mobile/searchJahyzdrqPageList",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/yqfk/api/examinePeople/places/people/list",method:"get",params:e})}function p(){return Object(n["a"])({url:"/yqfk/api/device/all",headers:{ContentType:"multipart/form-data"},method:"get"})}function f(){return Object(n["a"])({url:"/yqfk/api/device/hk",headers:{ContentType:"multipart/form-data"},method:"get"})}function m(){return Object(n["a"])({url:"/yqfk/web/healthCode/getStreetHealthCode",method:"get"})}function g(e){return Object(n["a"])({url:"/yqfk/web/healthCode/getHealthCodeScreen",method:"post",data:e})}function v(e){return Object(n["a"])({url:"/yqfk/web/healthCode/getHealthCodeDetail",method:"get",params:e})}function y(e){return Object(n["a"])({url:"/yqfk/hs-check/query-by-time",method:"get",params:e})}function _(e,t){return t.showModal=!1,Object(n["a"])({url:"/yqfk/api/device/PTZCtrl/".concat(e,"/move"),method:"post",data:t})}function b(e,t){return t.showModal=!1,Object(n["a"])({url:"/yqfk/api/device/PTZCtrl/".concat(e,"/zoom"),method:"post",data:t})}function x(e,t){return t.showModal=!1,Object(n["a"])({url:"/yqfk/api/device/PTZCtrl/".concat(e,"/autopan"),method:"post",data:t})}function w(e){return Object(n["a"])({url:"/yqfk/web/door/doorList",method:"post",headers:{ContentType:"multipart/form-data"},data:e})}function T(e){return Object(n["a"])({url:"/yqfk/web/door/doorListByAlarm",method:"post",headers:{ContentType:"multipart/form-data"},data:e})}function S(e){return Object(n["a"])({url:"/yqfk/web/door/getAlarm",method:"post",headers:{ContentType:"multipart/form-data"},data:e})}function O(e){return Object(n["a"])({url:"/yqfk/web/door/getAlarmChart",method:"post",headers:{ContentType:"multipart/form-data"},data:e})}function C(e){return Object(n["a"])({url:"/yqfk/web/door/doorAlarmCount",method:"post",headers:{ContentType:"multipart/form-data"},data:e})}},6179:function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("6d8b")),a=i("4319"),o=i("80f0"),s=i("ec6f"),l=i("2b17"),c=l.defaultDimValueGetters,u=l.DefaultDataProvider,h=i("2f45"),d=h.summarizeDimensions,p=i("562e"),f=r.isObject,m="undefined",g=-1,v="e\0\0",y={float:typeof Float64Array===m?Array:Float64Array,int:typeof Int32Array===m?Array:Int32Array,ordinal:Array,number:Array,time:Array},_=typeof Uint32Array===m?Array:Uint32Array,b=typeof Int32Array===m?Array:Int32Array,x=typeof Uint16Array===m?Array:Uint16Array;function w(e){return e._rawCount>65535?_:x}function T(e){var t=e.constructor;return t===Array?e.slice():new t(e)}var S=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],O=["_extent","_approximateExtent","_rawExtent"];function C(e,t){r.each(S.concat(t.__wrappedMethods||[]),(function(i){t.hasOwnProperty(i)&&(e[i]=t[i])})),e.__wrappedMethods=t.__wrappedMethods,r.each(O,(function(i){e[i]=r.clone(t[i])})),e._calculationInfo=r.extend(t._calculationInfo)}var k=function(e,t){e=e||["x","y"];for(var i={},n=[],a={},o=0;o<e.length;o++){var s=e[o];r.isString(s)?s=new p({name:s}):s instanceof p||(s=new p(s));var l=s.name;s.type=s.type||"float",s.coordDim||(s.coordDim=l,s.coordDimIndex=0),s.otherDims=s.otherDims||{},n.push(l),i[l]=s,s.index=o,s.createInvertedIndices&&(a[l]=[])}this.dimensions=n,this._dimensionInfos=i,this.hostModel=t,this.dataType,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawData,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=d(this),this._invertedIndicesMap=a,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},P=k.prototype;function E(e,t,i,n,r){var a=y[t.type],o=n-1,s=t.name,l=e[s][o];if(l&&l.length<i){for(var c=new a(Math.min(r-o*i,i)),u=0;u<l.length;u++)c[u]=l[u];e[s][o]=c}for(var h=n*i;h<r;h+=i)e[s].push(new a(Math.min(r-h,i)))}function A(e){var t=e._invertedIndicesMap;r.each(t,(function(i,n){var r=e._dimensionInfos[n],a=r.ordinalMeta;if(a){i=t[n]=new b(a.categories.length);for(var o=0;o<i.length;o++)i[o]=g;for(o=0;o<e._count;o++)i[e.get(n,o)]=o}}))}function I(e,t,i){var n;if(null!=t){var r=e._chunkSize,a=Math.floor(i/r),o=i%r,s=e.dimensions[t],l=e._storage[s][a];if(l){n=l[o];var c=e._dimensionInfos[s].ordinalMeta;c&&c.categories.length&&(n=c.categories[n])}}return n}function M(e){return e}function D(e){return e<this._count&&e>=0?this._indices[e]:-1}function j(e,t){var i=e._idList[t];return null==i&&(i=I(e,e._idDimIdx,t)),null==i&&(i=v+t),i}function L(e){return r.isArray(e)||(e=[e]),e}function R(e,t){var i=e.dimensions,n=new k(r.map(i,e.getDimensionInfo,e),e.hostModel);C(n,e);for(var a=n._storage={},o=e._storage,s=0;s<i.length;s++){var l=i[s];o[l]&&(r.indexOf(t,l)>=0?(a[l]=N(o[l]),n._rawExtent[l]=z(),n._extent[l]=null):a[l]=o[l])}return n}function N(e){for(var t=new Array(e.length),i=0;i<e.length;i++)t[i]=T(e[i]);return t}function z(){return[1/0,-1/0]}P.type="list",P.hasItemOption=!0,P.getDimension=function(e){return"number"!==typeof e&&(isNaN(e)||this._dimensionInfos.hasOwnProperty(e))||(e=this.dimensions[e]),e},P.getDimensionInfo=function(e){return this._dimensionInfos[this.getDimension(e)]},P.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},P.mapDimension=function(e,t){var i=this._dimensionsSummary;if(null==t)return i.encodeFirstDimNotExtra[e];var n=i.encode[e];return!0===t?(n||[]).slice():n&&n[t]},P.initData=function(e,t,i){var n=s.isInstance(e)||r.isArrayLike(e);n&&(e=new u(e,this.dimensions.length)),this._rawData=e,this._storage={},this._indices=null,this._nameList=t||[],this._idList=[],this._nameRepeatCount={},i||(this.hasItemOption=!1),this.defaultDimValueGetter=c[this._rawData.getSource().sourceFormat],this._dimValueGetter=i=i||this.defaultDimValueGetter,this._dimValueGetterArrayRows=c.arrayRows,this._rawExtent={},this._initDataFromProvider(0,e.count()),e.pure&&(this.hasItemOption=!1)},P.getProvider=function(){return this._rawData},P.appendData=function(e){var t=this._rawData,i=this.count();t.appendData(e);var n=t.count();t.persistent||(n+=i),this._initDataFromProvider(i,n)},P.appendValues=function(e,t){for(var i=this._chunkSize,n=this._storage,r=this.dimensions,a=r.length,o=this._rawExtent,s=this.count(),l=s+Math.max(e.length,t?t.length:0),c=this._chunkCount,u=0;u<a;u++){var h=r[u];o[h]||(o[h]=z()),n[h]||(n[h]=[]),E(n,this._dimensionInfos[h],i,c,l),this._chunkCount=n[h].length}for(var d=new Array(a),p=s;p<l;p++){for(var f=p-s,m=Math.floor(p/i),g=p%i,v=0;v<a;v++){h=r[v];var y=this._dimValueGetterArrayRows(e[f]||d,h,f,v);n[h][m][g]=y;var _=o[h];y<_[0]&&(_[0]=y),y>_[1]&&(_[1]=y)}t&&(this._nameList[p]=t[f])}this._rawCount=this._count=l,this._extent={},A(this)},P._initDataFromProvider=function(e,t){if(!(e>=t)){for(var i,n=this._chunkSize,r=this._rawData,a=this._storage,o=this.dimensions,s=o.length,l=this._dimensionInfos,c=this._nameList,u=this._idList,h=this._rawExtent,d=this._nameRepeatCount={},p=this._chunkCount,f=0;f<s;f++){var m=o[f];h[m]||(h[m]=z());var g=l[m];0===g.otherDims.itemName&&(i=this._nameDimIdx=f),0===g.otherDims.itemId&&(this._idDimIdx=f),a[m]||(a[m]=[]),E(a,g,n,p,t),this._chunkCount=a[m].length}for(var v=new Array(s),y=e;y<t;y++){v=r.getItem(y,v);for(var _=Math.floor(y/n),b=y%n,x=0;x<s;x++){m=o[x];var w=a[m][_],T=this._dimValueGetter(v,m,y,x);w[b]=T;var S=h[m];T<S[0]&&(S[0]=T),T>S[1]&&(S[1]=T)}if(!r.pure){var O=c[y];if(v&&null==O)if(null!=v.name)c[y]=O=v.name;else if(null!=i){var C=o[i],k=a[C][_];if(k){O=k[b];var P=l[C].ordinalMeta;P&&P.categories.length&&(O=P.categories[O])}}var I=null==v?null:v.id;null==I&&null!=O&&(d[O]=d[O]||0,I=O,d[O]>0&&(I+="__ec__"+d[O]),d[O]++),null!=I&&(u[y]=I)}}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=t,this._extent={},A(this)}},P.count=function(){return this._count},P.getIndices=function(){var e=this._indices;if(e){var t=e.constructor,i=this._count;if(t===Array){r=new t(i);for(var n=0;n<i;n++)r[n]=e[n]}else r=new t(e.buffer,0,i)}else{t=w(this);var r=new t(this.count());for(n=0;n<r.length;n++)r[n]=n}return r},P.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var i=this._storage;if(!i[e])return NaN;t=this.getRawIndex(t);var n=Math.floor(t/this._chunkSize),r=t%this._chunkSize,a=i[e][n],o=a[r];return o},P.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var i=this._storage[e];if(!i)return NaN;var n=Math.floor(t/this._chunkSize),r=t%this._chunkSize,a=i[n];return a[r]},P._getFast=function(e,t){var i=Math.floor(t/this._chunkSize),n=t%this._chunkSize,r=this._storage[e][i];return r[n]},P.getValues=function(e,t){var i=[];r.isArray(e)||(t=e,e=this.dimensions);for(var n=0,a=e.length;n<a;n++)i.push(this.get(e[n],t));return i},P.hasValue=function(e){for(var t=this._dimensionsSummary.dataDimsOnCoord,i=0,n=t.length;i<n;i++)if(isNaN(this.get(t[i],e)))return!1;return!0},P.getDataExtent=function(e){e=this.getDimension(e);var t=this._storage[e],i=z();if(!t)return i;var n,r=this.count(),a=!this._indices;if(a)return this._rawExtent[e].slice();if(n=this._extent[e],n)return n.slice();n=i;for(var o=n[0],s=n[1],l=0;l<r;l++){var c=this._getFast(e,this.getRawIndex(l));c<o&&(o=c),c>s&&(s=c)}return n=[o,s],this._extent[e]=n,n},P.getApproximateExtent=function(e){return e=this.getDimension(e),this._approximateExtent[e]||this.getDataExtent(e)},P.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},P.getCalculationInfo=function(e){return this._calculationInfo[e]},P.setCalculationInfo=function(e,t){f(e)?r.extend(this._calculationInfo,e):this._calculationInfo[e]=t},P.getSum=function(e){var t=this._storage[e],i=0;if(t)for(var n=0,r=this.count();n<r;n++){var a=this.get(e,n);isNaN(a)||(i+=a)}return i},P.getMedian=function(e){var t=[];this.each(e,(function(e,i){isNaN(e)||t.push(e)}));var i=[].concat(t).sort((function(e,t){return e-t})),n=this.count();return 0===n?0:n%2===1?i[(n-1)/2]:(i[n/2]+i[n/2-1])/2},P.rawIndexOf=function(e,t){var i=e&&this._invertedIndicesMap[e],n=i[t];return null==n||isNaN(n)?g:n},P.indexOfName=function(e){for(var t=0,i=this.count();t<i;t++)if(this.getName(t)===e)return t;return-1},P.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,i=t[e];if(null!=i&&i<this._count&&i===e)return e;var n=0,r=this._count-1;while(n<=r){var a=(n+r)/2|0;if(t[a]<e)n=a+1;else{if(!(t[a]>e))return a;r=a-1}}return-1},P.indicesOfNearest=function(e,t,i){var n=this._storage,r=n[e],a=[];if(!r)return a;null==i&&(i=1/0);for(var o=1/0,s=-1,l=0,c=0,u=this.count();c<u;c++){var h=t-this.get(e,c),d=Math.abs(h);d<=i&&((d<o||d===o&&h>=0&&s<0)&&(o=d,s=h,l=0),h===s&&(a[l++]=c))}return a.length=l,a},P.getRawIndex=M,P.getRawDataItem=function(e){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(e));for(var t=[],i=0;i<this.dimensions.length;i++){var n=this.dimensions[i];t.push(this.get(n,e))}return t},P.getName=function(e){var t=this.getRawIndex(e);return this._nameList[t]||I(this,this._nameDimIdx,t)||""},P.getId=function(e){return j(this,this.getRawIndex(e))},P.each=function(e,t,i,n){"use strict";if(this._count){"function"===typeof e&&(n=i,i=t,t=e,e=[]),i=i||n||this,e=r.map(L(e),this.getDimension,this);for(var a=e.length,o=0;o<this.count();o++)switch(a){case 0:t.call(i,o);break;case 1:t.call(i,this.get(e[0],o),o);break;case 2:t.call(i,this.get(e[0],o),this.get(e[1],o),o);break;default:for(var s=0,l=[];s<a;s++)l[s]=this.get(e[s],o);l[s]=o,t.apply(i,l)}}},P.filterSelf=function(e,t,i,n){"use strict";if(this._count){"function"===typeof e&&(n=i,i=t,t=e,e=[]),i=i||n||this,e=r.map(L(e),this.getDimension,this);for(var a=this.count(),o=w(this),s=new o(a),l=[],c=e.length,u=0,h=e[0],d=0;d<a;d++){var p,f=this.getRawIndex(d);if(0===c)p=t.call(i,d);else if(1===c){var m=this._getFast(h,f);p=t.call(i,m,d)}else{for(var g=0;g<c;g++)l[g]=this._getFast(h,f);l[g]=d,p=t.apply(i,l)}p&&(s[u++]=f)}return u<a&&(this._indices=s),this._count=u,this._extent={},this.getRawIndex=this._indices?D:M,this}},P.selectRange=function(e){"use strict";if(this._count){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);var n=t.length;if(n){var r=this.count(),a=w(this),o=new a(r),s=0,l=t[0],c=e[l][0],u=e[l][1],h=!1;if(!this._indices){var d=0;if(1===n){for(var p=this._storage[t[0]],f=0;f<this._chunkCount;f++)for(var m=p[f],g=Math.min(this._count-f*this._chunkSize,this._chunkSize),v=0;v<g;v++){var y=m[v];(y>=c&&y<=u||isNaN(y))&&(o[s++]=d),d++}h=!0}else if(2===n){p=this._storage[l];var _=this._storage[t[1]],b=e[t[1]][0],x=e[t[1]][1];for(f=0;f<this._chunkCount;f++){m=p[f];var T=_[f];for(g=Math.min(this._count-f*this._chunkSize,this._chunkSize),v=0;v<g;v++){y=m[v];var S=T[v];(y>=c&&y<=u||isNaN(y))&&(S>=b&&S<=x||isNaN(S))&&(o[s++]=d),d++}}h=!0}}if(!h)if(1===n)for(v=0;v<r;v++){var O=this.getRawIndex(v);y=this._getFast(l,O);(y>=c&&y<=u||isNaN(y))&&(o[s++]=O)}else for(v=0;v<r;v++){var C=!0;for(O=this.getRawIndex(v),f=0;f<n;f++){var k=t[f];y=this._getFast(i,O);(y<e[k][0]||y>e[k][1])&&(C=!1)}C&&(o[s++]=this.getRawIndex(v))}return s<r&&(this._indices=o),this._count=s,this._extent={},this.getRawIndex=this._indices?D:M,this}}},P.mapArray=function(e,t,i,n){"use strict";"function"===typeof e&&(n=i,i=t,t=e,e=[]),i=i||n||this;var r=[];return this.each(e,(function(){r.push(t&&t.apply(this,arguments))}),i),r},P.map=function(e,t,i,n){"use strict";i=i||n||this,e=r.map(L(e),this.getDimension,this);var a=R(this,e);a._indices=this._indices,a.getRawIndex=a._indices?D:M;for(var o=a._storage,s=[],l=this._chunkSize,c=e.length,u=this.count(),h=[],d=a._rawExtent,p=0;p<u;p++){for(var f=0;f<c;f++)h[f]=this.get(e[f],p);h[c]=p;var m=t&&t.apply(i,h);if(null!=m){"object"!==typeof m&&(s[0]=m,m=s);for(var g=this.getRawIndex(p),v=Math.floor(g/l),y=g%l,_=0;_<m.length;_++){var b=e[_],x=m[_],w=d[b],T=o[b];T&&(T[v][y]=x),x<w[0]&&(w[0]=x),x>w[1]&&(w[1]=x)}}}return a},P.downSample=function(e,t,i,n){for(var r=R(this,[e]),a=r._storage,o=[],s=Math.floor(1/t),l=a[e],c=this.count(),u=this._chunkSize,h=r._rawExtent[e],d=new(w(this))(c),p=0,f=0;f<c;f+=s){s>c-f&&(s=c-f,o.length=s);for(var m=0;m<s;m++){var g=this.getRawIndex(f+m),v=Math.floor(g/u),y=g%u;o[m]=l[v][y]}var _=i(o),b=this.getRawIndex(Math.min(f+n(o,_)||0,c-1)),x=Math.floor(b/u),T=b%u;l[x][T]=_,_<h[0]&&(h[0]=_),_>h[1]&&(h[1]=_),d[p++]=b}return r._count=p,r._indices=d,r.getRawIndex=D,r},P.getItemModel=function(e){var t=this.hostModel;return new a(this.getRawDataItem(e),t,t&&t.ecModel)},P.diff=function(e){var t=this;return new o(e?e.getIndices():[],this.getIndices(),(function(t){return j(e,t)}),(function(e){return j(t,e)}))},P.getVisual=function(e){var t=this._visual;return t&&t[e]},P.setVisual=function(e,t){if(f(e))for(var i in e)e.hasOwnProperty(i)&&this.setVisual(i,e[i]);else this._visual=this._visual||{},this._visual[e]=t},P.setLayout=function(e,t){if(f(e))for(var i in e)e.hasOwnProperty(i)&&this.setLayout(i,e[i]);else this._layout[e]=t},P.getLayout=function(e){return this._layout[e]},P.getItemLayout=function(e){return this._itemLayouts[e]},P.setItemLayout=function(e,t,i){this._itemLayouts[e]=i?r.extend(this._itemLayouts[e]||{},t):t},P.clearItemLayouts=function(){this._itemLayouts.length=0},P.getItemVisual=function(e,t,i){var n=this._itemVisuals[e],r=n&&n[t];return null!=r||i?r:this.getVisual(t)},P.setItemVisual=function(e,t,i){var n=this._itemVisuals[e]||{},r=this.hasItemVisual;if(this._itemVisuals[e]=n,f(t))for(var a in t)t.hasOwnProperty(a)&&(n[a]=t[a],r[a]=!0);else n[t]=i,r[t]=!0},P.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}};var B=function(e){e.seriesIndex=this.seriesIndex,e.dataIndex=this.dataIndex,e.dataType=this.dataType};P.setItemGraphicEl=function(e,t){var i=this.hostModel;t&&(t.dataIndex=e,t.dataType=this.dataType,t.seriesIndex=i&&i.seriesIndex,"group"===t.type&&t.traverse(B,t)),this._graphicEls[e]=t},P.getItemGraphicEl=function(e){return this._graphicEls[e]},P.eachItemGraphicEl=function(e,t){r.each(this._graphicEls,(function(i,n){i&&e&&e.call(t,i,n)}))},P.cloneShallow=function(e){if(!e){var t=r.map(this.dimensions,this.getDimensionInfo,this);e=new k(t,this.hostModel)}if(e._storage=this._storage,C(e,this),this._indices){var i=this._indices.constructor;e._indices=new i(this._indices)}else e._indices=null;return e.getRawIndex=e._indices?D:M,e},P.wrapMethod=function(e,t){var i=this[e];"function"===typeof i&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var e=i.apply(this,arguments);return t.apply(this,[e].concat(r.slice(arguments)))})},P.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],P.CHANGABLE_METHODS=["filterSelf","selectRange"];var V=k;e.exports=V},"61bf":function(e,t,i){},"620b":function(e,t,i){var n=i("401b"),r=n.distance;function a(e,t,i,n,r,a,o){var s=.5*(i-e),l=.5*(n-t);return(2*(t-i)+s+l)*o+(-3*(t-i)-2*s-l)*a+s*r+t}function o(e,t){for(var i=e.length,n=[],o=0,s=1;s<i;s++)o+=r(e[s-1],e[s]);var l=o/2;l=l<i?i:l;for(s=0;s<l;s++){var c,u,h,d=s/(l-1)*(t?i:i-1),p=Math.floor(d),f=d-p,m=e[p%i];t?(c=e[(p-1+i)%i],u=e[(p+1)%i],h=e[(p+2)%i]):(c=e[0===p?p:p-1],u=e[p>i-2?i-1:p+1],h=e[p>i-3?i-1:p+2]);var g=f*f,v=f*g;n.push([a(c[0],m[0],u[0],h[0],f,g,v),a(c[1],m[1],u[1],h[1],f,g,v)])}return n}e.exports=o},"625e":function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("6d8b")),a=".",o="___EC__COMPONENT__CONTAINER___";function s(e){var t={main:"",sub:""};return e&&(e=e.split(a),t.main=e[0]||"",t.sub=e[1]||""),t}function l(e){r.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function c(e,t){e.$constructor=e,e.extend=function(e){var t=this,i=function(){e.$constructor?e.$constructor.apply(this,arguments):t.apply(this,arguments)};return r.extend(i.prototype,e),i.extend=this.extend,i.superCall=d,i.superApply=p,r.inherits(i,this),i.superClass=t,i}}var u=0;function h(e){var t=["__\0is_clz",u++,Math.random().toFixed(3)].join("_");e.prototype[t]=!0,e.isInstance=function(e){return!(!e||!e[t])}}function d(e,t){var i=r.slice(arguments,2);return this.superClass.prototype[t].apply(e,i)}function p(e,t,i){return this.superClass.prototype[t].apply(e,i)}function f(e,t){t=t||{};var i={};function n(e){var t=i[e.main];return t&&t[o]||(t=i[e.main]={},t[o]=!0),t}if(e.registerClass=function(e,t){if(t)if(l(t),t=s(t),t.sub){if(t.sub!==o){var r=n(t);r[t.sub]=e}}else i[t.main]=e;return e},e.getClass=function(e,t,n){var r=i[e];if(r&&r[o]&&(r=t?r[t]:null),n&&!r)throw new Error(t?"Component "+e+"."+(t||"")+" not exists. Load it first.":e+".type should be specified.");return r},e.getClassesByMainType=function(e){e=s(e);var t=[],n=i[e.main];return n&&n[o]?r.each(n,(function(e,i){i!==o&&t.push(e)})):t.push(n),t},e.hasClass=function(e){return e=s(e),!!i[e.main]},e.getAllClassMainTypes=function(){var e=[];return r.each(i,(function(t,i){e.push(i)})),e},e.hasSubTypes=function(e){e=s(e);var t=i[e.main];return t&&t[o]},e.parseClassType=s,t.registerWhenExtend){var a=e.extend;a&&(e.extend=function(t){var i=a.call(this,t);return e.registerClass(i,t.type)})}return e}function m(e,t){}t.parseClassType=s,t.enableClassExtend=c,t.enableClassCheck=h,t.enableClassManagement=f,t.setReadOnly=m},"627c":function(e,t,i){var n=i("6d8b"),r=i("3eba"),a=i("2306"),o=i("f934"),s=o.getLayoutRect,l=i("eda2"),c=l.windowOpen;r.extendComponentModel({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),r.extendComponentView({type:"title",render:function(e,t,i){if(this.group.removeAll(),e.get("show")){var r=this.group,o=e.getModel("textStyle"),l=e.getModel("subtextStyle"),u=e.get("textAlign"),h=n.retrieve2(e.get("textBaseline"),e.get("textVerticalAlign")),d=new a.Text({style:a.setTextStyle({},o,{text:e.get("text"),textFill:o.getTextColor()},{disableBox:!0}),z2:10}),p=d.getBoundingRect(),f=e.get("subtext"),m=new a.Text({style:a.setTextStyle({},l,{text:f,textFill:l.getTextColor(),y:p.height+e.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),g=e.get("link"),v=e.get("sublink"),y=e.get("triggerEvent",!0);d.silent=!g&&!y,m.silent=!v&&!y,g&&d.on("click",(function(){c(g,"_"+e.get("target"))})),v&&m.on("click",(function(){c(v,"_"+e.get("subtarget"))})),d.eventData=m.eventData=y?{componentType:"title",componentIndex:e.componentIndex}:null,r.add(d),f&&r.add(m);var _=r.getBoundingRect(),b=e.getBoxLayoutParams();b.width=_.width,b.height=_.height;var x=s(b,{width:i.getWidth(),height:i.getHeight()},e.get("padding"));u||(u=e.get("left")||e.get("right"),"middle"===u&&(u="center"),"right"===u?x.x+=x.width:"center"===u&&(x.x+=x.width/2)),h||(h=e.get("top")||e.get("bottom"),"center"===h&&(h="middle"),"bottom"===h?x.y+=x.height:"middle"===h&&(x.y+=x.height/2),h=h||"top"),r.attr("position",[x.x,x.y]);var w={textAlign:u,textVerticalAlign:h};d.setStyle(w),m.setStyle(w),_=r.getBoundingRect();var T=x.margin,S=e.getItemStyle(["color","opacity"]);S.fill=e.get("backgroundColor");var O=new a.Rect({shape:{x:_.x-T[3],y:_.y-T[0],width:_.width+T[1]+T[3],height:_.height+T[0]+T[2],r:e.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});r.add(O)}}})},"62be":function(e,t,i){"use strict";i("a017")},"62c2":function(e,t,i){"use strict";i("78cf")},"62e9":function(e,t,i){},6469:function(e,t,i){"use strict";i.d(t,"a",(function(){return T}));var n=i("a4ee"),r=(i("c120"),i("7ffa")),a=i("b2b2"),o=(i("e92d"),i("cea0"),i("59b2"),i("d386")),s=(i("e041"),i("8eed"),i("f402"),i("f4cc")),l=i("4ae5"),c=(i("e06a"),i("ce6d")),u=i("a915"),h=i("af40"),d=i("9305"),p=i("3563"),f=i("8b1a6"),m=i("6ae9"),g=i("27df"),v=i("1f1c"),y=i("c20d"),_=i("3510"),b=i("feba");class x{constructor({grabbableForEvent:e}){this.events=new c["a"],this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=e}intersectionDistance(e,t){return 0}attach(){}detach(){}}var w=i("4aea");let T=class extends c["a"]{constructor(e){var t,i;super(),this._manipulator=null,this._stagedVertex=null,this.geometryType=null,this.elevationInfo=null,this.snapToSceneEnabled=null,this._handles=new h["a"],this._defaultZ=0,this._elevationDrawSurface=null,this._snappingDrawSurface=null,this._snappingManager=null,this._snappingPipeline=new _["a"],this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingTask=null,this.view=e.view,this.drawingMode=Object(a["r"])(e.drawingMode,w["a"]),this.geometryType=e.geometryType,this.elevationInfo=e.elevationInfo,this.coordinateHelper=Object(f["a"])(e.hasZ,e.hasM,this.view.spatialReference,this.view.viewingMode),this._defaultZ=e.defaultZ,this.snapToSceneEnabled=e.snapToSceneEnabled,this._snappingDrawSurface=Object(a["q"])(e.snappingDrawSurface),this._snappingManager=e.snappingManager;const n=null==(t=e.view)||null==(i=t.resourceController)?void 0:i.scheduler;this._frameTask=n?n.registerTask(d["b"].SNAPPING,e=>this._frameTask.processQueue(e),()=>!1):d["a"],this._elevationDrawSurface=e.elevationDrawSurface,this._editGeometry=new g["a"](new m["c"](this.coordinateHelper),"segment"===this.geometryType?"polyline":this.geometryType),this._activeComponent=new m["a"](this._editGeometry.editGeometry),this._editGeometry.editGeometry.components.push(this._activeComponent),this._editGeometry.on(["vertex-add","vertex-update","vertex-remove"],e=>{const t=e.vertices.map(e=>({componentIndex:0,vertexIndex:e.index,coordinates:this.coordinateHelper.toArray(e.pos)})),i=t.map(e=>e.coordinates);switch(e.type){case"vertex-add":this.emit(e.type,{...e,added:i,vertices:t});break;case"vertex-update":this.emit(e.type,{...e,updated:i,vertices:t});break;case"vertex-remove":this.emit(e.type,{...e,removed:i,vertices:t})}}),this._manipulator=new x({grabbableForEvent:e=>"click"!==this.drawingMode||"touch"===e.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size}),e.manipulators.add(this._manipulator),this._manipulator.grabbable="point"!==this.geometryType;const r=this.createManipulatorDragPipeline(this._manipulator),o=this._manipulator.events.on("immediate-double-click",e=>{this._manipulator.dragging||"point"===this.geometryType||(this.complete(),e.stopPropagation())}),s=this._manipulator.events.on("immediate-click",e=>{if(this._manipulator.dragging)return;const t=this._activeComponent,i=this._closeOnClickVertexIndex(e.screenPoint);if(Object(a["k"])(i))this.discardStagedVertex(),this.complete();else{const i=this._screenToMap(e.screenPoint);if(Object(a["k"])(i))switch(this.drawingMode){case"freehand":break;case"click":case"hybrid":this._snappingTask=Object(a["a"])(this._snappingTask),this.hasStagedVertex?this.commitStagedVertex():this._editGeometry.appendVertex(this.coordinateHelper.fromPoint(i)),("point"===this.geometryType||"segment"===this.geometryType&&2===t.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===t.vertices.length)&&this.complete()}}e.stopPropagation()});this._handles.add([r,s,o])}get isCompleted(){return this._createOperationCompleted}get _snappingEnabled(){return Object(a["k"])(this._snappingManager)&&this._snappingManager.options.effectiveEnabled}createManipulatorDragPipeline(e){switch(this.drawingMode){case"click":return this.createManipulatorDragPipelineClick(e);case"freehand":return this.createManipulatorDragPipelineFreehand(e);case"hybrid":return this.createManipulatorDragPipelineHybrid(e)}}createManipulatorDragPipelineClick(e){return Object(y["e"])(e,(e,t,i,n)=>{const r="touch"===n&&this._snappingEnabled;!this.isCompleted&&r&&(t.next(this._screenToMapDragEventStep()).next(e=>("start"===e.action&&(this.stagedVertex=e.mapStart,("segment"===this.geometryType||r&&0===this.vertices.length)&&this.commitStagedVertex()),e)).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>r,cancel:i,snappingManager:this._snappingManager,snappingContext:new v["a"]({geometry:this._editGeometry,elevationInfo:this.elevationInfo,pointer:n,visualizer:new b["a"]})}),this._snappingPipeline.next).next(e=>(r&&(this.stagedVertex=e.mapEnd,"end"===e.action&&this.commitStagedVertex()),e)).next(e=>("end"===e.action&&("segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),e)),i.next(()=>{r&&Object(a["k"])(this._snappingManager)&&this._snappingManager.doneSnapping()}))})}createManipulatorDragPipelineFreehand(e){return Object(y["e"])(e,(e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next(e=>("start"===e.action&&(this.stagedVertex=e.mapStart,"segment"===this.geometryType&&this.commitStagedVertex()),e)).next(e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete()}return e})})}createManipulatorDragPipelineHybrid(e){return Object(y["e"])(e,(e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next(e=>("start"===e.action&&(this.stagedVertex=e.mapStart,this.commitStagedVertex()),e)).next(e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return e})})}destroy(){this._handles.destroy(),this._handles=null,this._editGeometry.destroy(),this._frameTask.remove()}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}get canRedo(){return this._editGeometry.canRedo}redo(){this._editGeometry.redo()}get canUndo(){return this._editGeometry.canUndo}undo(){Object(a["k"])(this._snappingManager)&&this._snappingManager.doneSnapping(),this._editGeometry.undo()}complete(e=!1){Object(a["a"])(this._snappingTask),this.commitStagedVertex(),this._createOperationCompleted=!0,Object(a["k"])(this._snappingManager)&&this._snappingManager.doneSnapping(),this.emit("complete",{vertices:this.vertices.map((e,t)=>({componentIndex:0,vertexIndex:t,coordinates:e})),aborted:e,type:"complete"})}cancel(){this.complete(!0)}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get numVertices(){return Object(a["k"])(this._stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get numCommittedVertices(){return this._activeComponent.vertices.length}get vertices(){const e=this._activeComponent.vertices.map(e=>this.coordinateHelper.toArray(e.pos));return Object(a["k"])(this._stagedVertex)&&e.push(this.coordinateHelper.pointToArray(this._stagedVertex)),e}get spatialReference(){return this.view.spatialReference}get hasStagedVertex(){return Object(a["k"])(this._stagedVertex)}get stagedVertex(){return this._stagedVertex}set stagedVertex(e){if(Object(a["j"])(e))return void this.discardStagedVertex();if(Object(a["k"])(this._stagedVertex)&&Object(p["a"])(this._stagedVertex,e))return;Object(a["j"])(this._stagedVertex)?this._stagedVertex=Object(r["a"])(e):(this._stagedVertex.x=e.x,this._stagedVertex.y=e.y,this._stagedVertex.z=e.z,this._stagedVertex.m=e.m,this._stagedVertex.hasZ=e.hasZ,this._stagedVertex.hasM=e.hasM,this._stagedVertex.spatialReference=e.spatialReference);const t={componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(e)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"})}commitStagedVertex(){if(this._snappingTask=Object(a["a"])(this._snappingTask),Object(a["k"])(this._stagedVertex)){const e=this._stagedVertex;this._stagedVertex=null,this._editGeometry.appendVertex(this.coordinateHelper.fromPoint(e))}}discardStagedVertex(){this._stagedVertex=null}_onPointerMove(e){if(Object(a["a"])(this._snappingTask),this._manipulator.dragging||this._pointerDownStates.has(e.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)return;const t=Object(u["e"])(e.x,e.y),i=this._closeOnClickVertexIndex(t);if(Object(a["k"])(i)){this.discardStagedVertex();const e={componentIndex:0,vertexIndex:i,coordinates:this.coordinateHelper.toArray(this._activeComponent.vertices[i].pos)};this.emit("cursor-update",{updated:null,vertices:[e],operation:"apply",type:"vertex-update"})}else{const i=this._screenToMap(t);if(this._manipulator.cursor=Object(a["k"])(i)?"crosshair":null,Object(a["k"])(i))if(Object(a["k"])(this._snappingManager)){const t=this._snappingManager,n=new v["a"]({geometry:this._editGeometry,elevationInfo:this.elevationInfo,pointer:e.pointerType,visualizer:new b["a"]});this.stagedVertex=t.update(i,n),this._snappingTask=Object(s["h"])(async e=>{const r=await this._frameTask.schedule(()=>t.snap(i,n,e),e);r.valid&&await this._frameTask.schedule(()=>{this.stagedVertex=r.apply()},e)})}else this.stagedVertex=i}e.stopPropagation()}_onHold(e){Object(a["a"])(this._snappingTask),"click"===this.drawingMode&&"touch"===e.pointerType&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation()}_screenToMapDragEventStep(){let e=null;return t=>{if("start"===t.action&&(e=this._screenToMap(t.screenStart)),Object(a["j"])(e))return null;const i=this._screenToMap(t.screenEnd);return Object(a["k"])(i)?{...t,mapStart:e,mapEnd:i}:null}}_screenToMap(e){return this._getDrawSurface().screenToMap(e)}_mapToScreen(e){return this._getDrawSurface().mapToScreen(e)}_getDrawSurface(){let e=null;if(this.coordinateHelper.hasZ){let t=this._defaultZ,i=!1;Object(a["k"])(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(i=!0),Object(a["k"])(this.snapToSceneEnabled)&&(i=this.snapToSceneEnabled),Object(a["k"])(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(i=!1);const n=this._activeComponent.vertices.length;("segment"===this.geometryType||"polygon"===this.geometryType)&&n>0&&(t=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),i=!1),i?e=this._snappingDrawSurface:(this._elevationDrawSurface.defaultZ=t,e=this._elevationDrawSurface)}else this._elevationDrawSurface.defaultZ=null,e=this._elevationDrawSurface;return e}_vertexWithinPointerDistance(e,t){const i=25,n=this._mapToScreen(e);return!!Object(a["k"])(n)&&S(n,t,i)}_closeOnClickVertexIndex(e){const t=this._activeComponent;if("polygon"===this.geometryType&&t.vertices.length>2){if(this._vertexWithinPointerDistance(this.coordinateHelper.toPoint(t.vertices[0].pos,O),e))return 0;if(this._vertexWithinPointerDistance(this.coordinateHelper.toPoint(t.vertices[t.vertices.length-1].pos,O),e))return t.vertices.length-1}return null}};function S(e,t,i){const n=e.x-t.x,r=e.y-t.y;return n*n+r*r<=i}T=Object(n["a"])([Object(o["a"])("esri.views.3d.interactive.editingTools.draw3D.DrawOperation")],T);const O=new l["a"]({x:0,y:0,z:0})},"647b":function(e,t,i){"use strict";i.d(t,"a",(function(){return Z}));var n=i("b2b2"),r=i("0b2d"),a=i("e431"),o=i("d0ac"),s=i("f53a"),l=i("a997"),c=i("38a4"),u=i("02f1"),h=i("0fc4"),d=i("7577"),p=i("1153"),f=i("d5f7"),m=i("7c51"),g=i("a4ee"),v=i("d791"),y=i("afe1"),_=i("c3a4"),b=i("ca98"),x=i("da35"),w=i("8e374"),T=i("189c"),S=i("56d6");class O extends b["a"]{initializeProgram(e){const t=O.shader.get(),i=this.configuration,n=t.build(i);return new w["a"](e.rctx,n.generateSource("vertex"),n.generateSource("fragment"),O.attributeLocations)}bind(e,t,i){this.program.setUniform3fv("innerColor",e.innerColor),this.program.setUniform1f("innerWidth",e.innerWidth*i.pixelRatio),this.program.setUniform3fv("glowColor",e.glowColor),this.program.setUniform1f("glowWidth",e.glowWidth*i.pixelRatio),this.program.setUniform1f("glowFalloff",e.glowFalloff),this.program.setUniform1f("globalAlpha",e.globalAlpha),this.program.setUniform1f("perScreenPixelRatio",i.perScreenPixelRatio),this.program.setUniform2f("pixelToNDC",2/i.fullWidth,2/i.fullHeight),this.program.setUniformMatrix4fv("uProjectionMatrix",i.projectionMatrix),Object(v["r"])(k,i.viewMatrix,t),this.program.setUniformMatrix4fv("uModelViewMatrix",k),this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=e.globalAlphaContrastBoost?e.globalAlphaContrastBoost:1)}initializePipeline(){return Object(T["d"])({blending:Object(T["f"])(1,771),colorWrite:T["b"]})}bindPipelineState(e){e.setPipelineState(this.pipeline)}}O.shader=new _["a"](S["a"],()=>i.e("chunk-2d22cca6").then(i.bind(null,"f578"))),O.attributeLocations={start:0,end:1,up:2,extrude:3};class C extends x["a"]{constructor(){super(...arguments),this.contrastControlEnabled=!1}}Object(g["a"])([Object(x["b"])()],C.prototype,"contrastControlEnabled",void 0);const k=Object(y["b"])();i("c120"),i("9f8b");var P=i("2ebb"),E=i("fc00"),A=i("7ce4"),I=i("0fa6");i("d267");class M{constructor(e){this._renderCoordsHelper=e,this._buffers=null,this._origin=Object(r["e"])(),this._dirty=!1,this._count=0,this._vao=null}set vertices(e){const t=new Float64Array(3*e.length);let i=0;for(const n of e)t[i++]=n[0],t[i++]=n[1],t[i++]=n[2];this.buffers=[t]}set buffers(e){if(this._buffers=e,this._buffers.length>0){const e=this._buffers[0],t=3*Math.floor(e.length/3/2);Object(a["v"])(this._origin,e[t+0],e[t+1],e[t+2])}else Object(a["v"])(this._origin,0,0,0);this._dirty=!0}get origin(){return this._origin}draw(e){const t=this.ensureVAO(e);Object(n["k"])(t)&&(e.bindVAO(t),e.drawArrays(4,0,this._count))}dispose(){Object(n["k"])(this._vao)&&this._vao.dispose()}ensureVAO(e){return Object(n["j"])(this._buffers)?null:(Object(n["j"])(this._vao)&&(this._vao=this.createVAO(e,this._buffers)),this.ensureVertexData(this._vao,this._buffers),this._vao)}createVAO(e,t){const i=this.createDataBuffer(t);return this._dirty=!1,new I["a"](e,O.attributeLocations,{data:Object(P["a"])(L)},{data:A["a"].createVertex(e,35044,i)})}ensureVertexData(e,t){if(!this._dirty)return;const i=this.createDataBuffer(t);e.vertexBuffers.data.setData(i),this._dirty=!1}numberOfRenderVertices(e){return 2*(e.length/3-1)*3}createDataBuffer(e){const t=e.reduce((e,t)=>e+this.numberOfRenderVertices(t),0);this._count=t;const i=L.createBuffer(t),n=this._origin;let r=0,o=0;for(const s of e){for(let e=0;e<s.length;e+=3){const t=Object(a["v"])(j,s[e+0],s[e+1],s[e+2]);0===e?o=this._renderCoordsHelper.getAltitude(t):this._renderCoordsHelper.setAltitude(o,t);const l=this._renderCoordsHelper.worldUpAtPosition(t,D),c=r+2*e,u=Object(a["i"])(j,t,n);if(e<s.length-3){i.up.setVec(c,l),i.up.setVec(c+3,l),i.up.setVec(c+5,l);for(let e=0;e<6;e++)i.start.setVec(c+e,u);i.extrude.setValues(c+0,0,-1),i.extrude.setValues(c+1,1,-1),i.extrude.setValues(c+2,1,1),i.extrude.setValues(c+3,0,-1),i.extrude.setValues(c+4,1,1),i.extrude.setValues(c+5,0,1)}if(e>0){i.up.setVec(c-2,l),i.up.setVec(c-4,l),i.up.setVec(c-5,l);for(let e=-6;e<0;e++)i.end.setVec(c+e,u)}}r+=this.numberOfRenderVertices(s)}return i.buffer}}const D=Object(r["e"])(),j=Object(r["e"])(),L=Object(E["a"])().vec3f("start").vec3f("end").vec3f("up").vec2f("extrude");var R=i("fa1e");class N extends b["a"]{initializeProgram(e){const t=N.shader.get(),i=this.configuration,n=t.build(i);return new w["a"](e.rctx,n.generateSource("vertex"),n.generateSource("fragment"),R["a"])}bind(e,t){this.program.setUniform3fv("innerColor",e.innerColor),this.program.setUniform1f("innerWidth",e.innerWidth*t.pixelRatio),this.program.setUniform3fv("glowColor",e.glowColor),this.program.setUniform1f("glowWidth",e.glowWidth*t.pixelRatio),this.program.setUniform1f("glowFalloff",e.glowFalloff),this.program.setUniform1f("globalAlpha",e.globalAlpha),this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=e.globalAlphaContrastBoost?e.globalAlphaContrastBoost:1);const i=null!=e.angleCutoff?e.angleCutoff:l["c"];this.program.setUniform2f("angleCutoff",Math.cos(i),Math.cos(Math.max(0,i-Object(c["d"])(2)))),this.configuration.intersectsLineEnabled&&this.program.setUniform1f("perScreenPixelRatio",t.perScreenPixelRatio)}initializePipeline(){return Object(T["d"])({blending:Object(T["f"])(1,771),colorWrite:T["b"]})}}N.shader=new _["a"](l["a"],()=>i.e("chunk-2d2248f1").then(i.bind(null,"e13b")));class z extends x["a"]{constructor(){super(...arguments),this.heightManifoldEnabled=!1,this.pointDistanceEnabled=!1,this.lineVerticalPlaneEnabled=!1,this.intersectsLineEnabled=!1,this.contrastControlEnabled=!1}}Object(g["a"])([Object(x["b"])()],z.prototype,"heightManifoldEnabled",void 0),Object(g["a"])([Object(x["b"])()],z.prototype,"pointDistanceEnabled",void 0),Object(g["a"])([Object(x["b"])()],z.prototype,"lineVerticalPlaneEnabled",void 0),Object(g["a"])([Object(x["b"])()],z.prototype,"intersectsLineEnabled",void 0),Object(g["a"])([Object(x["b"])()],z.prototype,"contrastControlEnabled",void 0);const B=Object(r["e"])(),V=Object(h["c"])(),F={glowColor:[1,.5,0],glowWidth:8,glowFalloff:8,innerColor:[1,1,1],innerWidth:1,globalAlpha:.75,angleCutoff:Object(c["d"])(6),globalAlphaContrastBoost:2};function U(e,t,i,n){const r=B,s=V;Object(a["l"])(r,t,n),Object(a["j"])(s,i),s[3]=0,Object(d["m"])(s,s,n),o["e"].fromPositionAndNormal(r,s,e)}class G{constructor(e,t={},i={contrastControlEnabled:!1}){this._renderCoordsHelper=e,this._config=i,this._technique=null,this._projInfo=Object(h["c"])(),this._zScale=Object(u["a"])(),this._heightManifoldEnabled=!1,this._heightManifoldTarget=Object(r["e"])(),this._pointDistanceEnabled=!1,this._pointDistanceOrigin=Object(r["e"])(),this._pointDistanceTarget=Object(r["e"])(),this._lineVerticalPlaneEnabled=!1,this._lineVerticalPlaneSegment=o["d"].create(),this._intersectsLineEnabled=!1,this._intersectsLineSegment=o["d"].create(),this._intersectsLineRadius=3,this._intersectsLineInfinite=!1,this._pathVerticalPlaneEnabled=!1,this._pathVerticalPlaneData=null,this._pathTechnique=null,this.canRender=!0,this._tempNormal=Object(r["e"])(),this._tempDir=Object(r["e"])(),this._tempUp=Object(r["e"])(),this._tempVec3A=Object(r["e"])(),this._tempVec3B=Object(r["e"])(),this._tempVec4=Object(h["c"])(),this._tempPlane=o["e"].create(),this._tempSphere=o["g"].create(),this._params=Object(m["c"])(t,F)}get renderSlots(){return[this._config.contrastControlEnabled?17:16]}get needsLinearDepth(){return!0}get heightManifoldEnabled(){return this._heightManifoldEnabled}set heightManifoldEnabled(e){this._heightManifoldEnabled!==e&&(this._heightManifoldEnabled=e,this._requestRender())}get heightManifoldTarget(){return this._heightManifoldTarget}set heightManifoldTarget(e){Object(a["j"])(this._heightManifoldTarget,e),this._requestRender()}get pointDistanceEnabled(){return this._pointDistanceEnabled}set pointDistanceEnabled(e){e!==this._pointDistanceEnabled&&(this._pointDistanceEnabled=e,this._requestRender())}get pointDistanceTarget(){return this._pointDistanceTarget}set pointDistanceTarget(e){Object(a["j"])(this._pointDistanceTarget,e),this._requestRender()}get pointDistanceOrigin(){return this._pointDistanceOrigin}set pointDistanceOrigin(e){Object(a["j"])(this._pointDistanceOrigin,e),this._requestRender()}get lineVerticalPlaneEnabled(){return this._lineVerticalPlaneEnabled}set lineVerticalPlaneEnabled(e){e!==this._lineVerticalPlaneEnabled&&(this._lineVerticalPlaneEnabled=e,this._requestRender())}get lineVerticalPlaneSegment(){return this._lineVerticalPlaneSegment}set lineVerticalPlaneSegment(e){o["d"].copy(e,this._lineVerticalPlaneSegment),this._requestRender()}get intersectsLineEnabled(){return this._intersectsLineEnabled}set intersectsLineEnabled(e){e!==this._intersectsLineEnabled&&(this._intersectsLineEnabled=e,this._requestRender())}get intersectsLineSegment(){return this._intersectsLineSegment}set intersectsLineSegment(e){o["d"].copy(e,this._intersectsLineSegment),this._requestRender()}get intersectsLineRadius(){return this._intersectsLineRadius}set intersectsLineRadius(e){e!==this._intersectsLineRadius&&(this._intersectsLineRadius=e,this._requestRender())}get intersectsLineInfinite(){return this._intersectsLineInfinite}set intersectsLineInfinite(e){e!==this._intersectsLineInfinite&&(this._intersectsLineInfinite=e,this._requestRender())}get pathVerticalPlaneEnabled(){return this._pathVerticalPlaneEnabled}set pathVerticalPlaneEnabled(e){e!==this._pathVerticalPlaneEnabled&&(this._pathVerticalPlaneEnabled=e,Object(n["k"])(this._pathVerticalPlaneData)&&this._requestRender())}set pathVerticalPlaneVertices(e){Object(n["j"])(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new M(this._renderCoordsHelper)),this._pathVerticalPlaneData.vertices=e,this.pathVerticalPlaneEnabled&&this._requestRender()}set pathVerticalPlaneBuffers(e){Object(n["j"])(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new M(this._renderCoordsHelper)),this._pathVerticalPlaneData.buffers=e,this.pathVerticalPlaneEnabled&&this._requestRender()}setParameterValues(e){Object(m["f"])(this._params,e)&&this._requestRender()}initializeRenderContext(e){this._context=e;const t=e.renderContext.rctx;this._quadVAO=Object(f["b"])(t),this._techniqueRepository=e.shaderTechniqueRep,this._techniqueConfig=new z,this._pathTechniqueConfig=new C}uninitializeRenderContext(){this._quadVAO=Object(n["f"])(this._quadVAO),this._techniqueRepository.release(this._technique),this._technique=null,this._pathVerticalPlaneData=Object(n["f"])(this._pathVerticalPlaneData),this._techniqueRepository.release(this._pathTechnique),this._pathTechnique=null}render(e){const t=this.heightManifoldEnabled||this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled,i=this.pathVerticalPlaneEnabled;if(!t&&!i)return!0;const n=e.camera;return Object(p["f"])(n.projectionMatrix,n.fullWidth,n.fullHeight,this._projInfo,this._zScale),t&&this.renderUnified(e),i&&this.renderPath(e),!0}renderUnified(e){const t=e.rctx,i=this._selectTechnique(),n=i.program;t.bindProgram(n),i.bindPipelineState(t),this.bindGlobalUniforms(e,n),this.bindHeightManifoldUniforms(e,n),this.bindPointDistanceUniforms(e,n),this.bindLineVerticalPlaneUniforms(e,n),this.bindIntersectsLineUniforms(e,n),i.bind(this._params,e.camera),t.bindVAO(this._quadVAO),t.drawArrays(5,0,4)}renderPath(e){if(Object(n["j"])(this._pathVerticalPlaneData))return;this._pathTechniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled,this._pathTechnique=this._techniqueRepository.acquireAndReleaseExisting(O,this._pathTechniqueConfig,this._pathTechnique);const t=e.rctx,i=this._pathTechnique,r=i.program;t.bindProgram(r),i.bindPipelineState(t),this.bindGlobalUniforms(e,r),i.bind(this._params,this._pathVerticalPlaneData.origin,e.camera),this._pathVerticalPlaneData.draw(e.rctx)}bindHeightManifoldUniforms(e,t){if(!this.heightManifoldEnabled)return;const i=this._tempVec3A,n=this._tempPlane;this._renderCoordsHelper.worldUpAtPosition(this._heightManifoldTarget,i),U(n,this._heightManifoldTarget,i,e.camera.viewMatrix),t.setUniform4fv("heightPlane",n)}bindPointDistanceUniforms(e,t){if(!this._pointDistanceEnabled)return;const i=e.camera,n=this._tempSphere;Object(a["j"])(n,this._pointDistanceOrigin),Object(a["l"])(n,n,i.viewMatrix),n[3]=Object(a["n"])(this._pointDistanceOrigin,this._pointDistanceTarget),t.setUniform4f("pointDistanceSphere",n[0],n[1],n[2],n[3])}bindLineVerticalPlaneUniforms(e,t){if(!this._lineVerticalPlaneEnabled)return;const i=this._renderCoordsHelper,n=e.camera,r=this._tempPlane,s=this._tempVec3A,l=this._tempUp,c=this._tempDir,u=this._tempNormal;o["d"].pointAt(this._lineVerticalPlaneSegment,.5,s),i.worldUpAtPosition(s,l),Object(a["q"])(c,this._lineVerticalPlaneSegment.vector),Object(a["f"])(u,l,c),Object(a["q"])(u,u),U(r,this._lineVerticalPlaneSegment.origin,u,n.viewMatrix),t.setUniform4fv("lineVerticalPlane",r);const h=this._tempVec3A;Object(a["j"])(h,this._lineVerticalPlaneSegment.origin),i.setAltitude(0,h),Object(a["l"])(h,h,n.viewMatrix),t.setUniform3fv("lineVerticalStart",h);const d=this._tempVec3B;Object(a["e"])(d,this._lineVerticalPlaneSegment.origin,this._lineVerticalPlaneSegment.vector),i.setAltitude(0,d),Object(a["l"])(d,d,n.viewMatrix),t.setUniform3fv("lineVerticalEnd",d)}bindIntersectsLineUniforms(e,t){if(!this._intersectsLineEnabled)return;const i=W,n=q;if(this._intersectsLineInfinite){const t=e.camera;if(o["b"].fromRay(o["f"].wrap(this._intersectsLineSegment.origin,this._intersectsLineSegment.vector),H),H.c0=-Number.MAX_VALUE,!o["c"].intersectClipRay(t.frustum,H))return;o["b"].getStart(H,i),o["b"].getEnd(H,n)}else Object(a["j"])(i,this._intersectsLineSegment.origin),Object(a["e"])(n,this._intersectsLineSegment.origin,this._intersectsLineSegment.vector);const r=this._tempVec3A;Object(a["l"])(r,i,e.camera.viewMatrix),t.setUniform3fv("intersectsLineStart",r);const s=this._tempVec4;Object(a["j"])(s,this._intersectsLineSegment.vector),this._tempVec4[3]=0,Object(d["m"])(this._tempVec4,this._tempVec4,e.camera.viewMatrix),Object(a["l"])(n,n,e.camera.viewMatrix),t.setUniform3fv("intersectsLineEnd",n),Object(a["q"])(s,s),t.setUniform3f("intersectsLineDirection",s[0],s[1],s[2]),t.setUniform1f("intersectsLineRadius",this._intersectsLineRadius)}bindGlobalUniforms(e,t){const i=e.camera;t.setUniform4fv("projInfo",this._projInfo),t.setUniform2fv("zScale",this._zScale),t.setUniform2f("nearFar",i.near,i.far),this._heightManifoldEnabled?t.setUniform1f("maxPixelDistance",2*i.computeScreenPixelSizeAt(this._heightManifoldTarget)):this._pointDistanceEnabled?t.setUniform1f("maxPixelDistance",2*i.computeScreenPixelSizeAt(this._pointDistanceTarget)):this._lineVerticalPlaneEnabled&&t.setUniform1f("maxPixelDistance",2*i.computeScreenPixelSizeAt(this._lineVerticalPlaneSegment.origin)),t.setUniform1i("depthMap",0),e.rctx.bindTexture(e.offscreenRenderingHelper.linearDepthTexture,0),t.setUniform1i("frameColor",1),e.rctx.bindTexture(e.offscreenRenderingHelper.mainColorTexture,1)}_requestRender(){this._context&&this._context.requestRender()}_selectTechnique(){return this._techniqueConfig.heightManifoldEnabled=this.heightManifoldEnabled,this._techniqueConfig.lineVerticalPlaneEnabled=this.lineVerticalPlaneEnabled,this._techniqueConfig.pointDistanceEnabled=this.pointDistanceEnabled,this._techniqueConfig.intersectsLineEnabled=this.intersectsLineEnabled,this._techniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled,this._technique=this._techniqueRepository.acquireAndReleaseExisting(N,this._techniqueConfig,this._technique),this._technique}}const H=o["b"].create(),W=Object(r["e"])(),q=Object(r["e"])();class Z extends s["a"]{constructor(e){super(e.view),this._angleCutoff=l["c"],this._style={},this._heightManifoldTarget=Object(r["e"])(),this._heightManifoldEnabled=!1,this._intersectsLine=o["d"].create(),this._intersectsLineEnabled=!1,this._intersectsLineInfinite=!1,this._lineVerticalPlaneSegment=null,this._pathVerticalPlaneBuffers=null,this._pointDistanceLine=null,this.applyProps(e)}get testData(){return this.renderer}createResources(){this.ensureRenderer()}destroyResources(){this.disposeRenderer()}updateVisibility(){this.syncHeightManifold(),this.syncIntersectsLine(),this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance()}get angleCutoff(){return this._angleCutoff}set angleCutoff(e){this._angleCutoff!==e&&(this._angleCutoff=e,this.syncAngleCutoff())}get style(){return this._style}set style(e){this._style=e,this.syncStyle()}get heightManifoldTarget(){return this._heightManifoldEnabled?this._heightManifoldTarget:null}set heightManifoldTarget(e){Object(n["k"])(e)?(Object(a["j"])(this._heightManifoldTarget,e),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1,this.syncRenderer(),this.syncHeightManifold()}set intersectsWorldUpAtLocation(e){if(Object(n["j"])(e))return void(this.intersectsLine=null);const t=this.view.renderCoordsHelper.worldUpAtPosition(e,Y);this.intersectsLine=o["d"].fromValues(e,t),this.intersectsLineInfinite=!0}get intersectsLine(){return this._intersectsLineEnabled?this._intersectsLine:null}set intersectsLine(e){Object(n["k"])(e)?(o["d"].copy(e,this._intersectsLine),this._intersectsLineEnabled=!0):this._intersectsLineEnabled=!1,this.syncIntersectsLine(),this.syncRenderer()}get intersectsLineInfinite(){return this._intersectsLineInfinite}set intersectsLineInfinite(e){this._intersectsLineInfinite=e,this.syncIntersectsLineInfinite()}get lineVerticalPlaneSegment(){return this._lineVerticalPlaneSegment}set lineVerticalPlaneSegment(e){this._lineVerticalPlaneSegment=Object(n["k"])(e)?o["d"].copy(e):null,this.syncLineVerticalPlane(),this.syncRenderer()}get pathVerticalPlane(){return this._pathVerticalPlaneBuffers}set pathVerticalPlane(e){this._pathVerticalPlaneBuffers=e,this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance(),this.syncRenderer()}get pointDistanceLine(){return this._pointDistanceLine}set pointDistanceLine(e){this._pointDistanceLine=Object(n["k"])(e)?{origin:Object(r["d"])(e.origin),target:Object(r["d"])(e.target)}:null,this.syncPointDistance(),this.syncRenderer()}syncRenderer(){this.attached&&(this._intersectsLineEnabled||this._heightManifoldEnabled||Object(n["k"])(this._pointDistanceLine)||Object(n["k"])(this._pathVerticalPlaneBuffers))?this.ensureRenderer():this.disposeRenderer()}ensureRenderer(){Object(n["k"])(this.renderer)||(this.renderer=new G(this.view.renderCoordsHelper,void 0,{contrastControlEnabled:!0}),this.syncStyle(),this.syncHeightManifold(),this.syncIntersectsLine(),this.syncIntersectsLineInfinite(),this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance(),this.syncAngleCutoff(),this.view._stage&&this.view._stage.addRenderPlugin(this.renderer.renderSlots,this.renderer))}syncStyle(){Object(n["j"])(this.renderer)||(this.renderer.setParameterValues(this._style),null!=this._style.intersectsLineRadius&&(this.renderer.intersectsLineRadius=this._style.intersectsLineRadius))}syncAngleCutoff(){Object(n["j"])(this.renderer)||this.renderer.setParameterValues({angleCutoff:this._angleCutoff})}syncHeightManifold(){Object(n["j"])(this.renderer)||(this.renderer.heightManifoldEnabled=this._heightManifoldEnabled&&this.visible,this._heightManifoldEnabled&&(this.renderer.heightManifoldTarget=this._heightManifoldTarget))}syncIntersectsLine(){Object(n["j"])(this.renderer)||(this.renderer.intersectsLineEnabled=this._intersectsLineEnabled&&this.visible,this._intersectsLineEnabled&&(this.renderer.intersectsLineSegment=this._intersectsLine))}syncIntersectsLineInfinite(){Object(n["j"])(this.renderer)||(this.renderer.intersectsLineInfinite=this._intersectsLineInfinite)}syncPathVerticalPlane(){Object(n["j"])(this.renderer)||(this.renderer.pathVerticalPlaneEnabled=Object(n["k"])(this._pathVerticalPlaneBuffers)&&this.visible,Object(n["k"])(this._pathVerticalPlaneBuffers)&&(this.renderer.pathVerticalPlaneBuffers=this._pathVerticalPlaneBuffers))}syncLineVerticalPlane(){Object(n["j"])(this.renderer)||(this.renderer.lineVerticalPlaneEnabled=Object(n["k"])(this._lineVerticalPlaneSegment)&&this.visible,Object(n["k"])(this._lineVerticalPlaneSegment)&&(this.renderer.lineVerticalPlaneSegment=this._lineVerticalPlaneSegment))}syncPointDistance(){Object(n["j"])(this.renderer)||(this.renderer.pointDistanceEnabled=Object(n["k"])(this._pointDistanceLine)&&this.visible,Object(n["k"])(this._pointDistanceLine)&&(this.renderer.pointDistanceOrigin=this._pointDistanceLine.origin,this.renderer.pointDistanceTarget=this._pointDistanceLine.target))}disposeRenderer(){Object(n["k"])(this.renderer)&&this.view._stage&&(this.view._stage.removeRenderPlugin(this.renderer),this.renderer=null)}}const Y=Object(r["e"])()},6569:function(e,t,i){},6593:function(e,t,i){},"65a4":function(e,t,i){},"65a7":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("c649"),r=i("e753"),a=i("e6b53"),o=i("d232"),s=i("b63c"),l=i("5715");class c{draw(e,t){const i=this.getUniqueHints(e),c=[];for(const n of i)n instanceof r["a"]&&c.push(this.visualizeIntersectionPoint(n,t)),n instanceof a["a"]&&c.push(this.visualizeLine(n,t)),n instanceof o["a"]&&c.push(this.visualizeParallelSign(n,t)),n instanceof l["a"]&&c.push(this.visualizeRightAngleQuad(n,t)),n instanceof s["a"]&&c.push(this.visualizePoint(n,t));return Object(n["b"])(c)}getUniqueHints(e){const t=[];for(const i of e){let e=!0;for(const n of t)if(i.equals(n)){e=!1;break}e&&t.push(i)}return t}}},"65ed":function(e,t,i){var n=i("22d1"),r=i("84ec"),a=r.buildTransformer,o="___zrEVENTSAVED",s=[];function l(e,t,i,n,r){return c(s,t,n,r,!0)&&c(e,i,s[0],s[1])}function c(e,t,i,r,a){if(t.getBoundingClientRect&&n.domSupported&&!d(t)){var s=t[o]||(t[o]={}),l=u(t,s),c=h(l,s,a);if(c)return c(e,i,r),!0}return!1}function u(e,t){var i=t.markers;if(i)return i;i=t.markers=[];for(var n=["left","right"],r=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=o.style,l=a%2,c=(a>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[l]+":0",r[c]+":0",n[1-l]+":auto",r[1-c]+":auto",""].join("!important;"),e.appendChild(o),i.push(o)}return i}function h(e,t,i){for(var n=i?"invTrans":"trans",r=t[n],o=t.srcCoords,s=!0,l=[],c=[],u=0;u<4;u++){var h=e[u].getBoundingClientRect(),d=2*u,p=h.left,f=h.top;l.push(p,f),s=s&&o&&p===o[d]&&f===o[d+1],c.push(e[u].offsetLeft,e[u].offsetTop)}return s&&r?r:(t.srcCoords=l,t[n]=i?a(c,l):a(l,c))}function d(e){return"CANVAS"===e.nodeName.toUpperCase()}t.transformLocalCoord=l,t.transformCoordWithViewport=c,t.isCanvasEl=d},6679:function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("3eba")),a=i("cd33"),o=r.extendComponentView({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(e,t,i,n){this.axisPointerClass&&a.fixValue(e),o.superApply(this,"render",arguments),s(this,e,t,i,n,!0)},updateAxisPointer:function(e,t,i,n,r){s(this,e,t,i,n,!1)},remove:function(e,t){var i=this._axisPointer;i&&i.remove(t),o.superApply(this,"remove",arguments)},dispose:function(e,t){l(this,t),o.superApply(this,"dispose",arguments)}});function s(e,t,i,n,r,s){var c=o.getAxisPointerClass(e.axisPointerClass);if(c){var u=a.getAxisPointerModel(t);u?(e._axisPointer||(e._axisPointer=new c)).render(t,u,n,s):l(e,n)}}function l(e,t,i){var n=e._axisPointer;n&&n.dispose(t,i),e._axisPointer=null}var c=[];o.registerAxisPointerClass=function(e,t){c[e]=t},o.getAxisPointerClass=function(e){return e&&c[e]};var u=o;e.exports=u},6706:function(e,t,i){"use strict";i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return u})),i.d(t,"c",(function(){return d})),i.d(t,"d",(function(){return c})),i.d(t,"e",(function(){return p})),i.d(t,"f",(function(){return l}));var n=i("4ae5"),r=i("a915"),a=i("0b2d"),o=i("3349"),s=i("f408");function l(e,t){const i=e.x-t.x,n=e.y-t.y;return i*i+n*n}function c(e,t){const i=e.length===t.length&&e[0]===t[0]&&e[1]===t[1];switch(e.length){case 2:return i;case 3:return i&&e[2]===t[2];case 4:return i&&e[3]===t[3]}return!1}function u(e,t,i,n){return"2d"===n.type?n.toScreen(t.toPoint(e,g)):(h(e,t,i,n,f),n.state.camera.projectToScreen(f,m),Object(r["e"])(m[0],m[1]))}function h(e,t,i,n,r=Object(a["e"])()){const o=t.toXYZ(e);return o[2]=Object(s["b"])(n,o,t.spatialReference,i)||0,n.renderCoordsHelper.toRenderCoords(o,t.spatialReference,r),r}function d(e,t,i,n,r,a,o){const l=i.toXYZ(e),c=i.toXYZ(t),u=Object(s["b"])(r,l,i.spatialReference,n),h=Object(s["b"])(r,c,i.spatialReference,n),d=(null==u?h:null==h?u:Math.min(u,h))||0;l[2]=d,c[2]=d,r.renderCoordsHelper.toRenderCoords(l,i.spatialReference,a),r.renderCoordsHelper.toRenderCoords(c,i.spatialReference,o)}function p(e,t){t.sort((t,i)=>Object(o["j"])(t.targetPoint,e)-Object(o["j"])(i.targetPoint,e))}const f=Object(a["e"])(),m=Object(r["f"])(),g=new n["a"]},6750:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("38862");function r(e,t){e.constants.add("stippleAlphaColorDiscard","float",.001),e.constants.add("stippleAlphaHighlightDiscard","float",.5),t.stippleEnabled?a(e,t):o(e)}function a(e,t){e.vertex.uniforms.add("stipplePatternPixelSizeInv","float"),t.stippleUVMaxEnabled&&e.varyings.add("stipplePatternUvMax","float"),e.varyings.add("stipplePatternUv","float"),e.fragment.uniforms.add("stipplePatternTexture","sampler2D"),t.stippleOffColorEnabled&&e.fragment.uniforms.add("stippleOffColor","vec4"),e.fragment.code.add(n["a"]`
  float getStippleAlpha() {
    float stipplePatternUvClamped = stipplePatternUv * gl_FragCoord.w;
    ${t.stippleUVMaxEnabled?"stipplePatternUvClamped = clamp(stipplePatternUvClamped, 0.0, stipplePatternUvMax);":""}

    return texture2D(stipplePatternTexture, vec2(mod(stipplePatternUvClamped, 1.0), 0.5)).a;
  }`),t.stippleOffColorEnabled?e.fragment.code.add(n["a"]`
    #define discardByStippleAlpha(stippleAlpha, threshold) {}
    #define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)
    `):e.fragment.code.add(n["a"]`
    #define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }
    #define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)
    `)}function o(e){e.fragment.code.add(n["a"]`
  float getStippleAlpha() { return 1.0; }

  #define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}
  #define blendStipple(color, _stippleAlpha_) color
  `)}},"675a":function(e,t){function i(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",(function(e){var i=e.getCategoriesData(),n=e.getGraph(),r=n.data,a=i.mapArray(i.getName);r.filterSelf((function(e){var i=r.getItemModel(e),n=i.getShallow("category");if(null!=n){"number"===typeof n&&(n=a[n]);for(var o=0;o<t.length;o++)if(!t[o].isSelected(n))return!1}return!0}))}),this)}e.exports=i},"67cc":function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("3eba")),a=i("6d8b"),o=i("2306"),s=i("e7aa"),l=s.setLabel,c=i("4319"),u=i("b5c7"),h=i("cbe5"),d=i("e1fc"),p=i("88b3"),f=p.throttle,m=i("b0af"),g=m.createClipPath,v=i("c2be"),y=["itemStyle","barBorderWidth"],_=[0,0];function b(e,t){var i=e.getArea&&e.getArea();if("cartesian2d"===e.type){var n=e.getBaseAxis();if("category"!==n.type||!n.onBand){var r=t.getLayout("bandWidth");n.isHorizontal()?(i.x-=r,i.width+=2*r):(i.y-=r,i.height+=2*r)}}return i}a.extend(c.prototype,u);var x=r.extendChartView({type:"bar",render:function(e,t,i){this._updateDrawMode(e);var n=e.get("coordinateSystem");return"cartesian2d"!==n&&"polar"!==n||(this._isLargeDraw?this._renderLarge(e,t,i):this._renderNormal(e,t,i)),this.group},incrementalPrepareRender:function(e,t,i){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,i,n){this._incrementalRenderLarge(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(e,t,i){var n,r=this.group,a=e.getData(),s=this._data,l=e.coordinateSystem,c=l.getBaseAxis();"cartesian2d"===l.type?n=c.isHorizontal():"polar"===l.type&&(n="angle"===c.dim);var u=e.isAnimationEnabled()?e:null,h=e.get("clip",!0),p=b(l,a);r.removeClipPath();var f=e.get("roundCap",!0),m=e.get("showBackground",!0),g=e.getModel("backgroundStyle"),v=g.get("barBorderRadius")||0,y=[],_=this._backgroundEls||[],x=function(e){var t=P[l.type](a,e),i=B(l,n,t);return i.useStyle(g.getBarItemStyle()),"cartesian2d"===l.type&&i.setShape("r",v),y[e]=i,i};a.diff(s).add((function(t){var i=a.getItemModel(t),o=P[l.type](a,t,i);if(m&&x(t),a.hasValue(t)){if(h){var s=S[l.type](p,o);if(s)return void r.remove(c)}var c=O[l.type](t,o,n,u,!1,f);a.setItemGraphicEl(t,c),r.add(c),A(c,a,t,i,o,e,n,"polar"===l.type)}})).update((function(t,i){var c=a.getItemModel(t),d=P[l.type](a,t,c);if(m){var b;0===_.length?b=x(i):(b=_[i],b.useStyle(g.getBarItemStyle()),"cartesian2d"===l.type&&b.setShape("r",v),y[t]=b);var w=P[l.type](a,t),T=z(n,w,l);o.updateProps(b,{shape:T},u,t)}var C=s.getItemGraphicEl(i);if(a.hasValue(t)){if(h){var k=S[l.type](p,d);if(k)return void r.remove(C)}C?o.updateProps(C,{shape:d},u,t):C=O[l.type](t,d,n,u,!0,f),a.setItemGraphicEl(t,C),r.add(C),A(C,a,t,c,d,e,n,"polar"===l.type)}else r.remove(C)})).remove((function(e){var t=s.getItemGraphicEl(e);"cartesian2d"===l.type?t&&C(e,u,t):t&&k(e,u,t)})).execute();var w=this._backgroundGroup||(this._backgroundGroup=new d);w.removeAll();for(var T=0;T<y.length;++T)w.add(y[T]);r.add(w),this._backgroundEls=y,this._data=a},_renderLarge:function(e,t,i){this._clear(),D(e,this.group);var n=e.get("clip",!0)?g(e.coordinateSystem,!1,e):null;n?this.group.setClipPath(n):this.group.removeClipPath()},_incrementalRenderLarge:function(e,t){this._removeBackground(),D(t,this.group,!0)},dispose:a.noop,remove:function(e){this._clear(e)},_clear:function(e){var t=this.group,i=this._data;e&&e.get("animation")&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl((function(t){"sector"===t.type?k(t.dataIndex,e,t):C(t.dataIndex,e,t)}))):t.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}}),w=Math.max,T=Math.min,S={cartesian2d:function(e,t){var i=t.width<0?-1:1,n=t.height<0?-1:1;i<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height);var r=w(t.x,e.x),a=T(t.x+t.width,e.x+e.width),o=w(t.y,e.y),s=T(t.y+t.height,e.y+e.height);t.x=r,t.y=o,t.width=a-r,t.height=s-o;var l=t.width<0||t.height<0;return i<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height),l},polar:function(e,t){var i=t.r0<=t.r?1:-1;if(i<0){var n=t.r;t.r=t.r0,t.r0=n}n=T(t.r,e.r);var r=w(t.r0,e.r0);t.r=n,t.r0=r;var a=n-r<0;if(i<0){n=t.r;t.r=t.r0,t.r0=n}return a}},O={cartesian2d:function(e,t,i,n,r){var s=new o.Rect({shape:a.extend({},t),z2:1});if(s.name="item",n){var l=s.shape,c=i?"height":"width",u={};l[c]=0,u[c]=t[c],o[r?"updateProps":"initProps"](s,{shape:u},n,e)}return s},polar:function(e,t,i,n,r,s){var l=t.startAngle<t.endAngle,c=!i&&s?v:o.Sector,u=new c({shape:a.defaults({clockwise:l},t),z2:1});if(u.name="item",n){var h=u.shape,d=i?"r":"endAngle",p={};h[d]=i?0:t.startAngle,p[d]=t[d],o[r?"updateProps":"initProps"](u,{shape:p},n,e)}return u}};function C(e,t,i){i.style.text=null,o.updateProps(i,{shape:{width:0}},t,e,(function(){i.parent&&i.parent.remove(i)}))}function k(e,t,i){i.style.text=null,o.updateProps(i,{shape:{r:i.shape.r0}},t,e,(function(){i.parent&&i.parent.remove(i)}))}var P={cartesian2d:function(e,t,i){var n=e.getItemLayout(t),r=i?I(i,n):0,a=n.width>0?1:-1,o=n.height>0?1:-1;return{x:n.x+a*r/2,y:n.y+o*r/2,width:n.width-a*r,height:n.height-o*r}},polar:function(e,t,i){var n=e.getItemLayout(t);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle}}};function E(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}function A(e,t,i,n,r,s,c,u){var h=t.getItemVisual(i,"color"),d=t.getItemVisual(i,"opacity"),p=t.getVisual("borderColor"),f=n.getModel("itemStyle"),m=n.getModel("emphasis.itemStyle").getBarItemStyle();u||e.setShape("r",f.get("barBorderRadius")||0),e.useStyle(a.defaults({stroke:E(r)?"none":p,fill:E(r)?"none":h,opacity:d},f.getBarItemStyle()));var g=n.getShallow("cursor");g&&e.attr("cursor",g);var v=c?r.height>0?"bottom":"top":r.width>0?"left":"right";u||l(e.style,m,n,h,s,i,v),E(r)&&(m.fill=m.stroke="none"),o.setHoverStyle(e,m)}function I(e,t){var i=e.get(y)||0,n=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),r=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(i,n,r)}var M=h.extend({type:"largeBar",shape:{points:[]},buildPath:function(e,t){for(var i=t.points,n=this.__startPoint,r=this.__baseDimIdx,a=0;a<i.length;a+=2)n[r]=i[a+r],e.moveTo(n[0],n[1]),e.lineTo(i[a],i[a+1])}});function D(e,t,i){var n=e.getData(),r=[],a=n.getLayout("valueAxisHorizontal")?1:0;r[1-a]=n.getLayout("valueAxisStart");var o=n.getLayout("largeDataIndices"),s=n.getLayout("barWidth"),l=e.getModel("backgroundStyle"),c=e.get("showBackground",!0);if(c){var u=n.getLayout("largeBackgroundPoints"),h=[];h[1-a]=n.getLayout("backgroundStart");var d=new M({shape:{points:u},incremental:!!i,__startPoint:h,__baseDimIdx:a,__largeDataIndices:o,__barWidth:s,silent:!0,z2:0});N(d,l,n),t.add(d)}var p=new M({shape:{points:n.getLayout("largePoints")},incremental:!!i,__startPoint:r,__baseDimIdx:a,__largeDataIndices:o,__barWidth:s});t.add(p),R(p,e,n),p.seriesIndex=e.seriesIndex,e.get("silent")||(p.on("mousedown",j),p.on("mousemove",j))}var j=f((function(e){var t=this,i=L(t,e.offsetX,e.offsetY);t.dataIndex=i>=0?i:null}),30,!1);function L(e,t,i){var n=e.__baseDimIdx,r=1-n,a=e.shape.points,o=e.__largeDataIndices,s=Math.abs(e.__barWidth/2),l=e.__startPoint[r];_[0]=t,_[1]=i;for(var c=_[n],u=_[1-n],h=c-s,d=c+s,p=0,f=a.length/2;p<f;p++){var m=2*p,g=a[m+n],v=a[m+r];if(g>=h&&g<=d&&(l<=v?u>=l&&u<=v:u>=v&&u<=l))return o[p]}return-1}function R(e,t,i){var n=i.getVisual("borderColor")||i.getVisual("color"),r=t.getModel("itemStyle").getItemStyle(["color","borderColor"]);e.useStyle(r),e.style.fill=null,e.style.stroke=n,e.style.lineWidth=i.getLayout("barWidth")}function N(e,t,i){var n=t.get("borderColor")||t.get("color"),r=t.getItemStyle(["color","borderColor"]);e.useStyle(r),e.style.fill=null,e.style.stroke=n,e.style.lineWidth=i.getLayout("barWidth")}function z(e,t,i){var n,r="polar"===i.type;return n=r?i.getArea():i.grid.getRect(),r?{cx:n.cx,cy:n.cy,r0:e?n.r0:t.r0,r:e?n.r:t.r,startAngle:e?t.startAngle:0,endAngle:e?t.endAngle:2*Math.PI}:{x:e?t.x:n.x,y:e?n.y:t.y,width:e?t.width:n.width,height:e?n.height:t.height}}function B(e,t,i){var n="polar"===e.type?o.Sector:o.Rect;return new n({shape:z(t,i,e),silent:!0,z2:0})}e.exports=x},"68ab":function(e,t,i){var n=i("4a3f"),r=n.quadraticProjectPoint;function a(e,t,i,n,a,o,s,l,c){if(0===s)return!1;var u=s;if(c>t+u&&c>n+u&&c>o+u||c<t-u&&c<n-u&&c<o-u||l>e+u&&l>i+u&&l>a+u||l<e-u&&l<i-u&&l<a-u)return!1;var h=r(e,t,i,n,a,o,l,c,null);return h<=u/2}t.containStroke=a},"68e7":function(e,t,i){},6932:function(e,t,i){var n=i("6cb7");n.registerSubTypeDefaulter("dataZoom",(function(){return"slider"}))},"697e":function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("6d8b")),a=i("18c0"),o=i("89e3"),s=i("e0d8"),l=i("3842"),c=i("9d57"),u=c.prepareLayoutBarSeries,h=c.makeColumnLayout,d=c.retrieveColumnLayout,p=i("9850");function f(e,t){var i,n,a,o=e.type,s=t.getMin(),c=t.getMax(),d=e.getExtent();"ordinal"===o?i=t.getCategories().length:(n=t.get("boundaryGap"),r.isArray(n)||(n=[n||0,n||0]),"boolean"===typeof n[0]&&(n=[0,0]),n[0]=l.parsePercent(n[0],1),n[1]=l.parsePercent(n[1],1),a=d[1]-d[0]||Math.abs(d[0])),"dataMin"===s?s=d[0]:"function"===typeof s&&(s=s({min:d[0],max:d[1]})),"dataMax"===c?c=d[1]:"function"===typeof c&&(c=c({min:d[0],max:d[1]}));var p=null!=s,f=null!=c;null==s&&(s="ordinal"===o?i?0:NaN:d[0]-n[0]*a),null==c&&(c="ordinal"===o?i?i-1:NaN:d[1]+n[1]*a),(null==s||!isFinite(s))&&(s=NaN),(null==c||!isFinite(c))&&(c=NaN),e.setBlank(r.eqNaN(s)||r.eqNaN(c)||"ordinal"===o&&!e.getOrdinalMeta().categories.length),t.getNeedCrossZero()&&(s>0&&c>0&&!p&&(s=0),s<0&&c<0&&!f&&(c=0));var g=t.ecModel;if(g&&"time"===o){var v,y=u("bar",g);if(r.each(y,(function(e){v|=e.getBaseAxis()===t.axis})),v){var _=h(y),b=m(s,c,t,_);s=b.min,c=b.max}}return{extent:[s,c],fixMin:p,fixMax:f}}function m(e,t,i,n){var a=i.axis.getExtent(),o=a[1]-a[0],s=d(n,i.axis);if(void 0===s)return{min:e,max:t};var l=1/0;r.each(s,(function(e){l=Math.min(e.offset,l)}));var c=-1/0;r.each(s,(function(e){c=Math.max(e.offset+e.width,c)})),l=Math.abs(l),c=Math.abs(c);var u=l+c,h=t-e,p=1-(l+c)/o,f=h/p-h;return t+=f*(c/u),e-=f*(l/u),{min:e,max:t}}function g(e,t){var i=f(e,t),n=i.extent,r=t.get("splitNumber");"log"===e.type&&(e.base=t.get("logBase"));var a=e.type;e.setExtent(n[0],n[1]),e.niceExtent({splitNumber:r,fixMin:i.fixMin,fixMax:i.fixMax,minInterval:"interval"===a||"time"===a?t.get("minInterval"):null,maxInterval:"interval"===a||"time"===a?t.get("maxInterval"):null});var o=t.get("interval");null!=o&&e.setInterval&&e.setInterval(o)}function v(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new a(e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),[1/0,-1/0]);case"value":return new o;default:return(s.getClass(t)||o).create(e)}}function y(e){var t=e.scale.getExtent(),i=t[0],n=t[1];return!(i>0&&n>0||i<0&&n<0)}function _(e){var t=e.getLabelModel().get("formatter"),i="category"===e.type?e.scale.getExtent()[0]:null;return"string"===typeof t?(t=function(t){return function(i){return i=e.scale.getLabel(i),t.replace("{value}",null!=i?i:"")}}(t),t):"function"===typeof t?function(n,r){return null!=i&&(r=n-i),t(b(e,n),r)}:function(t){return e.scale.getLabel(t)}}function b(e,t){return"category"===e.type?e.scale.getLabel(t):t}function x(e){var t=e.model,i=e.scale;if(t.get("axisLabel.show")&&!i.isBlank()){var n,r,a="category"===e.type,o=i.getExtent();a?r=i.count():(n=i.getTicks(),r=n.length);var s,l=e.getLabelModel(),c=_(e),u=1;r>40&&(u=Math.ceil(r/40));for(var h=0;h<r;h+=u){var d=n?n[h]:o[0]+h,p=c(d),f=l.getTextRect(p),m=w(f,l.get("rotate")||0);s?s.union(m):s=m}return s}}function w(e,t){var i=t*Math.PI/180,n=e.plain(),r=n.width,a=n.height,o=r*Math.abs(Math.cos(i))+Math.abs(a*Math.sin(i)),s=r*Math.abs(Math.sin(i))+Math.abs(a*Math.cos(i)),l=new p(n.x,n.y,o,s);return l}function T(e){var t=e.get("interval");return null==t?"auto":t}function S(e){return"category"===e.type&&0===T(e.getLabelModel())}i("216a"),i("8c2a"),t.getScaleExtent=f,t.niceScaleExtent=g,t.createScaleByModel=v,t.ifAxisCrossZero=y,t.makeLabelFormatter=_,t.getAxisRawValue=b,t.estimateLabelUnionRect=x,t.getOptionCategoryInterval=T,t.shouldShowAllLabels=S},"697e7":function(e,t,i){var n=i("de00"),r=i("22d1"),a=i("6d8b"),o=i("d2cf"),s=i("afa0"),l=i("ed21"),c=i("30a3"),u=i("cdaa"),h=!r.canvasSupported,d={canvas:l},p={},f="4.3.2";function m(e,t){var i=new b(n(),e,t);return p[i.id]=i,i}function g(e){if(e)e.dispose();else{for(var t in p)p.hasOwnProperty(t)&&p[t].dispose();p={}}return this}function v(e){return p[e]}function y(e,t){d[e]=t}function _(e){delete p[e]}var b=function(e,t,i){i=i||{},this.dom=t,this.id=e;var n=this,l=new s,p=i.renderer;if(h){if(!d.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");p="vml"}else p&&d[p]||(p="canvas");var f=new d[p](t,l,i,e);this.storage=l,this.painter=f;var m=r.node||r.worker?null:new u(f.getViewportRoot(),f.root);this.handler=new o(l,f,m,f.root),this.animation=new c({stage:{update:a.bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var g=l.delFromStorage,v=l.addToStorage;l.delFromStorage=function(e){g.call(l,e),e&&e.removeSelfFromZr(n)},l.addToStorage=function(e){v.call(l,e),e.addSelfToZr(n)}};b.prototype={constructor:b,getId:function(){return this.id},add:function(e){this.storage.addRoot(e),this._needsRefresh=!0},remove:function(e){this.storage.delRoot(e),this._needsRefresh=!0},configLayer:function(e,t){this.painter.configLayer&&this.painter.configLayer(e,t),this._needsRefresh=!0},setBackgroundColor:function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var e;this._needsRefresh&&(e=!0,this.refreshImmediately()),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately()),e&&this.trigger("rendered")},addHover:function(e,t){if(this.painter.addHover){var i=this.painter.addHover(e,t);return this.refreshHover(),i}},removeHover:function(e){this.painter.removeHover&&(this.painter.removeHover(e),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(e){e=e||{},this.painter.resize(e.width,e.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(e,t){return this.painter.pathToImage(e,t)},setCursorStyle:function(e){this.handler.setCursorStyle(e)},findHover:function(e,t){return this.handler.findHover(e,t)},on:function(e,t,i){this.handler.on(e,t,i)},off:function(e,t){this.handler.off(e,t)},trigger:function(e,t){this.handler.trigger(e,t)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,_(this.id)}},t.version=f,t.init=m,t.dispose=g,t.getInstance=v,t.registerPainter=y},"69ff":function(e,t,i){var n=i("6d8b"),r=n.each,a=n.map,o=n.isFunction,s=n.createHashMap,l=n.noop,c=i("f47d"),u=c.createTask,h=i("8918"),d=h.getUID,p=i("7e63"),f=i("843e"),m=i("e0d3"),g=m.normalizeToArray;function v(e,t,i,n){this.ecInstance=e,this.api=t,this.unfinished;i=this._dataProcessorHandlers=i.slice(),n=this._visualHandlers=n.slice();this._allHandlers=i.concat(n),this._stageTaskMap=s()}var y=v.prototype;function _(e,t,i,n,a){var o;function s(e,t){return e.setDirty&&(!e.dirtyMap||e.dirtyMap.get(t.__pipeline.id))}a=a||{},r(t,(function(t,r){if(!a.visualType||a.visualType===t.visualType){var l=e._stageTaskMap.get(t.uid),c=l.seriesTaskMap,u=l.overallTask;if(u){var h,d=u.agentStubMap;d.each((function(e){s(a,e)&&(e.dirty(),h=!0)})),h&&u.dirty(),b(u,n);var p=e.getPerformArgs(u,a.block);d.each((function(e){e.perform(p)})),o|=u.perform(p)}else c&&c.each((function(r,l){s(a,r)&&r.dirty();var c=e.getPerformArgs(r,a.block);c.skip=!t.performRawSeries&&i.isSeriesFiltered(r.context.model),b(r,n),o|=r.perform(c)}))}})),e.unfinished|=o}y.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each((function(e){var t=e.overallTask;t&&t.dirty()}))},y.getPerformArgs=function(e,t){if(e.__pipeline){var i=this._pipelineMap.get(e.__pipeline.id),n=i.context,r=!t&&i.progressiveEnabled&&(!n||n.progressiveRender)&&e.__idxInPipeline>i.blockIndex,a=r?i.step:null,o=n&&n.modDataCount,s=null!=o?Math.ceil(o/a):null;return{step:a,modBy:s,modDataCount:o}}},y.getPipeline=function(e){return this._pipelineMap.get(e)},y.updateStreamModes=function(e,t){var i=this._pipelineMap.get(e.uid),n=e.getData(),r=n.count(),a=i.progressiveEnabled&&t.incrementalPrepareRender&&r>=i.threshold,o=e.get("large")&&r>=e.get("largeThreshold"),s="mod"===e.get("progressiveChunkMode")?r:null;e.pipelineContext=i.context={progressiveRender:a,modDataCount:s,large:o}},y.restorePipelines=function(e){var t=this,i=t._pipelineMap=s();e.eachSeries((function(e){var n=e.getProgressive(),r=e.uid;i.set(r,{id:r,head:null,tail:null,threshold:e.getProgressiveThreshold(),progressiveEnabled:n&&!(e.preventIncremental&&e.preventIncremental()),blockIndex:-1,step:Math.round(n||700),count:0}),M(t,e,e.dataTask)}))},y.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.ecInstance.getModel(),i=this.api;r(this._allHandlers,(function(n){var r=e.get(n.uid)||e.set(n.uid,[]);n.reset&&x(this,n,r,t,i),n.overallReset&&w(this,n,r,t,i)}),this)},y.prepareView=function(e,t,i,n){var r=e.renderTask,a=r.context;a.model=t,a.ecModel=i,a.api=n,r.__block=!e.incrementalPrepareRender,M(this,t,r)},y.performDataProcessorTasks=function(e,t){_(this,this._dataProcessorHandlers,e,t,{block:!0})},y.performVisualTasks=function(e,t,i){_(this,this._visualHandlers,e,t,i)},y.performSeriesTasks=function(e){var t;e.eachSeries((function(e){t|=e.dataTask.perform()})),this.unfinished|=t},y.plan=function(){this._pipelineMap.each((function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)}))};var b=y.updatePayload=function(e,t){"remain"!==t&&(e.context.payload=t)};function x(e,t,i,n,r){var a=i.seriesTaskMap||(i.seriesTaskMap=s()),o=t.seriesType,l=t.getTargetSeries;function c(i){var o=i.uid,s=a.get(o)||a.set(o,u({plan:k,reset:P,count:I}));s.context={model:i,ecModel:n,api:r,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:e},M(e,i,s)}t.createOnAllSeries?n.eachRawSeries(c):o?n.eachRawSeriesByType(o,c):l&&l(n,r).each(c);var h=e._pipelineMap;a.each((function(e,t){h.get(t)||(e.dispose(),a.removeKey(t))}))}function w(e,t,i,n,a){var o=i.overallTask=i.overallTask||u({reset:T});o.context={ecModel:n,api:a,overallReset:t.overallReset,scheduler:e};var l=o.agentStubMap=o.agentStubMap||s(),c=t.seriesType,h=t.getTargetSeries,d=!0,p=t.modifyOutputEnd;function f(t){var i=t.uid,n=l.get(i);n||(n=l.set(i,u({reset:S,onDirty:C})),o.dirty()),n.context={model:t,overallProgress:d,modifyOutputEnd:p},n.agent=o,n.__block=d,M(e,t,n)}c?n.eachRawSeriesByType(c,f):h?h(n,a).each(f):(d=!1,r(n.getSeries(),f));var m=e._pipelineMap;l.each((function(e,t){m.get(t)||(e.dispose(),o.dirty(),l.removeKey(t))}))}function T(e){e.overallReset(e.ecModel,e.api,e.payload)}function S(e,t){return e.overallProgress&&O}function O(){this.agent.dirty(),this.getDownstream().dirty()}function C(){this.agent&&this.agent.dirty()}function k(e){return e.plan&&e.plan(e.model,e.ecModel,e.api,e.payload)}function P(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=g(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?a(t,(function(e,t){return A(t)})):E}var E=A(0);function A(e){return function(t,i){var n=i.data,r=i.resetDefines[e];if(r&&r.dataEach)for(var a=t.start;a<t.end;a++)r.dataEach(n,a);else r&&r.progress&&r.progress(t,n)}}function I(e){return e.data.count()}function M(e,t,i){var n=t.uid,r=e._pipelineMap.get(n);!r.head&&(r.head=i),r.tail&&r.tail.pipe(i),r.tail=i,i.__idxInPipeline=r.count++,i.__pipeline=r}function D(e){j=null;try{e(L,R)}catch(t){}return j}v.wrapStageHandler=function(e,t){return o(e)&&(e={overallReset:e,seriesType:D(e)}),e.uid=d("stageHandler"),t&&(e.visualType=t),e};var j,L={},R={};function N(e,t){for(var i in t.prototype)e[i]=l}N(L,p),N(R,f),L.eachSeriesByType=L.eachRawSeriesByType=function(e){j=e},L.eachComponent=function(e){"series"===e.mainType&&e.subType&&(j=e.subType)};var z=v;e.exports=z},"6ae9":function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return h})),i.d(t,"d",(function(){return l}));var n=i("b2b2"),r=i("1219"),a=i("521c"),o=(i("e06a"),i("ce6d")),s=i("8b1a6");class l{constructor(e){this.left=null,this.right=null,this.type="vertex",this.index=null,this.component=e}get pos(){return this._pos}set pos(e){this._pos=e,this.component.unnormalizeVertexPositions()}}class c{constructor(e,t,i){this.type="edge",this.component=e,this.left=t,this.right=i,t.right=this,i.left=this}}class u{constructor(e){this.vertices=[],this.edges=[],this.data=e}unnormalizeVertexPositions(){this.vertices.length<=1||this.data.coordinateHelper.unnormalize(this.vertices)}updateVertexIndex(e,t){if(0===this.vertices.length)return;const i=this.vertices[0];let n=null,r=e,a=t;do{n=r,n.index=a++,r=n.right?n.right.right:null}while(null!=r&&r!==i);n.left&&n!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(n),this.vertices.length-1)}getFirstVertex(){return 0===this.vertices.length?null:this.vertices[0]}getLastVertex(){return 0===this.vertices.length?null:this.vertices[this.vertices.length-1]}swapVertices(e,t){const i=this.vertices[e];this.vertices[e]=this.vertices[t],this.vertices[t]=i}iterateVertices(e){if(0===this.vertices.length)return;const t=this.vertices[0];let i=t;do{e(i,i.index),i=Object(n["k"])(i.right)?i.right.right:null}while(i!==t&&null!=i)}}class h extends o["a"]{constructor(e){super(),this.coordinateHelper=e,this.undoStack=[],this.redoStack=[],this.components=[]}apply(e,t=1){0!==t&&!Object(n["j"])(this.lastOperation)&&this.lastOperation.accumulate(e)||(e.apply(),this.undoStack.push(e),this.redoStack=[])}undo(){if(this.undoStack.length>0){const e=this.undoStack.pop();return e.undo(),this.redoStack.push(e),e}return null}get canUndo(){return this.undoStack.length>0}get lastOperation(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:null}redo(){if(this.redoStack.length>0){const e=this.redoStack.pop();return e.apply(),this.undoStack.push(e),e}return null}get canRedo(){return this.redoStack.length>0}toPoint(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.createPoint(this.components[0].vertices[0].pos)}toPolyline(){const e=[],t=this.coordinateHelper.toArray;return this.components.forEach((i,n)=>{const r=[];let a=i.vertices.find(e=>null==e.left);const o=a;do{r.push(t(a.pos)),a=a.right?a.right.right:null}while(a&&a!==o);e.push(r)}),new a["a"]({paths:e,spatialReference:this.coordinateHelper.spatialReference})}toPolygon(){const e=[],t=this.coordinateHelper.toArray;return this.components.forEach((i,r)=>{const a=[],o=i.vertices[0];let s=o;const l=s;do{a.push(t(s.pos)),s=Object(n["k"])(s.right)?s.right.right:null}while(s&&s!==l);a.push(t(o.pos)),e.push(a)}),new r["a"]({rings:e,spatialReference:this.coordinateHelper.spatialReference})}static fromGeometry(e,t){const i=Object(s["a"])(e.hasZ,e.hasM,e.spatialReference,t),n=new h(i);switch(e.type){case"polygon":{const t=e.rings;for(let e=0;e<t.length;++e){const r=t[e],a=new u(n),o=r.length-1;for(let e=0;e<o;++e){const t=i.fromArray(r[e]),n=new l(a);a.vertices.push(n),n.pos=t,n.index=e}const s=a.vertices.length-1;for(let e=0;e<s;++e){const t=a.vertices[e],i=a.vertices[e+1],n=new c(a,t,i);a.edges.push(n)}const h=new c(a,a.vertices[a.vertices.length-1],a.vertices[0]);a.edges.push(h),n.components.push(a)}}break;case"polyline":for(const t of e.paths){const e=new u(n),r=t.length;for(let n=0;n<r;++n){const r=i.fromArray(t[n]),a=new l(e);e.vertices.push(a),a.pos=r,a.index=n}const a=e.vertices.length-1;for(let t=0;t<a;++t){const i=e.vertices[t],n=e.vertices[t+1],r=new c(e,i,n);e.edges.push(r)}n.components.push(e)}break;case"point":{const t=new u(n),i=new l(t);i.index=0,i.pos=n.coordinateHelper.fromPoint(e),t.vertices.push(i),n.components.push(t)}}return n}}},"6c06":function(e,t,i){},"6cad":function(e,t,i){},"6cb7":function(e,t,i){var n=i("6d8b"),r=i("4319"),a=i("8918"),o=i("625e"),s=o.enableClassManagement,l=o.parseClassType,c=i("e0d3"),u=c.makeInner,h=i("f934"),d=i("de1c"),p=u(),f=r.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(e,t,i,n){r.call(this,e,t,i,n),this.uid=a.getUID("ec_cpt_model")},init:function(e,t,i,n){this.mergeDefaultAndTheme(e,i)},mergeDefaultAndTheme:function(e,t){var i=this.layoutMode,r=i?h.getLayoutParams(e):{},a=t.getTheme();n.merge(e,a.get(this.mainType)),n.merge(e,this.getDefaultOption()),i&&h.mergeLayoutParam(e,r,i)},mergeOption:function(e,t){n.merge(this.option,e,!0);var i=this.layoutMode;i&&h.mergeLayoutParam(this.option,e,i)},optionUpdated:function(e,t){},getDefaultOption:function(){var e=p(this);if(!e.defaultOption){var t=[],i=this.constructor;while(i){var r=i.prototype.defaultOption;r&&t.push(r),i=i.superClass}for(var a={},o=t.length-1;o>=0;o--)a=n.merge(a,t[o],!0);e.defaultOption=a}return e.defaultOption},getReferringComponents:function(e){return this.ecModel.queryComponents({mainType:e,index:this.get(e+"Index",!0),id:this.get(e+"Id",!0)})}});function m(e){var t=[];return n.each(f.getClassesByMainType(e),(function(e){t=t.concat(e.prototype.dependencies||[])})),t=n.map(t,(function(e){return l(e).main})),"dataset"!==e&&n.indexOf(t,"dataset")<=0&&t.unshift("dataset"),t}s(f,{registerWhenExtend:!0}),a.enableSubTypeDefaulter(f),a.enableTopologicalTravel(f,m),n.mixin(f,d);var g=f;e.exports=g},"6cc5":function(e,t,i){var n=i("6d8b"),r=i("401b"),a=i("1687"),o=i("9850"),s=i("0cde"),l=r.applyTransform;function c(){s.call(this)}function u(e){this.name=e,this.zoomLimit,s.call(this),this._roamTransformable=new c,this._rawTransformable=new c,this._center,this._zoom}function h(e,t,i,n){var r=i.seriesModel,a=r?r.coordinateSystem:null;return a===this?a[e](n):null}n.mixin(c,s),u.prototype={constructor:u,type:"view",dimensions:["x","y"],setBoundingRect:function(e,t,i,n){return this._rect=new o(e,t,i,n),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(e,t,i,n){this.transformTo(e,t,i,n),this._viewRect=new o(e,t,i,n)},transformTo:function(e,t,i,n){var r=this.getBoundingRect(),a=this._rawTransformable;a.transform=r.calculateTransform(new o(e,t,i,n)),a.decomposeTransform(),this._updateTransform()},setCenter:function(e){e&&(this._center=e,this._updateCenterAndZoom())},setZoom:function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},getDefaultCenter:function(){var e=this.getBoundingRect(),t=e.x+e.width/2,i=e.y+e.height/2;return[t,i]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,i=this.getDefaultCenter(),n=this.getCenter(),a=this.getZoom();n=r.applyTransform([],n,e),i=r.applyTransform([],i,e),t.origin=n,t.position=[i[0]-n[0],i[1]-n[1]],t.scale=[a,a],this._updateTransform()},_updateTransform:function(){var e=this._roamTransformable,t=this._rawTransformable;t.parent=e,e.updateTransform(),t.updateTransform(),a.copy(this.transform||(this.transform=[]),t.transform||a.create()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],a.invert(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var e=this._roamTransformable.transform,t=this._rawTransformable;return{roamTransform:e?n.slice(e):a.create(),rawScale:n.slice(t.scale),rawPosition:n.slice(t.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},dataToPoint:function(e,t,i){var n=t?this._rawTransform:this.transform;return i=i||[],n?l(i,e,n):r.copy(i,e)},pointToData:function(e){var t=this.invTransform;return t?l([],e,t):[e[0],e[1]]},convertToPixel:n.curry(h,"dataToPoint"),convertFromPixel:n.curry(h,"pointToData"),containPoint:function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])}},n.mixin(u,s);var d=u;e.exports=d},"6cc54":function(e,t,i){},"6d8b":function(e,t){var i={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},n={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},r=Object.prototype.toString,a=Array.prototype,o=a.forEach,s=a.filter,l=a.slice,c=a.map,u=a.reduce,h={};function d(e,t){"createCanvas"===e&&(y=null),h[e]=t}function p(e){if(null==e||"object"!==typeof e)return e;var t=e,a=r.call(e);if("[object Array]"===a){if(!X(e)){t=[];for(var o=0,s=e.length;o<s;o++)t[o]=p(e[o])}}else if(n[a]){if(!X(e)){var l=e.constructor;if(e.constructor.from)t=l.from(e);else{t=new l(e.length);for(o=0,s=e.length;o<s;o++)t[o]=p(e[o])}}}else if(!i[a]&&!X(e)&&!z(e))for(var c in t={},e)e.hasOwnProperty(c)&&(t[c]=p(e[c]));return t}function f(e,t,i){if(!L(t)||!L(e))return i?p(t):e;for(var n in t)if(t.hasOwnProperty(n)){var r=e[n],a=t[n];!L(a)||!L(r)||M(a)||M(r)||z(a)||z(r)||R(a)||R(r)||X(a)||X(r)?!i&&n in e||(e[n]=p(t[n],!0)):f(r,a,i)}return e}function m(e,t){for(var i=e[0],n=1,r=e.length;n<r;n++)i=f(i,e[n],t);return i}function g(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function v(e,t,i){for(var n in t)t.hasOwnProperty(n)&&(i?null!=t[n]:null==e[n])&&(e[n]=t[n]);return e}var y,_=function(){return h.createCanvas()};function b(){return y||(y=_().getContext("2d")),y}function x(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i}return-1}function w(e,t){var i=e.prototype;function n(){}for(var r in n.prototype=t.prototype,e.prototype=new n,i)i.hasOwnProperty(r)&&(e.prototype[r]=i[r]);e.prototype.constructor=e,e.superClass=t}function T(e,t,i){e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,v(e,t,i)}function S(e){if(e)return"string"!==typeof e&&"number"===typeof e.length}function O(e,t,i){if(e&&t)if(e.forEach&&e.forEach===o)e.forEach(t,i);else if(e.length===+e.length)for(var n=0,r=e.length;n<r;n++)t.call(i,e[n],n,e);else for(var a in e)e.hasOwnProperty(a)&&t.call(i,e[a],a,e)}function C(e,t,i){if(e&&t){if(e.map&&e.map===c)return e.map(t,i);for(var n=[],r=0,a=e.length;r<a;r++)n.push(t.call(i,e[r],r,e));return n}}function k(e,t,i,n){if(e&&t){if(e.reduce&&e.reduce===u)return e.reduce(t,i,n);for(var r=0,a=e.length;r<a;r++)i=t.call(n,i,e[r],r,e);return i}}function P(e,t,i){if(e&&t){if(e.filter&&e.filter===s)return e.filter(t,i);for(var n=[],r=0,a=e.length;r<a;r++)t.call(i,e[r],r,e)&&n.push(e[r]);return n}}function E(e,t,i){if(e&&t)for(var n=0,r=e.length;n<r;n++)if(t.call(i,e[n],n,e))return e[n]}function A(e,t){var i=l.call(arguments,2);return function(){return e.apply(t,i.concat(l.call(arguments)))}}function I(e){var t=l.call(arguments,1);return function(){return e.apply(this,t.concat(l.call(arguments)))}}function M(e){return"[object Array]"===r.call(e)}function D(e){return"function"===typeof e}function j(e){return"[object String]"===r.call(e)}function L(e){var t=typeof e;return"function"===t||!!e&&"object"===t}function R(e){return!!i[r.call(e)]}function N(e){return!!n[r.call(e)]}function z(e){return"object"===typeof e&&"number"===typeof e.nodeType&&"object"===typeof e.ownerDocument}function B(e){return e!==e}function V(e){for(var t=0,i=arguments.length;t<i;t++)if(null!=arguments[t])return arguments[t]}function F(e,t){return null!=e?e:t}function U(e,t,i){return null!=e?e:null!=t?t:i}function G(){return Function.call.apply(l,arguments)}function H(e){if("number"===typeof e)return[e,e,e,e];var t=e.length;return 2===t?[e[0],e[1],e[0],e[1]]:3===t?[e[0],e[1],e[2],e[1]]:e}function W(e,t){if(!e)throw new Error(t)}function q(e){return null==e?null:"function"===typeof e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}h.createCanvas=function(){return document.createElement("canvas")};var Z="__ec_primitive__";function Y(e){e[Z]=!0}function X(e){return e[Z]}function K(e){var t=M(e);this.data={};var i=this;function n(e,n){t?i.set(e,n):i.set(n,e)}e instanceof K?e.each(n):e&&O(e,n)}function $(e){return new K(e)}function Q(e,t){for(var i=new e.constructor(e.length+t.length),n=0;n<e.length;n++)i[n]=e[n];var r=e.length;for(n=0;n<t.length;n++)i[n+r]=t[n];return i}function J(){}K.prototype={constructor:K,get:function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},set:function(e,t){return this.data[e]=t},each:function(e,t){for(var i in void 0!==t&&(e=A(e,t)),this.data)this.data.hasOwnProperty(i)&&e(this.data[i],i)},removeKey:function(e){delete this.data[e]}},t.$override=d,t.clone=p,t.merge=f,t.mergeAll=m,t.extend=g,t.defaults=v,t.createCanvas=_,t.getContext=b,t.indexOf=x,t.inherits=w,t.mixin=T,t.isArrayLike=S,t.each=O,t.map=C,t.reduce=k,t.filter=P,t.find=E,t.bind=A,t.curry=I,t.isArray=M,t.isFunction=D,t.isString=j,t.isObject=L,t.isBuiltInObject=R,t.isTypedArray=N,t.isDom=z,t.eqNaN=B,t.retrieve=V,t.retrieve2=F,t.retrieve3=U,t.slice=G,t.normalizeCssArray=H,t.assert=W,t.trim=q,t.setAsPrimitive=Y,t.isPrimitive=X,t.createHashMap=$,t.concatArray=Q,t.noop=J},"6f8f":function(e,t){function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}e.exports=i,e.exports["default"]=e.exports,e.exports.__esModule=!0},7023:function(e,t,i){var n=i("6d8b"),r={updateSelectedMap:function(e){this._targetList=n.isArray(e)?e.slice():[],this._selectTargetMap=n.reduce(e||[],(function(e,t){return e.set(t.name,t),e}),n.createHashMap())},select:function(e,t){var i=null!=t?this._targetList[t]:this._selectTargetMap.get(e),n=this.get("selectedMode");"single"===n&&this._selectTargetMap.each((function(e){e.selected=!1})),i&&(i.selected=!0)},unSelect:function(e,t){var i=null!=t?this._targetList[t]:this._selectTargetMap.get(e);i&&(i.selected=!1)},toggleSelected:function(e,t){var i=null!=t?this._targetList[t]:this._selectTargetMap.get(e);if(null!=i)return this[i.selected?"unSelect":"select"](e,t),i.selected},isSelected:function(e,t){var i=null!=t?this._targetList[t]:this._selectTargetMap.get(e);return i&&i.selected}};e.exports=r},7035:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMMAAAAQCAYAAACr1csrAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFIGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjEtMDYtMDlUMjI6MjU6MzgrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIxLTA2LTA5VDIyOjI3OjM1KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTA2LTA5VDIyOjI3OjM1KzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmFlODhkOTYwLTkyMmUtNDFlMC05NTM0LTM5YzlkNDU4MTVlYiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDphZTg4ZDk2MC05MjJlLTQxZTAtOTUzNC0zOWM5ZDQ1ODE1ZWIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphZTg4ZDk2MC05MjJlLTQxZTAtOTUzNC0zOWM5ZDQ1ODE1ZWIiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmFlODhkOTYwLTkyMmUtNDFlMC05NTM0LTM5YzlkNDU4MTVlYiIgc3RFdnQ6d2hlbj0iMjAyMS0wNi0wOVQyMjoyNTozOCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+1dFrvwAAAbtJREFUaIHt2stKw0AUxvHvpFGogngr4kKpoKDVnRsR30F8BJfixjexG/EBdC++g4ggbhvBReMNBTVeoF7aSY6bRsfeEinaOp4fDJQSSmD6b5jOENZvEBNpQ7QH1oZokh3zOgLQBWAIQApA54/dkfiOVwAPAN4gQdTiAyiUh4q6OE4MBKAbwPgyLrdcR800d39C/J7MFO9vIL0EwOO1waogKHv78dqK+KwwhIllXG5LCOKvyTk0v0LuLoB+yt42/PGnBmsGPYQt11HTAOB6F4X8tfMIVZTHcoslWLEdvPlAwMQyHTpld1B6dLZvpHesBwAmM3ywyelFVDwh9CdDvRjqhnBxeuglC16JAsXEMgOtxeWVgkxDJbYSpJJd1vDEwkCjIKJiiAzBUsVAJkC0uzhBNFozSAjCGBT4bL88B1cne3fnD/knADjO0Vy9NYQeg4QgjBMVBLR/VMMYJARhrLhBWPjcUBuXEISp4gQRxjAkIQjT1QtiFe4OgO4whlS4oSYhCJPVCiLn0DzKMQDaWaP8tfMoIQiThUG4Z0f32tuJ6uMYqsgUKJYQhMko8NlWpS9f8ppnk2RnWfxH7+oyiD8XuvfoAAAAAElFTkSuQmCC"},7079:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return o}));var n,r=i("38862"),a=i("9617");function o(e,t){t.multipassGeometryEnabled&&e.vertex.include(a["b"]),e.vertex.code.add(r["a"]`
  void main(void) {
    vec4 posProjCenter;
    if (dot(position, position) > 0.0) {
      // Render single point to center of the pixel to avoid subpixel
      // filtering to affect the marker color
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);
      posProjCenter = alignToPixelCenter(posProj, viewport.zw);

      ${t.multipassGeometryEnabled?r["a"]`
        // Don't draw vertices behind geometry
        if(geometryDepthTest(.5 + .5 * posProjCenter.xy / posProjCenter.w, projectAux.posView.z)){
          posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
        }`:""}

      vec3 vpos = projectAux.posModel;
      if (rejectBySlice(vpos)) {
        // Project out of clip space
        posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
      }

    }
    else {
      // Project out of clip space
      posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
    }

    gl_Position = posProjCenter;
    gl_PointSize = 1.0;
  }
  `),e.fragment.uniforms.add("color","vec4"),e.fragment.code.add(r["a"]`
  void main() {
    gl_FragColor = color;
  }
  `)}!function(e){function t(e){e.setUniform4f("color",1,1,1,1)}e.bindUniforms=t}(n||(n={}))},"71ad":function(e,t,i){var n=i("6d8b"),r={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},a={};a.categoryAxis=n.merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},r),a.valueAxis=n.merge({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},r),a.timeAxis=n.defaults({scale:!0,min:"dataMin",max:"dataMax"},a.valueAxis),a.logAxis=n.defaults({scale:!0,logBase:10},a.valueAxis);var o=a;e.exports=o},7281:function(e,t,i){"use strict";i("ddc3")},7368:function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("6d8b")),a=i("625e"),o=a.enableClassCheck;function s(e){return"_EC_"+e}var l=function(e){this._directed=e||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData},c=l.prototype;function u(e,t){this.id=null==e?"":e,this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=null==t?-1:t}function h(e,t,i){this.node1=e,this.node2=t,this.dataIndex=null==i?-1:i}c.type="graph",c.isDirected=function(){return this._directed},c.addNode=function(e,t){e=null==e?""+t:""+e;var i=this._nodesMap;if(!i[s(e)]){var n=new u(e,t);return n.hostGraph=this,this.nodes.push(n),i[s(e)]=n,n}},c.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},c.getNodeById=function(e){return this._nodesMap[s(e)]},c.addEdge=function(e,t,i){var n=this._nodesMap,r=this._edgesMap;if("number"===typeof e&&(e=this.nodes[e]),"number"===typeof t&&(t=this.nodes[t]),u.isInstance(e)||(e=n[s(e)]),u.isInstance(t)||(t=n[s(t)]),e&&t){var a=e.id+"-"+t.id,o=new h(e,t,i);return o.hostGraph=this,this._directed&&(e.outEdges.push(o),t.inEdges.push(o)),e.edges.push(o),e!==t&&t.edges.push(o),this.edges.push(o),r[a]=o,o}},c.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},c.getEdge=function(e,t){u.isInstance(e)&&(e=e.id),u.isInstance(t)&&(t=t.id);var i=this._edgesMap;return this._directed?i[e+"-"+t]:i[e+"-"+t]||i[t+"-"+e]},c.eachNode=function(e,t){for(var i=this.nodes,n=i.length,r=0;r<n;r++)i[r].dataIndex>=0&&e.call(t,i[r],r)},c.eachEdge=function(e,t){for(var i=this.edges,n=i.length,r=0;r<n;r++)i[r].dataIndex>=0&&i[r].node1.dataIndex>=0&&i[r].node2.dataIndex>=0&&e.call(t,i[r],r)},c.breadthFirstTraverse=function(e,t,i,n){if(u.isInstance(t)||(t=this._nodesMap[s(t)]),t){for(var r="out"===i?"outEdges":"in"===i?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!e.call(n,t,null)){var o=[t];while(o.length){var l=o.shift(),c=l[r];for(a=0;a<c.length;a++){var h=c[a],d=h.node1===l?h.node2:h.node1;if(!d.__visited){if(e.call(n,d,l))return;o.push(d),d.__visited=!0}}}}}},c.update=function(){for(var e=this.data,t=this.edgeData,i=this.nodes,n=this.edges,r=0,a=i.length;r<a;r++)i[r].dataIndex=-1;for(r=0,a=e.count();r<a;r++)i[e.getRawIndex(r)].dataIndex=r;t.filterSelf((function(e){var i=n[t.getRawIndex(e)];return i.node1.dataIndex>=0&&i.node2.dataIndex>=0}));for(r=0,a=n.length;r<a;r++)n[r].dataIndex=-1;for(r=0,a=t.count();r<a;r++)n[t.getRawIndex(r)].dataIndex=r},c.clone=function(){for(var e=new l(this._directed),t=this.nodes,i=this.edges,n=0;n<t.length;n++)e.addNode(t[n].id,t[n].dataIndex);for(n=0;n<i.length;n++){var r=i[n];e.addEdge(r.node1.id,r.node2.id,r.dataIndex)}return e},u.prototype={constructor:u,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,i=t.data.getItemModel(this.dataIndex);return i.getModel(e)}}},h.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,i=t.edgeData.getItemModel(this.dataIndex);return i.getModel(e)}};var d=function(e,t){return{getValue:function(i){var n=this[e][t];return n.get(n.getDimension(i||"value"),this.dataIndex)},setVisual:function(i,n){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,i,n)},getVisual:function(i,n){return this[e][t].getItemVisual(this.dataIndex,i,n)},setLayout:function(i,n){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,i,n)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}};r.mixin(u,d("hostGraph","data")),r.mixin(h,d("hostGraph","edgeData")),l.Node=u,l.Edge=h,o(u),o(h);var p=l;e.exports=p},"73ca":function(e,t,i){var n=i("2306"),r=i("7e5b");function a(e){this._ctor=e||r,this.group=new n.Group}var o=a.prototype;function s(e,t,i,n){var r=t.getItemLayout(i);if(d(r)){var a=new e._ctor(t,i,n);t.setItemGraphicEl(i,a),e.group.add(a)}}function l(e,t,i,n,r,a){var o=t.getItemGraphicEl(n);d(i.getItemLayout(r))?(o?o.updateData(i,r,a):o=new e._ctor(i,r,a),i.setItemGraphicEl(r,o),e.group.add(o)):e.group.remove(o)}function c(e){return e.animators&&e.animators.length>0}function u(e){var t=e.hostModel;return{lineStyle:t.getModel("lineStyle").getLineStyle(),hoverLineStyle:t.getModel("emphasis.lineStyle").getLineStyle(),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label")}}function h(e){return isNaN(e[0])||isNaN(e[1])}function d(e){return!h(e[0])&&!h(e[1])}o.isPersistent=function(){return!0},o.updateData=function(e){var t=this,i=t.group,n=t._lineData;t._lineData=e,n||i.removeAll();var r=u(e);e.diff(n).add((function(i){s(t,e,i,r)})).update((function(i,a){l(t,n,e,a,i,r)})).remove((function(e){i.remove(n.getItemGraphicEl(e))})).execute()},o.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl((function(t,i){t.updateLayout(e,i)}),this)},o.incrementalPrepareUpdate=function(e){this._seriesScope=u(e),this._lineData=null,this.group.removeAll()},o.incrementalUpdate=function(e,t){function i(e){e.isGroup||c(e)||(e.incremental=e.useHoverLayer=!0)}for(var n=e.start;n<e.end;n++){var r=t.getItemLayout(n);if(d(r)){var a=new this._ctor(t,n,this._seriesScope);a.traverse(i),this.group.add(a),t.setItemGraphicEl(n,a)}}},o.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},o._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var p=a;e.exports=p},"748f":function(e,t,i){"use strict";i.d(t,"a",(function(){return G}));var n=i("b2b2"),r=i("8a44"),a=i("ce6d"),o=i("0b2d"),s=i("af40"),l=i("003f");const c=["layerObjectAdded","layerObjectRemoved","layerObjectsAdded","layerObjectsRemoved","shaderTransformationChanged","objectTransformation","visibilityChanged","occlusionChanged","highlightChanged","objectGeometryAdded","objectGeometryRemoved","vertexAttrsUpdated"];var u=i("ecd7"),h=i("e431"),d=i("d0ac"),p=i("1153");class f{constructor(e,t){this._objectToBoundingSphere=e,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new m,this._objectCount=0,t&&(void 0!==t.maximumObjectsPerNode&&(this._maximumObjectsPerNode=t.maximumObjectsPerNode),void 0!==t.maximumDepth&&(this._maximumDepth=t.maximumDepth))}get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}destroy(){this._degenerateObjects.clear(),m.clearPool(),P[0]=null,j.prune(),V.prune()}add(e,t=e.length){this._objectCount+=t,this._grow(e,t);const i=m.acquire();for(let n=0;n<t;n++){const t=e[n];this._isDegenerate(t)?this._degenerateObjects.add(t):(i.init(this._root),this._add(t,i))}m.release(i)}remove(e,t=null){this._objectCount-=e.length;const i=m.acquire();for(const r of e){const e=Object(n["k"])(t)?t:d["g"].copy(this._objectToBoundingSphere(r),L);S(e[3])?(i.init(this._root),this._remove(r,e,i)):this._degenerateObjects.delete(r)}m.release(i),this._shrink()}update(e,t){if(!S(t[3])&&this._isDegenerate(e))return;const i=E(e);this.remove(i,t),this.add(i)}forEachAlongRay(e,t,i){const n=d["f"].wrap(e,t);this._forEachNode(this._root,e=>{if(!this._intersectsNode(n,e))return!1;const t=e.node;return t.terminals.forAll(e=>{this._intersectsObject(n,e)&&i(e)}),null!==t.residents&&t.residents.forAll(e=>{this._intersectsObject(n,e)&&i(e)}),!0})}forEachAlongRayWithVerticalOffset(e,t,i,n){const r=d["f"].wrap(e,t);this._forEachNode(this._root,e=>{if(!this._intersectsNodeWithOffset(r,e,n))return!1;const t=e.node;return t.terminals.forAll(e=>{this._intersectsObjectWithOffset(r,e,n)&&i(e)}),null!==t.residents&&t.residents.forAll(e=>{this._intersectsObjectWithOffset(r,e,n)&&i(e)}),!0})}forEach(e){this._forEachNode(this._root,t=>{const i=t.node;return i.terminals.forAll(e),null!==i.residents&&i.residents.forAll(e),!0}),this._degenerateObjects.forEach(e)}forEachDegenerateObject(e){this._degenerateObjects.forEach(e)}findClosest(e,t,i,n,r){return this._findClosest(e,"front-to-back"===t?1:-1,i,n,r)}forEachInDepthRange(e,t,i,n,r,a,o,s){this._forEachInDepthRange(e,t,"front-to-back"===i?1:-1,n,r,a,o,s)}forEachNode(e){this._forEachNode(this._root,t=>e(t.node,t.bounds,t.halfSize))}_intersectsNode(e,t){return y(t.bounds,2*-t.halfSize,M),y(t.bounds,2*t.halfSize,D),Object(p["i"])(e.origin,e.direction,M,D)}_intersectsNodeWithOffset(e,t,i){return y(t.bounds,2*-t.halfSize,M),y(t.bounds,2*t.halfSize,D),i.applyToMinMax(M,D),Object(p["i"])(e.origin,e.direction,M,D)}_intersectsObject(e,t){const i=this._objectToBoundingSphere(t);return!(i[3]>0)||d["g"].intersectsRay(i,e)}_intersectsObjectWithOffset(e,t,i){const n=this._objectToBoundingSphere(t);return!(n[3]>0)||d["g"].intersectsRay(i.applyToBoundingSphere(n),e)}_forEachNode(e,t){let i=m.acquire().init(e);const n=[i];for(;0!==n.length;){if(i=n.pop(),t(i)&&!i.isLeaf())for(let e=0;e<i.node.children.length;e++)i.node.children[e]&&n.push(m.acquire().init(i).advance(e));m.release(i)}}_forEachNodeDepthOrdered(e,t,i,n=1){let r=m.acquire().init(e);const a=[r];for(x(i,n,F);0!==a.length;){if(r=a.pop(),t(r)&&!r.isLeaf())for(let e=7;e>=0;--e){const t=F[e];t>=r.node.children.length||r.node.children[t]&&a.push(m.acquire().init(r).advance(t))}m.release(r)}}_findClosest(e,t,i,n,r){let a=1/0,o=1/0,s=null;const l=w(e,t);let c=0;const u=r=>{if(++c,n&&!n(r))return;const l=this._objectToBoundingSphere(r);if(i&&_(l,i))return;const u=T(e,t,d["g"].getCenter(l)),h=u-l[3],p=u+l[3];h<a&&(a=h,o=p,s=r)};return this._forEachNodeDepthOrdered(this._root,n=>{if(null!=r&&c>=r)return!1;if(i&&_(n.bounds,i))return!1;if(Object(h["d"])(I,l,n.halfSize),Object(h["e"])(I,I,n.bounds),T(e,t,I)>o)return!1;const a=n.node;return a.terminals.forAll(e=>{u(e)}),null!==a.residents&&a.residents.forAll(e=>{u(e)}),!0},e,t),s}_forEachInDepthRange(e,t,i,n,r,a,o,s){let l=-1/0,c=1/0;const u={setRange:e=>{1===i?(l=Math.max(l,e.near),c=Math.min(c,e.far)):(l=Math.max(l,-e.far),c=Math.min(c,-e.near))}};u.setRange(n);const p=T(t,i,e),f=w(t,i),m=w(t,-1*i);let g=0;const v=e=>{if(++g,o&&!o(e))return;const n=this._objectToBoundingSphere(e),s=d["g"].getCenter(n),h=T(t,i,s)-p,f=h-n[3],m=h+n[3];f>c||m<l||a&&_(n,a)||r(e,u)};this._forEachNodeDepthOrdered(this._root,e=>{if(null!=s&&g>=s)return!1;if(a&&_(e.bounds,a))return!1;if(Object(h["d"])(I,f,e.halfSize),Object(h["e"])(I,I,e.bounds),T(t,i,I)-p>c)return!1;if(Object(h["d"])(I,m,e.halfSize),Object(h["e"])(I,I,e.bounds),T(t,i,I)-p<l)return!1;const n=e.node;return n.terminals.forAll(e=>{v(e)}),null!==n.residents&&n.residents.forAll(e=>{v(e)}),!0},t,i)}_remove(e,t,i){j.clear();const n=i.advanceTo(t,(e,t)=>{j.push(e.node),j.push(t)})?i.node.terminals:i.node.residents;if(n.removeUnordered(e),0===n.length)for(let r=j.length-2;r>=0;r-=2){const e=j.data[r],t=j.data[r+1];if(!this._purge(e,t))break}}_nodeIsEmpty(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(let t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}_purge(e,t){return t>=0&&(e.children[t]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new r["a"]({shrink:!0})),!0)}_add(e,t){t.advanceTo(this._objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}_split(e){const t=e.node.residents;e.node.residents=null;for(let i=0;i<t.length;i++){const n=m.acquire().init(e);this._add(t.getItemAt(i),n),m.release(n)}}_grow(e,t){if(0!==t&&(b(e,t,e=>this._objectToBoundingSphere(e),R),S(R[3])&&!this._fitsInsideTree(R)))if(this._nodeIsEmpty(this._root.node))d["g"].copy(R,this._root.bounds),this._root.halfSize=1.25*R[3];else{const e=this._rootBoundsForRootAsSubNode(R);this._placingRootViolatesMaxDepth(e)?this._rebuildTree(R,e):this._growRootAsSubNode(e),m.release(e)}}_rebuildTree(e,t){Object(h["j"])(N,t.bounds),N[3]=t.halfSize,b([e,N],2,e=>e,z);const i=m.acquire().init(this._root);this._root.initFrom(null,z,1.25*z[3]),this._forEachNode(i,e=>(this.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&this.add(e.node.residents.data,e.node.residents.length),!0)),m.release(i)}_placingRootViolatesMaxDepth(e){const t=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E;let i=0;return this._forEachNode(this._root,e=>(i=Math.max(i,e.depth),i+t<=this._maximumDepth)),i+t>this._maximumDepth}_rootBoundsForRootAsSubNode(e){const t=e[3],i=e;let n=-1/0;const r=this._root.bounds,a=this._root.halfSize;for(let o=0;o<3;o++){const e=r[o]-a-(i[o]-t),s=i[o]+t-(r[o]+a),l=Math.max(0,Math.ceil(e/(2*a))),c=Math.max(0,Math.ceil(s/(2*a)))+1,u=2**Math.ceil(Math.log(l+c)*Math.LOG2E);n=Math.max(n,u),B[o].min=l,B[o].max=c}for(let o=0;o<3;o++){let e=B[o].min,t=B[o].max;const i=(n-(e+t))/2;e+=Math.ceil(i),t+=Math.floor(i);const s=r[o]-a-e*a*2;A[o]=s+(t+e)*a}return A[3]=n*a*k,m.acquire().initFrom(null,A,n*a,0)}_growRootAsSubNode(e){const t=this._root.node;Object(h["j"])(R,this._root.bounds),R[3]=this._root.halfSize,this._root.init(e),e.advanceTo(R,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}_shrink(){for(;;){const e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let e=null;const t=this._root.node.children;let i=0,n=0;for(;n<t.length&&null==e;)i=n++,e=t[i];for(;n<t.length;)if(t[n++])return-1;return i}_isDegenerate(e){return!S(this._objectToBoundingSphere(e)[3])}_fitsInsideTree(e){const t=this._root.bounds,i=this._root.halfSize;return e[3]<=i&&e[0]>=t[0]-i&&e[0]<=t[0]+i&&e[1]>=t[1]-i&&e[1]<=t[1]+i&&e[2]>=t[2]-i&&e[2]<=t[2]+i}}class m{constructor(){this.bounds=d["g"].create(),this.halfSize=0,this.initFrom(null,null,0,0)}init(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}initFrom(e,t,i,r=this.depth){return this.node=Object(n["k"])(e)?e:m.createEmptyNode(),Object(n["k"])(t)&&d["g"].copy(t,this.bounds),this.halfSize=i,this.depth=r,this}advance(e){let t=this.node.children[e];t||(t=m.createEmptyNode(),this.node.children[e]=t),this.node=t,this.halfSize/=2,this.depth++;const i=O[e];return this.bounds[0]+=i[0]*this.halfSize,this.bounds[1]+=i[1]*this.halfSize,this.bounds[2]+=i[2]*this.halfSize,this.bounds[3]=this.halfSize*k,this}advanceTo(e,t,i=!1){for(;;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!i)return t&&t(this,-1),!1;this.node.residents=null}const n=this._childIndex(e);t&&t(this,n),this.advance(n)}}isLeaf(){return null!=this.node.residents}isTerminalFor(e){return e[3]>this.halfSize/2}_childIndex(e){const t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new r["a"]({shrink:!0}),residents:new r["a"]({shrink:!0})}}static acquire(){return m._pool.acquire()}static release(e){m._pool.release(e)}static clearPool(){m._pool.prune()}}function g(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function v(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function y(e,t,i){i[0]=e[0]+t,i[1]=e[1]+t,i[2]=e[2]+t}function _(e,t){return!d["c"].intersectsSphere(t,e)}function b(e,t,i,n){if(1===t){const t=i(e[0]);d["g"].copy(t,n)}else{M[0]=1/0,M[1]=1/0,M[2]=1/0,D[0]=-1/0,D[1]=-1/0,D[2]=-1/0;for(let n=0;n<t;n++){const t=i(e[n]);S(t[3])&&(g(M,t),v(D,t))}Object(h["h"])(n,M,D,.5),n[3]=Math.max(D[0]-M[0],D[1]-M[1],D[2]-M[2])/2}}function x(e,t,i){if(!V.length)for(let n=0;n<8;++n)V.push({index:0,distance:0});for(let n=0;n<8;++n){const i=O[n];V.data[n].index=n,V.data[n].distance=T(e,t,i)}V.sort((e,t)=>e.distance-t.distance);for(let n=0;n<8;++n)i[n]=V.data[n].index}function w(e,t){let i=1/0,n=null;for(let r=0;r<8;++r){const a=T(e,t,C[r]);a<i&&(i=a,n=C[r])}return n}function T(e,t,i){return t*(e[0]*i[0]+e[1]*i[1]+e[2]*i[2])}function S(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}m._pool=new u["a"](m);const O=[Object(o["g"])(-1,-1,-1),Object(o["g"])(1,-1,-1),Object(o["g"])(-1,1,-1),Object(o["g"])(1,1,-1),Object(o["g"])(-1,-1,1),Object(o["g"])(1,-1,1),Object(o["g"])(-1,1,1),Object(o["g"])(1,1,1)],C=[Object(o["g"])(-1,-1,-1),Object(o["g"])(-1,-1,1),Object(o["g"])(-1,1,-1),Object(o["g"])(-1,1,1),Object(o["g"])(1,-1,-1),Object(o["g"])(1,-1,1),Object(o["g"])(1,1,-1),Object(o["g"])(1,1,1)],k=Math.sqrt(3),P=[null];function E(e){return P[0]=e,P}const A=d["g"].create(),I=Object(o["e"])(),M=Object(o["e"])(),D=Object(o["e"])(),j=new r["a"],L=d["g"].create(),R=d["g"].create(),N=d["g"].create(),z=d["g"].create(),B=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],V=new r["a"],F=[0,0,0,0,0,0,0,0];var U=f;class G extends l["a"]{constructor(e,t=""){super(),this.apiLayerUid=t,this.type=0,this.events=new a["a"],this.isSliceable=!1,this._objects=new r["a"],this._stageHandles=new s["a"],this.apiLayerUid=t,e=e||{},this.group=e.group||"",this.isVisible=null==e.isVisible||e.isVisible,this.isPickable=null==e.isPickable||e.isPickable,this.translation=e.translation?Object(o["d"])(e.translation):Object(o["e"])()}destroy(){this.detachStage(),this._stage=null}attachStage(e){this.detachStage(),this._stage=e;for(const t of c)this._stageHandles.add(this.events.on(t,i=>e.handleEvent(t,i)))}detachStage(){this._stageHandles.removeAll(),this.invalidateSpatialQueryAccelerator()}getObjectIds(){return this._objects.map(e=>e.id)}getObjects(){return this._objects}add(e){this._objects.push(e),e.parentLayer=this,this.events.emit("layerObjectAdded",{layer:this,object:e}),Object(n["k"])(this._octree)&&this._octree.add([e])}remove(e){this._objects.removeUnordered(e)&&(e.parentLayer=null,this.events.emit("layerObjectRemoved",{layer:this,object:e}),Object(n["k"])(this._octree)&&this._octree.remove([e]))}addMany(e){this._objects.pushArray(e);for(const t of e)t.parentLayer=this;this.events.emit("layerObjectsAdded",{layer:this,objects:e}),Object(n["k"])(this._octree)&&this._octree.add(e)}removeMany(e){const t=new Array;if(this._objects.removeUnorderedMany(e,e.length,t),0!==t.length){for(const e of t)e.parentLayer=null;this.events.emit("layerObjectsRemoved",{layer:this,objects:t}),Object(n["k"])(this._octree)&&this._octree.remove(t)}}commit(){Object(n["k"])(this._stage)&&this._stage.processDirtyLayer(this.id)}notifyObjectBBChanged(e,t){Object(n["k"])(this._octree)&&this._octree.update(e,t)}getSpatialQueryAccelerator(){return Object(n["j"])(this._octree)&&this._objects.length>50&&this._createOctree(),this._octree}shaderTransformationChanged(){this.invalidateSpatialQueryAccelerator(),this.events.emit("shaderTransformationChanged",this)}invalidateSpatialQueryAccelerator(){this._octree=Object(n["e"])(this._octree)}_createOctree(){this._octree=new U(e=>e.getBounds()),this._octree.add(this._objects.data,this._objects.length)}}},"74b8":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAADe0lEQVRIiaWWbWyTVRTHf89Lu1K7bI12CxiBiKDAIEBiNEhiZkwUYpRFg0Ig8YvGiImQaCCQQIImwgc0Gr75AXAOJigwJWiCdENwBIIks3TgS1z3QkK7EVi2wra+PObcPk/Zuj5NgfOlz73n3v//nHPv+d9q/w6MUsKmA2uAemAeEAJSQB/QDbQB3wFdbhBuBAK8E1gFGKUiALI2yWagp9CpF9nwKnAZWF0GuIMha6P2b0mCD4GjQGUZwIUWAJqAjW4EbwJfuGRVrmnAbhtLmXMGUvOoZVmBvd+cInq1D02DTCaLYehomkY6nUHXc9xTa6t5/93l+P0VbrzDwHw5E9Oe+ExSzGQs2s5GicXialLAhaTw2+/38vbaF0oRSLl2yZlISDOAtxxPhTfH+dyzczl+dBvz5k6nsnIKPx/bzusrlyqfz+ctp2JyA2foNvikuv8Xu87+xjDxxE1GRlLsbfyVSDR2L+ehsHW7iSaZ12vi83kwdB1D1/B4TEzTzC8zDEOVLJks2aj1QlBXzFNbG+TlFxdTXR3A9BisW13P7FlTc6HpOtlsll27j/DO+j3E+wfdCOqE4JFinsvRGFt3NNEVi6sofzpxgfMX/1Y+j2lwMtzBLycv0XftBo1NrW4EIdc7//SSOXy9Zz1PznmUQMDHGw1LeX5ZLtlUKs0Px9rVbQoGA4ooEu0uiiMEA8UcnX/18unOQ/T0JFQG2z85SPv5K6onDNMgnrjFa688w0cbGhgbS7Pv21ZGR9OFMP26rSGTrL9/kPDpPxlOjmKaOq2/RejtHSAYfIhkckQtl77RVPPCxT/+4VRbx6RKC0HYrUxiH7y3gm1bcm0iN8ljmgwP5wg6Il2EbVDLsmg+fIahoTvjt7fqttSqFpVIHTlwbPYT05j/1GNqVFXlZ3Awedc3axqLFz2eH8e6ExxpOecMlYw7WnRQmqLl+AU+/6pFRePYgrqZBPwVRK/2snDBTM7+3pn3yXn4fV6Sd+72Qk2oiu8PbJLPZpGKCWJ3pv1K4HZyBG1cFmNjKUVYE6om9HAlkc4eBaxCzFrKJzrljKVBV7y0JC924180KfQBW3IfxCz7mZUMJmhQs/1YZB8Q/GMHvJBA7EugARi6D3Apy1r7wclbsU7+0dYniaKcbGSNrJWaS4kn2L38bRGAGns+YTeoiNAhUfeiu4H/AaULMOBrBna9AAAAAElFTkSuQmCC"},"74c1":function(e,t,i){var n,r,a;!function(i,o){r=[],n=o,a="function"===typeof n?n.apply(t,r):n,void 0===a||(e.exports=a)}(0,(function(){function e(t,i,n){function r(e,t){var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,!1,!1,t),i}var a={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3};for(var o in n||(n={}),a)this[o]="undefined"!=typeof n[o]?n[o]:a[o];this.url=t,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var s,l=this,c=!1,u=!1,h=document.createElement("div");h.addEventListener("open",(function(e){l.onopen(e)})),h.addEventListener("close",(function(e){l.onclose(e)})),h.addEventListener("connecting",(function(e){l.onconnecting(e)})),h.addEventListener("message",(function(e){l.onmessage(e)})),h.addEventListener("error",(function(e){l.onerror(e)})),this.addEventListener=h.addEventListener.bind(h),this.removeEventListener=h.removeEventListener.bind(h),this.dispatchEvent=h.dispatchEvent.bind(h),this.open=function(t){s=new WebSocket(l.url,i||[]),t||h.dispatchEvent(r("connecting")),(l.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",l.url);var n=s,a=setTimeout((function(){(l.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",l.url),u=!0,n.close(),u=!1}),l.timeoutInterval);s.onopen=function(){clearTimeout(a),(l.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onopen",l.url),l.protocol=s.protocol,l.readyState=WebSocket.OPEN,l.reconnectAttempts=0;var i=r("open");i.isReconnect=t,t=!1,h.dispatchEvent(i)},s.onclose=function(i){if(clearTimeout(a),s=null,c)l.readyState=WebSocket.CLOSED,h.dispatchEvent(r("close"));else{l.readyState=WebSocket.CONNECTING;var n=r("connecting");n.code=i.code,n.reason=i.reason,n.wasClean=i.wasClean,h.dispatchEvent(n),t||u||((l.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onclose",l.url),h.dispatchEvent(r("close")));var a=l.reconnectInterval*Math.pow(l.reconnectDecay,l.reconnectAttempts);setTimeout((function(){l.reconnectAttempts++,l.open(!0)}),a>l.maxReconnectInterval?l.maxReconnectInterval:a)}},s.onmessage=function(t){(l.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",l.url,t.data);var i=r("message");i.data=t.data,h.dispatchEvent(i)},s.onerror=function(t){(l.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onerror",l.url,t),h.dispatchEvent(r("error"))}},1==this.automaticOpen&&this.open(!1),this.send=function(t){if(s)return(l.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","send",l.url,t),s.send(t);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,t){"undefined"==typeof e&&(e=1e3),c=!0,s&&s.close(e,t)},this.refresh=function(){s&&s.close()}}return e.prototype.onopen=function(){},e.prototype.onclose=function(){},e.prototype.onconnecting=function(){},e.prototype.onmessage=function(){},e.prototype.onerror=function(){},e.debugAll=!1,e.CONNECTING=WebSocket.CONNECTING,e.OPEN=WebSocket.OPEN,e.CLOSING=WebSocket.CLOSING,e.CLOSED=WebSocket.CLOSED,e}))},"74cb":function(e,t){var i={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,i=.1,n=.4;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=n/4):t=n*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n))},elasticOut:function(e){var t,i=.1,n=.4;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=n/4):t=n*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},elasticInOut:function(e){var t,i=.1,n=.4;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=n/4):t=n*Math.asin(1/i)/(2*Math.PI),(e*=2)<1?i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-i.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?.5*i.bounceIn(2*e):.5*i.bounceOut(2*e-1)+.5}},n=i;e.exports=n},"758a":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"确诊病例详情",top:"15vh",width:"1200px",visible:e.showme,modal:!1},on:{close:e.handleClose}},[i("div",{staticClass:"patient-detail"},[i("div",{staticClass:"baseinfo"},[i("p",[e._v("地址："+e._s(e.info.address))]),i("p",[e._v("确诊人数："+e._s(e.info.num))])]),i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[i("el-table-column",{attrs:{prop:"name",label:"患者姓名",width:"80"}}),i("el-table-column",{attrs:{prop:"identity",label:"有效证件号",width:"170"}}),i("el-table-column",{attrs:{prop:"sex",label:"性别",width:"60"}}),i("el-table-column",{attrs:{prop:"birth",label:"出生日期",width:"90"}}),i("el-table-column",{attrs:{prop:"age",label:"年龄",align:"center",width:"60"}}),i("el-table-column",{attrs:{prop:"phone",label:"联系电话",width:"130"}}),i("el-table-column",{attrs:{prop:"type",label:"病例分类",width:"80"}}),i("el-table-column",{attrs:{prop:"testDate",label:"诊断时间",width:"160"}}),i("el-table-column",{attrs:{prop:"remark",label:"备注"}}),i("el-table-column",{attrs:{prop:"testDegree",align:"center",label:"临床严重程度",width:"120"}})],1)],1)])])},r=[],a=i("4795"),o=i.n(a),s=i("bc3a"),l=i.n(s),c=i("d2b8");function u(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function h(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){u(a,n,r,o,s,"next",e)}function s(e){u(a,n,r,o,s,"throw",e)}o(void 0)}))}}var d={name:"PatientDetail",components:{},props:{showme:{type:Boolean},id:{type:[String,Number]}},model:{prop:"showme",event:"toggle"},watch:{showme:{handler:function(e){1==e&&this.id&&this.getData()},immediate:!0}},data:function(){return{info:{},tableData:[]}},mounted:function(){},methods:{getData:function(){var e=this;return h(o.a.mark((function t(){var i,n,r,a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("".concat(c["b"],"/static/mock/patient-spots.json"));case 2:i=t.sent,n=i.data.data.find((function(t){return t.id==e.id})),r=n.address,a=n.num,s=n.list,e.info={address:r,num:a},e.tableData=s;case 7:case"end":return t.stop()}}),t)})))()},handleClose:function(){this.$emit("toggle",!1)}}},p=d,f=(i("0cbc"),i("2877")),m=Object(f["a"])(p,n,r,!1,null,"b6319e4c",null);t["default"]=m.exports},7630:function(e,t,i){},"76a5":function(e,t,i){var n=i("19eb"),r=i("6d8b"),a=i("e86a"),o=i("a73c"),s=i("82eb"),l=s.ContextCachedBy,c=function(e){n.call(this,e)};c.prototype={constructor:c,type:"text",brush:function(e,t){var i=this.style;this.__dirty&&o.normalizeTextStyle(i,!0),i.fill=i.stroke=i.shadowBlur=i.shadowColor=i.shadowOffsetX=i.shadowOffsetY=null;var n=i.text;null!=n&&(n+=""),o.needDrawText(n,i)?(this.setTransform(e),o.renderText(this,e,n,i,null,t),this.restoreTransform(e)):e.__attrCachedBy=l.NONE},getBoundingRect:function(){var e=this.style;if(this.__dirty&&o.normalizeTextStyle(e,!0),!this._rect){var t=e.text;null!=t?t+="":t="";var i=a.getBoundingRect(e.text+"",e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich);if(i.x+=e.x||0,i.y+=e.y||0,o.getStroke(e.textStroke,e.textStrokeWidth)){var n=e.textStrokeWidth;i.x-=n/2,i.y-=n/2,i.width+=n,i.height+=n}this._rect=i}return this._rect}},r.inherits(c,n);var u=c;e.exports=u},7779:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return d}));var n=i("9ef0");const r={main:new n["a"]([255,127,0]),selected:new n["a"]([255,255,255]),outline:new n["a"]([0,0,0,.5]),selectedOutline:new n["a"]([255,255,255]),hoverOutline:new n["a"]([255,255,255]),secondary:new n["a"]([255,255,255]),secondaryOutline:new n["a"]([100,100,100]),transparent:new n["a"]([0,0,0,0])};function a(e,t){if(t)for(const i in t)e[i]=t[i]}class o{constructor(e){this.size=8,this.hoverSize=10,this.color=r.main,this.hoverColor=r.main,this.outlineColor=r.outline,this.hoverOutlineColor=r.hoverOutline,a(this,e)}}class s{constructor(e){this.color=r.secondary,this.hoverColor=r.main,a(this,e)}}class l{constructor(e){this.color=r.transparent,this.hoverColor=r.transparent,this.outlineColor=r.main,this.hoverOutlineColor=r.main,this.stagedColor=r.transparent,this.stagedOutlineColor=r.secondary,a(this,e)}}class c{constructor(e){this.vertex=new o,this.midpoint=new o({color:r.secondary,outlineColor:r.secondaryOutline,size:6}),this.selected=new o({color:r.selected,hoverColor:r.selected,hoverOutlineColor:r.hoverOutline}),a(this,e)}}class u{constructor(e){this.center=new o({color:r.secondaryOutline}),this.fill=new l,this.line=new s,this.vertex=new o({color:r.selected,outlineColor:r.main,hoverColor:r.selected,hoverOutlineColor:r.secondaryOutline}),a(this,e)}}class h{constructor(e){this.reshapeGraphics=new c,this.transformGraphics=new u,a(this,e)}}const d=new h},7782:function(e,t,i){var n=i("3eba"),r=i("6d8b");function a(e,t){r.each(t,(function(t){t.update="updateView",n.registerAction(t,(function(i,n){var r={};return n.eachComponent({mainType:"series",subType:e,query:i},(function(e){e[t.method]&&e[t.method](i.name,i.dataIndex);var n=e.getData();n.each((function(t){var i=n.getName(t);r[i]=e.isSelected(i)||!1}))})),{name:i.name,selected:r,seriesId:i.seriesId}}))}))}e.exports=a},"78cf":function(e,t,i){},7919:function(e,t,i){var n=i("f934"),r=n.getLayoutRect,a=n.box,o=n.positionElement,s=i("eda2"),l=i("2306");function c(e,t,i){var n=t.getBoxLayoutParams(),s=t.get("padding"),l={width:i.getWidth(),height:i.getHeight()},c=r(n,l,s);a(t.get("orient"),e,t.get("itemGap"),c.width,c.height),o(e,n,l,s)}function u(e,t){var i=s.normalizeCssArray(t.get("padding")),n=t.getItemStyle(["color","opacity"]);n.fill=t.get("backgroundColor");e=new l.Rect({shape:{x:e.x-i[3],y:e.y-i[0],width:e.width+i[1]+i[3],height:e.height+i[0]+i[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1});return e}t.layout=c,t.makeBackground=u},"7a03":function(e,t,i){},"7acc":function(e,t,i){"use strict";i("dc2e")},"7b0c":function(e,t,i){var n=i("6cc5"),r=i("f934"),a=r.getLayoutRect,o=i("e263");function s(e,t,i){var n=e.getBoxLayoutParams();return n.aspect=i,a(n,{width:t.getWidth(),height:t.getHeight()})}function l(e,t){var i=[];return e.eachSeriesByType("graph",(function(e){var r=e.get("coordinateSystem");if(!r||"view"===r){var a=e.getData(),l=a.mapArray((function(e){var t=a.getItemModel(e);return[+t.get("x"),+t.get("y")]})),c=[],u=[];o.fromPoints(l,c,u),u[0]-c[0]===0&&(u[0]+=1,c[0]-=1),u[1]-c[1]===0&&(u[1]+=1,c[1]-=1);var h=(u[0]-c[0])/(u[1]-c[1]),d=s(e,t,h);isNaN(h)&&(c=[d.x,d.y],u=[d.x+d.width,d.y+d.height]);var p=u[0]-c[0],f=u[1]-c[1],m=d.width,g=d.height,v=e.coordinateSystem=new n;v.zoomLimit=e.get("scaleLimit"),v.setBoundingRect(c[0],c[1],p,f),v.setViewRect(d.x,d.y,m,g),v.setCenter(e.get("center")),v.setZoom(e.get("zoom")),i.push(v)}})),i}e.exports=l},"7bfe":function(e,t,i){e.exports=i.p+"img/head-bg1.ba7b9f6b.png"},"7c1d":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("38862");function r(e){const t=n["a"]`
    vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {
      vec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;
      vec2 pixelSz = vec2(1.0) / widthHeight;
      vec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;
      vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
      return vec4(result, clipCoord.zw);
    }
  `,i=n["a"]`

    vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {
      vec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;
      vec2 pixelSz = vec2(1.0) / widthHeight;
      vec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;
      vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
      return vec4(result, clipCoord.zw);
    }
  `;e.vertex.code.add(t),e.vertex.code.add(i),e.fragment.code.add(t),e.fragment.code.add(i)}},"7cfb":function(e,t,i){},"7d6d":function(e,t){var i={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1};function n(e,t,n){return i.hasOwnProperty(t)?n*e.dpr:n}e.exports=n},"7db2":function(e,t,i){},"7dcb":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{}},"7dcf":function(e,t,i){var n=i("b12f"),r=n.extend({type:"dataZoom",render:function(e,t,i,n){this.dataZoomModel=e,this.ecModel=t,this.api=i},getTargetCoordInfo:function(){var e=this.dataZoomModel,t=this.ecModel,i={};function n(e,t,i,n){for(var r,a=0;a<i.length;a++)if(i[a].model===e){r=i[a];break}r||i.push(r={model:e,axisModels:[],coordIndex:n}),r.axisModels.push(t)}return e.eachTargetAxis((function(e,r){var a=t.getComponent(e.axis,r);if(a){var o=a.getCoordSysModel();o&&n(o,a,i[o.mainType]||(i[o.mainType]=[]),o.componentIndex)}}),this),i}});e.exports=r},"7e5b":function(e,t,i){var n=i("6d8b"),r=i("401b"),a=i("a15a"),o=i("7f91"),s=i("2306"),l=i("3842"),c=l.round,u=["fromSymbol","toSymbol"];function h(e){return"_"+e+"Type"}function d(e,t,i){var r=t.getItemVisual(i,e);if(r&&"none"!==r){var o=t.getItemVisual(i,"color"),s=t.getItemVisual(i,e+"Size"),l=t.getItemVisual(i,e+"Rotate");n.isArray(s)||(s=[s,s]);var c=a.createSymbol(r,-s[0]/2,-s[1]/2,s[0],s[1],o);return c.__specifiedRotation=null==l||isNaN(l)?void 0:+l*Math.PI/180||0,c.name=e,c}}function p(e){var t=new o({name:"line",subPixelOptimize:!0});return f(t.shape,e),t}function f(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var i=t[2];i?(e.cpx1=i[0],e.cpy1=i[1]):(e.cpx1=NaN,e.cpy1=NaN)}function m(){var e=this,t=e.childOfName("fromSymbol"),i=e.childOfName("toSymbol"),n=e.childOfName("label");if(t||i||!n.ignore){var a=1,o=this.parent;while(o)o.scale&&(a/=o.scale[0]),o=o.parent;var s=e.childOfName("line");if(this.__dirty||s.__dirty){var l=s.shape.percent,c=s.pointAt(0),u=s.pointAt(l),h=r.sub([],u,c);if(r.normalize(h,h),t){t.attr("position",c);var d=t.__specifiedRotation;if(null==d){var p=s.tangentAt(0);t.attr("rotation",Math.PI/2-Math.atan2(p[1],p[0]))}else t.attr("rotation",d);t.attr("scale",[a*l,a*l])}if(i){i.attr("position",u);d=i.__specifiedRotation;if(null==d){p=s.tangentAt(1);i.attr("rotation",-Math.PI/2-Math.atan2(p[1],p[0]))}else i.attr("rotation",d);i.attr("scale",[a*l,a*l])}if(!n.ignore){var f,m,g,v;n.attr("position",u);var y=n.__labelDistance,_=y[0]*a,b=y[1]*a,x=l/2,w=(p=s.tangentAt(x),[p[1],-p[0]]),T=s.pointAt(x);w[1]>0&&(w[0]=-w[0],w[1]=-w[1]);var S,O=p[0]<0?-1:1;if("start"!==n.__position&&"end"!==n.__position){var C=-Math.atan2(p[1],p[0]);u[0]<c[0]&&(C=Math.PI+C),n.attr("rotation",C)}switch(n.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":S=-b,g="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":S=b,g="top";break;default:S=0,g="middle"}switch(n.__position){case"end":f=[h[0]*_+u[0],h[1]*b+u[1]],m=h[0]>.8?"left":h[0]<-.8?"right":"center",g=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":f=[-h[0]*_+c[0],-h[1]*b+c[1]],m=h[0]>.8?"right":h[0]<-.8?"left":"center",g=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":f=[_*O+c[0],c[1]+S],m=p[0]<0?"right":"left",v=[-_*O,-S];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":f=[T[0],T[1]+S],m="center",v=[0,-S];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":f=[-_*O+u[0],u[1]+S],m=p[0]>=0?"right":"left",v=[_*O,-S];break}n.attr({style:{textVerticalAlign:n.__verticalAlign||g,textAlign:n.__textAlign||m},position:f,scale:[a,a],origin:v})}}}}function g(e,t,i){s.Group.call(this),this._createLine(e,t,i)}var v=g.prototype;v.beforeUpdate=m,v._createLine=function(e,t,i){var r=e.hostModel,a=e.getItemLayout(t),o=p(a);o.shape.percent=0,s.initProps(o,{shape:{percent:1}},r,t),this.add(o);var l=new s.Text({name:"label",lineLabelOriginalOpacity:1});this.add(l),n.each(u,(function(i){var n=d(i,e,t);this.add(n),this[h(i)]=e.getItemVisual(t,i)}),this),this._updateCommonStl(e,t,i)},v.updateData=function(e,t,i){var r=e.hostModel,a=this.childOfName("line"),o=e.getItemLayout(t),l={shape:{}};f(l.shape,o),s.updateProps(a,l,r,t),n.each(u,(function(i){var n=e.getItemVisual(t,i),r=h(i);if(this[r]!==n){this.remove(this.childOfName(i));var a=d(i,e,t);this.add(a)}this[r]=n}),this),this._updateCommonStl(e,t,i)},v._updateCommonStl=function(e,t,i){var r=e.hostModel,a=this.childOfName("line"),o=i&&i.lineStyle,l=i&&i.hoverLineStyle,h=i&&i.labelModel,d=i&&i.hoverLabelModel;if(!i||e.hasItemOption){var p=e.getItemModel(t);o=p.getModel("lineStyle").getLineStyle(),l=p.getModel("emphasis.lineStyle").getLineStyle(),h=p.getModel("label"),d=p.getModel("emphasis.label")}var f=e.getItemVisual(t,"color"),m=n.retrieve3(e.getItemVisual(t,"opacity"),o.opacity,1);a.useStyle(n.defaults({strokeNoScale:!0,fill:"none",stroke:f,opacity:m},o)),a.hoverStyle=l,n.each(u,(function(e){var t=this.childOfName(e);t&&(t.setColor(f),t.setStyle({opacity:m}))}),this);var g,v,y=h.getShallow("show"),_=d.getShallow("show"),b=this.childOfName("label");if((y||_)&&(g=f||"#000",v=r.getFormattedLabel(t,"normal",e.dataType),null==v)){var x=r.getRawValue(t);v=null==x?e.getName(t):isFinite(x)?c(x):x}var w=y?v:null,T=_?n.retrieve2(r.getFormattedLabel(t,"emphasis",e.dataType),v):null,S=b.style;if(null!=w||null!=T){s.setTextStyle(b.style,h,{text:w},{autoColor:g}),b.__textAlign=S.textAlign,b.__verticalAlign=S.textVerticalAlign,b.__position=h.get("position")||"middle";var O=h.get("distance");n.isArray(O)||(O=[O,O]),b.__labelDistance=O}b.hoverStyle=null!=T?{text:T,textFill:d.getTextColor(!0),fontStyle:d.getShallow("fontStyle"),fontWeight:d.getShallow("fontWeight"),fontSize:d.getShallow("fontSize"),fontFamily:d.getShallow("fontFamily")}:{text:null},b.ignore=!y&&!_,s.setHoverStyle(this)},v.highlight=function(){this.trigger("emphasis")},v.downplay=function(){this.trigger("normal")},v.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},v.setLinePoints=function(e){var t=this.childOfName("line");f(t.shape,e),t.dirty()},n.inherits(g,s.Group);var y=g;e.exports=y},"7e63":function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("6d8b")),a=r.each,o=r.filter,s=r.map,l=r.isArray,c=r.indexOf,u=r.isObject,h=r.isString,d=r.createHashMap,p=r.assert,f=r.clone,m=r.merge,g=r.extend,v=r.mixin,y=i("e0d3"),_=i("4319"),b=i("6cb7"),x=i("8971"),w=i("e47b"),T=i("0f99"),S=T.resetSourceDefaulter,O="\0_ec_inner",C=_.extend({init:function(e,t,i,n){i=i||{},this.option=null,this._theme=new _(i),this._optionManager=n},setOption:function(e,t){p(!(O in e),"please use chart.getOption()"),this._optionManager.setOption(e,t),this.resetOption(null)},resetOption:function(e){var t=!1,i=this._optionManager;if(!e||"recreate"===e){var n=i.mountOption("recreate"===e);this.option&&"recreate"!==e?(this.restoreData(),this.mergeOption(n)):E.call(this,n),t=!0}if("timeline"!==e&&"media"!==e||this.restoreData(),!e||"recreate"===e||"timeline"===e){var r=i.getTimelineOption(this);r&&(this.mergeOption(r),t=!0)}if(!e||"recreate"===e||"media"===e){var o=i.getMediaOption(this,this._api);o.length&&a(o,(function(e){this.mergeOption(e,t=!0)}),this)}return t},mergeOption:function(e){var t=this.option,i=this._componentsMap,n=[];function r(n,r){var o=y.normalizeToArray(e[n]),s=y.mappingToExists(i.get(n),o);y.makeIdAndName(s),a(s,(function(e,t){var i=e.option;u(i)&&(e.keyInfo.mainType=n,e.keyInfo.subType=I(n,i,e.exist))}));var l=A(i,r);t[n]=[],i.set(n,[]),a(s,(function(e,r){var a=e.exist,o=e.option;if(p(u(o)||a,"Empty component definition"),o){var s=b.getClass(n,e.keyInfo.subType,!0);if(a&&a.constructor===s)a.name=e.keyInfo.name,a.mergeOption(o,this),a.optionUpdated(o,!1);else{var c=g({dependentModels:l,componentIndex:r},e.keyInfo);a=new s(o,this,this,c),g(a,c),a.init(o,this,this,c),a.optionUpdated(null,!0)}}else a.mergeOption({},this),a.optionUpdated({},!1);i.get(n)[r]=a,t[n][r]=a.option}),this),"series"===n&&M(this,i.get("series"))}S(this),a(e,(function(e,i){null!=e&&(b.hasClass(i)?i&&n.push(i):t[i]=null==t[i]?f(e):m(t[i],e,!0))})),b.topologicalTravel(n,b.getAllClassMainTypes(),r,this),this._seriesIndicesMap=d(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var e=f(this.option);return a(e,(function(t,i){if(b.hasClass(i)){t=y.normalizeToArray(t);for(var n=t.length-1;n>=0;n--)y.isIdInner(t[n])&&t.splice(n,1);e[i]=t}})),delete e[O],e},getTheme:function(){return this._theme},getComponent:function(e,t){var i=this._componentsMap.get(e);if(i)return i[t||0]},queryComponents:function(e){var t=e.mainType;if(!t)return[];var i,n=e.index,r=e.id,a=e.name,u=this._componentsMap.get(t);if(!u||!u.length)return[];if(null!=n)l(n)||(n=[n]),i=o(s(n,(function(e){return u[e]})),(function(e){return!!e}));else if(null!=r){var h=l(r);i=o(u,(function(e){return h&&c(r,e.id)>=0||!h&&e.id===r}))}else if(null!=a){var d=l(a);i=o(u,(function(e){return d&&c(a,e.name)>=0||!d&&e.name===a}))}else i=u.slice();return D(i,e)},findComponents:function(e){var t=e.query,i=e.mainType,n=a(t),r=n?this.queryComponents(n):this._componentsMap.get(i);return s(D(r,e));function a(e){var t=i+"Index",n=i+"Id",r=i+"Name";return!e||null==e[t]&&null==e[n]&&null==e[r]?null:{mainType:i,index:e[t],id:e[n],name:e[r]}}function s(t){return e.filter?o(t,e.filter):t}},eachComponent:function(e,t,i){var n=this._componentsMap;if("function"===typeof e)i=t,t=e,n.each((function(e,n){a(e,(function(e,r){t.call(i,n,e,r)}))}));else if(h(e))a(n.get(e),t,i);else if(u(e)){var r=this.findComponents(e);a(r,t,i)}},getSeriesByName:function(e){var t=this._componentsMap.get("series");return o(t,(function(t){return t.name===e}))},getSeriesByIndex:function(e){return this._componentsMap.get("series")[e]},getSeriesByType:function(e){var t=this._componentsMap.get("series");return o(t,(function(t){return t.subType===e}))},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(e,t){j(this),a(this._seriesIndices,(function(i){var n=this._componentsMap.get("series")[i];e.call(t,n,i)}),this)},eachRawSeries:function(e,t){a(this._componentsMap.get("series"),e,t)},eachSeriesByType:function(e,t,i){j(this),a(this._seriesIndices,(function(n){var r=this._componentsMap.get("series")[n];r.subType===e&&t.call(i,r,n)}),this)},eachRawSeriesByType:function(e,t,i){return a(this.getSeriesByType(e),t,i)},isSeriesFiltered:function(e){return j(this),null==this._seriesIndicesMap.get(e.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(e,t){j(this);var i=o(this._componentsMap.get("series"),e,t);M(this,i)},restoreData:function(e){var t=this._componentsMap;M(this,t.get("series"));var i=[];t.each((function(e,t){i.push(t)})),b.topologicalTravel(i,b.getAllClassMainTypes(),(function(i,n){a(t.get(i),(function(t){("series"!==i||!k(t,e))&&t.restoreData()}))}))}});function k(e,t){if(t){var i=t.seiresIndex,n=t.seriesId,r=t.seriesName;return null!=i&&e.componentIndex!==i||null!=n&&e.id!==n||null!=r&&e.name!==r}}function P(e,t){var i=e.color&&!e.colorLayer;a(t,(function(t,n){"colorLayer"===n&&i||b.hasClass(n)||("object"===typeof t?e[n]=e[n]?m(e[n],t,!1):f(t):null==e[n]&&(e[n]=t))}))}function E(e){e=e,this.option={},this.option[O]=1,this._componentsMap=d({series:[]}),this._seriesIndices,this._seriesIndicesMap,P(e,this._theme.option),m(e,x,!1),this.mergeOption(e)}function A(e,t){l(t)||(t=t?[t]:[]);var i={};return a(t,(function(t){i[t]=(e.get(t)||[]).slice()})),i}function I(e,t,i){var n=t.type?t.type:i?i.subType:b.determineSubType(e,t);return n}function M(e,t){e._seriesIndicesMap=d(e._seriesIndices=s(t,(function(e){return e.componentIndex}))||[])}function D(e,t){return t.hasOwnProperty("subType")?o(e,(function(e){return e.subType===t.subType})):e}function j(e){}v(C,w);var L=C;e.exports=L},"7f18":function(e,t,i){},"7f72":function(e,t,i){i("6932"),i("3a561"),i("7dcf"),i("a18f"),i("32a1"),i("2c17"),i("9e87")},"7f91":function(e,t,i){var n=i("2306"),r=i("401b"),a=n.Line.prototype,o=n.BezierCurve.prototype;function s(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var l=n.extendShape({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(e,t){this[s(t)?"_buildPathLine":"_buildPathCurve"](e,t)},_buildPathLine:a.buildPath,_buildPathCurve:o.buildPath,pointAt:function(e){return this[s(this.shape)?"_pointAtLine":"_pointAtCurve"](e)},_pointAtLine:a.pointAt,_pointAtCurve:o.pointAt,tangentAt:function(e){var t=this.shape,i=s(t)?[t.x2-t.x1,t.y2-t.y1]:this._tangentAtCurve(e);return r.normalize(i,i)},_tangentAtCurve:o.tangentAt});e.exports=l},"7f96":function(e,t,i){var n=i("6d8b"),r=n.isFunction;function a(e,t,i){return{seriesType:e,performRawSeries:!0,reset:function(e,n,a){var o=e.getData(),s=e.get("symbol"),l=e.get("symbolSize"),c=e.get("symbolKeepAspect"),u=e.get("symbolRotate"),h=r(s),d=r(l),p=r(u),f=h||d||p,m=!h&&s?s:t,g=d?null:l;if(o.setVisual({legendSymbol:i||m,symbol:m,symbolSize:g,symbolKeepAspect:c,symbolRotate:u}),!n.isSeriesFiltered(e))return{dataEach:o.hasItemOption||f?v:null};function v(t,i){if(f){var n=e.getRawValue(i),r=e.getDataParams(i);h&&t.setItemVisual(i,"symbol",s(n,r)),d&&t.setItemVisual(i,"symbolSize",l(n,r)),p&&t.setItemVisual(i,"symbolRotate",u(n,r))}if(t.hasItemOption){var a=t.getItemModel(i),o=a.getShallow("symbol",!0),c=a.getShallow("symbolSize",!0),m=a.getShallow("symbolRotate",!0),g=a.getShallow("symbolKeepAspect",!0);null!=o&&t.setItemVisual(i,"symbol",o),null!=c&&t.setItemVisual(i,"symbolSize",c),null!=m&&t.setItemVisual(i,"symbolRotate",m),null!=g&&t.setItemVisual(i,"symbolKeepAspect",g)}}}}}e.exports=a},"80f0":function(e,t){function i(e){return e}function n(e,t,n,r,a){this._old=e,this._new=t,this._oldKeyGetter=n||i,this._newKeyGetter=r||i,this.context=a}function r(e,t,i,n,r){for(var a=0;a<e.length;a++){var o="_ec_"+r[n](e[a],a),s=t[o];null==s?(i.push(o),t[o]=a):(s.length||(t[o]=s=[s]),s.push(a))}}n.prototype={constructor:n,add:function(e){return this._add=e,this},update:function(e){return this._update=e,this},remove:function(e){return this._remove=e,this},execute:function(){var e=this._old,t=this._new,i={},n={},a=[],o=[];for(r(e,i,a,"_oldKeyGetter",this),r(t,n,o,"_newKeyGetter",this),u=0;u<e.length;u++){var s=a[u],l=n[s];if(null!=l){var c=l.length;c?(1===c&&(n[s]=null),l=l.shift()):n[s]=null,this._update&&this._update(l,u)}else this._remove&&this._remove(u)}for(var u=0;u<o.length;u++){s=o[u];if(n.hasOwnProperty(s)){l=n[s];if(null==l)continue;if(l.length){var h=0;for(c=l.length;h<c;h++)this._add&&this._add(l[h])}else this._add&&this._add(l)}}}};var a=n;e.exports=a},"81c0":function(e,t){var i=Math.pow(2,32),n=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},r=12;0===n.version?(n.earliestPresentationTime=t.getUint32(r),n.firstOffset=t.getUint32(r+4),r+=8):(n.earliestPresentationTime=t.getUint32(r)*i+t.getUint32(r+4),n.firstOffset=t.getUint32(r+8)*i+t.getUint32(r+12),r+=16),r+=2;var a=t.getUint16(r);for(r+=2;a>0;r+=12,a--)n.references.push({referenceType:(128&e[r])>>>7,referencedSize:2147483647&t.getUint32(r),subsegmentDuration:t.getUint32(r+4),startsWithSap:!!(128&e[r+8]),sapType:(112&e[r+8])>>>4,sapDeltaTime:268435455&t.getUint32(r+8)});return n};e.exports=n},"82d2":function(e,t,i){},"82eb":function(e,t){var i={NONE:0,STYLE_BIND:1,PLAIN_TEXT:2},n=9;t.ContextCachedBy=i,t.WILL_BE_RESTORED=n},"82f9":function(e,t,i){var n=i("6d8b"),r=i("76a5"),a=i("2306");function o(e,t,i,n){e[0]=i,e[1]=n,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}function s(e){var t=this._zr=e.getZr();this._styleCoord=[0,0,0,0],o(this._styleCoord,t,e.getWidth()/2,e.getHeight()/2),this._show=!1,this._hideTimeout}s.prototype={constructor:s,_enterable:!0,update:function(e){var t=e.get("alwaysShowContent");t&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var e=this._styleCoord[2],t=this._styleCoord[3],i=e*this._zr.getWidth(),n=t*this._zr.getHeight();this.moveTo(i,n)},show:function(e){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(e,t,i){this.el&&this._zr.remove(this.el);var n={},o=e,s="{marker",l="|}",c=o.indexOf(s);while(c>=0){var u=o.indexOf(l),h=o.substr(c+s.length,u-c-s.length);h.indexOf("sub")>-1?n["marker"+h]={textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:t[h],textOffset:[3,0]}:n["marker"+h]={textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:t[h]},o=o.substr(u+1),c=o.indexOf("{marker")}var d=i.getModel("textStyle"),p=d.get("fontSize"),f=i.get("textLineHeight");null==f&&(f=Math.round(3*p/2)),this.el=new r({style:a.setTextStyle({},d,{rich:n,text:e,textBackgroundColor:i.get("backgroundColor"),textBorderRadius:i.get("borderRadius"),textFill:i.get("textStyle.color"),textPadding:i.get("padding"),textLineHeight:f}),z:i.get("z")}),this._zr.add(this.el);var m=this;this.el.on("mouseover",(function(){m._enterable&&(clearTimeout(m._hideTimeout),m._show=!0),m._inContent=!0})),this.el.on("mouseout",(function(){m._enterable&&m._show&&m.hideLater(m._hideDelay),m._inContent=!1}))},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el.getBoundingRect();return[e.width,e.height]},moveTo:function(e,t){if(this.el){var i=this._styleCoord;o(i,this._zr,e,t),this.el.attr("position",[i[0],i[1]])}},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(n.bind(this.hide,this),e)):this.hide())},isShow:function(){return this._show},dispose:function(){clearTimeout(this._hideTimeout),this.el&&this._zr.remove(this.el)},getOuterSize:function(){var e=this.getSize();return{width:e[0],height:e[1]}}};var l=s;e.exports=l},8344:function(e,t,i){var n=i("6d8b"),r=i("f706"),a=i("3842"),o=i("6179"),s=i("923d"),l=i("88f0");function c(e,t,i){var n=t.coordinateSystem;e.each((function(r){var o,s=e.getItemModel(r),l=a.parsePercent(s.get("x"),i.getWidth()),c=a.parsePercent(s.get("y"),i.getHeight());if(isNaN(l)||isNaN(c)){if(t.getMarkerPosition)o=t.getMarkerPosition(e.getValues(e.dimensions,r));else if(n){var u=e.get(n.dimensions[0],r),h=e.get(n.dimensions[1],r);o=n.dataToPoint([u,h])}}else o=[l,c];isNaN(l)||(o[0]=l),isNaN(c)||(o[1]=c),e.setItemLayout(r,o)}))}var u=l.extend({type:"markPoint",updateTransform:function(e,t,i){t.eachSeries((function(e){var t=e.markPointModel;t&&(c(t.getData(),e,i),this.markerGroupMap.get(e.id).updateLayout(t))}),this)},renderSeries:function(e,t,i,a){var o=e.coordinateSystem,s=e.id,l=e.getData(),u=this.markerGroupMap,d=u.get(s)||u.set(s,new r),p=h(o,e,t);t.setData(p),c(t.getData(),e,a),p.each((function(e){var i=p.getItemModel(e),r=i.getShallow("symbol"),a=i.getShallow("symbolSize"),o=i.getShallow("symbolRotate"),s=n.isFunction(r),c=n.isFunction(a),u=n.isFunction(o);if(s||c||u){var h=t.getRawValue(e),d=t.getDataParams(e);s&&(r=r(h,d)),c&&(a=a(h,d)),u&&(o=o(h,d))}p.setItemVisual(e,{symbol:r,symbolSize:a,symbolRotate:o,color:i.get("itemStyle.color")||l.getVisual("color")})})),d.updateData(p),this.group.add(d.group),p.eachItemGraphicEl((function(e){e.traverse((function(e){e.dataModel=t}))})),d.__keep=!0,d.group.silent=t.get("silent")||e.get("silent")}});function h(e,t,i){var r;r=e?n.map(e&&e.dimensions,(function(e){var i=t.getData().getDimensionInfo(t.getData().mapDimension(e))||{};return n.defaults({name:e},i)})):[{name:"value",type:"float"}];var a=new o(r,i),l=n.map(i.get("data"),n.curry(s.dataTransform,t));return e&&(l=n.filter(l,n.curry(s.dataFilter,e))),a.initData(l,null,e?s.dimValueGetter:function(e){return e.value}),a}e.exports=u},8362:function(e,t){e.exports=n;var i=Object.prototype.toString;function n(e){if(!e)return!1;var t=i.call(e);return"[object Function]"===t||"function"===typeof e&&"[object RegExp]"!==t||"undefined"!==typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}},"83b8":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],ref:"dialog",staticClass:"el-dialog stick-dialog",style:e.styleObj},[i("div",{staticClass:"el-dialog__header"},[i("span",{staticClass:"el-dialog__title"},[e._v(e._s(e.title))]),i("b",{staticClass:"sticked",on:{click:e.closePanel}})]),i("div",{staticClass:"el-dialog__body"},[i(e.module,{tag:"component",attrs:{attributes:e.data}})],1)])},r=[],a=i("d2b8"),o={name:"StickPanel",components:{},props:{data:{type:Object,default:function(){}},id:{type:[String,Number]},myStyle:{type:Object}},data:function(){return{module:null,detail:{},loading:!0}},watch:{data:{handler:function(e){if(!(Object.keys(e).length<=0)){var t=a["c"][e.deviceType].fn;this.module=function(){return i("e41e")("./".concat(t,".vue"))}}},immediate:!0}},computed:{styleObj:function(){var e=this.myStyle,t=e.top,i=e.left,n=e.zIndex,r=e.width,a=e.height;return void 0!==t&&void 0!==i?{top:t+"px",left:i+"px",width:r+"px",height:a+"px",zIndex:n}:{zIndex:n}},title:function(){return this.data.deviceName||"设备名称"}},mounted:function(){console.log(this.styleObj)},methods:{closePanel:function(){this.$store.commit("REMOVE_FLOATING",{id:this.id})},savePosition:function(e){var t=parseInt(this.$el.style.top),i=parseInt(this.$el.style.left),n=parseInt(this.$el.style.zIndex),r=this.myStyle,a=r.top,o=r.left,s=r.zIndex;t===a&&i===o&&n===s||this.$store.commit("UPDATE_FLOATING",{id:this.id,top:t,left:i,zIndex:n})}}},s=o,l=(i("f38b"),i("2877")),c=Object(l["a"])(s,n,r,!1,null,null,null);t["default"]=c.exports},"843e":function(e,t,i){var n=i("6d8b"),r=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function a(e){n.each(r,(function(t){this[t]=n.bind(e[t],e)}),this)}var o=a;e.exports=o},"84cc":function(e,t,i){"use strict";i("7db2")},"84ce":function(e,t,i){var n=i("6d8b"),r=n.each,a=n.map,o=i("3842"),s=o.linearMap,l=o.getPixelPrecision,c=o.round,u=i("e073"),h=u.createAxisTicks,d=u.createAxisLabels,p=u.calculateCategoryInterval,f=[0,1],m=function(e,t,i){this.dim=e,this.scale=t,this._extent=i||[0,0],this.inverse=!1,this.onBand=!1};function g(e,t){var i=e[1]-e[0],n=t,r=i/n/2;e[0]+=r,e[1]-=r}function v(e,t,i,n){var a=t.length;if(e.onBand&&!i&&a){var o,s,l=e.getExtent();if(1===a)t[0].coord=l[0],o=t[1]={coord:l[0]};else{var u=t[a-1].tickValue-t[0].tickValue,h=(t[a-1].coord-t[0].coord)/u;r(t,(function(e){e.coord-=h/2}));var d=e.scale.getExtent();s=1+d[1]-t[a-1].tickValue,o={coord:t[a-1].coord+h*s},t.push(o)}var p=l[0]>l[1];f(t[0].coord,l[0])&&(n?t[0].coord=l[0]:t.shift()),n&&f(l[0],t[0].coord)&&t.unshift({coord:l[0]}),f(l[1],o.coord)&&(n?o.coord=l[1]:t.pop()),n&&f(o.coord,l[1])&&t.push({coord:l[1]})}function f(e,t){return e=c(e),t=c(t),p?e>t:e<t}}m.prototype={constructor:m,contain:function(e){var t=this._extent,i=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]);return e>=i&&e<=n},containData:function(e){return this.scale.contain(e)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(e){return l(e||this.scale.getExtent(),this._extent)},setExtent:function(e,t){var i=this._extent;i[0]=e,i[1]=t},dataToCoord:function(e,t){var i=this._extent,n=this.scale;return e=n.normalize(e),this.onBand&&"ordinal"===n.type&&(i=i.slice(),g(i,n.count())),s(e,f,i,t)},coordToData:function(e,t){var i=this._extent,n=this.scale;this.onBand&&"ordinal"===n.type&&(i=i.slice(),g(i,n.count()));var r=s(e,i,f,t);return this.scale.scale(r)},pointToData:function(e,t){},getTicksCoords:function(e){e=e||{};var t=e.tickModel||this.getTickModel(),i=h(this,t),n=i.ticks,r=a(n,(function(e){return{coord:this.dataToCoord(e),tickValue:e}}),this),o=t.get("alignWithLabel");return v(this,r,o,e.clamp),r},getMinorTicksCoords:function(){if("ordinal"===this.scale.type)return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var i=this.scale.getMinorTicks(t),n=a(i,(function(e){return a(e,(function(e){return{coord:this.dataToCoord(e),tickValue:e}}),this)}),this);return n},getViewLabels:function(){return d(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var e=this._extent,t=this.scale.getExtent(),i=t[1]-t[0]+(this.onBand?1:0);0===i&&(i=1);var n=Math.abs(e[1]-e[0]);return Math.abs(n)/i},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return p(this)}};var y=m;e.exports=y},"84d5":function(e,t,i){var n=i("3eba"),r=i("6d8b"),a=i("4319"),o=i("e0d3"),s=o.isNameSpecified,l=i("29a8"),c=l.legend.selector,u={all:{type:"all",title:r.clone(c.all)},inverse:{type:"inverse",title:r.clone(c.inverse)}},h=n.extendComponentModel({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(e,t,i){this.mergeDefaultAndTheme(e,i),e.selected=e.selected||{},this._updateSelector(e)},mergeOption:function(e){h.superCall(this,"mergeOption",e),this._updateSelector(e)},_updateSelector:function(e){var t=e.selector;!0===t&&(t=e.selector=["all","inverse"]),r.isArray(t)&&r.each(t,(function(e,i){r.isString(e)&&(e={type:e}),t[i]=r.merge(e,u[e.type])}))},optionUpdated:function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,i=0;i<e.length;i++){var n=e[i].get("name");if(this.isSelected(n)){this.select(n),t=!0;break}}!t&&this.select(e[0].get("name"))}},_updateData:function(e){var t=[],i=[];e.eachRawSeries((function(n){var r,a=n.name;if(i.push(a),n.legendVisualProvider){var o=n.legendVisualProvider,l=o.getAllNames();e.isSeriesFiltered(n)||(i=i.concat(l)),l.length?t=t.concat(l):r=!0}else r=!0;r&&s(n)&&t.push(n.name)})),this._availableNames=i;var n=this.get("data")||t,o=r.map(n,(function(e){return"string"!==typeof e&&"number"!==typeof e||(e={name:e}),new a(e,this,this.ecModel)}),this);this._data=o},getData:function(){return this._data},select:function(e){var t=this.option.selected,i=this.get("selectedMode");if("single"===i){var n=this._data;r.each(n,(function(e){t[e.get("name")]=!1}))}t[e]=!0},unSelect:function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},toggleSelected:function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},allSelect:function(){var e=this._data,t=this.option.selected;r.each(e,(function(e){t[e.get("name",!0)]=!0}))},inverseSelect:function(){var e=this._data,t=this.option.selected;r.each(e,(function(e){var i=e.get("name",!0);t.hasOwnProperty(i)||(t[i]=!0),t[i]=!t[i]}))},isSelected:function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&r.indexOf(this._availableNames,e)>=0},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}}),d=h;e.exports=d},"84ec":function(e,t){var i=Math.log(2);function n(e,t,r,a,o,s){var l=a+"-"+o,c=e.length;if(s.hasOwnProperty(l))return s[l];if(1===t){var u=Math.round(Math.log((1<<c)-1&~o)/i);return e[r][u]}var h=a|1<<r,d=r+1;while(a&1<<d)d++;for(var p=0,f=0,m=0;f<c;f++){var g=1<<f;g&o||(p+=(m%2?-1:1)*e[r][f]*n(e,t-1,d,h,o|g,s),m++)}return s[l]=p,p}function r(e,t){var i=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],r={},a=n(i,8,0,0,0,r);if(0!==a){for(var o=[],s=0;s<8;s++)for(var l=0;l<8;l++)null==o[l]&&(o[l]=0),o[l]+=((s+l)%2?-1:1)*n(i,7,0===s?1:0,1<<s,1<<l,r)/a*t[s];return function(e,t,i){var n=t*o[6]+i*o[7]+1;e[0]=(t*o[0]+i*o[1]+o[2])/n,e[1]=(t*o[3]+i*o[4]+o[5])/n}}}t.buildTransformer=r},"857d":function(e,t){var i=2*Math.PI;function n(e){return e%=i,e<0&&(e+=i),e}t.normalizeRadian=n},"85a7":function(e,t,i){"use strict";i("16f5")},"862d":function(e,t,i){var n=i("6d8b"),r=n.createHashMap,a=n.each,o=n.isString,s=n.defaults,l=n.extend,c=n.isObject,u=n.clone,h=i("e0d3"),d=h.normalizeToArray,p=i("0f99"),f=p.guessOrdinal,m=p.BE_ORDINAL,g=i("ec6f"),v=i("2f45"),y=v.OTHER_DIMENSIONS,_=i("562e");function b(e,t,i){g.isInstance(t)||(t=g.seriesDataToSource(t)),i=i||{},e=(e||[]).slice();for(var n=(i.dimsDef||[]).slice(),h=r(),p=r(),v=[],b=x(t,e,n,i.dimCount),T=0;T<b;T++){var S=n[T]=l({},c(n[T])?n[T]:{name:n[T]}),O=S.name,C=v[T]=new _;null!=O&&null==h.get(O)&&(C.name=C.displayName=O,h.set(O,T)),null!=S.type&&(C.type=S.type),null!=S.displayName&&(C.displayName=S.displayName)}var k=i.encodeDef;!k&&i.encodeDefaulter&&(k=i.encodeDefaulter(t,b)),k=r(k),k.each((function(e,t){if(e=d(e).slice(),1===e.length&&!o(e[0])&&e[0]<0)k.set(t,!1);else{var i=k.set(t,[]);a(e,(function(e,n){o(e)&&(e=h.get(e)),null!=e&&e<b&&(i[n]=e,E(v[e],t,n))}))}}));var P=0;function E(e,t,i){null!=y.get(t)?e.otherDims[t]=i:(e.coordDim=t,e.coordDimIndex=i,p.set(t,!0))}a(e,(function(e,t){var i,n,r;if(o(e))i=e,e={};else{i=e.name;var l=e.ordinalMeta;e.ordinalMeta=null,e=u(e),e.ordinalMeta=l,n=e.dimsDef,r=e.otherDims,e.name=e.coordDim=e.coordDimIndex=e.dimsDef=e.otherDims=null}var h=k.get(i);if(!1!==h){h=d(h);if(!h.length)for(var p=0;p<(n&&n.length||1);p++){while(P<v.length&&null!=v[P].coordDim)P++;P<v.length&&h.push(P++)}a(h,(function(t,a){var o=v[t];if(E(s(o,e),i,a),null==o.name&&n){var l=n[a];!c(l)&&(l={name:l}),o.name=o.displayName=l.name,o.defaultTooltip=l.defaultTooltip}r&&s(o.otherDims,r)}))}}));var A=i.generateCoord,I=i.generateCoordCount,M=null!=I;I=A?I||1:0;for(var D=A||"value",j=0;j<b;j++){C=v[j]=v[j]||new _;var L=C.coordDim;null==L&&(C.coordDim=w(D,p,M),C.coordDimIndex=0,(!A||I<=0)&&(C.isExtraCoord=!0),I--),null==C.name&&(C.name=w(C.coordDim,h)),null!=C.type||f(t,j,C.name)!==m.Must&&(!C.isExtraCoord||null==C.otherDims.itemName&&null==C.otherDims.seriesName)||(C.type="ordinal")}return v}function x(e,t,i,n){var r=Math.max(e.dimensionsDetectCount||1,t.length,i.length,n||0);return a(t,(function(e){var t=e.dimsDef;t&&(r=Math.max(r,t.length))})),r}function w(e,t,i){if(i||null!=t.get(e)){var n=0;while(null!=t.get(e+n))n++;e+=n}return t.set(e,!0),e}var T=b;e.exports=T},8675:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return o}));var n=i("fc00"),r=i("5957");const a=Object(n["a"])().vec3f("position"),o=Object(n["a"])().vec3f("position").vec2f("uv0"),s=Object(n["a"])().vec3f("position").vec4u8("color");class l{constructor(e){this.vertexBufferLayout=e}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return e.indices.get("position").length}write(e,t,i,n){Object(r["c"])(t,this.vertexBufferLayout,e.transformation,e.invTranspTransformation,i,n)}}},"86ba":function(e,t,i){"use strict";i.d(t,"a",(function(){return F}));var n,r=i("b2b2"),a=i("e92d"),o=i("38a4"),s=i("a915"),l=i("0b2d"),c=i("e431"),u=i("3349"),h=i("fc00"),d=i("d0ac"),p=i("1153"),f=i("1038"),m=i("b623"),g=i("d7f7"),v=i("35b3"),y=i("dae5"),_=i("47f8");!function(e){e.Default={vvSizeEnabled:!1,vvSizeMinSize:Object(_["c"])(1,1,1),vvSizeMaxSize:Object(_["c"])(100,100,100),vvSizeOffset:Object(_["c"])(0,0,0),vvSizeFactor:Object(_["c"])(1,1,1),vvSizeValue:Object(_["c"])(1,1,1),vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvOpacityEnabled:!1,vvOpacityValues:[0,0,0,0,0,0,0,0],vvOpacityOpacities:[1,1,1,1,1,1,1,1],vvSymbolAnchor:[0,0,0],vvSymbolRotationMatrix:Object(y["a"])()}}(n||(n={}));var b=n,x=b,w=i("a4ee"),T=i("c3a4"),S=i("ca98"),O=i("da35"),C=i("8e374"),k=i("189c"),P=i("8e97"),E=i("d272"),A=i("6a07"),I=i("be24"),M=i("7438"),D=i("c6d7"),j=i("87b7"),L=i("9a68");const R={position:0,subdivisionFactor:1,uv0:2,auxpos1:3,auxpos2:4,size:6,sizeFeatureAttribute:6,color:5,colorFeatureAttribute:5,opacityFeatureAttribute:7};class N extends S["a"]{constructor(e,t){super(e,t),this.stipplePattern=null,this.stippleTextureBind=null,this.stippleTextureRepository=e.stippleTextureRepository}initializeProgram(e){const t=N.shader.get(),i=this.configuration,n=t.build({OITEnabled:0===i.transparencyPassType,output:i.output,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,stippleEnabled:i.stippleEnabled,stippleOffColorEnabled:i.stippleOffColorEnabled,stippleUVMaxEnabled:i.stippleIntegerRepeatsEnabled,stippleIntegerRepeatsEnabled:i.stippleIntegerRepeatsEnabled,roundCaps:i.roundCaps,roundJoins:i.roundJoins,vvColor:i.vvColor,vvSize:i.vvSize,vvInstancingEnabled:!0,vvOpacity:i.vvOpacity,falloffEnabled:i.falloffEnabled,innerColorEnabled:i.innerColorEnabled,multipassTerrainEnabled:i.multipassTerrainEnabled,cullAboveGround:i.cullAboveGround});return new C["a"](e.rctx,n.generateSource("vertex"),n.generateSource("fragment"),R)}dispose(){super.dispose(),this.stippleTextureRepository.release(this.stipplePattern),this.stipplePattern=null,this.stippleTextureBind=null}bindPass(e,t,i){if(P["a"].bindProjectionMatrix(this.program,i.camera.projectionMatrix),4===this.configuration.output&&A["a"].bindOutputHighlight(e,this.program,i),i.multipassTerrainEnabled&&(this.program.setUniform2fv("inverseViewport",i.inverseViewport),Object(D["a"])(this.program,e,i)),this.program.setUniform1f("intrinsicWidth",t.width),this.program.setUniform4fv("intrinsicColor",t.color),this.program.setUniform1f("miterLimit","miter"!==t.join?0:t.miterLimit),this.program.setUniform2fv("cameraNearFar",i.camera.nearFar),this.program.setUniform1f("pixelRatio",i.camera.pixelRatio),this.program.setUniform2f("screenSize",i.camera.fullViewport[2],i.camera.fullViewport[3]),I["a"].bindUniformsWithOpacity(this.program,t),this.stipplePattern!==t.stipplePattern){const e=t.stipplePattern;this.stippleTextureBind=this.stippleTextureRepository.swap(this.stipplePattern,e),this.stipplePattern=e}if(this.configuration.stippleEnabled){const n=Object(r["k"])(this.stippleTextureBind)?this.stippleTextureBind(e,0)*i.camera.pixelRatio:1;if(this.program.setUniform1i("stipplePatternTexture",0),this.program.setUniform1f("stipplePatternPixelSizeInv",1/n),this.configuration.stippleOffColorEnabled){const e=Object(r["q"])(t.stippleOffColor);this.program.setUniform4f("stippleOffColor",e[0],e[1],e[2],e.length>3?e[3]:1)}}this.configuration.falloffEnabled&&this.program.setUniform1f("falloff",t.falloff),this.configuration.innerColorEnabled&&(this.program.setUniform4fv("innerColor",Object(r["r"])(t.innerColor,t.color)),this.program.setUniform1f("innerWidth",t.innerWidth*i.camera.pixelRatio))}bindDraw(e){P["a"].bindView(this.program,e),E["a"].bindUniformsWithOrigin(this.program,this.configuration,e)}setPipelineState(e,t){const i=this.configuration,n=3===e,r=2===e;return Object(k["d"])({blending:0===i.output||7===i.output?n?M["f"]:Object(M["a"])(e):null,depthTest:{func:Object(M["b"])(e)},depthWrite:n?!i.transparent&&i.writeDepth&&k["c"]:Object(M["c"])(e),colorWrite:k["b"],stencilWrite:i.sceneHasOcludees?j["h"]:null,stencilTest:i.sceneHasOcludees?t?j["d"]:j["c"]:null,polygonOffset:n||r?i.polygonOffset&&z:M["d"]})}initializePipeline(){const e=this.configuration,t=e.polygonOffset&&z;return e.occluder&&(this._occluderPipelineTransparent=Object(k["d"])({blending:M["f"],polygonOffset:t,depthTest:j["a"],depthWrite:null,colorWrite:k["b"],stencilWrite:null,stencilTest:j["f"]}),this._occluderPipelineOpaque=Object(k["d"])({blending:M["f"],polygonOffset:t,depthTest:j["a"],depthWrite:null,colorWrite:k["b"],stencilWrite:j["g"],stencilTest:j["e"]}),this._occluderPipelineMaskWrite=Object(k["d"])({blending:null,polygonOffset:t,depthTest:j["b"],depthWrite:null,colorWrite:null,stencilWrite:j["h"],stencilTest:j["d"]})),this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}get primitiveType(){return 5}getPipelineState(e,t){return t?this._occludeePipelineState:this.configuration.occluder?11===e?this._occluderPipelineTransparent:10===e?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:this.pipeline}}N.shader=new T["a"](L["a"],()=>i.e("chunk-2d213386").then(i.bind(null,"ac6d")));const z={factor:0,units:-4};class B extends O["a"]{constructor(){super(...arguments),this.output=0,this.occluder=!1,this.slicePlaneEnabled=!1,this.transparent=!1,this.polygonOffset=!1,this.writeDepth=!1,this.stippleEnabled=!1,this.stippleOffColorEnabled=!1,this.stippleIntegerRepeatsEnabled=!1,this.roundCaps=!1,this.roundJoins=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.falloffEnabled=!1,this.innerColorEnabled=!1,this.sceneHasOcludees=!1,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!0}}Object(w["a"])([Object(O["b"])({count:8})],B.prototype,"output",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"occluder",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"slicePlaneEnabled",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"transparent",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"polygonOffset",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"writeDepth",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"stippleEnabled",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"stippleOffColorEnabled",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"stippleIntegerRepeatsEnabled",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"roundCaps",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"roundJoins",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"vvSize",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"vvColor",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"vvOpacity",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"falloffEnabled",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"innerColorEnabled",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"sceneHasOcludees",void 0),Object(w["a"])([Object(O["b"])({count:4})],B.prototype,"transparencyPassType",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"multipassTerrainEnabled",void 0),Object(w["a"])([Object(O["b"])()],B.prototype,"cullAboveGround",void 0);const V=a["a"].getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial");class F extends v["a"]{constructor(e){super(e,G),this._vertexAttributeLocations=R,this.techniqueConfig=new B,this.layout=this.createLayout()}isClosed(e,t){return Z(this.params,e,t)}dispose(){}getPassParameters(){return this.params}getTechniqueConfig(e,t){this.techniqueConfig.output=e;const i=Object(r["k"])(this.params.stipplePattern);return this.techniqueConfig.stippleEnabled=i,this.techniqueConfig.stippleIntegerRepeatsEnabled=i&&this.params.stippleIntegerRepeats,this.techniqueConfig.stippleOffColorEnabled=i&&Object(r["k"])(this.params.stippleOffColor),this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.roundJoins="round"===this.params.join,this.techniqueConfig.roundCaps="round"===this.params.cap,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.vvColor=this.params.vvColorEnabled,this.techniqueConfig.vvOpacity=this.params.vvOpacityEnabled,this.techniqueConfig.vvSize=this.params.vvSizeEnabled,this.techniqueConfig.innerColorEnabled=this.params.innerWidth>0&&Object(r["k"])(this.params.innerColor),this.techniqueConfig.falloffEnabled=this.params.falloff>0,this.techniqueConfig.occluder=8===this.params.renderOccluded,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!t||t.cullAboveGround,this.techniqueConfig}intersect(e,t,i,n,r,a,o,s,l){l?this.intersectDrapedLineGeometry(e,n,a,o):this.intersectLineGeometry(e,t,i,n,this.params.width,o)}intersectDrapedLineGeometry(e,t,i,n){if(!t.options.selectionMode)return;const r=e.vertexAttributes.get("position").data,a=e.vertexAttributes.get("size");let s=this.params.width;if(this.params.vvSizeEnabled){const t=e.vertexAttributes.get("sizeFeatureAttribute").data[0];s*=Object(o["c"])(this.params.vvSizeOffset[0]+t*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else a&&(s*=a.data[0]);const l=i[0],c=i[1],u=(s/2+4)*e.screenToWorldRatio;let h=Number.MAX_VALUE;for(let d=0;d<r.length-5;d+=3){const e=r[d],t=r[d+1],i=l-e,n=c-t,a=r[d+3]-e,s=r[d+4]-t,u=Object(o["c"])((a*i+s*n)/(a*a+s*s),0,1),p=a*u-i,f=s*u-n,m=p*p+f*f;m<h&&(h=m)}h<u*u&&n()}intersectLineGeometry(e,t,i,n,r,a){if(!n.options.selectionMode||Object(m["d"])(t))return;if(!Object(p["g"])(i))return void V.error("intersection assumes a translation-only matrix");const s=e.vertexAttributes,l=s.get("position").data;let h=r;if(this.params.vvSizeEnabled){const e=s.get("sizeFeatureAttribute").data[0];h*=Object(o["c"])(this.params.vvSizeOffset[0]+e*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else s.has("size")&&(h*=s.get("size").data[0]);const f=n.camera,g=ee;Object(u["c"])(g,n.point);const v=h*f.pixelRatio/2+4*f.pixelRatio;Object(c["v"])(ue[0],g[0]-v,g[1]+v,0),Object(c["v"])(ue[1],g[0]+v,g[1]+v,0),Object(c["v"])(ue[2],g[0]+v,g[1]-v,0),Object(c["v"])(ue[3],g[0]-v,g[1]-v,0);for(let o=0;o<4;o++)if(!f.unprojectFromRenderScreen(ue[o],he[o]))return;d["e"].fromPoints(f.eye,he[0],he[1],de),d["e"].fromPoints(f.eye,he[1],he[2],pe),d["e"].fromPoints(f.eye,he[2],he[3],fe),d["e"].fromPoints(f.eye,he[3],he[0],me);let y=Number.MAX_VALUE;const _=q(this.params,s,e.indices)?l.length-2:l.length-5;for(let o=0;o<_;o+=3){K[0]=l[o]+i[12],K[1]=l[o+1]+i[13],K[2]=l[o+2]+i[14];const e=(o+3)%l.length;if($[0]=l[e]+i[12],$[1]=l[e+1]+i[13],$[2]=l[e+2]+i[14],d["e"].signedDistance(de,K)<0&&d["e"].signedDistance(de,$)<0||d["e"].signedDistance(pe,K)<0&&d["e"].signedDistance(pe,$)<0||d["e"].signedDistance(fe,K)<0&&d["e"].signedDistance(fe,$)<0||d["e"].signedDistance(me,K)<0&&d["e"].signedDistance(me,$)<0)continue;if(f.projectToRenderScreen(K,te),f.projectToRenderScreen($,ie),te[2]<0&&ie[2]>0){Object(c["i"])(Q,K,$);const e=f.frustum,t=-d["e"].signedDistance(e[4],K)/Object(c["g"])(Q,d["e"].normal(e[4]));Object(c["d"])(Q,Q,t),Object(c["e"])(K,K,Q),f.projectToRenderScreen(K,te)}else if(te[2]>0&&ie[2]<0){Object(c["i"])(Q,$,K);const e=f.frustum,t=-d["e"].signedDistance(e[4],$)/Object(c["g"])(Q,d["e"].normal(e[4]));Object(c["d"])(Q,Q,t),Object(c["e"])($,$,Q),f.projectToRenderScreen($,ie)}else if(te[2]<0&&ie[2]<0)continue;te[2]=0,ie[2]=0;const t=d["d"].distance2(d["d"].fromPoints(te,ie,ae),g);t<y&&(y=t,Object(c["j"])(ne,K),Object(c["j"])(re,$))}const b=n.rayBeginPoint,x=n.rayEndPoint;if(y<v*v){let e=Number.MAX_VALUE;if(d["d"].closestLineSegmentPoint(d["d"].fromPoints(ne,re,ae),d["d"].fromPoints(b,x,oe),J)){Object(c["i"])(J,J,b);const t=Object(c["o"])(J);Object(c["d"])(J,J,1/t),e=t/Object(c["n"])(b,x)}a(e,J)}}computeAttachmentOrigin(e,t){const i=e.vertexAttributes;if(!i)return null;const n=e.indices,r=i.get("position");return Object(f["a"])(r,n?n.get("position"):null,n&&q(this.params,i,n),t)}createLayout(){const e=Object(h["a"])().vec3f("position").f32("subdivisionFactor").vec2f("uv0").vec3f("auxpos1").vec3f("auxpos2");return this.params.vvSizeEnabled?e.f32("sizeFeatureAttribute"):e.f32("size"),this.params.vvColorEnabled?e.f32("colorFeatureAttribute"):e.vec4f("color"),this.params.vvOpacityEnabled&&e.f32("opacityFeatureAttribute"),e}createBufferWriter(){return new H(this.layout,this.params)}getGLMaterial(e){return 0===e.output||7===e.output||4===e.output||1===e.output?new U(e):void 0}validateParameterValues(e){"miter"!==e.join&&(e.miterLimit=0),this.requiresTransparent(e)&&(e.transparent=!0)}requiresTransparent(e){return!!((e.color&&e.color[3])<1||e.innerWidth>0&&this.colorRequiresTransparent(e.innerColor)||e.stipplePattern&&this.colorRequiresTransparent(e.stippleOffColor)||e.falloff>0)}colorRequiresTransparent(e){return Object(r["k"])(e)&&e[3]<1&&e[3]>0}}class U extends g["a"]{constructor(e){super(e),this.updateParameters()}updateParameters(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(N,this.material.getTechniqueConfig(this.output,e),this.technique)}beginSlot(e){return this.technique.configuration.occluder?3===e||10===e||11===e:0===this.output||7===this.output?(this.targetSlot=this.technique.configuration.writeDepth?5:8,e===this.targetSlot):3===e}_updateOccludeeState(e){e.hasOccludees!==this.material.params.sceneHasOcludees&&this.material.setParameterValues({sceneHasOcludees:e.hasOccludees})}ensureParameters(e){0!==this.output&&7!==this.output||this._updateOccludeeState(e),this.updateParameters(e)}bind(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}getPipelineState(e,t){return this.technique.getPipelineState(e,t)}}const G={width:0,color:[1,1,1,1],join:"miter",cap:"butt",miterLimit:5,writeDepth:!0,polygonOffset:!1,stipplePattern:null,stippleIntegerRepeats:!1,stippleOffColor:null,slicePlaneEnabled:!1,vvFastUpdate:!1,transparent:!1,isClosed:!1,falloff:0,innerWidth:0,innerColor:null,sceneHasOcludees:!1,...v["b"],...x.Default};class H{constructor(e,t){switch(this.params=t,this.numJoinSubdivisions=0,this.vertexBufferLayout=e,this.params.join){case"miter":case"bevel":this.numJoinSubdivisions=t.stipplePattern?1:0;break;case"round":this.numJoinSubdivisions=X}}isClosed(e){return q(this.params,e.vertexAttributes,e.indices)}numCapSubdivisions(e){if(this.isClosed(e))return 0;switch(this.params.cap){case"butt":return 0;case"square":return 1;case"round":return Y}}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){const t=2*this.numCapSubdivisions(e)+2,i=e.indices.get("position").length/2+1,n=this.isClosed(e);let r=n?2:2*t;const a=n?0:1,o=n?i:i-1;if(e.vertexAttributes.has("subdivisions")){const t=e.vertexAttributes.get("subdivisions").data;for(let e=a;e<o;++e)r+=4+2*t[e]}else r+=(o-a)*(2*this.numJoinSubdivisions+4);return r+=2,r}write(e,t,i,n){const r=se,a=le,o=ce,s=t.vertexAttributes.get("position").data,l=t.indices&&t.indices.get("position"),u=this.numCapSubdivisions(t);l&&l.length!==2*(s.length/3-1)&&console.warn("RibbonLineMaterial does not support indices");let h=null;t.vertexAttributes.has("subdivisions")&&(h=t.vertexAttributes.get("subdivisions").data);let d=1,p=0;this.params.vvSizeEnabled?p=t.vertexAttributes.get("sizeFeatureAttribute").data[0]:t.vertexAttributes.has("size")&&(d=t.vertexAttributes.get("size").data[0]);let f=[1,1,1,1],m=0;this.params.vvColorEnabled?m=t.vertexAttributes.get("colorFeatureAttribute").data[0]:t.vertexAttributes.has("color")&&(f=t.vertexAttributes.get("color").data);let g=0;this.params.vvOpacityEnabled&&(g=t.vertexAttributes.get("opacityFeatureAttribute").data[0]);const v=s.length/3,y=e.transformation,_=new Float32Array(i.buffer),b=this.vertexBufferLayout.stride/4;let x=n*b;const w=x,T=(e,t,i,n,r,a,o)=>{if(_[x++]=t[0],_[x++]=t[1],_[x++]=t[2],_[x++]=n,_[x++]=r,_[x++]=a,_[x++]=e[0],_[x++]=e[1],_[x++]=e[2],_[x++]=i[0],_[x++]=i[1],_[x++]=i[2],this.params.vvSizeEnabled?_[x++]=p:_[x++]=d,this.params.vvColorEnabled)_[x++]=m;else{const e=Math.min(4*o,f.length-4);_[x++]=f[e+0],_[x++]=f[e+1],_[x++]=f[e+2],_[x++]=f[e+3]}this.params.vvOpacityEnabled&&(_[x++]=g)};x+=b,Object(c["v"])(a,s[0],s[1],s[2]),y&&Object(c["l"])(a,a,y);const S=this.isClosed(t);if(S){const e=s.length-3;Object(c["v"])(r,s[e],s[e+1],s[e+2]),y&&Object(c["l"])(r,r,y)}else{Object(c["j"])(r,a),Object(c["v"])(o,s[3],s[4],s[5]),y&&Object(c["l"])(o,o,y);for(let e=0;e<u;++e){const t=1-e/u;T(r,a,o,t,1,-4,0),T(r,a,o,t,1,4,0)}T(r,a,o,0,0,-4,0),T(r,a,o,0,0,4,0),Object(c["j"])(r,a),Object(c["j"])(a,o)}const O=S?v:v-1;for(let C=S?0:1;C<O;C++){const e=(C+1)%v*3;Object(c["v"])(o,s[e+0],s[e+1],s[e+2]),y&&Object(c["l"])(o,o,y),T(r,a,o,0,1,-1,C),T(r,a,o,0,1,1,C);const t=h?h[C]:this.numJoinSubdivisions;for(let i=0;i<t;++i){const e=(i+1)/(t+1);T(r,a,o,e,1,-2,C),T(r,a,o,e,1,2,C)}T(r,a,o,1,0,-2,C),T(r,a,o,1,0,2,C),Object(c["j"])(r,a),Object(c["j"])(a,o)}if(S)x=W(_,w+b,_,x,2*b);else{T(r,a,o,0,1,-5,O),T(r,a,o,0,1,5,O);for(let e=0;e<u;++e){const t=(e+1)/u;T(r,a,o,t,1,-5,O),T(r,a,o,t,1,5,O)}}W(_,w+b,_,w,b),x=W(_,x-b,_,x,b)}}function W(e,t,i,n,r){for(let a=0;a<r;a++)i[n++]=e[t++];return n}function q(e,t,i){return Z(e,t.get("position").data,i?i.get("position"):null)}function Z(e,t,i){return!!e.isClosed&&(i?i.length>2:t.length>6)}const Y=3,X=1,K=Object(l["e"])(),$=Object(l["e"])(),Q=Object(l["e"])(),J=Object(l["e"])(),ee=Object(l["e"])(),te=Object(s["d"])(),ie=Object(s["d"])(),ne=Object(l["e"])(),re=Object(l["e"])(),ae=d["d"].create(),oe=d["d"].create(),se=Object(l["e"])(),le=Object(l["e"])(),ce=Object(l["e"])(),ue=[Object(s["d"])(),Object(s["d"])(),Object(s["d"])(),Object(s["d"])()],he=[Object(l["e"])(),Object(l["e"])(),Object(l["e"])(),Object(l["e"])()],de=d["e"].create(),pe=d["e"].create(),fe=d["e"].create(),me=d["e"].create()},8728:function(e,t){function i(e,t,i,n,r,a){if(a>t&&a>n||a<t&&a<n)return 0;if(n===t)return 0;var o=n<t?1:-1,s=(a-t)/(n-t);1!==s&&0!==s||(o=n<t?.5:-.5);var l=s*(i-e)+e;return l===r?1/0:l>r?o:0}e.exports=i},"879e":function(e,t,i){var n=i("3eba"),r=i("6179"),a=i("6d8b"),o=i("e0d3"),s=o.defaultEmphasis,l=i("4319"),c=i("eda2"),u=c.encodeHTML,h=i("237f"),d=i("c4a3"),p=i("0c37"),f=p.initCurvenessList,m=p.createEdgeMapForCurveness,g=n.extendSeriesModel({type:"series.graph",init:function(e){g.superApply(this,"init",arguments);var t=this;function i(){return t._categoriesData}this.legendVisualProvider=new d(i,i),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeOption:function(e){g.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(e){g.superApply(this,"mergeDefaultAndTheme",arguments),s(e,["edgeLabel"],["show"])},getInitialData:function(e,t){var i=e.edges||e.links||[],n=e.data||e.nodes||[],r=this;if(n&&i){f(this);var o=h(n,i,this,!0,s);return a.each(o.edges,(function(e){m(e.node1,e.node2,this,e.dataIndex)}),this),o.data}function s(e,i){e.wrapMethod("getItemModel",(function(e){var t=r._categoriesModels,i=e.getShallow("category"),n=t[i];return n&&(n.parentModel=e.parentModel,e.parentModel=n),e}));var n=r.getModel("edgeLabel"),a=new l({label:n.option},n.parentModel,t),o=r.getModel("emphasis.edgeLabel"),s=new l({emphasis:{label:o.option}},o.parentModel,t);function c(e){return e=this.parsePath(e),e&&"label"===e[0]?a:e&&"emphasis"===e[0]&&"label"===e[1]?s:this.parentModel}i.wrapMethod("getItemModel",(function(e){return e.customizeGetParent(c),e}))}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(e,t,i){if("edge"===i){var n=this.getData(),r=this.getDataParams(e,i),a=n.graph.getEdgeByIndex(e),o=n.getName(a.node1.dataIndex),s=n.getName(a.node2.dataIndex),l=[];return null!=o&&l.push(o),null!=s&&l.push(s),l=u(l.join(" > ")),r.value&&(l+=" : "+u(r.value)),l}return g.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var e=a.map(this.option.categories||[],(function(e){return null!=e.value?e:a.extend({value:0},e)})),t=new r(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray((function(e){return t.getItemModel(e,!0)}))},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},isAnimationEnabled:function(){return g.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}}}}),v=g;e.exports=v},"87b1":function(e,t,i){var n=i("cbe5"),r=i("4fac"),a=n.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(e,t){r.buildPath(e,t,!0)}});e.exports=a},"87c3":function(e,t,i){var n=i("6d8b"),r=n.map,a=i("cccd"),o=i("ee1a"),s=o.isDimensionStacked;function l(e){return{seriesType:e,plan:a(),reset:function(e){var t=e.getData(),i=e.coordinateSystem,n=e.pipelineContext,a=n.large;if(i){var o=r(i.dimensions,(function(e){return t.mapDimension(e)})).slice(0,2),l=o.length,c=t.getCalculationInfo("stackResultDimension");return s(t,o[0])&&(o[0]=c),s(t,o[1])&&(o[1]=c),l&&{progress:u}}function u(e,t){for(var n=e.end-e.start,r=a&&new Float32Array(n*l),s=e.start,c=0,u=[],h=[];s<e.end;s++){var d;if(1===l){var p=t.get(o[0],s);d=!isNaN(p)&&i.dataToPoint(p,null,h)}else{p=u[0]=t.get(o[0],s);var f=u[1]=t.get(o[1],s);d=!isNaN(p)&&!isNaN(f)&&i.dataToPoint(u,null,h)}a?(r[c++]=d?d[0]:NaN,r[c++]=d?d[1]:NaN):t.setItemLayout(s,d&&d.slice()||[NaN,NaN])}a&&t.setLayout("symbolPoints",r)}}}}e.exports=l},"88b3":function(e,t){var i="\0__throttleOriginMethod",n="\0__throttleRate",r="\0__throttleType";function a(e,t,i){var n,r,a,o,s,l=0,c=0,u=null;function h(){c=(new Date).getTime(),u=null,e.apply(a,o||[])}t=t||0;var d=function(){n=(new Date).getTime(),a=this,o=arguments;var e=s||t,d=s||i;s=null,r=n-(d?l:c)-e,clearTimeout(u),d?u=setTimeout(h,e):r>=0?h():u=setTimeout(h,-r),l=n};return d.clear=function(){u&&(clearTimeout(u),u=null)},d.debounceNextCall=function(e){s=e},d}function o(e,t,o,s){var l=e[t];if(l){var c=l[i]||l,u=l[r],h=l[n];if(h!==o||u!==s){if(null==o||!s)return e[t]=c;l=e[t]=a(c,o,"debounce"===s),l[i]=c,l[r]=s,l[n]=o}return l}}function s(e,t){var n=e[t];n&&n[i]&&(e[t]=n[i])}t.throttle=a,t.createOrUpdate=o,t.clear=s},"88f0":function(e,t,i){var n=i("3eba"),r=i("6d8b"),a=n.extendComponentView({type:"marker",init:function(){this.markerGroupMap=r.createHashMap()},render:function(e,t,i){var n=this.markerGroupMap;n.each((function(e){e.__keep=!1}));var r=this.type+"Model";t.eachSeries((function(e){var n=e[r];n&&this.renderSeries(e,n,t,i)}),this),n.each((function(e){!e.__keep&&this.group.remove(e.group)}),this)},renderSeries:function(){}});e.exports=a},8918:function(e,t,i){var n=i("6d8b"),r=i("625e"),a=r.parseClassType,o=0;function s(e){return[e||"",o++,Math.random().toFixed(5)].join("_")}function l(e){var t={};return e.registerSubTypeDefaulter=function(e,i){e=a(e),t[e.main]=i},e.determineSubType=function(i,n){var r=n.type;if(!r){var o=a(i).main;e.hasSubTypes(i)&&t[o]&&(r=t[o](n))}return r},e}function c(e,t){function i(e){var i={},o=[];return n.each(e,(function(s){var l=r(i,s),c=l.originalDeps=t(s),u=a(c,e);l.entryCount=u.length,0===l.entryCount&&o.push(s),n.each(u,(function(e){n.indexOf(l.predecessor,e)<0&&l.predecessor.push(e);var t=r(i,e);n.indexOf(t.successor,e)<0&&t.successor.push(s)}))})),{graph:i,noEntryList:o}}function r(e,t){return e[t]||(e[t]={predecessor:[],successor:[]}),e[t]}function a(e,t){var i=[];return n.each(e,(function(e){n.indexOf(t,e)>=0&&i.push(e)})),i}e.topologicalTravel=function(e,t,r,a){if(e.length){var o=i(t),s=o.graph,l=o.noEntryList,c={};n.each(e,(function(e){c[e]=!0}));while(l.length){var u=l.pop(),h=s[u],d=!!c[u];d&&(r.call(a,u,h.originalDeps.slice()),delete c[u]),n.each(h.successor,d?f:p)}n.each(c,(function(){throw new Error("Circle dependency may exists")}))}function p(e){s[e].entryCount--,0===s[e].entryCount&&l.push(e)}function f(e){c[e]=!0,p(e)}}}t.getUID=s,t.enableSubTypeDefaulter=l,t.enableTopologicalTravel=c},8971:function(e,t){var i="";"undefined"!==typeof navigator&&(i=navigator.platform||"");var n={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:i.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};e.exports=n},"897a":function(e,t,i){var n=i("22d1"),r=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];function a(e){return n.browser.ie&&n.browser.version>=11?function(){var t,i=this.__clipPaths,n=this.style;if(i)for(var a=0;a<i.length;a++){var o=i[a],s=o&&o.shape,l=o&&o.type;if(s&&("sector"===l&&s.startAngle===s.endAngle||"rect"===l&&(!s.width||!s.height))){for(var c=0;c<r.length;c++)r[c][2]=n[r[c][0]],n[r[c][0]]=r[c][1];t=!0;break}}if(e.apply(this,arguments),t)for(c=0;c<r.length;c++)n[r[c][0]]=r[c][2]}:e}e.exports=a},"89e3":function(e,t,i){var n=i("3842"),r=i("eda2"),a=i("e0d8"),o=i("944e"),s=n.round,l=a.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(e,t){var i=this._extent;isNaN(e)||(i[0]=parseFloat(e)),isNaN(t)||(i[1]=parseFloat(t))},unionExtent:function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1]),l.prototype.setExtent.call(this,t[0],t[1])},getInterval:function(){return this._interval},setInterval:function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=o.getIntervalPrecision(e)},getTicks:function(e){var t=this._interval,i=this._extent,n=this._niceExtent,r=this._intervalPrecision,a=[];if(!t)return a;var o=1e4;i[0]<n[0]&&(e?a.push(s(n[0]-t,r)):a.push(i[0]));var l=n[0];while(l<=n[1]){if(a.push(l),l=s(l+t,r),l===a[a.length-1])break;if(a.length>o)return[]}var c=a.length?a[a.length-1]:n[1];return i[1]>c&&(e?a.push(s(c+t,r)):a.push(i[1])),a},getMinorTicks:function(e){for(var t=this.getTicks(!0),i=[],r=this.getExtent(),a=1;a<t.length;a++){var o=t[a],s=t[a-1],l=0,c=[],u=o-s,h=u/e;while(l<e-1){var d=n.round(s+(l+1)*h);d>r[0]&&d<r[1]&&c.push(d),l++}i.push(c)}return i},getLabel:function(e,t){if(null==e)return"";var i=t&&t.precision;return null==i?i=n.getPrecisionSafe(e)||0:"auto"===i&&(i=this._intervalPrecision),e=s(e,i,!0),r.addCommas(e)},niceTicks:function(e,t,i){e=e||5;var n=this._extent,r=n[1]-n[0];if(isFinite(r)){r<0&&(r=-r,n.reverse());var a=o.intervalScaleNiceTicks(n,e,t,i);this._intervalPrecision=a.intervalPrecision,this._interval=a.interval,this._niceExtent=a.niceTickExtent}},niceExtent:function(e){var t=this._extent;if(t[0]===t[1])if(0!==t[0]){var i=t[0];e.fixMax||(t[1]+=i/2),t[0]-=i/2}else t[1]=1;var n=t[1]-t[0];isFinite(n)||(t[0]=0,t[1]=1),this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var r=this._interval;e.fixMin||(t[0]=s(Math.floor(t[0]/r)*r)),e.fixMax||(t[1]=s(Math.ceil(t[1]/r)*r))}});l.create=function(){return new l};var c=l;e.exports=c},"8a07":function(e,t,i){},"8a4f":function(e,t,i){},"8a85":function(e,t,i){"use strict";i("a16f")},"8b1a6":function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("7f83"),r=i("4ae5"),a=(i("e06a"),i("0b2d")),o=i("e431"),s=i("02f1"),l=i("0fc4"),c=i("3349"),u=i("7577"),h=i("f091");class d{constructor(e,t){this.spatialReference=e,this.viewingMode=t,this._unnormalizationInfo=v(e,t)}tag(e){return e}createNew(){return this.tag(Object(s["a"])())}fromPoint(e){return this.tag(Object(s["e"])(e.x,e.y))}fromArray(e){return this.tag(Object(s["e"])(e[0],e[1]))}toArray(e){return[e[0],e[1]]}clone(e){return this.tag(Object(s["d"])(e))}toPoint(e,t){return t.x=e[0],t.y=e[1],t.hasZ=!1,t.hasM=!1,t.spatialReference=this.spatialReference,t}createPoint(e){return new r["a"]({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})}createPointFromArray(e){return new r["a"]({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})}createDehydratedPoint(e){return{x:e[0],y:e[1],z:void 0,m:void 0,hasZ:!1,hasM:!1,spatialReference:this.spatialReference,type:"point"}}lerp(e,t,i,n){return Object(c["m"])(n,e,t,i)}addDelta(e,t,i){e[0]+=t,e[1]+=i}scale(e,t,i,n){const r=h["c"].get(),a=Object(c["d"])(r,e,t),o=Object(c["a"])(r,i,Object(c["g"])(i,a));Object(c["o"])(e,e,o,n-1)}rotate(e,t,i){Object(c["q"])(e,e,t,i)}pointToArray(e){return[e.x,e.y]}getZ(e,t){return t}hasZ(){return!1}unnormalize(e){g(e,this._unnormalizationInfo)}fromXYZ(e){return this.tag(Object(s["e"])(e[0],e[1]))}toXYZ(e,t=0){return Object(a["g"])(e[0],e[1],t)}}class p{constructor(e,t,i){this.valueType=e,this.spatialReference=t,this._unnormalizationInfo=v(t,i)}tag(e){return e}createNew(){return this.tag(Object(a["e"])())}fromPoint(e){return this.tag(Object(a["g"])(e.x,e.y,0===this.valueType?e.z:e.m))}fromArray(e){return this.tag(Object(a["g"])(e[0],e[1],e[2]||0))}toArray(e){return[e[0],e[1],e[2]]}clone(e){return this.tag(Object(a["f"])(e))}toPoint(e,t){return t.x=e[0],t.y=e[1],0===this.valueType?(t.z=e[2],t.hasZ=!0,t.hasM=!1):(t.m=e[2],t.hasZ=!1,t.hasM=!0),t.spatialReference=this.spatialReference,t}createPoint(e){return new r["a"]({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})}createPointFromArray(e){return new r["a"]({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})}createDehydratedPoint(e){const t=0===this.valueType,i=1===this.valueType;return{x:e[0],y:e[1],z:t?e[2]:void 0,m:i?e[2]:void 0,hasZ:t,hasM:i,spatialReference:this.spatialReference,type:"point"}}lerp(e,t,i,n){return Object(o["h"])(n,e,t,i)}addDelta(e,t,i,n){e[0]+=t,e[1]+=i,0===this.valueType&&(e[2]+=n)}scale(e,t,i,n){const r=h["c"].get(),a=Object(c["d"])(r,e,t),o=Object(c["a"])(r,i,Object(c["g"])(i,a));Object(c["o"])(e,e,o,n-1)}rotate(e,t,i){Object(c["q"])(e,e,t,i)}pointToArray(e){return 0===this.valueType?[e.x,e.y,e.z]:[e.x,e.y,e.m]}getZ(e,t){return 0===this.valueType?e[2]:t}hasZ(){return 0===this.valueType}unnormalize(e){g(e,this._unnormalizationInfo)}fromXYZ(e,t=0,i=0){return this.tag(Object(a["g"])(e[0],e[1],0===this.valueType?e.length>2?e[2]:t:i))}toXYZ(e,t=0){return this.tag(Object(a["g"])(e[0],e[1],0===this.valueType?e[2]:t))}}class f{constructor(e,t){this.spatialReference=e,this._unnormalizationInfo=v(e,t)}tag(e){return e}createNew(){return this.tag(Object(l["c"])())}fromPoint(e){return this.tag(Object(l["d"])(e.x,e.y,e.z,e.m))}fromArray(e){return this.tag(Object(l["d"])(e[0],e[1],e[2]||0,e[3]||0))}toArray(e){return[e[0],e[1],e[2],e[3]]}clone(e){return this.tag(Object(l["g"])(e))}toPoint(e,t){return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.hasZ=!0,t.hasM=!0,t.spatialReference=this.spatialReference,t}createPoint(e){return new r["a"]({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})}createPointFromArray(e){return new r["a"]({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})}createDehydratedPoint(e){return{x:e[0],y:e[1],z:e[2],m:e[3],hasZ:!0,hasM:!0,spatialReference:this.spatialReference,type:"point"}}lerp(e,t,i,n){return Object(u["j"])(n,e,t,i)}addDelta(e,t,i,n){e[0]+=t,e[1]+=i,e[2]+=n}scale(e,t,i,n){const r=h["c"].get(),a=Object(c["d"])(r,e,t),o=Object(c["a"])(r,i,Object(c["g"])(i,a));Object(c["o"])(e,e,o,n-1)}rotate(e,t,i){Object(c["q"])(e,e,t,i)}pointToArray(e){return[e.x,e.y,e.z,e.m]}getZ(e){return e[2]}hasZ(){return!0}unnormalize(e){g(e,this._unnormalizationInfo)}fromXYZ(e,t=0,i=0){return this.tag(Object(l["d"])(e[0],e[1],e.length>2?e[2]:t,i))}toXYZ(e){return Object(a["g"])(e[0],e[1],e[2])}}function m(e,t,i,n){return e&&t?new f(i,n):t?new p(1,i,n):e?new p(0,i,n):new d(i,n)}function g(e,t){if(!t.supported)return;let i=1/0,n=-1/0;const r=t.upperBoundX-t.lowerBoundX;e.forEach(e=>{let a=e.pos[0];for(;a<t.lowerBoundX;)a+=r;for(;a>t.upperBoundX;)a-=r;i=Math.min(i,a),n=Math.max(n,a),e.pos[0]=a});const a=n-i;r-a<a&&e.forEach(e=>{e.pos[0]<0&&(e.pos[0]+=r)})}function v(e,t){const i=Object(n["d"])(e);return"global"===t&&i?{supported:!0,lowerBoundX:i.valid[0],upperBoundX:i.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}},"8b7f":function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("6d8b")),a=r.createHashMap,o=(r.retrieve,r.each);function s(e){this.coordSysName=e,this.coordSysDims=[],this.axisMap=a(),this.categoryAxisMap=a(),this.firstCategoryDimIndex=null}function l(e){var t=e.get("coordinateSystem"),i=new s(t),n=c[t];if(n)return n(e,i,i.axisMap,i.categoryAxisMap),i}var c={cartesian2d:function(e,t,i,n){var r=e.getReferringComponents("xAxis")[0],a=e.getReferringComponents("yAxis")[0];t.coordSysDims=["x","y"],i.set("x",r),i.set("y",a),u(r)&&(n.set("x",r),t.firstCategoryDimIndex=0),u(a)&&(n.set("y",a),t.firstCategoryDimIndex,t.firstCategoryDimIndex=1)},singleAxis:function(e,t,i,n){var r=e.getReferringComponents("singleAxis")[0];t.coordSysDims=["single"],i.set("single",r),u(r)&&(n.set("single",r),t.firstCategoryDimIndex=0)},polar:function(e,t,i,n){var r=e.getReferringComponents("polar")[0],a=r.findAxisModel("radiusAxis"),o=r.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],i.set("radius",a),i.set("angle",o),u(a)&&(n.set("radius",a),t.firstCategoryDimIndex=0),u(o)&&(n.set("angle",o),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(e,t,i,n){t.coordSysDims=["lng","lat"]},parallel:function(e,t,i,n){var r=e.ecModel,a=r.getComponent("parallel",e.get("parallelIndex")),s=t.coordSysDims=a.dimensions.slice();o(a.parallelAxisIndex,(function(e,a){var o=r.getComponent("parallelAxis",e),l=s[a];i.set(l,o),u(o)&&null==t.firstCategoryDimIndex&&(n.set(l,o),t.firstCategoryDimIndex=a)}))}};function u(e){return"category"===e.get("type")}t.getCoordSysInfoBySeries=l},"8bb2":function(e,t,i){},"8c0b":function(e,t,i){"use strict";i("7630")},"8c10":function(e,t){function i(e,t){var i,n=null;try{i=JSON.parse(e,t)}catch(r){n=r}return[n,i]}e.exports=i},"8c2a":function(e,t,i){var n=i("6d8b"),r=i("e0d8"),a=i("3842"),o=i("89e3"),s=r.prototype,l=o.prototype,c=a.getPrecisionSafe,u=a.round,h=Math.floor,d=Math.ceil,p=Math.pow,f=Math.log,m=r.extend({type:"log",base:10,$constructor:function(){r.apply(this,arguments),this._originalScale=new o},getTicks:function(e){var t=this._originalScale,i=this._extent,r=t.getExtent();return n.map(l.getTicks.call(this,e),(function(e){var n=a.round(p(this.base,e));return n=e===i[0]&&t.__fixMin?g(n,r[0]):n,n=e===i[1]&&t.__fixMax?g(n,r[1]):n,n}),this)},getMinorTicks:l.getMinorTicks,getLabel:l.getLabel,scale:function(e){return e=s.scale.call(this,e),p(this.base,e)},setExtent:function(e,t){var i=this.base;e=f(e)/f(i),t=f(t)/f(i),l.setExtent.call(this,e,t)},getExtent:function(){var e=this.base,t=s.getExtent.call(this);t[0]=p(e,t[0]),t[1]=p(e,t[1]);var i=this._originalScale,n=i.getExtent();return i.__fixMin&&(t[0]=g(t[0],n[0])),i.__fixMax&&(t[1]=g(t[1],n[1])),t},unionExtent:function(e){this._originalScale.unionExtent(e);var t=this.base;e[0]=f(e[0])/f(t),e[1]=f(e[1])/f(t),s.unionExtent.call(this,e)},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},niceTicks:function(e){e=e||10;var t=this._extent,i=t[1]-t[0];if(!(i===1/0||i<=0)){var n=a.quantity(i),r=e/i*n;r<=.5&&(n*=10);while(!isNaN(n)&&Math.abs(n)<1&&Math.abs(n)>0)n*=10;var o=[a.round(d(t[0]/n)*n),a.round(h(t[1]/n)*n)];this._interval=n,this._niceExtent=o}},niceExtent:function(e){l.niceExtent.call(this,e);var t=this._originalScale;t.__fixMin=e.fixMin,t.__fixMax=e.fixMax}});function g(e,t){return u(e,c(t))}n.each(["contain","normalize"],(function(e){m.prototype[e]=function(t){return t=f(t)/f(this.base),s[e].call(this,t)}})),m.create=function(){return new m};var v=m;e.exports=v},"8c54":function(e,t,i){},"8d32":function(e,t,i){var n=i("cbe5"),r=n.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(e,t){var i=t.cx,n=t.cy,r=Math.max(t.r,0),a=t.startAngle,o=t.endAngle,s=t.clockwise,l=Math.cos(a),c=Math.sin(a);e.moveTo(l*r+i,c*r+n),e.arc(i,n,r,a,o,!s)}});e.exports=r},"8e43":function(e,t,i){var n=i("6d8b"),r=n.createHashMap,a=n.isObject,o=n.map;function s(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this._map}s.createByAxisModel=function(e){var t=e.option,i=t.data,n=i&&o(i,u);return new s({categories:n,needCollect:!n,deduplication:!1!==t.dedplication})};var l=s.prototype;function c(e){return e._map||(e._map=r(e.categories))}function u(e){return a(e)&&null!=e.value?e.value:e+""}l.getOrdinal=function(e){return c(this).get(e)},l.parseAndCollect=function(e){var t,i=this._needCollect;if("string"!==typeof e&&!i)return e;if(i&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var n=c(this);return t=n.get(e),null==t&&(i?(t=this.categories.length,this.categories[t]=e,n.set(e,t)):t=NaN),t};var h=s;e.exports=h},"8eb3":function(e,t,i){},"8ed2":function(e,t,i){i("48c7");var n=i("6cb7"),r=n.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});e.exports=r},"8f1c":function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));i("c120");var n=i("b2b2"),r=i("0b2d"),a=i("e431"),o=i("af40"),s=i("7577"),l=i("5ef2"),c=i("19b9"),u=i("d0ac"),h=i("caf7"),d=i("86ba"),p=i("647b"),f=i("5fae");class m extends f["a"]{constructor(e){super(e),this._ray=u["f"].create(),this._externalResources=null,this._handles=new o["a"],this._isWorldDown=!1,this._start=Object(r["e"])(),this._end=Object(r["g"])(1,0,0),this._width=1,this._color=Object(l["c"])(1,0,1,1),this._polygonOffset=!1,this._writeDepthEnabled=!0,this._innerWidth=0,this._innerColor=Object(l["c"])(1,1,1,1),this._stippleIntegerRepeats=!0,this._stipplePattern=null,this._stippleOffColor=null,this._falloff=0,this._extensionType=0,this._laserlineStyle=null,this._laserlineEnabled=!1,this._renderOccluded=4,this._fadedExtensions=x,this.applyProps(e)}createExternalResources(){const e=new d["a"](this.materialParameters);this._handles.add(this.view.state.watch("camera",()=>{this.updateGeometry()}));const t=new p["a"]({view:this.view,attached:this._laserlineEnabled});this._externalResources={material:e,laserline:t}}destroyExternalResources(){Object(n["k"])(this._externalResources)&&this._externalResources.laserline.destroy(),this._externalResources=null,this._handles.removeAll()}forEachExternalMaterial(e){Object(n["k"])(this._externalResources)&&e(this._externalResources.material)}createGeometries(e){const t=[Object(r["e"])(),Object(r["e"])()],i=3===this.extensionType;i&&t.push(Object(r["e"])(),Object(r["e"])());const a=i?new Float32Array([1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0]):null,o=h["a"].createPolylineGeometry(t,null,a);e.addGeometry(o,Object(n["q"])(this._externalResources).material),this.updateVertices(o)}updateVisibility(e){super.updateVisibility(e),Object(n["k"])(this._externalResources)&&(this._externalResources.laserline.visible=e)}setStartEndFromWorldDownAtLocation(e){this._isWorldDown=!0,Object(a["j"])(this._start,e),this.view.renderCoordsHelper.worldUpAtPosition(e,this._end),Object(a["i"])(this._end,e,this._end),u["f"].fromPoints(this._start,this._end,this._ray),this.updateGeometry()}get start(){return this._start}set start(e){this._isWorldDown=!1,Object(a["p"])(this._start,e)||(Object(a["j"])(this._start,e),u["f"].fromPoints(this._start,this._end,this._ray),this.updateGeometry())}get end(){return this._end}set end(e){this._isWorldDown=!1,Object(a["p"])(this._end,e)||(Object(a["j"])(this._end,e),u["f"].fromPoints(this._start,this._end,this._ray),this.updateGeometry())}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this.updateMaterial())}get color(){return this._color}set color(e){Object(s["g"])(e,this._color)||(Object(s["c"])(this._color,e),this.updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){e!==this._polygonOffset&&(this._polygonOffset=e,this.updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this.updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this.updateMaterial())}get innerColor(){return this._innerColor}set innerColor(e){Object(s["g"])(e,this._innerColor)||(Object(s["c"])(this._innerColor,e),this.updateMaterial())}get stippleIntegerRepeats(){return this._stippleIntegerRepeats}set stippleIntegerRepeats(e){e!==this._stippleIntegerRepeats&&(this._stippleIntegerRepeats=e,this.updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(e){const t=Object(n["k"])(e)!==Object(n["k"])(this._stipplePattern);this._stipplePattern=e,t?this.recreate():this.updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(e){(Object(n["j"])(e)||Object(n["j"])(this._stippleOffColor)||!Object(s["g"])(e,this._stippleOffColor))&&(this._stippleOffColor=Object(n["k"])(e)?Object(l["a"])(e):null,this.updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this.updateMaterial())}get extensionType(){return this._extensionType}set extensionType(e){e!==this._extensionType&&(this._extensionType=e,this.updateGeometry())}get _laserlineAttached(){return this._laserlineEnabled&&Object(n["k"])(this._laserlineStyle)}get laserlineStyle(){return this._laserlineStyle}set laserlineStyle(e){this._laserlineStyle=e,Object(n["k"])(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached,Object(n["k"])(e)&&(this._externalResources.laserline.style=e))}get laserlineEnabled(){return this._laserlineEnabled}set laserlineEnabled(e){this._laserlineEnabled!==e&&(this._laserlineEnabled=e,Object(n["k"])(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached))}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this.updateMaterial())}get fadedExtensions(){return this._fadedExtensions}set fadedExtensions(e){this._fadedExtensions=Object(n["r"])(e,x),this.recreateGeometry()}updateMaterial(){Object(n["j"])(this._externalResources)||this._externalResources.material.setParameterValues(this.materialParameters)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stippleIntegerRepeats:this._stippleIntegerRepeats,innerWidth:this._innerWidth,innerColor:this._innerColor,falloff:this._falloff,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}updateGeometry(){Object(n["k"])(this.object)&&this.updateVertices(this.object.geometries[0])}updateVertices(e){const t=3===this._extensionType?this.updateLineSegmentFinite(_):this.updateLineSegmentInfinite(this._extensionType,_);this.updateVertexAttributes(e,t),Object(n["k"])(this._externalResources)&&(this._externalResources.laserline.intersectsLine=t)}updateLineSegmentFinite(e){return u["d"].fromPoints(this._start,this._end,e)}updateLineSegmentInfinite(e,t){const i=this.view.state.camera;switch(Object(c["e"])(this._ray,g),e){case 0:g.c0=-Number.MAX_VALUE;break;case 1:case 2:{const e=this._ray.origin,t=Object(n["r"])(this.view.elevationProvider.getElevation(e[0],e[1],e[2],this.view.renderCoordsHelper.spatialReference,"ground"),0),i=this.view.renderCoordsHelper.getAltitude(e);this._isWorldDown&&i<t&&Object(a["s"])(g.ray.direction,g.ray.direction),2===this._extensionType&&null!=t&&(g.c1=Math.abs(i-t));break}}if(!u["c"].intersectClipRay(i.frustum,g))return u["d"].fromPoints(this._start,this._end,t);const r=Object(c["f"])(g,v),o=Object(c["d"])(g,y);return u["d"].fromPoints(r,o,t)}updateVertexAttributes(e,t){const i=e.getMutableAttribute("position").data;if(3===this.extensionType){const e=u["d"].pointAt(t,-this.fadedExtensions.start,v);i[0]=e[0],i[1]=e[1],i[2]=e[2];const n=u["d"].pointAt(t,0,v);i[3]=n[0],i[4]=n[1],i[5]=n[2];const r=u["d"].pointAt(t,1,v);i[6]=r[0],i[7]=r[1],i[8]=r[2];const a=u["d"].pointAt(t,1+this.fadedExtensions.end,v);i[9]=a[0],i[10]=a[1],i[11]=a[2]}else{const e=u["d"].pointAt(t,0,v);i[0]=e[0],i[1]=e[1],i[2]=e[2];const n=u["d"].pointAt(t,1,v);i[3]=n[0],i[4]=n[1],i[5]=n[2]}Object(n["k"])(this.object)&&this.object.geometryVertexAttrsUpdated(0)}}const g=Object(c["b"])(),v=Object(r["e"])(),y=Object(r["e"])(),_=u["d"].create(),b=1/3,x={start:b,end:b}},"8f7b":function(e,t){var i=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+i.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+i.source+n.source+"*(?::"+i.source+n.source+"*)?$"),a=0,o=1,s=2,l=3,c=4,u=5,h=6,d=7;function p(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,p)}function f(){}function m(e,t,i,n,r){function a(e){if(e>65535){e-=65536;var t=55296+(e>>10),i=56320+(1023&e);return String.fromCharCode(t,i)}return String.fromCharCode(e)}function o(e){var t=e.slice(1,-1);return t in i?i[t]:"#"===t.charAt(0)?a(parseInt(t.substr(1).replace("x","0x"))):(r.error("entity not found:"+e),e)}function s(t){if(t>x){var i=e.substring(x,t).replace(/&#?\w+;/g,o);d&&l(x),n.characters(i,0,t-x),x=t}}function l(t,i){while(t>=u&&(i=h.exec(e)))c=i.index,u=c+i[0].length,d.lineNumber++;d.columnNumber=t-c+1}var c=0,u=0,h=/.*(?:\r\n?|\n)|.*$/g,d=n.locator,f=[{currentNSMap:t}],m={},x=0;while(1){try{var O=e.indexOf("<",x);if(O<0){if(!e.substr(x).match(/^\s*$/)){var C=n.doc,k=C.createTextNode(e.substr(x));C.appendChild(k),n.currentElement=k}return}switch(O>x&&s(O),e.charAt(O+1)){case"/":var P=e.indexOf(">",O+3),E=e.substring(O+2,P),A=f.pop();P<0?(E=e.substring(O+2).replace(/[\s<].*/,""),r.error("end tag name: "+E+" is not complete:"+A.tagName),P=O+1+E.length):E.match(/\s</)&&(E=E.replace(/[\s<].*/,""),r.error("end tag name: "+E+" maybe not complete"),P=O+1+E.length);var I=A.localNSMap,M=A.tagName==E,D=M||A.tagName&&A.tagName.toLowerCase()==E.toLowerCase();if(D){if(n.endElement(A.uri,A.localName,E),I)for(var j in I)n.endPrefixMapping(j);M||r.fatalError("end tag name: "+E+" is not match the current start tagName:"+A.tagName)}else f.push(A);P++;break;case"?":d&&l(O),P=T(e,O,n);break;case"!":d&&l(O),P=w(e,O,n,r);break;default:d&&l(O);var L=new S,R=f[f.length-1].currentNSMap,N=(P=v(e,O,L,R,o,r),L.length);if(!L.closed&&b(e,P,L.tagName,m)&&(L.closed=!0,i.nbsp||r.warning("unclosed xml attribute")),d&&N){for(var z=g(d,{}),B=0;B<N;B++){var V=L[B];l(V.offset),V.locator=g(d,{})}n.locator=z,y(L,n,R)&&f.push(L),n.locator=d}else y(L,n,R)&&f.push(L);"http://www.w3.org/1999/xhtml"!==L.uri||L.closed?P++:P=_(e,P,L.tagName,o,n)}}catch(F){if(F instanceof p)throw F;r.error("element parse error: "+F),P=-1}P>x?x=P:s(Math.max(O,x)+1)}}function g(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function v(e,t,i,n,r,p){function f(e,t,n){e in i.attributeNames&&p.fatalError("Attribute "+e+" redefined"),i.addValue(e,t,n)}var m,g=++t,v=a;while(1){var y=e.charAt(g);switch(y){case"=":if(v===o)m=e.slice(t,g),v=l;else{if(v!==s)throw new Error("attribute equal must after attrName");v=l}break;case"'":case'"':if(v===l||v===o){if(v===o&&(p.warning('attribute value must after "="'),m=e.slice(t,g)),t=g+1,g=e.indexOf(y,t),!(g>0))throw new Error("attribute value no end '"+y+"' match");_=e.slice(t,g).replace(/&#?\w+;/g,r),f(m,_,t-1),v=u}else{if(v!=c)throw new Error('attribute value must after "="');_=e.slice(t,g).replace(/&#?\w+;/g,r),f(m,_,t),p.warning('attribute "'+m+'" missed start quot('+y+")!!"),t=g+1,v=u}break;case"/":switch(v){case a:i.setTagName(e.slice(t,g));case u:case h:case d:v=d,i.closed=!0;case c:case o:case s:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return p.error("unexpected end of input"),v==a&&i.setTagName(e.slice(t,g)),g;case">":switch(v){case a:i.setTagName(e.slice(t,g));case u:case h:case d:break;case c:case o:_=e.slice(t,g),"/"===_.slice(-1)&&(i.closed=!0,_=_.slice(0,-1));case s:v===s&&(_=m),v==c?(p.warning('attribute "'+_+'" missed quot(")!'),f(m,_.replace(/&#?\w+;/g,r),t)):("http://www.w3.org/1999/xhtml"===n[""]&&_.match(/^(?:disabled|checked|selected)$/i)||p.warning('attribute "'+_+'" missed value!! "'+_+'" instead!!'),f(_,_,t));break;case l:throw new Error("attribute value missed!!")}return g;case"":y=" ";default:if(y<=" ")switch(v){case a:i.setTagName(e.slice(t,g)),v=h;break;case o:m=e.slice(t,g),v=s;break;case c:var _=e.slice(t,g).replace(/&#?\w+;/g,r);p.warning('attribute "'+_+'" missed quot(")!!'),f(m,_,t);case u:v=h;break}else switch(v){case s:i.tagName;"http://www.w3.org/1999/xhtml"===n[""]&&m.match(/^(?:disabled|checked|selected)$/i)||p.warning('attribute "'+m+'" missed value!! "'+m+'" instead2!!'),f(m,m,t),t=g,v=o;break;case u:p.warning('attribute space is required"'+m+'"!!');case h:v=o,t=g;break;case l:v=c,t=g;break;case d:throw new Error("elements closed character '/' and '>' must be connected to")}}g++}}function y(e,t,i){var n=e.tagName,r=null,a=e.length;while(a--){var o=e[a],s=o.qName,l=o.value,c=s.indexOf(":");if(c>0)var u=o.prefix=s.slice(0,c),h=s.slice(c+1),d="xmlns"===u&&h;else h=s,u=null,d="xmlns"===s&&"";o.localName=h,!1!==d&&(null==r&&(r={},x(i,i={})),i[d]=r[d]=l,o.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(d,l))}a=e.length;while(a--){o=e[a];u=o.prefix;u&&("xml"===u&&(o.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(o.uri=i[u||""]))}c=n.indexOf(":");c>0?(u=e.prefix=n.slice(0,c),h=e.localName=n.slice(c+1)):(u=null,h=e.localName=n);var p=e.uri=i[u||""];if(t.startElement(p,h,n,e),!e.closed)return e.currentNSMap=i,e.localNSMap=r,!0;if(t.endElement(p,h,n),r)for(u in r)t.endPrefixMapping(u)}function _(e,t,i,n,r){if(/^(?:script|textarea)$/i.test(i)){var a=e.indexOf("</"+i+">",t),o=e.substring(t+1,a);if(/[&<]/.test(o))return/^script$/i.test(i)?(r.characters(o,0,o.length),a):(o=o.replace(/&#?\w+;/g,n),r.characters(o,0,o.length),a)}return t+1}function b(e,t,i,n){var r=n[i];return null==r&&(r=e.lastIndexOf("</"+i+">"),r<t&&(r=e.lastIndexOf("</"+i)),n[i]=r),r<t}function x(e,t){for(var i in e)t[i]=e[i]}function w(e,t,i,n){var r=e.charAt(t+2);switch(r){case"-":if("-"===e.charAt(t+3)){var a=e.indexOf("--\x3e",t+4);return a>t?(i.comment(e,t+4,a-t-4),a+3):(n.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==e.substr(t+3,6)){a=e.indexOf("]]>",t+9);return i.startCDATA(),i.characters(e,t+9,a-t-9),i.endCDATA(),a+3}var o=O(e,t),s=o.length;if(s>1&&/!doctype/i.test(o[0][0])){var l=o[1][0],c=!1,u=!1;s>3&&(/^public$/i.test(o[2][0])?(c=o[3][0],u=s>4&&o[4][0]):/^system$/i.test(o[2][0])&&(u=o[3][0]));var h=o[s-1];return i.startDTD(l,c,u),i.endDTD(),h.index+h[0].length}}return-1}function T(e,t,i){var n=e.indexOf("?>",t);if(n){var r=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(r){r[0].length;return i.processingInstruction(r[1],r[2]),n+2}return-1}return-1}function S(){this.attributeNames={}}function O(e,t){var i,n=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=t,r.exec(e);while(i=r.exec(e))if(n.push(i),i[1])return n}p.prototype=new Error,p.prototype.name=p.name,f.prototype={parse:function(e,t,i){var n=this.domBuilder;n.startDocument(),x(t,t={}),m(e,t,i,n,this.errorHandler),n.endDocument()}},S.prototype={setTagName:function(e){if(!r.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,i){if(!r.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:i}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=f,t.ParseError=p},"903c":function(e,t){function i(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries((function(e){for(var i=0;i<t.length;i++)if(!t[i].isSelected(e.name))return!1;return!0}))}e.exports=i},9152:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,i,n,r){var a,o,s=8*r-n-1,l=(1<<s)-1,c=l>>1,u=-7,h=i?r-1:0,d=i?-1:1,p=e[t+h];for(h+=d,a=p&(1<<-u)-1,p>>=-u,u+=s;u>0;a=256*a+e[t+h],h+=d,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=n;u>0;o=256*o+e[t+h],h+=d,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),a-=c}return(p?-1:1)*o*Math.pow(2,a-n)},t.write=function(e,t,i,n,r,a){var o,s,l,c=8*a-r-1,u=(1<<c)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),t+=o+h>=1?d/l:d*Math.pow(2,1-h),t*l>=2&&(o++,l/=2),o+h>=u?(s=0,o=u):o+h>=1?(s=(t*l-1)*Math.pow(2,r),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;e[i+p]=255&s,p+=f,s/=256,r-=8);for(o=o<<r|s,c+=r;c>0;e[i+p]=255&o,p+=f,o/=256,c-=8);e[i+p-f]|=128*m}},9155:function(e,t,i){"use strict";i("6c06")},"923d":function(e,t,i){var n=i("6d8b"),r=i("3842"),a=i("ee1a"),o=a.isDimensionStacked,s=n.indexOf;function l(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function c(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function u(e,t,i,n,a,s){var l=[],c=o(t,n),u=c?t.getCalculationInfo("stackResultDimension"):n,h=y(t,u,e),d=t.indicesOfNearest(u,h)[0];l[a]=t.get(i,d),l[s]=t.get(u,d);var p=t.get(n,d),f=r.getPrecision(t.get(n,d));return f=Math.min(f,20),f>=0&&(l[s]=+l[s].toFixed(f)),[l,p]}var h=n.curry,d={min:h(u,"min"),max:h(u,"max"),average:h(u,"average")};function p(e,t){var i=e.getData(),r=e.coordinateSystem;if(t&&!c(t)&&!n.isArray(t.coord)&&r){var a=r.dimensions,o=f(t,i,r,e);if(t=n.clone(t),t.type&&d[t.type]&&o.baseAxis&&o.valueAxis){var l=s(a,o.baseAxis.dim),u=s(a,o.valueAxis.dim),h=d[t.type](i,o.baseDataDim,o.valueDataDim,l,u);t.coord=h[0],t.value=h[1]}else{for(var p=[null!=t.xAxis?t.xAxis:t.radiusAxis,null!=t.yAxis?t.yAxis:t.angleAxis],m=0;m<2;m++)d[p[m]]&&(p[m]=y(i,i.mapDimension(a[m]),p[m]));t.coord=p}}return t}function f(e,t,i,n){var r={};return null!=e.valueIndex||null!=e.valueDim?(r.valueDataDim=null!=e.valueIndex?t.getDimension(e.valueIndex):e.valueDim,r.valueAxis=i.getAxis(m(n,r.valueDataDim)),r.baseAxis=i.getOtherAxis(r.valueAxis),r.baseDataDim=t.mapDimension(r.baseAxis.dim)):(r.baseAxis=n.getBaseAxis(),r.valueAxis=i.getOtherAxis(r.baseAxis),r.baseDataDim=t.mapDimension(r.baseAxis.dim),r.valueDataDim=t.mapDimension(r.valueAxis.dim)),r}function m(e,t){var i=e.getData(),n=i.dimensions;t=i.getDimension(t);for(var r=0;r<n.length;r++){var a=i.getDimensionInfo(n[r]);if(a.name===t)return a.coordDim}}function g(e,t){return!(e&&e.containData&&t.coord&&!l(t))||e.containData(t.coord)}function v(e,t,i,n){return n<2?e.coord&&e.coord[n]:e.value}function y(e,t,i){if("average"===i){var n=0,r=0;return e.each(t,(function(e,t){isNaN(e)||(n+=e,r++)})),n/r}return"median"===i?e.getMedian(t):e.getDataExtent(t,!0)["max"===i?1:0]}t.dataTransform=p,t.getAxisInfo=f,t.dataFilter=g,t.dimValueGetter=v,t.numCalculate=y},"92af":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("df3b");class r extends n["a"]{constructor({coordinateHelper:e,targetPoint:t,objectId:i,constraint:n}){super(e,t,n),this.objectId=i}}},9307:function(e,t,i){},"939c":function(e,t,i){},"93d0":function(e,t){var i="original",n="arrayRows",r="objectRows",a="keyedColumns",o="unknown",s="typedArray",l="column",c="row";t.SOURCE_FORMAT_ORIGINAL=i,t.SOURCE_FORMAT_ARRAY_ROWS=n,t.SOURCE_FORMAT_OBJECT_ROWS=r,t.SOURCE_FORMAT_KEYED_COLUMNS=a,t.SOURCE_FORMAT_UNKNOWN=o,t.SOURCE_FORMAT_TYPED_ARRAY=s,t.SERIES_LAYOUT_BY_COLUMN=l,t.SERIES_LAYOUT_BY_ROW=c},"944e":function(e,t,i){var n=i("3842"),r=n.round;function a(e,t,i,a){var s={},c=e[1]-e[0],u=s.interval=n.nice(c/t,!0);null!=i&&u<i&&(u=s.interval=i),null!=a&&u>a&&(u=s.interval=a);var h=s.intervalPrecision=o(u),d=s.niceTickExtent=[r(Math.ceil(e[0]/u)*u,h),r(Math.floor(e[1]/u)*u,h)];return l(d,e),s}function o(e){return n.getPrecisionSafe(e)+2}function s(e,t,i){e[t]=Math.max(Math.min(e[t],i[1]),i[0])}function l(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),s(e,0,t),s(e,1,t),e[0]>e[1]&&(e[0]=e[1])}t.intervalScaleNiceTicks=a,t.getIntervalPrecision=o,t.fixExtent=l},"946e":function(e,t,i){"use strict";i("8a4f")},"94a8":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMMAAAAQCAYAAACr1csrAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFIGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjEtMDYtMDlUMjI6MjU6MzgrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIxLTA2LTA5VDIyOjI4OjAzKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTA2LTA5VDIyOjI4OjAzKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVkOWNkOGNjLTM3ZTYtNGZiMS04Mzg2LTI0NDFlODUwMTNkZCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1ZDljZDhjYy0zN2U2LTRmYjEtODM4Ni0yNDQxZTg1MDEzZGQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ZDljZDhjYy0zN2U2LTRmYjEtODM4Ni0yNDQxZTg1MDEzZGQiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjVkOWNkOGNjLTM3ZTYtNGZiMS04Mzg2LTI0NDFlODUwMTNkZCIgc3RFdnQ6d2hlbj0iMjAyMS0wNi0wOVQyMjoyNTozOCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+N0IN5gAAAehJREFUaIHt2s1qE1EYgOH3TE4CbaCapqWUNs1EFJy4s3ShuPEGituCbnoF3kld6c6N1+C64KaIO1GyUNRauigpURexP57M5yKMTtrJjzb15/A9EAjDMJwweedwZsaw0cwBN283tp8BbL58unvx084BEqOUzw6nSvbG9bUQYDOqLgVZO4kx5o+OSql/wOkYbMFIYA1oD8pfEuSMs/meP3kSw3Gy4dJcdOGgOJ2PbSHQIJSPJMgZNzEZhJXlUmpzJwAEaNYi+wqgWl4sVpZWpjUI5aMkhPnLt8qVUm0KIKrLFtBOYth7zMK9WmRfgwah/JQVwtW6PH8o4R1SMXwF3moQylf9Qngk4SrQAlyyZhCgDbzRIJRvRgkBeu8maRDKO6OGAKdvrWoQyhvDQpD7My69v806Bqkg1qPdJ+8b7lq1vFgE2Pn4ojXRbn0zsRMjIuf9g9Qg0j1b6Gk46VdDgOwYYEgQ7/YaX3DHegb+spw4sfFRB2Ixel3q4WzehJXl0qghABg2moOOaYAicGWdbhBjH7VS52xQCObB/o/vme8mpaRniLvJgzml/hdRXbaGzQiJYTPDz/1gEpgDZoHCmUepxuEQ+AwcoQuHLB26F/M2qbtG/fRbM5yUPJj7AGz/7sjU2Enqo87oO3uU7mD0ptNqAAAAAElFTkSuQmCC"},"94b1":function(e,t,i){var n=i("3eba"),r=i("6d8b"),a=i("9d57"),o=a.layout,s=a.largeLayout;i("5aa9"),i("17b8"),i("67cc"),i("01ed"),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,r.curry(o,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,s),n.registerVisual({seriesType:"bar",reset:function(e){e.getData().setVisual("legendSymbol","roundRect")}})},"94e41":function(e,t,i){var n=i("401b"),r=i("53f3"),a=r.getSymbolSize,o=r.getNodeGlobalScale,s=i("6d8b"),l=i("0c37"),c=l.getCurvenessForEdge,u=Math.PI,h=[];function d(e,t){var i=e.coordinateSystem;if(!i||"view"===i.type){var r=i.getBoundingRect(),a=e.getData(),o=a.graph,l=r.width/2+r.x,u=r.height/2+r.y,h=Math.min(r.width,r.height)/2,d=a.count();a.setLayout({cx:l,cy:u}),d&&(p[t](e,i,o,a,h,l,u,d),o.eachEdge((function(t,i){var r,a=s.retrieve3(t.getModel().get("lineStyle.curveness"),c(t,e,i),0),o=n.clone(t.node1.getLayout()),h=n.clone(t.node2.getLayout()),d=(o[0]+h[0])/2,p=(o[1]+h[1])/2;+a&&(a*=3,r=[l*a+d*(1-a),u*a+p*(1-a)]),t.setLayout([o,h,r])})))}}var p={value:function(e,t,i,n,r,a,o,s){var l=0,c=n.getSum("value"),u=2*Math.PI/(c||s);i.eachNode((function(e){var t=e.getValue("value"),i=u*(c?t:1)/2;l+=i,e.setLayout([r*Math.cos(l)+a,r*Math.sin(l)+o]),l+=i}))},symbolSize:function(e,t,i,n,r,s,l,c){var d=0;h.length=c;var p=o(e);i.eachNode((function(e){var t=a(e);isNaN(t)&&(t=2),t<0&&(t=0),t*=p;var i=Math.asin(t/2/r);isNaN(i)&&(i=u/2),h[e.dataIndex]=i,d+=2*i}));var f=(2*u-d)/c/2,m=0;i.eachNode((function(e){var t=f+h[e.dataIndex];m+=t,e.setLayout([r*Math.cos(m)+s,r*Math.sin(m)+l]),m+=t}))}};t.circularLayout=d},9569:function(e,t,i){"use strict";i("291d")},"95a8":function(e,t,i){var n=i("3eba");i("1953"),i("307d"),n.registerPreprocessor((function(e){e.markLine=e.markLine||{}}))},9617:function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return a}));var n=i("38862"),r=i("d047");function a(e){e.include(r["a"]),e.uniforms.add("geometryDepthTexture","sampler2D"),e.uniforms.add("cameraNearFar","vec2"),e.code.add(n["a"]`
    //Compare the linearized depths of the vertex/fragment and the geometry in the scene. If vertex/fragment is behind geometry, don't draw it.
    bool geometryDepthTest(vec2 pos, float elementDepth){

      float geometryDepth = linearDepthFromTexture(geometryDepthTexture, pos, cameraNearFar);
      if(elementDepth < (geometryDepth - 1.0)){
        return true;
      }
      return false;
    }
  `)}function o(e,t,i){i.multipassGeometryEnabled&&i.geometryLinearDepthTexture&&(e.setUniform1i("geometryDepthTexture",11),t.bindTexture(i.geometryLinearDepthTexture,11))}},9680:function(e,t){function i(e,t,i,n,r,a,o){if(0===r)return!1;var s=r,l=0,c=e;if(o>t+s&&o>n+s||o<t-s&&o<n-s||a>e+s&&a>i+s||a<e-s&&a<i-s)return!1;if(e===i)return Math.abs(a-e)<=s/2;l=(t-n)/(e-i),c=(e*n-i*t)/(e-i);var u=l*a-o+c,h=u*u/(l*l+1);return h<=s/2*s/2}t.containStroke=i},9704:function(e,t,i){var n=i("3eba"),r=i("6d8b"),a=i("f706"),o=i("73ca"),s=i("4a01"),l=i("01ef"),c=i("c526"),u=c.onIrrelevantElement,h=i("2306"),d=i("480f"),p=i("53f3"),f=p.getNodeGlobalScale,m="__focusNodeAdjacency",g="__unfocusNodeAdjacency",v=["itemStyle","opacity"],y=["lineStyle","opacity"];function _(e,t){var i=e.getVisual("opacity");return null!=i?i:e.getModel().get(t)}function b(e,t,i){var n=e.getGraphicEl(),r=_(e,t);null!=i&&(null==r&&(r=1),r*=i),n.downplay&&n.downplay(),n.traverse((function(e){if(!e.isGroup){var t=e.lineLabelOriginalOpacity;null!=t&&null==i||(t=r),e.setStyle("opacity",t)}}))}function x(e,t){var i=_(e,t),n=e.getGraphicEl();n.traverse((function(e){!e.isGroup&&e.setStyle("opacity",i)})),n.highlight&&n.highlight()}var w=n.extendChartView({type:"graph",init:function(e,t){var i=new a,n=new o,r=this.group;this._controller=new s(t.getZr()),this._controllerHost={target:r},r.add(i.group),r.add(n.group),this._symbolDraw=i,this._lineDraw=n,this._firstRender=!0},render:function(e,t,i){var n=this,r=e.coordinateSystem;this._model=e;var a=this._symbolDraw,o=this._lineDraw,s=this.group;if("view"===r.type){var l={position:r.position,scale:r.scale};this._firstRender?s.attr(l):h.updateProps(s,l,e)}d(e.getGraph(),f(e));var c=e.getData();a.updateData(c);var u=e.getEdgeData();o.updateData(u),this._updateNodeAndLinkScale(),this._updateController(e,t,i),clearTimeout(this._layoutTimeout);var p=e.forceLayout,v=e.get("force.layoutAnimation");p&&this._startForceLayoutIteration(p,v),c.eachItemGraphicEl((function(t,r){var a=c.getItemModel(r);t.off("drag").off("dragend");var o=a.get("draggable");o&&t.on("drag",(function(){p&&(p.warmUp(),!this._layouting&&this._startForceLayoutIteration(p,v),p.setFixed(r),c.setItemLayout(r,t.position))}),this).on("dragend",(function(){p&&p.setUnfixed(r)}),this),t.setDraggable(o&&p),t[m]&&t.off("mouseover",t[m]),t[g]&&t.off("mouseout",t[g]),a.get("focusNodeAdjacency")&&(t.on("mouseover",t[m]=function(){n._clearTimer(),i.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:t.dataIndex})}),t.on("mouseout",t[g]=function(){n._dispatchUnfocus(i)}))}),this),c.graph.eachEdge((function(t){var r=t.getGraphicEl();r[m]&&r.off("mouseover",r[m]),r[g]&&r.off("mouseout",r[g]),t.getModel().get("focusNodeAdjacency")&&(r.on("mouseover",r[m]=function(){n._clearTimer(),i.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:t.dataIndex})}),r.on("mouseout",r[g]=function(){n._dispatchUnfocus(i)}))}));var y="circular"===e.get("layout")&&e.get("circular.rotateLabel"),_=c.getLayout("cx"),b=c.getLayout("cy");c.eachItemGraphicEl((function(e,t){var i=c.getItemModel(t),n=i.get("label.rotate")||0,r=e.getSymbolPath();if(y){var a=c.getItemLayout(t),o=Math.atan2(a[1]-b,a[0]-_);o<0&&(o=2*Math.PI+o);var s=a[0]<_;s&&(o-=Math.PI);var l=s?"left":"right";h.modifyLabelStyle(r,{textRotation:-o,textPosition:l,textOrigin:"center"},{textPosition:l})}else h.modifyLabelStyle(r,{textRotation:n*=Math.PI/180})})),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(e,t){var i=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout((function(){i._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:i._model.id})}),500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,i,n){var a=e.getData(),o=a.graph,s=n.dataIndex,l=n.edgeDataIndex,c=o.getNodeByIndex(s),u=o.getEdgeByIndex(l);(c||u)&&(o.eachNode((function(e){b(e,v,.1)})),o.eachEdge((function(e){b(e,y,.1)})),c&&(x(c,v),r.each(c.edges,(function(e){e.dataIndex<0||(x(e,y),x(e.node1,v),x(e.node2,v))}))),u&&(x(u,y),x(u.node1,v),x(u.node2,v)))},unfocusNodeAdjacency:function(e,t,i,n){var r=e.getData().graph;r.eachNode((function(e){b(e,v)})),r.eachEdge((function(e){b(e,y)}))},_startForceLayoutIteration:function(e,t){var i=this;(function n(){e.step((function(e){i.updateLayout(i._model),(i._layouting=!e)&&(t?i._layoutTimeout=setTimeout(n,16):n())}))})()},_updateController:function(e,t,i){var n=this._controller,r=this._controllerHost,a=this.group;n.setPointerChecker((function(t,n,r){var o=a.getBoundingRect();return o.applyTransform(a.transform),o.contain(n,r)&&!u(t,i,e)})),"view"===e.coordinateSystem.type?(n.enable(e.get("roam")),r.zoomLimit=e.get("scaleLimit"),r.zoom=e.coordinateSystem.getZoom(),n.off("pan").off("zoom").on("pan",(function(t){l.updateViewOnPan(r,t.dx,t.dy),i.dispatchAction({seriesId:e.id,type:"graphRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){l.updateViewOnZoom(r,t.scale,t.originX,t.originY),i.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),this._updateNodeAndLinkScale(),d(e.getGraph(),f(e)),this._lineDraw.updateLayout()}),this)):n.disable()},_updateNodeAndLinkScale:function(){var e=this._model,t=e.getData(),i=f(e),n=[i,i];t.eachItemGraphicEl((function(e,t){e.attr("scale",n)}))},updateLayout:function(e){d(e.getGraph(),f(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}});e.exports=w},9850:function(e,t,i){var n=i("401b"),r=i("1687"),a=n.applyTransform,o=Math.min,s=Math.max;function l(e,t,i,n){i<0&&(e+=i,i=-i),n<0&&(t+=n,n=-n),this.x=e,this.y=t,this.width=i,this.height=n}l.prototype={constructor:l,union:function(e){var t=o(e.x,this.x),i=o(e.y,this.y);this.width=s(e.x+e.width,this.x+this.width)-t,this.height=s(e.y+e.height,this.y+this.height)-i,this.x=t,this.y=i},applyTransform:function(){var e=[],t=[],i=[],n=[];return function(r){if(r){e[0]=i[0]=this.x,e[1]=n[1]=this.y,t[0]=n[0]=this.x+this.width,t[1]=i[1]=this.y+this.height,a(e,e,r),a(t,t,r),a(i,i,r),a(n,n,r),this.x=o(e[0],t[0],i[0],n[0]),this.y=o(e[1],t[1],i[1],n[1]);var l=s(e[0],t[0],i[0],n[0]),c=s(e[1],t[1],i[1],n[1]);this.width=l-this.x,this.height=c-this.y}}}(),calculateTransform:function(e){var t=this,i=e.width/t.width,n=e.height/t.height,a=r.create();return r.translate(a,a,[-t.x,-t.y]),r.scale(a,a,[i,n]),r.translate(a,a,[e.x,e.y]),a},intersect:function(e){if(!e)return!1;e instanceof l||(e=l.create(e));var t=this,i=t.x,n=t.x+t.width,r=t.y,a=t.y+t.height,o=e.x,s=e.x+e.width,c=e.y,u=e.y+e.height;return!(n<o||s<i||a<c||u<r)},contain:function(e,t){var i=this;return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},clone:function(){return new l(this.x,this.y,this.width,this.height)},copy:function(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},l.create=function(e){return new l(e.x,e.y,e.width,e.height)};var c=l;e.exports=c},"98b7":function(e,t){var i="undefined"!==typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){setTimeout(e,16)};e.exports=i},"98e7":function(e,t,i){var n=i("6d8b"),r=n.createHashMap;function a(e){return{getTargetSeries:function(t){var i={},n=r();return t.eachSeriesByType(e,(function(e){e.__paletteScope=i,n.set(e.uid,e)})),n},reset:function(e,t){var i=e.getRawData(),n={},r=e.getData();r.each((function(e){var t=r.getRawIndex(e);n[t]=e})),i.each((function(t){var a,o=n[t],s=null!=o&&r.getItemVisual(o,"color",!0),l=null!=o&&r.getItemVisual(o,"borderColor",!0);if(s&&l||(a=i.getItemModel(t)),!s){var c=a.get("itemStyle.color")||e.getColorFromPalette(i.getName(t)||t+"",e.__paletteScope,i.count());null!=o&&r.setItemVisual(o,"color",c)}if(!l){var u=a.get("itemStyle.borderColor");null!=o&&r.setItemVisual(o,"borderColor",u)}}))}}}e.exports=a},"998c":function(e,t,i){var n=i("6d8b"),r=i("2306"),a=i("e86a"),o=Math.PI;function s(e,t){t=t||{},n.defaults(t,{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var i=new r.Group,s=new r.Rect({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});i.add(s);var l=t.fontSize+" sans-serif",c=new r.Rect({style:{fill:"none",text:t.text,font:l,textPosition:"right",textDistance:10,textFill:t.textColor},zlevel:t.zlevel,z:10001});if(i.add(c),t.showSpinner){var u=new r.Arc({shape:{startAngle:-o/2,endAngle:-o/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001});u.animateShape(!0).when(1e3,{endAngle:3*o/2}).start("circularInOut"),u.animateShape(!0).when(1e3,{startAngle:3*o/2}).delay(300).start("circularInOut"),i.add(u)}return i.resize=function(){var i=a.getWidth(t.text,l),n=t.showSpinner?t.spinnerRadius:0,r=(e.getWidth()-2*n-(t.showSpinner&&i?10:0)-i)/2-(t.showSpinner?0:i/2),o=e.getHeight()/2;t.showSpinner&&u.setShape({cx:r,cy:o}),c.setShape({x:r-n,y:o-n,width:2*n,height:2*n}),s.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},i.resize(),i}e.exports=s},"9a68":function(e,t,i){"use strict";i.d(t,"a",(function(){return m})),i.d(t,"b",(function(){return f}));var n=i("38862"),r=i("690a"),a=i("4377"),o=i("d272"),s=i("d047"),l=i("ebd5"),c=i("c6d7"),u=i("e6aa"),h=i("c2d1"),d=i("6750"),p=i("c51b");function f(e){const t=new r["a"];t.extensions.add("GL_OES_standard_derivatives"),t.include(p["a"]),t.include(u["a"],e),t.include(d["a"],e),1===e.output&&t.include(h["a"],e),t.vertex.uniforms.add("proj","mat4").add("view","mat4").add("cameraNearFar","vec2").add("pixelRatio","float").add("miterLimit","float").add("screenSize","vec2"),t.attributes.add("position","vec3"),t.attributes.add("subdivisionFactor","float"),t.attributes.add("uv0","vec2"),t.attributes.add("auxpos1","vec3"),t.attributes.add("auxpos2","vec3"),t.varyings.add("vColor","vec4"),t.varyings.add("vpos","vec3"),t.varyings.add("linearDepth","float"),e.multipassTerrainEnabled&&t.varyings.add("depth","float");const i=e.falloffEnabled,f=e.innerColorEnabled;return f&&t.varyings.add("vLineDistance","float"),i&&t.varyings.add("vLineDistanceNorm","float"),e.falloffEnabled&&t.fragment.uniforms.add("falloff","float"),e.innerColorEnabled&&(t.fragment.uniforms.add("innerColor","vec4"),t.fragment.uniforms.add("innerWidth","float")),t.vertex.code.add(n["a"]`
		#define PERPENDICULAR(v) vec2(v.y, -v.x);
		#define ISOUTSIDE (left.x * right.y - left.y * right.x)*uv0.y > 0.0

		float interp(float ncp, vec4 a, vec4 b) {
			return (-ncp - a.z) / (b.z - a.z);
		}

		vec2 rotate(vec2 v, float a) {
			float s = sin(a);
			float c = cos(a);
			mat2 m = mat2(c, -s, s, c);
			return m * v;
		}
`),t.vertex.code.add(n["a"]`
    vec4 projectAndScale(vec4 pos) {
      vec4 posNdc = proj * pos;

      // Note that posNdc is in -1:1, scaling by screenSize converts this to a coordinate system
      // that is twice scaled (going from -size:size).
      posNdc.xy *= screenSize / posNdc.w;
      return posNdc;
    }
`),t.vertex.code.add(n["a"]`
    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {
      float vnp = cameraNearFar[0] * 0.99;

      //current pos behind ncp --> we need to clip
      if(pos.z > -cameraNearFar[0]) {
        if (!isStartVertex) {
          //previous in front of ncp
          if(prev.z < -cameraNearFar[0]) {
            pos = mix(prev, pos, interp(vnp, prev, pos));
            next = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        }
        //next in front of ncp
        if(isStartVertex) {
          if(next.z < -cameraNearFar[0]) {
            pos = mix(pos, next, interp(vnp, pos, next));
            prev = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        }
      } else {
        //current position visible
        //previous behind ncp
        if (prev.z > -cameraNearFar[0]) {
          prev = mix(pos, prev, interp(vnp, pos, prev));
        }
        //next behind ncp
        if (next.z > -cameraNearFar[0]) {
          next = mix(next, pos, interp(vnp, next, pos));
        }
      }

      ${e.multipassTerrainEnabled?"depth = pos.z;":""}
      linearDepth = (-pos.z - cameraNearFar[0]) / (cameraNearFar[1] - cameraNearFar[0]);

      pos = projectAndScale(pos);
      next = projectAndScale(next);
      prev = projectAndScale(prev);
    }
`),t.vertex.code.add(n["a"]`
  void main(void) {
    float coverage = 1.0;
    vpos = position;

    // Check for special value of uv0.y which is used by the Renderer when graphics
    // are removed before the VBO is recompacted. If this is the case, then we just
    // project outside of clip space.
    if (uv0.y == 0.0) {
      // Project out of clip space
      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
    }
    else {
      bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;
      bool isJoin = abs(uv0.y)-3.0 < 0.0;

      float lineWidth = getSize() * pixelRatio;

      // convert sub-pixel coverage to alpha
      if (lineWidth < 1.0) {
        coverage = lineWidth;
        lineWidth = 1.0;
      }else{
        // Ribbon lines cannot properly render non-integer sizes. Round width to integer size if
        // larger than one for better quality. Note that we do render < 1 pixels more or less correctly
        // so we only really care to round anything larger than 1.
        lineWidth = floor(lineWidth + 0.5);
      }

      vec4 pos  = view * vec4(position.xyz, 1.0);
      vec4 prev = view * vec4(auxpos1.xyz, 1.0);
      vec4 next = view * vec4(auxpos2.xyz, 1.0);

      clipAndTransform(pos, prev, next, isStartVertex);

      vec2 left = (pos.xy - prev.xy);
      vec2 right = (next.xy - pos.xy);

      float leftLen = length(left);
      float rightLen = length(right);
  `),e.stippleEnabled&&t.vertex.code.add(n["a"]`
      // uv0.x is either 0 or 1, depending on whether this is considered the start of a line segment
      // or the end. If start, then use pos->next, otherwise use prev->pos to define the line segment
      // vector
      vec4 stippleSegmentInfo = mix(vec4(pos.xy, right), vec4(prev.xy, left), uv0.x);
      vec2 stippleSegmentOrigin = stippleSegmentInfo.xy;

      // Scale s.t. it's in units of stipple pattern size.
      vec2 stippleSegmentDirection = stippleSegmentInfo.zw;
    `),t.vertex.code.add(n["a"]`
    left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);
    right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);

    vec2 capDisplacementDir = vec2(0, 0);
    vec2 joinDisplacementDir = vec2(0, 0);
    float displacementLen = lineWidth;

    if (isJoin) {

      // JOIN handling ---------------------------------------------------
      // determine if vertex is on the "outside or "inside" of the join
      bool isOutside = ISOUTSIDE;

      // compute miter join position first
      joinDisplacementDir = normalize(left + right);
      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);

      // compute miter stretch
      if (leftLen > 0.001 && rightLen > 0.001) {
        float nDotSeg = dot(joinDisplacementDir, left);
        displacementLen /= length(nDotSeg * left - joinDisplacementDir);

        // limit displacement of inner vertices
        if (!isOutside) {
          displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));
        }
      }

      if (isOutside && (displacementLen > miterLimit * lineWidth)) {
    `),e.roundJoins?t.vertex.code.add(n["a"]`
        vec2 startDir;
        vec2 endDir;

        if (leftLen < 0.001) {
          startDir = right;
        }
        else{
          startDir = left;
        }
        startDir = normalize(startDir);
        startDir = PERPENDICULAR(startDir);

        if (rightLen < 0.001) {
          endDir = left;
        }
        else{
          endDir = right;
        }
        endDir = normalize(endDir);
        endDir = PERPENDICULAR(endDir);

        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));
        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * subdivisionFactor * rotationAngle);
      `):t.vertex.code.add(n["a"]`
        // convert to bevel join if miterLimit is exceeded
        if (leftLen < 0.001) {
          joinDisplacementDir = right;
        }
        else if (rightLen < 0.001) {
          joinDisplacementDir = left;
        }
        else {
          joinDisplacementDir = isStartVertex ? right : left;
        }
        joinDisplacementDir = normalize(joinDisplacementDir);
        joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);
  `),t.vertex.code.add(n["a"]`
        displacementLen = lineWidth;
      }
    } else {
    // CAP handling ---------------------------------------------------
    if (leftLen < 0.001) {
      joinDisplacementDir = right;
    }
    else if (rightLen < 0.001) {
      joinDisplacementDir = left;
    }
    else {
      joinDisplacementDir = isStartVertex ? right : left;
    }
    joinDisplacementDir = normalize(joinDisplacementDir);
    joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);
    displacementLen = lineWidth;

    capDisplacementDir = isStartVertex ? -right : left;
  `),e.roundCaps?t.vertex.code.add(n["a"]`
    float angle = subdivisionFactor*PI*0.5;
    joinDisplacementDir *= cos(angle);
    capDisplacementDir *= sin(angle);
    `):t.vertex.code.add(n["a"]`
    capDisplacementDir *= subdivisionFactor;
    `),t.vertex.code.add(n["a"]`
  }

  // Displacement (in pixels) caused by join/or cap
  vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;

  ${i||f?n["a"]`float lineDist = lineWidth * sign(uv0.y) * pos.w;`:""}

  ${f?n["a"]`vLineDistance = lineDist;`:""}
  ${i?n["a"]`vLineDistanceNorm = lineDist / lineWidth;`:""}

  pos.xy += dpos;
  `),e.stippleEnabled&&(t.vertex.code.add(n["a"]`
    {
      // Compute the stipple pattern UV coordinate from the actual position, based on the origin
      // and direction of the line segment on which the stipple pattern is based.

      // Project the vector from the origin of the segment to the vertex onto the line segment.
      // Note the 0.5 factor due to projected positions being at twice the screen size scale (see projectAndScale)
      vec2 posVec = pos.xy - stippleSegmentOrigin;

      float stippleSegmentDirectionLength = length(stippleSegmentDirection);
    `),e.stippleIntegerRepeatsEnabled&&t.vertex.code.add(n["a"]`
      float numberOfPatternRepeats = stippleSegmentDirectionLength * 0.5 * stipplePatternPixelSizeInv;
      float roundedNumberOfPatternRepeats = floor(numberOfPatternRepeats);
      stipplePatternUvMax = roundedNumberOfPatternRepeats;
      `),t.vertex.code.add(n["a"]`
      if (stippleSegmentDirectionLength >= 0.001) {
        // Project the vertex position onto the line segment.
        float projectedLength = dot(stippleSegmentDirection, posVec) / stippleSegmentDirectionLength * 0.5;
     ${e.stippleIntegerRepeatsEnabled?"float wholeNumberOfRepeatsScale = roundedNumberOfPatternRepeats / numberOfPatternRepeats;":"float wholeNumberOfRepeatsScale = 1.0;"}
        stipplePatternUv = projectedLength * wholeNumberOfRepeatsScale * stipplePatternPixelSizeInv * pos.w;
        } else {
          stipplePatternUv = 1.0;
        }
      }
    `)),t.vertex.code.add(n["a"]`
      // Convert back into NDC
      pos.xy = pos.xy / screenSize * pos.w;

      vColor = getColor();
      vColor.a *= coverage;

      gl_Position = pos;
    }
  }
  `),e.multipassTerrainEnabled&&(t.fragment.include(s["a"]),t.include(c["b"],e)),t.include(o["a"],e),t.fragment.uniforms.add("intrinsicColor","vec4"),t.fragment.include(a["a"]),t.fragment.code.add(n["a"]`
  void main() {
    discardBySlice(vpos);
    ${e.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":""}
    float stippleAlpha = getStippleAlpha();
    discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);

    vec4 color = intrinsicColor * vColor;
  `),e.innerColorEnabled&&(t.fragment.uniforms.add("pixelRatio","float"),t.fragment.code.add(n["a"]`
    float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;
    float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);
    float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);
    color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);
    `)),t.fragment.code.add(n["a"]`
    vec4 finalColor = blendStipple(color, stippleAlpha);
  `),e.falloffEnabled&&t.fragment.code.add(n["a"]`
    finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);
    `),t.fragment.code.add(n["a"]`
    if (finalColor.a < ${n["a"].float(l["c"])}) {
      discard;
    }

    ${7===e.output?n["a"]`gl_FragColor = vec4(finalColor.a);`:""}
    ${0===e.output?n["a"]`gl_FragColor = highlightSlice(finalColor, vpos);`:""}
    ${0===e.output&&e.OITEnabled?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}
    ${4===e.output?n["a"]`gl_FragColor = vec4(1.0);`:""}
    ${1===e.output?n["a"]`outputDepth(linearDepth);`:""}
  }
  `),t}var m=Object.freeze({__proto__:null,build:f})},"9bdb":function(e,t,i){var n=i("282b"),r=n([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),a={getAreaStyle:function(e,t){return r(this,e,t)}};e.exports=a},"9c2c":function(e,t,i){var n=i("401b"),r=n.min,a=n.max,o=n.scale,s=n.distance,l=n.add,c=n.clone,u=n.sub;function h(e,t,i,n){var h,d,p,f,m=[],g=[],v=[],y=[];if(n){p=[1/0,1/0],f=[-1/0,-1/0];for(var _=0,b=e.length;_<b;_++)r(p,p,e[_]),a(f,f,e[_]);r(p,p,n[0]),a(f,f,n[1])}for(_=0,b=e.length;_<b;_++){var x=e[_];if(i)h=e[_?_-1:b-1],d=e[(_+1)%b];else{if(0===_||_===b-1){m.push(c(e[_]));continue}h=e[_-1],d=e[_+1]}u(g,d,h),o(g,g,t);var w=s(x,h),T=s(x,d),S=w+T;0!==S&&(w/=S,T/=S),o(v,g,-w),o(y,g,T);var O=l([],x,v),C=l([],x,y);n&&(a(O,O,p),r(O,O,f),a(C,C,p),r(C,C,f)),m.push(O),m.push(C)}return i&&m.push(m.shift()),m}e.exports=h},"9cf9":function(e,t){var i=Math.round;function n(e,t,n){if(t){var r=t.x1,o=t.x2,s=t.y1,l=t.y2;e.x1=r,e.x2=o,e.y1=s,e.y2=l;var c=n&&n.lineWidth;c&&(i(2*r)===i(2*o)&&(e.x1=e.x2=a(r,c,!0)),i(2*s)===i(2*l)&&(e.y1=e.y2=a(s,c,!0)))}}function r(e,t,i){if(t){var n=t.x,r=t.y,o=t.width,s=t.height;e.x=n,e.y=r,e.width=o,e.height=s;var l=i&&i.lineWidth;l&&(e.x=a(n,l,!0),e.y=a(r,l,!0),e.width=Math.max(a(n+o,l,!1)-e.x,0===o?0:1),e.height=Math.max(a(r+s,l,!1)-e.y,0===s?0:1))}}function a(e,t,n){if(!t)return e;var r=i(2*e);return(r+i(t))%2===0?r/2:(r+(n?1:-1))/2}t.subPixelOptimizeLine=n,t.subPixelOptimizeRect=r,t.subPixelOptimize=a},"9d57":function(e,t,i){var n=i("6d8b"),r=i("3842"),a=r.parsePercent,o=i("ee1a"),s=o.isDimensionStacked,l=i("cccd"),c="__ec_stack_",u=.5,h="undefined"!==typeof Float32Array?Float32Array:Array;function d(e){return e.get("stack")||c+e.seriesIndex}function p(e){return e.dim+e.index}function f(e){var t=[],i=e.axis,r="axis0";if("category"===i.type){for(var a=i.getBandWidth(),o=0;o<e.count;o++)t.push(n.defaults({bandWidth:a,axisKey:r,stackId:c+o},e));var s=y(t),l=[];for(o=0;o<e.count;o++){var u=s[r][c+o];u.offsetCenter=u.offset+u.width/2,l.push(u)}return l}}function m(e,t){var i=[];return t.eachSeriesByType(e,(function(e){w(e)&&!T(e)&&i.push(e)})),i}function g(e){var t={};n.each(e,(function(e){var i=e.coordinateSystem,n=i.getBaseAxis();if("time"===n.type||"value"===n.type)for(var r=e.getData(),a=n.dim+"_"+n.index,o=r.mapDimension(n.dim),s=0,l=r.count();s<l;++s){var c=r.get(o,s);t[a]?t[a].push(c):t[a]=[c]}}));var i=[];for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];if(a){a.sort((function(e,t){return e-t}));for(var o=null,s=1;s<a.length;++s){var l=a[s]-a[s-1];l>0&&(o=null===o?l:Math.min(o,l))}i[r]=o}}return i}function v(e){var t=g(e),i=[];return n.each(e,(function(e){var n,r=e.coordinateSystem,o=r.getBaseAxis(),s=o.getExtent();if("category"===o.type)n=o.getBandWidth();else if("value"===o.type||"time"===o.type){var l=o.dim+"_"+o.index,c=t[l],u=Math.abs(s[1]-s[0]),h=o.scale.getExtent(),f=Math.abs(h[1]-h[0]);n=c?u/f*c:u}else{var m=e.getData();n=Math.abs(s[1]-s[0])/m.count()}var g=a(e.get("barWidth"),n),v=a(e.get("barMaxWidth"),n),y=a(e.get("barMinWidth")||1,n),_=e.get("barGap"),b=e.get("barCategoryGap");i.push({bandWidth:n,barWidth:g,barMaxWidth:v,barMinWidth:y,barGap:_,barCategoryGap:b,axisKey:p(o),stackId:d(e)})})),y(i)}function y(e){var t={};n.each(e,(function(e,i){var n=e.axisKey,r=e.bandWidth,a=t[n]||{bandWidth:r,remainedWidth:r,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},o=a.stacks;t[n]=a;var s=e.stackId;o[s]||a.autoWidthCount++,o[s]=o[s]||{width:0,maxWidth:0};var l=e.barWidth;l&&!o[s].width&&(o[s].width=l,l=Math.min(a.remainedWidth,l),a.remainedWidth-=l);var c=e.barMaxWidth;c&&(o[s].maxWidth=c);var u=e.barMinWidth;u&&(o[s].minWidth=u);var h=e.barGap;null!=h&&(a.gap=h);var d=e.barCategoryGap;null!=d&&(a.categoryGap=d)}));var i={};return n.each(t,(function(e,t){i[t]={};var r=e.stacks,o=e.bandWidth,s=a(e.categoryGap,o),l=a(e.gap,1),c=e.remainedWidth,u=e.autoWidthCount,h=(c-s)/(u+(u-1)*l);h=Math.max(h,0),n.each(r,(function(e){var t=e.maxWidth,i=e.minWidth;if(e.width){n=e.width;t&&(n=Math.min(n,t)),i&&(n=Math.max(n,i)),e.width=n,c-=n+l*n,u--}else{var n=h;t&&t<n&&(n=Math.min(t,c)),i&&i>n&&(n=i),n!==h&&(e.width=n,c-=n+l*n,u--)}})),h=(c-s)/(u+(u-1)*l),h=Math.max(h,0);var d,p=0;n.each(r,(function(e,t){e.width||(e.width=h),d=e,p+=e.width*(1+l)})),d&&(p-=d.width*l);var f=-p/2;n.each(r,(function(e,n){i[t][n]=i[t][n]||{bandWidth:o,offset:f,width:e.width},f+=e.width*(1+l)}))})),i}function _(e,t,i){if(e&&t){var n=e[p(t)];return null!=n&&null!=i&&(n=n[d(i)]),n}}function b(e,t){var i=m(e,t),r=v(i),a={},o={};n.each(i,(function(e){var t=e.getData(),i=e.coordinateSystem,n=i.getBaseAxis(),l=d(e),c=r[p(n)][l],u=c.offset,h=c.width,f=i.getOtherAxis(n),m=e.get("barMinHeight")||0;a[l]=a[l]||[],o[l]=o[l]||[],t.setLayout({bandWidth:c.bandWidth,offset:u,size:h});for(var g=t.mapDimension(f.dim),v=t.mapDimension(n.dim),y=s(t,g),_=f.isHorizontal(),b=S(n,f,y),x=0,w=t.count();x<w;x++){var T,O,C,k,P=t.get(g,x),E=t.get(v,x),A=P>=0?"p":"n",I=b;if(y&&(a[l][E]||(a[l][E]={p:b,n:b}),I=a[l][E][A]),_){var M=i.dataToPoint([P,E]);T=I,O=M[1]+u,C=M[0]-b,k=h,Math.abs(C)<m&&(C=(C<0?-1:1)*m),isNaN(C)||y&&(a[l][E][A]+=C)}else{M=i.dataToPoint([E,P]);T=M[0]+u,O=I,C=h,k=M[1]-b,Math.abs(k)<m&&(k=(k<=0?-1:1)*m),isNaN(k)||y&&(a[l][E][A]+=k)}t.setItemLayout(x,{x:T,y:O,width:C,height:k})}}),this)}var x={seriesType:"bar",plan:l(),reset:function(e){if(w(e)&&T(e)){var t=e.getData(),i=e.coordinateSystem,n=i.grid.getRect(),r=i.getBaseAxis(),a=i.getOtherAxis(r),o=t.mapDimension(a.dim),s=t.mapDimension(r.dim),l=a.isHorizontal(),c=l?0:1,d=_(v([e]),r,e).width;return d>u||(d=u),{progress:p}}function p(e,t){var u,p=e.count,f=new h(2*p),m=new h(2*p),g=new h(p),v=[],y=[],_=0,b=0;while(null!=(u=e.next()))y[c]=t.get(o,u),y[1-c]=t.get(s,u),v=i.dataToPoint(y,null,v),m[_]=l?n.x+n.width:v[0],f[_++]=v[0],m[_]=l?v[1]:n.y+n.height,f[_++]=v[1],g[b++]=u;t.setLayout({largePoints:f,largeDataIndices:g,largeBackgroundPoints:m,barWidth:d,valueAxisStart:S(r,a,!1),backgroundStart:l?n.x:n.y,valueAxisHorizontal:l})}}};function w(e){return e.coordinateSystem&&"cartesian2d"===e.coordinateSystem.type}function T(e){return e.pipelineContext&&e.pipelineContext.large}function S(e,t,i){return t.toGlobalCoord(t.dataToCoord("log"===t.type?1:0))}t.getLayoutOnAxis=f,t.prepareLayoutBarSeries=m,t.makeColumnLayout=v,t.retrieveColumnLayout=_,t.layout=b,t.largeLayout=x},"9e2e":function(e,t,i){var n=i("a73c"),r=i("9850"),a=i("82eb"),o=a.WILL_BE_RESTORED,s=new r,l=function(){};l.prototype={constructor:l,drawRectText:function(e,t){var i=this.style;t=i.textRect||t,this.__dirty&&n.normalizeTextStyle(i,!0);var r=i.text;if(null!=r&&(r+=""),n.needDrawText(r,i)){e.save();var a=this.transform;i.transformText?this.setTransform(e):a&&(s.copy(t),s.applyTransform(a),t=s),n.renderText(this,e,r,i,t,o),e.restore()}}};var c=l;e.exports=c},"9e47":function(e,t,i){var n=i("6d8b"),r=i("71ad"),a=i("6cb7"),o=i("f934"),s=o.getLayoutParams,l=o.mergeLayoutParam,c=i("8e43"),u=["value","category","time","log"];function h(e,t,i,o){n.each(u,(function(a){t.extend({type:e+"Axis."+a,mergeDefaultAndTheme:function(t,r){var o=this.layoutMode,c=o?s(t):{},u=r.getTheme();n.merge(t,u.get(a+"Axis")),n.merge(t,this.getDefaultOption()),t.type=i(e,t),o&&l(t,c,o)},optionUpdated:function(){var e=this.option;"category"===e.type&&(this.__ordinalMeta=c.createByAxisModel(this))},getCategories:function(e){var t=this.option;if("category"===t.type)return e?t.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:n.mergeAll([{},r[a+"Axis"],o],!0)})})),a.registerSubTypeDefaulter(e+"Axis",n.curry(i,e))}e.exports=h},"9e77":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("38862"),r=i("d047");function a(e){e.fragment.uniforms.add("projInfo","vec4"),e.fragment.uniforms.add("zScale","vec2"),e.fragment.code.add(n["a"]`
    vec3 reconstructPosition(vec2 fragCoord, float depth) {
      return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);
    }
  `)}function o(e,t){e.extensions.add("GL_OES_standard_derivatives"),e.fragment.include(r["a"]),e.include(a),e.fragment.uniforms.add("glowColor","vec3"),e.fragment.uniforms.add("glowWidth","float"),e.fragment.uniforms.add("glowFalloff","float"),e.fragment.uniforms.add("innerColor","vec3"),e.fragment.uniforms.add("innerWidth","float"),e.fragment.uniforms.add("depthMap","sampler2D"),e.fragment.uniforms.add("nearFar","vec2"),e.fragment.uniforms.add("frameColor","sampler2D"),t.contrastControlEnabled&&e.fragment.uniforms.add("globalAlphaContrastBoost","float"),e.fragment.code.add(n["a"]`
  vec4 blendPremultiplied(vec4 source, vec4 dest) {
    float oneMinusSourceAlpha = 1.0 - source.a;

    return vec4(
      source.rgb + dest.rgb * oneMinusSourceAlpha,
      source.a + dest.a * oneMinusSourceAlpha
    );
  }
  `),e.fragment.code.add(n["a"]`
  vec4 premultipliedColor(vec3 rgb, float alpha) {
    return vec4(rgb * alpha, alpha);
  }
  `),e.fragment.code.add(n["a"]`
  vec4 laserlineProfile(float dist) {
    if (dist > glowWidth) {
      return vec4(0.0);
    }

    float innerAlpha = (1.0 - smoothstep(0.0, innerWidth, dist));
    float glowAlpha = pow(max(0.0, 1.0 - dist / glowWidth), glowFalloff);

    return blendPremultiplied(
      premultipliedColor(innerColor, innerAlpha),
      premultipliedColor(glowColor, glowAlpha)
    );
  }
  `),e.fragment.code.add(n["a"]`
  bool laserlineReconstructFromDepth(out vec3 pos, out vec3 normal, out float depthDiscontinuityAlpha) {
    float depth = linearDepthFromTexture(depthMap, uv, nearFar);

    if (-depth == nearFar[0]) {
      return false;
    }

    pos = reconstructPosition(gl_FragCoord.xy, depth);
    normal = normalize(cross(dFdx(pos), dFdy(pos)));

    float ddepth = fwidth(depth);
    depthDiscontinuityAlpha = 1.0 - smoothstep(0.0, 0.01, -ddepth / depth);

    return true;
  }
  `),t.contrastControlEnabled?e.fragment.code.add(n["a"]`
    float rgbToLuminance(vec3 color) {
      return dot(vec3(0.2126, 0.7152, 0.0722), color);
    }

    vec4 laserlineOutput(vec4 color) {
      float backgroundLuminance = rgbToLuminance(texture2D(frameColor, uv).rgb);
      float alpha = clamp(globalAlpha * max(backgroundLuminance * globalAlphaContrastBoost, 1.0), 0.0, 1.0);

      return color * alpha;
    }
    `):e.fragment.code.add(n["a"]`
    vec4 laserlineOutput(vec4 color) {
      return color * globalAlpha;
    }
    `)}},"9e87":function(e,t,i){var n=i("3eba"),r=i("6d8b"),a=i("50e5");n.registerAction("dataZoom",(function(e,t){var i=a.createLinkedNodesFinder(r.bind(t.eachComponent,t,"dataZoom"),a.eachAxisDim,(function(e,t){return e.get(t.axisIndex)})),n=[];t.eachComponent({mainType:"dataZoom",query:e},(function(e,t){n.push.apply(n,i(e).nodes)})),r.each(n,(function(t,i){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})}))}))},"9f51":function(e,t,i){var n=i("857d"),r=n.normalizeRadian,a=2*Math.PI;function o(e,t,i,n,o,s,l,c,u){if(0===l)return!1;var h=l;c-=e,u-=t;var d=Math.sqrt(c*c+u*u);if(d-h>i||d+h<i)return!1;if(Math.abs(n-o)%a<1e-4)return!0;if(s){var p=n;n=r(o),o=r(p)}else n=r(n),o=r(o);n>o&&(o+=a);var f=Math.atan2(u,c);return f<0&&(f+=a),f>=n&&f<=o||f+a>=n&&f+a<=o}t.containStroke=o},"9f82":function(e,t,i){var n=i("ee1a"),r=n.isDimensionStacked,a=i("6d8b"),o=a.map;function s(e,t,i){var n,a=e.getBaseAxis(),s=e.getOtherAxis(a),c=l(s,i),u=a.dim,h=s.dim,d=t.mapDimension(h),p=t.mapDimension(u),f="x"===h||"radius"===h?1:0,m=o(e.dimensions,(function(e){return t.mapDimension(e)})),g=t.getCalculationInfo("stackResultDimension");return(n|=r(t,m[0]))&&(m[0]=g),(n|=r(t,m[1]))&&(m[1]=g),{dataDimsForPoint:m,valueStart:c,valueAxisDim:h,baseAxisDim:u,stacked:!!n,valueDim:d,baseDim:p,baseDataOffset:f,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function l(e,t){var i=0,n=e.scale.getExtent();return"start"===t?i=n[0]:"end"===t?i=n[1]:n[0]>0?i=n[0]:n[1]<0&&(i=n[1]),i}function c(e,t,i,n){var r=NaN;e.stacked&&(r=i.get(i.getCalculationInfo("stackedOverDimension"),n)),isNaN(r)&&(r=e.valueStart);var a=e.baseDataOffset,o=[];return o[a]=i.get(e.baseDim,n),o[1-a]=r,t.dataToPoint(o)}t.prepareDataCoordInfo=s,t.getStackedOnPoint=c},a017:function(e,t,i){},a0fe:function(e,t,i){},a15a:function(e,t,i){var n=i("6d8b"),r=i("2306"),a=i("9850"),o=i("e86a"),s=o.calculateTextPosition,l=r.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var i=t.cx,n=t.cy,r=t.width/2,a=t.height/2;e.moveTo(i,n-a),e.lineTo(i+r,n+a),e.lineTo(i-r,n+a),e.closePath()}}),c=r.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var i=t.cx,n=t.cy,r=t.width/2,a=t.height/2;e.moveTo(i,n-a),e.lineTo(i+r,n),e.lineTo(i,n+a),e.lineTo(i-r,n),e.closePath()}}),u=r.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var i=t.x,n=t.y,r=t.width/5*3,a=Math.max(r,t.height),o=r/2,s=o*o/(a-o),l=n-a+o+s,c=Math.asin(s/o),u=Math.cos(c)*o,h=Math.sin(c),d=Math.cos(c),p=.6*o,f=.7*o;e.moveTo(i-u,l+s),e.arc(i,l,o,Math.PI-c,2*Math.PI+c),e.bezierCurveTo(i+u-h*p,l+s+d*p,i,n-f,i,n),e.bezierCurveTo(i,n-f,i-u+h*p,l+s+d*p,i-u,l+s),e.closePath()}}),h=r.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var i=t.height,n=t.width,r=t.x,a=t.y,o=n/3*2;e.moveTo(r,a),e.lineTo(r+o,a+i),e.lineTo(r,a+i/4*3),e.lineTo(r-o,a+i),e.lineTo(r,a),e.closePath()}}),d={line:r.Line,rect:r.Rect,roundRect:r.Rect,square:r.Rect,circle:r.Circle,diamond:c,pin:u,arrow:h,triangle:l},p={line:function(e,t,i,n,r){r.x1=e,r.y1=t+n/2,r.x2=e+i,r.y2=t+n/2},rect:function(e,t,i,n,r){r.x=e,r.y=t,r.width=i,r.height=n},roundRect:function(e,t,i,n,r){r.x=e,r.y=t,r.width=i,r.height=n,r.r=Math.min(i,n)/4},square:function(e,t,i,n,r){var a=Math.min(i,n);r.x=e,r.y=t,r.width=a,r.height=a},circle:function(e,t,i,n,r){r.cx=e+i/2,r.cy=t+n/2,r.r=Math.min(i,n)/2},diamond:function(e,t,i,n,r){r.cx=e+i/2,r.cy=t+n/2,r.width=i,r.height=n},pin:function(e,t,i,n,r){r.x=e+i/2,r.y=t+n/2,r.width=i,r.height=n},arrow:function(e,t,i,n,r){r.x=e+i/2,r.y=t+n/2,r.width=i,r.height=n},triangle:function(e,t,i,n,r){r.cx=e+i/2,r.cy=t+n/2,r.width=i,r.height=n}},f={};n.each(d,(function(e,t){f[t]=new e}));var m=r.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,i){var n=s(e,t,i),r=this.shape;return r&&"pin"===r.symbolType&&"inside"===t.textPosition&&(n.y=i.y+.4*i.height),n},buildPath:function(e,t,i){var n=t.symbolType;if("none"!==n){var r=f[n];r||(n="rect",r=f[n]),p[n](t.x,t.y,t.width,t.height,r.shape),r.buildPath(e,r.shape,i)}}});function g(e,t){if("image"!==this.type){var i=this.style,n=this.shape;n&&"line"===n.symbolType?i.stroke=e:this.__isEmptyBrush?(i.stroke=e,i.fill=t||"#fff"):(i.fill&&(i.fill=e),i.stroke&&(i.stroke=e)),this.dirty(!1)}}function v(e,t,i,n,o,s,l){var c,u=0===e.indexOf("empty");return u&&(e=e.substr(5,1).toLowerCase()+e.substr(6)),c=0===e.indexOf("image://")?r.makeImage(e.slice(8),new a(t,i,n,o),l?"center":"cover"):0===e.indexOf("path://")?r.makePath(e.slice(7),{},new a(t,i,n,o),l?"center":"cover"):new m({shape:{symbolType:e,x:t,y:i,width:n,height:o}}),c.__isEmptyBrush=u,c.setColor=g,c.setColor(s),c}t.createSymbol=v},a16f:function(e,t,i){},a18f:function(e,t,i){var n=i("3a561"),r=n.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});e.exports=r},a1eb:function(e,t,i){},a375:function(e,t,i){"use strict";i("65a4")},a4fe:function(e,t,i){var n=i("3eba"),r="\0_ec_interaction_mutex";function a(e,t,i){var n=l(e);n[t]=i}function o(e,t,i){var n=l(e),r=n[t];r===i&&(n[t]=null)}function s(e,t){return!!l(e)[t]}function l(e){return e[r]||(e[r]={})}n.registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},(function(){})),t.take=a,t.release=o,t.isTaken=s},a524:function(e,t,i){},a545:function(e,t,i){"use strict";i.d(t,"a",(function(){return g})),i.d(t,"b",(function(){return d}));var n=i("b2b2"),r=i("4ae5"),a=(i("e06a"),i("0b2d")),o=i("e431"),s=i("b139"),l=i("04f0"),c=i("a29a"),u=i("f7eb");function h(e,t,i=null){return Object(n["k"])(i)?[e,t,i]:[e,t]}function d(e,t,i=null){return Object(n["k"])(i)?{x:e,y:t,z:i}:{x:e,y:t}}class p{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return Object(n["g"])(e.map(e=>this.mapToLocal(e)))}get doUnnormalization(){return!1}}class f extends p{constructor(e,t,i=null){super(t),this.defaultZ=i,this.transform=Object(u["b"])(),this.transformInv=Object(u["b"])(),this.transform=Object(u["a"])(e),Object(c["a"])(this.transformInv,this.transform)}makeMapPoint(e,t){return h(e,t,this.defaultZ)}mapToLocal(e){return d(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return h(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this.defaultZ)}}class m extends p{constructor(e,t){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=Object(a["e"])(),this.tangentFrameUpWS=Object(a["e"])(),this.tangentFrameRightWS=Object(a["e"])(),this.tangentFrameForwardWS=Object(a["e"])(),this.localFrameRightWS=Object(a["e"])(),this.localFrameUpWS=Object(a["e"])(),this.worldToLocalTransform=Object(s["a"])(),this.localToWorldTransform=Object(s["a"])(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=t,this.defaultZ=t.hasZ?t.z:null;const i=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,0,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,1,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,2,this.tangentFrameForwardWS);const n=Object(a["e"])();Object(o["d"])(n,this.tangentFrameForwardWS,Object(o["g"])(i,this.tangentFrameForwardWS)),Object(o["i"])(this.localFrameRightWS,i,n),Object(o["q"])(this.localFrameRightWS,this.localFrameRightWS),Object(o["f"])(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),Object(l["d"])(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),Object(l["c"])(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(e,t){return h(e,t,this.defaultZ)}mapToLocal(e){const t=Object(a["e"])();this.view.renderCoordsHelper.toRenderCoords(new r["a"]({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),Object(o["t"])(t,t,this.worldToLocalTransform);const i=this.view.renderCoordsHelper.fromRenderCoords(t,this.view.spatialReference);return Object(n["k"])(i)?d(i.x/this.scale,i.y/this.scale):null}localToMap(e){const t=Object(a["e"])();this.view.renderCoordsHelper.toRenderCoords(new r["a"]({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),Object(o["t"])(t,t,this.localToWorldTransform);const i=this.view.renderCoordsHelper.fromRenderCoords(t,this.view.spatialReference);return Object(n["k"])(i)?h(i.x,i.y,this.defaultZ):null}}function g(e,t){if("2d"===e.type)return new f(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if("3d"===e.type){const i=t.length>2?new r["a"]({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new r["a"]({x:t[0],y:t[1],spatialReference:e.spatialReference});return new m(e,i)}return null}},a559:function(e,t){function i(){return e.exports=i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},e.exports["default"]=e.exports,e.exports.__esModule=!0,i.apply(this,arguments)}e.exports=i,e.exports["default"]=e.exports,e.exports.__esModule=!0},a66e:function(e,t,i){"use strict";i("058e")},a73c:function(e,t,i){var n=i("6d8b"),r=n.retrieve2,a=n.retrieve3,o=n.each,s=n.normalizeCssArray,l=n.isString,c=n.isObject,u=i("e86a"),h=i("5693"),d=i("5e76"),p=i("7d6d"),f=i("82eb"),m=f.ContextCachedBy,g=f.WILL_BE_RESTORED,v=u.DEFAULT_FONT,y={left:1,right:1,center:1},_={top:1,bottom:1,middle:1},b=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],x={},w={};function T(e){return S(e),o(e.rich,S),e}function S(e){if(e){e.font=u.makeFont(e);var t=e.textAlign;"middle"===t&&(t="center"),e.textAlign=null==t||y[t]?t:"left";var i=e.textVerticalAlign||e.textBaseline;"center"===i&&(i="middle"),e.textVerticalAlign=null==i||_[i]?i:"top";var n=e.textPadding;n&&(e.textPadding=s(e.textPadding))}}function O(e,t,i,n,r,a){n.rich?k(e,t,i,n,r,a):C(e,t,i,n,r,a)}function C(e,t,i,n,r,a){"use strict";var o,s=I(n),l=!1,c=t.__attrCachedBy===m.PLAIN_TEXT;a!==g?(a&&(o=a.style,l=!s&&c&&o),t.__attrCachedBy=s?m.NONE:m.PLAIN_TEXT):c&&(t.__attrCachedBy=m.NONE);var h=n.font||v;l&&h===(o.font||v)||(t.font=h);var d=e.__computedFont;e.__styleFont!==h&&(e.__styleFont=h,d=e.__computedFont=t.font);var f=n.textPadding,y=n.textLineHeight,_=e.__textCotentBlock;_&&!e.__dirtyText||(_=e.__textCotentBlock=u.parsePlainText(i,d,f,y,n.truncate));var x=_.outerHeight,T=_.lines,S=_.lineHeight,O=j(w,e,n,r),C=O.baseX,k=O.baseY,P=O.textAlign||"left",A=O.textVerticalAlign;E(t,n,r,C,k);var D=u.adjustTextY(k,x,A),L=C,z=D;if(s||f){var V=u.getWidth(i,d),F=V;f&&(F+=f[1]+f[3]);var U=u.adjustTextX(C,F,P);s&&M(e,t,n,U,D,F,x),f&&(L=B(C,P,f),z+=f[0])}t.textAlign=P,t.textBaseline="middle",t.globalAlpha=n.opacity||1;for(var G=0;G<b.length;G++){var H=b[G],W=H[0],q=H[1],Z=n[W];l&&Z===o[W]||(t[q]=p(t,q,Z||H[2]))}z+=S/2;var Y=n.textStrokeWidth,X=l?o.textStrokeWidth:null,K=!l||Y!==X,$=!l||K||n.textStroke!==o.textStroke,Q=R(n.textStroke,Y),J=N(n.textFill);if(Q&&(K&&(t.lineWidth=Y),$&&(t.strokeStyle=Q)),J&&(l&&n.textFill===o.textFill||(t.fillStyle=J)),1===T.length)Q&&t.strokeText(T[0],L,z),J&&t.fillText(T[0],L,z);else for(G=0;G<T.length;G++)Q&&t.strokeText(T[G],L,z),J&&t.fillText(T[G],L,z),z+=S}function k(e,t,i,n,r,a){a!==g&&(t.__attrCachedBy=m.NONE);var o=e.__textCotentBlock;o&&!e.__dirtyText||(o=e.__textCotentBlock=u.parseRichText(i,n)),P(e,t,o,n,r)}function P(e,t,i,n,r){var a=i.width,o=i.outerWidth,s=i.outerHeight,l=n.textPadding,c=j(w,e,n,r),h=c.baseX,d=c.baseY,p=c.textAlign,f=c.textVerticalAlign;E(t,n,r,h,d);var m=u.adjustTextX(h,o,p),g=u.adjustTextY(d,s,f),v=m,y=g;l&&(v+=l[3],y+=l[0]);var _=v+a;I(n)&&M(e,t,n,m,g,o,s);for(var b=0;b<i.lines.length;b++){var x,T=i.lines[b],S=T.tokens,O=S.length,C=T.lineHeight,k=T.width,P=0,D=v,L=_,R=O-1;while(P<O&&(x=S[P],!x.textAlign||"left"===x.textAlign))A(e,t,x,n,C,y,D,"left"),k-=x.width,D+=x.width,P++;while(R>=0&&(x=S[R],"right"===x.textAlign))A(e,t,x,n,C,y,L,"right"),k-=x.width,L-=x.width,R--;D+=(a-(D-v)-(_-L)-k)/2;while(P<=R)x=S[P],A(e,t,x,n,C,y,D+x.width/2,"center"),D+=x.width,P++;y+=C}}function E(e,t,i,n,r){if(i&&t.textRotation){var a=t.textOrigin;"center"===a?(n=i.width/2+i.x,r=i.height/2+i.y):a&&(n=a[0]+i.x,r=a[1]+i.y),e.translate(n,r),e.rotate(-t.textRotation),e.translate(-n,-r)}}function A(e,t,i,n,o,s,l,c){var u=n.rich[i.styleName]||{};u.text=i.text;var h=i.textVerticalAlign,d=s+o/2;"top"===h?d=s+i.height/2:"bottom"===h&&(d=s+o-i.height/2),!i.isLineHolder&&I(u)&&M(e,t,u,"right"===c?l-i.width:"center"===c?l-i.width/2:l,d-i.height/2,i.width,i.height);var p=i.textPadding;p&&(l=B(l,c,p),d-=i.height/2-p[2]-i.textHeight/2),L(t,"shadowBlur",a(u.textShadowBlur,n.textShadowBlur,0)),L(t,"shadowColor",u.textShadowColor||n.textShadowColor||"transparent"),L(t,"shadowOffsetX",a(u.textShadowOffsetX,n.textShadowOffsetX,0)),L(t,"shadowOffsetY",a(u.textShadowOffsetY,n.textShadowOffsetY,0)),L(t,"textAlign",c),L(t,"textBaseline","middle"),L(t,"font",i.font||v);var f=R(u.textStroke||n.textStroke,g),m=N(u.textFill||n.textFill),g=r(u.textStrokeWidth,n.textStrokeWidth);f&&(L(t,"lineWidth",g),L(t,"strokeStyle",f),t.strokeText(i.text,l,d)),m&&(L(t,"fillStyle",m),t.fillText(i.text,l,d))}function I(e){return!!(e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor)}function M(e,t,i,n,r,a,o){var s=i.textBackgroundColor,u=i.textBorderWidth,p=i.textBorderColor,f=l(s);if(L(t,"shadowBlur",i.textBoxShadowBlur||0),L(t,"shadowColor",i.textBoxShadowColor||"transparent"),L(t,"shadowOffsetX",i.textBoxShadowOffsetX||0),L(t,"shadowOffsetY",i.textBoxShadowOffsetY||0),f||u&&p){t.beginPath();var m=i.textBorderRadius;m?h.buildPath(t,{x:n,y:r,width:a,height:o,r:m}):t.rect(n,r,a,o),t.closePath()}if(f)if(L(t,"fillStyle",s),null!=i.fillOpacity){var g=t.globalAlpha;t.globalAlpha=i.fillOpacity*i.opacity,t.fill(),t.globalAlpha=g}else t.fill();else if(c(s)){var v=s.image;v=d.createOrUpdateImage(v,null,e,D,s),v&&d.isImageReady(v)&&t.drawImage(v,n,r,a,o)}if(u&&p)if(L(t,"lineWidth",u),L(t,"strokeStyle",p),null!=i.strokeOpacity){g=t.globalAlpha;t.globalAlpha=i.strokeOpacity*i.opacity,t.stroke(),t.globalAlpha=g}else t.stroke()}function D(e,t){t.image=e}function j(e,t,i,n){var r=i.x||0,a=i.y||0,o=i.textAlign,s=i.textVerticalAlign;if(n){var l=i.textPosition;if(l instanceof Array)r=n.x+z(l[0],n.width),a=n.y+z(l[1],n.height);else{var c=t&&t.calculateTextPosition?t.calculateTextPosition(x,i,n):u.calculateTextPosition(x,i,n);r=c.x,a=c.y,o=o||c.textAlign,s=s||c.textVerticalAlign}var h=i.textOffset;h&&(r+=h[0],a+=h[1])}return e=e||{},e.baseX=r,e.baseY=a,e.textAlign=o,e.textVerticalAlign=s,e}function L(e,t,i){return e[t]=p(e,t,i),e[t]}function R(e,t){return null==e||t<=0||"transparent"===e||"none"===e?null:e.image||e.colorStops?"#000":e}function N(e){return null==e||"none"===e?null:e.image||e.colorStops?"#000":e}function z(e,t){return"string"===typeof e?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function B(e,t,i){return"right"===t?e-i[1]:"center"===t?e+i[3]/2-i[1]/2:e+i[3]}function V(e,t){return null!=e&&(e||t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor||t.textPadding)}t.normalizeTextStyle=T,t.renderText=O,t.getBoxPosition=j,t.getStroke=R,t.getFill=N,t.parsePercent=z,t.needDrawText=V},a883:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.data?i("div",{staticClass:"data-total"},[i("div",{staticClass:"title"},[e._v("数据总览")]),i("div",{staticClass:"block"},[i("div",{staticClass:"block-content"},[i("div",{staticClass:"root-line"},[i("div",{staticClass:"root box"},[e._v(" "+e._s(e.data.jkldry.name)+" "),i("label",[e._v(e._s(e.data.jkldry.value||"-")),i("span",[e._v(e._s(e.data.jkldry.value?"人":""))])])])]),i("div",{staticClass:"data-line"},[i("div",{staticClass:"data box"},[e._v(" "+e._s(e.data.jkmjry.name)+" "),i("label",[e._v(e._s(e.data.jkmjry.value||"-")),i("span",[e._v(e._s(e.data.jkmjry.value?"人":""))])]),i("div",{staticClass:"more"},[i("div",{staticClass:"more-info box"},[e._v(" "+e._s(e.data.jkmjry.jkmjgljdry.name)+" "),i("label",[e._v(e._s(e.data.jkmjry.jkmjgljdry.value||"-")),i("span",[e._v(e._s(e.data.jkmjry.jkmjgljdry.value?"人":""))])])]),i("div",{staticClass:"more-info box font-red"},[e._v(" "+e._s(e.data.jkmjry.jkmjwgljdry.name)+" "),i("label",[e._v(e._s(e.data.jkmjry.jkmjwgljdry.value||"-")),i("span",[e._v(e._s(e.data.jkmjry.jkmjwgljdry.value?"人":""))])])])])]),i("div",{staticClass:"data box"},[e._v(" "+e._s(e.data.jkcmjry.name)+" "),i("label",[e._v(e._s(e.data.jkcmjry.value||"-")),i("span",[e._v(e._s(e.data.jkcmjry.value?"人":""))])]),i("div",{staticClass:"more"},[i("div",{staticClass:"more-info box"},[e._v(" "+e._s(e.data.jkcmjry.jkcmjgljdry.name)+" "),i("label",[e._v(e._s(e.data.jkcmjry.jkcmjgljdry.value||"-")),i("span",[e._v(e._s(e.data.jkcmjry.jkcmjgljdry.value?"人":""))])])]),i("div",{staticClass:"more-info box font-red"},[e._v(" "+e._s(e.data.jkcmjry.jkcmjwgljdry.name)+" "),i("label",[e._v(e._s(e.data.jkcmjry.jkcmjwgljdry.value||"-")),i("span",[e._v(e._s(e.data.jkcmjry.jkcmjwgljdry.value?"人":""))])])])])]),i("div",{staticClass:"data box"},[e._v(" "+e._s(e.data.jkybjcz.name)+" "),i("label",[e._v(e._s(e.data.jkybjcz.value||"-")),i("span",[e._v(e._s(e.data.jkybjcz.value?"人":""))])])]),i("div",{staticClass:"data box"},[e._v(" "+e._s(e.data.jkzdrq.name)+" "),i("label",[e._v(e._s(e.data.jkzdrq.value||"-")),i("span",[e._v(e._s(e.data.jkzdrq.value?"人":""))])])]),i("div",{staticClass:"data box"},[e._v(" "+e._s(e.data.jkybrq.name)+" "),i("label",[e._v(e._s(e.data.jkybrq.value||"-")),i("span",[e._v(e._s(e.data.jkybrq.value?"人":""))])])]),i("div",{staticClass:"data box"},[e._v(" "+e._s(e.data.jkqtrq.name)+" "),i("label",[e._v(e._s(e.data.jkqtrq.value||"-")),i("span",[e._v(e._s(e.data.jkqtrq.value?"人":""))])])])]),i("div",{staticClass:"total-line"},[e._v(" "+e._s(e.data.jkygljdry.name)+" "),i("label",[e._v(e._s(e.data.jkygljdry.value||"-")),i("span",[e._v(e._s(e.data.jkygljdry.value?"人":""))])])]),i("div",{staticClass:"update-time"},[e._v("更新时间 : "+e._s(e.data.jkldry.updateTime))])])]),i("div",{staticClass:"block"},[i("div",{staticClass:"block-content"},[i("div",{staticClass:"root-line"},[i("div",{staticClass:"root box"},[e._v(" "+e._s(e.data.galdry.name)+" "),i("label",[e._v(e._s(e.data.galdry.value||"-")),i("span",[e._v(e._s(e.data.galdry.value?"人":""))])])])]),i("div",{staticClass:"data-line"},e._l(e.data.galdry.children,(function(t){return i("div",{key:t.name,staticClass:"data box"},[e._v(" "+e._s(t.name)+" "),i("div",{staticClass:"more"},[i("div",{staticClass:"more-info box"},[e._v(" "+e._s(t.glcs.name)+" "),i("label",[e._v(e._s(t.glcs.value||"-")),i("span",[e._v(e._s(t.glcs.value?"个":""))])])]),i("div",{staticClass:"more-info box"},[e._v(" "+e._s(t.glmj.name)+" "),i("label",[e._v(e._s(t.glmj.value||"-")),i("span",[e._v(e._s(t.glmj.value?"人":""))])])]),i("div",{staticClass:"more-info box"},[e._v(" "+e._s(t.glcmj.name)+" "),i("label",[e._v(e._s(t.glcmj.value||"-")),i("span",[e._v(e._s(t.glcmj.value?"人":""))])])]),i("div",{staticClass:"more-info box"},[e._v(" "+e._s(t.glybjc.name)+" "),i("label",[e._v(e._s(t.glybjc.value||"-")),i("span",[e._v(e._s(t.glybjc.value?"人":""))])])])])])})),0),i("div",{staticClass:"update-time"},[e._v("更新时间 : "+e._s(e.data.galdry.updateTime))])])]),e._m(0)]):e._e()},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"block tips"},[i("label",{staticStyle:{color:"#f00",margin:"10px","font-size":"16px"}},[i("i",{staticClass:"el-icon-warning"}),e._v("说明 : 以上数据是基于各委办局导入数据进行统计，所有查询结果由于数据上报存在时间等差异，查询统计结果仅供参考 ")])])}],a=i("4795"),o=i.n(a);function s(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function l(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){s(a,n,r,o,l,"next",e)}function l(e){s(a,n,r,o,l,"throw",e)}o(void 0)}))}}var c={name:"data-total",data:function(){return{data:null}},mounted:function(){var e=this;return l(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Api().YqgkryController.get_getldryMsg.request();case 2:e.data=t.sent,console.log(e.data);case 4:case"end":return t.stop()}}),t)})))()}},u=c,h=(i("f470"),i("2877")),d=Object(h["a"])(u,n,r,!1,null,"568fc04f",null);t["default"]=d.exports},a8c6:function(e,t,i){var n=i("2449"),r=n.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});e.exports=r},a96b:function(e,t,i){var n=i("3eba"),r=n.extendComponentModel({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});e.exports=r},a997:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return l}));var n=i("38a4"),r=i("38862"),a=i("690a"),o=i("2aad"),s=i("9e77");const l=Object(n["d"])(6);function c(e){const t=new a["a"];return t.extensions.add("GL_OES_standard_derivatives"),t.include(o["a"]),t.include(s["a"],e),t.fragment.uniforms.add("angleCutoff","vec2"),t.fragment.uniforms.add("globalAlpha","float"),e.heightManifoldEnabled&&t.fragment.uniforms.add("heightPlane","vec4"),e.pointDistanceEnabled&&t.fragment.uniforms.add("pointDistanceSphere","vec4"),e.lineVerticalPlaneEnabled&&t.fragment.uniforms.add("lineVerticalPlane","vec4").add("lineVerticalStart","vec3").add("lineVerticalEnd","vec3"),(e.heightManifoldEnabled||e.pointDistanceEnabled||e.lineVerticalPlaneEnabled)&&t.fragment.uniforms.add("maxPixelDistance","float"),e.intersectsLineEnabled&&t.fragment.uniforms.add("intersectsLineStart","vec3").add("intersectsLineEnd","vec3").add("intersectsLineDirection","vec3").add("intersectsLineRadius","float").add("perScreenPixelRatio","float"),(e.lineVerticalPlaneEnabled||e.heightManifoldEnabled)&&t.fragment.code.add(r["a"]`
      float planeDistancePixels(vec4 plane, vec3 pos) {
        float dist = dot(plane.xyz, pos) + plane.w;
        float width = fwidth(dist);
        dist /= min(width, maxPixelDistance);
        return abs(dist);
      }`),e.pointDistanceEnabled&&t.fragment.code.add(r["a"]`
    float sphereDistancePixels(vec4 sphere, vec3 pos) {
      float dist = distance(sphere.xyz, pos) - sphere.w;
      float width = fwidth(dist);
      dist /= min(width, maxPixelDistance);
      return abs(dist);
    }
    `),e.intersectsLineEnabled&&t.fragment.code.add(r["a"]`
    float lineDistancePixels(vec3 start, vec3 dir, float radius, vec3 pos) {
      float dist = length(cross(dir, pos - start)) / (length(pos) * perScreenPixelRatio);
      return abs(dist) - radius;
    }
    `),(e.lineVerticalPlaneEnabled||e.intersectsLineEnabled)&&t.fragment.code.add(r["a"]`
    bool pointIsWithinLine(vec3 pos, vec3 start, vec3 end) {
      vec3 dir = end - start;
      float t2 = dot(dir, pos - start);
      float l2 = dot(dir, dir);
      return t2 >= 0.0 && t2 <= l2;
    }
    `),t.fragment.code.add(r["a"]`
  void main() {
    vec3 pos;
    vec3 normal;
    float depthDiscontinuityAlpha;

    if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {
      discard;
    }

    vec4 color = vec4(0, 0, 0, 0);
  `),e.heightManifoldEnabled&&t.fragment.code.add(r["a"]`
    {
      float heightManifoldAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, heightPlane.xyz)));
      vec4 heightManifoldColor = laserlineProfile(planeDistancePixels(heightPlane, pos));
      color = max(color, heightManifoldColor * heightManifoldAlpha);
    }
    `),e.pointDistanceEnabled&&t.fragment.code.add(r["a"]`
    {
      // distance to sphere
      float pointDistanceSphereDistance = sphereDistancePixels(pointDistanceSphere, pos);
      vec4 pointDistanceSphereColor = laserlineProfile(pointDistanceSphereDistance);
      float pointDistanceSphereAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, normalize(pos - pointDistanceSphere.xyz))));

      color = max(color, pointDistanceSphereColor * pointDistanceSphereAlpha);
    }
    `),e.lineVerticalPlaneEnabled&&t.fragment.code.add(r["a"]`
    {
      if (pointIsWithinLine(pos, lineVerticalStart, lineVerticalEnd)) {
        float lineVerticalDistance = planeDistancePixels(lineVerticalPlane, pos);

        vec4 lineVerticalColor = laserlineProfile(lineVerticalDistance);
        float lineVerticalAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, lineVerticalPlane.xyz)));

        color = max(color, lineVerticalColor * lineVerticalAlpha);
      }
    }
    `),e.intersectsLineEnabled&&t.fragment.code.add(r["a"]`
    {
      if (pointIsWithinLine(pos, intersectsLineStart, intersectsLineEnd)) {
        float intersectsLineDistance = lineDistancePixels(intersectsLineStart, intersectsLineDirection, intersectsLineRadius, pos);
        vec4 intersectsLineColor = laserlineProfile(intersectsLineDistance);
        float intersectsLineAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, 1.0 - abs(dot(normal, intersectsLineDirection)));

        color = max(color, intersectsLineColor * intersectsLineAlpha);
      }
    }
    `),t.fragment.code.add(r["a"]`
    gl_FragColor = laserlineOutput(color * depthDiscontinuityAlpha);
  }
  `),t}var u=Object.freeze({__proto__:null,defaultAngleCutoff:l,build:c})},ac07:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"device-detail"},[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],ref:"dialog",attrs:{title:e.attributes.deviceName,top:"20vh",visible:e.showme,"custom-class":"device-detail-dialog",modal:!1,"close-on-click-modal":!1,width:"800px"},on:{close:e.handleClose}},[e.loading?i("div"):[i(e.module,{tag:"component",attrs:{attributes:e.attributes}})],i("b",{staticClass:"stick",on:{click:e.stickToBoxs}})],2)],1)},r=[],a=i("d2b8"),o=i("e703"),s={name:"DeviceDetail",components:{Camera:o["default"]},props:{showme:{type:Boolean},attributes:{type:Object}},model:{prop:"showme",event:"toggle"},data:function(){return{loading:!0,module:null,detail:{}}},watch:{attributes:function(e){console.log(e),Object.keys(e).length<=0||this.getDetail()},showme:function(e){0==e&&(this.loading=!0)}},computed:{title:function(){return this.detail.deviceName||"设备详情"}},mounted:function(){},methods:{getDetail:function(){var e=this.attributes.deviceType,t=a["c"][e].fn;this.module=function(){return i("e41e")("./".concat(t,".vue"))},this.loading=!1},stickToBoxs:function(){this.handleClose();var e=this.$refs["dialog"].$el.children[0],t=e.offsetLeft,i=e.offsetTop,n=e.offsetWidth,r=e.offsetHeight,a=this.attributes.deviceUid;this.$store.commit("ADD_FLOATING",{data:this.attributes,style:{top:i,left:t,width:n,height:r,zIndex:0},type:"StickPanel",id:a})},handleClose:function(){this.$emit("toggle",!1)}}},l=s,c=(i("cfd2"),i("2877")),u=Object(c["a"])(l,n,r,!1,null,"5ce52ca8",null);t["default"]=u.exports},ac0f:function(e,t,i){var n=i("cbe5"),r=i("401b"),a=i("4a3f"),o=a.quadraticSubdivide,s=a.cubicSubdivide,l=a.quadraticAt,c=a.cubicAt,u=a.quadraticDerivativeAt,h=a.cubicDerivativeAt,d=[];function p(e,t,i){var n=e.cpx2,r=e.cpy2;return null===n||null===r?[(i?h:c)(e.x1,e.cpx1,e.cpx2,e.x2,t),(i?h:c)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(i?u:l)(e.x1,e.cpx1,e.x2,t),(i?u:l)(e.y1,e.cpy1,e.y2,t)]}var f=n.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var i=t.x1,n=t.y1,r=t.x2,a=t.y2,l=t.cpx1,c=t.cpy1,u=t.cpx2,h=t.cpy2,p=t.percent;0!==p&&(e.moveTo(i,n),null==u||null==h?(p<1&&(o(i,l,r,p,d),l=d[1],r=d[2],o(n,c,a,p,d),c=d[1],a=d[2]),e.quadraticCurveTo(l,c,r,a)):(p<1&&(s(i,l,u,r,p,d),l=d[1],u=d[2],r=d[3],s(n,c,h,a,p,d),c=d[1],h=d[2],a=d[3]),e.bezierCurveTo(l,c,u,h,r,a)))},pointAt:function(e){return p(this.shape,e,!1)},tangentAt:function(e){var t=p(this.shape,e,!0);return r.normalize(t,t)}});e.exports=f},adda:function(e,t,i){var n=i("94e41"),r=n.circularLayout;function a(e){e.eachSeriesByType("graph",(function(e){"circular"===e.get("layout")&&r(e,"symbolSize")}))}e.exports=a},ae69:function(e,t,i){var n=i("cbe5"),r=n.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(e,t){var i=.5522848,n=t.cx,r=t.cy,a=t.rx,o=t.ry,s=a*i,l=o*i;e.moveTo(n-a,r),e.bezierCurveTo(n-a,r-l,n-s,r-o,n,r-o),e.bezierCurveTo(n+s,r-o,n+a,r-l,n+a,r),e.bezierCurveTo(n+a,r+l,n+s,r+o,n,r+o),e.bezierCurveTo(n-s,r+o,n-a,r+l,n-a,r),e.closePath()}});e.exports=r},af24:function(e,t,i){i("48c7"),i("f273")},afa0:function(e,t,i){var n=i("6d8b"),r=i("22d1"),a=i("e1fc"),o=i("04f6");function s(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var l=function(){this._roots=[],this._displayList=[],this._displayListLen=0};l.prototype={constructor:l,traverse:function(e,t){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(e,t)},getDisplayList:function(e,t){return t=t||!1,e&&this.updateDisplayList(t),this._displayList},updateDisplayList:function(e){this._displayListLen=0;for(var t=this._roots,i=this._displayList,n=0,a=t.length;n<a;n++)this._updateAndAddDisplayable(t[n],null,e);i.length=this._displayListLen,r.canvasSupported&&o(i,s)},_updateAndAddDisplayable:function(e,t,i){if(!e.ignore||i){e.beforeUpdate(),e.__dirty&&e.update(),e.afterUpdate();var n=e.clipPath;if(n){t=t?t.slice():[];var r=n,a=e;while(r)r.parent=a,r.updateTransform(),t.push(r),a=r,r=r.clipPath}if(e.isGroup){for(var o=e._children,s=0;s<o.length;s++){var l=o[s];e.__dirty&&(l.__dirty=!0),this._updateAndAddDisplayable(l,t,i)}e.__dirty=!1}else e.__clipPaths=t,this._displayList[this._displayListLen++]=e}},addRoot:function(e){e.__storage!==this&&(e instanceof a&&e.addChildrenToStorage(this),this.addToStorage(e),this._roots.push(e))},delRoot:function(e){if(null==e){for(var t=0;t<this._roots.length;t++){var i=this._roots[t];i instanceof a&&i.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(e instanceof Array){t=0;for(var r=e.length;t<r;t++)this.delRoot(e[t])}else{var o=n.indexOf(this._roots,e);o>=0&&(this.delFromStorage(e),this._roots.splice(o,1),e instanceof a&&e.delChildrenFromStorage(this))}},addToStorage:function(e){return e&&(e.__storage=this,e.dirty(!1)),this},delFromStorage:function(e){return e&&(e.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:s};var c=l;e.exports=c},afdf:function(e,t,i){},b03ce:function(e,t){var i="auto",n={"":1,lr:1,rl:1},r={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function a(e){if("string"!==typeof e)return!1;var t=n[e.toLowerCase()];return!!t&&e.toLowerCase()}function o(e){if("string"!==typeof e)return!1;var t=r[e.toLowerCase()];return!!t&&e.toLowerCase()}function s(e,t,n){this.hasBeenReset=!1;var r="",s=!1,l=e,c=t,u=n,h=null,d="",p=!0,f="auto",m="start",g="auto",v="auto",y=100,_="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(e){r=""+e}},pauseOnExit:{enumerable:!0,get:function(){return s},set:function(e){s=!!e}},startTime:{enumerable:!0,get:function(){return l},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");l=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return c},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return u},set:function(e){u=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return h},set:function(e){h=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return d},set:function(e){var t=a(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");d=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return p},set:function(e){p=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return f},set:function(e){if("number"!==typeof e&&e!==i)throw new SyntaxError("Line: an invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return m},set:function(e){var t=o(e);t?(m=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return v},set:function(e){var t=o(e);t?(v=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");y=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return _},set:function(e){var t=o(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");_=t,this.hasBeenReset=!0}}}),this.displayState=void 0}s.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=s},b0af:function(e,t,i){var n=i("2306"),r=i("3842"),a=r.round;function o(e,t,i){var r=e.getArea(),a=e.getBaseAxis().isHorizontal(),o=r.x,s=r.y,l=r.width,c=r.height,u=i.get("lineStyle.width")||2;o-=u/2,s-=u/2,l+=u,c+=u,o=Math.floor(o),l=Math.round(l);var h=new n.Rect({shape:{x:o,y:s,width:l,height:c}});return t&&(h.shape[a?"width":"height"]=0,n.initProps(h,{shape:{width:l,height:c}},i)),h}function s(e,t,i){var r=e.getArea(),o=new n.Sector({shape:{cx:a(e.cx,1),cy:a(e.cy,1),r0:a(r.r0,1),r:a(r.r,1),startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});return t&&(o.shape.endAngle=r.startAngle,n.initProps(o,{shape:{endAngle:r.endAngle}},i)),o}function l(e,t,i){return e?"polar"===e.type?s(e,t,i):"cartesian2d"===e.type?o(e,t,i):null:null}t.createGridClipPath=o,t.createPolarClipPath=s,t.createClipPath=l},b0e5:function(e,t,i){"use strict";i("68e7")},b12f:function(e,t,i){var n=i("e1fc"),r=i("8918"),a=i("625e"),o=function(){this.group=new n,this.uid=r.getUID("viewComponent")};o.prototype={constructor:o,init:function(e,t){},render:function(e,t,i,n){},dispose:function(){},filterForExposedEvent:null};var s=o.prototype;s.updateView=s.updateLayout=s.updateVisual=function(e,t,i,n){},a.enableClassExtend(o),a.enableClassManagement(o,{registerWhenExtend:!0});var l=o;e.exports=l},b17c:function(e,t,i){var n=i("4a4b"),r=i("6f8f");function a(t,i,o){return r()?(e.exports=a=Reflect.construct,e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=a=function(e,t,i){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return i&&n(o,i.prototype),o},e.exports["default"]=e.exports,e.exports.__esModule=!0),a.apply(null,arguments)}e.exports=a,e.exports["default"]=e.exports,e.exports.__esModule=!0},b1d4:function(e,t,i){var n=i("862d");function r(e,t){return t=t||{},n(t.coordDimensions||[],e,{dimsDef:t.dimensionsDefine||e.dimensionsDefine,encodeDef:t.encodeDefine||e.encodeDefine,dimCount:t.dimensionsCount,encodeDefaulter:t.encodeDefaulter,generateCoord:t.generateCoord,generateCoordCount:t.generateCoordCount})}e.exports=r},b1e9:function(e,t,i){"use strict";i("7f18")},b306:function(e,t,i){"use strict";i("e0ad")},b34e:function(e,t,i){e.exports=i.p+"img/legend.9a841c1b.png"},b48e:function(e,t,i){"use strict";var n,r=i("a4ee"),a=(i("c120"),i("e92d"),i("cea0"),i("59b2")),o=i("d386"),s=(i("e041"),i("8eed"),i("f402"),i("2c81")),l=i("9786"),c=i("4ae5"),u=i("1219"),h=i("f694"),d=i("8048"),p=(i("ce50"),i("5996")),f=(i("521c"),i("e06a"),i("d636"));function m(e){if(!e)return null;if(e.isGeographic&&e.wkid){const t=f["c"][e.wkid];if(t)return t}if(e.wkt){const t=f["a"].exec(e.wkt);if(!t||2!==t.length)return null;const i=t[1].split(",");if(!i||i.length<3)return null;const n=parseFloat(i[1]),r=parseFloat(i[2]);return isNaN(n)||isNaN(r)?null:{a:n,f:0===r?0:1/r}}return null}function g(e){return"b"in e&&"eSq"in e&&"radius"in e}function v(e){const t=m(e||p["a"].WGS84);if(g(t))return t;const i=t.a*(1-t.f);return Object.assign(t,{b:i,eSq:1-(i/t.a)**2,radius:(2*t.a+i)/3,densificationRatio:1e4/((2*t.a+i)/3)})}function y(e,t,i,n,r){const a=t[0],o=t[1],s=a*f["d"],l=o*f["d"],c=i*f["d"],{a:u,b:h,f:d}=v(r),p=Math.sin(c),m=Math.cos(c),g=(1-d)*Math.tan(l),y=1/Math.sqrt(1+g*g),_=g*y,b=Math.atan2(g,m),x=y*p,w=x*x,T=1-w,S=T*(u*u-h*h)/(h*h),O=1+S/16384*(4096+S*(S*(320-175*S)-768)),C=S/1024*(256+S*(S*(74-47*S)-128));let k,P,E,A,I=n/(h*O),M=2*Math.PI;for(;Math.abs(I-M)>1e-12;)E=Math.cos(2*b+I),k=Math.sin(I),P=Math.cos(I),A=C*k*(E+C/4*(P*(2*E*E-1)-C/6*E*(4*k*k-3)*(4*E*E-3))),M=I,I=n/(h*O)+A;const D=_*k-y*P*m,j=Math.atan2(_*P+y*k*m,(1-d)*Math.sqrt(w+D*D)),L=Math.atan2(k*p,y*P-_*k*m),R=d/16*T*(4+d*(4-3*T)),N=j/f["d"],z=(s+(L-(1-R)*d*x*(I+R*k*(E+R*P*(2*E*E-1)))))/f["d"];return e[0]=z,e[1]=N,e}let _=n=class extends u["a"]{constructor(...e){super(...e),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(e,t){let i;if(e&&e.center)i=e;else{if(e&&e.rings)return super.normalizeCtorArgs(e,t);i={center:e}}return{...super.normalizeCtorArgs(),...i,...t}}initialize(){const e=this.center,t=this.numberOfPoints;if(this.hasZ=e&&e.hasZ,0!==this.rings.length||!e)return;const i=Object(d["b"])(this.radius,this.radiusUnit,"meters"),n=e.spatialReference;let r,a="geographic";if(n.isWebMercator?a="webMercator":(null!=s["a"][n.wkid]||n.wkt&&0===n.wkt.indexOf("PROJCS"))&&(a="projected"),this.geodesic){let n;switch(a){case"webMercator":n=Object(l["e"])(e);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":n=e}r=this._createGeodesicCircle(n,i,t),"webMercator"===a&&(r=Object(l["b"])(r))}else{let n;"webMercator"===a||"projected"===a?n=i/this._convert2Meters(1,e.spatialReference):"geographic"===a&&(n=Object(d["i"])(i,"meters",Object(h["e"])(e.spatialReference).radius)),r=this._createPlanarCircle(e,n,t)}this.spatialReference=r.spatialReference,this.addRing(r.rings[0])}clone(){const{center:e,numberOfPoints:t,radius:i,radiusUnit:r,geodesic:a}=this;return new n({center:e.clone(),numberOfPoints:t,radius:i,radiusUnit:r,geodesic:a})}_createGeodesicCircle(e,t,i){let n=0;const r=[];for(;n<360;){const a=[0,0],o=[e.x,e.y];y(a,o,n,t),this.hasZ&&a.push(e.z),r.push(a),n+=360/i}return r.push(r[0]),new u["a"](r)}_createPlanarCircle(e,t,i){let n=0;const r=[];for(;n<2*Math.PI;){const a=[e.x+Math.cos(-n)*t,e.y+Math.sin(-n)*t];this.hasZ&&a.push(e.z),r.push(a),n+=Math.PI/(i/2)}return r.push(r[0]),new u["a"]({spatialReference:e.spatialReference,rings:[r]})}_convert2Meters(e,t){let i;if(null!=s["a"][t.wkid])i=s["a"].values[s["a"][t.wkid]];else{const e=t.wkt,n=e.lastIndexOf(",")+1,r=e.lastIndexOf("]]");i=parseFloat(e.substring(n,r))}return e*i}};Object(r["a"])([Object(a["b"])({type:c["a"]})],_.prototype,"center",void 0),Object(r["a"])([Object(a["b"])()],_.prototype,"geodesic",void 0),Object(r["a"])([Object(a["b"])()],_.prototype,"numberOfPoints",void 0),Object(r["a"])([Object(a["b"])()],_.prototype,"radius",void 0),Object(r["a"])([Object(a["b"])()],_.prototype,"radiusUnit",void 0),_=n=Object(r["a"])([Object(o["a"])("esri.geometry.Circle")],_);var b=_;t["a"]=b},b575:function(e,t,i){"use strict";t["a"]={data:function(){return{multiData:[]}},methods:{tableSelectionChange:function(e){this.multiData=e},sizeChange:function(e){this.filter.pageSize=e,this.getData()},currentChange:function(e){this.filter.pageNum=e,this.getData()},sortChange:function(e){e.column;var t=e.prop,i=e.order;i?(this.filter.sortOrder="ascending"===i?"ASC":"DESC",this.filter.sortName=t):(this.filter.sortOrder="",this.filter.sortName=""),this.getData()},search:function(){this.filter.pageNum=1,this.getData()},resetSearch:function(){var e=this.filter.pageNum,t=this.filter.pageSize,i=this.filter.rowTotal;this.filter=this.$options.data().filter,this.filter.pageNum=e,this.filter.pageSize=t,this.filter.rowTotal=i,this.getData()}}}},b5c7:function(e,t,i){var n=i("282b"),r=n([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),a={getBarItemStyle:function(e){var t=r(this,e);if(this.getBorderLineDash){var i=this.getBorderLineDash();i&&(t.lineDash=i)}return t}};e.exports=a},b639:function(e,t,i){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=i("1fb5"),r=i("9152"),a=i("e3db");function o(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=c.prototype):(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,i){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(e,t,i);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return u(this,e,t,i)}function u(e,t,i,n){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?g(e,t,i,n):"string"===typeof t?f(e,t,i):v(e,t)}function h(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t,i,n){return h(t),t<=0?l(e,t):void 0!==i?"string"===typeof n?l(e,t).fill(i,n):l(e,t).fill(i):l(e,t)}function p(e,t){if(h(t),e=l(e,t<0?0:0|y(t)),!c.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function f(e,t,i){if("string"===typeof i&&""!==i||(i="utf8"),!c.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|b(t,i);e=l(e,n);var r=e.write(t,i);return r!==n&&(e=e.slice(0,r)),e}function m(e,t){var i=t.length<0?0:0|y(t.length);e=l(e,i);for(var n=0;n<i;n+=1)e[n]=255&t[n];return e}function g(e,t,i,n){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===i&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,i):new Uint8Array(t,i,n),c.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=c.prototype):e=m(e,t),e}function v(e,t){if(c.isBuffer(t)){var i=0|y(t.length);return e=l(e,i),0===e.length?e:(t.copy(e,0,0,i),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||te(t.length)?l(e,0):m(e,t);if("Buffer"===t.type&&a(t.data))return m(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function _(e){return+e!=e&&(e=0),c.alloc(+e)}function b(e,t){if(c.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return J(e).length;default:if(n)return K(e).length;t=(""+t).toLowerCase(),n=!0}}function x(e,t,i){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if(i>>>=0,t>>>=0,i<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return N(this,t,i);case"utf8":case"utf-8":return M(this,t,i);case"ascii":return L(this,t,i);case"latin1":case"binary":return R(this,t,i);case"base64":return I(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function w(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function T(e,t,i,n,r){if(0===e.length)return-1;if("string"===typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(r)return-1;i=e.length-1}else if(i<0){if(!r)return-1;i=0}if("string"===typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:S(e,t,i,n,r);if("number"===typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):S(e,[t],i,n,r);throw new TypeError("val must be string, number or Buffer")}function S(e,t,i,n,r){var a,o=1,s=e.length,l=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,i/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(r){var u=-1;for(a=i;a<s;a++)if(c(e,a)===c(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===l)return u*o}else-1!==u&&(a-=a-u),u=-1}else for(i+l>s&&(i=s-l),a=i;a>=0;a--){for(var h=!0,d=0;d<l;d++)if(c(e,a+d)!==c(t,d)){h=!1;break}if(h)return a}return-1}function O(e,t,i,n){i=Number(i)||0;var r=e.length-i;n?(n=Number(n),n>r&&(n=r)):n=r;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[i+o]=s}return o}function C(e,t,i,n){return ee(K(t,e.length-i),e,i,n)}function k(e,t,i,n){return ee($(t),e,i,n)}function P(e,t,i,n){return k(e,t,i,n)}function E(e,t,i,n){return ee(J(t),e,i,n)}function A(e,t,i,n){return ee(Q(t,e.length-i),e,i,n)}function I(e,t,i){return 0===t&&i===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,i))}function M(e,t,i){i=Math.min(e.length,i);var n=[],r=t;while(r<i){var a,o,s,l,c=e[r],u=null,h=c>239?4:c>223?3:c>191?2:1;if(r+h<=i)switch(h){case 1:c<128&&(u=c);break;case 2:a=e[r+1],128===(192&a)&&(l=(31&c)<<6|63&a,l>127&&(u=l));break;case 3:a=e[r+1],o=e[r+2],128===(192&a)&&128===(192&o)&&(l=(15&c)<<12|(63&a)<<6|63&o,l>2047&&(l<55296||l>57343)&&(u=l));break;case 4:a=e[r+1],o=e[r+2],s=e[r+3],128===(192&a)&&128===(192&o)&&128===(192&s)&&(l=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s,l>65535&&l<1114112&&(u=l))}null===u?(u=65533,h=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),r+=h}return j(n)}t.Buffer=c,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:o(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,i){return u(null,e,t,i)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,i){return d(null,e,t,i)},c.allocUnsafe=function(e){return p(null,e)},c.allocUnsafeSlow=function(e){return p(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,n=t.length,r=0,a=Math.min(i,n);r<a;++r)if(e[r]!==t[r]){i=e[r],n=t[r];break}return i<n?-1:n<i?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=c.allocUnsafe(t),r=0;for(i=0;i<e.length;++i){var o=e[i];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},c.byteLength=b,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?M(this,0,e):x.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,i,n,r){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),t<0||i>e.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&t>=i)return 0;if(n>=r)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,n>>>=0,r>>>=0,this===e)return 0;for(var a=r-n,o=i-t,s=Math.min(a,o),l=this.slice(n,r),u=e.slice(t,i),h=0;h<s;++h)if(l[h]!==u[h]){a=l[h],o=u[h];break}return a<o?-1:o<a?1:0},c.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},c.prototype.indexOf=function(e,t,i){return T(this,e,t,i,!0)},c.prototype.lastIndexOf=function(e,t,i){return T(this,e,t,i,!1)},c.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"===typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-t;if((void 0===i||i>r)&&(i=r),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return O(this,e,t,i);case"utf8":case"utf-8":return C(this,e,t,i);case"ascii":return k(this,e,t,i);case"latin1":case"binary":return P(this,e,t,i);case"base64":return E(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function j(e){var t=e.length;if(t<=D)return String.fromCharCode.apply(String,e);var i="",n=0;while(n<t)i+=String.fromCharCode.apply(String,e.slice(n,n+=D));return i}function L(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(127&e[r]);return n}function R(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]);return n}function N(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var r="",a=t;a<i;++a)r+=X(e[a]);return r}function z(e,t,i){for(var n=e.slice(t,i),r="",a=0;a<n.length;a+=2)r+=String.fromCharCode(n[a]+256*n[a+1]);return r}function B(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function V(e,t,i,n,r,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function F(e,t,i,n){t<0&&(t=65535+t+1);for(var r=0,a=Math.min(e.length-i,2);r<a;++r)e[i+r]=(t&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function U(e,t,i,n){t<0&&(t=4294967295+t+1);for(var r=0,a=Math.min(e.length-i,4);r<a;++r)e[i+r]=t>>>8*(n?r:3-r)&255}function G(e,t,i,n,r,a){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function H(e,t,i,n,a){return a||G(e,t,i,4,34028234663852886e22,-34028234663852886e22),r.write(e,t,i,n,23,4),i+4}function W(e,t,i,n,a){return a||G(e,t,i,8,17976931348623157e292,-17976931348623157e292),r.write(e,t,i,n,52,8),i+8}c.prototype.slice=function(e,t){var i,n=this.length;if(e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=c.prototype;else{var r=t-e;i=new c(r,void 0);for(var a=0;a<r;++a)i[a]=this[a+e]}return i},c.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||B(e,t,this.length);var n=this[e],r=1,a=0;while(++a<t&&(r*=256))n+=this[e+a]*r;return n},c.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||B(e,t,this.length);var n=this[e+--t],r=1;while(t>0&&(r*=256))n+=this[e+--t]*r;return n},c.prototype.readUInt8=function(e,t){return t||B(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||B(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||B(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||B(e,t,this.length);var n=this[e],r=1,a=0;while(++a<t&&(r*=256))n+=this[e+a]*r;return r*=128,n>=r&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||B(e,t,this.length);var n=t,r=1,a=this[e+--n];while(n>0&&(r*=256))a+=this[e+--n]*r;return r*=128,a>=r&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||B(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},c.prototype.readInt16BE=function(e,t){t||B(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},c.prototype.readInt32LE=function(e,t){return t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||B(e,4,this.length),r.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||B(e,4,this.length),r.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||B(e,8,this.length),r.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||B(e,8,this.length),r.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,i,n){if(e=+e,t|=0,i|=0,!n){var r=Math.pow(2,8*i)-1;V(this,e,t,i,r,0)}var a=1,o=0;this[t]=255&e;while(++o<i&&(a*=256))this[t+o]=e/a&255;return t+i},c.prototype.writeUIntBE=function(e,t,i,n){if(e=+e,t|=0,i|=0,!n){var r=Math.pow(2,8*i)-1;V(this,e,t,i,r,0)}var a=i-1,o=1;this[t+a]=255&e;while(--a>=0&&(o*=256))this[t+a]=e/o&255;return t+i},c.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):U(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t|=0,!n){var r=Math.pow(2,8*i-1);V(this,e,t,i,r-1,-r)}var a=0,o=1,s=0;this[t]=255&e;while(++a<i&&(o*=256))e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+i},c.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t|=0,!n){var r=Math.pow(2,8*i-1);V(this,e,t,i,r-1,-r)}var a=i-1,o=1,s=0;this[t+a]=255&e;while(--a>=0&&(o*=256))e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+i},c.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):U(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,i){return H(this,e,t,!0,i)},c.prototype.writeFloatBE=function(e,t,i){return H(this,e,t,!1,i)},c.prototype.writeDoubleLE=function(e,t,i){return W(this,e,t,!0,i)},c.prototype.writeDoubleBE=function(e,t,i){return W(this,e,t,!1,i)},c.prototype.copy=function(e,t,i,n){if(i||(i=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var r,a=n-i;if(this===e&&i<t&&t<n)for(r=a-1;r>=0;--r)e[r+t]=this[r+i];else if(a<1e3||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)e[r+t]=this[r+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+a),t);return a},c.prototype.fill=function(e,t,i,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,i=this.length):"string"===typeof i&&(n=i,i=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var a;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"===typeof e)for(a=t;a<i;++a)this[a]=e;else{var o=c.isBuffer(e)?e:K(new c(e,n).toString()),s=o.length;for(a=0;a<i-t;++a)this[a+t]=o[a%s]}return this};var q=/[^+\/0-9A-Za-z-_]/g;function Z(e){if(e=Y(e).replace(q,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function Y(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function X(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,t){var i;t=t||1/0;for(var n=e.length,r=null,a=[],o=0;o<n;++o){if(i=e.charCodeAt(o),i>55295&&i<57344){if(!r){if(i>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}r=i;continue}if(i<56320){(t-=3)>-1&&a.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function $(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}function Q(e,t){for(var i,n,r,a=[],o=0;o<e.length;++o){if((t-=2)<0)break;i=e.charCodeAt(o),n=i>>8,r=i%256,a.push(r),a.push(n)}return a}function J(e){return n.toByteArray(Z(e))}function ee(e,t,i,n){for(var r=0;r<n;++r){if(r+i>=t.length||r>=e.length)break;t[r+i]=e[r]}return r}function te(e){return e!==e}}).call(this,i("c8ba"))},b63c:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("6706"),r=i("7dcb");class a extends r["a"]{constructor(e){super(),this.point=e}equals(e){return e instanceof a&&Object(n["d"])(this.point,e.point)}}},b65e:function(e,t,i){"use strict";function n(e,t){if(!t||!e||!e.map)return;const{map:i}=e;i.layers.find(e=>e===t)||i.add(t)}i.d(t,"a",(function(){return n}))},b719:function(e,t,i){var n=i("697e7");t.zrender=n;var r=i("1687");t.matrix=r;var a=i("401b");t.vector=a;var o=i("6d8b"),s=i("41ef");t.color=s;var l=i("2306"),c=i("3842");t.number=c;var u=i("eda2");t.format=u;var h=i("88b3");h.throttle;t.throttle=h.throttle;var d=i("1548");t.helper=d;var p=i("bda7");t.parseGeoJSON=p;var f=i("6179");t.List=f;var m=i("4319");t.Model=m;var g=i("84ce");t.Axis=g;var v=i("22d1");t.env=v;var y=p,_={};o.each(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],(function(e){_[e]=o[e]}));var b={};o.each(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],(function(e){b[e]=l[e]})),t.parseGeoJson=y,t.util=_,t.graphic=b},b7d5:function(e,t,i){"use strict";i("51a3")},b809:function(e,t,i){var n=i("6d8b"),r=i("29a8"),a=i("2b17"),o=a.retrieveRawValue;function s(e,t){var i=t.getModel("aria");if(i.get("show"))if(i.get("description"))e.setAttribute("aria-label",i.get("description"));else{var a=0;t.eachSeries((function(e,t){++a}),this);var s,l=i.get("data.maxCount")||10,c=i.get("series.maxCount")||10,u=Math.min(a,c);if(!(a<1)){var h=g();s=h?f(m("general.withTitle"),{title:h}):m("general.withoutTitle");var d=[],p=a>1?"series.multiple.prefix":"series.single.prefix";s+=f(m(p),{seriesCount:a}),t.eachSeries((function(e,t){if(t<u){var i,n=e.get("name"),r="series."+(a>1?"multiple":"single")+".";i=m(n?r+"withName":r+"withoutName"),i=f(i,{seriesId:e.seriesIndex,seriesName:e.get("name"),seriesType:v(e.subType)});var s=e.getData();window.data=s,s.count()>l?i+=f(m("data.partialData"),{displayCnt:l}):i+=m("data.allData");for(var c=[],h=0;h<s.count();h++)if(h<l){var p=s.getName(h),g=o(s,h);c.push(f(m(p?"data.withName":"data.withoutName"),{name:p,value:g}))}i+=c.join(m("data.separator.middle"))+m("data.separator.end"),d.push(i)}})),s+=d.join(m("series.multiple.separator.middle"))+m("series.multiple.separator.end"),e.setAttribute("aria-label",s)}}function f(e,t){if("string"!==typeof e)return e;var i=e;return n.each(t,(function(e,t){i=i.replace(new RegExp("\\{\\s*"+t+"\\s*\\}","g"),e)})),i}function m(e){var t=i.get(e);if(null==t){for(var n=e.split("."),a=r.aria,o=0;o<n.length;++o)a=a[n[o]];return a}return t}function g(){var e=t.getModel("title").option;return e&&e.length&&(e=e[0]),e&&e.text}function v(e){return r.series.typeNames[e]||"自定义图"}}e.exports=s},ba3e:function(e,t,i){"use strict";i("dfec")},ba58:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return m}));i("b2b2");var n=i("32ed"),r=i("57e5"),a=i("38a4"),o=(i("0b2d"),i("d791"),i("9180"),i("8188")),s=(i("afe1"),i("02f1")),l=(i("0fc4"),i("7577"),i("4261"),i("1a54")),c=i("d3cf");function u(e,t){if("point"===e.type)return f(e,t,!1);if(Object(c["c"])(e))switch(e.type){case"extent":return f(e.center,t,!1);case"polygon":return f(e.centroid,t,!1);case"polyline":return f(h(e),t,!0);case"mesh":return f(e.extent.center,t,!1)}else switch(e.type){case"extent":return f(d(e),t,!0);case"polygon":return f(p(e),t,!0);case"polyline":return f(h(e),t,!0)}}function h(e){const t=e.paths[0];if(!t||0===t.length)return null;const i=Object(n["f"])(t,Object(n["e"])(t)/2);return Object(l["d"])(i[0],i[1],i[2],e.spatialReference)}function d(e){const t=Object(a["g"])(e.zmin);return Object(l["d"])(.5*(e.xmax+e.xmin),.5*(e.ymax+e.ymin),t?.5*(e.zmax+e.zmin):void 0,e.spatialReference)}function p(e){const t=e.rings[0];if(!t||0===t.length)return null;const i=Object(r["b"])(e.rings,e.hasZ);return Object(l["d"])(i[0],i[1],i[2],e.spatialReference)}function f(e,t,i){const n=i?e:Object(c["a"])(e);return t&&e?Object(o["l"])(e,n,t)?n:null:n}function m(e,t){for(let i=0;i<e.geometries.length;++i){const n=e.geometries[i].getMutableAttribute("auxpos1");n&&n.data[3]!==t&&(n.data[3]=t,e.geometryVertexAttrsUpdated(i))}}Object(s["e"])(0,0),Object(s["e"])(.5,0),Object(s["e"])(1,0),Object(s["e"])(0,.5),Object(s["e"])(.5,.5),Object(s["e"])(1,.5),Object(s["e"])(0,1),Object(s["e"])(.5,1),Object(s["e"])(1,1)},baea:function(e,t,i){"use strict";i("6cad")},bb70:function(e,t,i){var n=i("e86a"),r=i("3842"),a=r.parsePercent,o=Math.PI/180;function s(e,t,i,n,r,a,o,s,l,c){function u(t,i,n,r){for(var a=t;a<i;a++){if(e[a].y+n>l+o)break;if(e[a].y+=n,a>t&&a+1<i&&e[a+1].y>e[a].y+e[a].height)return void h(a,n/2)}h(i-1,n/2)}function h(t,i){for(var n=t;n>=0;n--){if(e[n].y-i<l)break;if(e[n].y-=i,n>0&&e[n].y>e[n-1].y+e[n-1].height)break}}function d(e,t,i,n,r,a){for(var o=t?Number.MAX_VALUE:0,s=0,l=e.length;s<l;s++)if("none"===e[s].labelAlignTo){var c=Math.abs(e[s].y-n),u=e[s].len,h=e[s].len2,d=c<r+u?Math.sqrt((r+u+h)*(r+u+h)-c*c):Math.abs(e[s].x-i);t&&d>=o&&(d=o-10),!t&&d<=o&&(d=o+10),e[s].x=i+d*a,o=d}}e.sort((function(e,t){return e.y-t.y}));for(var p,f=0,m=e.length,g=[],v=[],y=0;y<m;y++){if("outer"===e[y].position&&"labelLine"===e[y].labelAlignTo){var _=e[y].x-c;e[y].linePoints[1][0]+=_,e[y].x=c}p=e[y].y-f,p<0&&u(y,m,-p,r),f=e[y].y+e[y].height}o-f<0&&h(m-1,f-o);for(y=0;y<m;y++)e[y].y>=i?v.push(e[y]):g.push(e[y]);d(g,!1,t,i,n,r),d(v,!0,t,i,n,r)}function l(e,t,i,r,a,o,l,u){for(var h=[],d=[],p=Number.MAX_VALUE,f=-Number.MAX_VALUE,m=0;m<e.length;m++)c(e[m])||(e[m].x<t?(p=Math.min(p,e[m].x),h.push(e[m])):(f=Math.max(f,e[m].x),d.push(e[m])));s(d,t,i,r,1,a,o,l,u,f),s(h,t,i,r,-1,a,o,l,u,p);for(m=0;m<e.length;m++){var g=e[m];if(!c(g)){var v=g.linePoints;if(v){var y,_="edge"===g.labelAlignTo,b=g.textRect.width;y=_?g.x<t?v[2][0]-g.labelDistance-l-g.labelMargin:l+a-g.labelMargin-v[2][0]-g.labelDistance:g.x<t?g.x-l-g.bleedMargin:l+a-g.x-g.bleedMargin,y<g.textRect.width&&(g.text=n.truncateText(g.text,y,g.font),"edge"===g.labelAlignTo&&(b=n.getWidth(g.text,g.font)));var x=v[1][0]-v[2][0];_?g.x<t?v[2][0]=l+g.labelMargin+b+g.labelDistance:v[2][0]=l+a-g.labelMargin-b-g.labelDistance:(g.x<t?v[2][0]=g.x+g.labelDistance:v[2][0]=g.x-g.labelDistance,v[1][0]=v[2][0]+x),v[1][1]=v[2][1]=g.y}}}}function c(e){return"center"===e.position}function u(e,t,i,r,s,c){var u,h,d=e.getData(),p=[],f=!1,m=(e.get("minShowLabelAngle")||0)*o;d.each((function(r){var o=d.getItemLayout(r),l=d.getItemModel(r),c=l.getModel("label"),g=c.get("position")||l.get("emphasis.label.position"),v=c.get("distanceToLabelLine"),y=c.get("alignTo"),_=a(c.get("margin"),i),b=c.get("bleedMargin"),x=c.getFont(),w=l.getModel("labelLine"),T=w.get("length");T=a(T,i);var S=w.get("length2");if(S=a(S,i),!(o.angle<m)){var O,C,k,P,E=(o.startAngle+o.endAngle)/2,A=Math.cos(E),I=Math.sin(E);u=o.cx,h=o.cy;var M,D=e.getFormattedLabel(r,"normal")||d.getName(r),j=n.getBoundingRect(D,x,P,"top"),L="inside"===g||"inner"===g;if("center"===g)O=o.cx,C=o.cy,P="center";else{var R=(L?(o.r+o.r0)/2*A:o.r*A)+u,N=(L?(o.r+o.r0)/2*I:o.r*I)+h;if(O=R+3*A,C=N+3*I,!L){var z=R+A*(T+t-o.r),B=N+I*(T+t-o.r),V=z+(A<0?-1:1)*S,F=B;O="edge"===y?A<0?s+_:s+i-_:V+(A<0?-v:v),C=F,k=[[R,N],[z,B],[V,F]]}P=L?"center":"edge"===y?A>0?"right":"left":A>0?"left":"right"}var U=c.get("rotate");M="number"===typeof U?U*(Math.PI/180):U?A<0?-E+Math.PI:-E:0,f=!!M,o.label={x:O,y:C,position:g,height:j.height,len:T,len2:S,linePoints:k,textAlign:P,verticalAlign:"middle",rotation:M,inside:L,labelDistance:v,labelAlignTo:y,labelMargin:_,bleedMargin:b,textRect:j,text:D,font:x},L||p.push(o.label)}})),!f&&e.get("avoidLabelOverlap")&&l(p,u,h,t,i,r,s,c)}e.exports=u},bc56:function(e,t,i){},bd6b:function(e,t,i){var n=i("06ad"),r=i("4942"),a=i("6d8b"),o=a.isString,s=a.isFunction,l=a.isObject,c=a.isArrayLike,u=a.indexOf,h=function(){this.animators=[]};function d(e,t,i,n,r,a,l,c){o(n)?(a=r,r=n,n=0):s(r)?(a=r,r="linear",n=0):s(n)?(a=n,n=0):s(i)?(a=i,i=500):i||(i=500),e.stopAnimation(),p(e,"",e,t,i,n,c);var u=e.animators.slice(),h=u.length;function d(){h--,h||a&&a()}h||a&&a();for(var f=0;f<u.length;f++)u[f].done(d).start(r,l)}function p(e,t,i,n,r,a,o){var s={},u=0;for(var h in n)n.hasOwnProperty(h)&&(null!=i[h]?l(n[h])&&!c(n[h])?p(e,t?t+"."+h:h,i[h],n[h],r,a,o):(o?(s[h]=i[h],f(e,t,h,n[h])):s[h]=n[h],u++):null==n[h]||o||f(e,t,h,n[h]));u>0&&e.animate(t,!1).when(null==r?500:r,s).delay(a||0)}function f(e,t,i,n){if(t){var r={};r[t]={},r[t][i]=n,e.attr(r)}else e.attr(i,n)}h.prototype={constructor:h,animate:function(e,t){var i,a=!1,o=this,s=this.__zr;if(e){var l=e.split("."),c=o;a="shape"===l[0];for(var h=0,d=l.length;h<d;h++)c&&(c=c[l[h]]);c&&(i=c)}else i=o;if(i){var p=o.animators,f=new n(i,t);return f.during((function(e){o.dirty(a)})).done((function(){p.splice(u(p,f),1)})),p.push(f),s&&s.animation.addAnimator(f),f}r('Property "'+e+'" is not existed in element '+o.id)},stopAnimation:function(e){for(var t=this.animators,i=t.length,n=0;n<i;n++)t[n].stop(e);return t.length=0,this},animateTo:function(e,t,i,n,r,a){d(this,e,t,i,n,r,a)},animateFrom:function(e,t,i,n,r,a){d(this,e,t,i,n,r,a,!0)}};var m=h;e.exports=m},bda7:function(e,t,i){var n=i("6d8b"),r=i("f279");function a(e){if(!e.UTF8Encoding)return e;var t=e.UTF8Scale;null==t&&(t=1024);for(var i=e.features,n=0;n<i.length;n++)for(var r=i[n],a=r.geometry,s=a.coordinates,l=a.encodeOffsets,c=0;c<s.length;c++){var u=s[c];if("Polygon"===a.type)s[c]=o(u,l[c],t);else if("MultiPolygon"===a.type)for(var h=0;h<u.length;h++){var d=u[h];u[h]=o(d,l[c][h],t)}}return e.UTF8Encoding=!1,e}function o(e,t,i){for(var n=[],r=t[0],a=t[1],o=0;o<e.length;o+=2){var s=e.charCodeAt(o)-64,l=e.charCodeAt(o+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),s+=r,l+=a,r=s,a=l,n.push([s/i,l/i])}return n}function s(e,t){return a(e),n.map(n.filter(e.features,(function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0})),(function(e){var i=e.properties,a=e.geometry,o=a.coordinates,s=[];"Polygon"===a.type&&s.push({type:"polygon",exterior:o[0],interiors:o.slice(1)}),"MultiPolygon"===a.type&&n.each(o,(function(e){e[0]&&s.push({type:"polygon",exterior:e[0],interiors:e.slice(1)})}));var l=new r(i[t||"name"],s,i.cp);return l.properties=i,l}))}e.exports=s},be09:function(e,t,i){(function(t){var i;i="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},e.exports=i}).call(this,i("c8ba"))},c037:function(e,t,i){var n=i("3eba"),r=i("6d8b");i("f7c6"),i("1ab36");var a=i("7782"),o=i("98e7"),s=i("292e"),l=i("d3f4");a("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),n.registerVisual(o("pie")),n.registerLayout(r.curry(s,"pie")),n.registerProcessor(l("pie"))},c1dd:function(e,t){function i(e,t){for(var i in e)t[i]=e[i]}function n(e,t){var n=e.prototype;if(!(n instanceof t)){function r(){}r.prototype=t.prototype,r=new r,i(n,r),e.prototype=n=r}n.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),n.constructor=e)}var r="http://www.w3.org/1999/xhtml",a={},o=a.ELEMENT_NODE=1,s=a.ATTRIBUTE_NODE=2,l=a.TEXT_NODE=3,c=a.CDATA_SECTION_NODE=4,u=a.ENTITY_REFERENCE_NODE=5,h=a.ENTITY_NODE=6,d=a.PROCESSING_INSTRUCTION_NODE=7,p=a.COMMENT_NODE=8,f=a.DOCUMENT_NODE=9,m=a.DOCUMENT_TYPE_NODE=10,g=a.DOCUMENT_FRAGMENT_NODE=11,v=a.NOTATION_NODE=12,y={},_={},b=(y.INDEX_SIZE_ERR=(_[1]="Index size error",1),y.DOMSTRING_SIZE_ERR=(_[2]="DOMString size error",2),y.HIERARCHY_REQUEST_ERR=(_[3]="Hierarchy request error",3)),x=(y.WRONG_DOCUMENT_ERR=(_[4]="Wrong document",4),y.INVALID_CHARACTER_ERR=(_[5]="Invalid character",5),y.NO_DATA_ALLOWED_ERR=(_[6]="No data allowed",6),y.NO_MODIFICATION_ALLOWED_ERR=(_[7]="No modification allowed",7),y.NOT_FOUND_ERR=(_[8]="Not found",8)),w=(y.NOT_SUPPORTED_ERR=(_[9]="Not supported",9),y.INUSE_ATTRIBUTE_ERR=(_[10]="Attribute in use",10));y.INVALID_STATE_ERR=(_[11]="Invalid state",11),y.SYNTAX_ERR=(_[12]="Syntax error",12),y.INVALID_MODIFICATION_ERR=(_[13]="Invalid modification",13),y.NAMESPACE_ERR=(_[14]="Invalid namespace",14),y.INVALID_ACCESS_ERR=(_[15]="Invalid access",15);function T(e,t){if(t instanceof Error)var i=t;else i=this,Error.call(this,_[e]),this.message=_[e],Error.captureStackTrace&&Error.captureStackTrace(this,T);return i.code=e,t&&(this.message=this.message+": "+t),i}function S(){}function O(e,t){this._node=e,this._refresh=t,C(this)}function C(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);oe(e,"length",n.length),i(n,e),e._inc=t}}function k(){}function P(e,t){var i=e.length;while(i--)if(e[i]===t)return i}function E(e,t,i,n){if(n?t[P(t,n)]=i:t[t.length++]=i,e){i.ownerElement=e;var r=e.ownerDocument;r&&(n&&N(r,e,n),R(r,e,i))}}function A(e,t,i){var n=P(t,i);if(!(n>=0))throw T(x,new Error(e.tagName+"@"+i));var r=t.length-1;while(n<r)t[n]=t[++n];if(t.length=r,e){var a=e.ownerDocument;a&&(N(a,e,i),i.ownerElement=null)}}function I(e){if(this._features={},e)for(var t in e)this._features=e[t]}function M(){}function D(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function j(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(j(e,t))return!0}while(e=e.nextSibling)}function L(){}function R(e,t,i){e&&e._inc++;var n=i.namespaceURI;"http://www.w3.org/2000/xmlns/"==n&&(t._nsMap[i.prefix?i.localName:""]=i.value)}function N(e,t,i,n){e&&e._inc++;var r=i.namespaceURI;"http://www.w3.org/2000/xmlns/"==r&&delete t._nsMap[i.prefix?i.localName:""]}function z(e,t,i){if(e&&e._inc){e._inc++;var n=t.childNodes;if(i)n[n.length++]=i;else{var r=t.firstChild,a=0;while(r)n[a++]=r,r=r.nextSibling;n.length=a}}}function B(e,t){var i=t.previousSibling,n=t.nextSibling;return i?i.nextSibling=n:e.firstChild=n,n?n.previousSibling=i:e.lastChild=i,z(e.ownerDocument,e),t}function V(e,t,i){var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===g){var r=t.firstChild;if(null==r)return t;var a=t.lastChild}else r=a=t;var o=i?i.previousSibling:e.lastChild;r.previousSibling=o,a.nextSibling=i,o?o.nextSibling=r:e.firstChild=r,null==i?e.lastChild=a:i.previousSibling=a;do{r.parentNode=e}while(r!==a&&(r=r.nextSibling));return z(e.ownerDocument||e,e),t.nodeType==g&&(t.firstChild=t.lastChild=null),t}function F(e,t){var i=t.parentNode;if(i){var n=e.lastChild;i.removeChild(t);n=e.lastChild}n=e.lastChild;return t.parentNode=e,t.previousSibling=n,t.nextSibling=null,n?n.nextSibling=t:e.firstChild=t,e.lastChild=t,z(e.ownerDocument,e,t),t}function U(){this._nsMap={}}function G(){}function H(){}function W(){}function q(){}function Z(){}function Y(){}function X(){}function K(){}function $(){}function Q(){}function J(){}function ee(){}function te(e,t){var i=[],n=9==this.nodeType&&this.documentElement||this,r=n.prefix,a=n.namespaceURI;if(a&&null==r){r=n.lookupPrefix(a);if(null==r)var o=[{namespace:a,prefix:null}]}return ne(this,i,e,t,o),i.join("")}function ie(e,t,i){var n=e.prefix||"",r=e.namespaceURI;if(!n&&!r)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===r||"http://www.w3.org/2000/xmlns/"==r)return!1;var a=i.length;while(a--){var o=i[a];if(o.prefix==n)return o.namespace!=r}return!0}function ne(e,t,i,n,a){if(n){if(e=n(e),!e)return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case o:a||(a=[]);a.length;var h=e.attributes,v=h.length,y=e.firstChild,_=e.tagName;i=r===e.namespaceURI||i,t.push("<",_);for(var b=0;b<v;b++){var x=h.item(b);"xmlns"==x.prefix?a.push({prefix:x.localName,namespace:x.value}):"xmlns"==x.nodeName&&a.push({prefix:"",namespace:x.value})}for(b=0;b<v;b++){x=h.item(b);if(ie(x,i,a)){var w=x.prefix||"",T=x.namespaceURI,S=w?" xmlns:"+w:" xmlns";t.push(S,'="',T,'"'),a.push({prefix:w,namespace:T})}ne(x,t,i,n,a)}if(ie(e,i,a)){w=e.prefix||"",T=e.namespaceURI,S=w?" xmlns:"+w:" xmlns";t.push(S,'="',T,'"'),a.push({prefix:w,namespace:T})}if(y||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(_)){if(t.push(">"),i&&/^script$/i.test(_))while(y)y.data?t.push(y.data):ne(y,t,i,n,a),y=y.nextSibling;else while(y)ne(y,t,i,n,a),y=y.nextSibling;t.push("</",_,">")}else t.push("/>");return;case f:case g:y=e.firstChild;while(y)ne(y,t,i,n,a),y=y.nextSibling;return;case s:return t.push(" ",e.name,'="',e.value.replace(/[&"]/g,D),'"');case l:return t.push(e.data.replace(/[<&]/g,D).replace(/]]>/g,"]]&gt;"));case c:return t.push("<![CDATA[",e.data,"]]>");case p:return t.push("\x3c!--",e.data,"--\x3e");case m:var O=e.publicId,C=e.systemId;if(t.push("<!DOCTYPE ",e.name),O)t.push(" PUBLIC ",O),C&&"."!=C&&t.push(" ",C),t.push(">");else if(C&&"."!=C)t.push(" SYSTEM ",C,">");else{var k=e.internalSubset;k&&t.push(" [",k,"]"),t.push(">")}return;case d:return t.push("<?",e.target," ",e.data,"?>");case u:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function re(e,t,i){var n;switch(t.nodeType){case o:n=t.cloneNode(!1),n.ownerDocument=e;case g:break;case s:i=!0;break}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,i){var r=t.firstChild;while(r)n.appendChild(re(e,r,i)),r=r.nextSibling}return n}function ae(e,t,i){var n=new t.constructor;for(var r in t){var a=t[r];"object"!=typeof a&&a!=n[r]&&(n[r]=a)}switch(t.childNodes&&(n.childNodes=new S),n.ownerDocument=e,n.nodeType){case o:var l=t.attributes,c=n.attributes=new k,u=l.length;c._ownerElement=n;for(var h=0;h<u;h++)n.setAttributeNode(ae(e,l.item(h),!0));break;case s:i=!0}if(i){var d=t.firstChild;while(d)n.appendChild(ae(e,d,i)),d=d.nextSibling}return n}function oe(e,t,i){e[t]=i}T.prototype=Error.prototype,i(y,T),S.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var i=[],n=0;n<this.length;n++)ne(this[n],i,e,t);return i.join("")}},O.prototype.item=function(e){return C(this),this[e]},n(O,S),k.prototype={length:0,item:S.prototype.item,getNamedItem:function(e){var t=this.length;while(t--){var i=this[t];if(i.nodeName==e)return i}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new T(w);var i=this.getNamedItem(e.nodeName);return E(this._ownerElement,this,e,i),i},setNamedItemNS:function(e){var t,i=e.ownerElement;if(i&&i!=this._ownerElement)throw new T(w);return t=this.getNamedItemNS(e.namespaceURI,e.localName),E(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return A(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var i=this.getNamedItemNS(e,t);return A(this._ownerElement,this,i),i},getNamedItemNS:function(e,t){var i=this.length;while(i--){var n=this[i];if(n.localName==t&&n.namespaceURI==e)return n}return null}},I.prototype={hasFeature:function(e,t){var i=this._features[e.toLowerCase()];return!(!i||t&&!(t in i))},createDocument:function(e,t,i){var n=new L;if(n.implementation=this,n.childNodes=new S,n.doctype=i,i&&n.appendChild(i),t){var r=n.createElementNS(e,t);n.appendChild(r)}return n},createDocumentType:function(e,t,i){var n=new Y;return n.name=e,n.nodeName=e,n.publicId=t,n.systemId=i,n}},M.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return V(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return B(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return ae(this.ownerDocument||this,this,e)},normalize:function(){var e=this.firstChild;while(e){var t=e.nextSibling;t&&t.nodeType==l&&e.nodeType==l?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){var t=this;while(t){var i=t._nsMap;if(i)for(var n in i)if(i[n]==e)return n;t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){var t=this;while(t){var i=t._nsMap;if(i&&e in i)return i[e];t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return null==t}},i(a,M),i(a,M.prototype),L.prototype={nodeName:"#document",nodeType:f,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==g){var i=e.firstChild;while(i){var n=i.nextSibling;this.insertBefore(i,t),i=n}return e}return null==this.documentElement&&e.nodeType==o&&(this.documentElement=e),V(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),B(this,e)},importNode:function(e,t){return re(this,e,t)},getElementById:function(e){var t=null;return j(this.documentElement,(function(i){if(i.nodeType==o&&i.getAttribute("id")==e)return t=i,!0})),t},getElementsByClassName:function(e){var t=new RegExp("(^|\\s)"+e+"(\\s|$)");return new O(this,(function(e){var i=[];return j(e.documentElement,(function(n){n!==e&&n.nodeType==o&&t.test(n.getAttribute("class"))&&i.push(n)})),i}))},createElement:function(e){var t=new U;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new S;var i=t.attributes=new k;return i._ownerElement=t,t},createDocumentFragment:function(){var e=new Q;return e.ownerDocument=this,e.childNodes=new S,e},createTextNode:function(e){var t=new W;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new q;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new Z;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var i=new J;return i.ownerDocument=this,i.tagName=i.target=e,i.nodeValue=i.data=t,i},createAttribute:function(e){var t=new G;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new $;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var i=new U,n=t.split(":"),r=i.attributes=new k;return i.childNodes=new S,i.ownerDocument=this,i.nodeName=t,i.tagName=t,i.namespaceURI=e,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,r._ownerElement=i,i},createAttributeNS:function(e,t){var i=new G,n=t.split(":");return i.ownerDocument=this,i.nodeName=t,i.name=t,i.namespaceURI=e,i.specified=!0,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,i}},n(L,M),U.prototype={nodeType:o,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var i=this.ownerDocument.createAttribute(e);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===g?this.insertBefore(e,null):F(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);i&&this.removeAttributeNode(i)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);return i&&i.value||""},setAttributeNS:function(e,t,i){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+i,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new O(this,(function(t){var i=[];return j(t,(function(n){n===t||n.nodeType!=o||"*"!==e&&n.tagName!=e||i.push(n)})),i}))},getElementsByTagNameNS:function(e,t){return new O(this,(function(i){var n=[];return j(i,(function(r){r===i||r.nodeType!==o||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||n.push(r)})),n}))}},L.prototype.getElementsByTagName=U.prototype.getElementsByTagName,L.prototype.getElementsByTagNameNS=U.prototype.getElementsByTagNameNS,n(U,M),G.prototype.nodeType=s,n(G,M),H.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(_[b])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,i){var n=this.data.substring(0,e),r=this.data.substring(e+t);i=n+i+r,this.nodeValue=this.data=i,this.length=i.length}},n(H,M),W.prototype={nodeName:"#text",nodeType:l,splitText:function(e){var t=this.data,i=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},n(W,H),q.prototype={nodeName:"#comment",nodeType:p},n(q,H),Z.prototype={nodeName:"#cdata-section",nodeType:c},n(Z,H),Y.prototype.nodeType=m,n(Y,M),X.prototype.nodeType=v,n(X,M),K.prototype.nodeType=h,n(K,M),$.prototype.nodeType=u,n($,M),Q.prototype.nodeName="#document-fragment",Q.prototype.nodeType=g,n(Q,M),J.prototype.nodeType=d,n(J,M),ee.prototype.serializeToString=function(e,t,i){return te.call(e,t,i)},M.prototype.toString=te;try{if(Object.defineProperty){function se(e){switch(e.nodeType){case o:case g:var t=[];e=e.firstChild;while(e)7!==e.nodeType&&8!==e.nodeType&&t.push(se(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(O.prototype,"length",{get:function(){return C(this),this.$$length}}),Object.defineProperty(M.prototype,"textContent",{get:function(){return se(this)},set:function(e){switch(this.nodeType){case o:case g:while(this.firstChild)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),oe=function(e,t,i){e["$$"+t]=i}}}catch(le){}t.Node=M,t.DOMException=T,t.DOMImplementation=I,t.XMLSerializer=ee},c20d:function(e,t,i){"use strict";i.d(t,"a",(function(){return w})),i.d(t,"b",(function(){return _})),i.d(t,"c",(function(){return b})),i.d(t,"d",(function(){return h})),i.d(t,"e",(function(){return u})),i.d(t,"f",(function(){return x})),i.d(t,"g",(function(){return p})),i.d(t,"h",(function(){return f})),i.d(t,"i",(function(){return g})),i.d(t,"j",(function(){return v})),i.d(t,"k",(function(){return y}));var n=i("7ffa"),r=i("b2b2"),a=(i("c649"),i("9786")),o=i("38a4"),s=i("a915"),l=i("cdc1");function c(e,t){let i=null,n=null;return a=>{if("cancel"===a.action)return void(Object(r["k"])(n)&&(n.execute({action:"cancel"}),i=null,n=null));const o={action:a.action,screenStart:a.start,screenEnd:a.screenPoint};"start"===a.action&&Object(r["j"])(i)&&(i=new w,n=new w,t(e,i,n,a.pointerType,o)),Object(r["k"])(i)&&i.execute(o),"end"===a.action&&Object(r["k"])(i)&&(i=null,n=null)}}function u(e,t){return e.events.on("drag",c(e,t))}function h(e,t){const i=[e.x,e.y,e.z],n=t,r=[Math.cos(n),Math.sin(n)],a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(0===a)return null;r[0]/=a,r[1]/=a;const o=e=>{const t=(e.x-i[0])*r[0]+(e.y-i[1])*r[1];e.x=i[0]+t*r[0],e.y=i[1]+t*r[1]};return e=>(o(e.mapStart),o(e.mapEnd),e)}function d(e,t){let i=null;const n=Object(r["k"])(e[t])?e[t].spatialReference:null;function o(e,t){return Object(r["j"])(e)||"mesh"===e.type?null:e.spatialReference.equals(t)?e.clone():Object(a["a"])(e,t)?Object(a["d"])(e,t):null}return s=>{if("start"===s.action&&Object(r["k"])(e[t])&&(i=o(e[t],s.mapStart.spatialReference)),Object(r["j"])(i))return null;const c=s.mapEnd.x-s.mapStart.x,u=s.mapEnd.y-s.mapStart.y,h=s.mapEnd.z-s.mapStart.z,d=Object(l["d"])(i.clone(),c,u,h);return d.spatialReference.equals(n)?e[t]=d:e[t]=Object(a["d"])(d,n),{...s,translationX:c,translationY:u,translationZ:h}}}function p(e){return d(e,"geometry")}function f(e){const t=e.map(e=>Object(r["q"])(p(e))).filter(e=>Object(r["k"])(e));return e=>{const i=e.mapEnd.x-e.mapStart.x,n=e.mapEnd.y-e.mapStart.y,r=e.mapEnd.z-e.mapStart.z;return t.forEach(t=>t(e)),{...e,translationX:i,translationY:n,translationZ:r}}}function m(e,t){const i=new Map;for(const r of t)i.set(r,Object(n["a"])(e[r]));return t=>(i.forEach((t,i)=>{e[i]=t}),t)}function g(e){return m(e,["geometry"])}function v(e){const t=e.map(e=>Object(r["q"])(g(e))).filter(e=>Object(r["k"])(e));return e=>(t.forEach(t=>t(e)),e)}function y(e){const t=Object(r["k"])(e.symbol)?e.symbol.clone():null;return i=>(e.symbol=t,i)}function _(){let e=0,t=0,i=0;return n=>{"start"===n.action&&(e=n.mapStart.x,t=n.mapStart.y,i=n.mapStart.z);const r=n.mapEnd.x-e,a=n.mapEnd.y-t,o=n.mapEnd.z-i;return e=n.mapEnd.x,t=n.mapEnd.y,i=n.mapEnd.z,{...n,mapDeltaX:r,mapDeltaY:a,mapDeltaZ:o,mapDeltaSpatialReference:n.mapStart.spatialReference}}}function b(){let e=0,t=0;return i=>{"start"===i.action&&(e=i.screenStart.x,t=i.screenStart.y);const n=i.screenEnd.x-e,r=i.screenEnd.y-t;return e=i.screenEnd.x,t=i.screenEnd.y,{...i,screenDeltaX:n,screenDeltaY:r}}}function x(e,t){let i=null,n=0,r=0;return a=>{if("start"===a.action&&(i=e.toScreen(t),i.x<0||i.x>e.width||i.y<0||i.y>e.height?i=null:(n=a.screenStart.x-i.x,r=a.screenStart.y-i.y)),null==i)return null;const l=Object(o["c"])(a.screenEnd.x-n,0,e.width),c=Object(o["c"])(a.screenEnd.y-r,0,e.height),u=Object(s["e"])(l,c);return a.screenStart=i,a.screenEnd=u,a}}class w{constructor(){this.execute=()=>{}}next(e,t=new w){return Object(r["k"])(e)&&(this.execute=i=>{const n=e(i);Object(r["k"])(n)&&t.execute(n)}),t}}},c2be:function(e,t,i){var n=i("2306"),r=n.extendShape,a=r({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(e,t){var i=t.cx,n=t.cy,r=Math.max(t.r0||0,0),a=Math.max(t.r,0),o=.5*(a-r),s=r+o,l=t.startAngle,c=t.endAngle,u=t.clockwise,h=Math.cos(l),d=Math.sin(l),p=Math.cos(c),f=Math.sin(c),m=u?c-l<2*Math.PI:l-c<2*Math.PI;m&&(e.moveTo(h*r+i,d*r+n),e.arc(h*s+i,d*s+n,o,-Math.PI+l,l,!u)),e.arc(i,n,a,l,c,!u),e.moveTo(p*a+i,f*a+n),e.arc(p*s+i,f*s+n,o,c-2*Math.PI,c-Math.PI,!u),0!==r&&(e.arc(i,n,r,c,l,u),e.moveTo(h*r+i,f*r+n)),e.closePath()}});e.exports=a},c4a3:function(e,t){function i(e,t){this.getAllNames=function(){var e=t();return e.mapArray(e.getName)},this.containName=function(e){var i=t();return i.indexOfName(e)>=0},this.indexOfName=function(t){var i=e();return i.indexOfName(t)},this.getItemVisual=function(t,i){var n=e();return n.getItemVisual(t,i)}}var n=i;e.exports=n},c526:function(e,t){var i={axisPointer:1,tooltip:1,brush:1};function n(e,t,n){var r=t.getComponentByElement(e.topTarget),a=r&&r.coordinateSystem;return r&&r!==n&&!i[r.mainType]&&a&&a.model!==n}t.onIrrelevantElement=n},c533:function(e,t){var i=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],n={color:i,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],i]};e.exports=n},c775:function(e,t,i){var n=i("2b17"),r=n.retrieveRawValue;function a(e,t){var i=e.mapDimension("defaultedLabel",!0),n=i.length;if(1===n)return r(e,t,i[0]);if(n){for(var a=[],o=0;o<i.length;o++){var s=r(e,t,i[o]);a.push(s)}return a.join(" ")}}t.getDefaultLabel=a},c7a2:function(e,t,i){var n=i("cbe5"),r=i("5693"),a=i("9cf9"),o=a.subPixelOptimizeRect,s={},l=n.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(e,t){var i,n,a,l;this.subPixelOptimize?(o(s,t,this.style),i=s.x,n=s.y,a=s.width,l=s.height,s.r=t.r,t=s):(i=t.x,n=t.y,a=t.width,l=t.height),t.r?r.buildPath(e,t):e.rect(i,n,a,l),e.closePath()}});e.exports=l},c9fb:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("a4ee"),r=i("59b2"),a=i("d386"),o=i("6a0e"),s=i("9ef0");let l=class extends o["a"]{constructor(){super(...arguments),this.enabled=!0}};Object(n["a"])([Object(r["b"])({type:Boolean})],l.prototype,"enabled",void 0),l=Object(n["a"])([Object(a["a"])("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],l);let c=class extends o["a"]{constructor(e){super(e),this.lineSnapper=new l,this.parallelLineSnapper=new l,this.rightAngleSnapper=new l,this.rightAngleTriangleSnapper=new l,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new s["a"]([255,127,0]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5}};Object(n["a"])([Object(r["b"])({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"lineSnapper",void 0),Object(n["a"])([Object(r["b"])({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"parallelLineSnapper",void 0),Object(n["a"])([Object(r["b"])({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"rightAngleSnapper",void 0),Object(n["a"])([Object(r["b"])({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"rightAngleTriangleSnapper",void 0),Object(n["a"])([Object(r["b"])({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],c.prototype,"shortLineThreshold",void 0),Object(n["a"])([Object(r["b"])({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],c.prototype,"distance",void 0),Object(n["a"])([Object(r["b"])({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"pointThreshold",void 0),Object(n["a"])([Object(r["b"])({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"intersectionParallelLineThreshold",void 0),Object(n["a"])([Object(r["b"])({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"parallelLineThreshold",void 0),Object(n["a"])([Object(r["b"])({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"touchSensitivityMultiplier",void 0),Object(n["a"])([Object(r["b"])({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"pointOnLineThreshold",void 0),Object(n["a"])([Object(r["b"])({type:s["a"],nonNullable:!0})],c.prototype,"orange",void 0),Object(n["a"])([Object(r["b"])({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"lineHintWidthReference",void 0),Object(n["a"])([Object(r["b"])({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"lineHintWidthTarget",void 0),Object(n["a"])([Object(r["b"])({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"lineHintFadedExtensions",void 0),Object(n["a"])([Object(r["b"])({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"parallelLineHintWidth",void 0),Object(n["a"])([Object(r["b"])({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],c.prototype,"parallelLineHintLength",void 0),Object(n["a"])([Object(r["b"])({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],c.prototype,"parallelLineHintOffset",void 0),Object(n["a"])([Object(r["b"])({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],c.prototype,"rightAngleHintSize",void 0),Object(n["a"])([Object(r["b"])({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],c.prototype,"rightAngleHintOutlineSize",void 0),c=Object(n["a"])([Object(a["a"])("esri.views.interactive.snapping.Settings.Defaults")],c);const u=new c},ca981:function(e,t,i){var n=i("6d8b"),r=i("e0d3"),a=i("6cb7"),o=n.each,s=n.clone,l=n.map,c=n.merge,u=/^(min|max)?(.+)$/;function h(e){this._api=e,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}function d(e,t,i){var r,a,s=[],l=[],c=e.timeline;if(e.baseOption&&(a=e.baseOption),(c||e.options)&&(a=a||{},s=(e.options||[]).slice()),e.media){a=a||{};var u=e.media;o(u,(function(e){e&&e.option&&(e.query?l.push(e):r||(r=e))}))}return a||(a=e),a.timeline||(a.timeline=c),o([a].concat(s).concat(n.map(l,(function(e){return e.option}))),(function(e){o(t,(function(t){t(e,i)}))})),{baseOption:a,timelineOptions:s,mediaDefault:r,mediaList:l}}function p(e,t,i){var r={width:t,height:i,aspectratio:t/i},a=!0;return n.each(e,(function(e,t){var i=t.match(u);if(i&&i[1]&&i[2]){var n=i[1],o=i[2].toLowerCase();f(r[o],e,n)||(a=!1)}})),a}function f(e,t,i){return"min"===i?e>=t:"max"===i?e<=t:e===t}function m(e,t){return e.join(",")===t.join(",")}function g(e,t){t=t||{},o(t,(function(t,i){if(null!=t){var n=e[i];if(a.hasClass(i)){t=r.normalizeToArray(t),n=r.normalizeToArray(n);var o=r.mappingToExists(n,t);e[i]=l(o,(function(e){return e.option&&e.exist?c(e.exist,e.option,!0):e.exist||e.option}))}else e[i]=c(n,t,!0)}}))}h.prototype={constructor:h,setOption:function(e,t){e&&n.each(r.normalizeToArray(e.series),(function(e){e&&e.data&&n.isTypedArray(e.data)&&n.setAsPrimitive(e.data)})),e=s(e);var i=this._optionBackup,a=d.call(this,e,t,!i);this._newBaseOption=a.baseOption,i?(g(i.baseOption,a.baseOption),a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},mountOption:function(e){var t=this._optionBackup;return this._timelineOptions=l(t.timelineOptions,s),this._mediaList=l(t.mediaList,s),this._mediaDefault=s(t.mediaDefault),this._currentMediaIndices=[],s(e?t.baseOption:this._newBaseOption)},getTimelineOption:function(e){var t,i=this._timelineOptions;if(i.length){var n=e.getComponent("timeline");n&&(t=s(i[n.getCurrentIndex()],!0))}return t},getMediaOption:function(e){var t=this._api.getWidth(),i=this._api.getHeight(),n=this._mediaList,r=this._mediaDefault,a=[],o=[];if(!n.length&&!r)return o;for(var c=0,u=n.length;c<u;c++)p(n[c].query,t,i)&&a.push(c);return!a.length&&r&&(a=[-1]),a.length&&!m(a,this._currentMediaIndices)&&(o=l(a,(function(e){return s(-1===e?r.option:n[e].option)}))),this._currentMediaIndices=a,o}};var v=h;e.exports=v},caf7:function(e,t,i){"use strict";var n,r=i("0b2d"),a=i("e431"),o=i("47f8"),s=i("d0ac");!function(e){function t(e,t){const i=e[t],n=e[t+1],r=e[t+2];return Math.sqrt(i*i+n*n+r*r)}function i(e,t){const i=e[t],n=e[t+1],r=e[t+2],a=1/Math.sqrt(i*i+n*n+r*r);e[t]*=a,e[t+1]*=a,e[t+2]*=a}function n(e,t,i){e[t]*=i,e[t+1]*=i,e[t+2]*=i}function r(e,t,i,n,r,a=t){(r=r||e)[a]=e[t]+i[n],r[a+1]=e[t+1]+i[n+1],r[a+2]=e[t+2]+i[n+2]}function a(e,t,i,n,r,a=t){(r=r||e)[a]=e[t]-i[n],r[a+1]=e[t+1]-i[n+1],r[a+2]=e[t+2]-i[n+2]}e.length=t,e.normalize=i,e.scale=n,e.add=r,e.subtract=a}(n||(n={}));var l=i("1153"),c=i("1038"),u=i("0278");const h=n;var d,p,f,m;!function(e){const t=.5,i=[[-t,-t,t],[t,-t,t],[t,t,t],[-t,t,t],[-t,-t,-t],[t,-t,-t],[t,t,-t],[-t,t,-t]],n=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],r=[0,0,1,0,1,1,0,1],a=new Uint16Array([0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5]),o=new Uint16Array(36);for(let c=0;c<6;c++)for(let e=0;e<6;e++)o[6*c+e]=c;const s=new Uint16Array(36);for(let c=0;c<6;c++)s[6*c+0]=0,s[6*c+1]=1,s[6*c+2]=2,s[6*c+3]=2,s[6*c+4]=3,s[6*c+5]=0;function l(e){Array.isArray(e)||(e=[e,e,e]);const t=new Array(24);for(let n=0;n<8;n++)t[3*n]=i[n][0]*e[0],t[3*n+1]=i[n][1]*e[1],t[3*n+2]=i[n][2]*e[2];return new u["a"]([["position",{size:3,data:t,exclusive:!0}],["normal",{size:3,data:n}],["uv0",{size:2,data:r}]],[["position",a],["normal",o],["uv0",s]])}e.createGeometry=l}(d||(d={})),function(e){const t=.5,i=[[-t,0,-t],[t,0,-t],[t,0,t],[-t,0,t],[0,-t,0],[0,t,0]],n=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],r=new Uint16Array([5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0]),a=new Uint16Array([0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7]);function o(e){Array.isArray(e)||(e=[e,e,e]);const t=new Array(18);for(let n=0;n<6;n++)t[3*n]=i[n][0]*e[0],t[3*n+1]=i[n][1]*e[1],t[3*n+2]=i[n][2]*e[2];return new u["a"]([["position",{size:3,data:t,exclusive:!0}],["normal",{size:3,data:n}]],[["position",r],["normal",a]])}e.createGeometry=o}(p||(p={})),function(e){const t=.5,i=0,n=Object(o["c"])(-t,i,-t),r=Object(o["c"])(t,i,-t),s=Object(o["c"])(0,i,t),l=Object(o["c"])(0,i+t,0),c=Object(o["b"])(),h=Object(o["b"])(),d=Object(o["b"])(),p=Object(o["b"])(),f=Object(o["b"])();Object(a["i"])(c,n,l),Object(a["i"])(h,n,r),Object(a["f"])(d,c,h),Object(a["q"])(d,d),Object(a["i"])(c,r,l),Object(a["i"])(h,r,s),Object(a["f"])(p,c,h),Object(a["q"])(p,p),Object(a["i"])(c,s,l),Object(a["i"])(h,s,n),Object(a["f"])(f,c,h),Object(a["q"])(f,f);const m=[n,r,s,l],g=[0,-1,0,d[0],d[1],d[2],p[0],p[1],p[2],f[0],f[1],f[2]],v=[0,1,2,3,1,0,3,2,1,3,0,2],y=[0,0,0,1,1,1,2,2,2,3,3,3];function _(e){Array.isArray(e)||(e=[e,e,e]);const t=new Array(12);for(let i=0;i<4;i++)t[3*i]=m[i][0]*e[0],t[3*i+1]=m[i][1]*e[1],t[3*i+2]=m[i][2]*e[2];return new u["a"]([["position",{size:3,data:t,exclusive:!0}],["normal",{size:3,data:g}]],[["position",new Uint16Array(v)],["normal",new Uint16Array(y)]])}e.createGeometry=_}(f||(f={})),function(e){function t(e,t,i,n={uv:!0}){const r=-Math.PI,a=2*Math.PI,o=-Math.PI/2,s=Math.PI,l=Math.max(3,Math.floor(t)),c=Math.max(2,Math.floor(i)),h=(l+1)*(c+1),d=new Float32Array(3*h),p=new Float32Array(3*h),f=new Float32Array(2*h),m=[];let g=0;for(let u=0;u<=c;u++){const t=[],i=u/c,n=o+i*s,h=Math.cos(n);for(let o=0;o<=l;o++){const s=o/l,c=r+s*a,u=Math.cos(c)*h,m=Math.sin(n),v=-Math.sin(c)*h;d[3*g]=u*e,d[3*g+1]=m*e,d[3*g+2]=v*e,p[3*g]=u,p[3*g+1]=m,p[3*g+2]=v,f[2*g]=s,f[2*g+1]=i,t.push(g),++g}m.push(t)}const v=new Uint32Array(2*l*(c-1)*3);g=0;for(let u=0;u<c;u++)for(let e=0;e<l;e++){const t=m[u][e],i=m[u][e+1],n=m[u+1][e+1],r=m[u+1][e];0===u?(v[g++]=t,v[g++]=n,v[g++]=r):u===c-1?(v[g++]=t,v[g++]=i,v[g++]=n):(v[g++]=t,v[g++]=i,v[g++]=n,v[g++]=n,v[g++]=r,v[g++]=t)}const y=[["position",v],["normal",v]],_=[["position",{size:3,data:d,exclusive:!0}],["normal",{size:3,data:p,exclusive:!0}]];return n.uv&&(_.push(["uv0",{size:2,data:f,exclusive:!0}]),y.push(["uv0",v])),n.offset&&(y[0][0]="offset",_[0][0]="offset",y.push(["position",new Uint32Array(v.length)]),_.push(["position",{size:3,data:Float64Array.from(n.offset),exclusive:!0}])),new u["a"](_,y)}function i(e,t,i){const n=e;let r,a;if(i)r=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],a=new Uint32Array([0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1]);else{const e=n*(1+Math.sqrt(5))/2;r=[-n,e,0,n,e,0,-n,-e,0,n,-e,0,0,-n,e,0,n,e,0,-n,-e,0,n,-e,e,0,-n,e,0,n,-e,0,-n,-e,0,n],a=new Uint32Array([0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1])}for(let u=0;u<r.length;u+=3)h.scale(r,u,e/h.length(r,u));let o={};function s(t,i){t>i&&([t,i]=[i,t]);const n=t.toString()+"."+i.toString();if(o[n])return o[n];let a=r.length;return r.length+=3,h.add(r,3*t,r,3*i,r,a),h.scale(r,a,e/h.length(r,a)),a/=3,o[n]=a,a}for(let u=0;u<t;u++){const e=a.length,t=new Uint32Array(4*e);for(let i=0;i<e;i+=3){const e=a[i],n=a[i+1],r=a[i+2],o=s(e,n),l=s(n,r),c=s(r,e),u=4*i;t[u]=e,t[u+1]=o,t[u+2]=c,t[u+3]=n,t[u+4]=l,t[u+5]=o,t[u+6]=r,t[u+7]=c,t[u+8]=l,t[u+9]=o,t[u+10]=l,t[u+11]=c}a=t,o={}}const l=new Float32Array(r);for(let u=0;u<l.length;u+=3)h.normalize(l,u);const c=[["position",a],["normal",a]],d=[["position",{size:3,data:new Float32Array(r),exclusive:!0}],["normal",{size:3,data:l,exclusive:!0}]];return new u["a"](d,c)}function n(e,t,i,n,r,a,o){const s=t?[t[0],t[1],t[2]]:[0,0,0],l=e?[e[0],e[1],e[2]]:[0,0,1];a=a||[0,0];const c=i?[255*i[0],255*i[1],255*i[2],i.length>3?255*i[3]:255]:[255,255,255,255],h=null!=n&&2===n.length?n:[1,1],d=[["position",{size:3,data:s,exclusive:!0}],["normal",{size:3,data:l,exclusive:!0}],["uv0",{size:a.length,data:a}],["color",{size:4,data:c,exclusive:!0}],["size",{size:2,data:h}]];if(null!=r){const e=new Float32Array([r[0],r[1],r[2],r[3]]);d.push(["auxpos1",{size:4,data:e}])}if(null!=o){const e=new Float32Array([o[0],o[1],o[2],o[3]]);d.push(["auxpos2",{size:4,data:e}])}return new u["a"](d,null,1)}function m(e,t,i,n,r,a,o,s){if(null!=e){const{data:t}=s.getMutableAttribute("normal");t[0]=e[0],t[1]=e[1],t[2]=e[2]}if(null!=t){const{data:e}=s.getMutableAttribute("position");e[0]=t[0],e[1]=t[1],e[2]=t[2]}if(null!=i){const{data:e}=s.getMutableAttribute("color");e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3]}if(null!=n){const{data:e}=s.getMutableAttribute("size");e[0]=n[0],e[1]=n[1]}if(null!=r){const{data:e}=s.getMutableAttribute("auxpos1");e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3]}if(null!=a){const{data:e}=s.getMutableAttribute("uv0");e[0]=a[0],e[1]=a[1]}if(null!=o){const{data:e}=s.getMutableAttribute("auxpos2");e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3]}}function y(e,t){const i=new Float32Array(3*e.length),n=new Float32Array(t?3*e.length:3),r=new Uint32Array(e.length),a=new Uint32Array(e.length);for(let o=0;o<e.length;o++)i[3*o]=e[o][0],i[3*o+1]=e[o][1],i[3*o+2]=e[o][2],t&&(n[3*o]=t[o][0],n[3*o+1]=t[o][1],n[3*o+2]=t[o][2]),r[o]=o,a[o]=0;return t||(n[0]=0,n[1]=1,n[2]=0),new u["a"]([["position",{size:3,data:i,exclusive:!0}],["normal",{size:3,data:n,exclusive:!0}],["uv0",{size:2,data:[0,0],exclusive:!0}]],[["position",r],["normal",t?r:a],["uv0",a]],1)}function _(){const e=[0,0,0,0,0,100,100,0,0],t=new Uint16Array([0,1,2]),i=[0,1,0],n=new Uint16Array([0,0,0]),r=[0,0],a=new Uint16Array([0,0,0]);return new u["a"]([["position",{size:3,data:e,exclusive:!0}],["normal",{size:3,data:i,exclusive:!0}],["uv0",{size:2,data:r,exclusive:!0}]],[["position",t],["normal",n],["uv0",a]])}e.createBoxGeometry=d.createGeometry,e.createDiamondGeometry=p.createGeometry,e.createTetrahedronGeometry=f.createGeometry,e.createSphereGeometry=t,e.createPolySphereGeometry=i,e.createPointGeometry=n,e.updatePointGeometry=m,e.createPointArrayGeometry=y,e.createTriangleGeometry=_;const b=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];function x(e=b){const t=new Array(12);for(let a=0;a<4;a++)for(let i=0;i<3;i++)t[3*a+i]=e[a][i];const i=new Uint32Array([0,1,2,2,3,0]),n=[0,0,1],r=new Uint32Array([0,0,0,0,0,0]);return new u["a"]([["position",{size:3,data:t,exclusive:!0}],["normal",{size:3,data:n,exclusive:!0}],["uv0",{size:2,data:[0,0,1,0,1,1,0,1],exclusive:!0}],["color",{size:4,data:[255,255,255,255],exclusive:!0}]],[["position",i],["normal",r],["uv0",i],["color",r]])}function w(e,t,i,n,r=!0,a=!0){let s=0;const l=t,c=e;let h=Object(o["c"])(0,s,0),d=Object(o["c"])(0,s+c,0),p=Object(o["c"])(0,-1,0),f=Object(o["c"])(0,1,0);n&&(s=c,d=Object(o["c"])(0,0,0),h=Object(o["c"])(0,s,0),p=Object(o["c"])(0,1,0),f=Object(o["c"])(0,-1,0));const m=[d,h],g=[p,f],v=i+2,y=Math.sqrt(c*c+l*l);if(n)for(let u=i-1;u>=0;u--){const e=u*(2*Math.PI/i),t=Object(o["c"])(Math.cos(e)*l,s,Math.sin(e)*l);m.push(t);const n=Object(o["c"])(c*Math.cos(e)/y,-l/y,c*Math.sin(e)/y);g.push(n)}else for(let u=0;u<i;u++){const e=u*(2*Math.PI/i),t=Object(o["c"])(Math.cos(e)*l,s,Math.sin(e)*l);m.push(t);const n=Object(o["c"])(c*Math.cos(e)/y,l/y,c*Math.sin(e)/y);g.push(n)}const _=new Uint32Array(2*(i+2)*3),b=new Uint32Array(2*(i+2)*3);let x=0,w=0;if(r){for(let e=3;e<m.length;e++)_[x++]=1,_[x++]=e-1,_[x++]=e,b[w++]=0,b[w++]=0,b[w++]=0;_[x++]=m.length-1,_[x++]=2,_[x++]=1,b[w++]=0,b[w++]=0,b[w++]=0}if(a){for(let e=3;e<m.length;e++)_[x++]=e,_[x++]=e-1,_[x++]=0,b[w++]=e,b[w++]=e-1,b[w++]=1;_[x++]=0,_[x++]=2,_[x++]=m.length-1,b[w++]=1,b[w++]=2,b[w++]=g.length-1}const T=new Float32Array(3*v);for(let o=0;o<v;o++)T[3*o]=m[o][0],T[3*o+1]=m[o][1],T[3*o+2]=m[o][2];const S=new Float32Array(3*v);for(let o=0;o<v;o++)S[3*o]=g[o][0],S[3*o+1]=g[o][1],S[3*o+2]=g[o][2];return new u["a"]([["position",{size:3,data:T,exclusive:!0}],["normal",{size:3,data:S,exclusive:!0}]],[["position",_],["normal",b]])}function T(e,t,i,n,r,s){const l=n?Object(o["a"])(n):Object(o["c"])(1,0,0),c=r?Object(o["a"])(r):Object(o["c"])(0,0,0);s=null==s||s;const h=Object(o["b"])();Object(a["q"])(h,l);const d=Object(o["b"])();Object(a["d"])(d,h,Math.abs(e));const p=Object(o["b"])();Object(a["d"])(p,d,-.5),Object(a["e"])(p,p,c);const f=Object(o["c"])(0,1,0);Math.abs(1-Object(a["g"])(h,f))<.2&&Object(a["v"])(f,0,0,1);const m=Object(o["b"])();Object(a["f"])(m,h,f),Object(a["q"])(m,m),Object(a["f"])(f,m,h);const g=2*i+(s?2:0),v=i+(s?2:0),y=new Float32Array(3*g),_=new Float32Array(3*v),b=new Float32Array(2*g),x=new Uint32Array(3*i*(s?4:2)),w=new Uint32Array(3*i*(s?4:2));s&&(y[3*(g-2)+0]=p[0],y[3*(g-2)+1]=p[1],y[3*(g-2)+2]=p[2],b[2*(g-2)]=0,b[2*(g-2)+1]=0,y[3*(g-1)+0]=y[3*(g-2)+0]+d[0],y[3*(g-1)+1]=y[3*(g-2)+1]+d[1],y[3*(g-1)+2]=y[3*(g-2)+2]+d[2],b[2*(g-1)]=1,b[2*(g-1)+1]=1,_[3*(v-2)+0]=-h[0],_[3*(v-2)+1]=-h[1],_[3*(v-2)+2]=-h[2],_[3*(v-1)+0]=h[0],_[3*(v-1)+1]=h[1],_[3*(v-1)+2]=h[2]);const T=function(e,t,i){x[e]=t,w[e]=i};let S=0;const O=Object(o["b"])(),C=Object(o["b"])();for(let o=0;o<i;o++){const e=o*(2*Math.PI/i);Object(a["d"])(O,f,Math.sin(e)),Object(a["d"])(C,m,Math.cos(e)),Object(a["e"])(O,O,C),_[3*o+0]=O[0],_[3*o+1]=O[1],_[3*o+2]=O[2],Object(a["d"])(O,O,t),Object(a["e"])(O,O,p),y[3*o+0]=O[0],y[3*o+1]=O[1],y[3*o+2]=O[2],b[2*o+0]=o/i,b[2*o+1]=0,y[3*(o+i)+0]=y[3*o+0]+d[0],y[3*(o+i)+1]=y[3*o+1]+d[1],y[3*(o+i)+2]=y[3*o+2]+d[2],b[2*(o+i)+0]=o/i,b[2*o+1]=1;const n=(o+1)%i;T(S++,o,o),T(S++,o+i,o),T(S++,n,n),T(S++,n,n),T(S++,o+i,o),T(S++,n+i,n)}if(s){for(let e=0;e<i;e++){const t=(e+1)%i;T(S++,g-2,v-2),T(S++,e,v-2),T(S++,t,v-2)}for(let e=0;e<i;e++){const t=(e+1)%i;T(S++,e+i,v-1),T(S++,g-1,v-1),T(S++,t+i,v-1)}}return new u["a"]([["position",{size:3,data:y,exclusive:!0}],["normal",{size:3,data:_,exclusive:!0}],["uv0",{size:2,data:b,exclusive:!0}]],[["position",x],["normal",w],["uv0",x]])}function S(t,i,n,r,a){n=n||10,r=null==r||r,Object(l["a"])(t.length>1);const o=[[0,0,0]],s=[],c=[];for(let e=0;e<n;e++){s.push([0,-e-1,-(e+1)%n-1]);const t=e/n*2*Math.PI;c.push([Math.cos(t)*i,Math.sin(t)*i])}return e.createPathExtrusionGeometry(c,t,o,s,r,a)}function O(e,t,i,n,l,c=Object(o["c"])(0,0,0)){const h=e.length,d=new Float32Array(t.length*h*3+(6*i.length||0)),p=new Float32Array(t.length*h*3+(i?6:0)),f=(t.length-1)*h*6+3*n.length*2,m=new Uint32Array(f),v=new Uint32Array(f);let y=0,_=0,b=0,x=0;const w=Object(o["b"])(),T=Object(o["b"])(),S=Object(o["b"])(),O=Object(o["b"])(),C=Object(o["b"])(),k=Object(o["b"])(),P=Object(o["b"])(),E=Object(r["e"])(),A=Object(o["b"])(),M=Object(o["b"])(),D=Object(o["b"])(),j=Object(o["b"])(),L=Object(o["b"])(),R=s["e"].create();Object(a["v"])(A,0,1,0),Object(a["i"])(T,t[1],t[0]),Object(a["q"])(T,T),l?(Object(a["e"])(E,t[0],c),Object(a["q"])(S,E)):Object(a["v"])(S,0,0,1),I(T,S,A,A,C,S,g),Object(a["j"])(O,S),Object(a["j"])(j,C);for(let r=0;r<i.length;r++)Object(a["d"])(k,C,i[r][0]),Object(a["d"])(E,S,i[r][2]),Object(a["e"])(k,k,E),Object(a["e"])(k,k,t[0]),d[y++]=k[0],d[y++]=k[1],d[y++]=k[2];p[_++]=-T[0],p[_++]=-T[1],p[_++]=-T[2];for(let r=0;r<n.length;r++)m[b++]=n[r][0]>0?n[r][0]:-n[r][0]-1+i.length,m[b++]=n[r][1]>0?n[r][1]:-n[r][1]-1+i.length,m[b++]=n[r][2]>0?n[r][2]:-n[r][2]-1+i.length,v[x++]=0,v[x++]=0,v[x++]=0;let N=i.length;const z=i.length-1;for(let r=0;r<t.length;r++){let i=!1;r>0&&(Object(a["j"])(w,T),r<t.length-1?(Object(a["i"])(T,t[r+1],t[r]),Object(a["q"])(T,T)):i=!0,Object(a["e"])(M,w,T),Object(a["q"])(M,M),Object(a["e"])(D,t[r-1],O),s["e"].fromPositionAndNormal(t[r],M,R),s["e"].intersectRay(R,s["f"].wrap(D,w),E)?(Object(a["i"])(E,E,t[r]),Object(a["q"])(S,E),Object(a["f"])(C,M,S),Object(a["q"])(C,C)):I(M,O,j,A,C,S,g),Object(a["j"])(O,S),Object(a["j"])(j,C)),l&&(Object(a["e"])(E,t[r],c),Object(a["q"])(L,E));for(let n=0;n<h;n++)if(Object(a["d"])(k,C,e[n][0]),Object(a["d"])(E,S,e[n][1]),Object(a["e"])(k,k,E),Object(a["q"])(P,k),p[_++]=P[0],p[_++]=P[1],p[_++]=P[2],Object(a["e"])(k,k,t[r]),d[y++]=k[0],d[y++]=k[1],d[y++]=k[2],!i){const e=(n+1)%h;m[b++]=N+n,m[b++]=N+h+n,m[b++]=N+e,m[b++]=N+e,m[b++]=N+h+n,m[b++]=N+h+e;for(let t=0;t<6;t++)v[x++]=m[b-6+t]-z}N+=h}const B=t[t.length-1];for(let r=0;r<i.length;r++)Object(a["d"])(k,C,i[r][0]),Object(a["d"])(E,S,i[r][1]),Object(a["e"])(k,k,E),Object(a["e"])(k,k,B),d[y++]=k[0],d[y++]=k[1],d[y++]=k[2];const V=_/3;p[_++]=T[0],p[_++]=T[1],p[_++]=T[2];const F=N-h;for(let r=0;r<n.length;r++)m[b++]=n[r][0]>=0?N+n[r][0]:-n[r][0]-1+F,m[b++]=n[r][2]>=0?N+n[r][2]:-n[r][2]-1+F,m[b++]=n[r][1]>=0?N+n[r][1]:-n[r][1]-1+F,v[x++]=V,v[x++]=V,v[x++]=V;return new u["a"]([["position",{size:3,data:d,exclusive:!0}],["normal",{size:3,data:p,exclusive:!0}]],[["position",m],["normal",v]])}function C(e,t,i){Object(l["a"])(e.length>1,"createPolylineGeometry(): polyline needs at least 2 points"),Object(l["a"])(3===e[0].length,"createPolylineGeometry(): malformed vertex"),Object(l["a"])(null==t||t.length===e.length,"createPolylineGeometry: need same number of points and normals"),Object(l["a"])(null==t||3===t[0].length,"createPolylineGeometry(): malformed normal");const n=new Float64Array(3*e.length),r=new Uint32Array(2*(e.length-1));let a=0,o=0;for(let l=0;l<e.length;l++){for(let t=0;t<3;t++)n[a++]=e[l][t];l>0&&(r[o++]=l-1,r[o++]=l)}const s=[],h=[];if(s.push(["position",r]),h.push(["position",{size:3,data:n,exclusive:!0}]),t){const i=new Float32Array(3*t.length);let n=0;for(let r=0;r<e.length;r++)for(let e=0;e<3;e++)i[n++]=t[r][e];s.push(["normal",r]),h.push(["normal",{size:3,data:i,exclusive:!0}])}return i&&(h.push(["color",{size:4,data:i}]),s.push(["color",Object(c["d"])(i.length/4)])),new u["a"](h,s,2)}function k(e,t,i,n){const r=new Array(18),a=[[-t,0,n/2],[i,0,n/2],[0,e,n/2],[-t,0,-n/2],[i,0,-n/2],[0,e,-n/2]],o=new Uint16Array([0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5]);for(let s=0;s<6;s++)r[3*s]=a[s][0],r[3*s+1]=a[s][1],r[3*s+2]=a[s][2];return new u["a"]([["position",{size:3,data:r,exclusive:!0}]],[["position",o]])}function P(e,t){const i=e.getMutableAttribute("position").data;for(let n=0;n<i.length;n+=3){const e=i[n],r=i[n+1],o=i[n+2];Object(a["v"])(v,e,r,o),Object(a["l"])(v,v,t),i[n]=v[0],i[n+1]=v[1],i[n+2]=v[2]}}function E(e,t=e){const i=e.vertexAttributes,n=i.get("position").data,r=i.get("normal").data;if(r){const e=t.getMutableAttribute("normal").data;for(let t=0;t<r.length;t+=3){const i=r[t+1];e[t+1]=-r[t+2],e[t+2]=i}}if(n){const e=t.getMutableAttribute("position").data;for(let t=0;t<n.length;t+=3){const i=n[t+1];e[t+1]=-n[t+2],e[t+2]=i}}return t}function A(e,t,i,n,r){return!(Math.abs(Object(a["g"])(t,e))>r)&&(Object(a["f"])(i,e,t),Object(a["q"])(i,i),Object(a["f"])(n,i,e),Object(a["q"])(n,n),!0)}function I(e,t,i,n,r,a,o){return A(e,t,r,a,o)||A(e,i,r,a,o)||A(e,n,r,a,o)}e.createSquareGeometry=x,e.createConeGeometry=w,e.createCylinderGeometry=T,e.createTubeGeometry=S,e.createPathExtrusionGeometry=O,e.createPolylineGeometry=C,e.createExtrudedTriangle=k,e.transformInPlace=P,e.cgToGIS=E,e.makeOrthoBasisDirUp=A,e.makeOrthoBasisDirUpFallback=I}(m||(m={}));const g=.99619469809,v=Object(o["b"])();var y=m;t["a"]=y},cb11:function(e,t,i){var n=i("cbe5"),r=i("9cf9"),a=r.subPixelOptimizeLine,o={},s=n.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var i,n,r,s;this.subPixelOptimize?(a(o,t,this.style),i=o.x1,n=o.y1,r=o.x2,s=o.y2):(i=t.x1,n=t.y1,r=t.x2,s=t.y2);var l=t.percent;0!==l&&(e.moveTo(i,n),l<1&&(r=i*(1-l)+r*l,s=n*(1-l)+s*l),e.lineTo(r,s))},pointAt:function(e){var t=this.shape;return[t.x1*(1-e)+t.x2*e,t.y1*(1-e)+t.y2*e]}});e.exports=s},cb6d:function(e,t){function i(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function n(e,t){return{target:e,topTarget:t&&t.topTarget}}i.prototype={constructor:i,_dragStart:function(e){var t=e.target;while(t&&!t.draggable)t=t.parent;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.dispatchToElement(n(t,e),"dragstart",e.event))},_drag:function(e){var t=this._draggingTarget;if(t){var i=e.offsetX,r=e.offsetY,a=i-this._x,o=r-this._y;this._x=i,this._y=r,t.drift(a,o,e),this.dispatchToElement(n(t,e),"drag",e.event);var s=this.findHover(i,r,t).target,l=this._dropTarget;this._dropTarget=s,t!==s&&(l&&s!==l&&this.dispatchToElement(n(l,e),"dragleave",e.event),s&&s!==l&&this.dispatchToElement(n(s,e),"dragenter",e.event))}},_dragEnd:function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.dispatchToElement(n(t,e),"dragend",e.event),this._dropTarget&&this.dispatchToElement(n(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null}};var r=i;e.exports=r},cb8f:function(e,t,i){var n=i("3eba"),r=i("6d8b"),a=i("cd33"),o=i("eb6b");i("48ac"),i("d4b1"),i("4a9d"),n.registerPreprocessor((function(e){if(e){(!e.axisPointer||0===e.axisPointer.length)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!r.isArray(t)&&(e.axisPointer.link=[t])}})),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,(function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=a.collect(e,t)})),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},o)},cbe5:function(e,t,i){var n=i("19eb"),r=i("6d8b"),a=i("20c8"),o=i("d833"),s=i("dc2f"),l=s.prototype.getCanvasPattern,c=Math.abs,u=new a(!0);function h(e){n.call(this,e),this.path=null}h.prototype={constructor:h,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(e,t){var i,n=this.style,r=this.path||u,a=n.hasStroke(),o=n.hasFill(),s=n.fill,c=n.stroke,h=o&&!!s.colorStops,d=a&&!!c.colorStops,p=o&&!!s.image,f=a&&!!c.image;(n.bind(e,this,t),this.setTransform(e),this.__dirty)&&(h&&(i=i||this.getBoundingRect(),this._fillGradient=n.getGradient(e,s,i)),d&&(i=i||this.getBoundingRect(),this._strokeGradient=n.getGradient(e,c,i)));h?e.fillStyle=this._fillGradient:p&&(e.fillStyle=l.call(s,e)),d?e.strokeStyle=this._strokeGradient:f&&(e.strokeStyle=l.call(c,e));var m=n.lineDash,g=n.lineDashOffset,v=!!e.setLineDash,y=this.getGlobalScale();if(r.setScale(y[0],y[1],this.segmentIgnoreThreshold),this.__dirtyPath||m&&!v&&a?(r.beginPath(e),m&&!v&&(r.setLineDash(m),r.setLineDashOffset(g)),this.buildPath(r,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(e.beginPath(),this.path.rebuildPath(e)),o)if(null!=n.fillOpacity){var _=e.globalAlpha;e.globalAlpha=n.fillOpacity*n.opacity,r.fill(e),e.globalAlpha=_}else r.fill(e);if(m&&v&&(e.setLineDash(m),e.lineDashOffset=g),a)if(null!=n.strokeOpacity){_=e.globalAlpha;e.globalAlpha=n.strokeOpacity*n.opacity,r.stroke(e),e.globalAlpha=_}else r.stroke(e);m&&v&&e.setLineDash([]),null!=n.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))},buildPath:function(e,t,i){},createPathProxy:function(){this.path=new a},getBoundingRect:function(){var e=this._rect,t=this.style,i=!e;if(i){var n=this.path;n||(n=this.path=new a),this.__dirtyPath&&(n.beginPath(),this.buildPath(n,this.shape,!1)),e=n.getBoundingRect()}if(this._rect=e,t.hasStroke()){var r=this._rectWithStroke||(this._rectWithStroke=e.clone());if(this.__dirty||i){r.copy(e);var o=t.lineWidth,s=t.strokeNoScale?this.getLineScale():1;t.hasFill()||(o=Math.max(o,this.strokeContainThreshold||4)),s>1e-10&&(r.width+=o/s,r.height+=o/s,r.x-=o/s/2,r.y-=o/s/2)}return r}return e},contain:function(e,t){var i=this.transformCoordToLocal(e,t),n=this.getBoundingRect(),r=this.style;if(e=i[0],t=i[1],n.contain(e,t)){var a=this.path.data;if(r.hasStroke()){var s=r.lineWidth,l=r.strokeNoScale?this.getLineScale():1;if(l>1e-10&&(r.hasFill()||(s=Math.max(s,this.strokeContainThreshold)),o.containStroke(a,s/l,e,t)))return!0}if(r.hasFill())return o.contain(a,e,t)}return!1},dirty:function(e){null==e&&(e=!0),e&&(this.__dirtyPath=e,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(e){return this.animate("shape",e)},attrKV:function(e,t){"shape"===e?(this.setShape(t),this.__dirtyPath=!0,this._rect=null):n.prototype.attrKV.call(this,e,t)},setShape:function(e,t){var i=this.shape;if(i){if(r.isObject(e))for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);else i[e]=t;this.dirty(!0)}return this},getLineScale:function(){var e=this.transform;return e&&c(e[0]-1)>1e-10&&c(e[3]-1)>1e-10?Math.sqrt(c(e[0]*e[3]-e[2]*e[1])):1}},h.extend=function(e){var t=function(t){h.call(this,t),e.style&&this.style.extendFrom(e.style,!1);var i=e.shape;if(i){this.shape=this.shape||{};var n=this.shape;for(var r in i)!n.hasOwnProperty(r)&&i.hasOwnProperty(r)&&(n[r]=i[r])}e.init&&e.init.call(this,t)};for(var i in r.inherits(t,h),e)"style"!==i&&"shape"!==i&&(t.prototype[i]=e[i]);return t},r.inherits(h,n);var d=h;e.exports=d},cbe9:function(e,t,i){var n=i("6d8b"),r=i("9850"),a=i("cf7e");function o(e){a.call(this,e)}o.prototype={constructor:o,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(e){var t=this.getAxis("x"),i=this.getAxis("y");return t.contain(t.toLocalCoord(e[0]))&&i.contain(i.toLocalCoord(e[1]))},containData:function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},dataToPoint:function(e,t,i){var n=this.getAxis("x"),r=this.getAxis("y");return i=i||[],i[0]=n.toGlobalCoord(n.dataToCoord(e[0])),i[1]=r.toGlobalCoord(r.dataToCoord(e[1])),i},clampData:function(e,t){var i=this.getAxis("x").scale,n=this.getAxis("y").scale,r=i.getExtent(),a=n.getExtent(),o=i.parse(e[0]),s=n.parse(e[1]);return t=t||[],t[0]=Math.min(Math.max(Math.min(r[0],r[1]),o),Math.max(r[0],r[1])),t[1]=Math.min(Math.max(Math.min(a[0],a[1]),s),Math.max(a[0],a[1])),t},pointToData:function(e,t){var i=this.getAxis("x"),n=this.getAxis("y");return t=t||[],t[0]=i.coordToData(i.toLocalCoord(e[0])),t[1]=n.coordToData(n.toLocalCoord(e[1])),t},getOtherAxis:function(e){return this.getAxis("x"===e.dim?"y":"x")},getArea:function(){var e=this.getAxis("x").getGlobalExtent(),t=this.getAxis("y").getGlobalExtent(),i=Math.min(e[0],e[1]),n=Math.min(t[0],t[1]),a=Math.max(e[0],e[1])-i,o=Math.max(t[0],t[1])-n,s=new r(i,n,a,o);return s}},n.inherits(o,a);var s=o;e.exports=s},cc39:function(e,t,i){var n=i("6d8b"),r=i("3842"),a=i("50e5"),o=i("ef6a"),s=n.each,l=r.asc,c=function(e,t,i,n){this._dimName=e,this._axisIndex=t,this._valueWindow,this._percentWindow,this._dataExtent,this._minMaxSpan,this.ecModel=n,this._dataZoomModel=i};function u(e,t,i){var n=[1/0,-1/0];return s(i,(function(e){var i=e.getData();i&&s(i.mapDimension(t,!0),(function(e){var t=i.getApproximateExtent(e);t[0]<n[0]&&(n[0]=t[0]),t[1]>n[1]&&(n[1]=t[1])}))})),n[1]<n[0]&&(n=[NaN,NaN]),h(e,n),n}function h(e,t){var i=e.getAxisModel(),n=i.getMin(!0),r="category"===i.get("type"),a=r&&i.getCategories().length;null!=n&&"dataMin"!==n&&"function"!==typeof n?t[0]=n:r&&(t[0]=a>0?0:NaN);var o=i.getMax(!0);return null!=o&&"dataMax"!==o&&"function"!==typeof o?t[1]=o:r&&(t[1]=a>0?a-1:NaN),i.get("scale",!0)||(t[0]>0&&(t[0]=0),t[1]<0&&(t[1]=0)),t}function d(e,t){var i=e.getAxisModel(),n=e._percentWindow,a=e._valueWindow;if(n){var o=r.getPixelPrecision(a,[0,500]);o=Math.min(o,20);var s=t||0===n[0]&&100===n[1];i.setRange(s?null:+a[0].toFixed(o),s?null:+a[1].toFixed(o))}}function p(e){var t=e._minMaxSpan={},i=e._dataZoomModel,n=e._dataExtent;s(["min","max"],(function(a){var o=i.get(a+"Span"),s=i.get(a+"ValueSpan");null!=s&&(s=e.getAxisModel().axis.scale.parse(s)),null!=s?o=r.linearMap(n[0]+s,n,[0,100],!0):null!=o&&(s=r.linearMap(o,[0,100],n,!0)-n[0]),t[a+"Span"]=o,t[a+"ValueSpan"]=s}))}c.prototype={constructor:c,hostedBy:function(e){return this._dataZoomModel===e},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var e=[],t=this.ecModel;return t.eachSeries((function(i){if(a.isCoordSupported(i.get("coordinateSystem"))){var n=this._dimName,r=t.queryComponents({mainType:n+"Axis",index:i.get(n+"AxisIndex"),id:i.get(n+"AxisId")})[0];this._axisIndex===(r&&r.componentIndex)&&e.push(i)}}),this),e},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var e,t,i,n=this._dimName,r=this.ecModel,a=this.getAxisModel(),o="x"===n||"y"===n;return o?(t="gridIndex",e="x"===n?"y":"x"):(t="polarIndex",e="angle"===n?"radius":"angle"),r.eachComponent(e+"Axis",(function(e){(e.get(t)||0)===(a.get(t)||0)&&(i=e)})),i},getMinMaxSpan:function(){return n.clone(this._minMaxSpan)},calculateDataWindow:function(e){var t,i=this._dataExtent,n=this.getAxisModel(),a=n.axis.scale,c=this._dataZoomModel.getRangePropMode(),u=[0,100],h=[],d=[];s(["start","end"],(function(n,o){var s=e[n],l=e[n+"Value"];"percent"===c[o]?(null==s&&(s=u[o]),l=a.parse(r.linearMap(s,u,i))):(t=!0,l=null==l?i[o]:a.parse(l),s=r.linearMap(l,i,u)),d[o]=l,h[o]=s})),l(d),l(h);var p=this._minMaxSpan;function f(e,t,i,n,s){var l=s?"Span":"ValueSpan";o(0,e,i,"all",p["min"+l],p["max"+l]);for(var c=0;c<2;c++)t[c]=r.linearMap(e[c],i,n,!0),s&&(t[c]=a.parse(t[c]))}return t?f(d,h,i,u,!1):f(h,d,u,i,!0),{valueWindow:d,percentWindow:h}},reset:function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=u(this,this._dimName,t),p(this);var i=this.calculateDataWindow(e.settledOption);this._valueWindow=i.valueWindow,this._percentWindow=i.percentWindow,d(this)}},restore:function(e){e===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,d(this,!0))},filterData:function(e,t){if(e===this._dataZoomModel){var i=this._dimName,n=this.getTargetSeriesModels(),r=e.get("filterMode"),a=this._valueWindow;"none"!==r&&s(n,(function(e){var t=e.getData(),n=t.mapDimension(i,!0);n.length&&("weakFilter"===r?t.filterSelf((function(e){for(var i,r,o,s=0;s<n.length;s++){var l=t.get(n[s],e),c=!isNaN(l),u=l<a[0],h=l>a[1];if(c&&!u&&!h)return!0;c&&(o=!0),u&&(i=!0),h&&(r=!0)}return o&&i&&r})):s(n,(function(i){if("empty"===r)e.setData(t=t.map(i,(function(e){return o(e)?e:NaN})));else{var n={};n[i]=a,t.selectRange(n)}})),s(n,(function(e){t.setApproximateExtent(a,e)})))}))}function o(e){return e>=a[0]&&e<=a[1]}}};var f=c;e.exports=f},cccd:function(e,t,i){var n=i("e0d3"),r=n.makeInner;function a(){var e=r();return function(t){var i=e(t),n=t.pipelineContext,r=i.large,a=i.progressiveRender,o=i.large=n&&n.large,s=i.progressiveRender=n&&n.progressiveRender;return!!(r^o||a^s)&&"reset"}}e.exports=a},cd33:function(e,t,i){var n=i("6d8b"),r=i("4319"),a=n.each,o=n.curry;function s(e,t){var i={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return l(i,e,t),i.seriesInvolved&&u(i,e),i}function l(e,t,i){var n=t.getComponent("tooltip"),r=t.getComponent("axisPointer"),s=r.get("link",!0)||[],l=[];a(i.getCoordinateSystems(),(function(i){if(i.axisPointerEnabled){var u=v(i.model),d=e.coordSysAxesInfo[u]={};e.coordSysMap[u]=i;var p=i.model,f=p.getModel("tooltip",n);if(a(i.getAxes(),o(b,!1,null)),i.getTooltipAxes&&n&&f.get("show")){var m="axis"===f.get("trigger"),y="cross"===f.get("axisPointer.type"),_=i.getTooltipAxes(f.get("axisPointer.axis"));(m||y)&&a(_.baseAxes,o(b,!y||"cross",m)),y&&a(_.otherAxes,o(b,"cross",!1))}}function b(n,a,o){var u=o.model.getModel("axisPointer",r),p=u.get("show");if(p&&("auto"!==p||n||g(u))){null==a&&(a=u.get("triggerTooltip")),u=n?c(o,f,r,t,n,a):u;var m=u.get("snap"),y=v(o.model),_=a||m||"category"===o.type,b=e.axesInfo[y]={key:y,axis:o,coordSys:i,axisPointerModel:u,triggerTooltip:a,involveSeries:_,snap:m,useHandle:g(u),seriesModels:[]};d[y]=b,e.seriesInvolved|=_;var x=h(s,o);if(null!=x){var w=l[x]||(l[x]={axesInfo:{}});w.axesInfo[y]=b,w.mapper=s[x].mapper,b.linkGroup=w}}}}))}function c(e,t,i,o,s,l){var c=t.getModel("axisPointer"),u={};a(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],(function(e){u[e]=n.clone(c.get(e))})),u.snap="category"!==e.type&&!!l,"cross"===c.get("type")&&(u.type="line");var h=u.label||(u.label={});if(null==h.show&&(h.show=!1),"cross"===s){var d=c.get("label.show");if(h.show=null==d||d,!l){var p=u.lineStyle=c.get("crossStyle");p&&n.defaults(h,p.textStyle)}}return e.model.getModel("axisPointer",new r(u,i,o))}function u(e,t){t.eachSeries((function(t){var i=t.coordinateSystem,n=t.get("tooltip.trigger",!0),r=t.get("tooltip.show",!0);i&&"none"!==n&&!1!==n&&"item"!==n&&!1!==r&&!1!==t.get("axisPointer.show",!0)&&a(e.coordSysAxesInfo[v(i.model)],(function(e){var n=e.axis;i.getAxis(n.dim)===n&&(e.seriesModels.push(t),null==e.seriesDataCount&&(e.seriesDataCount=0),e.seriesDataCount+=t.getData().count())}))}),this)}function h(e,t){for(var i=t.model,n=t.dim,r=0;r<e.length;r++){var a=e[r]||{};if(d(a[n+"AxisId"],i.id)||d(a[n+"AxisIndex"],i.componentIndex)||d(a[n+"AxisName"],i.name))return r}}function d(e,t){return"all"===e||n.isArray(e)&&n.indexOf(e,t)>=0||e===t}function p(e){var t=f(e);if(t){var i=t.axisPointerModel,n=t.axis.scale,r=i.option,a=i.get("status"),o=i.get("value");null!=o&&(o=n.parse(o));var s=g(i);null==a&&(r.status=s?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==o||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),r.value=o,s&&(r.status=t.axis.scale.isBlank()?"hide":"show")}}function f(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[v(e)]}function m(e){var t=f(e);return t&&t.axisPointerModel}function g(e){return!!e.get("handle.show")}function v(e){return e.type+"||"+e.id}t.collect=s,t.fixValue=p,t.getAxisInfo=f,t.getAxisPointerModel=m,t.makeKey=v},cdaa:function(e,t,i){var n=i("607d"),r=n.addEventListener,a=n.removeEventListener,o=n.normalizeEvent,s=n.getNativeEvent,l=i("6d8b"),c=i("1fab"),u=i("22d1"),h=300,d=u.domSupported,p=function(){var e=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],i={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=l.map(e,(function(e){var t=e.replace("mouse","pointer");return i.hasOwnProperty(t)?t:e}));return{mouse:e,touch:t,pointer:n}}(),f={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]};function m(e){return"mousewheel"===e&&u.browser.firefox?"DOMMouseScroll":e}function g(e){var t=e.pointerType;return"pen"===t||"touch"===t}function v(e){e.touching=!0,null!=e.touchTimer&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout((function(){e.touching=!1,e.touchTimer=null}),700)}function y(e){e&&(e.zrByTouch=!0)}function _(e,t){return o(e.dom,new x(e,t),!0)}function b(e,t){var i=t,n=!1;while(i&&9!==i.nodeType&&!(n=i.domBelongToZr||i!==t&&i===e.painterRoot))i=i.parentNode;return n}function x(e,t){this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}var w=x.prototype;w.stopPropagation=w.stopImmediatePropagation=w.preventDefault=l.noop;var T={mousedown:function(e){e=o(this.dom,e),this._mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=o(this.dom,e);var t=this._mayPointerCapture;!t||e.zrX===t[0]&&e.zrY===t[1]||E(this,!0),this.trigger("mousemove",e)},mouseup:function(e){e=o(this.dom,e),E(this,!1),this.trigger("mouseup",e)},mouseout:function(e){e=o(this.dom,e),this._pointerCapturing&&(e.zrEventControl="no_globalout");var t=e.toElement||e.relatedTarget;e.zrIsToLocalDOM=b(this,t),this.trigger("mouseout",e)},touchstart:function(e){e=o(this.dom,e),y(e),this._lastTouchMoment=new Date,this.handler.processGesture(e,"start"),T.mousemove.call(this,e),T.mousedown.call(this,e)},touchmove:function(e){e=o(this.dom,e),y(e),this.handler.processGesture(e,"change"),T.mousemove.call(this,e)},touchend:function(e){e=o(this.dom,e),y(e),this.handler.processGesture(e,"end"),T.mouseup.call(this,e),+new Date-this._lastTouchMoment<h&&T.click.call(this,e)},pointerdown:function(e){T.mousedown.call(this,e)},pointermove:function(e){g(e)||T.mousemove.call(this,e)},pointerup:function(e){T.mouseup.call(this,e)},pointerout:function(e){g(e)||T.mouseout.call(this,e)}};l.each(["click","mousewheel","dblclick","contextmenu"],(function(e){T[e]=function(t){t=o(this.dom,t),this.trigger(e,t)}}));var S={pointermove:function(e){g(e)||S.mousemove.call(this,e)},pointerup:function(e){S.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this._pointerCapturing;E(this,!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function O(e,t){var i=t.domHandlers;u.pointerEventsSupported?l.each(p.pointer,(function(n){k(t,n,(function(t){i[n].call(e,t)}))})):(u.touchEventsSupported&&l.each(p.touch,(function(n){k(t,n,(function(r){i[n].call(e,r),v(t)}))})),l.each(p.mouse,(function(n){k(t,n,(function(r){r=s(r),t.touching||i[n].call(e,r)}))})))}function C(e,t){function i(i){function n(n){n=s(n),b(e,n.target)||(n=_(e,n),t.domHandlers[i].call(e,n))}k(t,i,n,{capture:!0})}u.pointerEventsSupported?l.each(f.pointer,i):u.touchEventsSupported||l.each(f.mouse,i)}function k(e,t,i,n){e.mounted[t]=i,e.listenerOpts[t]=n,r(e.domTarget,m(t),i,n)}function P(e){var t=e.mounted;for(var i in t)t.hasOwnProperty(i)&&a(e.domTarget,m(i),t[i],e.listenerOpts[i]);e.mounted={}}function E(e,t){if(e._mayPointerCapture=null,d&&e._pointerCapturing^t){e._pointerCapturing=t;var i=e._globalHandlerScope;t?C(e,i):P(i)}}function A(e,t){this.domTarget=e,this.domHandlers=t,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function I(e,t){c.call(this),this.dom=e,this.painterRoot=t,this._localHandlerScope=new A(e,T),d&&(this._globalHandlerScope=new A(document,S)),this._pointerCapturing=!1,this._mayPointerCapture=null,O(this,this._localHandlerScope)}var M=I.prototype;M.dispose=function(){P(this._localHandlerScope),d&&P(this._globalHandlerScope)},M.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},l.mixin(I,c);var D=I;e.exports=D},cdc1:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return u})),i.d(t,"c",(function(){return c})),i.d(t,"d",(function(){return o})),i.d(t,"e",(function(){return l}));var n=i("32ed"),r=i("28b1"),a=i("9180");function o(e,t,i,r){if(null==r||e.hasZ||(r=void 0),"point"===e.type)return e.x+=t,e.y+=i,e.hasZ&&null!=r&&(e.z+=r),e;if("multipoint"===e.type){const n=e.points;for(let e=0;e<n.length;e++)n[e]=h(n[e],t,i,r);return e}if("extent"===e.type)return e.xmin+=t,e.xmax+=t,e.ymin+=i,e.ymax+=i,null!=r&&(e.zmin+=r,e.zmax+=r),e;const a=Object(n["b"])(e),o="polyline"===e.type?e.paths:e.rings;for(let n=0;n<a.length;n++){const e=a[n];for(let n=0;n<e.length;n++)e[n]=h(e[n],t,i,r)}return"paths"in e?e.paths=o:e.rings=o,e}function s(e,t,i,r,a){const s=e.clone(),l=r.resolution;if("point"===s.type){if(a)o(s,t*l,-i*l);else{const e=r.state.transform,n=r.state.inverseTransform,a=e[0]*s.x+e[2]*s.y+e[4],o=e[1]*s.x+e[3]*s.y+e[5];s.x=n[0]*(a+t)+n[2]*(o+i)+n[4],s.y=n[1]*(a+t)+n[3]*(o+i)+n[5]}return s}if("multipoint"===s.type){if(a)o(s,t*l,-i*l);else{const e=s.points,n=r.state.transform,a=r.state.inverseTransform;for(let r=0;r<e.length;r++){const o=e[r],s=n[0]*o[0]+n[2]*o[1]+n[4],l=n[1]*o[0]+n[3]*o[1]+n[5],c=a[0]*(s+t)+a[2]*(l+i)+a[4],u=a[1]*(s+t)+a[3]*(l+i)+a[5];e[r]=d(o,c,u,void 0)}}return s}if("extent"===s.type){if(a)o(s,t*l,-i*l);else{const e=r.state.transform,n=r.state.inverseTransform,a=e[0]*s.xmin+e[2]*s.ymin+e[4],o=e[1]*s.xmin+e[3]*s.ymin+e[5],l=e[0]*s.xmax+e[2]*s.ymax+e[4],c=e[1]*s.xmax+e[3]*s.ymax+e[5];s.xmin=n[0]*(a+t)+n[2]*(o+i)+n[4],s.ymin=n[1]*(a+t)+n[3]*(o+i)+n[5],s.xmax=n[0]*(l+t)+n[2]*(c+i)+n[4],s.ymax=n[1]*(l+t)+n[3]*(c+i)+n[5]}return s}if(a)o(s,t*l,-i*l);else{const e=Object(n["b"])(s),a="polyline"===s.type?s.paths:s.rings,o=r.state.transform,l=r.state.inverseTransform;for(let n=0;n<e.length;n++){const r=e[n];for(let e=0;e<r.length;e++){const n=r[e],a=o[0]*n[0]+o[2]*n[1]+o[4],s=o[1]*n[0]+o[3]*n[1]+o[5],c=l[0]*(a+t)+l[2]*(s+i)+l[4],u=l[1]*(a+t)+l[3]*(s+i)+l[5];r[e]=d(n,c,u,void 0)}}"paths"in s?s.paths=a:s.rings=a}return s}function l(e,t,i,o){if("point"===e.type){const{x:n,y:r}=e,a=o?o[0]:n,s=o?o[1]:r,l=e.clone(),c=(n-a)*t+a,u=(r-s)*i+s;return l.x=c,l.y=u,l}if("multipoint"===e.type){const s=Object(n["b"])(e),l=Object(a["g"])(),[c,u,h,p]=Object(r["d"])(l,[s]),f=o?o[0]:(c+h)/2,m=o?o[1]:(p+u)/2,g=e.clone(),v=g.points;for(let e=0;e<v.length;e++){const n=v[e],[r,a]=n,o=(r-f)*t+f,s=(a-m)*i+m;v[e]=d(n,o,s,void 0)}return g}if("extent"===e.type){const{xmin:n,xmax:r,ymin:a,ymax:s}=e,l=o?o[0]:(n+r)/2,c=o?o[1]:(s+a)/2,u=e.clone();if(u.xmin=(n-l)*t+l,u.ymax=(s-c)*i+c,u.xmax=(r-l)*t+l,u.ymin=(a-c)*i+c,u.xmin>u.xmax){const e=u.xmin,t=u.xmax;u.xmin=t,u.xmax=e}if(u.ymin>u.ymax){const e=u.ymin,t=u.ymax;u.ymin=t,u.ymax=e}return u}const s=Object(n["b"])(e),l=Object(a["g"])(),[c,u,h,p]=Object(r["d"])(l,s),f=o?o[0]:(c+h)/2,m=o?o[1]:(p+u)/2,g=e.clone(),v="polyline"===g.type?g.paths:g.rings;for(let n=0;n<s.length;n++){const e=s[n];for(let r=0;r<e.length;r++){const a=e[r],[o,s]=a,l=(o-f)*t+f,c=(s-m)*i+m;v[n][r]=d(a,l,c,void 0)}}return"paths"in g?g.paths=v:g.rings=v,g}function c(e,t,i,n,r,a){const o=Math.sqrt((i-e)*(i-e)+(n-t)*(n-t));return Math.sqrt((r-e)*(r-e)+(a-t)*(a-t))/o}function u(e,t,i,n,r,a){const o=180*Math.atan2(t-n,e-i)/Math.PI;return 180*Math.atan2(t-a,e-r)/Math.PI-o}function h(e,t,i,n){return d(e,e[0]+t,e[1]+i,null!=e[2]&&null!=n?e[2]+n:void 0)}function d(e,t,i,n){const r=[t,i];return e.length>2&&r.push(null!=n?n:e[2]),e.length>3&&r.push(e[3]),r}},ce0b:function(e,t,i){"use strict";var n=i("a4ee"),r=(i("c120"),i("e92d"),i("cea0"),i("59b2")),a=i("d386"),o=(i("e041"),i("8eed"),i("f402"),i("a6a3")),s=i("fd14"),l=i("997b"),c=i("5a62"),u=i("f626");let h=class extends(Object(l["a"])(Object(c["a"])(o["a"]))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new u["b"],this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};Object(n["a"])([Object(r["b"])({type:s["a"]})],h.prototype,"elevationInfo",void 0),Object(n["a"])([Object(r["b"])(Object(u["c"])())],h.prototype,"graphics",void 0),Object(n["a"])([Object(r["b"])({type:["show","hide"]})],h.prototype,"listMode",void 0),Object(n["a"])([Object(r["b"])()],h.prototype,"screenSizePerspectiveEnabled",void 0),Object(n["a"])([Object(r["b"])({readOnly:!0})],h.prototype,"type",void 0),Object(n["a"])([Object(r["b"])({constructOnly:!0})],h.prototype,"internal",void 0),h=Object(n["a"])([Object(a["a"])("esri.layers.GraphicsLayer")],h);var d=h;t["a"]=d},ce1f:function(e,t,i){},cec5:function(e,t,i){"use strict";i("25d4")},cedd:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"big-container"},[i("screen-header",{attrs:{layer:e.layer},on:{layer:e.switchLayer,showDataTotal:function(t){e.showDataTotal=!e.showDataTotal}}}),i("MapLayer",{ref:"MapLayer",attrs:{mapData:e.mapData,mapModel:e.layer},on:{layerClickEvent:e.showHotelDetal}}),1===e.layer?i("Gald",{ref:"gald",on:{mapData:function(t){e.mapData.markers=t}}}):e._e(),3===e.layer?i("community"):e._e(),i("arcgis-layer",{attrs:{visible:4===e.layer}}),e.showDataTotal?i("DataTotal",{on:{close:function(t){e.showDataTotal=!1}}}):e._e(),0===e.layer&&e.redYellowData&&e.redYellowData.length?i("div",{staticClass:"ry-total-btn-container"},[i("div",{staticClass:"ry-total-btn-wrapper",on:{click:function(t){return e.showRyTotal("red")}}},[i("span",{staticClass:"t1"},[e._v("红码人员列表")]),i("span",{staticClass:"t2",staticStyle:{color:"#E8473F"}},[e._v(e._s(e.redTotal))])]),i("div",{staticClass:"ry-total-btn-wrapper",on:{click:function(t){return e.showRyTotal("yellow")}}},[i("span",{staticClass:"t1"},[e._v("黄码人员列表")]),i("span",{staticClass:"t2"},[e._v(e._s(e.yellowTotal))])])]):e._e(),i("MapFilter",{ref:"MapFilter",attrs:{hotelType:e.hotelType,currLayer:e.layer},on:{setHotelData:e.setHotelData,setRedYellowData:e.setRedYellowData,setHeatMapData:e.setHeatMapData,MapChange:e.switchLayer,layerClickEvent:e.showHotelDetal,getRyTotal:e.getRyTotal}}),[0,2].includes(e.layer)?i("report-layer",e._b({attrs:{updatetime:e.chartUpdateTime,"dashboard-code":"city","title-left":"城市物联网建设情况","title-right":"物联网设备领域统计",slots:"right-1",hotelType:e.hotelType,hotelData:this.mapData.markers},scopedSlots:e._u([{key:"right-1",fn:function(){},proxy:!0}],null,!1,4043992405)},"report-layer",e.$attrs,!1)):e._e(),i("div",{staticClass:"detail_list"},e._l(e.detailList,(function(t,n){return e.detailList[n]&&0===e.layer?i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],key:n,attrs:{width:e.dialogWidth[t.detailType]||("stream"===t.detailType?"400px":"722px"),visible:!0,modal:!1,"close-on-click-modal":!1},on:{close:function(){e.detailList[n]=!1}}},[i("template",{on:{click:function(t){e.zIndex++}},slot:"title"},[i("div",["hotel"===t.detailType?i("div",[e._v(" "+e._s(t.jkgcjd)+" "),i("div",{staticClass:"title_type"},[e._v(e._s(e.hotelType[t.type]))])]):e._e(),"person"===t.detailType?i("div",[i("p",[e._v(e._s(t.xm))]),i("p",[e._v(e._s(t.xb))]),t.nl?i("p",[e._v(e._s(t.nl+"岁"))]):e._e(),e._v(" "),i("div",{staticClass:"title_type"},[e._v(e._s(t.mjlx))])]):e._e(),"stream"===t.detailType?i("div",[e._v(" 手机直播 ")]):e._e(),"redYellow"===t.detailType?i("div",[e._v(" 人员列表 ")]):e._e(),"ryDetail"===t.detailType?i("div",[i("p",[e._v(e._s(t.USERNAME))]),e._v(" "),i("p",{staticStyle:{"margin-right":"10px","margin-left":"4px"}},[e._v(e._s(t.gender))]),e._v(" "),i("div",{staticClass:"title_type"},[e._v(e._s(t.hh_type))])]):e._e()])]),"hotel"===t.detailType?i("HotelDetail",{attrs:{data:t},on:{showContactDetail:e.showContactDetail}}):e._e(),"redYellow"===t.detailType?i("ry-list",{attrs:{data:t},on:{showRyDetail:e.showRyDetail}}):e._e(),"ryDetail"===t.detailType?i("ry-detail",{attrs:{data:t}}):e._e(),"person"===t.detailType?i("person-detail",{attrs:{data:t}}):e._e(),"stream"===t.detailType?i("videoPlayer",{attrs:{videoUrl:t.playUrl,endStream:e.endStream,userName:t.userName}}):e._e()],2):e._e()})),1)],1)},r=[],a=i("4795"),o=i.n(a),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"screen-header"},[n("div",{staticClass:"button-group"},[n("div",{staticClass:"button",class:0===e.layer?"layer-active":"",on:{click:function(t){return e.$emit("layer",0)}}},[e._v(" 疫情数据 ")]),n("div",{staticClass:"button",class:1===e.layer?"layer-active":"",on:{click:function(t){return e.$emit("layer",1)}}},[e._v(" 公安流调 ")]),n("div",{staticClass:"button",on:{click:function(t){return e.$emit("showDataTotal")}}},[e._v(" 数据总览 ")])]),n("div",{staticClass:"main",style:"background-image:url("+i("7bfe")+")"},[n("div",{staticClass:"support"},[e._v("技术支持：中科智城")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isFullScreen,expression:"isFullScreen"}],staticClass:"fbtn",on:{click:e.exit}},[n("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:i("f707")}})])])},l=[],c=i("403a"),u={name:"ScreenHeader",props:["layer"],components:{},data:function(){return{}},computed:{isFullScreen:function(){return this.$store.state.common.isFullScreen}},mounted:function(){},methods:{exit:function(){this.$store.commit("common/SET_IS_FULLSCREEN",!1),Object(c["a"])()}}},h=u,d=(i("f991"),i("2877")),p=Object(d["a"])(h,s,l,!1,null,null,null),f=p.exports,m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"report-layer"},[i("div",{staticClass:"sidebar pl",class:{folder:e.folder.left},style:{width:e.leftWidth}},[i("main",{class:{fl:e.folder.left}},[e._l(e.layout.left,(function(t,n){return t.slot?e._t(t.slot):i("div",{key:t.i,staticClass:"side-box",class:{"side-box1":0===n}},[t.list&&t.list.length?i("div",[i("el-carousel",{attrs:{interval:1e4,"indicator-position":"outSide",arrow:"never",trigger:"click"}},e._l(t.list,(function(e){return i("el-carousel-item",{key:e.id},[i("data-board",{attrs:{id:e.id,countCode:e.countCode,title:e.name,navBar:e.navBar,chartHeight:e.height}})],1)})),1)],1):i("div",[i("data-board",{attrs:{id:t.id,countCode:t.countCode,title:t.name,navBar:t.navBar,chartHeight:t.height}})],1)])})),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"side-add"},[i("el-button",{staticClass:"btn",attrs:{icon:"el-icon-plus",type:"primary",size:"mini"},on:{click:function(t){return e.addChart("left",e.layout.left.length)}}},[e._v("添加")])],1)],2),i("div",{staticClass:"trb",on:{click:function(t){return e.toggleSidebar("left")}}},[i("i",{class:[e.folder.left?"el-icon-arrow-right":"el-icon-arrow-left"]})])]),i("div",{staticClass:"sidebar pr",class:{folder:e.folder.right},style:{width:e.rightWidth}},[i("main",{class:{fr:e.folder.right}},[e._l(e.layout.right,(function(t,n){return t.slot?e._t(t.slot):i("div",{key:t.i,staticClass:"side-box"},[t.list&&t.list.length?i("div",[i("el-carousel",{attrs:{interval:1e4,"indicator-position":"outSide",arrow:"never",trigger:"click",height:t.height+75+"px"}},e._l(t.list,(function(e){return i("el-carousel-item",{key:e.id},[i("data-board",{attrs:{id:e.id,title:e.name,countCode:e.countCode,navBar:e.navBar,chartHeight:e.height}})],1)})),1)],1):i("div",[i("data-board",e._b({attrs:{id:t.id,title:t.name,countCode:t.countCode,navBar:t.navBar,chartHeight:t.height,updateTimeType:t.updateTimeType}},"data-board",e.$attrs,!1))],1)])})),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"side-add"},[i("el-button",{staticClass:"btn",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.addChart("right",e.layout.right.length)}}},[e._v("添加")])],1)],2),i("div",{staticClass:"trb",on:{click:function(t){return e.toggleSidebar("right")}}},[i("i",{class:[e.folder.right?"el-icon-arrow-left":"el-icon-arrow-right"]})])]),i("report-list",{on:{select:e.confirmItem},model:{value:e.chartListVisible,callback:function(t){e.chartListVisible=t},expression:"chartListVisible"}})],1)},g=[],v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"board",class:[e.className,e.countList&&e.countList.length?"mt":""],attrs:{"element-loading-text":"加载数据中","element-loading-custom-class":"loading-mask"}},[i("div",{staticClass:"header"},[i("h3",{staticClass:"title"},[e._v(e._s(e.chartInfo.title))]),"jdgltjtb"===e.id?i("div",{staticClass:"link",on:{click:e.openLink}},[e._v("详情")]):e._e()]),e.countList&&e.countList.length&&e.countList[0]&&e.countList[0].key?i("div",{staticClass:"chart-total-wrapper"},e._l(e.countList,(function(t,n){return i("div",{key:n,staticClass:"chart-total-box"},[i("p",{staticClass:"t1"},[e._v(e._s(t.key))]),i("p",{staticClass:"t2"},[e._v(e._s(t.value))])])})),0):e._e(),i("div",{ref:"chart-real-wrapper",staticClass:"chart-real-wrapper"},[e.navBar&&e.navBar.length?i("div",{staticClass:"chart-nav-bar"},e._l(e.navBar,(function(t,n){return i("div",{key:n,staticClass:"chart-nav-bar-item",class:{active:n===e.currentIndex},on:{click:function(i){return e.handleSwitchChart(t,n)}}},[e._v(" "+e._s(t.name)+" ")])})),0):e._e(),e.chartData?i(e.componentName,{tag:"component",staticClass:"board-item",style:"height:"+this.chartHeight+"px;",attrs:{data:e.chartData,info:e.chartInfo}}):e._e()],1),i("div",{staticClass:"footer"},[i("span",[e._v(" 更新时间:"+e._s(e.updateTime&&"null"!==e.updateTime?e.updateTime:"2021-06-08")+" ")])])])},y=[],_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box"},[i("div",{ref:"chart",staticClass:"chart"},[e.errorMsg?i("div",{staticClass:"error"},[e._v(e._s(e.errorMsg))]):e._e()])])},b=[],x=i("3eba");i("94b1"),i("ef97"),i("c037"),i("23ee"),i("007d"),i("627c"),i("0a6d"),i("db0e"),i("95a8"),i("d28f"),i("0b4b");var w=x,T={colorList:["#2F54EB","#1EE7E7","#71E7A2","#71AC5E","#37d7ff","#43baf2","#f35b5a","#ffca24"],textStyle:"#fff",lineColor:["#ffffff","#1cfa4b"],markPointColor:["#3971f0","#666"],markPointFontColor:["#ffffff","#ffffff"],lineStyle:{color:"#2c3d48"}},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:T,n=i.colorList,r=i.lineStyle.color,a=(i.textStyle.seriesLabelColor,n),o={tooltip:{show:!0,textStyle:{fontSize:10},position:{right:"0",bottom:"0"}},textStyle:{color:i.textStyle.color},title:{show:!1,textStyle:{color:i.textStyle.color,fontSize:"1.2em"}},legend:{textStyle:{color:i.textStyle.color,fontSize:12},right:10,itemWidth:10,itemHeight:10,top:0,containLabel:!0},grid:{top:"15%",right:"6%",bottom:"4%",left:"4%",containLabel:!0},xAxis:[],yAxis:[],color:a};return t.xAxis&&t.xAxis.length&&t.xAxis.forEach((function(e,t){o.xAxis[t]={splitLine:{show:!1},axisLine:{lineStyle:{color:r}}}})),t.yAxis&&t.yAxis.length&&void 0==t.yAxis[0].data&&t.yAxis.forEach((function(e,t){o.yAxis[t]={max:function(e){return Math.ceil(1.2*e.max)},min:function(e){var t=e.min;return t>0?Math.floor(.9*t):parseInt(1.1*t)},splitLine:{show:!1,lineStyle:{color:r}},axisLine:{lineStyle:{color:r}},name:e.name?"(".concat(e.name,")"):null,nameTextStyle:{align:"right",fontSize:".6em"}}})),o},O=S,C=i("d2b8");function k(e,t){return M(e)||I(e,t)||E(e,t)||P()}function P(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){if(e){if("string"===typeof e)return A(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function I(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)if(i.push(o.value),t&&i.length===t)break}catch(l){r=!0,a=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw a}}return i}}function M(e){if(Array.isArray(e))return e}function D(e){return D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}var j={name:"ChartBoard",components:{},props:{info:{type:Object},data:{type:Object,required:!0}},data:function(){return{errorMsg:null,chart:null}},mounted:function(){var e=this,t=this.getData();setTimeout((function(){e.$nextTick((function(){e.initChart(t)}))}),1e3)},computed:{chartSkin:function(){return this.$store.state.user.themeData.chartSkin}},methods:{getData:function(){if(0==Object.keys(this.data).length)return{optionData:{},panelItemOptionData:{}};var e=function e(t){for(var i in t)null!==t[i]&&""!==t[i]||delete t[i],"object"===D(t[i])&&e(t[i])},t=this.data["optionData"]&&this.data["optionData"].length>0?JSON.parse(this.data["optionData"]):{},i=this.data["panelItemData"]["optionData"]||{};return delete i.title,delete t.title,delete t.backgroundColor,e(t),e(i),{optionData:t,panelItemOptionData:i}},initChart:function(e){if(0!=Object.keys(e.panelItemOptionData).length){var t=w.init(this.$refs["chart"]);t.setOption(e.panelItemOptionData),t.setOption(O(e.optionData,e.panelItemOptionData,t,this.chartSkin));var i={},n=JSON.parse(JSON.stringify(e.panelItemOptionData));if(i=this.getChartStyle(this.info.code,e.panelItemOptionData),t.setOption(i),"jdgltjtb"===this.info.code&&n.series[0].data.length>8){var r=8,a=0,o=function(){var e=JSON.parse(JSON.stringify(n)),i=e.series[0].data.splice(a,r),o=e.yAxis[0].data.splice(a,r);a++,a>n.series[0].data.length-r&&(a=0),e.series[0].data=i,e.yAxis[0].data=o,t.setOption(e)};o(),setInterval((function(){o()}),3e3)}this.chart=t}else this.errorMsg="数据为空"},getChartStyle:function(e,t){switch(t.title={show:!1},t.color=C["d"].colorAcc,e){case"zjqtxzrstb":case"zjqtljqs":case"wlqtjcglrstb":t.legend.top=0,t.grid={top:"10%",right:"6%",bottom:"4%",left:"4%",containLabel:!0},t.color=["#2F54EB","#1EE7E7"],t.tooltip={trigger:"axis"};var i=[[{offset:0,color:"rgba(47,84,235,0.4)"},{offset:1,color:"rgba(47,84,235,0.0)"}],[{offset:0,color:"rgba(30,231,231,0.4)"},{offset:1,color:"rgba(30,231,231,0.0)"}]];t.series=t.series.map((function(e,t){return e.areaStyle={color:new w.graphic.LinearGradient(0,0,0,1,i[t])},e})),Object.assign(t.legend,{icon:"roundRect"});break;case"weeksStreetZkrTrend":var n=t.xAxis[0].data.slice(0);n.shift();var r=new Date;n.push(Object(c["b"])(r)),n.forEach((function(e,t,i){var n=new Date(e);n.setDate(n.getDate()-1),i[t]=Object(c["b"])(n)})),t.legend.top="5%",t.grid||(t.grid={}),t.grid={top:"20%",left:"15%",right:"5%",bottom:"10%"},t.tooltip.formatter=function(e){var t=new Date(e[0].axisValue),i=new Date,n="";return t.getTime()+6048e5<i.getTime()?(t.setDate(t.getDate()+6),n=Object(c["b"])(t)):n=Object(c["b"])(i.setDate(i.getDate()-1)),"".concat(e[0].axisValue,"至").concat(n,"\n                <br/>接种总人数: ").concat(e[0].value+e[1].value,"人\n                <br/> ").concat(e[0].seriesName,": ").concat(e[0].value,"人\n                <br/>").concat(e[1].seriesName,": ").concat(e[1].value,"人")},Object.assign(t.xAxis[0],{axisLabel:{color:"#333",formatter:function(e,t){return e.split("-")[1]+"-"+e.split("-")[2]}},axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{color:"#f0f0f0"}}}),Object.assign(t.yAxis[0],{type:"value",axisLabel:{color:"#333",formatter:function(e,t){return 0===e?e:e<1e4?e+"人":(Math.ceil(e/1e3)/10).toFixed(1)+"万人"}},axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{color:"#f0f0f0"}},axisTick:{show:!1}});break;case"daysStreetZkrTrend":t.legend.top="5%",t.grid||(t.grid={}),t.grid={top:"20%",left:"15%",right:"5%",bottom:"10%"},t.tooltip.formatter=function(e){return"".concat(e[0].axisValue,"\n                <br/>接种总人数: ").concat(e[0].value+e[1].value,"人\n                <br/> ").concat(e[0].seriesName,": ").concat(e[0].value,"人\n                <br/>").concat(e[1].seriesName,": ").concat(e[1].value,"人")},Object.assign(t.xAxis[0],{axisLabel:{color:"#333",formatter:function(e,t){return e.split("-")[1]+"-"+e.split("-")[2]}},axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{color:"#f0f0f0"}}}),Object.assign(t.yAxis[0],{type:"value",axisLabel:{color:"#333",formatter:function(e,t){return 0===e?e:e<1e4?e+"人":(Math.ceil(e/1e3)/10).toFixed(1)+"万人"}},axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{color:"#f0f0f0"}},axisTick:{show:!1}});break;case"monthsStreetZkrTrend":t.legend.top="5%",t.grid||(t.grid={}),t.grid={top:"20%",left:"15%",right:"5%",bottom:"10%"},t.tooltip.formatter=function(e){return"".concat(e[0].axisValue,"\n                <br/>接种总人数: ").concat(e[0].value+e[1].value,"人\n                <br/> ").concat(e[0].seriesName,": ").concat(e[0].value,"人\n                <br/>").concat(e[1].seriesName,": ").concat(e[1].value,"人")},Object.assign(t.xAxis[0],{axisLabel:{color:"#333",formatter:function(e,t){return e.split("-")[1]+"月"}},axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{color:"#f0f0f0"}}}),Object.assign(t.yAxis[0],{type:"value",axisLabel:{color:"#333",formatter:function(e,t){return 0===e?e:Math.ceil(e/1e4)+"万人"}},axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{color:"#f0f0f0"}},axisTick:{show:!1}});break;case"ymjztj":t.grid={top:"5%"},t.legend={show:!1},t.series[0].center=["50%","50%"],t.series[0].radius=[0,"60%"],t.series[0].label={formatter:"{b}:\n{@1}人\n({d}%)"};break;case"hjrkjzbl":t.grid={top:"5%"},t.legend={show:!1},t.series[0].center=["50%","50%"],t.series[0].radius=[0,"60%"],t.series[0].label={formatter:"{b}:\n{@1}人\n({d}%)"};break;case"ymjzfb":t.legend.top="0%",t.legend.selectedMode=!1,t.grid||(t.grid={}),t.grid.left="2%",t.grid.right="1%",t.color=["#2F54EB","#71E7A2"];var a=k(t.series,2),o=a[0],s=a[1],l=o.data.map((function(e,t){var i=e+s.data[t],n=s.atrributes[t];return{total:i,attribute:n,v1:e,v2:s.data[t],p1:o["_percent"][t],p2:s["_percent"][t],p_total:(parseFloat(o["_percent"][t].split("%")[0])+parseFloat(s["_percent"][t].split("%")[0])).toFixed(2)+"%"}}));t.tooltip||(t.tooltip={}),t.tooltip.formatter=function(e){var t=l[e[0].dataIndex],i=t.v1,n=t.v2,r=t.p1,a=t.p2,o=t.p_total,s=t.total,c=t.attribute;return"".concat(e[0].name,":\n                <br/>户籍人口: ").concat(c,"人\n                <br/>接种总人数: ").concat(s,"人(").concat(o,")\n                <br/> ").concat(e[0].seriesName,": ").concat(i,"人(").concat(r,")\n                <br/>").concat(e[1].seriesName,": ").concat(n,"人(").concat(a,")")},o.label={show:!1},o.barWidth="60%",s.label={show:!0,position:"right",formatter:function(e){var t=e.dataIndex,i=l[t],n=i.v1,r=i.v2,a=i.p1,o=i.p2;return"{a|".concat(n,"人(").concat(a,")}")+"\n"+"{b|".concat(r,"人(").concat(o,")}")},rich:{a:{color:"#2F54EB"},b:{color:"#71E7A2"}}},t.xAxis={},Object.assign(t.xAxis,{type:"value",interval:1e4,max:function(e){return 1.6*e.max}});break;case"organZkrStatistics":for(var u=[],h=0;h<t.series[0].data.length;h++)u.push({name:t.yAxis[0].data[h],value:t.series[0].data[h],label:{width:"4px",overflow:"break",normal:{color:"black",show:!0,position:[0,"-14px"],textStyle:{fontSize:12},formatter:function(e,t){return e.name}}}});t.series[0].data=u,t.legend.top="5%",t.legend.selectedMode=!1,t.grid||(t.grid={}),t.grid.left="1%",t.grid.right="1%";var d=k(t.series,2),p=d[0],f=d[1],m=p.data.map((function(e,t){var i=e+f.data[t];return{total:i,v1:e,v2:f.data[t]}}));t.tooltip||(t.tooltip={}),t.tooltip.formatter=function(e){var t=m[e[0].dataIndex],i=t.v1,n=t.v2,r=e[0].name.split(","),a="";return r.forEach((function(e){a+="<br/>"+e})),"接种点：".concat(a,"\n                <br/> ").concat(e[0].seriesName,": ").concat(i.value,"人\n                <br/>").concat(e[1].seriesName,": ").concat(n,"人")},p.label={show:!1},p.barWidth="40%",f.label={show:!0,position:"right",formatter:function(e){var t=e.dataIndex,i=m[t],n=i.v1,r=i.v2;return"{a|".concat(n.value,"人}")+"/"+"".concat(r,"人")},rich:{a:{color:"#5e6ef9"}}},t.xAxis={},Object.assign(t.xAxis,{type:"value",axisLabel:{color:"#333",showMaxLabel:!1},axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{color:"#f0f0f0"}},interval:3e4,max:function(e){return 1.6*e.max}}),Object.assign(t.yAxis[0],{axisLabel:{color:"#333",show:!1},axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{color:"#f0f0f0"}}}),t.color=["#306EDD","#71E7A2"];break;case"rjczcy":case"rgczcy":t.color=["#2F54EB","#1EE7E7"];break;case"getDaysNulacid":case"getWeeksNulacid":case"getMonthsNulacid":t.color=["#2F54EB","#71AC5E"],t.series.forEach((function(e){e.barWidth=30})),Object.assign(t,{grid:{top:"20%",right:"6%",bottom:"2%",left:"4%",containLabel:!0}});break;case"jdgltjtb":t.color=["#1EE7E7","#2F54EB"],t.yAxis.forEach((function(e){e.axisLabel={formatter:function(e){e=e.toString();var t=8;return e.length>t?e.substring(0,t-1)+"...":e}}})),t.series&&t.series.length&&(t.series=t.series.map((function(e){return e.label={position:"right",show:!0,textStyle:{color:"#fff",fontSize:12}},e}))),Object.assign(t,{grid:{top:"14%",right:"6%",bottom:"2%",left:"4%",containLabel:!0}});break;default:break}return t}}},L=j,R=(i("9155"),Object(d["a"])(L,_,b,!1,null,"858c8f68",null)),N=R.exports,z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box"},[i("div",{ref:"chart",staticClass:"chart"})])},B=[],V={name:"ChartBoardV1",components:{},props:{info:{type:Object},data:{type:Object,required:!0}},data:function(){return{}},mounted:function(){var e=this.getData();this.initChart(e)},computed:{chartSkin:function(){return this.$store.state.user.themeData.chartSkin}},methods:{getData:function(){var e,t=this.data["panelItemData"]["data"].data,i=this.info["type"];switch(i){case"PieChart":e=this.getPieOption(t);break;case"Histogram":e=this.getBarOption(t);break;case"LineChart":e=this.getLineOption(t);break;default:break}var n=this.data["optionData"]&&this.data["optionData"].length>0?JSON.parse(this.data["optionData"]):{};return{optionData:n,panelItemOptionData:e}},initChart:function(e){if(e.panelItemOptionData){delete e.panelItemOptionData.title;var t=w.init(this.$refs["chart"]);t.setOption(e.panelItemOptionData),t.setOption(O(e.optionData,e.panelItemOptionData,t,this.chartSkin)),t.setOption(e.optionData)}},getPieOption:function(e){var t=e.map((function(e){return e.name}));return{legend:{textStyle:{color:"#B1B9C4",fontSize:10},type:"scroll",orient:"vertical",top:"10",right:"20",data:t},series:[{name:this.info.title,type:"pie",radius:["40%","70%"],center:["35%","50%"],data:e,animationEasing:"cubicInOut",label:{show:!1,formatter:"{b}\n{c}"}}]}},getBarOption:function(e){var t=[],i=[];return e.yAxisDatas.forEach((function(e){t.push({name:e.name,type:"bar",barGap:"10%",data:e.data}),i.push(e.name)})),{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:"10%",left:"5%",right:"5%",bottom:"0%",containLabel:!0},xAxis:[{type:"category",data:e.xAxisDatas,axisTick:{alignWithLabel:!0},axisLabel:{show:!0}}],yAxis:[{type:"value",axisTick:{show:!1}}],legend:{data:i},series:t}},getLineOption:function(e){return{xAxis:{data:e.xAxisDatas,boundaryGap:!1,axisTick:{show:!1}},grid:{top:"10%",left:"5%",right:"5%",bottom:0,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1}},legend:{top:30,right:10,align:"left",type:"scroll"},series:e.yAxisDatas}}}},F=V,U=(i("5c2d"),Object(d["a"])(F,z,B,!1,null,"18348b0e",null)),G=U.exports,H=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"counter-box"},[e.countArr.length>0?i("div",{staticClass:"card-wrap"},e._l(e.countArr,(function(t,n){return i("div",{key:n,staticClass:"card-panel-num"},[i("span",{staticClass:"title"},[e._v(e._s(t.title))]),i("count-to",{attrs:{"start-val":0,"end-val":t.value,decimals:t.decimalsNum,duration:1600}}),i("div",{staticClass:"diff-wrap"},[i("span",{staticClass:"diff-title"},[e._v(e._s(t.diffTitle))]),i("span",{directives:[{name:"show",rawName:"v-show",value:0!==t.diffValue,expression:"item.diffValue !== 0"}],staticClass:"diff",class:t.diffValue<0?"color-red":""},[i("img",{staticClass:"ico",attrs:{src:e.getIconUrl(t.diffValue)}}),e._v(e._s(t.diffValue)+" ")])])],1)})),0):e._e()])},W=[],q=i("ec1b"),Z=i.n(q),Y={name:"CounterBoard",components:{CountTo:Z.a},props:{info:{type:Object},data:{type:Object,required:!0},icon:{type:String,default:"devices"}},data:function(){return{countArr:[]}},computed:{decimalsNum:function(){return this.data.value%1>0?2:0}},mounted:function(){this.getData()},methods:{getData:function(e){var t=this,i=this.data["panelItemData"]["data"];"[object Array]"===Object.prototype.toString.call(i.data.data)?(this.countArr=i.data.data,this.countArr.forEach((function(e,i){t.countArr[i].decimalsNum=e.value%1>0?2:0}))):this.countArr=[{title:i.title,value:i.data.value,decimalsNum:0,diffTitle:null,diffValue:0}]},getIconUrl:function(e){return"".concat("","/svg/").concat(e>0?"up":"down",".svg")}}},X=Y,K=(i("47da"),Object(d["a"])(X,H,W,!1,null,null,null)),$=K.exports,Q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{padding:"10px"}},[i("el-table",{staticStyle:{width:"99.6%"},attrs:{stripe:"",data:e.gridData}},e._l(e.headerData,(function(t){return i("el-table-column",{key:t.name,attrs:{prop:t.name,width:t.width,label:t.label},scopedSlots:e._u([{key:"default",fn:function(n){return[i("span",[e._v(e._s(n.row[t.name]))])]}}],null,!0)})})),1)],1)},J=[];function ee(e){return re(e)||ne(e)||ie(e)||te()}function te(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ie(e,t){if(e){if("string"===typeof e)return ae(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ae(e,t):void 0}}function ne(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function re(e){if(Array.isArray(e))return ae(e)}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var oe={name:"GridChart",data:function(){return{headerData:[],gridData:[],updateTime:null}},computed:{pageRange:function(){return[5].concat(ee(this.$store.getters.pageRange))}},props:{info:{type:Object},data:{type:Object,required:!0}},mounted:function(){this.getData()},methods:{getData:function(){var e=this.data.panelItemData.data;e&&(this.headerData=e.data.xAxisDatas,this.gridData=e.data.yAxisDatas)},handleCurrentChange:function(e){this.page.pageNumber=e,this.getData()},handleSizeChange:function(e){this.page.pageSize=e,this.getData()}}},se=oe,le=(i("5269"),Object(d["a"])(se,Q,J,!1,null,"3b1b11f1",null)),ce=le.exports,ue=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box"},[i("iframe",{ref:"frame",staticClass:"full"})])},he=[],de={name:"VideoBoard",props:{info:{type:Object},data:{type:Object,required:!0}},data:function(){return{}},mounted:function(){var e=this.getData();this.initVideo(e)},methods:{getData:function(){return this.data["optionData"]},initVideo:function(e){e.length&&(this.$refs["frame"].src=e[0].url)}}},pe=de,fe=(i("ba3e"),Object(d["a"])(pe,ue,he,!1,null,"2c6ef116",null)),me=fe.exports,ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box"},[i("iframe",{ref:"frame",staticClass:"full"})])},ve=[],ye=i("b775");var _e={name:"IframeBoard",props:{info:{type:Object},data:{type:Object,required:!0}},data:function(){return{}},mounted:function(){var e=this.getData();this.initVideo(e)},methods:{getData:function(){return this.data["optionData"]},initVideo:function(e){e&&(this.$refs["frame"].src=e)}}},be=_e,xe=(i("b0e5"),Object(d["a"])(be,ge,ve,!1,null,"5928525c",null)),we=xe.exports;function Te(e){return Object(ye["a"])({url:"/portal/rest/panelItemData/getPanelItemDataByCode",method:"get",params:e})}function Se(){return Object(ye["a"])({url:"/screen/web/nulacid/nulacidStatistics",method:"get",params:{}})}function Oe(){return Object(ye["a"])({url:"/screen/yqfk-jdgl/gljdzl",method:"get",params:{}})}function Ce(){return Object(ye["a"])({url:"/screen/web/chart/getUpdateTime",method:"get",params:{}})}function ke(){return Object(ye["a"])({url:"/screen/web/nulacid/getUpdateTime",method:"get",params:{}})}function Pe(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function Ee(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Pe(a,n,r,o,s,"next",e)}function s(e){Pe(a,n,r,o,s,"throw",e)}o(void 0)}))}}var Ae={name:"DataBoard",props:{id:{type:[String,Number],required:!0},title:{type:[String,Number],required:!1},chartHeight:{type:Number,required:!1,default:240},countCode:{type:[String],required:!1},navBar:{type:[Array],required:!1},updateTimeType:{type:String,required:!1,default:""},className:{type:String}},components:{ChartBoard:N,ChartBoardV1:G,CounterBoard:$,VideoBoard:me,IframeBoard:we,GridChart:ce},data:function(){return{componentName:null,chartInfo:{},chartData:null,isLoading:!1,source:"",description:"",updateTime:"",countList:[],currentIndex:0}},watch:{"$attrs.updatetime":function(e){this.updateTime=this.updateTimeType?e[this.updateTimeType]:this.updateTime}},computed:{tipEnable:function(){return this.description&&(this.source||this.updateTime)}},mounted:function(){var e=this;return Ee(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,e.updateTime=e.updateTimeType&&e.$attrs.updatetime&&e.$attrs.updatetime[e.updateTimeType]?e.$attrs.updatetime[e.updateTimeType]:e.updateTime,t.next=4,e.getData();case 4:return t.next=6,e.getCountData();case 6:e.isLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},methods:{getData:function(e){var t=this;return this.componentName="",new Promise((function(i,n){Te({code:e||t.id}).then(function(){var e=Ee(o.a.mark((function e(n){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.chartInfo={code:n.code,title:t.title},t.source=n.source,t.description=n.description,t.updateTimeType||(t.updateTime=n.updateTime),t.componentName=N,n.panelItemData&&(t.chartData=n),i();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},getCountData:function(){var e=this;return new Promise((function(t,i){e.countCode?"hsjczrs"===e.countCode?Se().then((function(i){var n=i.optionData.map((function(e){return e.key=e.name,e.value=e.value,"010"===e.id&&(e.key="近3日核酸检测占比"),e}));e.countList=[n.find((function(e){return"001"===e.id})),n.find((function(e){return"010"===e.id}))],t()})):"jd1"===e.countCode?Oe().then((function(i){e.countList=i.map((function(e){return e.key=e.name,e})),t()})):Te({code:e.countCode}).then((function(i){var n=i.panelItemData.data||{};e.countList=Object.keys(n).reduce((function(e,t,i){return e.push({key:t,value:n[t]}),e}),[]),t()})):t()}))},handleSwitchChart:function(e,t){console.log("item",e),this.currentIndex=t,this.getData(e.id)},getComponent:function(e){switch(e){case"PIE":case"BAR":case"LINE":case"SCATTER":case"MAP":case"CANDLESTICK":case"RADAR":case"HEATMAP":case"GRAPH":case"GAUGE":case"FUNNEL":case"TREE":return N;case"PieChart":case"Histogram":case"LineChart":return G;case"Counter":return $;case"VIDEO":return me;case"Iframe":return we;case"List":return ce;default:break}},openLink:function(){window.open(location.origin+location.pathname+"#/dataManage/hotel?statu=6","_blank")}}},Ie=Ae,Me=(i("9569"),Object(d["a"])(Ie,v,y,!1,null,null,null)),De=Me.exports,je=location.origin+"/portal",Le=Object({NODE_ENV:"production",VUE_APP_BASE_API:"/yqfk",VUE_APP_MAP_API:"",VUE_APP_PORTAL_API:"/portal",VUE_APP_SCREEN_API:"/screen",BASE_URL:""}).VUE_APP_PORTAL_HOST;function Re(e){return Object(ye["a"])({baseURL:je,url:"/rest/dashboard/saveOrUpdateDashBoard",method:"post",data:e,headers:{hideNotify:!0}})}function Ne(e){return Le+je+"/rest/panelItem/thumbnail?panelId=".concat(e)}var ze=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.showme,"append-to-body":"",width:"1130px",modal:!1,"close-on-click-modal":!1,title:"添加图表"},on:{close:function(t){return e.$emit("toggle",!1)}}},[i("el-form",{staticClass:"report-filter",attrs:{inline:!0,model:e.filter}},[i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{placeholder:"输入图表面板标题",size:"small"},model:{value:e.filter.title,callback:function(t){e.$set(e.filter,"title",t)},expression:"filter.title"}})],1),i("el-form-item",{attrs:{label:""}},[i("el-select",{attrs:{placeholder:"请选择图表类型",size:"small"},model:{value:e.filter.itemType,callback:function(t){e.$set(e.filter,"itemType",t)},expression:"filter.itemType"}},[i("el-option",{key:null,attrs:{value:null,label:"全部"}}),e._l(e.panelTypeMap,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:t}})}))],2)],1),i("el-form-item",{staticStyle:{width:"50px"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.filterData}},[e._v("搜索")])],1)],1),i("div",{staticClass:"report-list"},[e._l(e.data,(function(t){return i("div",{key:t.id,staticClass:"report"},[i("div",{staticClass:"report-click",on:{click:function(i){return e.selectReport(t)}}},[e._v("选择")]),i("data-board",{attrs:{id:t.id}})],1)})),i("div",{directives:[{name:"show",rawName:"v-show",value:0==e.data.length,expression:"data.length==0"}],staticClass:"empty"},[e._v(" 没有图表数据 ")])],2),i("pagination",{staticStyle:{margin:"0px 15px"},attrs:{"current-page":e.page.pageNum,"page-sizes":e.page.pageSizes,"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.rowTotal,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},Be=[],Ve={PIE:{label:"饼图"},BAR:{label:"柱状图"},LINE:{label:"折线图"},SCATTER:{label:"散点图"},MAP:{label:"地图"},CANDLESTICK:{label:"K线图"},RADAR:{label:"雷达图"},HEATMAP:{label:"热力图"},GRAPH:{label:"关系图"},GAUGE:{label:"仪表盘"},FUNNEL:{label:"漏斗图"},TREE:{label:"树形图"},VIDEO:{label:"视频"},Iframe:{label:"小页面"}},Fe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pagination"},[i("el-pagination",{staticClass:"el-pagination",attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes?e.pageSizes:[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),i("div",{staticClass:"jumper"},[i("el-input",{staticClass:"input",attrs:{type:"number",min:"1",max:Math.max(Math.ceil(e.total/e.pageSize),1)},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.jumperChange(t)}},model:{value:e.jumperNum,callback:function(t){e.jumperNum=t},expression:"jumperNum"}}),e._v("页 "),i("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:e.jumperChange}},[e._v("前往")])],1)],1)},Ue=[],Ge={name:"Pagination",props:["currentPage","pageSizes","pageSize","total"],data:function(){return{jumperNum:1}},mounted:function(){this.jumperNum=this.currentPage},watch:{currentPage:function(e){this.jumperNum=this.currentPage}},methods:{handleSizeChange:function(e){this.$emit("size-change",e)},handleCurrentChange:function(e){this.$emit("current-change",e)},jumperChange:function(){this.jumperNum=Math.max(Math.min(Math.max(Math.floor(this.jumperNum),1),Math.ceil(this.total/this.pageSize)),1),this.handleCurrentChange(this.jumperNum)}}},He=Ge,We=(i("28b9"),Object(d["a"])(He,Fe,Ue,!1,null,null,null)),qe=We.exports,Ze={name:"ReportList",components:{DataBoard:De,Pagination:qe},props:{showme:{type:Boolean,default:!1}},model:{prop:"showme",event:"toggle"},data:function(){return{data:[],filter:{title:"",appInfoId:"",panelItemDomainIds:[],itemType:""},filter_params:{},page:{pageNum:1,pageSizes:[6,9,12],pageSize:6,rowTotal:0},panelTypeMap:Ve}},created:function(){},mounted:function(){this.getData()},computed:{},methods:{getData:function(){var e={code:1,message:"success",msg:"success",data:{pageNumber:1,pageSize:6,pageTotal:33,rowTotal:194,dataList:[{secureObjectType:null,id:3999618,state:"cn.ac.iscas.gz.ecafe.infrastructure.compact.domain.NewEntityState",displayState:null,ownerName:"admin",ownerId:1,objectCreateTime:"2021-06-07T05:03:09.000+0000",objectModifierName:null,objectModificationTime:null,permission:0,belongTo:null,departmentId:null,tenantId:null,dataSource:null,objectId:null,status:0,title:"未做核酸检测人中疫苗接种情况统计",appInfoId:3040409,appInfoName:"城市运行监控平台",panelItemDomainIds:[],panelItemDomainList:[],thumbnailFile:null,itemType:"PIE",sortOrder:1,subtitle1:null,subtitle2:null,description:"",interfaceUrl:"http://develop.iot-cas.com:8081/screen/web/nulacid/getZkrNumFromUnNucleic",itemUrl:"",picUrl:null,panelItemData:null,departmentDTOS:null,dataVersion:"2.0.0",optionData:"",code:"getZkrNumUnNucleic",source:null,updateTime:null},{secureObjectType:null,id:3999616,state:"cn.ac.iscas.gz.ecafe.infrastructure.compact.domain.NewEntityState",displayState:null,ownerName:"admin",ownerId:1,objectCreateTime:"2021-06-07T05:02:15.000+0000",objectModifierName:null,objectModificationTime:null,permission:0,belongTo:null,departmentId:null,tenantId:null,dataSource:null,objectId:null,status:0,title:"常住人口核酸检测调查情况统计",appInfoId:3040409,appInfoName:"城市运行监控平台",panelItemDomainIds:[],panelItemDomainList:[],thumbnailFile:null,itemType:"BAR",sortOrder:1,subtitle1:null,subtitle2:null,description:"",interfaceUrl:"http://develop.iot-cas.com:8081/screen/web/nulacid/getNulacidByStreet",itemUrl:"",picUrl:null,panelItemData:null,departmentDTOS:null,dataVersion:"2.0.0",optionData:"",code:"getNulacidByStreet",source:null,updateTime:null},{secureObjectType:null,id:3999613,state:"cn.ac.iscas.gz.ecafe.infrastructure.compact.domain.NewEntityState",displayState:null,ownerName:"admin",ownerId:1,objectCreateTime:"2021-06-07T05:01:21.000+0000",objectModifierName:null,objectModificationTime:null,permission:0,belongTo:null,departmentId:null,tenantId:null,dataSource:null,objectId:null,status:0,title:"核酸检测人次按天统计",appInfoId:3040409,appInfoName:"城市运行监控平台",panelItemDomainIds:[],panelItemDomainList:[],thumbnailFile:null,itemType:"BAR",sortOrder:1,subtitle1:null,subtitle2:null,description:"",interfaceUrl:"http://develop.iot-cas.com:8081/screen/web/nulacid/getDaysNulacid",itemUrl:"",picUrl:null,panelItemData:null,departmentDTOS:null,dataVersion:"2.0.0",optionData:"",code:"getDaysNulacid",source:null,updateTime:null},{secureObjectType:null,id:3995115,state:"cn.ac.iscas.gz.ecafe.infrastructure.compact.domain.NewEntityState",displayState:null,ownerName:"admin",ownerId:1,objectCreateTime:"2021-06-04T02:51:44.000+0000",objectModifierName:"admin",objectModificationTime:"2021-06-05T06:24:43.000+0000",permission:0,belongTo:null,departmentId:null,tenantId:null,dataSource:null,objectId:null,status:0,title:"去过荔湾区未做核酸检测人数（5/9~5/30）",appInfoId:3040409,appInfoName:"城市运行监控平台",panelItemDomainIds:[],panelItemDomainList:[],thumbnailFile:null,itemType:"BAR",sortOrder:1,subtitle1:null,subtitle2:null,description:"",interfaceUrl:"http://develop.iot-cas.com:8081/screen/yqfk-ryld/near7DayLwNotHS",itemUrl:"",picUrl:null,panelItemData:null,departmentDTOS:null,dataVersion:"2.0.0",optionData:"",code:"near7DayLwNotHS",source:null,updateTime:null},{secureObjectType:null,id:3991872,state:"cn.ac.iscas.gz.ecafe.infrastructure.compact.domain.NewEntityState",displayState:null,ownerName:"admin",ownerId:1,objectCreateTime:"2021-06-02T12:21:35.000+0000",objectModifierName:"admin",objectModificationTime:"2021-06-02T15:14:57.000+0000",permission:0,belongTo:null,departmentId:null,tenantId:null,dataSource:null,objectId:null,status:0,title:"外籍人员检测人次月",appInfoId:3040409,appInfoName:"城市运行监控平台",panelItemDomainIds:[],panelItemDomainList:[],thumbnailFile:null,itemType:"BAR",sortOrder:1,subtitle1:null,subtitle2:null,description:"111",interfaceUrl:"http://develop.iot-cas.com:8081/screen/web/chart/getWjryjcMonth",itemUrl:"",picUrl:null,panelItemData:null,departmentDTOS:[{secureObjectType:null,id:106036,state:"cn.ac.iscas.gz.ecafe.infrastructure.compact.domain.NewEntityState",displayState:null,ownerName:null,ownerId:null,objectCreateTime:"2019-09-05T06:08:48.000+0000",objectModifierName:"admin",objectModificationTime:"2019-12-03T10:14:56.000+0000",permission:0,belongTo:null,departmentId:null,tenantId:112102,dataSource:null,objectId:null,status:0,departmentCode:null,departmentName:"广州市南沙区人民政府",departmentSimpleName:"nsgov",departmentAddress:"广州市南沙区凤凰大道1号",departmentType:null,departmentLevel:null,departmentNode:10,parentDepartmentId:null,parentDepartmentName:null,parentDepartmentType:null,managerIds:null,managerNames:null,belongtoArea:null,belongtoAreaCode:null,superviseArea:null,sortOrder:0,description:null,isParent:!0,subDepartmentDTOs:[],members:null,relationCode:"#106036#",belongtoCompanyId:null,belongtoCompanyName:null,selected:!1,nodeType:null}],dataVersion:"2.0.0",optionData:"",code:"getWjryjcMonth",source:null,updateTime:null},{secureObjectType:null,id:3991870,state:"cn.ac.iscas.gz.ecafe.infrastructure.compact.domain.NewEntityState",displayState:null,ownerName:"admin",ownerId:1,objectCreateTime:"2021-06-02T12:20:37.000+0000",objectModifierName:"admin",objectModificationTime:"2021-06-03T13:44:36.000+0000",permission:0,belongTo:null,departmentId:null,tenantId:null,dataSource:null,objectId:null,status:0,title:"外籍人员检测人次周",appInfoId:3040409,appInfoName:"城市运行监控平台",panelItemDomainIds:[],panelItemDomainList:[],thumbnailFile:null,itemType:"BAR",sortOrder:1,subtitle1:null,subtitle2:null,description:"",interfaceUrl:"http://develop.iot-cas.com:8081/screen/web/chart/getWjryjcWeek",itemUrl:"",picUrl:null,panelItemData:null,departmentDTOS:[{secureObjectType:null,id:106036,state:"cn.ac.iscas.gz.ecafe.infrastructure.compact.domain.NewEntityState",displayState:null,ownerName:null,ownerId:null,objectCreateTime:"2019-09-05T06:08:48.000+0000",objectModifierName:"admin",objectModificationTime:"2019-12-03T10:14:56.000+0000",permission:0,belongTo:null,departmentId:null,tenantId:112102,dataSource:null,objectId:null,status:0,departmentCode:null,departmentName:"广州市南沙区人民政府",departmentSimpleName:"nsgov",departmentAddress:"广州市南沙区凤凰大道1号",departmentType:null,departmentLevel:null,departmentNode:10,parentDepartmentId:null,parentDepartmentName:null,parentDepartmentType:null,managerIds:null,managerNames:null,belongtoArea:null,belongtoAreaCode:null,superviseArea:null,sortOrder:0,description:null,isParent:!0,subDepartmentDTOs:[],members:null,relationCode:"#106036#",belongtoCompanyId:null,belongtoCompanyName:null,selected:!1,nodeType:null}],dataVersion:"2.0.0",optionData:"",code:"getWjryjcWeek",source:null,updateTime:null}],beginDatetime:null,endDatetime:null}},t=e.data;this.page.pageNum=t.pageNumber,this.page.pageSize=t.pageSize,this.page.rowTotal=t.rowTotal,this.data=t.dataList},filterData:function(){this.page.pageNum=1,this.filter_params=Object.assign(this.filter),this.getData()},selectReport:function(e){this.$emit("select",e),this.$emit("toggle",!1)},handleSizeChange:function(e){this.page.pageSize=e,this.getData()},handleCurrentChange:function(e){this.page.pageNum=e,this.getData()},getThumbnail:function(e){return Ne(e)}}},Ye=Ze,Xe=(i("b1e9"),Object(d["a"])(Ye,ze,Be,!1,null,null,null)),Ke=Xe.exports;function $e(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function Qe(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){$e(a,n,r,o,s,"next",e)}function s(e){$e(a,n,r,o,s,"throw",e)}o(void 0)}))}}var Je={name:"ReportLayer",components:{ReportList:Ke,DataBoard:De},props:{dashboardCode:{type:String,default:"Index"},titleLeft:{type:String},titleRight:{type:String},slots:{type:String},leftWidth:{type:String,default:"398px"},rightWidth:{type:String,default:"398px"},hotelType:{type:Object},hotelData:{type:Array}},data:function(){return{id:null,layout:{left:[],right:[]},oldLayout:{},folder:{left:!1,right:!1},chartListVisible:!1,editPosition:{isNew:!1,fieldName:null,index:null},enableClickSave:!0}},computed:{isEdit:function(){return!1},isSaving:function(){return!1},isCancel:function(){return!1}},watch:{isSaving:function(e){var t=this;return Qe(o.a.mark((function i(){return o.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(1!=e){i.next=3;break}return i.next=3,t.handleSave();case 3:case"end":return i.stop()}}),i)})))()},isCancel:function(e){1==e&&this.handleCancel()}},mounted:function(){this.getLayout()},methods:{getLayout:function(){var e={dashboardList:[{id:"zjqtljqs",xAxisPosition:1,yAxisPosition:1,name:"密接/次密接累计趋势",countCode:"qmrsljqs",height:150},{id:"wlqtjcglrstb",xAxisPosition:1,yAxisPosition:2,name:"未来7天预计解除隔离",countCode:"wlqtjctj",height:160},{id:"jdgltjtb",xAxisPosition:1,yAxisPosition:3,name:"隔离酒店统计",countCode:"gljdtj",height:200},{id:"getDaysNulacid",xAxisPosition:2,yAxisPosition:1,name:"核酸检测人数",height:140,updateTimeType:"hs",navBar:[{name:"日",id:"getDaysNulacid"},{name:"周",id:"getWeeksNulacid"},{name:"月",id:"getMonthsNulacid"}],countCode:"hsjczrs"},{id:"ymjzfb",xAxisPosition:2,yAxisPosition:2,name:"户籍人口疫苗接种分布",updateTimeType:"ym",height:280},{xAxisPosition:2,yAxisPosition:3,list:[{id:"rjczcy",xAxisPosition:2,yAxisPosition:3,name:"入境/入港船只统计",height:200},{id:"rgczcy",xAxisPosition:2,yAxisPosition:3,name:"入境/入港船员统计",height:200}],height:200}]},t=[],i=[];null!==e.dashboardList&&e.dashboardList.forEach((function(e,n){var r={id:e.id,i:Object(c["c"])(),w:1,h:1,x:e.xAxisPosition,y:e.yAxisPosition,name:e.name,height:e.height?parseInt(e.height):"",api:e.api,updateTimeType:e.updateTimeType||"",list:e.list||null,countCode:e.countCode||"",navBar:e.navBar||[]};2===e.xAxisPosition?i.push(r):t.push(r)})),this.layout.left=t,this.layout.right=i},editChart:function(e,t){this.chartListVisible=!0,this.editPosition={fieldName:e,index:t,isNew:!1}},addChart:function(e,t){this.chartListVisible=!0,this.editPosition={fieldName:e,index:t,isNew:!0}},delChart:function(e,t){this.layout[e].splice(t,1)},confirmItem:function(e){var t=this.editPosition,i=t.fieldName,n=t.index,r=t.isNew;if(r){var a={id:e.id,i:Object(c["c"])(),w:1,h:1,x:"left"==i?0:1,y:n};this.layout[i].splice(n,0,a)}else{var o=Object.assign({},this.layout[i][n]);o.id=e.id,o.i=Object(c["c"])(),this.layout[i].splice(n,1,o)}},handleEdit:function(){},handleCancel:function(){1==this.isLayoutChanged()&&(this.layout=this.oldLayout)},handleSave:function(){var e=this;return new Promise((function(t,i){if(0==e.isLayoutChanged())return e.$message({message:"当前仪表盘没有做任何改动，无需保存",type:"warning",onClose:function(){e.enableClickSave=!0}}),e.enableClickSave=!1,void t();var n=[];Object.keys(e.layout).map((function(t){e.layout[t].forEach((function(e){e.id&&n.push({panelItemId:e.id,height:e.w,width:e.w,xAxisPosition:e.x,yAxisPosition:e.y})}))})),Re({id:e.id,dashboardList:n,appCode:C["a"].CODE,dashboardCode:e.dashboardCode}).then((function(i){e.$message({message:"图表布局保存成功",type:"success"}),t()}))}))},isLayoutChanged:function(){return JSON.stringify(this.layout)!==JSON.stringify(this.oldLayout)},toggleSidebar:function(e){this.folder[e]=!this.folder[e]}}},et=Je,tt=(i("a66e"),i("3a07"),Object(d["a"])(et,m,g,!1,null,null,null)),it=tt.exports,nt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"map"},[i("gd-map",{ref:"map",attrs:{config:e.mapConfig},on:{layerClickEvent:e.layerClickEvent,zoomend:e.zoomend}})],1)},rt=[],at=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"gdMap",staticClass:"gd-map",attrs:{id:"gdMap"}})},ot=[],st=i("fc93"),lt=i("068a");function ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return new Promise((function(i,n){if(ut(e)||ht(t)){var r=document.createElement("script");r.charset="utf-8",r.src=e,r.addEventListener?r.addEventListener("load",(function(){t(),i()}),!1):r.attachEvent&&r.attachEvent("onreadystatechange",(function(){var e=window.event.srcElement;"loaded"===e.readyState&&(t(),i())})),document.head.appendChild(r)}}))}function ut(e){return"string"===typeof e}function ht(e){return"function"===typeof e}function dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ft(e,t,i){return t&&pt(e.prototype,t),i&&pt(e,i),e}var mt=function(){function e(t,i,n,r){dt(this,e);var a=new window.Loca.RoundPointLayer({map:t,eventSupport:!0});a.setOptions(i),a.setData(n,{lnglat:function(e){var t=e.value;return[t.longitude,t.latitude]}}),a.render(),i.isSetView&&a.setFitView(),this.layer=a,this.layer.on("click",r)}return ft(e,[{key:"delLayer",value:function(){this.layer.setMap(null)}}]),e}();function gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yt(e,t,i){return t&&vt(e.prototype,t),i&&vt(e,i),e}var _t=function(){function e(t,i,n,r){gt(this,e);var a=new window.Loca.IconLayer({map:t,eventSupport:!0});a.setOptions(i),a.setData(n,{lnglat:function(e){var t=e.value;return[t.longitude,t.latitude]}}),a.render(),i.isSetView&&a.setFitView(),this.layer=a,this.layer.on("click",r)}return yt(e,[{key:"delLayer",value:function(){this.layer.setMap(null)}}]),e}();function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wt(e,t,i){return t&&xt(e.prototype,t),i&&xt(e,i),e}var Tt=function(){function e(t,i,n){bt(this,e),this.map=t;var r=[];n.forEach((function(e){var n=Object.assign({},{map:t,path:e.coordinates},i);r.push(new window.AMap.Polygon(n))})),this.layer=r}return wt(e,[{key:"delLayer",value:function(){this.map.remove(this.layer)}}]),e}();function St(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ct(e,t,i){return t&&Ot(e.prototype,t),i&&Ot(e,i),e}var kt=function(){function e(t,i,n){var r=this;St(this,e),this.map=t,this.markerObjs=[],n.forEach((function(e){var i=Object.assign({},e,{map:t});r.markerObjs.push(new window.AMap.Marker(i))}))}return Ct(e,[{key:"delLayer",value:function(){var e=this;this.markerObjs.forEach((function(t){e.map.remove(t)}))}}]),e}();function Pt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Et(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(i),!0).forEach((function(t){At(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Pt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function At(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function It(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dt(e,t,i){return t&&Mt(e.prototype,t),i&&Mt(e,i),e}var jt=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;It(this,e),this.map=t,this.heatMap={};var r=this;this.map.plugin(["AMap.Heatmap"],(function(){r.heatMap=new window.AMap.Heatmap(t,Et({radius:35,opacity:[0,.6],gradient:{.5:"blue",.65:"rgb(117,211,248)",.7:"rgb(0, 255, 0)",.9:"#ffea00",1:"red"}},i)),r.heatMap.setDataSet({data:n,max:20})}))}return Dt(e,[{key:"delLayer",value:function(){this.map.remove(this.heatMap)}}]),e}();function Lt(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function Rt(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Lt(a,n,r,o,s,"next",e)}function s(e){Lt(a,n,r,o,s,"throw",e)}o(void 0)}))}}var Nt={name:"Gdmap",props:{config:{type:Object,default:function(){return st}},url:{type:Object,default:function(){return lt}}},data:function(){return{layerData:[],layerType:{roundPointLayer:mt,iconLayer:_t,polygon:Tt,marker:kt,heatmap:jt}}},methods:{init:function(){var e=this;return Rt(o.a.mark((function t(){var i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("gdmap init"),i=window.location.protocol,window.AMap){t.next=5;break}return t.next=5,ct(i+e.url.gd.url);case 5:if(window.Loca){t.next=8;break}return t.next=8,ct(i+e.url.loca.url);case 8:e.createMap().on("complete",(function(){e.layerData.forEach((function(t,i){e.setMapData(t.layerData,t.layerConfig,i)})),e.config.AMap.on("zoomend",(function(t){var i=e.config.AMap.getZoom();e.$emit("zoomend",i)}))}));case 9:case"end":return t.stop()}}),t)})))()},setMapData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.layerData[n]&&this.layerData[n].layer&&this.layerData[n].layer.delLayer(),i){if(this.layerData[n]={layerData:t,layerConfig:i},window.Loca&&window.AMap){var r=function(t){e.$emit("layerClickEvent",t.rawData)};i.zIndex=n;var a=new this.layerType[i.type](this.config.AMap,i,t,r);this.layerData[n].layer=a}}else this.layerData[n]=null},setZoomAndCenter:function(e,t){this.config.AMap.setZoomAndCenter(e,t)},createMap:function(){return this.config.container=this.$refs["gdMap"],this.config.AMap=new window.AMap.Map(this.config.container,this.config.conf),this.config.AMap},destroyMap:function(){this.config.AMap&&this.config.AMap.destroy()}},mounted:function(){var e=this;return Rt(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.init();case 1:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.destroyMap()}},zt=Nt,Bt=(i("946e"),Object(d["a"])(zt,at,ot,!1,null,"3eb957b5",null)),Vt=Bt.exports,Ft=i("2f62"),Ut=i("4360"),Gt=i("41fc");function Ht(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Wt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(i),!0).forEach((function(t){qt(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ht(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function qt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Zt={name:"mapLayer",props:["mapData","mapModel"],components:{GdMap:Vt},computed:Wt({},Object(Ft["b"])("global",["themeData"])),watch:{mapData:{handler:function(e,t){this.setMapData(!0),console.log(e)},deep:!0},mapZoom:function(e,t){var i=12;e>i&&"roundPointLayer"===this.layerType?(this.layerType="iconLayer",this.setMapData(!1)):e<=i&&"iconLayer"===this.layerType&&(this.layerType="roundPointLayer",this.setMapData(!1))}},data:function(){var e=12;return{mapConfig:{instance:null,container:null,AMap:null,conf:{center:[113.554668,22.720674],resizeEnable:!0,zooms:[3,20],viewMode:"3D",defaultCursor:"default",pitch:45,mapStyle:Ut["a"].state.global.themeData.mapStyle,expandZoomRange:!0,rotation:0,zoom:e}},mapZoom:e,layerType:""}},mounted:function(){this.$refs.map.setMapData(Gt,{type:"polygon",fillOpacity:"0",strokeColor:"#b6eced",strokeWeight:2},0)},methods:{setMapData:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=function(n){t.$refs.map.setMapData(n,{isSetView:e,type:"iconLayer",source:function(e){return"gald"===e.value.type?i("f423"):"./static/mapIcon/Hotel_m_".concat(e.value.type,".png")},style:{size:30},selectStyle:{size:26},fitView:!0},2)};this.$refs.map.setMapData(this.mapData.heatMapData,{type:"heatmap"},10),0===this.mapModel?this.$refs.map.setMapData(this.mapData.markers,{type:"marker"},2):n(this.mapData.markers)},layerClickEvent:function(e){this.$emit("layerClickEvent",e)},zoomend:function(e){this.mapZoom=e},addEventMarker:function(e,t){var i='<transition><div class="alarm-marker animated zoomIn" onclick="mapItemClick(event)" extData='.concat(JSON.stringify(t),'><img src="./static/mapIcon/event-alram.svg" /></div></transition>'),n={isSetView:!0,content:i,position:e,size:[30,36],offset:new AMap.Pixel(-15,-18)};console.log([n]),this.$refs.map.setMapData([n],{type:"marker"},4),this.$refs.map.setZoomAndCenter(14,[e[0],parseFloat(e[1])+.01])},deleteEventMarker:function(){this.$refs.map.setMapData([],{type:"marker"},4)}}},Yt=Zt,Xt=(i("32f1"),Object(d["a"])(Yt,nt,rt,!1,null,"180f7b48",null)),Kt=Xt.exports,$t=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"arcgis-layer"},[i("div",{staticClass:"viewDiv",attrs:{id:"viewDiv2"}}),i("div",{staticClass:"layer-list"},[e._l(e.layerList,(function(t,n){return i("div",{key:t.id,staticClass:"rbtn",class:{active:t.active,arrow:t.arrowList},on:{click:function(t){return e.toggleLayer(n)}}},[i("div",{staticClass:"rbtn-label"},[e._v(e._s(t.label))]),"goods"==t.id?i("i",{staticClass:"el-icon-document ico",on:{click:e.showGoodsTable}}):e._e(),"door"===t.id&&t.showArrow?i("div",{staticClass:"rbtn-right-wrapper"},e._l(t.arrowList,(function(t){return i("div",{key:t.id,staticClass:"rbtn-right-item",class:{active:e.doorType===t.id},on:{click:function(i){return i.stopPropagation(),e.handleClickArrowItem(t,n)}}},[i("span",[e._v(e._s(t.label)+" ("+e._s(t.total)+")")])])})),0):e._e()])})),i("div",{staticClass:"rbtn arrow",class:{active:e.viewVideoList.active},on:{click:e.viewList}},[i("div",{staticClass:"rbtn-label"},[e._v(e._s(e.viewVideoList.label))])])],2),e.cameraListVisible?i("div",{staticClass:"camera-list"},e._l(e.videoList,(function(t,n){return i("div",{key:n,staticClass:"item",on:{click:function(i){return e.viewCamera(t)}}},[i("span",[e._v(e._s(n+1)+". "+e._s(t.deviceName))])])})),0):e._e(),i("patient-detail",{attrs:{id:e.patientDetailId},model:{value:e.patientDetailVisible,callback:function(t){e.patientDetailVisible=t},expression:"patientDetailVisible"}}),i("device-detail",{attrs:{attributes:e.deviceInfo},model:{value:e.deviceVisible,callback:function(t){e.deviceVisible=t},expression:"deviceVisible"}}),i("goods-detail",{model:{value:e.goodsDetailVisible,callback:function(t){e.goodsDetailVisible=t},expression:"goodsDetailVisible"}}),i("door-list",{attrs:{data:e.currentDoor},model:{value:e.doorListVisible,callback:function(t){e.doorListVisible=t},expression:"doorListVisible"}}),i("floating-panel-layer"),i("arcgis-gald",{ref:"gald"}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.currTip,expression:"currTip"}],staticClass:"map-point-tip",style:e.currTipStyle},[e._v(e._s(e.currTip))])],1)},Qt=[],Jt=i("bc3a"),ei=i.n(Jt),ti=i("6d1b"),ii=i("8d60"),ni=i("a611"),ri=i("2650"),ai=i("5996"),oi=i("4ae5"),si=(i("f6ad"),i("ce0b")),li=i("5bd5"),ci=i("c246"),ui=i("a4ee"),hi=(i("c120"),i("e92d")),di=i("59b2"),pi=i("4adc"),fi=i("1a3e"),mi=i("d386"),gi=(i("e041"),i("8eed"),i("f402"),i("9d83")),vi=i("2c4f"),yi=i("255d"),_i=(i("1b8f"),i("702a")),bi=i("755e"),xi=i("feab"),wi=i("26fd"),Ti=i("121a"),Si=(i("cea0"),i("fc29")),Oi=i("c9fb");let Ci=class extends Si["a"]{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1}};Object(ui["a"])([Object(di["b"])({constructOnly:!0})],Ci.prototype,"layer",void 0),Object(ui["a"])([Object(di["b"])()],Ci.prototype,"enabled",void 0),Object(ui["a"])([Object(di["b"])()],Ci.prototype,"updating",void 0),Object(ui["a"])([Object(di["b"])()],Ci.prototype,"availability",void 0),Ci=Object(ui["a"])([Object(mi["a"])("esri.views.interactive.snapping.SnappingLayerSource")],Ci);var ki=Ci,Pi=ki;let Ei=class extends Si["a"]{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.featureSources=new vi["a"],this.distance=Oi["a"].distance,this.touchSensitivityMultiplier=Oi["a"].touchSensitivityMultiplier}get effectiveEnabled(){return this.enabledToggled?!this.enabled:this.enabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}};Object(ui["a"])([Object(di["b"])()],Ei.prototype,"enabled",void 0),Object(ui["a"])([Object(di["b"])()],Ei.prototype,"enabledToggled",void 0),Object(ui["a"])([Object(di["b"])()],Ei.prototype,"selfEnabled",void 0),Object(ui["a"])([Object(di["b"])()],Ei.prototype,"featureEnabled",void 0),Object(ui["a"])([Object(di["b"])({type:vi["a"].ofType(Pi)})],Ei.prototype,"featureSources",void 0),Object(ui["a"])([Object(di["b"])()],Ei.prototype,"distance",void 0),Object(ui["a"])([Object(di["b"])()],Ei.prototype,"touchSensitivityMultiplier",void 0),Object(ui["a"])([Object(di["b"])({readOnly:!0})],Ei.prototype,"effectiveEnabled",null),Object(ui["a"])([Object(di["b"])({readOnly:!0})],Ei.prototype,"effectiveSelfEnabled",null),Object(ui["a"])([Object(di["b"])({readOnly:!0})],Ei.prototype,"effectiveFeatureEnabled",null),Ei=Object(ui["a"])([Object(mi["a"])("esri.views.interactive.snapping.SnappingOptions")],Ei);var Ai=Ei,Ii=Ai,Mi=i("b2b2"),Di=i("ce50"),ji=i("f4cc"),Li=i("32ed"),Ri=(i("e06a"),i("ce6d")),Ni=i("4cac"),zi=i("a915"),Bi=i("db52"),Vi=i("0d76"),Fi=i("4dc9"),Ui=i("1fd7"),Gi=i("af40"),Hi=i("3795"),Wi=i("f694"),qi=i("2589"),Zi=i("7aa6"),Yi=i("412f"),Xi=i("1a54"),Ki=i("1381"),$i=i("8b1a6"),Qi=i("6ae9"),Ji=i("27df"),en=i("1f1c");let tn=class extends Ri["a"].EventedAccessor{constructor(e){var t;super(e),this._hasZ=null,this._snappingTask=null,this._stagedVertex=null,this._stagedVertexUnsnapped=null,this._lastVertexUnsnapped=null,this._nativeEventHistory={undoStack:[],redoStack:[]},this.interactiveUndoDisabled=!1,this.history=[],this.redoHistory=[],this.snapToScene=!1,this.view=null,this.elevationInfo=null,this.defaultZ=0,this._coordinateHelper=Object($i["a"])(e.hasZ,!1,e.view.spatialReference,"local"),this._snappingManager=e.snappingManager,this._editGeometry=new Ji["a"](new Qi["c"](this._coordinateHelper),null!=(t=e.editGeometryType)?t:"polygon"),this._snappingContext=new en["a"]({geometry:this._editGeometry,elevationInfo:{mode:"on-the-ground",offset:0},pointer:"mouse",visualizer:new Ki["a"]}),this._activeComponent=new Qi["a"](this._editGeometry.editGeometry),this._editGeometry.editGeometry.components.push(this._activeComponent)}destroy(){this._snappingTask=Object(Mi["a"])(this._snappingTask),Object(Mi["k"])(this._snappingManager)&&this._snappingManager.doneSnapping(),this._editGeometry.destroy()}get _committedVertices(){return this._editGeometry.editGeometry.components[0].vertices.map(e=>e.pos)}get vertices(){return Object(Mi["k"])(this._stagedVertex)?[...this._committedVertices,this._coordinateHelper.pointToArray(this._stagedVertex)]:this._committedVertices}get hasZ(){return Object(Mi["k"])(this._hasZ)?this._hasZ:"3d"===this.view.type}set hasZ(e){this._hasZ=e,this.notifyChange("hasZ")}canUndo(){return this._editGeometry.editGeometry.canUndo}canRedo(){return this._editGeometry.editGeometry.canRedo}undo(){this.canUndo()&&this._editGeometry.undo()}redo(){this.canRedo()&&this._editGeometry.redo()}getCoordsFromScreenPoint(e){const t=this.screenToMap(e);return Object(Mi["k"])(t)?t.hasZ?[t.x,t.y,t.z]:[t.x,t.y]:null}getCoordsAndPointFromScreenPoint(e){const t=this.screenToMap(e);return Object(Mi["k"])(t)?t.hasZ?{vertex:[t.x,t.y,t.z],mapPoint:t}:{vertex:[t.x,t.y],mapPoint:t}:null}_pushCursorVertex(e){const t=Object(Xi["d"])(e[0],e[1],null,this.view.spatialReference);this._stagedVertexUnsnapped=t,Object(Mi["j"])(this._snappingManager)?this._stagedVertex=t:(this._stagedVertex=this._snappingManager.update(t,this._snappingContext),this._snappingTask=Object(ji["h"])(async e=>{if(Object(Mi["k"])(this._snappingManager)){const i=await this._snappingManager.snap(t,this._snappingContext,e);return i.valid&&(this._stagedVertex=i.apply(),this.notifyChange("vertices")),i}return null}))}_popCursorVertex(){this._stagedVertex=null,this._stagedVertexUnsnapped=null,this.notifyChange("vertices")}getGeometryZValue(){return this.defaultZ}screenToMap(e){let t=null;if("3d"===this.view.type)if(this.hasZ){const i=Object(Mi["r"])(this.elevationInfo,nn);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(zi["f"])(e.x,e.y),i,this.getGeometryZValue())}else{const i=Object(Mi["r"])(this.elevationInfo,rn);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(zi["f"])(e.x,e.y),i,0),Object(Mi["k"])(t)&&(t.z=void 0)}else t=this.view.toMap(e),Object(Mi["k"])(t)&&(t.z=this.hasZ?this.getGeometryZValue():void 0);return t}_isDuplicateOfLastVertex(e){const t=this._editGeometry.editGeometry.components[0].getLastVertex();if(Object(Mi["k"])(t)&&e[0]===t[0]&&e[1]===t[1])return!0;const{x:i,y:n}=this._coordinateHelper.createDehydratedPoint(e);return!(!Object(Mi["k"])(this._lastVertexUnsnapped)||i!==this._lastVertexUnsnapped.x||n!==this._lastVertexUnsnapped.y)}};Object(ui["a"])([Object(di["b"])({readOnly:!0})],tn.prototype,"vertices",null),Object(ui["a"])([Object(di["b"])({type:Boolean,nonNullable:!0})],tn.prototype,"interactiveUndoDisabled",void 0),Object(ui["a"])([Object(di["b"])({readOnly:!0})],tn.prototype,"history",void 0),Object(ui["a"])([Object(di["b"])({readOnly:!0})],tn.prototype,"redoHistory",void 0),Object(ui["a"])([Object(di["b"])()],tn.prototype,"snapToScene",void 0),Object(ui["a"])([Object(di["b"])()],tn.prototype,"view",void 0),Object(ui["a"])([Object(di["b"])()],tn.prototype,"elevationInfo",void 0),Object(ui["a"])([Object(di["b"])({nonNullable:!0})],tn.prototype,"defaultZ",void 0),Object(ui["a"])([Object(di["b"])()],tn.prototype,"hasZ",null),tn=Object(ui["a"])([Object(mi["a"])("esri.views.draw.DrawAction")],tn);const nn={mode:"absolute-height",offset:0},rn={mode:"on-the-ground",offset:0};var an=tn,on=an;class sn{constructor(e,t,i,n){this.view=e,this.native=t,this.vertexIndex=i,this.vertices=n,this.defaultPrevented=!1,this.type="vertex-add"}preventDefault(){this.defaultPrevented=!0}}class ln{constructor(e,t,i,n){this.view=e,this.native=t,this.vertexIndex=i,this.vertices=n,this.defaultPrevented=!1,this.type="vertex-remove"}preventDefault(){this.defaultPrevented=!0}}class cn{constructor(e,t,i,n,r=null){this.view=e,this.native=t,this.vertexIndex=i,this.vertices=n,this.mapPoint=r,this.coordinates=null,this.defaultPrevented=!1,this.type="cursor-update",this.coordinates=1===n.length?n[0]:null}preventDefault(){this.defaultPrevented=!0}}class un{constructor(e,t){this.native=e,this.vertices=t,this.coordinates=null,this.defaultPrevented=!1,this.type="draw-complete",this.coordinates=1===t.length?t[0]:null}preventDefault(){this.defaultPrevented=!0}}const hn={drawCompleteKey:"c",redoKey:"r",undoKey:"z",vertexAddKey:"f",panKey:" "};let dn=class extends on{constructor(e){super(e),this._cursorScreenPoint=null,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this._activePointerId=null,this._viewHandles=new Gi["a"],this._undoRedoHandles=new Gi["a"]}initialize(){this._addViewHandles(),this._addUndoRedoHandles()}destroy(){this._removeViewHandles(),this._viewHandles.destroy(),this._removeUndoRedoHandles(),this._undoRedoHandles.destroy(),this.emit("destroy")}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this._completeDrawing()}_addViewHandles(){this._removeViewHandles(),this._viewHandles.add([this.view.on("click",e=>{e.stopPropagation()},qi["b"].TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Object(Yi["a"])(e),"touch"===e.pointerType&&this._updateCursor(e.native))},qi["b"].TOOL),this.view.on("pointer-move",e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._snappingTask=Object(Mi["a"])(this._snappingTask),this._cursorScreenPoint=Object(Yi["a"])(e),"touch"!==e.pointerType&&this._updateCursor(e.native)},qi["b"].TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._addVertexOnPointerUp=!1)},qi["b"].TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._activePointerId=null,this._addVertexOnPointerUp)this._vertexAddHandler(e);else{const t="touch"===e.pointerType;this._updateCursor(e.native,t)}},qi["b"].TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},qi["b"].TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},qi["b"].TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},qi["b"].TOOL),this.view.on("key-down",e=>{const{key:t,repeat:i}=e;t===hn.vertexAddKey&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._snappingTask=Object(Mi["a"])(this._snappingTask),this._vertexAddHandler(e)):t===hn.drawCompleteKey&&!i&&this._cursorScreenPoint&&this.vertices.length>2?(e.stopPropagation(),this._snappingTask=Object(Mi["a"])(this._snappingTask),this._vertexAddHandler(e),this._drawCompleteHandler(e)):t!==hn.undoKey||this.interactiveUndoDisabled||i?t!==hn.redoKey||this.interactiveUndoDisabled||i?t!==hn.panKey||i||e.stopPropagation():(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo())},qi["b"].TOOL),this.view.on("key-up",e=>{e.key===hn.panKey&&e.stopPropagation()},qi["b"].TOOL)])}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",e=>{if(this.notifyChange("vertices"),"undo"===e.operation){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];Object(Mi["k"])(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new ln(this.view,t,e.vertices[0].index,i))}}),this._editGeometry.on("vertex-add",e=>{if(this.notifyChange("vertices"),"apply"===e.operation){const e=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],t=this._committedVertices.length-1,i=new sn(this.view,e,t,this.vertices);this.emit("vertex-add",i),i.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if("redo"===e.operation){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];Object(Mi["k"])(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new sn(this.view,t,e.vertices[0].index,i))}})])}_removeViewHandles(){this._viewHandles.removeAll()}_removeUndoRedoHandles(){this._undoRedoHandles.removeAll()}_addVertex(e,t){const i=this._coordinateHelper.fromArray(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(i);const n=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(n)}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(Mi["k"])(i)&&!t){this._pushCursorVertex(i.vertex);const t=()=>new cn(this.view,e,this._activeComponent.vertices.length,this.vertices,Object(Mi["k"])(this._stagedVertex)?new oi["a"](this._stagedVertex):null);this.emit("cursor-update",t()),Object(Mi["k"])(this._snappingTask)&&this._snappingTask.promise.then(e=>{e.valid&&this.emit("cursor-update",t())},()=>{})}}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._snappingTask=Object(Mi["a"])(this._snappingTask),Object(Mi["k"])(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<2)return;const t=new un(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}_shouldHandlePointerEvent(e){return pn(e)&&(Object(Mi["j"])(this._activePointerId)||this._activePointerId===e.pointerId)}_vertexAddHandler(e){const t=Object(Mi["k"])(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(Mi["k"])(t)&&this._addVertex(t,e.native)}_drawCompleteHandler(e){this._completeDrawing(e.native)}};function pn(e){return"mouse"!==e.pointerType||0===e.button}dn=Object(ui["a"])([Object(mi["a"])("esri.views.draw.MultipointDrawAction")],dn);Object.freeze({__proto__:null,get MultipointDrawAction(){return dn}});var fn=i("e20b"),mn=i("6469"),gn=i("025c"),vn=i("4772");let yn=class extends(Ri["a"].EventedMixin(vn["a"])){constructor(e){super(e),this.drawOperation=null,this.hasZ=!0,this.defaultZ=0,this.elevationInfo=null,this.snapToScene=null,this.mode=null,this.geometryType=null,this.type="draw-3d"}initialize(){const e=Object(Mi["r"])(this.elevationInfo,{mode:this.hasZ?"absolute-height":"on-the-ground",offset:0});this.drawOperation=new mn["a"]({view:this.view,manipulators:this.manipulators,geometryType:this.geometryType,drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,snappingDrawSurface:new gn["b"](this.view,e),elevationDrawSurface:new gn["a"](e,this.defaultZ,this.view),hasM:!1,elevationInfo:e}),this.drawOperation.on("vertex-add",e=>this.onVertexAdd(e)),this.drawOperation.on("vertex-remove",e=>this.onVertexRemove(e)),this.drawOperation.on("vertex-update",e=>this.onVertexUpdate(e)),this.drawOperation.on("cursor-update",e=>this.onCursorUpdate(e)),this.drawOperation.on("complete",e=>this.onComplete(e))}destroy(){this.drawOperation.destroy(),this.drawOperation=null,this._set("view",null)}onInputEvent(e){this.drawOperation.onInputEvent(e)}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}reset(){}get canRedo(){return this.drawOperation.canRedo}redo(){this.drawOperation.redo()}get canUndo(){return this.drawOperation.canUndo}undo(){this.drawOperation.undo()}completeCreateOperation(){this.drawOperation.complete()}activate(){}deactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}getVertexCoords(){return this.drawOperation.vertices}onVertexAdd(e){this.emit("vertex-add",e)}onVertexRemove(e){this.emit("vertex-remove",e)}onVertexUpdate(e){this.emit("vertex-update",e)}onCursorUpdate(e){this.emit("cursor-update",e)}onComplete(e){this.emit("complete",e)}};Object(ui["a"])([Object(di["b"])({constructOnly:!0,nonNullable:!0})],yn.prototype,"view",void 0),Object(ui["a"])([Object(di["b"])({value:!0})],yn.prototype,"enabled",null),Object(ui["a"])([Object(di["b"])({constructOnly:!0})],yn.prototype,"hasZ",void 0),Object(ui["a"])([Object(di["b"])({constructOnly:!0,nonNullable:!0})],yn.prototype,"defaultZ",void 0),Object(ui["a"])([Object(di["b"])({constructOnly:!0})],yn.prototype,"elevationInfo",void 0),Object(ui["a"])([Object(di["b"])()],yn.prototype,"snapToScene",void 0),Object(ui["a"])([Object(di["b"])({constructOnly:!0})],yn.prototype,"mode",void 0),Object(ui["a"])([Object(di["b"])({constructOnly:!0})],yn.prototype,"geometryType",void 0),Object(ui["a"])([Object(di["b"])({readOnly:!0})],yn.prototype,"type",void 0),yn=Object(ui["a"])([Object(mi["a"])("esri.views.3d.interactive.editingTools.draw.DrawTool")],yn);let _n=class extends on{constructor(e){super(e),this._cursorScreenPoint=null,this._addVertexOnPointerUp=!1,this._activePointerId=null,this._viewHandles=new Gi["a"]}initialize(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool(this.view)}destroy(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy()):this._removeDrawTool(),this.emit("destroy")}get coordinates(){return Object(fn["c"])(hi["a"].getLogger("esri.views.draw.PointDrawAction"),"coordinates",{replacement:"vertices",version:"4.19"}),this.vertices[0]}complete(){"2d"===this.view.type?this._cursorScreenPoint&&this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._viewHandles.add([this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Object(Yi["a"])(e),"touch"===e.pointerType&&this._updateCursor(e.native))},qi["b"].TOOL),this.view.on("pointer-move",e=>{this._snappingTask=Object(Mi["a"])(this._snappingTask),this._cursorScreenPoint=Object(Yi["a"])(e),"touch"!==e.pointerType&&this._updateCursor(e.native)},qi["b"].TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._addVertexOnPointerUp=!1)},qi["b"].TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._activePointerId=null,this._addVertexOnPointerUp)e.stopPropagation(),this._vertexAddHandler();else{const t="touch"===e.pointerType;this._updateCursor(e.native,t)}},qi["b"].TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},qi["b"].TOOL),this.view.on("key-down",e=>{e.key===hn.drawCompleteKey&&this._cursorScreenPoint&&(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._vertexAddHandler())},qi["b"].TOOL)])}_removeViewHandles(){this._viewHandles.removeAll()}_addDrawTool(e){this._drawTool=new yn({view:e,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"point",mode:"click"}),this.view.toolViewManager.tools.push(this._drawTool),this.view.activeTool=this._drawTool,this._drawTool.on("cursor-update",e=>{1===e.vertices.length&&this.emit("cursor-update",new cn(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new un(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})}_removeDrawTool(){Object(Mi["k"])(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)}_addVertex(e){const t=this._coordinateHelper.fromArray(e);this._isDuplicateOfLastVertex(t)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(t),this.notifyChange("vertices"))}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(Mi["k"])(i)&&!t){this._pushCursorVertex(i.vertex);const t=()=>new cn(this.view,e,this._activeComponent.vertices.length,this.vertices,Object(Mi["k"])(this._stagedVertex)?new oi["a"](this._stagedVertex):null);this.emit("cursor-update",t()),Object(Mi["k"])(this._snappingTask)&&this._snappingTask.promise.then(e=>{e.valid&&this.emit("cursor-update",t())},()=>{})}}_completeDrawing(e){this._activePointerId=null,this._popCursorVertex(),this._snappingTask=Object(Mi["a"])(this._snappingTask),Object(Mi["k"])(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new un(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}_shouldHandlePointerEvent(e){return bn(e)&&(Object(Mi["j"])(this._activePointerId)||this._activePointerId===e.pointerId)}_vertexAddHandler(){const e=Object(Mi["k"])(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(Mi["k"])(e)&&(this._addVertex(e),this._completeDrawing())}};function bn(e){return"mouse"!==e.pointerType||0===e.button}Object(ui["a"])([Object(di["b"])({readOnly:!0})],_n.prototype,"coordinates",null),_n=Object(ui["a"])([Object(mi["a"])("esri.views.draw.PointDrawAction")],_n);var xn=i("4aea");let wn=class extends on{constructor(e){super(e),this._cursorScreenPoint=null,this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this._activePointerId=null,this._viewHandles=new Gi["a"],this._undoRedoHandles=new Gi["a"],this.mode=xn["a"]}initialize(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool(this.view)}destroy(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy(),this._removeUndoRedoHandles(),this._undoRedoHandles.destroy()):this._removeDrawTool(),this.emit("destroy")}get _dragEnabled(){return"freehand"===this.mode||"hybrid"===this.mode}get _clickEnabled(){return"click"===this.mode||"hybrid"===this.mode}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}getGeometryZValue(){return this.vertices.length>0&&this.vertices[0].length>2?this.vertices[0][2]:this._get("defaultZ")}_addViewHandles(){this._removeViewHandles(),this._viewHandles.add([this.view.on("click",e=>{e.stopPropagation()},qi["b"].TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Object(Yi["a"])(e),"touch"===e.pointerType&&this._updateCursor(e.native))},qi["b"].TOOL),this.view.on("pointer-move",e=>{this._snappingTask=Object(Mi["a"])(this._snappingTask),this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._cursorScreenPoint=Object(Yi["a"])(e),"touch"!==e.pointerType&&this._updateCursor(e.native)},qi["b"].TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._cursorScreenPoint=Object(Yi["a"])(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)},qi["b"].TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return 1===this.vertices.length&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{const t="touch"===e.pointerType;this._updateCursor(e.native,t)}},qi["b"].TOOL),this.view.on("drag",e=>{this._dragEnabled&&Object(Mi["k"])(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()},qi["b"].TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},qi["b"].TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},qi["b"].TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},qi["b"].TOOL),this.view.on("key-down",e=>{const{key:t,repeat:i}=e;t===hn.vertexAddKey&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._snappingTask=Object(Mi["a"])(this._snappingTask),this._vertexAddHandler(e)):t===hn.drawCompleteKey&&!i&&this._cursorScreenPoint&&this.vertices.length>2?(e.stopPropagation(),this._snappingTask=Object(Mi["a"])(this._snappingTask),this._vertexAddHandler(e),this._drawCompleteHandler(e)):t!==hn.undoKey||this.interactiveUndoDisabled||i?t!==hn.redoKey||this.interactiveUndoDisabled||i?t!==hn.panKey||i||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo())},qi["b"].TOOL),this.view.on("key-up",e=>{e.key===hn.panKey&&(e.stopPropagation(),this._panEnabled=!1)},qi["b"].TOOL)])}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",e=>{if(this.notifyChange("vertices"),"undo"===e.operation){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];Object(Mi["k"])(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new ln(this.view,t,e.vertices[0].index,i))}}),this._editGeometry.on("vertex-add",e=>{if(this.notifyChange("vertices"),"apply"===e.operation){const e=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],t=this._committedVertices.length-1,i=new sn(this.view,e,t,this.vertices);this.emit("vertex-add",i),i.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if("redo"===e.operation){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];Object(Mi["k"])(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new sn(this.view,t,e.vertices[0].index,i))}})])}_removeViewHandles(){this._viewHandles.removeAll()}_removeUndoRedoHandles(){this._undoRedoHandles.removeAll()}_addDrawTool(e){this._drawTool=new yn({view:e,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polygon",mode:this.mode}),this.view.toolViewManager.tools.push(this._drawTool),this.view.activeTool=this._drawTool,this._drawTool.on("vertex-add",e=>{1===e.vertices.length&&this.emit("vertex-add",new sn(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",e=>{1===e.vertices.length&&this.emit("cursor-update",new cn(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new un(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})}_removeDrawTool(){Object(Mi["k"])(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)}_addVertex(e,t){const i=this._coordinateHelper.fromArray(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(i);const n=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(n)}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(Mi["k"])(i)&&!t){this._pushCursorVertex(i.vertex);const t=()=>new cn(this.view,e,this._activeComponent.vertices.length,this.vertices,Object(Mi["k"])(this._stagedVertex)?new oi["a"](this._stagedVertex):null);this.emit("cursor-update",t()),Object(Mi["k"])(this._snappingTask)&&this._snappingTask.promise.then(e=>{e.valid&&this.emit("cursor-update",t())},()=>{})}}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._snappingTask=Object(Mi["a"])(this._snappingTask),Object(Mi["k"])(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<3)return;const t=new un(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}_shouldHandlePointerEvent(e){return Tn(e)&&(Object(Mi["j"])(this._activePointerId)||this._activePointerId===e.pointerId)}_vertexAddHandler(e){const t=Object(Mi["k"])(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(Mi["k"])(t)&&this._addVertex(t,e.native)}_drawCompleteHandler(e){this._completeDrawing(e.native)}};function Tn(e){return"mouse"!==e.pointerType||0===e.button}Object(ui["a"])([Object(di["b"])()],wn.prototype,"_dragEnabled",null),Object(ui["a"])([Object(di["b"])()],wn.prototype,"_clickEnabled",null),Object(ui["a"])([Object(di["b"])({type:xn["b"]})],wn.prototype,"mode",void 0),wn=Object(ui["a"])([Object(mi["a"])("esri.views.draw.PolygonDrawAction")],wn);let Sn=class extends on{constructor(e){super(e),this._cursorScreenPoint=null,this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this._activePointerId=null,this._viewHandles=new Gi["a"],this._undoRedoHandles=new Gi["a"],this.mode=xn["a"]}initialize(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool(this.view)}destroy(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy(),this._removeUndoRedoHandles(),this._undoRedoHandles.destroy()):this._removeDrawTool(),this.emit("destroy")}get _clickEnabled(){return"click"===this.mode||"hybrid"===this.mode}get _dragEnabled(){return"freehand"===this.mode||"hybrid"===this.mode}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._viewHandles.add([this.view.on("click",e=>{e.stopPropagation()},qi["b"].TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&!this._panEnabled&&(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Object(Yi["a"])(e),"touch"===e.pointerType&&this._updateCursor(e.native))},qi["b"].TOOL),this.view.on("pointer-move",e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._snappingTask=Object(Mi["a"])(this._snappingTask),this._cursorScreenPoint=Object(Yi["a"])(e),"touch"!==e.pointerType&&this._updateCursor(e.native)},qi["b"].TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._cursorScreenPoint=Object(Yi["a"])(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)},qi["b"].TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return 1===this.vertices.length&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{const t="touch"===e.pointerType;this._updateCursor(e.native,t)}},qi["b"].TOOL),this.view.on("drag",e=>{this._dragEnabled&&Object(Mi["k"])(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()},qi["b"].TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},qi["b"].TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},qi["b"].TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},qi["b"].TOOL),this.view.on("key-down",e=>{const{key:t,repeat:i}=e;t===hn.vertexAddKey&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._snappingTask=Object(Mi["a"])(this._snappingTask),this._vertexAddHandler(e)):t===hn.drawCompleteKey&&!i&&this._cursorScreenPoint&&this.vertices.length>1?(e.stopPropagation(),this._snappingTask=Object(Mi["a"])(this._snappingTask),this._vertexAddHandler(e),this._drawCompleteHandler(e)):t!==hn.undoKey||this.interactiveUndoDisabled||i?t!==hn.redoKey||this.interactiveUndoDisabled||i?t!==hn.panKey||i||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo())},qi["b"].TOOL),this.view.on("key-up",e=>{e.key===hn.panKey&&(e.stopPropagation(),this._panEnabled=!1)},qi["b"].TOOL)])}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",e=>{if(this.notifyChange("vertices"),"undo"===e.operation){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];Object(Mi["k"])(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new ln(this.view,t,e.vertices[0].index,i))}}),this._editGeometry.on("vertex-add",e=>{if(this.notifyChange("vertices"),"apply"===e.operation){const e=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],t=this._committedVertices.length-1,i=new sn(this.view,e,t,this.vertices);this.emit("vertex-add",i),i.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if("redo"===e.operation){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];Object(Mi["k"])(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new sn(this.view,t,e.vertices[0].index,i))}})])}_removeViewHandles(){this._viewHandles.removeAll()}_removeUndoRedoHandles(){this._undoRedoHandles.removeAll()}_addDrawTool(e){this._drawTool=new yn({view:e,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polyline",mode:this.mode}),this.view.toolViewManager.tools.push(this._drawTool),this.view.activeTool=this._drawTool,this._drawTool.on("vertex-add",e=>{1===e.vertices.length&&this.emit("vertex-add",new sn(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",e=>{1===e.vertices.length&&this.emit("cursor-update",new cn(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new un(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})}_removeDrawTool(){Object(Mi["k"])(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool=Object(Mi["e"])(this._drawTool))}_addVertex(e,t){const i=this._coordinateHelper.fromArray(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(i);const n=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(n)}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(Mi["k"])(i)&&!t){this._pushCursorVertex(i.vertex);const t=()=>new cn(this.view,e,this._activeComponent.vertices.length,this.vertices,Object(Mi["k"])(this._stagedVertex)?new oi["a"](this._stagedVertex):null);this.emit("cursor-update",t()),Object(Mi["k"])(this._snappingTask)&&this._snappingTask.promise.then(e=>{e.valid&&this.emit("cursor-update",t())},()=>{})}}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._snappingTask=Object(Mi["a"])(this._snappingTask),Object(Mi["k"])(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<2)return;const t=new un(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}_shouldHandlePointerEvent(e){return On(e)&&(Object(Mi["j"])(this._activePointerId)||this._activePointerId===e.pointerId)}_vertexAddHandler(e){const t=Object(Mi["k"])(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(Mi["k"])(t)&&this._addVertex(t,e.native)}_drawCompleteHandler(e){this._completeDrawing(e.native)}};function On(e){return"mouse"!==e.pointerType||0===e.button}Object(ui["a"])([Object(di["b"])()],Sn.prototype,"_clickEnabled",null),Object(ui["a"])([Object(di["b"])()],Sn.prototype,"_dragEnabled",null),Object(ui["a"])([Object(di["b"])({type:xn["b"]})],Sn.prototype,"mode",void 0),Sn=Object(ui["a"])([Object(mi["a"])("esri.views.draw.PolylineDrawAction")],Sn);var Cn=i("a545");const kn=["freehand","click"];let Pn=class extends on{constructor(e){super(e),this._isDragging=!1,this._panEnabled=!1,this._cursorScreenPoint=null,this._viewHandles=new Gi["a"],this._activePointerId=null,this._addVertexOnPointerUp=!1,this.viewAlignedCoordinateSystem=null,this.mode="freehand"}initialize(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool(this.view)}destroy(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy()):this._removeDrawTool(),this.emit("destroy")}complete(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}getGeometryZValue(){return this.vertices.length>0&&this.vertices[0].length>2?this.vertices[0][2]:this._get("defaultZ")}_addViewHandles(){this._removeViewHandles(),"click"===this.mode?this._viewHandles.add(this._getClickModeViewHandles()):this._viewHandles.add(this._getDragModeViewHandles())}_getDragModeViewHandles(){return[this.view.on("immediate-click",e=>{if(e.stopPropagation(),e.mapPoint&&!this._panEnabled){const t=this.getCoordsFromScreenPoint(Object(Yi["a"])(e));Object(Mi["k"])(t)&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))}},qi["b"].TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._panEnabled||(this._resetGeometry(),this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Object(Yi["a"])(e),this._activePointerId=e.pointerId,this._vertexAddHandler(e),this._isDragging=!1,"touch"===e.pointerType&&this._updateCursor(e.native)))},qi["b"].TOOL),this.view.on("pointer-move",e=>{this._snappingTask=Object(Mi["a"])(this._snappingTask),Object(Mi["j"])(this._activePointerId)&&"touch"!==e.pointerType&&(this._cursorScreenPoint=Object(Yi["a"])(e),this._updateCursor(e.native))},qi["b"].TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._isDragging=!0,this._cursorScreenPoint=Object(Yi["a"])(e),this._updateCursor(e.native))},qi["b"].TOOL),this.view.on("pointer-up",e=>{this._shouldHandlePointerEvent(e)&&this._addVertexOnPointerUp&&(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._activePointerId=null,this._isDragging&&this._vertexAddHandler(e),2===this._committedVertices.length&&this._drawCompleteHandler(e),this._isDragging=!1)},qi["b"].TOOL),this.view.on("key-down",e=>{e.key===hn.drawCompleteKey&&this._cursorScreenPoint?(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._drawCompleteHandler(e)):e.key===hn.panKey&&(this._panEnabled=!0)},qi["b"].TOOL),this.view.on("key-up",e=>{e.key===hn.panKey&&(this._panEnabled=!1)},qi["b"].TOOL),this.view.on("drag",e=>{Object(Mi["k"])(this._activePointerId)&&e.stopPropagation()},qi["b"].TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},qi["b"].TOOL)]}_getClickModeViewHandles(){return[this.view.on("pointer-down",e=>{this._snappingTask=Object(Mi["a"])(this._snappingTask),this._cursorScreenPoint=Object(Yi["a"])(e),this._activePointerId=e.pointerId,this._isDragging=!1,"touch"===e.pointerType&&this._updateCursor(e.native)},qi["b"].TOOL),this.view.on("pointer-move",e=>{this._snappingTask=Object(Mi["a"])(this._snappingTask),this._cursorScreenPoint=Object(Yi["a"])(e),Object(Mi["j"])(this._activePointerId)&&"touch"!==e.pointerType&&this._updateCursor(e.native)},qi["b"].TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._isDragging=!0)},qi["b"].TOOL),this.view.on("pointer-up",e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(Mi["a"])(this._snappingTask),this._activePointerId=null,e.stopPropagation(),this._isDragging||this._vertexAddHandler(e),2!==this.vertices.length||this._isDragging||this._drawCompleteHandler(e),this._isDragging=!1)},qi["b"].TOOL),this.view.on("key-down",e=>{e.key===hn.vertexAddKey&&this._cursorScreenPoint&&(this._vertexAddHandler(e),2===this.vertices.length&&this._drawCompleteHandler(e)),e.key===hn.drawCompleteKey&&this._cursorScreenPoint&&2===this.vertices.length&&this._drawCompleteHandler(e)},qi["b"].TOOL)]}_removeViewHandles(){this._viewHandles.removeAll()}_addDrawTool(e){this._drawTool=new yn({view:e,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"segment",mode:this.mode}),this.view.toolViewManager.tools.push(this._drawTool),this.view.activeTool=this._drawTool,this._drawTool.on("vertex-add",e=>{1===e.vertices.length&&this.emit("vertex-add",new sn(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",e=>{1===e.vertices.length&&this.emit("cursor-update",new cn(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new un(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})}_removeDrawTool(){Object(Mi["k"])(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)}_addVertex(e,t){const i=this._coordinateHelper.fromArray(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(i),1===this._committedVertices.length&&(this.viewAlignedCoordinateSystem=Object(Cn["a"])(this.view,this._committedVertices[0]));const n=this._committedVertices.length-1,r=new sn(this.view,t,n,this.vertices);this.emit("vertex-add",r)}_updateCursor(e){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const t=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(Mi["k"])(t)){this._pushCursorVertex(t.vertex);const i=()=>new cn(this.view,e,this._activeComponent.vertices.length,this.vertices,Object(Mi["k"])(this._stagedVertex)?new oi["a"](this._stagedVertex):null);this.emit("cursor-update",i()),Object(Mi["k"])(this._snappingTask)&&this._snappingTask.promise.then(e=>{e.valid&&this.emit("cursor-update",i())},()=>{})}}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._cursorScreenPoint=null,this._isDragging=!1,this._snappingTask=Object(Mi["a"])(this._snappingTask),Object(Mi["k"])(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const t=new un(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}_resetGeometry(){this._editGeometry.destroy(),this._editGeometry=new Ji["a"](new Qi["c"](this._coordinateHelper),"polygon"),this._activeComponent=new Qi["a"](this._editGeometry.editGeometry),this._editGeometry.editGeometry.components.push(this._activeComponent)}_shouldHandlePointerEvent(e){return En(e)&&(Object(Mi["j"])(this._activePointerId)||this._activePointerId===e.pointerId)}_vertexAddHandler(e){const t=Object(Mi["k"])(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(Mi["k"])(t)&&this._addVertex(t,e.native)}_drawCompleteHandler(e){this._completeDrawing(e.native)}};function En(e){return"mouse"!==e.pointerType||0===e.button}Object(ui["a"])([Object(di["b"])({type:kn})],Pn.prototype,"mode",void 0),Pn=Object(ui["a"])([Object(mi["a"])("esri/views/2d/engine/markup/SegmentDrawAction")],Pn);let An=class extends Si["a"]{constructor(){super(...arguments),this.activeAction=null,this.type="draw",this.view=null}destroy(){this.activeAction&&(this.activeAction.destroy(),this.activeAction=null)}create(e,t){this.reset();const i={view:this.view,...t};switch(e){case"point":i.editGeometryType="point",this.activeAction=new _n(i);break;case"polyline":i.editGeometryType="polyline",this.activeAction=new Sn(i);break;case"multipoint":i.editGeometryType="polygon",this.activeAction=new dn(i);break;case"polygon":i.editGeometryType="polygon",this.activeAction=new wn(i);break;case"rectangle":case"circle":case"ellipse":case"triangle":i.editGeometryType="polygon",this.activeAction=new Pn(i)}return this.activeAction}complete(){this.activeAction&&this.activeAction.complete(),this.activeAction=null}reset(){this.activeAction&&this.activeAction.destroy(),this.activeAction=null}};Object(ui["a"])([Object(di["b"])()],An.prototype,"activeAction",void 0),Object(ui["a"])([Object(di["b"])({readOnly:!0})],An.prototype,"type",void 0),Object(ui["a"])([Object(di["b"])()],An.prototype,"view",void 0),An=Object(ui["a"])([Object(mi["a"])("esri.views.draw.Draw")],An);var In=An,Mn=In;function Dn(e){switch(e){case 0:break;case 1:return"not owned by a graphics layer";case 2:return"no geometry";case 3:return"the geometry type is not supported";case 4:return"the elevation mode is not supported";case 5:return"the symbol type is not supported"}return""}var jn=i("243f"),Ln=i("240c"),Rn=i("f408");function Nn(e){var t;if("graphics"!==(null==(t=e.layer)?void 0:t.type))return 1;if(Object(Mi["j"])(e.geometry))return 2;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":return 0;case"multipoint":case"extent":case"mesh":default:return 3}const i=Object(Mi["k"])(e.symbol)&&"point-3d"===e.symbol.type&&e.symbol.symbolLayers;return i&&i.length>0&&i.some(e=>"object"===e.type)?"on-the-ground"!==Object(Rn["e"])(e)&&Object(Rn["g"])(e)?4:0:5}let zn=null;async function Bn(){return zn||(zn=await Promise.all([i.e("chunk-2d22cf8c"),i.e("chunk-3529a025")]).then(i.bind(null,"dfd4"))),zn}var Vn=i("b65e"),Fn=i("9efb"),Un=i("9096"),Gn=i("3349"),Hn=i("6706"),Wn=i("0b2d"),qn=i("28eb"),Zn=i("92af");let Yn=class extends Un["a"]{constructor(e){super(e),this.sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null}}}get updating(){return Object(qn["a"])(this.snappingSources,({snappingSource:e})=>e.updating)||this.updatingHandles.updating}get snappingSources(){var e;const t=this._get("snappingSources")||new Map,i=new Map;if(null!=(e=this.options)&&e.featureSources)for(const n of this.options.featureSources.items){const e=n.layer.uid,r=t.get(e);if(r){t.delete(e),i.set(e,r);continue}if(!n.layer.loaded){this.updatingHandles.addPromise(n.layer.load());continue}const a=this.createSourceInfo(n);Object(Mi["k"])(a)&&i.set(e,a)}for(const[,n]of t)n.destroy();return i}initialize(){var e;this.updatingHandles.add(this,"snappingSources",()=>{this.notifyChange("updating")},1),Object(Mi["k"])(this.view)&&this.handles.add([null==(e=this.view.refreshManager)?void 0:e.on("refresh",e=>{"interval"===e.trigger&&this.refreshSourceOfLayer(e.layerView.layer)}),this.view.on("layerview-create",e=>this.updateLayerView(e.layer,e.layerView)),this.view.on("layerview-destroy",e=>this.updateLayerView(e.layer,null))])}refreshSourceOfLayer(e){for(const[,{snappingSource:t}]of this.snappingSources)t.layerSource.layer===e&&t.refresh()}updateLayerView(e,t){for(const[,i]of this.snappingSources)i.snappingSource.layerSource.layer===e&&(i.layerView=t)}destroy(){this._set("options",null);for(const[,e]of this.snappingSources)e.destroy()}async fetchCandidates(e,t,i){if(!this.options.effectiveFeatureEnabled)return[];const n=[],r={distance:this.computeScreeenSizeDistanceParameters(e,t),point:e,coordinateHelper:t.coordinateHelper,types:this.types,filter:null};for(const[,{snappingSource:o,layerView:s}]of this.snappingSources)!o.layerSource.enabled||Object(Mi["k"])(s)&&s.suspended||n.push(o.fetchCandidates(r,i).then(({candidates:e})=>e.filter(e=>!this.candidateIsExcluded(o,e,t.excludeFeature))));const a=(await Object(ji["k"])(n)).flat();return Object(ji["u"])(i),Object(Hn["e"])(e,a),a}computeScreeenSizeDistanceParameters(e,t){const i=this.options.distance*("touch"===t.pointer?this.options.touchSensitivityMultiplier:1);return Object(Mi["j"])(this.view)?i:"2d"===this.view.type?i*this.view.resolution:this.computeScreeenSizeDistanceParameters3D(e,i,this.view,t)}computeScreeenSizeDistanceParameters3D(e,t,i,n){const{coordinateHelper:r,elevationInfo:a}=n,o=i.state.camera.computeScreenPixelSizeAt(Object(Hn["a"])(e,r,a,i,Kn))*i.renderCoordsHelper.unitInMeters/i.mapCoordsHelper.unitInMeters,s=t*o;return{x:s/this.computeScreenMagnitudeOfMapOffset(e,o,0,i,n),y:s/this.computeScreenMagnitudeOfMapOffset(e,0,o,i,n)}}computeScreenMagnitudeOfMapOffset(e,t,i,n,{coordinateHelper:r,elevationInfo:a}){const o=r.clone(e);o[0]+=t,o[1]+=i;const s=Object(Hn["b"])(e,r,a,n),l=Object(Hn["b"])(o,r,a,n),c=l.x-s.x,u=l.y-s.y;return Math.sqrt(c*c+u*u)}get types(){return 3}candidateIsExcluded(e,t,i){if(Object(Mi["j"])(i))return!1;const n=this.getCandidateObjectId(t);if(Object(Mi["j"])(n))return!1;const r=e.layerSource.layer;return"graphics"===r.type?i.uid===n:i.sourceLayer===r&&!(!i.attributes||!("objectIdField"in r))&&i.attributes[r.objectIdField]===n}getCandidateObjectId(e){return e instanceof Zn["a"]?e.objectId:null}createSourceInfo(e){const t=this.createFeatureSnappingSourceType(e);if(Object(Mi["j"])(t))return null;if("loading"in t)return this.updatingHandles.addPromise(t.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const i=Object(Mi["k"])(this.view)?this.view.allLayerViews.find(t=>t.layer===e.layer):null;return new Xn(t.source,i)}createFeatureSnappingSourceType(e){switch(e.layer.type){case"feature":case"geojson":case"csv":return this.createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this.createFeatureSnappingSourceGraphicsLayer(e)}return null}createFeatureSnappingSourceFeatureLayer(e){switch(e.layer.source.type){case"feature-layer":{const t=this.getSourceModule("featureService");return Object(Mi["k"])(t.module)?{source:new t.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}case"memory":case"csv":case"geojson":{if("mesh"===e.layer.geometryType)return null;const t=this.getSourceModule("featureCollection");return Object(Mi["k"])(t.module)?{source:new t.module.FeatureCollectionSnappingSource({layerSource:e})}:{loading:t.loader}}}return null}createFeatureSnappingSourceGraphicsLayer(e){const t=this.getSourceModule("graphics");return Object(Mi["k"])(t.module)?{source:new t.module.GraphicsSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}getSourceModule(e){const t=this.sourceModules[e];if(Object(Mi["j"])(t.loader)){const i=this.loadSourceModule(e).then(e=>{t.module=e});return t.loader=i,{module:t.module,loader:i}}return{module:t.module,loader:t.loader}}loadSourceModule(e){switch(e){case"featureService":return this.updatingHandles.addPromise(i.e("chunk-c7f225fe").then(i.bind(null,"ba80")));case"featureCollection":return this.updatingHandles.addPromise(i.e("chunk-474e6fbb").then(i.bind(null,"2dca")));case"graphics":return this.updatingHandles.addPromise(Promise.all([i.e("chunk-2d0d03a7"),i.e("chunk-31ca1d6f"),i.e("chunk-eef284f0")]).then(i.bind(null,"b234")))}return null}};Object(ui["a"])([Object(di["b"])({constructOnly:!0})],Yn.prototype,"spatialReference",void 0),Object(ui["a"])([Object(di["b"])({constructOnly:!0})],Yn.prototype,"view",void 0),Object(ui["a"])([Object(di["b"])()],Yn.prototype,"options",void 0),Object(ui["a"])([Object(di["b"])({readOnly:!0})],Yn.prototype,"updating",null),Object(ui["a"])([Object(di["b"])({readOnly:!0})],Yn.prototype,"snappingSources",null),Yn=Object(ui["a"])([Object(mi["a"])("esri.views.interactive.snapping.FeatureSnappingEngine")],Yn);class Xn{constructor(e,t){this.snappingSource=e,this.layerView=t,this.handles=new Gi["a"];const i=this.snappingSource.layerSource.layer;if("refresh"in i){const t=i;this.handles.add(t.on("refresh",()=>e.refresh()))}this.handles.add([Object(Hi["a"])(e,"updating",t=>e.layerSource.updating=t,!0),Object(Hi["a"])(e,"availability",t=>e.layerSource.availability=t,!0)])}destroy(){this.snappingSource.destroy(),this.handles.destroy()}}const Kn=Object(Wn["e"])();var $n=i("02f1");class Qn{constructor(e,t){this.view=e,this.options=t,this.squaredShortLineThreshold=Oi["a"].shortLineThreshold*Oi["a"].shortLineThreshold}snap(e,t){return Object(Mi["k"])(t.vertexHandle)?"vertex"!==t.vertexHandle.type?[]:this.snapExistingVertex(e,t):this.snapNewVertex(e,t)}edgeExceedsShortLineThreshold(e,t){return this.exceedsShortLineThreshold(e.left.pos,e.right.pos,t)}exceedsShortLineThreshold(e,t,{elevationInfo:i,geometry:n}){const r=n.editGeometry.coordinateHelper;return 0===this.squaredShortLineThreshold||Object(Hn["f"])(Object(Hn["b"])(t,r,i,this.view),Object(Hn["b"])(e,r,i,this.view))>this.squaredShortLineThreshold}squaredProximityTreshold(e){return"touch"===e?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold}get squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,i=e*t;return i*i}}var Jn=i("0f94"),er=i("38a4"),tr=i("e6b53"),ir=i("df3b"),nr=i("43e0");class rr extends ir["a"]{constructor({coordinateHelper:e,lineStart:t,lineEnd:i,targetPoint:n}){super(e,n,new nr["b"](e,t,i)),this.referenceLineHint=new tr["a"](2,t,i)}get hints(){return[this.referenceLineHint,new tr["a"](0,this.lineEndClosestToTarget(),this.targetPoint)]}lineEndClosestToTarget(){const e=this.constraint.start,t=this.constraint.end;return Object(er["n"])(Object(Gn["g"])(Object(Gn["d"])(or,t,e),Object(Gn["d"])(ar,this.targetPoint,e)))>0?t:e}}const ar=Object($n["a"])(),or=Object($n["a"])();class sr extends Qn{snapNewVertex(e,t){const i=t.geometry.editGeometry.components[0],n=i.edges.length,r=[];if(n<1)return r;const a=t.coordinateHelper,o=Object(Hn["b"])(e,a,t.elevationInfo,this.view),s=i.edges[n-1];let l=s;do{this.edgeExceedsShortLineThreshold(l,t)&&this._processCandidateProposal(l.left.pos,l.right.pos,e,o,t,r),l=l.left.left}while(l&&l!==s);return r}snapExistingVertex(e,t){const i=[],n=Object(Mi["q"])(t.vertexHandle),r=n.component;if(r.edges.length<2)return i;const a=t.coordinateHelper,o=Object(Hn["b"])(e,a,t.elevationInfo,this.view),s=n.left,l=n.right;s&&l&&this.edgeExceedsShortLineThreshold(s,t)&&this.edgeExceedsShortLineThreshold(l,t)&&this._processCandidateProposal(s.left.pos,l.right.pos,e,o,t,i);const c=r.edges[0];let u=c;do{u!==n.left&&u!==n.right&&this.edgeExceedsShortLineThreshold(u,t)&&this._processCandidateProposal(u.left.pos,u.right.pos,e,o,t,i),u=u.right.right}while(u&&u!==c);return i}_processCandidateProposal(e,t,i,n,r,a){const o=Object(Jn["g"])(Object($n["a"])(),i,e,t),s=r.coordinateHelper,l=s.fromXYZ(o,s.getZ(i,0));Object(Hn["f"])(n,Object(Hn["b"])(l,s,r.elevationInfo,this.view))<this.squaredProximityTreshold(r.pointer)&&a.push(new rr({coordinateHelper:r.coordinateHelper,lineStart:e,lineEnd:t,targetPoint:l}))}}var lr=i("d232");class cr extends ir["a"]{constructor({coordinateHelper:e,referenceLine:t,lineStart:i,targetPoint:n}){const r=e.clone(i);Object(Gn["d"])(r,Object(Gn["h"])(r,r,t.right.pos),t.left.pos),super(e,n,new nr["b"](e,i,r)),this._referenceLines=[{edge:t,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new tr["a"](0,this.constraint.start,this.targetPoint),new lr["a"](this.constraint.start,this.targetPoint),...this._referenceLines.map(e=>new tr["a"](1,e.edge.left.pos,e.edge.right.pos,e.fadeLeft,e.fadeRight))]}addReferenceLine(e){const t={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(i=>{e.right.right===i.edge&&(i.fadeLeft=!1,t.fadeRight=!1),e.left.left===i.edge&&(i.fadeRight=!1,t.fadeLeft=!1)}),this._referenceLines.push(t)}}class ur extends Qn{constructor(){super(...arguments),this._tmpProjection=Object($n["a"])()}snapNewVertex(e,t){const i=t.geometry.editGeometry.components[0],n=i.edges.length,r=i.vertices.length,a=[];if(n<2)return a;const o=Object(Hn["b"])(e,t.coordinateHelper,t.elevationInfo,this.view),s=i.vertices[r-1],l=i.vertices[0],c=i.edges[n-1];let u=c;do{this.edgeExceedsShortLineThreshold(u,t)&&(this._checkEdgeForParalleLines(u,s.pos,e,o,t,a),this._checkEdgeForParalleLines(u,l.pos,e,o,t,a)),u=u.left.left}while(u&&u!==c);return a}snapExistingVertex(e,t){const i=[],n=Object(Mi["q"])(t.vertexHandle),r=n.component;if(r.edges.length<3)return i;const a=Object(Hn["b"])(e,t.coordinateHelper,t.elevationInfo,this.view),o=n.left,s=n.right,l=r.vertices[0],c=r.vertices.length,u=r.vertices[c-1],h=r.edges[0];let d=h;do{d!==o&&d!==s&&this.edgeExceedsShortLineThreshold(d,t)&&(o&&this._checkEdgeForParalleLines(d,o.left.pos,e,a,t,i),s&&this._checkEdgeForParalleLines(d,s.right.pos,e,a,t,i),n===l?this._checkEdgeForParalleLines(d,u.pos,e,a,t,i):n===u&&this._checkEdgeForParalleLines(d,l.pos,e,a,t,i)),d=d.right.right}while(d&&d!==h);return i}_checkEdgeForParalleLines(e,t,i,n,r,a){const o=e.left.pos,s=e.right.pos;if(Object(Jn["g"])(this._tmpProjection,t,o,s),Object(Gn["j"])(this._tmpProjection,t)<Oi["a"].parallelLineThreshold)return;Object(Jn["g"])(this._tmpProjection,i,o,s,t);const l=r.coordinateHelper,c=l.fromXYZ(this._tmpProjection,l.getZ(i,0));if(Object(Hn["f"])(n,Object(Hn["b"])(c,l,r.elevationInfo,this.view))<this.squaredProximityTreshold(r.pointer)){if(this.parallelToPreviousCandidate(e,a))return;a.push(new cr({coordinateHelper:l,referenceLine:e,lineStart:t,targetPoint:c}))}}parallelToPreviousCandidate(e,t){const i=e.left.pos,n=e.right.pos;for(const r of t)if(Object(Jn["g"])(this._tmpProjection,n,r.constraint.start,r.constraint.end,i),Object(Gn["j"])(this._tmpProjection,n)<Oi["a"].parallelLineThreshold)return r.addReferenceLine(e),!0;return!1}}var hr=i("5715");class dr extends ir["a"]{constructor({coordinateHelper:e,targetPoint:t,constraint:i,previousVertex:n,centerVertex:r}){super(e,t,i),this.previousVertex=n,this.centerVertex=r,this.referenceLine=new tr["a"](1,n,i.start)}get hints(){return[new tr["a"](0,this.constraint.start,this.targetPoint),this.referenceLine,new hr["a"](this.previousVertex,this.centerVertex,this.targetPoint)]}}class pr extends Qn{constructor(){super(...arguments),this._tmp=Object($n["a"])()}snapNewVertex(e,t){const i=t.geometry.editGeometry.components[0],n=i.vertices.length,r=[];if(n<2)return r;const a=Object(Hn["b"])(e,t.coordinateHelper,t.elevationInfo,this.view),o=i.vertices[n-1];this._checkForSnappingCandidate(r,o.left,o.pos,e,o.left.left.pos,o.pos,t,e,a);const s=i.vertices[0];return this._checkForSnappingCandidate(r,s.right,s.pos,e,s.right.right.pos,s.pos,t,e,a),r}snapExistingVertex(e,t){const i=[],n=Object(Mi["q"])(t.vertexHandle),r=n.component,a=r.vertices.length;if(a<3)return i;const o=Object(Hn["b"])(e,t.coordinateHelper,t.elevationInfo,this.view),s=n.left,l=n.right,c=r.vertices[0],u=r.vertices[a-1];if(!s)return this._checkForSnappingCandidate(i,c.right.right.right,c.right.right.pos,e,c.right.right.right.right.pos,c.right.right.pos,t,e,o),i;if(!l)return this._checkForSnappingCandidate(i,u.left.left.left,u.left.left.pos,e,u.left.left.left.left.pos,u.left.left.pos,t,e,o),i;if(s&&s.left.left){const n=s.left.left;this._checkForSnappingCandidate(i,n,s.left.pos,e,n.left.pos,s.left.pos,t,e,o)}if(l&&l.right.right){const n=l.right.right;this._checkForSnappingCandidate(i,n,l.right.pos,e,n.right.pos,l.right.pos,t,e,o)}return i}_checkForSnappingCandidate(e,t,i,n,r,a,o,s,l){if(!this.edgeExceedsShortLineThreshold(t,o))return;Object(Gn["d"])(this._tmp,t.right.pos,t.left.pos);const c=Object($n["e"])(this._tmp[1],-this._tmp[0]),u=Object(Gn["g"])(c,Object(Gn["d"])(this._tmp,n,i))/Object(Gn["p"])(c),h=o.coordinateHelper,d=h.fromXYZ(Object(Gn["o"])(Object($n["a"])(),a,c,u),h.getZ(s,0));Object(Hn["f"])(l,Object(Hn["b"])(d,h,o.elevationInfo,this.view))<this.squaredProximityTreshold(o.pointer)&&e.push(new dr({coordinateHelper:h,targetPoint:d,constraint:new nr["e"](h,a,Object(Gn["o"])(h.createNew(),a,c,Object(er["n"])(u))),previousVertex:r,centerVertex:a}))}}class fr extends ir["a"]{constructor({coordinateHelper:e,targetPoint:t,point1:i,point2:n}){super(e,t,new nr["c"](e,Object(Gn["m"])(mr,i,n,.5),.5*Object(Gn["i"])(i,n))),this.p1=i,this.p2=n}get hints(){return[new tr["a"](1,this.targetPoint,this.p1),new tr["a"](1,this.targetPoint,this.p2),new hr["a"](this.p1,this.targetPoint,this.p2)]}}const mr=Object($n["a"])();class gr extends Qn{snapNewVertex(e,t){const i=t.geometry.editGeometry.components[0],n=[],r=i.vertices.length;if("polygon"!==t.geometry.type||r<2)return n;const a=i.vertices[0],o=i.vertices[r-1];return this._processCandidateProposal(a.pos,o.pos,e,t,n),n}snapExistingVertex(e,t){const i=[],n=Object(Mi["q"])(t.vertexHandle),r=n.component;return r.edges.length<2?i:"polyline"!==t.geometry.type||0!==n.index&&n.index!==r.vertices.length-1?(this._processCandidateProposal(n.left.left.pos,n.right.right.pos,e,t,i),i):i}_processCandidateProposal(e,t,i,n,r){if(!this.exceedsShortLineThreshold(e,t,n))return;const a=Object(Gn["m"])(Object($n["a"])(),e,t,.5),o=.5*Object(Gn["i"])(e,t),s=Object(Jn["f"])(Object($n["a"])(),i,a,o),l=n.coordinateHelper,c=l.fromXYZ(s,l.getZ(i,0)),u=Object(Hn["b"])(i,l,n.elevationInfo,this.view);Object(Hn["f"])(u,Object(Hn["b"])(c,l,n.elevationInfo,this.view))<this.squaredProximityTreshold(n.pointer)&&r.push(new fr({coordinateHelper:l,targetPoint:c,point1:e,point2:t}))}}let vr=class extends Si["a"]{constructor(e){super(e),this.updating=!1,this._snappers=new vi["a"]}initialize(){this._snappers.push(new ur(this.view,this.options),new sr(this.view,this.options),new pr(this.view,this.options),new gr(this.view,this.options))}set options(e){this._set("options",e);for(const t of this._snappers)t.options=e}async fetchCandidates(e,t){if(!this.options.effectiveSelfEnabled)return[];const i=[];for(const n of this._snappers.items)i.push(...n.snap(e,t));return Object(Hn["e"])(e,i),i}};Object(ui["a"])([Object(di["b"])({readOnly:!0})],vr.prototype,"updating",void 0),Object(ui["a"])([Object(di["b"])({constructOnly:!0})],vr.prototype,"view",void 0),Object(ui["a"])([Object(di["b"])()],vr.prototype,"options",null),vr=Object(ui["a"])([Object(mi["a"])("esri.views.interactive.snapping.SelfSnappingEngine")],vr);var yr=i("e753");class _r extends ir["a"]{constructor(e,t,i,n){super(e,t,new nr["a"](e,t,i.constraint,n.constraint)),this.first=i,this.second=n}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new yr["a"](this.targetPoint)]}}let br=class extends(Ri["a"].EventedMixin(Un["a"])){constructor(e){super(e),this.options=new Ii,this.engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this.options=new Ii}initialize(){this.handles.add([Object(Fn["a"])(()=>{const{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:i,distance:n}=this.options;return{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:i,distance:n}},()=>{this.doneSnapping(),this.emit("changed")}),this.watch("options",e=>{for(const t of this.engines)t.options=e},!0),Object(Hi["a"])(this.view,"ready",e=>this.onViewReady(e),!0)])}destroy(){this.destroyEngines()}get updating(){return this.engines.some(e=>e.updating)}onViewReady(e){var t,i;this.destroyEngines(),e&&(this.engines=[new vr({view:this.view,options:this.options}),new Yn({view:this.view,spatialReference:null!=(t=null==(i=this.view)?void 0:i.spatialReference)?t:ai["a"].WGS84,options:this.options})])}destroyEngines(){for(const e of this.engines)e.destroy();this.engines.length=0}get squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,i=e*t;return i*i}async snap(e,t,i){const n=t.coordinateHelper.fromPoint(e),r=await this.fetchCandidates(n,t,i);return{get valid(){return!Object(ji["n"])(i)},apply:()=>{const{snappedPoint:e,hints:i}=this.processCandidates(n,r,t);return this.removeVisualization(),Object(Mi["k"])(t.visualizer)&&this.handles.add(t.visualizer.draw(i,{coordinateHelper:t.coordinateHelper,elevationInfo:t.elevationInfo,view:this.view}),xr),e}}}update(e,t){this.removeVisualization();let i=e;const n=[];if(Object(Mi["k"])(this._currentMainCandidate)){const r=t.coordinateHelper,a=r.fromPoint(e),o=this._currentMainCandidate.constraint.closestTo(a);if(Object(Hn["f"])(Object(Hn["b"])(a,r,t.elevationInfo,this.view),Object(Hn["b"])(o,r,t.elevationInfo,this.view))<this.squaredPointProximityThreshold(t.pointer)){i=r.createDehydratedPoint(o),this._currentMainCandidate.targetPoint=o,n.push(...this._currentMainCandidate.hints);for(const e of this._currentOtherActiveCandidates)e.targetPoint=o,n.push(...e.hints)}else this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}return Object(Mi["k"])(t.visualizer)&&this.handles.add(t.visualizer.draw(n,{coordinateHelper:t.coordinateHelper,elevationInfo:t.elevationInfo,view:this.view}),xr),i}doneSnapping(){this.removeVisualization(),this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}removeVisualization(){this.handles.remove(xr)}async fetchCandidates(e,t,i){return(await Promise.all(this.engines.map(n=>n.fetchCandidates(e,t,i)))).flat()}processCandidates(e,t,i){if(t.length<1)return this.doneSnapping(),{snappedPoint:i.coordinateHelper.toPoint(e,new oi["a"]),hints:[]};Object(Hn["e"])(e,t);const n=this._currentMainCandidate;if(Object(Mi["k"])(n)){const r=this.findOldConstraintInNewCandidates(n,t);if(r>=0){if(!(t[r]instanceof _r))return this.intersectWithOtherCandidates(r,t,e,i);if(Object(Gn["j"])(e,n.targetPoint)<this.squaredPointProximityThreshold(i.pointer))return this.updateSnappingCandidate(n,t,i)}}return this.intersectWithOtherCandidates(0,t,e,i)}findOldConstraintInNewCandidates(e,t){return e instanceof _r?this.findOldCandidateIndex(t,e.first)>=0&&this.findOldCandidateIndex(t,e.second)>=0?0:-1:this.findOldCandidateIndex(t,e)}intersectWithOtherCandidates(e,t,i,n){const r=t[e],a=[],o=n.coordinateHelper;for(let s=0;s<t.length;++s){if(s===e)continue;const l=t[s];for(const e of r.constraint.intersect(l.constraint)){const t=o.fromXYZ(e.intersection,r.targetPoint[2]);a.push([new _r(o,t,r,l),Object(Hn["f"])(Object(Hn["b"])(i,n.coordinateHelper,n.elevationInfo,this.view),Object(Hn["b"])(t,n.coordinateHelper,n.elevationInfo,this.view))])}}return a.length>0&&(a.sort((e,t)=>e[1]-t[1]),a[0][1]<this.squaredPointProximityThreshold(n.pointer))?this.updateSnappingCandidate(a[0][0],t,n):this.updateSnappingCandidate(r,t,n)}updateSnappingCandidate(e,t,i){this.doneSnapping(),this._currentMainCandidate=e;const n=this._currentMainCandidate.targetPoint,r=[];r.push(...e.hints);for(const a of t){if(e instanceof _r){if(a.constraint.objectEqual(e.first.constraint)||a.constraint.objectEqual(e.second.constraint))continue}else if(a.constraint.objectEqual(e.constraint))continue;a.constraint.check(n)&&(a.targetPoint=n,this._currentOtherActiveCandidates.push(a),r.push(...a.hints))}return{snappedPoint:i.coordinateHelper.createDehydratedPoint(n),hints:r}}squaredPointProximityThreshold(e){return"touch"===e?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold}findOldCandidateIndex(e,t){let i=-1;for(let n=0;n<e.length;++n)if(t.constraint.objectEqual(e[n].constraint)){i=n;break}return i}get test(){return{visualizationsActive:this.handles.has(xr)}}};Object(ui["a"])([Object(di["b"])({constructOnly:!0})],br.prototype,"view",void 0),Object(ui["a"])([Object(di["b"])()],br.prototype,"options",void 0),Object(ui["a"])([Object(di["b"])({readOnly:!0})],br.prototype,"updating",null),Object(ui["a"])([Object(di["b"])()],br.prototype,"engines",void 0),Object(ui["a"])([Object(di["b"])()],br.prototype,"squaredMouseProximityTreshold",null),Object(ui["a"])([Object(di["b"])()],br.prototype,"squaredTouchProximityThreshold",null),br=Object(ui["a"])([Object(mi["a"])("esri.views.interactive.snapping.SnappingManager")],br);const xr="visualization-handle";var wr=i("6c97");let Tr=class extends Ri["a"].EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw":case"draw-3d":return null;default:Object(wr["a"])(this.activeComponent)}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this.reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}reset(){this.activeComponent.reset()}refreshComponent(){const e=this.activeComponent;e&&("box"!==e.type&&"reshape"!==e.type||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};Object(ui["a"])([Object(di["b"])()],Tr.prototype,"activeComponent",void 0),Object(ui["a"])([Object(di["b"])()],Tr.prototype,"cancelled",void 0),Object(ui["a"])([Object(di["b"])()],Tr.prototype,"history",void 0),Object(ui["a"])([Object(di["b"])()],Tr.prototype,"tool",null),Object(ui["a"])([Object(di["b"])()],Tr.prototype,"type",void 0),Object(ui["a"])([Object(di["b"])()],Tr.prototype,"canUndo",null),Object(ui["a"])([Object(di["b"])()],Tr.prototype,"canRedo",null),Object(ui["a"])([Object(di["b"])()],Tr.prototype,"onEnd",void 0),Object(ui["a"])([Object(di["b"])()],Tr.prototype,"undo",null),Object(ui["a"])([Object(di["b"])()],Tr.prototype,"redo",null),Object(ui["a"])([Object(di["b"])()],Tr.prototype,"toggleTool",void 0),Object(ui["a"])([Object(di["b"])()],Tr.prototype,"addToSelection",void 0),Object(ui["a"])([Object(di["b"])()],Tr.prototype,"removeFromSelection",void 0),Tr=Object(ui["a"])([Object(mi["a"])("esri.widgets.Sketch.support.OperationHandle")],Tr);const Sr="esri.widgets.Sketch.SketchViewModel",Or=hi["a"].getLogger(Sr),Cr={redoKey:"r",undoKey:"z",centerKey:"Alt",constraintKey:"Control",snappingKey:"Control",cancelKey:"Escape",deleteKeys:["Backspace","Delete"],complete:"c",pan:" "},kr={defaultZ:0},Pr={enableMidpoints:!0,enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,tool:"transform",enableZ:!0,enableMoveGraphic:!0};let Er=class extends Ri["a"].EventedAccessor{constructor(e){super(e),this._activeFillGraphic=null,this._activeLineGraphic=null,this._centerIndicatorGraphic=null,this._centerSymbol=new Fi["a"]({style:"cross",size:6,color:[255,255,255]}),this._defaultSegmentOffset=48,this._numUpdating=0,this._handles=new Gi["a"],this._internalGraphicsLayer=new si["a"]({listMode:"hide",internal:!0}),this._lineGraphic=null,this._operationHandle=null,this._vertexGraphics=[],this._viewHandles=new Gi["a"],this._doUnnormalization=!1,this._moveOperationCloneInfos=[],this.activeFillSymbol=new Vi["a"]({style:"solid",color:[150,150,150,.2],outline:{color:[50,50,50],width:0}}),this.activeLineSymbol=new Ni["a"]({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[3.75,3.75],lineDashEnding:"HalfPattern",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:1.6,color:[255,255,255,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:2,color:[0,0,0,255]}]}}}),this.activeVertexSymbol=new Fi["a"]({style:"circle",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}}),this.layer=null,this.pointSymbol=new Fi["a"]({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new Vi["a"]({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new Bi["a"]({color:[130,130,130,1],width:2}),this._snappingManager=null,this.updateGraphics=new vi["a"],this.updateOnGraphicClick=!0,this.updatePointSymbol=new Fi["a"]({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}}),this.updatePolygonSymbol=new Vi["a"]({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}}),this.updatePolylineSymbol=new Bi["a"]({color:[12,207,255],width:2}),this.vertexSymbol=new Fi["a"]({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalAutoOpenEnabled=null,this.defaultCreateOptions=kr,this.defaultUpdateOptions=Pr,this.snappingOptions=new Ii}initialize(){this._handles.add([Object(Hi["d"])(this,"layer",()=>{this.cancel(),this._internalGraphicsLayer.elevationInfo=Object(Mi["k"])(this.layer)?this.layer.elevationInfo:null}),Object(Hi["b"])(this,"view.map.layers","change",e=>{e.removed.indexOf(this.layer)>=0&&this.cancel()}),Object(Hi["b"])(this,"layer.graphics","change",e=>{if(Object(Mi["k"])(this._operationHandle))for(const t of e.removed)this.updateGraphics.includes(t)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(t):this._operationHandle.cancel())}),Object(Hi["a"])(this,"layer.elevationInfo",()=>{this.cancel(),this._internalGraphicsLayer.elevationInfo=Object(Mi["k"])(this.layer)?this.layer.elevationInfo:null},!0),Object(Hi["a"])(this,"view",e=>{Object(Mi["e"])(this._snappingManager),e&&(this._snappingManager=new br({view:e,options:this.snappingOptions}))},!0)])}destroy(){this.cancel(),this._handles=Object(Mi["e"])(this._handles),this._viewHandles=Object(Mi["e"])(this._viewHandles),this._removeDefaultLayer(),Object(Mi["e"])(this._draw),Object(Mi["e"])(this._snappingManager),this._set("view",null),this.emit("destroy")}get _defaultUpdateTool(){return"3d"===this.view.type?"move":"transform"}get _draw(){return"ready"===this.state||"active"===this.state?new Mn({view:this.view}):null}get updating(){return this._numUpdating>0}get activeTool(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}get activeComponent(){return this._operationHandle?this._operationHandle.activeComponent:null}get createGraphic(){return this.view&&"3d"===this.view.type&&Object(Mi["k"])(this.activeComponent)&&"draw-3d"===this.activeComponent.type?Object(Mi["q"])(this.activeComponent.createGraphic):this._get("createGraphic")}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...kr,...e})}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",{...Pr,...e})}set snappingOptions(e){Object(Mi["k"])(this._snappingManager)&&(this._snappingManager.options=e),this._set("snappingOptions",e)}get state(){var e;const t=!(null==(e=this.view)||!e.ready||!this.layer),i=this._operationHandle;return t&&i?"active":t?"ready":"disabled"}get view(){return this._get("view")}set view(e){const t=this._get("view");if(t){const{container:e,map:i}=t;e&&(t.cursor=null),i&&i.remove(this._internalGraphicsLayer),this._viewHandles.removeAll(),this.cancel()}this._doUnnormalization=null!=e&&"3d"===e.type&&"global"===e.viewingMode;const i="view-ready";this._handles.remove(i),e&&this._handles.add(Object(Hi["e"])(e,"ready",t=>{this._viewHandles.removeAll(),t&&this._viewHandles.add(this._generateViewHandles(e))},!0),i),this._set("view",e)}cancel(){this._moduleLoaderAbortController=Object(Mi["a"])(this._moduleLoaderAbortController),this._viewReadyAbortController=Object(Mi["a"])(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:t}=this;if("active"===e&&t.length){const{activeTool:e,layer:i}=this,n=t.toArray();i.removeMany(n),this.cancel(),this._emitDeleteEvent({graphics:n,tool:e})}}async create(e,t){if(await this._waitViewReady(),"disabled"===this.state)throw this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),Object(ji["e"])();if(this.cancel(),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");const i=await this._setupCreateOperation(e,t);if(Object(Mi["j"])(i)||this.destroyed)return;Object(Vn["a"])(this.view,this._internalGraphicsLayer);const n=()=>{if(i===this._operationHandle){const t=this.createGraphic,n=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),i.cancelled||null==t||this.layer.add(t),this.emit("create",{graphic:t,state:n?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}};i.on("complete",n),this._operationHandle=i,this.view.ready&&Object(Zi["b"])(this.view)&&this.view.focus()}async update(e,t){await this._waitViewReady();const{layer:i,view:n,state:r}=this;if("disabled"===r)throw n||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),i||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),Object(ji["e"])();this.cancel();const a=Array.isArray(e)?e:[e];if(null==e||!a||!a.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(a.some(e=>e.layer!==i?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):Object(Mi["j"])(e.geometry)?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0):"2d"===n.type&&!n.spatialReference.equals(e.geometry.spatialReference)&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with a spatial reference different from the supplied MapView."),!0)))return;const o=await this._setupUpdateOperation(a,t);this.destroyed||Object(Mi["j"])(o)||jr(o)||(Object(Vn["a"])(this.view,this._internalGraphicsLayer),this._setUpdateOperationHandle(o,t),this.emit("update",{graphics:a,state:"start",aborted:!1,tool:o.tool,toolEventInfo:null,type:"update"}))}undo(){this.canUndo()&&this._operationHandle.undo()}redo(){this.canRedo()&&this._operationHandle.redo()}canUndo(){return!(!this._operationHandle||!this._operationHandle.canUndo())}canRedo(){return!(!this._operationHandle||!this._operationHandle.canRedo())}toggleUpdateTool(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}async _getFirstHit(e){const t=[];switch(this.view.type){case"2d":{const r=await this.view.hitTest(e);if(r.results.length>0){const e=r.results[0];if(e.graphic){var i,n;const r=e.graphic;"vector-tile"!==(null==(i=r.layer)?void 0:i.type)&&"imagery"!==(null==(n=r.layer)?void 0:n.type)&&t.push(e)}}}break;case"3d":{const i=[this.view.map.ground];this.view.map.allLayers.forEach(e=>{"integrated-mesh"===e.type&&i.push(e)});const n=await this.view.hitTest(e,{exclude:i});if(n.results.length>0){const e=n.results[0];(!n.ground.mapPoint||this.view.map.ground.opacity<1||n.ground.distance-e.distance>-Math.min(3*n.ground.distance,"global"===this.view.viewingMode?Object(Wi["e"])(this.view.renderCoordsHelper.spatialReference).radius/this.view.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY))&&t.push(e)}}}return{screenPoint:e,results:t}}_generateViewHandles(e){return[e.on("immediate-click",t=>{const{_operationHandle:i,defaultUpdateOptions:n,layer:r,state:a,updateGraphics:o,updateOnGraphicClick:s}=this,l="active"===a&&"create"===i.type;"disabled"!==a&&!l&&s&&(this._beginAsyncOperation(),this._getFirstHit(Object(Yi["a"])(t)).then(i=>{const n=i.results;if(n.length)for(let s=0;s<n.length;++s){const i=n[s];if(i.graphic){const n=i.graphic;if(o.indexOf(n)>-1||n.layer===r)return t.stopPropagation(),n;"2d"!==e.type||this._isComponentGraphic(n)||"active"!==a||this.cancel()}}else"active"===a&&this.cancel();return null}).then(e=>Object(Mi["k"])(e)&&-1===o.indexOf(e)?this.update([e],{...n}):null).then(()=>{this._endAsyncOperation()}))},qi["b"].WIDGET)]}async _setupCreateOperation(e,t){if(!e)return null;const i={hasZ:"3d"===this.view.type,...this.defaultCreateOptions,...t};let n;if("2d"===this.view.type)switch(e){case"point":n=this._setupCreatePointOperation(e,i);break;case"multipoint":n=await this._setupCreateMultipointOperation(e,i);break;case"polygon":case"polyline":n=await this._setupCreatePolyOperation(e,i);break;case"rectangle":n=await this._setupCreateRectangleOperation(e,i);break;case"circle":n=await this._setupCreateCircleOperation(e,i)}else{const t=await this._setupCreate3DOperation(e,this.view,i);if(Object(Mi["j"])(t)||jr(t))return null;n=t}return n}async _setupCreate3DOperation(e,t,n){if("multipoint"===e)return null;const r={point:this.pointSymbol,multipoint:null,polyline:this.polylineSymbol,polygon:this.polygonSymbol,rectangle:this.polygonSymbol,circle:this.polygonSymbol}[e];this._removeCreateOperationGraphics();const a="rectangle"!==e,o="rectangle"!==e;this.snappingOptions.enabledToggled=!1;const s={view:t,mode:"rectangle"===e||"circle"===e?"hybrid":"click",...n,elevationInfo:this.layer.elevationInfo,geometryType:e,createGraphicSymbol:r,snapToScene:!Object(Mi["k"])(this.layer.elevationInfo)||"absolute-height"===this.layer.elevationInfo.mode,snappingManager:this._snappingManager,forceUniformSize:o,centered:a},l=await this._requireModule(Promise.all([i.e("chunk-2d22cf8c"),i.e("chunk-5a14e294")]).then(i.bind(null,"438e")));if(jr(l))return l;if(this.destroyed)return null;const c=new l.module.DrawGraphicTool(s);this.view.tools.add(c);let u=null;this.view.activeTool=c;const h=[],d=new Tr({activeComponent:c,tool:e,type:"update",onEnd:()=>{var e;h.forEach(e=>e.remove()),h.length=0,null==(e=this.view.tools)||e.remove(c),c.destroy()},undo:()=>{c.canUndo&&c.undo()},redo:()=>{c.canRedo&&c.redo()},canUndo:()=>c.canUndo,canRedo:()=>c.canRedo});return h.push(this.view.on("key-down",t=>{t.key===Cr.pan?(t.stopPropagation(),t.repeat||(c.enabled=!1)):t.key===Cr.complete?(t.stopPropagation(),c.completeCreateOperation()):t.key===Cr.undoKey?(t.stopPropagation(),d.undo()):t.key===Cr.redoKey?(t.stopPropagation(),d.redo()):t.key!==Cr.snappingKey||"rectangle"===e||"circle"===e||t.repeat?t.key!==Cr.constraintKey||"rectangle"!==e&&"circle"!==e||t.repeat?t.key===Cr.centerKey&&(t.repeat||(c.centered=!a,t.stopPropagation())):(c.forceUniformSize=!o,t.stopPropagation()):(this.snappingOptions.enabledToggled=!0,t.stopPropagation())},qi["b"].WIDGET),this.view.on("key-up",t=>{t.key===Cr.pan?c.enabled=!0:t.key===Cr.snappingKey&&"rectangle"!==e&&"circle"!==e?(this.snappingOptions.enabledToggled=!1,t.stopPropagation()):t.key!==Cr.constraintKey||"rectangle"!==e&&"circle"!==e?t.key===Cr.centerKey&&(c.centered=a,t.stopPropagation()):(c.forceUniformSize=o,t.stopPropagation())},qi["b"].WIDGET),c.on("vertex-add",t=>{switch(u=Object(Mi["j"])(u)?"start":"active",t.operation){case"apply":this.emit("create",{graphic:Object(Mi["q"])(c.createGraphic),state:u,tool:this.activeTool,toolEventInfo:t,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[Object(Mi["q"])(c.createGraphic)],tool:e});break;case"redo":this._emitRedoEvent({graphics:[Object(Mi["q"])(c.createGraphic)],tool:e})}}),c.on("cursor-update",e=>{c.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:Object(Mi["q"])(c.createGraphic),state:"active",tool:this.activeTool,toolEventInfo:{coordinates:e.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),c.on("vertex-remove",t=>{switch(t.operation){case"apply":this.emit("create",{graphic:Object(Mi["q"])(c.createGraphic),state:"active",tool:this.activeTool,toolEventInfo:t,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[Object(Mi["q"])(c.createGraphic)],tool:e});break;case"redo":this._emitRedoEvent({graphics:[Object(Mi["q"])(c.createGraphic)],tool:e})}}),c.on("complete",e=>{this._removeCreateOperationGraphics(),this._set("createGraphic",Object(Mi["q"])(e.graphic)),u="complete",e.aborted?d&&d.cancel():d&&d.complete()})),d}_setupCreatePointOperation(e,t){const i={elevationInfo:this.layer.elevationInfo,hasZ:t.hasZ,defaultZ:t.defaultZ,snappingManager:this._snappingManager,interactiveUndoDisabled:!0},n=this._draw.create(e,i),r=[n.on("cursor-update",e=>{Object(Mi["k"])(e.vertexIndex)?this._displayCrosshairCursor():this._displayDefaultCursor()}),n.on("draw-complete",e=>{const t=this.createPointFromVertex(e.vertices[0]),i=new ii["a"](t,this.pointSymbol);this._set("createGraphic",i),o&&o.complete()})],a=[this.view.on("key-down",e=>{e.key===Cr.cancelKey&&(o&&o.cancel(),e.stopPropagation())},qi["b"].WIDGET)],o=this._operationHandleForCreateAction(n,[...r,...a],e);return o}async _setupCreateMultipointOperation(e,t){const i=await Bn(),n={...t,elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0},r=this._draw.create(e,n);let a=null;const o=[],s=this._operationHandleForCreateAction(r,o,e);return o.push(r.on("vertex-add",t=>{const{type:n,vertexIndex:r,vertices:o}=t,s=o[r];a=t,this._drawMultipointGraphic(i,o,!0),this.emit("create",{graphic:this.createGraphic,state:1===o.length?"start":"active",tool:e,toolEventInfo:{added:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:r}],type:n},type:"create"})}),r.on("vertex-remove",t=>{const{type:n,vertexIndex:r,vertices:o}=t,s=o[r];a=t,this._drawMultipointGraphic(i,o,!0),this.emit("create",{graphic:this.createGraphic,state:"active",tool:e,toolEventInfo:{removed:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:r}],type:n},type:"create"})}),r.on("vertex-update",t=>{const{type:n,vertexIndex:r,vertices:o}=t,s=o[r];a=t,this._drawMultipointGraphic(i,o,!0),this.emit("create",{graphic:this.createGraphic,state:"active",tool:e,toolEventInfo:{type:n,updated:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:r}]},type:"create"})}),r.on("cursor-update",e=>{a=e}),r.on("draw-complete",e=>{const t=e.vertices.slice(0),n=i.createMultipoint(t,this.view.spatialReference);n&&this.createGraphic&&(this.createGraphic.geometry=n),s&&s.complete()}),r.on("undo",e=>{const t=e.vertices,n=a&&"cursor-update"!==a.type;this._resetCreateOperationGraphics(),t.length&&this._drawMultipointGraphic(i,t,n)}),r.on("redo",e=>{const t=e.vertices,n=a&&"cursor-update"!==a.type;this._resetCreateOperationGraphics(),t.length&&this._drawMultipointGraphic(i,t,n)})),o.push(this.view.on("pointer-move",()=>this._displayCrosshairCursor(),qi["b"].WIDGET),this.view.on("key-down",e=>this._getCommonUpdateOperationKeyDownHandlers(s,e),qi["b"].WIDGET)),s}async _setupCreatePolyOperation(e,t){const i=await Bn(),n={...t,elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0};let r=null;("polyline"===e||"polygon"===e)&&(r=this._draw.create(e,n));let a=null;const o=[r.on("vertex-add",t=>{const{type:n,vertexIndex:r,vertices:o}=t,s=o[r];this._snapLastPolygonVertexToFirst(e,o),a=t,this._drawVertexGraphics(i,e,o,{userClicked:!0}),this.emit("create",{graphic:this.createGraphic,state:1===o.length?"start":"active",tool:e,toolEventInfo:{added:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:r}],type:n},type:"create"})}),r.on("vertex-remove",t=>{const{type:n,vertexIndex:r,vertices:o}=t,s=o[r];this._snapLastPolygonVertexToFirst(e,o),a=t,this._drawVertexGraphics(i,e,o,{userClicked:!0}),this.emit("create",{graphic:this.createGraphic,state:"active",tool:e,toolEventInfo:{removed:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:r}],type:n},type:"create"})}),r.on("vertex-update",t=>{const{type:n,vertexIndex:r,vertices:o}=t,s=o[r];this._snapLastPolygonVertexToFirst(e,o),a=t,this._drawVertexGraphics(i,e,o,{userClicked:!0}),this.emit("create",{graphic:this.createGraphic,state:"active",tool:e,toolEventInfo:{type:n,updated:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:r}]},type:"create"})}),r.on("cursor-update",t=>{const{type:n,vertices:r}=t;if(t.mapPoint&&(this._snapLastPolygonVertexToFirst(e,r),a=t,this._drawVertexGraphics(i,e,r,{userClicked:!1}),r.length>1)){const t=r[r.length-1];this.emit("create",{graphic:this.createGraphic,state:"active",tool:e,toolEventInfo:{coordinates:t,type:n},type:"create"})}}),r.on("draw-complete",t=>{const n=t.vertices.slice(0);let r=null;"polyline"===e?r=i.createPolyline([n],this.view.spatialReference,this._doUnnormalization):"polygon"===e&&(r=i.createPolygon([n],this.view.spatialReference,this._doUnnormalization,!0)),r&&(this.createGraphic.geometry=r),l&&l.complete()}),r.on("undo",t=>{const n=t.vertices,r=a&&"cursor-update"!==a.type;this._resetCreateOperationGraphics(),this._snapLastPolygonVertexToFirst(e,n),n.length&&this._drawVertexGraphics(i,e,n,{userClicked:r})}),r.on("redo",t=>{const n=t.vertices,r=a&&"cursor-update"!==a.type;this._resetCreateOperationGraphics(),this._snapLastPolygonVertexToFirst(e,n),n.length&&this._drawVertexGraphics(i,e,n,{userClicked:r})})],s=[this.view.on("pointer-move",e=>{Object(Mi["k"])(r.getCoordsFromScreenPoint(Object(zi["e"])(e.x,e.y)))?this._displayCrosshairCursor():this._displayDefaultCursor()},qi["b"].WIDGET),this.view.on("key-down",e=>{e.key!==Cr.snappingKey||e.repeat?e.key===Cr.undoKey&&l&&l.canUndo()?(e.stopPropagation(),l.undo()):e.key===Cr.redoKey&&l&&l.canRedo()?(e.stopPropagation(),l.redo()):e.key===Cr.cancelKey&&l&&l.cancel():(this.snappingOptions.enabledToggled=!0,e.stopPropagation())},qi["b"].WIDGET),this.view.on("key-up",e=>{e.key===Cr.snappingKey&&(this.snappingOptions.enabledToggled=!1,e.stopPropagation())},qi["b"].WIDGET)];if("polygon"===e){const e=(e,t,i)=>{if(!e||!e.layer||!e.visible)return!1;const n=this.view.toScreen(e.geometry);return this._isWithinScreenDistance(n,t,i)},t=t=>{if(!(this._vertexGraphics.length<=2))return e(this._vertexGraphics[0],t,this._getVertexIntersectDistance())};let i=!1;s.push(this.view.on("pointer-move",()=>{i=!1},qi["b"].WIDGET),this.view.on("pointer-down",n=>{if(t(n))return i=!0,void n.stopPropagation();this._vertexGraphics.some(t=>e(t,n,this._getVertexIntersectDistance()))&&n.stopPropagation()},qi["b"].WIDGET),this.view.on("pointer-up",e=>{i&&(e.stopPropagation(),r.complete())}))}const l=this._operationHandleForCreateAction(r,[...o,...s],e);return l}async _setupCreateCircleOperation(e,t){const i=await Bn(),n={...t,elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0},r=this._draw.create(e,n);let a=!1,o=!0;const s=[r.on("vertex-add",t=>{const{type:n,vertexIndex:s,vertices:l}=t,c=l[s];this._drawSegmentGraphic(i,e,l,{centered:o,constrainToggle:a},r.viewAlignedCoordinateSystem),this.emit("create",{graphic:this.createGraphic,state:1===l.length?"start":"active",tool:e,toolEventInfo:{added:c,vertices:[{coordinates:c,componentIndex:0,vertexIndex:s}],type:n},type:"create"})}),r.on("cursor-update",t=>{const{type:n,vertices:s}=t;if(this._drawSegmentGraphic(i,e,s,{centered:o,constrainToggle:a},r.viewAlignedCoordinateSystem),2===s.length){const t=s[s.length-1];this.emit("create",{graphic:this.createGraphic,state:"active",tool:e,toolEventInfo:{coordinates:t,type:n},type:"create"})}}),r.on("draw-complete",e=>{const t=e.vertices.slice(0);let n;1===t.length?(t.push(r.viewAlignedCoordinateSystem.makeMapPoint(t[0][0]+this._defaultSegmentOffset*this.view.resolution,t[0][1])),n=i.createCircle(t,r.viewAlignedCoordinateSystem,!0,this.view.resolution)):n=a?i.createEllipse(t,r.viewAlignedCoordinateSystem,o):i.createCircle(t,r.viewAlignedCoordinateSystem,o,this.view.resolution),this.createGraphic?this.createGraphic.geometry=n:(this._removeCreateGraphic(),this._set("createGraphic",new ii["a"](n,this.polygonSymbol))),c&&c.complete()})],l=[this.view.on("pointer-move",e=>{Object(Mi["k"])(r.getCoordsFromScreenPoint(Object(zi["e"])(e.x,e.y)))?this._displayCrosshairCursor():this._displayDefaultCursor()},qi["b"].WIDGET),this.view.on("key-down",t=>{t.key===Cr.constraintKey?a||(a=!0,this._drawSegmentGraphic(i,e,r.vertices,{centered:o,constrainToggle:a},r.viewAlignedCoordinateSystem)):t.key===Cr.centerKey?o&&(o=!1,this._drawSegmentGraphic(i,e,r.vertices,{centered:o,constrainToggle:a},r.viewAlignedCoordinateSystem)):t.key===Cr.cancelKey&&c&&c.cancel()},qi["b"].WIDGET),this.view.on("key-up",t=>{t.key===Cr.constraintKey?(a=!1,this._drawSegmentGraphic(i,e,r.vertices,{centered:o,constrainToggle:a},r.viewAlignedCoordinateSystem)):t.key===Cr.centerKey&&(o=!0,this._drawSegmentGraphic(i,e,r.vertices,{centered:o,constrainToggle:a},r.viewAlignedCoordinateSystem))},qi["b"].WIDGET)],c=this._operationHandleForCreateAction(r,[...s,...l],e);return c}async _setupCreateRectangleOperation(e,t){const i=await Bn(),n={...t,elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0},r=this._draw.create(e,n);let a=!1,o=!1;const s=[r.on("vertex-add",t=>{const{type:n,vertexIndex:s,vertices:l}=t,c=l[s];this._drawSegmentGraphic(i,e,l,{centered:o,constrainToggle:a},r.viewAlignedCoordinateSystem),this.emit("create",{graphic:this.createGraphic,state:1===l.length?"start":"active",tool:e,toolEventInfo:{added:c,vertices:[{coordinates:c,componentIndex:0,vertexIndex:s}],type:n},type:"create"})}),r.on("cursor-update",t=>{const{type:n,vertices:s}=t;if(this._drawSegmentGraphic(i,e,s,{centered:o,constrainToggle:a},r.viewAlignedCoordinateSystem),2===s.length){const t=s[s.length-1];this.emit("create",{graphic:this.createGraphic,state:"active",tool:e,toolEventInfo:{coordinates:t,type:n},type:"create"})}}),r.on("draw-complete",e=>{const t=e.vertices.slice(0);let n=null;1===t.length&&(a=!1,o=!1),n=a?i.createSquare(t,r.viewAlignedCoordinateSystem,o):i.createRectangle(t,r.viewAlignedCoordinateSystem,o),this.createGraphic?this.createGraphic.geometry=n:(this._removeCreateGraphic(),this._set("createGraphic",new ii["a"](n,this.polygonSymbol))),c&&c.complete()})],l=[this.view.on("pointer-move",e=>{Object(Mi["k"])(r.getCoordsFromScreenPoint(Object(zi["e"])(e.x,e.y)))?this._displayCrosshairCursor():this._displayDefaultCursor()},qi["b"].WIDGET),this.view.on("key-down",t=>{t.key===Cr.constraintKey?a||(a=!0,this._drawSegmentGraphic(i,e,r.vertices,{centered:o,constrainToggle:a},r.viewAlignedCoordinateSystem)):t.key===Cr.centerKey?o||(o=!0,this._drawSegmentGraphic(i,e,r.vertices,{centered:o,constrainToggle:a},r.viewAlignedCoordinateSystem)):t.key===Cr.cancelKey&&c&&c.cancel()},qi["b"].WIDGET),this.view.on("key-up",t=>{t.key===Cr.constraintKey?(a=!1,this._drawSegmentGraphic(i,e,r.vertices,{centered:o,constrainToggle:a},r.viewAlignedCoordinateSystem)):t.key===Cr.centerKey&&(o=!1,this._drawSegmentGraphic(i,e,r.vertices,{centered:o,constrainToggle:a},r.viewAlignedCoordinateSystem))},qi["b"].WIDGET)],c=this._operationHandleForCreateAction(r,[...s,...l],e);return c}async _setupUpdateOperation(e,t){const{_defaultUpdateTool:i,defaultUpdateOptions:n,layer:r,view:a}=this,o={...n,...t},s=o.tool||i;for(const l of e)r.remove(l),r.add(l);if("3d"===a.type){if(0===e.length)return null;switch(s){case"move":return this._setupMove3DOperation(e,o,a,s);case"reshape":{if(e.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const t=Object(Ln["a"])(e[0]);return 0===t?this._setupReshape3DOperation(e[0],o,a):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${Dn(t)}).`),null)}case"transform":return this._setupGraphicTransform3DOperation(e,o,a)}}if("move"===s)return this._setupMoveOperation(e,o,a);if(e.length>1)return"reshape"===s?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshapeOperation(e,s,o,a);if(1===e.length){const t=e[0],i=Object(Mi["i"])(t.geometry,"type");if("point"===i||"multipoint"===i)return this._setupMoveOperation(e,o,a);if("transform"===s||"reshape"===s)return this._setupTransformOrReshapeOperation(e,s,o,a)}return null}async _setupMove3DOperation(e,t,n,r,a=!1){for(const i of e){const e=Object(jn["a"])(i);if(0!==e)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${Dn(e)}).`),null}const o=await this._requireModule(Promise.all([i.e("chunk-2d22cf8c"),i.e("chunk-5a14e294")]).then(i.bind(null,"438e")));if(jr(o))return o;const s=new o.module.GraphicMoveTool({view:n,enableZ:t.enableZ,snappingManager:this._snappingManager});this.view.tools.add(s),s.graphics.addMany(e),a||this.updateGraphics.addMany(e);const l=[],c=new Tr({activeComponent:s,tool:r,type:"update",onEnd:()=>{var e;l.forEach(e=>e.remove()),l.length=0,null==(e=this.view.tools)||e.remove(s),s.destroyed||s.destroy()},undo:()=>{Ar(c,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{Ir(c,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:e=>{this.updateGraphics.push(e),s.graphics.push(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{const t=this.updateGraphics.indexOf(e);c.history.undo.forEach(e=>e.updates.splice(t,1)),c.history.redo.forEach(e=>e.updates.splice(t,1)),this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==this.updateGraphics.length?s.graphics.remove(e):c.complete()},toggleTool:async()=>{if(1!==this.updateGraphics.length||!1===t.toggleToolOnClick)return;if("transform"!==r)return;const e=this.updateGraphics.getItemAt(0);if(0!==Object(Ln["a"])(e))return;const i=await this._setupReshape3DOperation(e,t,n,!0);jr(i)||(c.onEnd(),c.destroy(),this._setUpdateOperationHandle(i,t))}});return l.push(...this._getHandlesForComponent(c,t),this.view.on("immediate-click",e=>this._getCommonUpdateOperationClickHandlers(c,e,t),qi["b"].WIDGET),this.view.on("key-down",e=>this._getCommonUpdateOperationKeyDownHandlers(c,e),qi["b"].WIDGET)),c}_setupGraphicTransform3DOperation(e,t,i,n=!1){if(1===e.length&&0===Nn(e[0])){const r=e[0];if(Object(Mi["k"])(r.geometry)&&"point"===r.geometry.type)return this._setupPointTransform3DOperation(r,t,i);if(Object(Mi["k"])(r.geometry)&&("polygon"===r.geometry.type||"polyline"===r.geometry.type))return this._setupPolyTransform3DOperation(r,t,i,n)}return this._setupMove3DOperation(e,t,i,"transform",n)}async _setupPointTransform3DOperation(e,t,n){const r="transform",{enableRotation:a,enableScaling:o,enableZ:s}=t,l=await this._requireModule(Promise.all([i.e("chunk-2d22cf8c"),i.e("chunk-5a14e294")]).then(i.bind(null,"438e")));if(jr(l))return l;const c=new l.module.GraphicTransformTool({graphic:e,view:n,enableRotation:a,enableScaling:o,enableZ:s,snappingManager:this._snappingManager});this.view.tools.add(c),this.updateGraphics.add(e);const u=[],h=new Tr({activeComponent:c,tool:r,type:"update",onEnd:()=>{var e;u.forEach(e=>e.remove()),u.length=0,null==(e=this.view.tools)||e.remove(c),c.destroyed||c.destroy()},undo:()=>{Ar(h,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{Ir(h,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:async e=>{this.updateGraphics.add(e);const i=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,n,"transform",!0);jr(i)||(h.onEnd(),h.destroy(),this._setUpdateOperationHandle(i,t))}});return u.push(...this._getHandlesForComponent(h,t),this.view.on("immediate-click",e=>this._getCommonUpdateOperationClickHandlers(h,e,t),qi["b"].WIDGET),this.view.on("key-down",e=>this._getCommonUpdateOperationKeyDownHandlers(h,e),qi["b"].WIDGET)),h}async _setupPolyTransform3DOperation(e,t,n,r=!1){const a="transform",{enableRotation:o,enableScaling:s,enableZ:l,preserveAspectRatio:c}=t,u=await this._requireModule(Promise.all([i.e("chunk-2d22cf8c"),i.e("chunk-5a14e294")]).then(i.bind(null,"438e")));if(jr(u))return u;const h=new u.module.ExtentTransformTool({graphic:e,view:n,enableRotation:o,enableScaling:s,enableZ:l,preserveAspectRatio:c});this.view.tools.add(h),r||this.updateGraphics.add(e);const d=[],p=new Tr({activeComponent:h,tool:a,type:"update",onEnd:()=>{var e;d.forEach(e=>e.remove()),d.length=0,null==(e=this.view.tools)||e.remove(h),h.destroyed||h.destroy()},canUndo:()=>h.canUndo(),undo:()=>{h.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:a})},canRedo:()=>h.canRedo(),redo:()=>{h.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:a})},addToSelection:async e=>{this.updateGraphics.add(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"});const i=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,n,"transform",!0);jr(i)||(p.onEnd(),p.destroy(),this._setUpdateOperationHandle(i,t))},removeFromSelection:async e=>{this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),p.complete()},toggleTool:async()=>{if(1!==this.updateGraphics.length||!1===t.toggleToolOnClick)return;const e=this.updateGraphics.getItemAt(0);if(0!==Object(Ln["a"])(e))return;const i=await this._setupReshape3DOperation(e,t,n,!0);jr(i)||(p.onEnd(),p.destroy(),this._setUpdateOperationHandle(i,t))}});return d.push(...this._getHandlesForComponent(p,t),this.view.on("immediate-click",e=>this._getCommonUpdateOperationClickHandlers(p,e,t),qi["b"].WIDGET),this.view.on("key-down",e=>this._getCommonUpdateOperationKeyDownHandlers(p,e),qi["b"].WIDGET),this.view.on("key-down",e=>{e.key!==Cr.constraintKey||e.repeat||(h.preserveAspectRatio=!h.preserveAspectRatio,e.stopPropagation())},qi["b"].WIDGET),this.view.on("key-up",e=>{e.key===Cr.constraintKey&&(h.preserveAspectRatio=!h.preserveAspectRatio,e.stopPropagation())},qi["b"].WIDGET)),p}async _setupMoveOperation(e,t,i){const n="move";this.updateGraphics.addMany(e);const r=await this._getGraphicMover(e,t,i);if(jr(r))return r;this._syncCloneInfos();const a=new Tr({activeComponent:r,tool:n,type:"update",onEnd:()=>{var e;this._displayDefaultCursor(),s.forEach(e=>e.remove()),o.forEach(e=>e.remove()),s=[],o=[],r.destroy(),null==(e=this._internalGraphicsLayer)||e.removeMany([...this.updateGraphics.toArray()]),this._removeCloneGraphics()},undo:()=>{const e=this.updateGraphics.toArray();Ar(a,e),this._syncCloneInfos(),this._emitUndoEvent({graphics:e,tool:n})},redo:()=>{const e=this.updateGraphics.toArray();Ir(a,e),this._syncCloneInfos(),this._emitRedoEvent({graphics:e,tool:n})},addToSelection:e=>{this.updateGraphics.push(e),r.graphics=this.updateGraphics.toArray();const t=this._createClone(e);this._moveOperationCloneInfos.push({graphic:e,clone:t}),this._internalGraphicsLayer.add(t),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{const t=this.updateGraphics.indexOf(e);a.history.undo.forEach(e=>e.updates.splice(t,1)),a.history.redo.forEach(e=>e.updates.splice(t,1));const i=this._moveOperationCloneInfos.findIndex(t=>t.graphic===e),n=this._moveOperationCloneInfos[i];this._internalGraphicsLayer.remove(n.clone),this.updateGraphics.remove(e),this._moveOperationCloneInfos.splice(i,1);const o=this.updateGraphics.toArray();this.emit("update",{graphics:o,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==this.updateGraphics.length?r.graphics=o:a.complete()}});let o=[i.on("immediate-click",e=>this._getCommonUpdateOperationClickHandlers(a,e,t),qi["b"].WIDGET),i.on("key-down",e=>{this._getCommonUpdateOperationKeyDownHandlers(a,e),e.key!==Cr.constraintKey||e.repeat||(r.enableMoveAllGraphics=!r.enableMoveAllGraphics)},qi["b"].WIDGET),i.on("key-up",e=>{e.key===Cr.constraintKey&&(r.enableMoveAllGraphics=!r.enableMoveAllGraphics)},qi["b"].WIDGET)],s=this._getHandlesForComponent(a,t);return s.push(r.on("graphic-move",e=>{this._moveOperationCloneInfos.forEach(t=>{const i=e.allGraphics.find(e=>e===t.graphic);i&&(t.clone.geometry=i.geometry)})})),a}_removeCloneGraphics(){if(this._moveOperationCloneInfos.length){for(const{clone:e}of this._moveOperationCloneInfos)this._internalGraphicsLayer.remove(e),e.destroy();this._moveOperationCloneInfos=[]}}_syncCloneInfos(){this._removeCloneGraphics(),this._moveOperationCloneInfos=this._generateCloneInfos(this.updateGraphics.toArray());for(const{clone:e}of this._moveOperationCloneInfos)this._internalGraphicsLayer.add(e)}_generateCloneInfos(e){return(null==e?void 0:e.map(e=>({graphic:e,clone:this._createClone(e)})))||[]}_createClone(e){const t=e.clone();return t.symbol=this._getSymbolForClone(e),t}_getSymbolForClone(e){const t=12;if(Object(Mi["j"])(e.symbol))return null;switch(e.symbol.type){case"cim":return new Fi["a"]({style:"circle",size:t,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"picture-marker":{const{xoffset:t,yoffset:i,height:n,width:r}=e.symbol,a=n===r?r:Math.max(n,r);return new Fi["a"]({xoffset:t,yoffset:i,size:a,style:"square",color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case"simple-marker":{const{xoffset:t,yoffset:i,size:n,style:r}=e.symbol;return new Fi["a"]({xoffset:t,yoffset:i,style:"circle"===r?"circle":"square",size:n+2,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case"simple-fill":return new Vi["a"]({color:[0,0,0,0],outline:{style:"dash",color:[255,127,0,1],width:1}});case"simple-line":return new Bi["a"]({color:[255,127,0,1],style:"dash",width:1});case"text":{const{xoffset:i,yoffset:n}=e.symbol;return new Fi["a"]({xoffset:i,yoffset:n,size:t,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}default:return null}}async _setupReshape3DOperation(e,t,n,r=!1){const a="reshape",o=await this._requireModule(Promise.all([i.e("chunk-2d22cf8c"),i.e("chunk-5a14e294")]).then(i.bind(null,"438e")));if(jr(o))return o;this.snappingOptions.enabledToggled=!1;const s=new o.module.GraphicReshapeTool({view:n,graphic:e,enableZ:t.enableZ,enableMoveGraphic:t.enableMoveGraphic,snappingManager:this._snappingManager});n.tools.add(s),r||this.updateGraphics.add(e);const l=[],c=new Tr({activeComponent:s,tool:a,type:"update",onEnd:()=>{var e;l.forEach(e=>e.remove()),l.length=0,null==(e=this.view.tools)||e.remove(s),s.destroyed||s.destroy()},undo:()=>{s.beforeUndo(),Ar(c,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:a})},redo:()=>{Ir(c,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:a})},addToSelection:async e=>{this.updateGraphics.add(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"});const i=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,n,"transform",!0);jr(i)||(c.onEnd(),c.destroy(),this._setUpdateOperationHandle(i,t))},removeFromSelection:async e=>{this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),c.complete()},toggleTool:async()=>{if(!1===t.toggleToolOnClick)return;const e=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),t,n,!0);jr(e)||(c.onEnd(),c.destroy(),this._setUpdateOperationHandle(e,t))}});return l.push(...this._getHandlesForComponent(c,t),n.on("immediate-click",e=>this._getCommonUpdateOperationClickHandlers(c,e,t),qi["b"].WIDGET),n.on("key-down",e=>{this._getCommonUpdateOperationKeyDownHandlers(c,e),e.key===Cr.snappingKey&&(this.snappingOptions.enabledToggled=!0,e.stopPropagation())},qi["b"].WIDGET),n.on("key-up",e=>{e.key===Cr.snappingKey&&(this.snappingOptions.enabledToggled=!1,e.stopPropagation())},qi["b"].WIDGET)),c}async _setupTransformOrReshapeOperation(e,t,i,n){const{multipleSelectionEnabled:r}=i;this.updateGraphics.addMany(e);const a="transform"===t?await this._getBox(e,i,n):await this._getReshape(e,i,n);if(jr(a))return a;const o=new Tr({activeComponent:a,type:"update",onEnd:()=>{l.forEach(e=>e.remove()),s.forEach(e=>e.remove()),l=[],s=[],o.activeComponent&&!o.activeComponent.destroyed&&o.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{Ar(o,this.updateGraphics.toArray()),o.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:o.tool})},redo:()=>{Ir(o,this.updateGraphics.toArray()),o.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:o.tool})},addToSelection:e=>{const t=o.activeComponent;this.updateGraphics.add(e),t.graphics=this.updateGraphics.toArray(),t.refresh(),o.resetHistory(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{const t=o.activeComponent,i=this.updateGraphics.indexOf(e);o.history.undo.forEach(e=>e.updates.splice(i,1)),o.history.redo.forEach(e=>e.updates.splice(i,1)),this.updateGraphics.remove(e);const n=this.updateGraphics.toArray();this.emit("update",{graphics:n,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==this.updateGraphics.length?t.graphics=n:o.complete()},toggleTool:async()=>{if(this.updateGraphics.length>1)return;let t=null;"transform"===o.tool?t=await this._getReshape(e,i,n):"reshape"===o.tool&&(t=await this._getBox(e,i,n)),jr(t)||(o.activeComponent.destroy(),o.activeComponent=t,o.activeComponent&&(l.forEach(e=>e.remove()),l=this._getHandlesForComponent(o,i)))}});let s=[n.on("immediate-click",e=>{this._getFirstHit(Object(Yi["a"])(e)).then(t=>{var i;if(!o)return;if(null==(i=t.results)||!i.length)return void o.complete();const n=o.activeComponent;t.results.some(t=>{if(t.graphic){var i;const a=t.graphic;if("box"===(null==n?void 0:n.type)&&null!=(i=e.native)&&i.shiftKey&&r)return o.addToSelection(a),!0;a.layer===this.layer&&o.complete()}return!1})&&e.stopPropagation()})},qi["b"].WIDGET),n.on("key-down",e=>{if(this._getCommonUpdateOperationKeyDownHandlers(o,e),e.key!==Cr.snappingKey||e.repeat||(this.snappingOptions.enabledToggled=!0,e.stopPropagation()),e.key===Cr.constraintKey&&!e.repeat&&o){const e=o.activeComponent;e&&"box"===e.type&&(e.preserveAspectRatio=!e.preserveAspectRatio)}},qi["b"].WIDGET),n.on("key-up",e=>{var t;if(e.key===Cr.snappingKey&&"reshape"===(null==o||null==(t=o.activeComponent)?void 0:t.type)&&(this.snappingOptions.enabledToggled=!1,e.stopPropagation()),e.key===Cr.constraintKey&&o){const e=o.activeComponent;e&&"box"===e.type&&(e.preserveAspectRatio=!e.preserveAspectRatio)}},qi["b"].WIDGET)],l=this._getHandlesForComponent(o,i);return o}async _getGraphicMover(e,t,n){const{enableMoveAllGraphics:r}=t,a=await this._requireModule(i.e("chunk-63e4c91e").then(i.bind(null,"24be")));return jr(a)?a:new a.module.default({enableMoveAllGraphics:r,graphics:e,view:n,callbacks:{onGraphicMoveStart:({dx:e,dy:t,graphic:i})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:"move-start"},type:"update"})},onGraphicMove:({dx:e,dy:t,graphic:i})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:"move"},type:"update"}),onGraphicMoveStop:({dx:e,dy:t,graphic:i})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,t,n){const{enableRotation:r,enableScaling:a,preserveAspectRatio:o}=t,s=await this._requireModule(i.e("chunk-bc5f8c4a").then(i.bind(null,"4c3c")));return jr(s)?s:new s.module.default({graphics:e,enableRotation:r,enableScaling:a,preserveAspectRatio:o,layer:this._internalGraphicsLayer,view:n,callbacks:{onMoveStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onMove:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onMoveStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onScaleStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onScale:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onScaleStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onRotateStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onRotate:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onRotateStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"})}})}async _getReshape(e,t,n){const{enableMidpoints:r=!0}=t,a=await this._requireModule(i.e("chunk-f6fb21b8").then(i.bind(null,"053b")));return jr(a)?a:new a.module.default({enableMidpoints:r,graphic:e[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,view:n,callbacks:{onReshapeStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onReshape:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onReshapeStop:({mover:e,type:t})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e,type:t},type:"update"}),onMoveStart:({dx:e,dy:t,mover:i,type:n})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:n},type:"update"}),onMove:({dx:e,dy:t,mover:i,type:n})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:n},type:"update"}),onMoveStop:({dx:e,dy:t,mover:i,type:n})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:n},type:"update"}),onVertexAdd:({added:e,type:t,vertices:i})=>{const n=e.map(e=>Object(Li["b"])(e.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:n,vertices:i,type:t},type:"update"})},onVertexRemove:({removed:e,type:t,vertices:i})=>{const n=e.map(e=>Object(Li["b"])(e.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:n,vertices:i,type:t},type:"update"})}}})}_getHandlesForComponent(e,t){const i=e.activeComponent;switch(i.type){case"graphic-mover":return[i.on("graphic-click",({graphic:t,viewEvent:i})=>{var n;null!=(n=i.native)&&n.shiftKey&&(i.stopPropagation(),e.removeFromSelection(t))}),i.on("graphic-move-start",t=>e.addToHistory(Mr(t.allGraphics)))];case"box":return[i.on("graphic-click",i=>this._onTransformOrReshape2DGraphicClick(e,t,i)),i.on("move-start",t=>e.addToHistory(Mr(t.graphics))),i.on("rotate-start",t=>e.addToHistory(Mr(t.graphics))),i.on("scale-start",t=>e.addToHistory(Mr(t.graphics)))];case"reshape":return[i.on("graphic-click",i=>this._onTransformOrReshape2DGraphicClick(e,t,i)),i.on("move-start",t=>e.addToHistory(Mr([t.mover]))),i.on("reshape-start",t=>e.addToHistory(Mr([t.graphic]))),i.on("vertex-add",t=>e.addToHistory(Mr([t.oldGraphic]))),i.on("vertex-remove",t=>e.addToHistory(Mr([t.oldGraphic])))];case"move-3d":return[i.on("graphic-move-start",t=>{e.addToHistory(Mr(t.allGraphics)),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:t.allGraphics.length>0?t.allGraphics[0]:null,type:"move-start"},type:"update"})}),i.on("graphic-move",e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e.dx,dy:e.dy,mover:e.allGraphics.length>0?e.allGraphics[0]:null,type:"move"},type:"update"})}),i.on("graphic-move-stop",e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:e.allGraphics.length>0?e.allGraphics[0]:null,type:"move-stop"},type:"update"})}),i.on("immediate-click",i=>{i.shiftKey?this._toggleSelection([i.graphic],e,t):e.toggleTool()})];case"transform-3d":return[i.on("graphic-translate-start",t=>{e.addToHistory(Mr([t.graphic])),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:t.graphic,dx:t.dxScreen,dy:t.dyScreen,type:"move-start"},type:"update"})}),i.on("graphic-translate-stop",e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-stop"},type:"update"})}),i.on("graphic-rotate-start",t=>{e.addToHistory(Dr([t.graphic])),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:t.graphic,angle:t.angle,type:"rotate-start"},type:"update"})}),i.on("graphic-rotate-stop",e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate-stop"},type:"update"})}),i.on("graphic-scale-start",t=>{e.addToHistory(Dr([t.graphic])),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:t.graphic,xScale:t.xScale,yScale:t.yScale,type:"scale-start"},type:"update"})}),i.on("graphic-scale-stop",e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-stop"},type:"update"})}),i.on("graphic-translate",e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move"},type:"update"})}),i.on("graphic-rotate",e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate"},type:"update"})}),i.on("graphic-scale",e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale"},type:"update"})}),i.on("immediate-click",i=>{i.shiftKey?this._toggleSelection([i.graphic],e,t):e.toggleTool()})];case"reshape-3d":return[i.on("reshape",t=>{"reshape-start"===t.type&&e.addToHistory(Mr([t.mover])),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:t,type:"update"})}),i.on("move",t=>{"move-start"===t.type&&e.addToHistory(Mr([t.mover])),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:t,type:"update"})}),i.on("vertex-add",e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:e,type:"update"})}),i.on("vertex-remove",e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:e,type:"update"})}),i.on("immediate-click",i=>{i.shiftKey?this._toggleSelection([i.graphic],e,t):e.toggleTool()})];case"draw":case"draw-3d":return null;default:return}}_onTransformOrReshape2DGraphicClick(e,t,i){var n;const{graphic:r,viewEvent:a}=i;null!=(n=a.native)&&n.shiftKey?(a.stopPropagation(),e.removeFromSelection(r)):t.toggleToolOnClick&&(Object(Mi["j"])(r.geometry)||"extent"!==r.geometry.type?(a.stopPropagation(),e.toggleTool()):this._logError("sketch:reshape-extent","Reshape operation does not support graphics with geometry of type 'extent'."))}_setUpdateOperationHandle(e,t){this._operationHandle=e;const i=this.view.map;this._disablePopup(t);const n=()=>{if(e===this._operationHandle){const n=this.updateGraphics.toArray(),r=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),i&&i.remove(this._internalGraphicsLayer),this._restorePopup(t),this.emit("update",{graphics:n,state:"complete",aborted:e.cancelled,tool:r,toolEventInfo:null,type:"update"})}};e.on("complete",n)}_getCommonUpdateOperationClickHandlers(e,t,i){const n=Object(Yi["a"])(t);this._getFirstHit(n).then(n=>{const r=n.results;r.length&&(t.native.shiftKey&&this._toggleSelection(r.map(e=>e.graphic),e,i)||r.some(e=>e.graphic&&this.updateGraphics.indexOf(e.graphic)>-1))?t.stopPropagation():e.complete()})}_toggleSelection(e,t,i){const n=!!i.multipleSelectionEnabled;return e.some(e=>null!=e&&!(!n||e.layer!==this.layer)&&(-1===this.updateGraphics.indexOf(e)?t.addToSelection(e):t.removeFromSelection(e),!0))}_getCommonUpdateOperationKeyDownHandlers(e,t){if(!e)return;const i=t.key;i===Cr.undoKey&&e.canUndo()?(t.stopPropagation(),e.undo()):i===Cr.redoKey&&e.canRedo()?(t.stopPropagation(),e.redo()):i===Cr.cancelKey?(t.stopPropagation(),e.cancel()):Cr.deleteKeys.indexOf(i)>=0&&this._onDeleteKey(t)}_onDeleteKey(e){if(!this._operationHandle||"update"!==this._operationHandle.type)return;const t=this.activeComponent;if(Object(Mi["j"])(t)||"reshape"===t.type||"reshape-3d"===t.type)return;e.stopPropagation();const i=this.updateGraphics.toArray();this.layer.removeMany(i),this._emitDeleteEvent({graphics:i,tool:this.activeTool})}_drawMultipointGraphic(e,t,i){let n=null;if(!i&&t.length>1){const i=t.slice(0);i.pop(),n=e.createMultipoint(i,this.view.spatialReference)}else n=e.createMultipoint(t,this.view.spatialReference);this.createGraphic?this.createGraphic.geometry=n:this._set("createGraphic",new ii["a"](n,this.pointSymbol)),i&&1===t.length&&this._internalGraphicsLayer.add(this.createGraphic)}_drawVertexGraphics(e,t,i,n){if(!i.length)return;const{_doUnnormalization:r,activeLineSymbol:a,activeVertexSymbol:o,polygonSymbol:s,polylineSymbol:l,vertexSymbol:c,view:{spatialReference:u}}=this,h=!(!n||!n.userClicked),d="polygon"===t,p=d?s:l;if(1===i.length){this._removeLineGraphic(),this._removeActiveLineGraphic();const t=this.createPointFromVertex(i[0]),n=d?e.createPolygon([i],u,r,!0):e.createPolyline([i],u,r);this._vertexGraphics.length?this._vertexGraphics[0].geometry=t:this._vertexGraphics.push(new ii["a"](t,o)),this.createGraphic?this.createGraphic.set({geometry:n,symbol:p}):this._set("createGraphic",new ii["a"](n,p)),h&&this._internalGraphicsLayer.add(this._vertexGraphics[0])}else if(2===i.length){const t=this.createPointFromVertex(i[1]),n=e.createPolyline([i],u,r),a=d?e.createPolygon([i],u,r,!0):e.createPolyline([i],u,r);if(!this._vertexGraphics.length){const e=this.createPointFromVertex(i[0]),t=new ii["a"](e,c);this._vertexGraphics.push(t)}if(1===this._vertexGraphics.length){const e=this._vertexGraphics[0],i=new ii["a"](t,c);this._removeLineGraphic(),this._removeActiveFillGraphic(),this._vertexGraphics.push(i),this._internalGraphicsLayer.remove(e),this._internalGraphicsLayer.add(e)}else this._vertexGraphics[1].geometry=t;this._showActiveLineGraphic(n);const o=this._vertexGraphics[0];h&&(this._activeLineGraphic.symbol=l,o.symbol=c,this._internalGraphicsLayer.add(this._vertexGraphics[1])),this.createGraphic?this.createGraphic.set({geometry:a,symbol:p}):this._set("createGraphic",new ii["a"](a,p)),this._internalGraphicsLayer.remove(o),this._internalGraphicsLayer.add(o)}else if(i.length>2){const n=d?e.createPolygon([i],u,r,!0):e.createPolyline([i],u,r);"polygon"===t&&this._showFillGraphic(n);const s=i.map(e=>e.slice()),f=s.pop(),m=[s[s.length-1],f],g=e.createPolyline([s],u,r),v=e.createPolyline([m],u,r);this._showLineGraphic(g),this._showActiveLineGraphic(v);for(let e=0;e<s.length;e++){const t=this._vertexGraphics[e];if(t)h||e!==this._vertexGraphics.length-1?t.symbol=c:t.symbol=o;else{const t=this.createPointFromVertex(i[e]);this._showVertexGraphic(t)}}if(h){this._activeLineGraphic.symbol=l;const e=i.length-1,t=this.createPointFromVertex(i[e]);this._showVertexGraphic(t)}else this._activeLineGraphic.symbol=a;this.createGraphic?this.createGraphic.set({geometry:n,symbol:p}):(this._removeCreateGraphic(),this._set("createGraphic",new ii["a"](n,p)));for(const e of this._vertexGraphics)this._internalGraphicsLayer.remove(e),this._internalGraphicsLayer.add(e)}}_drawSegmentGraphic(e,t,i,n,r){if(!i.length)return;const a=!(null==n||!n.centered),o=!(null==n||!n.constrainToggle);let s;1===i.length?this._removeCenterIndicatorGraphic():("rectangle"===t?s=o?e.createSquare(i,r,a):e.createRectangle(i,r,a):"circle"===t&&(s=o?e.createEllipse(i,r,a):e.createCircle(i,r,a,this.view.resolution)),Object(Mi["k"])(s)&&s.extent&&s.extent.center&&this._showCenterIndicatorGraphic(s.extent.center)),s?this.createGraphic?this.createGraphic.geometry=s:(this._removeCreateGraphic(),this._set("createGraphic",new ii["a"](s,this.polygonSymbol)),this._internalGraphicsLayer.add(this.createGraphic)):this._removeCreateGraphic()}_showCenterIndicatorGraphic(e){this._centerIndicatorGraphic?this._centerIndicatorGraphic.geometry=e:(this._centerIndicatorGraphic=new ii["a"](e,this._centerSymbol),this._internalGraphicsLayer.add(this._centerIndicatorGraphic))}_removeCenterIndicatorGraphic(){this._centerIndicatorGraphic&&(this._internalGraphicsLayer.remove(this._centerIndicatorGraphic),this._centerIndicatorGraphic.destroy(),this._centerIndicatorGraphic=null)}_showActiveLineGraphic(e){this._activeLineGraphic?(this._activeLineGraphic.set({geometry:e,symbol:this.activeLineSymbol}),this._internalGraphicsLayer.remove(this._activeLineGraphic)):this._activeLineGraphic=new ii["a"](e,this.activeLineSymbol),this._internalGraphicsLayer.add(this._activeLineGraphic)}_showFillGraphic(e){this._activeFillGraphic?(this._activeFillGraphic.set({geometry:e,symbol:this.activeFillSymbol}),this._internalGraphicsLayer.remove(this._activeFillGraphic)):this._activeFillGraphic=new ii["a"](e,this.activeFillSymbol),this._internalGraphicsLayer.add(this._activeFillGraphic)}_showLineGraphic(e){this._lineGraphic?(this._lineGraphic.set({geometry:e,symbol:this.polylineSymbol}),this._internalGraphicsLayer.remove(this._lineGraphic)):this._lineGraphic=new ii["a"](e,this.polylineSymbol),this._internalGraphicsLayer.add(this._lineGraphic)}_showVertexGraphic(e,t){const i=t?this.activeVertexSymbol:this.vertexSymbol,n=new ii["a"](e,i);this._vertexGraphics.push(n),this._internalGraphicsLayer.add(n)}_resetCreateOperationGraphics(){this._removeActiveFillGraphic(),this._removeLineGraphic(),this._removeActiveLineGraphic(),this._removeVertexGraphics(),this._removeCloneGraphics()}_removeCreateGraphic(){this.createGraphic&&(this._internalGraphicsLayer.remove(this.createGraphic),this._set("createGraphic",null))}_removeCreateOperationGraphics(){this._removeCenterIndicatorGraphic(),this._removeActiveLineGraphic(),this._removeActiveFillGraphic(),this._removeLineGraphic(),this._removeVertexGraphics()}_removeActiveLineGraphic(){this._activeLineGraphic&&(this._internalGraphicsLayer.remove(this._activeLineGraphic),this._activeLineGraphic.destroy(),this._activeLineGraphic=null)}_removeActiveFillGraphic(){this._activeFillGraphic&&(this._internalGraphicsLayer.remove(this._activeFillGraphic),this._activeFillGraphic.destroy(),this._activeFillGraphic=null)}_removeLineGraphic(){this._lineGraphic&&(this._internalGraphicsLayer.remove(this._lineGraphic),this._lineGraphic.destroy(),this._lineGraphic=null)}_removeVertexGraphics(){this._vertexGraphics.length&&(this._internalGraphicsLayer.removeMany(this._vertexGraphics),this._vertexGraphics.forEach(e=>e.destroy()),this._vertexGraphics=[])}_removeDefaultLayer(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer.destroy(),this._internalGraphicsLayer=null)}_operationHandleForCreateAction(e,t,i){return new Tr({activeComponent:this._draw,tool:i,type:"create",onEnd:()=>{t.forEach(e=>e.remove()),t.length=0,this._removeCreateOperationGraphics(),this._internalGraphicsLayer&&this._internalGraphicsLayer.remove(this.createGraphic),this._displayDefaultCursor()},undo:()=>{e.undo(),this._emitUndoEvent({graphics:[this.createGraphic],tool:i})},redo:()=>{e.redo(),this._emitRedoEvent({graphics:[this.createGraphic],tool:i})},canUndo:()=>e&&e.canUndo(),canRedo:()=>e&&e.canRedo()})}_isComponentGraphic(e){const{activeComponent:t}=this;return!(!e||Object(Mi["j"])(t))&&(!(!e.attributes||!e.attributes.esriSketchTool)||("box"===t.type||"reshape"===t.type)&&t.isUIGraphic(e))}_snapLastPolygonVertexToFirst(e,t){if("polygon"!==e&&t.length<=2)return;const i=t[0],n=t[t.length-1],r=this.view.toScreen(new oi["a"](i[0],i[1],this.view.spatialReference)),a=this.view.toScreen(new oi["a"](n[0],n[1],this.view.spatialReference));this._isWithinScreenDistance(r,a,this._getVertexIntersectDistance())&&(n[0]=i[0],n[1]=i[1])}_getVertexIntersectDistance(){const e=3;return this.vertexSymbol&&"simple-marker"===this.vertexSymbol.type?Object(zi["g"])(this.vertexSymbol.size)/2+e:e}_isWithinScreenDistance(e,t,i){const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)<=i}_displayPointerCursor(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")}_displayCrosshairCursor(){this.view&&this.view.container&&"crosshair"!==this.view.cursor&&(this.view.cursor="crosshair")}_displayDefaultCursor(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)}_logError(e,t,i){Or.error(new Di["a"](e,t,i))}async _requireModule(e){const t=new AbortController;this._moduleLoaderAbortController=t;const i=await e;return this._moduleLoaderAbortController!==t||t.signal.aborted?{requireError:"aborted"}:{module:i}}_emitUndoEvent(e){this.emit("undo",{...e,type:"undo"})}_emitRedoEvent(e){this.emit("redo",{...e,type:"redo"})}_emitDeleteEvent(e){this.emit("delete",{...e,type:"delete"})}createPointFromVertex(e){return e.length>2?new oi["a"](e[0],e[1],e[2],this.view.spatialReference):new oi["a"](e[0],e[1],this.view.spatialReference)}test(){return this._operationHandle}wait(){return Object(Hi["i"])(this,"updating")}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){var t;return"3d"!==(null==(t=this.view)?void 0:t.type)||this.updateOnGraphicClick||Object(Mi["k"])(e)&&e.toggleToolOnClick}_disablePopup(e){if(!this._disablePopupEnabled(e))return;const t=this.view.popup;t&&Object(Mi["j"])(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=t.autoOpenEnabled,t.autoOpenEnabled=!1)}_restorePopup(e){if(!this._disablePopupEnabled(e))return;const t=this.view.popup;t&&Object(Mi["k"])(this._originalAutoOpenEnabled)&&(t.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)}async _waitViewReady(){this.view&&(Object(Mi["a"])(this._viewReadyAbortController),this._viewReadyAbortController=Object(ji["d"])(),await Object(ji["x"])(Object(Hi["j"])(this.view,"ready"),this._viewReadyAbortController.signal))}};function Ar(e,t){const i=e.history.undo.pop().updates,n=[];t.forEach((e,t)=>{const r=i[t],a={};null!=r&&(Object(Mi["k"])(r.geometry)&&(a.geometry=e.geometry,e.geometry=r.geometry),Object(Mi["k"])(r.symbol)&&(a.symbol=e.symbol,e.symbol=r.symbol),n.push(a))}),e.history.redo.push({updates:n})}function Ir(e,t){const i=e.history.redo.pop().updates,n=[];t.forEach((e,t)=>{const r=i[t],a={};null!=r&&(Object(Mi["k"])(r.geometry)&&(a.geometry=e.geometry,e.geometry=r.geometry),Object(Mi["k"])(r.symbol)&&(a.symbol=e.symbol,e.symbol=r.symbol),n.push(a))}),e.history.undo.push({updates:n})}function Mr(e){return{updates:e.map(e=>({geometry:e.geometry}))}}function Dr(e){return{updates:e.map(e=>({symbol:e.symbol}))}}function jr(e){return"requireError"in e&&"aborted"===e.requireError}Object(ui["a"])([Object(di["b"])({readOnly:!0})],Er.prototype,"_draw",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"updating",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"_operationHandle",void 0),Object(ui["a"])([Object(di["b"])({readOnly:!0})],Er.prototype,"activeTool",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"activeFillSymbol",void 0),Object(ui["a"])([Object(di["b"])()],Er.prototype,"activeLineSymbol",void 0),Object(ui["a"])([Object(di["b"])()],Er.prototype,"activeVertexSymbol",void 0),Object(ui["a"])([Object(di["b"])({readOnly:!0})],Er.prototype,"createGraphic",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"defaultCreateOptions",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"defaultUpdateOptions",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"layer",void 0),Object(ui["a"])([Object(di["b"])({types:Ui["e"]})],Er.prototype,"pointSymbol",void 0),Object(ui["a"])([Object(di["b"])({types:Ui["e"]})],Er.prototype,"polygonSymbol",void 0),Object(ui["a"])([Object(di["b"])({types:Ui["e"]})],Er.prototype,"polylineSymbol",void 0),Object(ui["a"])([Object(di["b"])({type:Ii,nonNullable:!0})],Er.prototype,"snappingOptions",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"_snappingManager",void 0),Object(ui["a"])([Object(di["b"])({readOnly:!0})],Er.prototype,"state",null),Object(ui["a"])([Object(di["b"])({readOnly:!0})],Er.prototype,"updateGraphics",void 0),Object(ui["a"])([Object(di["b"])()],Er.prototype,"updateOnGraphicClick",void 0),Object(ui["a"])([Object(di["b"])({types:Ui["e"]})],Er.prototype,"updatePointSymbol",void 0),Object(ui["a"])([Object(di["b"])({types:Ui["e"]})],Er.prototype,"updatePolygonSymbol",void 0),Object(ui["a"])([Object(di["b"])({types:Ui["e"]})],Er.prototype,"updatePolylineSymbol",void 0),Object(ui["a"])([Object(di["b"])({types:Ui["e"]})],Er.prototype,"vertexSymbol",void 0),Object(ui["a"])([Object(di["b"])({value:null})],Er.prototype,"view",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"cancel",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"complete",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"delete",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"create",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"update",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"undo",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"redo",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"canUndo",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"canRedo",null),Object(ui["a"])([Object(di["b"])()],Er.prototype,"toggleUpdateTool",null),Er=Object(ui["a"])([Object(mi["a"])(Sr)],Er);var Lr=Er,Rr=Lr;async function Nr(){return Promise.all([i.e("chunk-2d22cf8c"),i.e("chunk-252f2cfc")]).then(i.bind(null,"00ac"))}async function zr(){return Nr().then(({contains:e,intersects:t,overlaps:i,simplify:n})=>({contains:e,intersects:t,overlaps:i,simplify:n}))}async function Br(e){const{selector:t,candidates:i,currentSelection:n,options:r,view:a}=e;if(!(i&&i.length&&n&&a))return{added:[],removed:[]};const{overlaps:o,intersects:s,contains:l}=r,{spatialReference:c}=a;if(!t)return{added:[],removed:n.removeAll()};const u=t,h=await zr(),d=[],p=[];return i.forEach(e=>{const t=e.geometry,i=o&&!!h.overlaps(c,u,t),r=s&&!!h.intersects(c,u,t),a=l&&!!h.contains(c,u,t),f=n.includes(e);i||r||a?!f&&d.push(e):f&&p.push(e)}),n.removeMany(p),n.addMany(d),{added:d,removed:p}}let Vr=class extends Ri["a"].EventedAccessor{constructor(e){super(),this._activeOptions=null,this._dashedFillSymbol=new Vi["a"]({color:[0,0,0,0],outline:{style:"dash",color:[12,207,255],width:2}}),this._dashedLineSymbol=new Bi["a"]({style:"dash",color:[12,207,255],width:2}),this._defaultOptions={tool:"rectangle",createOptions:null,selectionOptions:{overlaps:!0,intersects:!0,contains:!1}},this._completed=!1,this._handles=new Gi["a"],this._sketchViewModel=new Rr,this._sketchGraphicsLayer=new si["a"]({listMode:"hide",internal:!0}),this._transparentPointSymbol=new Fi["a"]({color:[0,0,0,0],outline:{style:"none",width:0}}),this.candidates=null,this.geometry=null,this.options=null,this.selection=new vi["a"],this.view=null,this.candidates=e.candidates,this.options=e.options,this.view=e.view;const{_dashedFillSymbol:t,_dashedLineSymbol:i,_sketchViewModel:n,_sketchGraphicsLayer:r,_transparentPointSymbol:a}=this;n.set({layer:r,view:this.view,activePointSymbol:a,activeLineSymbol:i,activeVertexSymbol:a,activeFillSymbol:t,pointSymbol:a,polygonSymbol:t,polylineSymbol:i,vertexSymbol:a}),this._handles.add([n.on("create",e=>this._onSketchEvent(e)),n.on(["undo","redo"],e=>this._onSketchEvent(e))])}initialize(){this._load()}destroy(){this._handles.destroy(),this._handles=null}get state(){const{_completed:e,_sketchViewModel:{state:t}}=this;return e?"complete":"active"===t?"active":"disabled"}cancel(){this._sketchViewModel.cancel()}async _load(){await this.view.whenReady();const{options:e}=this,{tool:t,createOptions:i}=this._activeOptions={...this._defaultOptions,...e};this._sketchViewModel.create(t,i)}_onSketchEvent(e){const t="create"===e.type?e.graphic:e.graphics[0],i=(null==t?void 0:t.geometry)||null,n="create"===e.type&&"cancel"===e.state,r="create"===e.type&&"complete"===e.state;this._processSelectionGeometry(i,r,n)}_processSelectionGeometry(e,t,i){if(this._set("geometry",e),(t||i)&&(this._completed=!0),i)return void this._onComplete([],!0);const{_activeOptions:n,candidates:r,selection:a,view:o}=this;Br({selector:e,candidates:r,currentSelection:a,options:n.selectionOptions,view:o}).then(({added:e,removed:i})=>{t?this._onComplete(this.selection.toArray(),!1):(e.length||i.length)&&this.emit("selection-change",{added:e,removed:i,type:"selection-change"})})}_onComplete(e,t){this._handles.removeAll(),this.notifyChange("state"),this.emit("complete",{aborted:t,selection:e,type:"complete"})}};Object(ui["a"])([Object(di["b"])()],Vr.prototype,"_completed",void 0),Object(ui["a"])([Object(di["b"])()],Vr.prototype,"candidates",void 0),Object(ui["a"])([Object(di["b"])({readOnly:!0})],Vr.prototype,"geometry",void 0),Object(ui["a"])([Object(di["b"])()],Vr.prototype,"options",void 0),Object(ui["a"])([Object(di["b"])({readOnly:!0})],Vr.prototype,"selection",void 0),Object(ui["a"])([Object(di["b"])({readOnly:!0})],Vr.prototype,"state",null),Object(ui["a"])([Object(di["b"])({value:null})],Vr.prototype,"view",void 0),Vr=Object(ui["a"])([Object(mi["a"])("esri.widgets.support.Selector")],Vr);var Fr=Vr,Ur=Fr;let Gr=class extends(Object(Un["b"])(Si["a"])){constructor(e){super(e),this._defaultSelectionOptions={intersects:!0,overlaps:!0,contains:!0},this.candidates=null,this.options=null,this.view=null}draw(e){const{_defaultSelectionOptions:t,candidates:i,options:n,view:r}=this,a={...t,...n,...null==e?void 0:e.selectionOptions};return new Ur({candidates:i,options:{...e,selectionOptions:a},view:r})}async selectionFrom(e,t){const{_defaultSelectionOptions:i,candidates:n,options:r,view:a}=this,o=new vi["a"],s={...i,...r,...t};return await Br({selector:e,candidates:n,currentSelection:o,options:s,view:a}),o.toArray()}};Object(ui["a"])([Object(di["b"])()],Gr.prototype,"candidates",void 0),Object(ui["a"])([Object(di["b"])()],Gr.prototype,"options",void 0),Object(ui["a"])([Object(di["b"])({value:null})],Gr.prototype,"view",void 0),Gr=Object(ui["a"])([Object(mi["a"])("esri.widgets.support.Selector")],Gr);var Hr=Gr,Wr=Hr;const qr={base:"esri-sketch",verticalLayout:"esri-sketch--vertical",panel:"esri-sketch__panel",infoPanel:"esri-sketch__info-panel",section:"esri-sketch__section",toolSection:"esri-sketch__tool-section",infoSection:"esri-sketch__info-section",infoCountSection:"esri-sketch__info-count-section",menuContainer:"esri-sketch__menu-container",menuHeader:"esri-sketch__menu-header",menuTitle:"esri-sketch__menu-title",menuContent:"esri-sketch__menu-content",menuItem:"esri-sketch__menu-item",menuItemWrapper:"esri-sketch__menu-item-wrapper",featureCountBadge:"esri-sketch__feature-count-badge",featureCountText:"esri-sketch__feature-count-text",featureCountNumber:"esri-sketch__feature-count-number",button:"esri-sketch__button",selectedButton:"esri-sketch__button--selected",pointIcon:"esri-icon-map-pin",polygonIcon:"esri-icon-polygon",polylineIcon:"esri-icon-polyline",circleIcon:"esri-icon-radio-unchecked",rectangleIcon:"esri-icon-checkbox-unchecked",cursorIcon:"esri-icon-cursor",resetIcon:"esri-icon-trash",undoIcon:"esri-icon-undo",redoIcon:"esri-icon-redo",settingsIcon:"esri-icon-settings",actionToggle:"esri-sketch__action-toggle",actionToggleOn:"esri-sketch__action-toggle--on",actionTitle:"esri-sketch__item-action-title",actionIcon:"esri-sketch__item-action-icon",rectangleSelectIcon:"esri-icon-cursor-marquee",lassoSelectIcon:"esri-icon-lasso",disabled:"esri-disabled",esriWidget:"esri-widget",rotating:"esri-rotating",widgetIcon:"esri-icon-edit"},Zr={createTools:{point:!0,polyline:!0,polygon:!0,rectangle:!0,circle:!0},selectionTools:{"rectangle-selection":!0,"lasso-selection":!0},undoRedoMenu:!0,settingsMenu:!0};let Yr=class extends Ti["a"]{constructor(e,t){super(e,t),this._activeCreateOptions=null,this._activeSelectionInfo=null,this._menuOpen=!1,this._selector=new Wr,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.createGraphic=null,this.creationMode="continuous",this.defaultCreateOptions=null,this.defaultUpdateOptions=null,this.iconClass=qr.widgetIcon,this.label=void 0,this.layer=null,this.messages=null,this.snappingOptions=new Ii,this.updateGraphics=new vi["a"],this.view=null,this.viewModel=new Rr,this.visibleElements={...Zr},this._activateCreateTool=this._activateCreateTool.bind(this)}initialize(){const{view:e}=this;this._selector.view=e,this.own([this.viewModel.on("create",()=>this.scheduleRender()),this.viewModel.on("update",()=>this.scheduleRender()),this.viewModel.on("create",e=>this._onCreateOperation(e)),this.viewModel.on("delete",e=>this.emit("delete",e)),this.viewModel.on("undo",()=>this.scheduleRender()),this.viewModel.on("redo",()=>this.scheduleRender()),this.viewModel.watch("view",e=>this._selector.set({view:e})),this.viewModel.watch("state",()=>this.notifyChange("state"))])}get activeTool(){var e;return(null==(e=this._activeSelectionInfo)?void 0:e.tool)||this.viewModel.activeTool}set layout(e){"vertical"!==e&&(e="horizontal"),this._set("layout",e)}get state(){return this._activeSelectionInfo?"active":this.viewModel.state}castVisibleElements(e){return{...Zr,...e,createTools:{...Zr.createTools,...null==e?void 0:e.createTools},selectionTools:{...Zr.selectionTools,...null==e?void 0:e.selectionTools}}}create(e,t){this._activeCreateOptions=t||null,this.viewModel.create(e,t)}update(e,t){return this.viewModel.update(e,t)}complete(){}cancel(){this._cancelSelectionOperation(),this.viewModel.cancel()}undo(){}redo(){}delete(){}render(){const{label:e,layout:t,viewModel:{state:i}}=this;return Object(wi["a"])("div",{"aria-label":e,class:this.classes(qr.base,qr.esriWidget,{[qr.disabled]:"disabled"===i,[qr.verticalLayout]:"vertical"===t})},Object(wi["a"])("div",{role:"toolbar",class:qr.panel},this.renderTopPanelContents()),Object(wi["a"])("div",{class:this.classes(qr.panel,qr.infoPanel)},this.renderInfoPanelContents()))}renderTopPanelContents(){const e=this.classes(qr.section,qr.toolSection),{availableCreateTools:t,visibleElements:i}=this;return[Object(wi["a"])("div",{role:"menu",key:"selection-button-container",class:e},this.renderSelectionTools()),t&&t.length?Object(wi["a"])("div",{role:"menu",class:e},this.renderDrawButtons()):null,i.undoRedoMenu?Object(wi["a"])("div",{role:"menu",key:"undo-redo-menu-button-container",class:e},this.renderUndoRedoMenuButtons()):null,i.settingsMenu?Object(wi["a"])("div",{key:"settings-menu-button-container",class:qr.section},this.renderSettingsMenuButton()):null]}renderInfoPanelContents(){return this._menuOpen?this.renderSettingsMenu():this.updateGraphics.length?[Object(wi["a"])("div",{class:this.classes(qr.section,qr.infoSection,qr.infoCountSection),key:"feature-count-container"},this.renderFeatureCount()),Object(wi["a"])("div",{class:this.classes(qr.section,qr.infoSection),key:"delete-button-container"},this.renderDeleteButton())]:void 0}renderSettingsMenu(){const{settings:e}=this.messages;return[Object(wi["a"])("div",{role:"menu",class:qr.menuContainer,key:"settings-menu-container"},Object(wi["a"])("header",{class:qr.menuHeader,key:"settings-menu-header"},Object(wi["a"])("span",{class:qr.menuTitle},e)),Object(wi["a"])("div",{class:qr.menuContent,key:"settings-menu-content","aria-label":e},Object(wi["a"])("div",{class:qr.menuItemWrapper},this.renderSnappingToggleMenuItem())))]}renderSnappingToggleMenuItem(){var e;return Object(wi["a"])("div",{class:qr.menuItem,"aria-label":null==(e=this.messages)?void 0:e.snappingEnabled,key:"sketch-snapping-action-toggle",role:"menuitem"},this.renderSnappingToggle())}renderSnappingToggle(){const{messages:{snappingEnabled:e},viewModel:{snappingOptions:{enabled:t}}}=this,i=this.classes(qr.actionToggle,{[qr.actionToggleOn]:t});return Object(wi["a"])("div",{bind:this,role:"button",onclick:this._onSnappingToggleClick,onkeydown:this._onSnappingToggleKeyDown,class:i,tabindex:"0",title:e,"aria-label":e},this.renderActionIcon(),Object(wi["a"])("span",{class:qr.actionTitle},e))}_onSnappingToggleKeyDown(e){const t=Object(gi["a"])(e);"Enter"!==t&&" "!==t||(e.preventDefault(),this._toggleSnapping())}_onSnappingToggleClick(e){e.stopPropagation(),this._toggleSnapping()}renderActionIcon(){return Object(wi["a"])("span",{key:"action-icon","aria-hidden":"true",class:this.classes(qr.actionIcon)})}renderFeatureCount(){const{layout:e,messages:t,updateGraphics:{length:i}}=this,n=Object(yi["a"])(1===i?t.featureCount:t.featuresCount,{count:i});return Object(wi["a"])("div",{class:qr.featureCountBadge,"aria-label":n},Object(wi["a"])("span",{class:qr.featureCountNumber},"vertical"===e?i:n))}renderDeleteButton(){const e=this.messages.deleteFeature;return Object(wi["a"])("button",{"aria-label":e,bind:this,class:this.classes(qr.button,qr.resetIcon),onclick:this.delete,title:e,type:"button"})}renderSelectionTools(){return[this.renderDefaultSelectionButton(),this.renderRectangleSelectionButton(),this.renderLassoSelectionButton()]}renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return;const e=this.messages.selectFeature;return Object(wi["a"])("button",{"aria-label":e,bind:this,class:this.classes(qr.button,qr.cursorIcon,{[qr.selectedButton]:"ready"===this.state}),onclick:this.cancel,role:"menuitemradio",title:e})}renderRectangleSelectionButton(){var e,t;if("2d"!==(null==(e=this.view)?void 0:e.type)||!this.visibleElements.selectionTools["rectangle-selection"])return;const i=this.messages.selectRectangle;return Object(wi["a"])("button",{"aria-label":i,bind:this,class:this.classes(qr.button,qr.rectangleSelectIcon,{[qr.selectedButton]:"rectangle-selection"===(null==(t=this._activeSelectionInfo)?void 0:t.tool)}),onclick:this._activateRectangleSelectTool,role:"menuitemradio",title:i})}renderLassoSelectionButton(){var e,t;if("2d"!==(null==(e=this.view)?void 0:e.type)||!this.visibleElements.selectionTools["lasso-selection"])return;const i=this.messages.selectLasso;return Object(wi["a"])("button",{"aria-label":i,bind:this,class:this.classes(qr.button,qr.lassoSelectIcon,{[qr.selectedButton]:"lasso-selection"===(null==(t=this._activeSelectionInfo)?void 0:t.tool)}),onclick:this._activateLassoSelectTool,role:"menuitemradio",title:i})}renderDrawButtons(){const e=this.visibleElements.createTools;return this.availableCreateTools.map(t=>"point"===t&&e.point?this.renderPointButton():"polyline"===t&&e.polyline?this.renderPolylineButton():"polygon"===t&&e.polygon?this.renderPolygonButton():"rectangle"===t&&e.rectangle?this.renderRectangleButton():"circle"===t&&e.circle?this.renderCircleButton():void 0)}renderPointButton(){const e="point",t=this.messages.drawPoint,i=[qr.button,qr.pointIcon];return this.activeTool===e&&i.push(qr.selectedButton),Object(wi["a"])("button",{"aria-label":t,bind:this,class:this.classes(i),"data-tool-name":e,onclick:this._activateCreateTool,role:"menuitemradio",title:t,type:"button"})}renderPolygonButton(){const e="polygon",t=this.messages.drawPolygon,i=[qr.button,qr.polygonIcon];return this.activeTool===e&&i.push(qr.selectedButton),Object(wi["a"])("button",{"aria-label":t,bind:this,class:this.classes(i),"data-tool-name":e,onclick:this._activateCreateTool,role:"menuitemradio",title:t,type:"button"})}renderPolylineButton(){const e="polyline",t=this.messages.drawPolyline,i=[qr.button,qr.polylineIcon];return this.activeTool===e&&i.push(qr.selectedButton),Object(wi["a"])("button",{"aria-label":t,bind:this,class:this.classes(i),"data-tool-name":e,onclick:this._activateCreateTool,role:"menuitemradio",title:t,type:"button"})}renderCircleButton(){const e="circle",t=this.messages.drawCircle,i=[qr.button,qr.circleIcon];return this.activeTool===e&&i.push(qr.selectedButton),Object(wi["a"])("button",{"aria-label":t,bind:this,class:this.classes(i),"data-tool-name":e,onclick:this._activateCreateTool,role:"menuitemradio",title:t,type:"button"})}renderRectangleButton(){const e="rectangle",t=this.messages.drawRectangle,i=[qr.button,qr.rectangleIcon];return this.activeTool===e&&i.push(qr.selectedButton),Object(wi["a"])("button",{"aria-label":t,bind:this,class:this.classes(i),"data-tool-name":e,onclick:this._activateCreateTool,role:"menuitemradio",title:t,type:"button"})}renderUndoRedoMenuButtons(){return[this.renderUndoButton(),this.renderRedoButton()]}renderUndoButton(){const e=this.messages.undo,t=!this.viewModel.canUndo(),i=Object(_i["f"])()?qr.redoIcon:qr.undoIcon;return Object(wi["a"])("button",{"aria-label":e,bind:this,class:this.classes(qr.button,i),disabled:t,onclick:this.undo,title:e,type:"button"})}renderRedoButton(){const e=this.messages.redo,t=!this.viewModel.canRedo(),i=Object(_i["f"])()?qr.undoIcon:qr.redoIcon;return Object(wi["a"])("button",{"aria-label":e,bind:this,class:this.classes(qr.button,i),disabled:t,onclick:this.redo,title:e,type:"button"})}renderSettingsMenuButton(){const e=this.messages.settings,t=[qr.button,qr.settingsIcon];return this._menuOpen&&t.push(qr.selectedButton),Object(wi["a"])("button",{"aria-label":e,bind:this,class:this.classes(t),onclick:this._toggleMenu,title:e,type:"button"})}_cancelSelectionOperation(){var e,t;null==(e=this._activeSelectionInfo)||null==(t=e.operation)||t.cancel(),this._activeSelectionInfo=null,this._selector.candidates=null}_activateCreateTool(e){const t=e.target.getAttribute("data-tool-name");this.activeTool!==t?(this._activeSelectionInfo&&this._cancelSelectionOperation(),this.create(t)):this.cancel()}_onCreateOperation(e){if("complete"!==e.state)return;const{creationMode:t}=this,{type:i}=e;if("create"===i){const{tool:i,graphic:n}=e,r=this._activeCreateOptions;this._activeCreateOptions=null,"continuous"===t?this.create(i,r):"update"===t&&this.update([n])}}_toggleMenu(){this._menuOpen=!this._menuOpen,this.scheduleRender()}_toggleSnapping(){const{viewModel:{snappingOptions:e}}=this;this.viewModel.snappingOptions.enabled=!e.enabled,this.scheduleRender()}_onSelectionOperationComplete(e){const{viewModel:{defaultUpdateOptions:t}}=this,{selection:i}=e;if(this._activeSelectionInfo=null,!e.aborted&&i.length){const e=t.tool,n=i.length>1&&"reshape"===e?"transform":e;this.update(i,{...t,tool:n})}this.notifyChange("state")}_activateRectangleSelectTool(){if(this._activeSelectionInfo){const e=this._activeSelectionInfo.tool;if(this._cancelSelectionOperation(),"rectangle-selection"===e)return}else"active"===this.state&&this.cancel();this._selector.candidates=this._getSelectionCandidates();const e=this._selector.draw({tool:"rectangle"});e.once("complete",e=>this._onSelectionOperationComplete(e)),this._activeSelectionInfo={tool:"rectangle-selection",operation:e}}_activateLassoSelectTool(){if(this._activeSelectionInfo){const e=this._activeSelectionInfo.tool;if(this._cancelSelectionOperation(),"lasso-selection"===e)return}else"active"===this.state&&this.cancel();this._selector.candidates=this._getSelectionCandidates();const e=this._selector.draw({tool:"polygon",createOptions:{mode:"freehand"}});e.once("complete",e=>this._onSelectionOperationComplete(e)),this._activeSelectionInfo={tool:"lasso-selection",operation:e}}_getSelectionCandidates(){var e,t;return(null==(e=this.layer)||null==(t=e.graphics)?void 0:t.toArray())||[]}};Object(ui["a"])([Object(di["b"])()],Yr.prototype,"_activeSelectionInfo",void 0),Object(ui["a"])([Object(di["b"])()],Yr.prototype,"activeTool",null),Object(ui["a"])([Object(di["b"])({cast:e=>{if(!e||!e.length)return null;const t=new Set(["point","polyline","polygon","rectangle","circle"]);return e.filter(e=>t.has(e))}})],Yr.prototype,"availableCreateTools",void 0),Object(ui["a"])([Object(pi["a"])("viewModel.createGraphic")],Yr.prototype,"createGraphic",void 0),Object(ui["a"])([Object(di["b"])()],Yr.prototype,"creationMode",void 0),Object(ui["a"])([Object(pi["a"])("viewModel.defaultCreateOptions")],Yr.prototype,"defaultCreateOptions",void 0),Object(ui["a"])([Object(pi["a"])("viewModel.defaultUpdateOptions")],Yr.prototype,"defaultUpdateOptions",void 0),Object(ui["a"])([Object(di["b"])()],Yr.prototype,"iconClass",void 0),Object(ui["a"])([Object(di["b"])({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Yr.prototype,"label",void 0),Object(ui["a"])([Object(pi["a"])("viewModel.layer")],Yr.prototype,"layer",void 0),Object(ui["a"])([Object(di["b"])({value:"horizontal"})],Yr.prototype,"layout",null),Object(ui["a"])([Object(di["b"])(),Object(bi["a"])("esri/widgets/Sketch/t9n/Sketch")],Yr.prototype,"messages",void 0),Object(ui["a"])([Object(pi["a"])("viewModel.snappingOptions")],Yr.prototype,"snappingOptions",void 0),Object(ui["a"])([Object(di["b"])()],Yr.prototype,"state",null),Object(ui["a"])([Object(pi["a"])("viewModel.updateGraphics")],Yr.prototype,"updateGraphics",void 0),Object(ui["a"])([Object(pi["a"])("viewModel.view")],Yr.prototype,"view",void 0),Object(ui["a"])([Object(di["b"])(),Object(xi["a"])(["create","update","undo","redo"])],Yr.prototype,"viewModel",void 0),Object(ui["a"])([Object(di["b"])()],Yr.prototype,"visibleElements",void 0),Object(ui["a"])([Object(fi["a"])("visibleElements")],Yr.prototype,"castVisibleElements",null),Object(ui["a"])([Object(pi["a"])("viewModel.complete")],Yr.prototype,"complete",null),Object(ui["a"])([Object(pi["a"])("viewModel.undo")],Yr.prototype,"undo",null),Object(ui["a"])([Object(pi["a"])("viewModel.redo")],Yr.prototype,"redo",null),Object(ui["a"])([Object(pi["a"])("viewModel.delete")],Yr.prototype,"delete",null),Yr=Object(ui["a"])([Object(mi["a"])("esri.widgets.Sketch")],Yr);var Xr=Yr,Kr=Xr,$r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"red-yellow-list-dialog-container",attrs:{title:"户号列表",top:"15vh",width:"650px",visible:e.showme,modal:!1},on:{close:e.handleClose}},[i("div",{staticClass:"red-yellow-list-dialog staff_table"},[i("div",{staticClass:"street-title-box"},[i("h3",{staticClass:"h3"},[e._v("户号："+e._s(e.data.name))])]),e.tableListData.tableKeys.length?i("table-page",{attrs:{data:e.tableListData,filter:e.filter,customClass:"staff_table",hideKeyFilter:!0,hideSearch:!0},on:{search:e.search,resetSearch:e.resetSearch,sizeChange:e.sizeChange,currentChange:e.currentChange,tableSelectionChange:e.tableSelectionChange},scopedSlots:e._u([{key:"column_s2",fn:function(t){return[i("span",{staticClass:"act-t1",on:{click:function(i){return e.handleShowDetail(t.value)}}},[e._v(e._s(t.value.s2||"无"))])]}}],null,!1,4193504169)}):e._e()],1)]),i("door-detail",{attrs:{data:e.currentDetail},model:{value:e.detailVisible,callback:function(t){e.detailVisible=t},expression:"detailVisible"}})],1)},Qr=[],Jr=i("05d5"),ea=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"door-detail-dialog-container",attrs:{title:"居家隔离户信息",top:"18vh",width:"600px",visible:e.showme,modal:!1},on:{close:e.handleClose}},[i("div",{staticClass:"door-detail-container"},[i("div",{staticClass:"door-tab-wrapper"},[i("div",{staticClass:"door-tab-item",class:{active:1===e.currentTabIndex},on:{click:function(t){return e.changeTab(1)}}},[e._v("今日设备告警")]),i("div",{staticClass:"door-tab-item",class:{active:2===e.currentTabIndex},on:{click:function(t){return e.changeTab(2)}}},[e._v("告警统计")])]),i("div",{staticClass:"door-content-wrapper"},[i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.currentTabIndex,expression:"currentTabIndex === 1"}],staticClass:"door-content-item"},[e.alarmList&&e.alarmList.length?i("div",[i("el-timeline",{attrs:{reverse:!1}},e._l(e.alarmList,(function(t){return i("el-timeline-item",{key:t.id,attrs:{color:t.isActive?"#ff3233":"#3664d3",placement:"top"}},[i("div",{staticClass:"time-line-content",class:{active:t.isActive}},[i("span",{staticClass:"t1 tt"},[e._v(e._s(t.timeHMS))]),i("span",{staticClass:"t2 tt"},[e._v(e._s(t.eventName))])])])})),1)],1):i("div",{staticClass:"no-data"},[e._v("暂无数据")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:2===e.currentTabIndex,expression:"currentTabIndex === 2"}],staticClass:"door-content-item"},[i("div",{ref:"chart",staticClass:"chart"},[i("div",{staticClass:"no-data"},[e._v("暂无数据")])])])])])])},ta=[],ia=i("609f");function na(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function ra(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){na(a,n,r,o,s,"next",e)}function s(e){na(a,n,r,o,s,"throw",e)}o(void 0)}))}}var aa={name:"DoorDetail",props:{showme:{type:Boolean},data:{type:Object}},model:{prop:"showme",event:"toggle"},data:function(){return{alarmList:[],optionData:{},currentTabIndex:1}},watch:{data:{handler:function(){this.data&&this.data.deviceImei&&(this.currentTabIndex=1,this.getData(),this.getChartData())},immediate:!0}},mounted:function(){return ra(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{getData:function(){var e=this;return ra(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("data",e.data),t.next=3,Object(ia["b"])({imei:e.data.deviceImei}).then((function(t){console.log("获取设备告警",t),e.alarmList=t&&t.length?t.map((function(e){return e.isActive=["紧急报警","门磁打开"].indexOf(e.eventName)>-1,e})):[]}));case 3:case"end":return t.stop()}}),t)})))()},getChartData:function(){var e=this;return ra(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(ia["c"])({imei:e.data.deviceImei}).then((function(t){console.log("获取告警统计报表",t),e.optionData=t.option}));case 2:case"end":return t.stop()}}),t)})))()},initChart:function(e){if(e&&e.xAxis&&e.xAxis.length){var t=w.init(this.$refs["chart"]),i=e.series.map((function(e){return e.name}));console.log("legendData",i);var n=e.series.map((function(e){var t={name:e.name,type:"line",data:e.data};return t}));console.log("series",n);var r={tooltip:{trigger:"axis"},color:["#ff913f","#2f54eb","#71e7a2","#71ac5e","#ff223b","#1ee7e7"],legend:{data:i,textStyle:{color:"#fff"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#fff"}},data:e.xAxis[0].data},yAxis:{splitLine:{show:!1,lineStyle:{color:"#22395b"}},axisLine:{lineStyle:{color:"#fff"}},minInterval:1,type:"value"},series:n};t.setOption(r)}},handleClose:function(){this.$emit("toggle",!1)},changeTab:function(e){var t=this;this.currentTabIndex=e,2===e&&this.$nextTick((function(){t.initChart(t.optionData)}))}}},oa=aa,sa=(i("85a7"),Object(d["a"])(oa,ea,ta,!1,null,"b5d15ac8",null)),la=sa.exports,ca=(i("9307"),i("b575"));function ua(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function ha(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){ua(a,n,r,o,s,"next",e)}function s(e){ua(a,n,r,o,s,"throw",e)}o(void 0)}))}}var da={name:"DoorList",props:{showme:{type:Boolean},data:{type:Object}},components:{TablePage:Jr["a"],DoorDetail:la},model:{prop:"showme",event:"toggle"},mixins:[ca["a"]],watch:{data:{handler:function(){this.initData()},immediate:!0}},data:function(){return{filter:{pageNum:1,pageSize:10,rowTotal:0,pageSizes:[10,15]},detailVisible:!1,allTableData:[],currentDetail:{},tableListData:{selection:!1,tableData:[],tableKeys:[{id:"s2",label:"房号"},{id:"deviceImei",label:"设备imei"}],tableFunctions:[]}}},mounted:function(){},methods:{initData:function(){var e=this;return ha(o.a.mark((function t(){var i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=e.data.data,i&&i.length,i&&i.length&&(e.filter=e.$options.data().filter,e.allTableData=i.sort((function(e,t){return e.s2.localeCompare(t.s2)})),e.filter.rowTotal=i.length,e.getData());case 3:case"end":return t.stop()}}),t)})))()},getData:function(){var e=JSON.parse(JSON.stringify(this.allTableData)),t=e.splice((this.filter.pageNum-1)*this.filter.pageSize,this.filter.pageSize);this.$set(this.tableListData,"tableData",t)},handleClose:function(){this.$emit("toggle",!1)},handleShowDetail:function(e){console.log("row",e),this.detailVisible=!0,this.currentDetail=e}}},pa=da,fa=(i("5257"),i("62c2"),Object(d["a"])(pa,$r,Qr,!1,null,"e51b6034",null)),ma=fa.exports,ga=i("758a"),va=i("fc56"),ya=i("ac07"),_a=i("26be"),ba=i("f499");function xa(e){return Oa(e)||Sa(e)||Ta(e)||wa()}function wa(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ta(e,t){if(e){if("string"===typeof e)return Ca(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ca(e,t):void 0}}function Sa(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Oa(e){if(Array.isArray(e))return Ca(e)}function Ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function ka(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function Pa(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){ka(a,n,r,o,s,"next",e)}function s(e){ka(a,n,r,o,s,"throw",e)}o(void 0)}))}}var Ea=new ai["a"]({wkt:'PROJCS["GUANGZHOU2000",GEOGCS["GCS_China_Geodetic_Coordinate_System_2000",DATUM["D_China_2000",SPHEROID["CGCS2000",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["false_easting",0.0],PARAMETER["false_northing",0.0],PARAMETER["central_meridian",113.28],PARAMETER["scale_factor",1.0],PARAMETER["latitude_of_origin",0.0],UNIT["Meter",1.0]]'}),Aa={name:"ArcgisLayer",components:{GoodsDetail:_a["default"],PatientDetail:ga["default"],ArcgisGald:va["default"],DeviceDetail:ya["default"],DoorList:ma,FloatingPanelLayer:ba["default"]},props:{visible:{type:Boolean,default:!0}},watch:{visible:{handler:function(e){var t=this;e&&!this.view&&this.$nextTick((function(){t.initMap()})),e||(this.deviceVisible=!1,this.$store.commit("CLEAR_FLOARING"))},immediate:!0},deviceVisible:function(e){0==e&&(this.deviceInfo={})}},data:function(){return{view:null,map:null,patientDetailVisible:!1,patientDetailId:null,cameraListVisible:!1,deviceVisible:!1,goodsDetailVisible:!1,deviceInfo:{},videoList:[],layerList:[{label:"物资供应点",id:"goods",active:!0},{label:"确诊病例位置",id:"patient",active:!0},{label:"卡口分布",id:"police",active:!0},{label:"风险场所",id:"hotspot",active:!0},{label:"管控区域",id:"base",active:!0},{label:"实时监控",id:"camera",active:!0},{label:"门磁监控",id:"door",active:!0,showArrow:!1,arrowList:[{id:2,label:"今日告警门磁",total:""},{id:1,label:"所有门磁",total:""}]},{label:"基层党组织",id:"party",active:!0}],viewVideoList:{label:"摄像头列表",id:"cameraList",active:!1},dictMap:{name:"名称",status:"状态",range:"范围",startCloseDate:"开始封闭日期"},doorList:{},doorListVisible:!1,currentDoor:{},currTip:"",currTipStyle:{},doorType:2}},mounted:function(){return Pa(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},destroyed:function(){console.log("destroyed")},methods:{toggleLayer:function(e){if(console.log("index",e,this.layerList[e].id),"door"===this.layerList[e].id)return console.log("1111"),this.layerList[e].showArrow=!this.layerList[e].showArrow,!1;var t=!this.layerList[e].active;this.layerList[e].active=t;var i=this.map.findLayerById(this.layerList[e].id);i&&(i.visible=t)},initMap:function(){var e=this,t=new ri["default"]({url:"/yqfkarcgis/arcgis/rest/services/疫情防控/影像202202GZ2000/MapServer",title:"珠江街影像地图",id:"gz-nswx",opacity:1}),i=new ti["a"]({layers:[t]}),n=new ni["a"]({map:i,container:"viewDiv2",center:new oi["a"]({x:67180.74530712888,y:182730.69591480214,spatialReference:Ea}),zoom:4,background:{color:"#021144"}});this.view=n,this.map=i,n.on("click",(function(e){var t=e.mapPoint,i=t.x,n=t.y;console.log({x:i,y:n})})),n.on("click",(function(t){n.hitTest(t).then((function(t){var i=t.results;if(i.length&&i[0].graphic){var n=i[0].graphic,r=n.sourceLayer,a=n.attributes;r&&"patient"==r.id&&(e.patientDetailId=a.id,e.patientDetailVisible=!0),r&&"camera"==r.id&&(e.deviceVisible=!0,e.deviceInfo=a),console.log("sourceLayer",r),console.log("results[0].graphic",i[0].graphic),!r||"door1"!=r.id&&"door2"!=r.id||(e.currentDoor={data:e.doorList[i[0].graphic.attributes.name],name:i[0].graphic.attributes.name},e.doorListVisible=!0)}}))})),n.on("pointer-move",(function(t){var i=t.x,r=t.y;n.hitTest(t).then((function(t){var n=t.results;if(n.length&&n[0].graphic){var a=n[0].graphic,o=a.sourceLayer,s=a.attributes;if(!o||!s)return;var l=s.name,c=s.count,u=s.deviceName;if(o&&["door","hotspot","camera","police","party"].includes(o.id)){var h="";switch(o.id){case"door":h="".concat(l," ").concat(c,"户");break;case"camera":h="".concat(u);break;default:h="".concat(l);break}h&&h!==e.currTip&&(e.currTip=h,e.currTipStyle={top:r+15+"px",left:i+15+"px"})}}else e.currTip=""}))})),this.initBaseLayer(),this.initHotSpotLayer(),this.initPoliceLayer(),this.initPatientLayer(),this.initCameraLayer(),this.initGoodsLayer(),this.initPartyLayer(),this.initDoorLayer(),this.getDoorTotalCount()},initBaseLayer:function(){var e=new si["a"]({id:"base",title:"管控区域"});this.map.add(e),this.drawPoylgon({name:"健康管理区",style:{borderColor:"#3bd0fd",borderStyle:"dash",borderWidth:2,fillStyle:"none"},paths:[[[58255.008705655746,185181.53623314935],[58843.44321585821,184874.61895264813],[59529.244587460955,184832.28553464796],[60325.11284586414,185069.35267544893],[60875.44727986634,185450.35343745045],[61798.315792270034,186085.354707453],[63237.65200427578,186525.62225465468],[64685.454899881566,186940.48975105633],[65642.19014668539,186974.35648545646],[67047.65962429102,186678.02255945528],[67873.16127529433,185960.4711243524],[68719.82963529772,185367.80327235002],[69422.56437410053,184495.73486154652],[69972.89880810273,183809.9334899438],[70447.03308970462,182353.66391073796],[71158.23451210746,181422.32871473423],[71733.96899690977,180761.9273939316],[72123.43644251133,180711.1272923314],[72648.37082571343,180541.79362033072],[73257.97204491586,179847.52556512796],[75848.7772265262,176816.45283631588],[77237.31333693175,174970.71581150847],[77829.98118893412,172244.4436922976],[78710.5162833376,170737.3740114915],[77948.51475933453,169789.1054482877],[78676.64954893745,168468.30280668242],[76322.91150812803,166165.36486747322],[75425.44304652445,166470.16547707442],[73393.43898251632,169687.50524508735],[71903.30266891039,170364.8399330901],[71073.56767610706,170500.30687069063],[70277.69941770389,170771.2407458917],[69786.63176890189,171279.24176189382],[69718.89830010162,171245.37502749366],[69464.8977921006,171448.5754338945],[69177.03054969944,171076.04135549298],[68669.02953369741,171414.70869949434],[68550.49596329694,171245.37502749366],[68431.96239289647,171160.70819149332],[66992.62618089071,173616.04643550314],[65519.42323448481,175834.31753871203],[65028.355585682846,177205.9202819175],[65553.28996888494,177476.8541571186],[65485.55650008468,177798.58813391987],[65739.5570080857,178188.05557952143],[65350.089562484136,178526.7229235228],[62928.61805287445,180575.660354731],[60049.94562886293,182539.93094993877],[57865.54126005419,184233.26766994555],[58255.008705655746,185181.53623314935]]]}),this.drawLabel({text:"健康管理区",style:{color:"#3bd0fd",yoffset:20},coodinate:{x:62130.36853970862,y:185893.0022394147}}),this.drawPoylgon({name:"防控区",style:{borderColor:"#3266ff",borderWidth:2},color:[66,125,239,.2],paths:[[[64289.372857717324,182235.3949242002],[64564.540074718425,182527.49550840136],[64649.20691071876,182519.02882480132],[65169.90795212084,183145.56341120382],[65182.60797752089,183209.0635382041],[65305.374889721366,183331.83045040446],[65347.708307721536,183327.59710860444],[66342.54363072551,184394.39924220872],[65953.076185124,184690.73316821002],[67464.37920773005,186413.7032808169],[68751.31511493519,185262.2343112122],[69356.68299233762,184606.0663322096],[69978.98423694012,183708.59787060594],[70402.31841694178,182451.29535600092],[69263.54947273718,181320.99309539632],[69216.982712937,181359.09317159647],[68315.2809095334,180415.05795019268],[69157.71592773673,179521.8228303891],[68103.61381953252,178438.08732958479],[67341.61229552947,179356.72250018845],[67494.01260033008,179551.45622298925],[66185.90998412485,181486.0934255971],[65826.07593112341,180982.325751395],[64289.372857717324,182235.3949242002]]]}),this.drawLabel({text:"防控区",style:{color:"#3266ff",xoffset:0,yoffset:0},coodinate:{x:65525.50866332222,y:183856.76483360666}}),this.drawPoylgon({name:"封控管理区",color:[255,152,0,.2],style:{borderColor:"#ff9800",borderWidth:2},paths:[[[65720.24238612306,182815.36275080254],[66037.74302112438,183192.13017100384],[66816.67791232748,184051.49855640734],[67316.21224472945,184584.89962320955],[67993.54693273215,185567.0349208135],[68264.48080793323,185681.33514941394],[68734.3817477351,185334.20112181266],[69373.61635953769,184567.96625600956],[68607.38149373462,183755.1646304063],[67625.24619613068,182709.5292058021],[67468.61254953005,182929.662979403],[66621.94418952666,181943.29433999906],[65720.24238612306,182815.36275080254]]]}),this.drawPoylgon({name:"封闭区域",type:"polygon",attributes:{range:"珠江街道嘉安花园",startCloseDate:"2021-06-07"},color:[255,46,33,.2],paths:[[[65304.31655427148,182297.83671575057],[65549.85037867246,182602.6373253518],[65841.95096287366,182306.83256707562],[65603.8254866227,182052.8320590746],[65304.31655427148,182297.83671575057]]]}),this.drawLabel({text:"嘉安花园",style:{color:"#ff0000",yoffset:20,fontSize:18},coodinate:{x:65541.38369507232,y:182315.8284184005}}),this.drawPoylgon({name:"封闭区域",type:"polygon",attributes:{range:"珠江街道发展路、发展横路、灵新大道、珠江二路所包围区域",startCloseDate:"2021-06-11"},color:[255,46,33,.2],paths:[[[66427.21046672598,182139.08639824964],[66520.34398632636,182250.21162050008],[66592.31079692664,182192.00317074984],[66491.76892917624,182077.7029421494],[66427.21046672598,182139.08639824964]]]}),this.drawPoylgon({name:"封闭区域",type:"polygon",attributes:{range:"范围：珠江街道珠江西一路（142、144、146、148、150号）",startCloseDate:"2021-06-13"},color:[255,46,33,.2],paths:[[[65508.04612839725,181342.15980439656],[65640.86722737279,181488.21009649715],[65629.22553742274,181498.7934509972],[65680.02563902293,181555.41439757243],[65745.6424369232,181505.14346369723],[65562.02123634747,181300.3555541214],[65508.04612839725,181342.15980439656]]]}),this.drawLabel({text:"封闭管理区",style:{color:"#ff0000",xoffset:-120,yoffset:10},coodinate:{x:65787.97585492334,y:181989.8610997992}}),this.drawLabel({text:"封控管理区",style:{color:"#ff9800",xoffset:30,yoffset:20},coodinate:{x:69487.9165881381,y:184847.36681481058}}),this.drawMaker({name:"珠江街道办",style:{icon:"svg/quan.svg",size:13},coodinate:{x:66079.01810367446,y:182256.56163320033}}),this.drawLabel({text:"珠江街道办",style:{color:"#ff702a",fontSize:18,yoffset:20},coodinate:{x:66079.01810367446,y:182256.56163320033}}),this.drawMaker({name:"前线指挥部",style:{icon:"svg/star.svg"},coodinate:{x:66162.62660422479,y:182021.61116329927}}),this.drawLabel({text:"前线指挥部",style:{color:"#ff0000",fontSize:18},coodinate:{x:66162.62660422479,y:182021.61116329927}}),this.drawMaker({name:"北出入口",style:{icon:"svg/inout.svg"},coodinate:{x:65961.54286872395,y:184724.59990261015}}),this.drawLabel({text:"北出入口",style:{color:"#3266ff",fontSize:16,yoffset:12},coodinate:{x:65961.54286872395,y:184724.59990261015}}),this.drawMaker({name:"南出入口",style:{icon:"svg/inout.svg"},coodinate:{x:67407.22909342978,y:181267.0179874463}}),this.drawLabel({text:"南出入口",style:{color:"#3266ff",fontSize:16,yoffset:12},coodinate:{x:67407.22909342978,y:181267.0179874463}})},drawPoylgon:function(e){var t,i=this,n=e.paths,r=e.style,a=void 0===r?{}:r,o=e.name,s=void 0===o?"":o,l=e.attributes,c=void 0===l?{}:l,u=e.color,h=void 0===u?[60,136,255,.2]:u,d=e.layerId,p=void 0===d?"base":d,f=e.type,m=void 0===f?"polyline":f;"polyline"==m?t={type:"polyline",paths:n,spatialReference:Ea}:"polygon"==m&&(t={type:"polygon",rings:n,spatialReference:Ea});var g={type:"simple-fill",color:h,style:a.fillStyle||"solid",outline:{color:a.borderColor||"#FF2E21",width:a.borderWidth||4,style:a.borderStyle||"solid"}},v=Object.keys(c).map((function(e){return{fieldName:e,label:i.dictMap[e]}})),y=new ii["a"]({geometry:t,symbol:g,attributes:c,popupTemplate:{title:s,content:[{type:"fields",fieldInfos:v}]}});this.map.findLayerById(p).add(y)},drawLabel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,i=void 0===t?"文字内容":t,n=e.style,r=void 0===n?{}:n,a=e.coodinate,o=void 0===a?{}:a,s=e.layerId,l=void 0===s?"base":s,c=new ii["a"]({geometry:{type:"point",x:o.x,y:o.y,spatialReference:Ea},symbol:{type:"text",color:r.color||"#ff0f43",haloColor:r.haloColor||"#fff",haloSize:r.haloSize||"2px",yoffset:void 0!==r.yoffset?r.yoffset:-2*(r.fontSize||16),xoffset:void 0!==r.xoffset?r.xoffset:0,font:{size:r.fontSize||24},text:i}});this.map.findLayerById(l).add(c)},drawMaker:function(){var e,t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.style,r=void 0===n?{}:n,a=i.name,o=i.coodinate,s=void 0===o?{}:o,l=i.attributes,c=void 0===l?{}:l,u=i.layerId,h=void 0===u?"base":u;e=r.icon?{type:"picture-marker",url:"".concat(C["b"],"/static/images/").concat(r.icon||"svg/star.svg"),width:r.size||"20",height:r.size||"20"}:{type:"simple-marker",style:r.shape||"circle",color:r.color||"#3c88ff",size:"12",outline:{color:"#fff",width:2}};var d=null;if(Object.keys(c).length){var p=Object.keys(c).map((function(e){return{fieldName:e,label:t.dictMap[e]}}));d={title:a,content:[{type:"fields",fieldInfos:p}]}}var f=new ii["a"]({geometry:{type:"point",x:s.x,y:s.y,spatialReference:Ea},attributes:c,popupTemplate:d,symbol:e});this.map.findLayerById(h).add(f)},initDraw:function(){var e=new si["a"]({id:"canvas",title:"绘制面板"});this.map.add(e);var t=new Kr({layer:e,view:this.view,creationMode:"update"});this.view.ui.add(t,"top-right"),t.on("update",(function(e){e.graphics[0].geometry&&console.log(JSON.stringify(e.graphics[0].geometry.rings))})),this.sketch=t},initGirdLayer:function(){var e=new ci["a"]({symbol:{type:"text",color:"#fff",haloColor:"#3d83d1",haloSize:1,font:{size:12,weight:"bold"}},labelPlacement:"above-center",labelExpressionInfo:{expression:"\n            Console('hello world');\n            $feature.name+ ':' + $feature.count + IIF($feature.count > 10,  '非常高', '高')\n           "}}),t=new li["default"]({id:"grid",title:"网格图层",opacity:1,fields:[{name:"ObjectID",type:"string"},{name:"name",type:"string"}],outFields:["*"],objectIdField:"ObjectID",geometryType:"polygon",source:[],labelingInfo:[e],popupTemplate:{title:"{name}"},renderer:{type:"simple",symbol:{type:"simple-fill",size:12,outline:{width:1,color:"white"}},visualVariables:[{type:"color",field:"count",legendOptions:{title:"% population in poverty by county"},stops:[{value:10,color:[220,255,155,.5],label:"低于10人"},{value:50,color:[60,130,210,.5],label:"高于50人"}]}]}});this.map.add(t)},initHotSpotLayer:function(){var e=this;return Pa(o.a.mark((function t(){var i,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData({url:"".concat(C["b"],"/static/mock/hot-spots.json")});case 2:i=t.sent,new ci["a"]({symbol:{type:"text",color:"#fff",haloColor:"#ff0f43",haloSize:1,font:{size:12,weight:"normal"}},labelPlacement:"above-center",labelExpressionInfo:{expression:"return $feature.name"}}),n=new li["default"]({id:"hotspot",title:"风险场所",opacity:1,fields:[{name:"ObjectID",type:"string"},{name:"name",type:"string"},{name:"address",type:"string"}],outFields:["*"],objectIdField:"ObjectID",geometryType:"point",source:[],popupTemplate:{title:"{name}",content:"{address}"},renderer:{type:"simple",symbol:{type:"simple-marker",size:12,color:"#ff702a",outline:{width:2,color:"white"}},visualVariables:[{type:"size",valueExpression:"$view.scale",stops:[{value:5e5,size:3},{value:25e4,size:6},{value:125e3,size:8},{value:32e3,size:12}]}]}}),e.map.add(n),n.applyEdits({addFeatures:i}).then((function(e){console.log("deleteFeatures:".concat(e.deleteFeatureResults.length)),console.log("addFeatures:".concat(e.addFeatureResults.length))}));case 7:case"end":return t.stop()}}),t)})))()},initPoliceLayer:function(){var e=this;return Pa(o.a.mark((function t(){var i,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData({url:"".concat(C["b"],"/static/mock/police-spots.json")});case 2:i=t.sent,new ci["a"]({symbol:{type:"text",color:"#fff",haloColor:"#3c88ff",haloSize:1,font:{size:12,weight:"normal"}},labelPlacement:"above-center",labelExpressionInfo:{expression:"return $feature.name + '警力'+ $feature.count +'人'"}}),n=new li["default"]({id:"police",title:"卡口分布",opacity:1,fields:[{name:"ObjectID",type:"string"},{name:"count",type:"string"},{name:"count2",type:"string"},{name:"name",type:"string"}],outFields:["*"],objectIdField:"ObjectID",spatialReference:Ea,geometryType:"point",source:[],popupTemplate:{title:"{name}",content:function(e){var t=e.graphic,i=t.attributes,n=(i.name,i.count),r=i.count2;return"警力:".concat(n,"人  ").concat(r>0?"保安:"+r+"人":"")}},renderer:{type:"simple",symbol:{type:"simple-marker",size:12,color:"#5d71ff",outline:{width:1,color:"white"}},visualVariables:[{type:"size",valueExpression:"$view.scale",stops:[{value:5e5,size:1},{value:25e4,size:3},{value:125e3,size:6},{value:32e3,size:12}]}]}}),e.map.add(n),n.applyEdits({addFeatures:i}).then((function(e){console.log("deleteFeatures:".concat(e.deleteFeatureResults.length)),console.log("addFeatures:".concat(e.addFeatureResults.length))}));case 7:case"end":return t.stop()}}),t)})))()},initPatientLayer:function(){var e=this;return Pa(o.a.mark((function t(){var i,n,r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData({url:"".concat(C["b"],"/static/mock/patient-spots.json")});case 2:i=t.sent,n=new ci["a"]({symbol:{type:"text",color:"#fff",font:{size:12,weight:"bold"}},deconflictionStrategy:"none",labelPlacement:"center-center",labelExpressionInfo:{expression:"return $feature.num+'人' "}}),new ci["a"]({symbol:{type:"text",color:"#fff",haloColor:"#f00",haloSize:1,font:{size:12,weight:"normal"}},deconflictionStrategy:"none",labelPlacement:"above-center",labelExpressionInfo:{expression:"return $feature.address "}}),r=new li["default"]({id:"patient",title:"确诊病例位置",opacity:1,fields:[{name:"ObjectID",type:"string"},{name:"id",type:"string"},{name:"address",type:"string"},{name:"num",type:"string"}],outFields:["*"],objectIdField:"ObjectID",spatialReference:Ea,geometryType:"point",source:[],labelingInfo:[n],renderer:{type:"simple",symbol:{type:"simple-marker",size:20,color:"#f00",outline:{width:2,color:"white"}}}}),e.map.add(r),r.applyEdits({addFeatures:i}).then((function(e){console.log("deleteFeatures:".concat(e.deleteFeatureResults.length)),console.log("addFeatures:".concat(e.addFeatureResults.length))}));case 8:case"end":return t.stop()}}),t)})))()},initGoodsLayer:function(){var e=new si["a"]({id:"goods",title:"物资供应点"});this.map.add(e),this.drawPoylgon({type:"polygon",layerId:"goods",style:{borderWidth:2,borderColor:"#FFFF00"},name:"珠江市场",attributes:{status:"已关停"},color:[255,255,0,.2],paths:[[[66480.12723922638,182438.33074673818],[66505.52729002647,182427.21822451314],[66348.36447570084,182256.82621706245],[66326.13943125076,182276.40542288753],[66480.12723922638,182438.33074673818]]]}),this.drawPoylgon({type:"polygon",layerId:"goods",style:{borderWidth:2,borderColor:"#FFFF00"},name:"万顷沙市场",attributes:{status:"已关停"},color:[255,255,0,.2],paths:[[[67093.43263250323,183283.6761874291],[67144.76190182845,183332.8887858543],[67201.91201612867,183272.03449747906],[67152.69941770346,183222.29273132887],[67093.43263250323,183283.6761874291]]]}),this.drawPoylgon({type:"polygon",layerId:"goods",style:{borderWidth:2,borderColor:"#FFFF00"},name:"金誉综合市场",attributes:{status:"已关停"},color:[255,255,0,.2],paths:[[[66301.79771590033,182362.92434592568],[66382.23121010067,182446.532846476],[66401.81041592573,182430.12864700094],[66319.2602508254,182346.5201464506],[66301.79771590033,182362.92434592568]]]}),this.drawMaker({layerId:"goods",attributes:{status:"正在运行"},name:"珠江街封控管理物资保障中心",style:{color:"#29bc2c",shape:"square"},coodinate:{x:66361.06450110064,y:182386.7368935508}}),this.drawMaker({layerId:"goods",attributes:{status:"正在运行"},name:"物资保障瑞光分中心",style:{color:"#29bc2c",shape:"square"},coodinate:{x:66602.10039983911,y:182472.46206500125}}),this.drawMaker({layerId:"goods",attributes:{status:"正在运行"},name:"珠江街生活物资供应站",style:{color:"#29bc2c",shape:"square"},coodinate:{x:67174.9244621539,y:183304.84289642944}})},initCameraLayer:function(){var e=this;return Pa(o.a.mark((function t(){var i,n,r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=Object(C["e"])("DeviceMap"),t.next=3,e.getVideoListData();case 3:e.videoList=t.sent,n=e.videoList.map((function(e){return new ii["a"]({geometry:{type:"point",longitude:e.gz2000coordinate[0],latitude:e.gz2000coordinate[1],spatialReference:Ea},attributes:e})})),r=new li["default"]({id:"camera",title:"摄像头图层",opacity:1,fields:[{name:"ObjectID",type:"string"},{name:"deviceUid",type:"string"},{name:"id",type:"string"},{name:"deviceType",type:"string"},{name:"deviceName",type:"string"},{name:"livePlayUrl",type:"string"}],outFields:["*"],objectIdField:"ObjectID",geometryType:"point",source:[],renderer:{type:"unique-value",valueExpression:"return $feature.deviceType",uniqueValueInfos:i,visualVariables:[{type:"size",valueExpression:"$view.scale",stops:[{value:5e5,size:6},{value:25e4,size:10},{value:125e3,size:15},{value:32e3,size:20}]}]}}),e.map.add(r),r.applyEdits({addFeatures:n}).then((function(e){console.log("deleteFeatures:".concat(e.deleteFeatureResults.length)),console.log("addFeatures:".concat(e.addFeatureResults.length))}));case 8:case"end":return t.stop()}}),t)})))()},initPartyLayer:function(){var e=this;return Pa(o.a.mark((function t(){var i,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData({url:"".concat(C["b"],"/static/mock/party-spots.json")});case 2:i=t.sent,new ci["a"]({symbol:{type:"text",color:"#fff",haloColor:"#ff0f43",haloSize:1,font:{size:12,weight:"normal"}},labelPlacement:"above-center",labelExpressionInfo:{expression:"return $feature.name"}}),n=new li["default"]({id:"party",title:"风险场所",opacity:1,fields:[{name:"ObjectID",type:"string"},{name:"name",type:"string"},{name:"address",type:"string"},{name:"manager",type:"string"},{name:"num",type:"string"},{name:"telephone",type:"string"},{name:"type",type:"string"}],outFields:["*"],objectIdField:"ObjectID",geometryType:"point",source:i,popupTemplate:{title:"{name}",content:"地址：{address}<br/>党组织类型：{type}<br/>党组织书记：{manager}<br/>联系电话：{telephone}<br/>党员数：{num}<br/>"},renderer:{type:"unique-value",valueExpression:'return "party"',uniqueValueInfos:[{symbol:{type:"picture-marker",url:"".concat(C["b"],"/static/images/svg/party.svg")},value:"party"}],visualVariables:[{type:"size",valueExpression:"$view.scale",stops:[{value:5e5,size:6},{value:25e4,size:10},{value:125e3,size:15},{value:32e3,size:20}]}]}}),e.map.add(n);case 6:case"end":return t.stop()}}),t)})))()},getData:function(e){return Pa(o.a.mark((function t(){var i,n,r,a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.url,t.next=3,ei.a.get(i);case 3:return n=t.sent,r=n.data.data,a=[],r.forEach((function(e){!e.gz2000coordinate||e.gz2000coordinate.length<2||a.push(new ii["a"]({geometry:{type:"point",latitude:e.gz2000coordinate[1],longitude:e.gz2000coordinate[0],spatialReference:Ea},attributes:e}))})),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})))()},getVideoListData:function(){return Pa(o.a.mark((function e(){var t,i,n,r;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(ia["r"])();case 2:return t=e.sent,i=t.map((function(e){var t=e.deviceUid,i=e.deviceName,n=e.gz2000Location,r=e.id;return{gz2000coordinate:[n.latitude,n.longitude],deviceType:"camera",deviceUid:t,deviceName:i,id:r}})),e.next=6,Object(ia["g"])();case 6:return n=e.sent,r=n.map((function(e){var t=e.deviceUid,i=(e.deviceName,e.gz2000Location),n=e.id,r={};return Object.values(e.propertyValueMap).forEach((function(e){r[e.propCode]=e.propValue})),Object.assign({gz2000coordinate:[i.latitude,i.longitude],deviceType:"hcamera",deviceUid:t,deviceName:"高点摄像头",id:n},r)})),e.abrupt("return",[].concat(xa(i),xa(r)));case 9:case"end":return e.stop()}}),e)})))()},initDoorLayer:function(){var e=this;return Pa(o.a.mark((function t(){var i,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getDoorData();case 2:i=t.sent,new ci["a"]({symbol:{type:"text",color:"#fff",haloColor:"#ff0f43",haloSize:1,font:{size:12,weight:"normal"}},labelPlacement:"above-center",labelExpressionInfo:{expression:"return $feature.count"}}),n=new li["default"]({id:"door"+e.doorType,title:"门磁监控",opacity:1,fields:[{name:"ObjectID",type:"string"},{name:"count",type:"string"},{name:"name",type:"string"}],outFields:["*"],objectIdField:"ObjectID",geometryType:"point",source:i,renderer:{type:"simple",symbol:{type:"picture-marker",url:"".concat(C["b"],"/static/images/svg/door.svg")},visualVariables:[{type:"size",valueExpression:"$view.scale",stops:[{value:5e5,size:6},{value:25e4,size:10},{value:125e3,size:15},{value:32e3,size:20}]}]}}),e.map.add(n);case 6:case"end":return t.stop()}}),t)})))()},getDoorData:function(){var e=this;return Pa(o.a.mark((function t(){var i,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,2===e.doorType?Object(ia["f"])({}):Object(ia["e"])({});case 2:return i=t.sent,console.log("获取门磁数据",i),e.doorList=i,n=Object.keys(i).map((function(e){var t=i[e],n={};return n.name=e,n.count=t.length,new ii["a"]({geometry:{type:"point",latitude:t[0].gz2000&&t[0].gz2000.length?t[0].gz2000[1]:"",longitude:t[0].gz2000&&t[0].gz2000.length?t[0].gz2000[0]:"",spatialReference:Ea},attributes:n})})),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))()},getDoorTotalCount:function(){var e=this;Object(ia["d"])({}).then((function(t){console.log("门磁统计数",t);var i=e.layerList.find((function(e){return"door"===e.id}));i.arrowList[1].total=t.total,i.arrowList[0].total=t.alarm}))},viewList:function(){this.viewVideoList.active=!this.viewVideoList.active,this.cameraListVisible=!this.cameraListVisible},viewCamera:function(e){console.log(e),this.deviceInfo=e,this.deviceVisible=!0},showGoodsTable:function(e){e.stopPropagation(),e.preventDefault(),this.goodsDetailVisible=!0},handleClickArrowItem:function(e,t){var i=this.map.findLayerById(this.layerList[t].id+e.id),n=this.map.findLayerById(this.layerList[t].id+(1===e.id?2:1));this.doorType===e.id?(this.doorType="",this.layerList[t].active=!1,i&&(i.visible=!1)):(this.layerList[t].active=!0,this.doorType=e.id,n&&(n.visible=!1),i?i.visible=!0:this.initDoorLayer())}}},Ia=Aa,Ma=(i("42b5"),Object(d["a"])(Ia,$t,Qt,!1,null,null,null)),Da=Ma.exports,ja=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"red-yellow-list-dialog staff_table"},[e.tableListData.tableKeys.length?i("table-page",{attrs:{data:e.tableListData,filter:e.filter,customClass:"staff_table",hideKeyFilter:!0,hideSearch:!0},on:{search:e.search,resetSearch:e.resetSearch,sizeChange:e.sizeChange,currentChange:e.currentChange,tableSelectionChange:e.tableSelectionChange},scopedSlots:e._u([{key:"column_hs_check_time",fn:function(t){return[i("span",[e._v(e._s(t.value.hs_check_time||"无"))])]}},{key:"column_first_inject_time",fn:function(t){return[i("span",[e._v(e._s(t.value.first_inject_time||"无"))])]}},{key:"column_second_inject_time",fn:function(t){return[i("span",[e._v(e._s(t.value.second_inject_time||"无"))])]}},{key:"column_hh_type",fn:function(t){return[i("span",{style:"color:"+("黄码"===t.value.hh_type?"#FFFF00":"#F42A34")},[e._v(e._s(t.value.hh_type))])]}},{key:"column_hs_check_result",fn:function(t){return[i("span",[e._v(e._s(t.value.hs_check_result||"无"))])]}}],null,!1,1013530651)}):e._e()],1)},La=[];function Ra(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function Na(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Ra(a,n,r,o,s,"next",e)}function s(e){Ra(a,n,r,o,s,"throw",e)}o(void 0)}))}}var za={name:"RyList",components:{TablePage:Jr["a"]},props:["data"],mixins:[ca["a"]],watch:{data:function(e){this.getData()}},data:function(){return{filter:{pageNum:1,pageSize:15,rowTotal:1,pageSizes:[15,50,100,200]},tableListData:{selection:!1,tableData:[],tableKeys:[{id:"jz",label:"镇街",minWidth:60},{id:"USERNAME",label:"姓名",minWidth:80},{id:"hh_type",label:"粤康码状态"},{id:"hs_check_time",label:"7天内最后一次核酸检测时间"},{id:"hs_check_result",label:"最近一次核酸检测结果"},{id:"first_inject_time",label:"第一针接种时间"},{id:"second_inject_time",label:"第二针接种时间"}],tableFunctions:[]}}},methods:{getData:function(){var e=this;return Na(o.a.mark((function t(){var i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={},e.data&&e.data.type&&(i={street:e.data.name||"",healthCode:"red"===e.data.type?"红码":"黄码"}),Object.assign(i,{pageNum:e.filter.pageNum,pageSize:e.filter.pageSize}),t.next=5,Object(ia["j"])(i).then((function(t){e.tableListData.tableData=t.data,e.filter.rowTotal=t.rowTotal}));case 5:case"end":return t.stop()}}),t)})))()},editRow:function(e){var t=e.row;this.$emit("showRyDetail",t)}},mounted:function(){this.getData(),this.tableListData.tableFunctions=[{label:"查看详情",method:this.editRow}]}},Ba=za,Va=(i("269b"),Object(d["a"])(Ba,ja,La,!1,null,"2c9a35e8",null)),Fa=Va.exports,Ua=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ry-detail-container"},[i("div",{staticClass:"ry-box"},[i("div",{staticClass:"ty-t1"},[e._v("个人情况")]),i("div",{staticClass:"ty-conent-box box1"},[e.detail.PHONE?i("p",[e._v("联系电话："+e._s(e.detail.PHONE))]):e._e(),e.detail.BIRTHDAY?i("p",[e._v("出生日期："+e._s(e.detail.BIRTHDAY))]):e._e(),e.detail.jz?i("p",[e._v("所属镇街："+e._s(e.detail.jz))]):e._e(),e.detail.IDENTITY_TYPE?i("p",[e._v("联证件类型："+e._s(e.identityTypeMapping[e.detail.IDENTITY_TYPE]))]):e._e(),e.detail.idNumber?i("p",[e._v("身份证号码："+e._s(e.detail.idNumber))]):e._e(),e.detail.CHECK_TIME?i("p",[e._v("核查时间："+e._s(e.detail.CHECK_TIME))]):e._e(),e.detail.CHECK_HANDLE_SUGG?i("p",[e._v("疫情状态："+e._s(e.suggMapping[e.detail.CHECK_HANDLE_SUGG]))]):e._e(),e.detail.ARRIVAL_FROM?i("p",[e._v("抵穗来源地："+e._s(e.detail.ARRIVAL_FROM))]):e._e(),e.detail.CONF_TIME?i("p",[e._v("确诊时间："+e._s(e.detail.CONF_TIME))]):e._e(),e.detail.ADDR?i("p",[e._v("详情地址："+e._s(e.detail.ADDR))]):e._e(),e.detail.UNIT_TYPE?i("p",[e._v("隔离点与医院类型："+e._s(e.unitTypeMapping[e.detail.UNIT_TYPE]))]):e._e(),e.detail.SEPERATE_BEGIN?i("p",[e._v("隔离开始时间："+e._s(e.detail.SEPERATE_BEGIN))]):e._e(),e.detail.SEPERATE_END?i("p",[e._v("隔离结束时间："+e._s(e.detail.SEPERATE_END))]):e._e(),e.detail.SEPERATE_ADDR?i("p",[e._v("隔离地点："+e._s(e.detail.SEPERATE_ADDR))]):e._e()])]),i("div",{staticClass:"ry-box"},[i("div",{staticClass:"ty-t1"},[e._v("最近7天核酸检测情况")]),e.hsList&&e.hsList.length?i("div",{staticClass:"ty-conent-box box2"},e._l(e.hsList,(function(t,n){return i("div",{key:n,staticClass:"hs-item"},[i("span",{staticStyle:{flex:"2"}},[e._v("检测时间："+e._s(t.JCSJ))]),i("span",{staticStyle:{flex:"2"}},[e._v("采样时间："+e._s(t.CYRQ))]),i("span",{staticStyle:{flex:"1"}},[e._v("检测结果："+e._s(t.JCJIEGUO))])])})),0):i("div",{staticClass:"ty-conent-box box2"},[i("p",[e._v("无数据")])])]),i("div",{staticClass:"ry-box"},[i("div",{staticClass:"ty-t1"},[e._v("疫苗接种情况")]),i("div",{staticClass:"ty-conent-box "},[i("div",{staticClass:"ym-item"},[i("p",[e._v("针次：2")]),i("p",[e._v("接种时间："+e._s(e.detail.second_inject_time||"无数据"))])]),i("div",{staticClass:"ym-item"},[i("p",[e._v("针次：1")]),i("p",[e._v("接种时间："+e._s(e.detail.first_inject_time||"无数据"))])])])])])},Ga=[],Ha=i("c1df"),Wa=i.n(Ha);function qa(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function Za(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){qa(a,n,r,o,s,"next",e)}function s(e){qa(a,n,r,o,s,"throw",e)}o(void 0)}))}}var Ya={props:["data"],data:function(){return{detail:{},hsList:[],unitTypeMapping:{1:"发热门诊",2:"收治医院",3:"集中隔离医学观察",4:"集中隔离健康观察",5:"社区"},identityTypeMapping:{1:"身份证",3:"护照",4:"军官证",6:"港澳居民居住证",7:"台湾居民居住证",8:"港澳居民来往内地通行证",9:"台湾居民来往内地通行证",11:"出入境通行证",12:"一次有效台湾居民来往大陆通行证",13:"多次有效台湾居民来往大陆通行证",14:"解除隔离（发热患者核酸检测阴性）"},suggMapping:{1:"待核酸检测风险人员",2:"居家隔离健康管理",3:"集中隔离健康管理",4:"集中隔离医学观察（密切接触者）",5:"留院观察（新观待排）",6:"疑似病例",7:"阳性检测（无症、状感染者）",8:"确诊病例（细分为轻型、普通型、重型、危重型）",9:"确诊或阳性检测病例出院后隔离观察",10:"解除隔离（满规定观察期核酸检测阴性且无症状）",11:"确诊其他疾病排除新冠感染",12:"其它",13:"居家隔离等待核酸结果"}}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;return Za(o.a.mark((function t(){var i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(ia["i"])({idNumber:e.data.idNumber}).then((function(t){e.detail=t}));case 2:return i=Wa()().subtract("days",7).format("YYYY-MM-DD HH:mm:ss"),t.next=5,Object(ia["h"])({idcard:e.data.idNumber,starTime:i}).then((function(t){e.hsList=t||[]}));case 5:case"end":return t.stop()}}),t)})))()}},watch:{}},Xa=Ya,Ka=(i("3cde3"),Object(d["a"])(Xa,Ua,Ga,!1,null,"480b2f50",null)),$a=Ka.exports,Qa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"person-detail"},[i("div",{staticClass:"person-detail-t"},e._l(e.tabs,(function(t,n){return i("div",{key:n,staticClass:"item",class:{active:n==e.currIndex},on:{click:function(t){e.currIndex=n}}},[e._v(e._s(t.label))])})),0),i("div",{directives:[{name:"show",rawName:"v-show",value:0==e.currIndex,expression:"currIndex==0"}],staticClass:"person-detail-b"},[i("section",[i("h4",[e._v("人员信息")]),i("div",[i("table",{staticClass:"std"},[i("tr",[i("td",[i("span",[e._v("身份证号码：")]),i("span",[e._v(e._s(e.data.sfzhzhmMasking||"-"))])]),i("td",[i("span",[e._v("境外输入病例：")]),i("span",[e._v(e._s(e.data.sfjwsrbl||"-"))])])]),i("tr",[i("td",[i("span",[e._v("家庭住址：")]),i("span",[e._v(e._s(e.data.jtzz||"-"))])]),i("td",[i("span",[e._v("应解除观察日期：")]),i("span",[e._v(e._s(e.data.yjcgcrq||"-"))])])]),i("tr",[i("td",[i("span",[e._v("职业：")]),i("span",[e._v(e._s(e.data.zy||"-"))])])])]),i("div",{staticClass:"timeline"},[i("ul",e._l(e.timeline,(function(t,n){return t.time?i("li",{key:n,class:{active:t.active}},[i("span",{staticClass:"t"},[e._v(e._s(t.time))]),i("span",{staticClass:"v"},[e._v(e._s(t.value))])]):e._e()})),0)])])]),i("section",[i("h4",[e._v("人员信息")]),i("div",[i("table",{staticClass:"std"},[i("tr",[i("td",[i("span",[e._v("关联病例：")]),i("span",{staticClass:"prim"},[e._v(e._s(e.data.glblxm||"-"))])]),i("td",[i("span",[e._v("与患者关系：")]),i("span",[e._v(e._s(e.data.yhzgx||"-"))])]),i("td",[i("span",[e._v("关系类型：")]),i("span",[e._v(e._s(e.data.gxlx||"-"))])])]),i("tr",[i("td",[i("span",[e._v("接触频率：")]),i("span",[e._v(e._s(e.data.jcpv||"-"))])]),i("td",[i("span",[e._v("接触地址：")]),i("span",[e._v(e._s(e.data.jcdd||"-"))])]),i("td",[i("span",[e._v("接触方式：")]),i("span",[e._v(e._s(e.data.jcfs||"-"))])])]),i("tr",[i("td",[i("span",[e._v("最后接触日期：")]),i("span",[e._v(e._s(e.data.zhjcrq||"-"))])])])])])]),e.closeRelativeMap?i("section",[i("h4",[e._v("人员关系图谱")]),i("RelativeMap",{attrs:{id:e.data.sfzhzhm},on:{closeRelativeMap:function(t){e.closeRelativeMap=!1}}})],1):e._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.currIndex,expression:"currIndex==1"}],staticClass:"person-detail-b"},[i("section",[i("h4",[e._v("核酸检测")]),0===e.hsList.length?i("div",{staticClass:"hlist"},[e._v("暂无数据")]):e._e(),i("div",{staticClass:"hlist"},[i("ul",e._l(e.hsList,(function(t,n){return i("li",{key:n},[i("div",{staticClass:"l"},[i("p",[e._v("核酸采集时间："+e._s(t.time))]),i("p",[e._v("结果："+e._s(t.value))])]),i("div",{staticClass:"r"},[i("p",[e._v("备注："+e._s(t.remark))])])])})),0)])]),i("section",[i("h4",[e._v("健康检查")]),0===e.healthList.length?i("div",{staticClass:"hlist"},[e._v("暂无数据")]):e._e(),i("div",{staticClass:"hlist"},[i("ul",e._l(e.healthList,(function(t,n){return i("li",{key:n},[i("div",{staticClass:"l"},[i("p",[e._v("健康检查时间："+e._s(t.time))]),i("p",[e._v("体温："+e._s(t.temp))])]),i("div",{staticClass:"r"},[i("p",[e._v("症状："+e._s(t.hasState))]),i("p",[e._v("备注："+e._s(t.remark))])])])})),0)])])])])},Ja=[],eo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"relative_map"},[i("div",{ref:"chart",staticClass:"chart",style:{height:e.canvasHeight+"px"}},[e.errorMsg?i("div",{staticClass:"error"},[e._v(e._s(e.errorMsg))]):e._e()])])},to=[];function io(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function no(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){io(a,n,r,o,s,"next",e)}function s(e){io(a,n,r,o,s,"throw",e)}o(void 0)}))}}var ro={name:"relativeMap",props:["id"],data:function(){return{errorMsg:null,chart:null,maxChildCount:1,deep:0,chartData:[],linksData:[]}},computed:{canvasHeight:function(){return 100*this.maxChildCount}},methods:{getRelative:function(){var e=this;return no(o.a.mark((function t(){var i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(ia["o"])(e.id);case 2:i=t.sent,e.handlerRelativeData([i]),e.chartData.length||e.$emit("closeRelativeMap"),console.log(e.chartData),console.log(e.linksData),e.$nextTick((function(){e.initChart(i)}));case 8:case"end":return t.stop()}}),t)})))()},initChart:function(e){if(e&&Object.keys(e).length){var t=w.init(this.$refs["chart"]),i={};i={animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",tooltip:{formatter:function(e){var t=e.data,i=t.pname,n=t.tag,r=t.source,a=t.target;return r?"".concat(r,"->").concat(a):"姓名：".concat(i," <br/> 接触方式：").concat(n||"未知")},padding:5,textStyle:{color:"#fff"}},series:[{type:"graph",layout:"none",symbolSize:70,roam:!0,label:{formatter:function(e){var t=e.data;return"".concat(t.pname.trim()," ").concat(t.tag?"\n{a|"+t.tag.trim()+"}":"")},show:!0,align:"center",color:"#fff",fontSize:16,rich:{a:{fontSize:12,padding:[2,4],color:"#fff",backgroundColor:"#ff9300",lineHeight:18,borderRadius:10}}},edgeSymbol:["none","none"],edgeSymbolSize:[4,10],edgeLabel:{fontSize:20,show:!0},data:[],lineStyle:{opacity:.9,width:2,curveness:0,color:"#2151f4"},itemStyle:{borderWidth:1,borderType:"solid",borderColor:"#fff",color:function(e,t,i,n){return"0"==e.dataIndex?"#ff9f00":"#2151f4"}}}]},i.series[0].data=this.chartData,i.series[0].links=this.linksData,t.setOption(i),this.chart=t}else this.errorMsg="无"},handlerRelativeData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;this.maxChildCount=Math.max(this.maxChildCount,e.length);for(var n=0;n<e.length;n++){var r=e[n],a="".concat(r.name.trim());this.chartData.push({name:a,pname:r.name.trim(),relation:r.relationName,tag:r.tag,x:200*t,y:100*(n-e.length/2)}),i&&this.linksData.push({target:a,source:i.name,relation:r.relationName,label:{show:!0,color:"#fff",fontSize:12,lineHeight:16,formatter:function(e){return e.data.relation||"关系未知"}}}),r.children&&r.children.length&&this.handlerRelativeData(r.children,t+1,{name:a})}}},mounted:function(){this.getRelative()}},ao=ro,oo=(i("b306"),Object(d["a"])(ao,eo,to,!1,null,"0740800a",null)),so=oo.exports;function lo(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function co(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){lo(a,n,r,o,s,"next",e)}function s(e){lo(a,n,r,o,s,"throw",e)}o(void 0)}))}}var uo={name:"PersonDetail",props:["data"],components:{RelativeMap:so},data:function(){return{tabs:[{label:"基本信息"},{label:"健康登记"}],currIndex:0,timeline:[{value:"最后接触日期",time:this.data.zhjcrq},{value:"转为密接日期",time:this.data.zwmjrq},{value:"开始隔离时间",time:this.data.ksglsj},{value:"开始观察日期",time:this.data.ksgcrq}],hsList:[],healthList:[],relativeMapLength:1,closeRelativeMap:!0}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;return co(o.a.mark((function t(){var i,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Api().HealthExaminationController.get_searchExamination.request({path:{personId:e.data._id}});case 2:return i=t.sent,e.healthList=i.map((function(e){return{time:e.examinationTime,hasState:parseInt(e.symptom)>0?"有":"无",temp:e.temperature+"°C",remark:e.remarks}})),t.next=6,e.$Api().NucleicAcidExaminationController.get_searchExamination.request({path:{personId:e.data._id}});case 6:n=t.sent,e.hsList=n.map((function(e){return{time:e.examinationTime,value:parseInt(e.result)>0?"阳性":"阴性",remark:e.remarks}}));case 8:case"end":return t.stop()}}),t)})))()}}},ho=uo,po=(i("f16b"),Object(d["a"])(ho,Qa,Ja,!1,null,null,null)),fo=po.exports,mo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"detail_content"},[i("div",{staticClass:"title"},[e._v(" 基本信息 ")]),i("div",{staticClass:"basis_info"},e._l(e.basisInfo,(function(t,n){return i("div",{key:n,staticClass:"info_item"},[i("label",[e._v(e._s(t.label)+" : ")]),i("span",[e._v(e._s(e.data[n]||"0"))])])})),0),i("div",{staticClass:"title"},[i("div",[e._v("房间列表 (使用中: "),i("span",{staticClass:"room_count"},[e._v(e._s(e.data.rooms?e.data.rooms.length:"0"))]),e._v("间)")]),e._m(0)]),i("div",{staticClass:"room_list"},[e._l(e.data.rooms,(function(t){return i("div",{key:t.fjh,staticClass:"room"},[i("div",{staticClass:"room_name"},[e._v("房间"+e._s(t.fjh))]),i("div",{staticClass:"room_member"},e._l(t.personnels,(function(t){return i("div",{key:t.sfzhzhm,staticClass:"person",on:{click:function(i){return e.showContactDetail(t)}}},[i("i",{class:"密切接触者"===t.mjlx?"main":"minor"}),i("div",{staticClass:"person_name"},[e._v(e._s(t.xm))])])})),0)])})),e.data.rooms&&!e.data.rooms.length?i("div",{staticClass:"room_list_empty"},[e._v("当前没有房间")]):e._e()],2)])},go=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"legend"},[i("div",{staticClass:"main_icon"},[i("i"),e._v("密接者")]),i("div",{staticClass:"minor_icon"},[i("i"),e._v("次密接者")])])}],vo={name:"HotelDetail",props:["data"],data:function(){return{basisInfo:{ssjz:{label:"所属镇街"},jddh:{label:"酒店助理及电话"},glrs:{label:"隔离人数"},kyfjs:{label:"可用房间数"},kycws:{label:"可用床位数"},jddz:{label:"地址"}}}},methods:{showContactDetail:function(e){this.$emit("showContactDetail",e)}}},yo=vo,_o=(i("62be"),Object(d["a"])(yo,mo,go,!1,null,"56c50bd4",null)),bo=_o.exports,xo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"map_filter"},[i("div",{staticClass:"hotel_filter",on:{click:function(t){e.patchMapChange(0),e.showHotelFilter=!e.showHotelFilter}}},[i("p",[e._v("隔离酒店"),e.showHotelFilter?i("i",{staticClass:"el-icon el-icon-arrow-down"}):i("i",{staticClass:"el-icon el-icon-arrow-up"})]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showHotelFilter,expression:"showHotelFilter"}],staticClass:"popover"},[i("div",{staticClass:"popover_header"}),i("div",{staticClass:"popover_body"},[i("el-checkbox-group",{on:{change:e.hotelTypeChange},model:{value:e.hotelTypeCheckList,callback:function(t){e.hotelTypeCheckList=t},expression:"hotelTypeCheckList"}},e._l(e.hotelType,(function(t,n){return i("el-checkbox",{key:n,attrs:{label:n}},[e._v(e._s(t)+" "),i("div",{staticClass:"hotel_count"},[e._v(e._s(e.legendData[n]))])])})),1)],1),i("div",{staticClass:"popover_footer"})])]),i("div",{staticClass:"hot_map_filter",on:{click:function(t){e.patchMapChange(0),e.showHeatMapFilter=!e.showHeatMapFilter}}},[i("p",[e._v("重点人群热力图"),e.showHeatMapFilter?i("i",{staticClass:"el-icon el-icon-arrow-down"}):i("i",{staticClass:"el-icon el-icon-arrow-up"})]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showHeatMapFilter,expression:"showHeatMapFilter"}],staticClass:"popover"},[i("div",{staticClass:"popover_header"}),i("div",{staticClass:"popover_body"},[i("el-checkbox-group",{on:{change:e.heatMapTypeChange},model:{value:e.heatMapCheckList,callback:function(t){e.heatMapCheckList=t},expression:"heatMapCheckList"}},[i("el-checkbox",{attrs:{label:"密切接触者"}},[e._v("密接者热力分布图")]),i("el-checkbox",{attrs:{label:"密接的密接"}},[e._v("次密接者热力分布图")])],1)],1),i("div",{staticClass:"popover_footer"})])]),i("div",{staticClass:"hot_map_filter",on:{click:e.handleCheckRedYellow}},[i("p",[e._v(" 红黄码分布图 "),e.showRedYellow?i("i",{staticClass:"el-icon el-icon-check"}):i("i",{staticClass:"el-icon el-icon-close"})])]),i("div",{staticClass:"hot_map_filter",on:{click:function(t){return e.patchMapChange(4)}}},[i("p",[e._v(" 珠江街封控管理区 "),4==e.currLayer?i("i",{staticClass:"el-icon el-icon-check"}):i("i",{staticClass:"el-icon el-icon-close"})])]),i("div",{staticClass:"hot_map_filter",on:{click:function(t){return e.patchMapChange(3)}}},[i("p",[e._v("嘉安花园 "),3==e.currLayer?i("i",{staticClass:"el-icon el-icon-check"}):i("i",{staticClass:"el-icon el-icon-close"})])])])},wo=[];function To(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function So(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){To(a,n,r,o,s,"next",e)}function s(e){To(a,n,r,o,s,"throw",e)}o(void 0)}))}}var Oo={name:"MapFilter",props:["hotelType","currLayer"],data:function(){return{showHotelFilter:!1,showHeatMapFilter:!1,showRedYellow:!1,hotelTypeCheckList:["1","2","3"],heatMapCheckList:["密切接触者","密接的密接"],hotalData:[],redYellowData:[],heatMapData:[],legendData:{}}},methods:{hotelTypeChange:function(){var e=this;return So(o.a.mark((function t(){var i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=e.hotalData.filter((function(t){return e.hotelTypeCheckList.includes(t.type)})),e.$emit("setHotelData",i);case 2:case"end":return t.stop()}}),t)})))()},handleCheckRedYellow:function(){var e=this;return So(o.a.mark((function t(){var i,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.patchMapChange(0),e.showRedYellow=!e.showRedYellow,i=e.redYellowData,n=[],e.showRedYellow&&i.forEach((function(e,t){var i=Gt.find((function(t){return t.name.includes(e.street)}));i&&n.push({name:e.street,id:t,position:i.center,content:'<div class="red-yellow-marker-box">\n                       <div onclick="redYellowItemClick(this)" data-key="'.concat(e.street,'_red" class="red-yellow-marker-item red-marker-item"><div class="icon"></div><div class="street-name">').concat(e.street,'</div><span class="ry-count">').concat(e.redNum,'</span></div>\n                       <div onclick="redYellowItemClick(this)" data-key="').concat(e.street,'_yellow"  class="red-yellow-marker-item yellow-marker-item"><div class="icon"></div><span class="ry-count">').concat(e.yellowNum,"</span></div>\n                    </div>")})})),e.showRedYellow&&(e.hotelTypeCheckList=[],e.heatMapCheckList=[]),e.$emit("setRedYellowData",n);case 7:case"end":return t.stop()}}),t)})))()},heatMapTypeChange:function(){var e=this;return So(o.a.mark((function t(){var i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=e.heatMapData.filter((function(t){return e.heatMapCheckList.includes(t.mjlx)})),e.$emit("setHeatMapData",i);case 2:case"end":return t.stop()}}),t)})))()},getHotelData:function(){var e=this;return So(o.a.mark((function t(){var i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(ia["m"])();case 2:i=t.sent,e.hotalData=i.map((function(e){var t=JSON.stringify(e).split(" "),i={type:e.type,id:e.id,position:[e.jd,e.wd],content:'\n          <div class="map_hotel" onclick="mapItemClick(event)" extData='.concat(JSON.stringify(t),'>\n            <div class="map_hotel_icon" style="background-image:url(./static/mapIcon/Hotel_m_').concat(e.type,'.png);">\n              <div class="map_hotel_dot">').concat(e.glrs,'</div>\n            </div>\n            <div class="map_hotel_label">').concat(e.jkgcjd,"</div>\n          </div>\n          ")};return i}));case 4:case"end":return t.stop()}}),t)})))()},getRedYellowData:function(){var e=this;return So(o.a.mark((function t(){var i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(ia["q"])();case 2:i=t.sent,e.redYellowData=i.data,e.$emit("getRyTotal",{redTotal:i.redTotal,yellowTotal:i.yellowTotal});case 5:case"end":return t.stop()}}),t)})))()},getHeatMapData:function(){var e=this;return So(o.a.mark((function t(){var i,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(ia["k"])();case 2:i=t.sent,n={},i.forEach((function(e){e.longitude&&e.latitude&&(n[e.longitude+e.latitude]?n[e.longitude+e.latitude].count+=1:(n[e.longitude+e.latitude]={},n[e.longitude+e.latitude]["count"]=1,n[e.longitude+e.latitude]["lng"]=e.longitude,n[e.longitude+e.latitude]["lat"]=e.latitude,n[e.longitude+e.latitude]["mjlx"]=e.mjlx))})),e.heatMapData=Object.values(n);case 6:case"end":return t.stop()}}),t)})))()},patchMapChange:function(e){0!=e&&(this.showHotelFilter=!1,this.showHeatMapFilter=!1,this.showRedYellow=!1),this.$emit("MapChange",e)}},mounted:function(){var e=this;return So(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getHeatMapData();case 2:return t.next=4,e.getHotelData();case 4:return t.next=6,e.getRedYellowData();case 6:e.hotelTypeChange(),e.heatMapTypeChange();case 8:case"end":return t.stop()}}),t)})))()},watch:{hotalData:{handler:function(e){if(e&&e.length){var t={};e.forEach((function(e){t[e.type]?t[e.type]++:t[e.type]=1})),this.legendData=t,this.$forceUpdate()}}}}},Co=Oo,ko=(i("f9d8"),Object(d["a"])(Co,xo,wo,!1,null,"54cca289",null)),Po=ko.exports,Eo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layer"},[e.sgkrxmNum?n("div",{staticClass:"qzry"},[n("div",{staticClass:"more",on:{click:e.more}},[e._v("关联人员")]),n("div",{staticClass:"body"},e._l(e.sgkrxmNum,(function(t){return n("div",{key:t,staticClass:"item"},[n("i",{staticClass:"el-icon-user-solid"}),e._v(" "+e._s(t)+" ")])})),0),n("div",{staticClass:"total"},[e._v("共"+e._s(e.sgkrxmNum.length)+"位")])]):e._e(),e.glcsmcNum>-1?n("div",{staticClass:"cssl"},[e._v(" 场所数量 "),n("div",{staticClass:"num yellow"},[e._v(e._s(e.glcsmcNum))])]):e._e(),e.gfxrylbNum?n("div",{staticClass:"glrysl"},[n("img",{attrs:{src:i("7035"),alt:""}}),n("div",{staticClass:"body"},e._l(e.gfxrylbNum,(function(t){return n("div",{key:t.gfxrylb,staticClass:"item"},[n("label",{attrs:{title:t.gfxrylb}},[e._v(e._s(t.gfxrylb)+":")]),n("span",{staticClass:"red"},[e._v(e._s(t.count))])])})),0),n("img",{attrs:{src:i("94a8"),alt:""}})]):e._e(),e.detail?n("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"500px",visible:!0,modal:!1,"close-on-click-modal":!1,"custom-class":"place-detail"},on:{close:function(t){e.detail=null}}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:i("74b8")}}),e._v(" "+e._s(e.detail.glcsmc)+" ")]),n("div",{staticClass:"body"},[n("div",{staticClass:"location"},[n("div",[e._v("所属镇街: "+e._s(e.detail.sszj))]),n("div",[e._v("具体地址: "+e._s(e.detail.jtdz))])]),n("div",{staticClass:"tags"},e._l(e.detail.gfxrylb,(function(t,i){return n("div",{key:"tag_"+i,staticClass:"tag",class:e.detail.check===i?"active":"",on:{click:function(t){e.detail.check=i}}},[n("div",{staticClass:"bg"}),n("div",{staticClass:"text"},[e._v(" "+e._s(t.gfxrylb)+" "),n("div",{staticClass:"num yellow"},[e._v(e._s(t.peopleCount)+"人")])])])})),0),e.detail.gfxrylb.length?n("div",{staticClass:"list"},e._l(e.detail.gfxrylb[e.detail.check||0].peoples,(function(t,i){return n("div",{key:"people_"+(e.detail.check||0)+"_"+i,staticClass:"item"},[n("label",[e._v("姓名: "+e._s(t.glryxm))]),n("label",[e._v("身份证号: "+e._s(t.glrysfzh))]),n("label",[e._v("解除地点: "+e._s(t.jcdd))]),n("label",[e._v("接触时间: "+e._s(t.jcsj))]),n("label",[e._v("是否已排查: "+e._s(t.sfypc))]),n("label",[e._v("管控地点: "+e._s(t.gkdd))]),n("label",[e._v("未排查原因: "+e._s(t.wpcyy))])])})),0):e._e()])]):e._e()],1)},Ao=[];function Io(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function Mo(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Io(a,n,r,o,s,"next",e)}function s(e){Io(a,n,r,o,s,"throw",e)}o(void 0)}))}}var Do={name:"gzld",data:function(){return{glcsmcNum:null,sgkrxmNum:null,gfxrylbNum:null,detail:null}},mounted:function(){var e=this;return Mo(o.a.mark((function t(){var i,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Api().YqgkryController.get_getGlcsmcNum.request();case 2:return e.glcsmcNum=t.sent,t.next=5,e.$Api().YqgkryController.get_getSgkrxmNum.request();case 5:return e.sgkrxmNum=t.sent,t.next=8,e.$Api().YqgkryController.get_getGfxrylbNum.request();case 8:return e.gfxrylbNum=t.sent,i=["一般接触者","次密接人员","密接的密接","密接人员","密切接触者"],e.gfxrylbNum.sort((function(e,t){return i.indexOf(t.gfxrylb)-i.indexOf(e.gfxrylb)})),t.next=13,e.$Api().AddressLocationController.get_all.request();case 13:n=t.sent,n=n.map((function(e){return{id:e.id,latitude:e.lat,longitude:e.lng,name:e.name,num:1,type:"gald"}})),e.$emit("mapData",n);case 16:case"end":return t.stop()}}),t)})))()},methods:{more:function(){window.open(location.origin+location.pathname+"#/ldrygl/ldrydr","_blank")},showInfo:function(e){var t=this;return Mo(o.a.mark((function i(){var n;return o.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return console.log(e),i.next=3,t.$Api().ExaminePeopleController.get_address.request({params:{addressName:e.id}});case 3:n=i.sent,n.check=0,t.detail=n,console.log(n);case 7:case"end":return i.stop()}}),i)})))()}}},jo=Do,Lo=(i("7acc"),Object(d["a"])(jo,Eo,Ao,!1,null,"2e395f0e",null)),Ro=Lo.exports,No=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"community"},[i("community-map-layer",{attrs:{layerVisible:e.layerVisible},on:{choosed:e.handleChoose}}),e._l(e.detailList,(function(t,n){return e.detailList[n]?i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],key:n,attrs:{width:t.width||"722px","custom-class":t.class||"",title:t.name,visible:!0,modal:!1,id:"dialog_"+n,"close-on-click-modal":!1},on:{"hook:mounted":function(t){return e.dialogMounted("dialog_"+n)},close:function(){e.detailList[n]=!1}}},[i(t.component,{tag:"component",attrs:{data:t},on:{addDetail:e.addDetail}})],1):e._e()})),i("sidebar-panel",{staticClass:"community-l",attrs:{title:"嘉安花园整体情况"}},[i("div",{},[i("section",[i("p",[e._v("总人数："),i("count-to",{staticClass:"bn",attrs:{"end-val":e.summary.zrs_total}})],1),i("p",[e._v("离开后已回嘉安花园人数："),i("span",{staticClass:"n"},[e._v(e._s(e.summary.lkhyhjahy_total))])]),i("p",[e._v(" 离开后未回嘉安但在珠江辖内人数："),i("span",{staticClass:"n"},[e._v(e._s(e.summary.lkhwhjadzzjxn_total))])]),i("p",[e._v("5月25日前离开嘉安，不在珠江辖内人数："),i("span",{staticClass:"n"},[e._v(e._s(e.summary.wywrqlkjabzzjxn_total))])]),i("p",[e._v("5月25日后离开，不在珠江辖内人数："),i("span",{staticClass:"n"},[e._v(e._s(e.summary.wyeswrhlkbzzjxn_total))])])]),i("section",[i("p",[e._v("现有人数："),i("count-to",{staticClass:"bn",attrs:{"end-val":3729}})],1),i("p",[e._v("重点人群人数："),i("span",{staticClass:"n"},[e._v(e._s(e.summary.jsbzdrqlb_total))]),e._v("（如残疾、独居老人、怀孕、困难人员、精神病、自闭症等）")])]),i("section",[i("p",[e._v("转移到隔离酒店人数（人）："),i("span",{staticClass:"n"},[e._v(e._s(e.summary.zydgl_total))])]),i("p",[e._v("其他："),i("span",{staticClass:"n"},[e._v(e._s(e.summary.qt_total))])])])])]),i("div",{staticClass:"community-r"},[e._m(0),i("div",{staticClass:"toolbar"},[i("div",{staticClass:"rbtn",on:{click:e.gotoZD}},[i("span",[e._v("嘉安花园重点人群情况")])]),i("div",{staticClass:"rbtn",on:{click:function(t){e.imgVisible=!0}}},[i("span",[e._v("无人机巡航图片")])]),i("div",{staticClass:"rbtn",on:{click:function(t){e.videoVisible=!0}}},[i("span",[e._v("无人机巡航视频")])]),i("div",{staticClass:"rbtn",on:{click:function(t){e.layerVisible=!e.layerVisible}}},[i("span",[e._v(e._s(e.layerVisible?"隐藏":"显示")+"楼栋图层")])])])]),i("image-viewer",{model:{value:e.imgVisible,callback:function(t){e.imgVisible=t},expression:"imgVisible"}}),i("video-viewer",{model:{value:e.videoVisible,callback:function(t){e.videoVisible=t},expression:"videoVisible"}})],2)},zo=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"legend"},[n("img",{attrs:{src:i("b34e")}})])}],Bo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"community-map-layer"},[i("div",{ref:"dom",staticClass:"container",attrs:{id:"viewDiv"}})])},Vo=[],Fo=(i("6cc54"),i("e11e")),Uo=i("e1d7");function Go(e){return Zo(e)||qo(e)||Wo(e)||Ho()}function Ho(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wo(e,t){if(e){if("string"===typeof e)return Yo(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Yo(e,t):void 0}}function qo(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Zo(e){if(Array.isArray(e))return Yo(e)}function Yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Xo(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function Ko(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Xo(a,n,r,o,s,"next",e)}function s(e){Xo(a,n,r,o,s,"throw",e)}o(void 0)}))}}var $o={name:"CommunityMapLayer",components:{},props:{layerVisible:{type:Boolean,default:!0}},data:function(){return{map:null,src:"".concat("/yqfk","/static/map/jiaan.jpg"),polygons:[],polygonData:[],currPath:[]}},watch:{layerVisible:function(e){e?this.importData():this.clearMap()}},mounted:function(){this.initMap(),this.importData()},methods:{initMap:function(){this.map=Fo["map"](this.$refs["dom"],{crs:Fo["CRS"].Simple,zoom:2,minZoom:1,maxZoom:4,center:[190,308],attributionControl:!1,zoomControl:!1});var e=[[0,0],[360,640]];Fo["imageOverlay"](this.src,e).addTo(this.map)},renderBuildings:function(){var e=this;this.polygonData.forEach((function(t){var i=t.coordinate,n=t.id,r=t.name,a=Fo["polygon"](i,{opacity:.8,fillColor:"#33e732",fillOpacity:.4,color:"#fff"}).bindTooltip(r);a.on("click",(function(t){e.choosePolygon({name:r,id:n})})),a.addTo(e.map),e.polygons.push(a)}))},choosePolygon:function(e){this.$emit("choosed",e)},clearMap:function(){this.polygons.forEach((function(e){e.remove()})),this.currLine&&(this.currLine.remove(),this.currPath=[])},importData:function(){var e=this;return Ko(o.a.mark((function t(){var i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.polygonData.length<=0)){t.next=5;break}return t.next=3,ei.a.get("".concat("/yqfk","/static/mock/jiaan.json"));case 3:i=t.sent,e.polygonData=i.data.data;case 5:e.clearMap(),e.renderBuildings();case 7:case"end":return t.stop()}}),t)})))()},initBind:function(){var e=this;document.addEventListener("keyup",(function(t){switch(console.log(t.which),t.which){case 83:e.save();break;case 66:e.undo();break;case 101:e.exportData();break}}))},exportData:function(){console.log(JSON.stringify(this.polygonData))},save:function(){var e=this;this.$prompt("请输入楼栋名称,比如A街B栋为A_B","提示",{inputValue:"嘉顺*街*栋"}).then((function(t){var i=t.value,n=Go(e.currPath),r={id:parseInt(1e5*Math.random()),name:i,coordinate:n};console.log(r),e.polygonData.push(r),e.currPath=[],e.clearMap(),e.renderBuildings(),e.currLine&&(e.currLine.remove(),e.currLine=null),localStorage.setItem("polygonData",JSON.stringify(e.polygonData))})).catch((function(){}))},undo:function(){this.currPath.pop(),this.drawCurrPath()},drawCurrPath:function(){this.currLine&&(this.currLine.remove(),this.currLine=null),this.currLine=Object(Uo["antPath"])(this.currPath,{delay:100,dashArray:[5,10],weight:3,color:"#f00",pulseColor:"#fff"}),this.currLine.addTo(this.map)}}},Qo=$o,Jo=(i("3876"),i("f080"),Object(d["a"])(Qo,Bo,Vo,!1,null,null,null)),es=Jo.exports,ts=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("table",{staticClass:"std"},[i("tr",[i("td",[i("span",[e._v("总人数（人）：")]),i("span",{staticClass:"red"},[e._v(e._s(e.data["zrs_total"]))])]),i("td",[i("span",[e._v("现有人数（人）：")]),i("span",{staticClass:"red"},[e._v(e._s(e.data["xyr_total"]))]),i("div",{staticClass:"btn",on:{click:e.showPeopleDetail}},[e._v("人员明细")])])]),i("tr",[i("td",[i("span",[e._v("转移到隔离酒店人数（人）：")]),i("span",[e._v(e._s(e.data["zydgl_total"]))])]),i("td",[i("span",[e._v("离开后已回嘉安花园人数：")]),i("span",[e._v(e._s(e.data["lkhyhjahy_total"]))])])]),i("tr",[i("td",[i("span",[e._v("5月25日前离开嘉安，不在珠江辖内人数：")]),i("span",[e._v(e._s(e.data["wywrqlkjabzzjxn_total"]))])]),i("td",[i("span",[e._v("离开后未回嘉安但在珠江辖内人数：")]),i("span",[e._v(e._s(e.data["lkhwhjadzzjxn_total"]))])])]),i("tr",[i("td",[i("span",[e._v("5月25日后离开，不在珠江辖内人数：")]),i("span",[e._v(e._s(e.data["wyeswrhlkbzzjxn_total"]))])]),i("td",[i("span",[e._v("其他：")]),i("span",[e._v(e._s(e.data["qt_total"]))])])]),i("tr",[i("td",[i("span",[e._v("重点人群人数：")]),i("span",[e._v(e._s(e.data["jsbzdrqlb_total"]))]),i("br"),e._v(" （如残疾、独居老人、怀孕、困难人员、精神病、自闭症等） ")])])])])},is=[];function ns(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function rs(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(i),!0).forEach((function(t){as(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ns(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function as(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function os(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function ss(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){os(a,n,r,o,s,"next",e)}function s(e){os(a,n,r,o,s,"throw",e)}o(void 0)}))}}var ls={name:"BuildingDetail",props:["data"],data:function(){return{}},methods:{showPeopleDetail:function(){var e=this;return ss(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("addDetail",rs(rs({},e.data),{},{id:(new Date).getTime()+e.data.j+e.data.d,name:"房号人员列表",component:"StaffTable",class:"dialog-staff"}));case 1:case"end":return t.stop()}}),t)})))()}}},cs=ls,us=(i("e7da"),i("cec5"),Object(d["a"])(cs,ts,is,!1,null,"1e648acc",null)),hs=us.exports,ds=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"staff_table"},[e.tableListData.tableKeys.length?i("table-page",{attrs:{data:e.tableListData,filter:e.filter,customClass:"staff_table",hideKeyFilter:!0,hideSearch:!0},on:{search:e.search,resetSearch:e.resetSearch,sizeChange:e.sizeChange,currentChange:e.currentChange,tableSelectionChange:e.tableSelectionChange},scopedSlots:e._u([{key:"column_xm",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.showPersonDetail(t.value)}}},[e._v(e._s(t.value.xm))])]}}],null,!1,668416121)}):e._e()],1)},ps=[];function fs(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function ms(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){fs(a,n,r,o,s,"next",e)}function s(e){fs(a,n,r,o,s,"throw",e)}o(void 0)}))}}var gs={methods:{getTableKeys:function(){var e=arguments,t=this;return ms(o.a.mark((function i(){var n;return o.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=e.length>0&&void 0!==e[0]?e[0]:[],t.tableShow=!1,t.tableListData=t.$options.data().tableListData,t.tableListData.tableKeys.sort((function(e,t){return n.indexOf(t.id)-n.indexOf(e.id)})),t.tableShow=!0,t.resetSearch();case 6:case"end":return i.stop()}}),i)})))()}}};function vs(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ys(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?vs(Object(i),!0).forEach((function(t){_s(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vs(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function _s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function bs(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function xs(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){bs(a,n,r,o,s,"next",e)}function s(e){bs(a,n,r,o,s,"throw",e)}o(void 0)}))}}var ws={name:"StaffTable",mixins:[ca["a"],gs],props:["data"],components:{TablePage:Jr["a"]},data:function(){return{filter:{pageNum:1,pageSize:15,rowTotal:1,pageSizes:[15,50,100,200],jdfh:"",sortOrder:"asc",sortName:"fh"},tableListData:{selection:!1,tableData:[],tableKeys:[{id:"fh",label:"房号",minWidth:60},{id:"xm",label:"姓名",minWidth:80},{id:"lxfs",label:"联系方式",minWidth:120},{id:"jj",label:"居家",minWidth:80},{id:"zydgl",label:"隔离酒店",minWidth:80},{id:"lkhwhjadzzjxn",label:"离开后是否在珠江辖内",minWidth:120}],tableFunctions:[]}}},methods:{showRoomDetail:function(e){var t=this;return xs(o.a.mark((function i(){var n,r;return o.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n={d:t.data.d,j:t.data.j,fh:e.fh},i.next=3,Object(ia["p"])(n);case 3:r=i.sent,t.$emit("addDetail",{tableData:r,id:"RoomDetail",name:e.fh+"人员情况",component:"RoomDetail",class:"dialog-staff"});case 5:case"end":return i.stop()}}),i)})))()},showPersonDetail:function(e){this.$emit("addDetail",ys(ys({},e),{},{name:"人员情况",component:"PersonDetail",class:"dialog-person"}))},getData:function(){var e=this;return xs(o.a.mark((function t(){var i,n,r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n in i={d:e.data.d,j:e.data.j,page:e.filter.pageNum,pageSize:e.filter.pageSize},i)i[n]||delete i[n];return delete i.pageSizes,t.next=5,e.$Api().ExaminePeopleController.get_people.request({params:i});case 5:r=t.sent,e.tableListData.tableData=r.data,e.filter.pageNum=r.page,e.filter.pageSize=r.pageSize,e.filter.rowTotal=r.total;case 10:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getTableKeys([]),this.getData()}},Ts=ws,Ss=(i("a375"),Object(d["a"])(Ts,ds,ps,!1,null,null,null)),Os=Ss.exports,Cs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"room_detail"},[e.tableListData.tableKeys.length?i("table-page",{attrs:{data:e.tableListData,filter:e.filter,hideSearch:!0,hideKeyFilter:!0},on:{search:e.search,resetSearch:e.resetSearch,sizeChange:e.sizeChange,currentChange:e.currentChange,tableSelectionChange:e.tableSelectionChange},scopedSlots:e._u([{key:"column_xm",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.showPersonDetail(t.value)}}},[e._v(e._s(t.value.xm))])]}}],null,!1,668416121)}):e._e()],1)},ks=[];function Ps(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Es(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ps(Object(i),!0).forEach((function(t){As(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ps(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function As(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Is={name:"RoomDetail",props:["data"],mixins:[ca["a"],gs],components:{TablePage:Jr["a"]},data:function(){return{filter:{pageNum:1,pageSize:C["g"][0],rowTotal:0,pageSizes:C["g"],xm:"",fjh:"",sjhm:""},tableListData:{selection:!1,tableData:[],tableKeys:[{id:"index",label:"序号",minWidth:60},{id:"xm",label:"姓名",minWidth:100},{id:"lxfs",label:"联系方式",minWidth:160},{id:"jj",label:"居家",minWidth:60},{id:"zydgl",label:"隔离酒店",minWidth:120},{id:"lkhwhjadzzjxn",label:"是否珠江街辖内",minWidth:120}],tableFunctions:[]}}},methods:{showPersonDetail:function(e){this.$emit("addDetail",Es(Es({},e),{},{name:"人员情况",component:"PersonDetail"}))},getData:function(){this.tableListData.tableData=this.data.tableData}},mounted:function(){this.getTableKeys([]),this.getData()}},Ms=Is,Ds=Object(d["a"])(Ms,Cs,ks,!1,null,"ffd237f2",null),js=Ds.exports,Ls=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"person-detail"},[i("div",{staticClass:"basis_info"},[i("div",{staticClass:"item"},[e._v("姓名: "+e._s(e.data.xm))]),i("div",{staticClass:"item"},[e._v("房间号: "+e._s(e.data.fh))]),i("div",{staticClass:"item"},[e._v("电话号码: "+e._s(e.data.lxfs))])]),i("div",{staticClass:"time-line"},[i("div",{staticClass:"title",staticStyle:{"margin-bottom":"10px"}},[e._v("核酸检测数据")]),i("table-page",{attrs:{data:e.tableListData,customClass:"staff_table",hideKeyFilter:!0,hideSearch:!0,filter:e.filter}})],1)])},Rs=[];function Ns(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function zs(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Ns(a,n,r,o,s,"next",e)}function s(e){Ns(a,n,r,o,s,"throw",e)}o(void 0)}))}}var Bs={name:"PersonDetail",props:["data"],components:{tablePage:Jr["a"]},data:function(){return{basisInfo:{name:"张无忌",room:401,mobile:1454234234},listData:[],currIndex:0,filter:{},tableListData:{selection:!1,tableData:[],tableKeys:[{id:"CYRQ",label:"采样日期",minWidth:120},{id:"CYDD",label:"采样地点",minWidth:140},{id:"JCSJ",label:"检测时间",minWidth:120},{id:"JCJIEGUO",label:"检测结果",minWidth:80}],tableFunctions:[]}}},watch:{data:{handler:function(e){e.id&&this.getData()},immediate:!0}},methods:{getData:function(){var e=this;return zs(o.a.mark((function t(){var i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.data.sfzh){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$Api().HSCheckController.get_query.request({path:{idcard:e.data.sfzh}});case 4:i=t.sent,i.forEach((function(e){for(var t in e.JCSJ&&(e.JCSJ=e.JCSJ.slice(0,10)+" "+e.JCSJ.slice(10)),e.CYRQ&&(e.CYRQ=e.CYRQ.slice(0,10)+" "+e.CYRQ.slice(10)),e)e[t]=e[t]||"-"})),i.sort((function(e,t){return new Date(t.CYRQ).getTime()-new Date(e.CYRQ).getTime()})),e.tableListData.tableData=i,console.log(i);case 9:case"end":return t.stop()}}),t)})))()}}},Vs=Bs,Fs=(i("8c0b"),i("b7d5"),Object(d["a"])(Vs,Ls,Rs,!1,null,"3cde9e74",null)),Us=Fs.exports,Gs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"无人机巡航图片",top:"12vh",visible:e.showme,modal:!1,width:"100vh"},on:{close:e.handleClose}},[i("el-carousel",{attrs:{"indicator-position":"outside",height:"80vh"}},e._l(e.list,(function(e,t){return i("el-carousel-item",{key:t},[i("div",{staticClass:"box"},[i("a",{attrs:{href:e.src,target:"_blank"}},[i("img",{attrs:{alt:"正在加载图片",src:e.src}})])])])})),1)],1)},Hs=[],Ws={name:"ImageViewer",components:{},props:{showme:{type:Boolean}},model:{prop:"showme",event:"toggle"},data:function(){return{list:[]}},watch:{showme:function(e){1==e&&0==this.list.length&&this.getData()}},mounted:function(){},methods:{getData:function(){var e=["DJI_20210609171921_0001_W.JPG","DJI_20210609171932_0002_W.JPG","DJI_20210609171955_0003_W.JPG","DJI_20210609171959_0004_W.JPG","DJI_20210609172034_0005_W.JPG","DJI_20210609172044_0006_W.JPG","DJI_20210609172506_0009_W.JPG","DJI_20210609172812_0010_W.JPG","DJI_20210609173213_0012_Z.JPG"];this.list=e.map((function(e){return{src:"https://".concat(C["f"],"/").concat(e)}}))},handleClose:function(){this.$emit("toggle",!1)}}},qs=Ws,Zs=(i("5be7"),Object(d["a"])(qs,Gs,Hs,!1,null,"59500f0c",null)),Ys=Zs.exports,Xs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"无人机巡航视频",top:"12vh",visible:e.showme,modal:!1,width:"128vh"},on:{close:e.handleClose}},[i("div",{staticClass:"box"},[e.list.length>0?i("iframe",{ref:"frame",attrs:{src:e.list[e.currIndex].src}}):e._e()]),i("div",{staticClass:"tabs"},e._l(e.list.length,(function(t){return i("div",{key:t,staticClass:"item",class:{active:t==e.currIndex+1},on:{click:function(i){return e.switchItem(t-1)}}},[e._v("视频"+e._s(t))])})),0)])},Ks=[],$s={name:"VideoViewer.vue",components:{},props:{showme:{type:Boolean}},model:{prop:"showme",event:"toggle"},data:function(){return{list:[],currIndex:0}},watch:{showme:{handler:function(e){1==e&&0==this.list.length&&this.getData()},immediate:!1}},mounted:function(){},methods:{getData:function(){var e=["DJI_20210609154248_0008_S.mp4","DJI_20210609172055_0007_W.mp4","DJI_20210609172817_0011_W.mp4","DJI_20210609154707_0012_S.mp4","DJI_20210609172304_0008_W.mp4","DJI_20210609172817_0011_Z.mp4"];this.list=e.map((function(e){return{src:"".concat(C["b"],"/player/liveplayer/player.html?videoUrl=https://").concat(C["f"],"/record/").concat(e)}}))},switchItem:function(e){this.currIndex!=e&&(this.currIndex=e,this.$refs["frame"].src=this.list[e].src+"&time=".concat((new Date).getTime()))},handleClose:function(){this.$emit("toggle",!1)}}},Qs=$s,Js=(i("cf7c"),Object(d["a"])(Qs,Xs,Ks,!1,null,"f8f452ae",null)),el=Js.exports,tl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sidebar-panel"},[i("div",{staticClass:"sidebar-panel-h"},[e._v(" "+e._s(e.title)+" ")]),i("div",{staticClass:"sidebar-panel-b"},[e._t("default")],2)])},il=[],nl={name:"SidebarPanel",components:{},props:{title:{type:String,default:"我是标题"}},data:function(){return{}},mounted:function(){},methods:{}},rl=nl,al=(i("e0a5"),Object(d["a"])(rl,tl,il,!1,null,null,null)),ol=al.exports;function sl(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ll(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?sl(Object(i),!0).forEach((function(t){cl(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sl(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function cl(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ul(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function hl(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){ul(a,n,r,o,s,"next",e)}function s(e){ul(a,n,r,o,s,"throw",e)}o(void 0)}))}}var dl={name:"Community",components:{SidebarPanel:ol,ImageViewer:Ys,VideoViewer:el,CommunityMapLayer:es,BuildingDetail:hs,StaffTable:Os,RoomDetail:js,PersonDetail:Us,CountTo:Z.a},data:function(){return{detailList:{},imgVisible:!1,videoVisible:!1,layerVisible:!0,summary:{}}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;return hl(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.summary={zrs_total:4687,xyr_total:3538,jsbzdrqlb_total:127,lkhyhjahy_total:52,lkhwhjadzzjxn_total:72,wywrqlkjabzzjxn_total:107,wyeswrhlkbzzjxn_total:92,zydgl_total:188,qt_total:95};case 1:case"end":return t.stop()}}),t)})))()},handleChoose:function(e){var t=this;return hl(o.a.mark((function i(){var n;return o.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return console.log(e),i.next=3,Object(ia["a"])({buildingName:e.name});case 3:n=i.sent,t.$set(t.detailList,e.name,ll(ll({},n),{},{name:e.name,component:"BuildingDetail",class:"dialog-building"}));case 5:case"end":return i.stop()}}),i)})))()},addDetail:function(e){var t=this;return hl(o.a.mark((function i(){return o.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.$set(t.detailList,e.id,ll({},e));case 1:case"end":return i.stop()}}),i)})))()},gotoZD:function(){window.open("".concat(location.origin+location.pathname,"#/community/jaImportant"))},dialogMounted:function(e){var t=this;return hl(o.a.mark((function i(){var n,r;return o.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=document.getElementById(e),i.next=3,t.$store.dispatch("common/getDialogZIndex");case 3:r=i.sent,n.style.zIndex=r,console.log("dialogMounted",e,n);case 6:case"end":return i.stop()}}),i)})))()}}},pl=dl,fl=(i("d7ee"),Object(d["a"])(pl,No,zo,!1,null,null,null)),ml=fl.exports,gl=(i("2d20"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"96vw",visible:!0,modal:!1,"close-on-click-modal":!1,title:"疫情数据总览","custom-class":"data-total-dialog"},on:{close:function(t){return e.$emit("close")}}},[i("DataTotal")],1)}),vl=[],yl=i("a883"),_l={name:"big-data-total",components:{DataTotal:yl["default"]}},bl=_l,xl=(i("34be"),Object(d["a"])(bl,gl,vl,!1,null,null,null)),wl=xl.exports,Tl=i("74c1"),Sl=i.n(Tl);function Ol(){var e=window.location.protocol.indexOf("https")>-1?"wss":"ws",t=window.location.host,i="".concat(e,"://").concat(t,"/yqfk/websocket/spzb/").concat(Ut["a"].state.user.id),n=new Sl.a(i,null,{reconnectInterval:3e3});return n.onopen=function(e){console.log("ws open")},n.onclose=function(e){console.log("ws close")},n.onerror=function(e){console.log("ws error",e)},n}var Cl,kl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video-player"},[e.endStream?n("div",{key:"player_2",staticClass:"alignContent"},[n("img",{staticClass:"disconnect_img",attrs:{src:i("4aa8"),alt:""}}),n("span",{staticClass:"disconnect_note"},[e._v("直播已结束")])]):n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:"player_1"},[n("video",{ref:"videoPlayer",staticClass:"video-js"})])])},Pl=[],El=i("be09"),Al=i.n(El),Il=i("ef34"),Ml=i.n(Il),Dl=i("a559"),jl=i.n(Dl),Ll=i("3c96"),Rl=i.n(Ll),Nl=i("55b5"),zl=i.n(Nl),Bl=i("8c10"),Vl=i.n(Bl),Fl=i("df33"),Ul=i.n(Fl),Gl=i("045f"),Hl=i.n(Gl),Wl=i("2b8c"),ql=i.n(Wl),Zl=i("b17c"),Yl=i.n(Zl),Xl=i("ed6d"),Kl=i.n(Xl),$l=i("d136"),Ql=i.n($l),Jl="http://example.com",ec=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=Al.a.location&&Al.a.location.href||"");var i="function"===typeof Al.a.URL,n=/^\/\//.test(e),r=!Al.a.location&&!/\/\//i.test(e);if(i?e=new Al.a.URL(e,Al.a.location||Jl):/\/\//i.test(e)||(e=Ql.a.buildAbsoluteURL(Al.a.location&&Al.a.location.href||"",e)),i){var a=new URL(t,e);return r?a.href.slice(Jl.length):n?a.href.slice(a.protocol.length):a.href}return Ql.a.buildAbsoluteURL(e,t)},tc=ec,ic=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(i,1),i>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,o=0;o<a;++o)t[o].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),nc=i("ffdf"),rc=function(e){function t(){var t;return t=e.call(this)||this,t.buffer="",t}zl()(t,e);var i=t.prototype;return i.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(ic),ac=String.fromCharCode(9),oc=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),i={};return t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),i},sc=function(){var e="[^=]*",t='"[^"]*"|[^,]*',i="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+i+")")},lc=function(e){var t,i=e.split(sc()),n={},r=i.length;while(r--)""!==i[r]&&(t=/([^=]*)=(.*)/.exec(i[r]).slice(1),t[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),n[t[0]]=t[1]);return n},cc=function(e){function t(){var t;return t=e.call(this)||this,t.customParsers=[],t.tagMappers=[],t}zl()(t,e);var i=t.prototype;return i.push=function(e){var t,i,n=this;if(e=e.trim(),0!==e.length)if("#"===e[0]){var r=this.tagMappers.reduce((function(t,i){var n=i(e);return n===e?t:t.concat([n])}),[e]);r.forEach((function(e){for(var r=0;r<n.customParsers.length;r++)if(n.customParsers[r].call(n,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e),t)n.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e),t)return i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),void n.trigger("data",i);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e),t)return i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e),t)return i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e),t)return i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e),t)return i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e),t)return i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),void n.trigger("data",i);if(t=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(e),t)return i=jl()(oc(t[1]),{type:"tag",tagType:"byterange"}),void n.trigger("data",i);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e),t)return i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e),t){if(i={type:"tag",tagType:"map"},t[1]){var a=lc(t[1]);a.URI&&(i.uri=a.URI),a.BYTERANGE&&(i.byterange=oc(a.BYTERANGE))}n.trigger("data",i)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e),t){if(i={type:"tag",tagType:"stream-inf"},t[1]){if(i.attributes=lc(t[1]),i.attributes.RESOLUTION){var o=i.attributes.RESOLUTION.split("x"),s={};o[0]&&(s.width=parseInt(o[0],10)),o[1]&&(s.height=parseInt(o[1],10)),i.attributes.RESOLUTION=s}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}n.trigger("data",i)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e),t)return i={type:"tag",tagType:"media"},t[1]&&(i.attributes=lc(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-ENDLIST/.exec(e),t)n.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e),t)n.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e),t)return i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e),t)return i={type:"tag",tagType:"key"},t[1]&&(i.attributes=lc(t[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void n.trigger("data",i);if(t=/^#EXT-X-START:?(.*)$/.exec(e),t)return i={type:"tag",tagType:"start"},t[1]&&(i.attributes=lc(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void n.trigger("data",i);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e),t)return i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",void n.trigger("data",i);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e),t)return i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",void n.trigger("data",i);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e),t)return i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",void n.trigger("data",i);if(t=/^#EXT-X-SKIP:(.*)$/.exec(e),t&&t[1])return i={type:"tag",tagType:"skip"},i.attributes=lc(t[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(ac)),void n.trigger("data",i);if(t=/^#EXT-X-PART:(.*)$/.exec(e),t&&t[1])return i={type:"tag",tagType:"part"},i.attributes=lc(t[1]),["DURATION"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=parseFloat(i.attributes[e]))})),["INDEPENDENT","GAP"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=/YES/.test(i.attributes[e]))})),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=oc(i.attributes.BYTERANGE)),void n.trigger("data",i);if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e),t&&t[1])return i={type:"tag",tagType:"server-control"},i.attributes=lc(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=parseFloat(i.attributes[e]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=/YES/.test(i.attributes[e]))})),void n.trigger("data",i);if(t=/^#EXT-X-PART-INF:(.*)$/.exec(e),t&&t[1])return i={type:"tag",tagType:"part-inf"},i.attributes=lc(t[1]),["PART-TARGET"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=parseFloat(i.attributes[e]))})),void n.trigger("data",i);if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e),t&&t[1])return i={type:"tag",tagType:"preload-hint"},i.attributes=lc(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(e){if(i.attributes.hasOwnProperty(e)){i.attributes[e]=parseInt(i.attributes[e],10);var t="BYTERANGE-LENGTH"===e?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[t]=i.attributes[e],delete i.attributes[e]}})),void n.trigger("data",i);if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e),t&&t[1])return i={type:"tag",tagType:"rendition-report"},i.attributes=lc(t[1]),["LAST-MSN","LAST-PART"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=parseInt(i.attributes[e],10))})),void n.trigger("data",i);n.trigger("data",{type:"tag",data:e.slice(4)})}}}else n.trigger("data",{type:"comment",text:e.slice(1)})}))}else this.trigger("data",{type:"uri",uri:e})},i.addParser=function(e){var t=this,i=e.expression,n=e.customType,r=e.dataParser,a=e.segment;"function"!==typeof r&&(r=function(e){return e}),this.customParsers.push((function(e){var o=i.exec(e);if(o)return t.trigger("data",{type:"custom",data:r(e),customType:n,segment:a}),!0}))},i.addTagMapper=function(e){var t=e.expression,i=e.map,n=function(e){return t.test(e)?i(e):e};this.tagMappers.push(n)},t}(ic),uc=function(e){return e.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()}))},hc=function(e){var t={};return Object.keys(e).forEach((function(i){t[uc(i)]=e[i]})),t},dc=function(e){var t=e.serverControl,i=e.targetDuration,n=e.partTargetDuration;if(t){var r="#EXT-X-SERVER-CONTROL",a="holdBack",o="partHoldBack",s=i&&3*i,l=n&&2*n;i&&!t.hasOwnProperty(a)&&(t[a]=s,this.trigger("info",{message:r+" defaulting HOLD-BACK to targetDuration * 3 ("+s+")."})),s&&t[a]<s&&(this.trigger("warn",{message:r+" clamping HOLD-BACK ("+t[a]+") to targetDuration * 3 ("+s+")"}),t[a]=s),n&&!t.hasOwnProperty(o)&&(t[o]=3*n,this.trigger("info",{message:r+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[o]+")."})),n&&t[o]<l&&(this.trigger("warn",{message:r+" clamping PART-HOLD-BACK ("+t[o]+") to partTargetDuration * 2 ("+l+")."}),t[o]=l)}},pc=function(e){function t(){var t;t=e.call(this)||this,t.lineStream=new rc,t.parseStream=new cc,t.lineStream.pipe(t.parseStream);var i,n,r=Rl()(t),a=[],o={},s=!1,l=function(){},c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",h=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var d=0,p=0;return t.on("end",(function(){o.uri||!o.parts&&!o.preloadHints||(!o.map&&i&&(o.map=i),!o.key&&n&&(o.key=n),o.timeline||"number"!==typeof h||(o.timeline=h),t.manifest.preloadSegment=o)})),t.parseStream.on("data",(function(e){var t,f;({tag:function(){({version:function(){e.version&&(this.manifest.version=e.version)},"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(o.byterange=t,t.length=e.length,"offset"in e||(e.offset=d)),"offset"in e&&(o.byterange=t,t.offset=e.offset),d=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(o.duration=e.duration),0===e.duration&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("com.apple.streamingkeydelivery"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:e.attributes});if(e.attributes.KEYFORMAT===u){var t=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];return-1===t.indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:Object(nc["a"])(e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},"undefined"!==typeof e.attributes.IV&&(n.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,h=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){i={},e.uri&&(i.uri=e.uri),e.byterange&&(i.byterange=e.byterange),n&&(i.key=n)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||c,e.attributes?(o.attributes||(o.attributes={}),jl()(o.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||c,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var i=this.manifest.mediaGroups[e.attributes.TYPE];i[e.attributes["GROUP-ID"]]=i[e.attributes["GROUP-ID"]]||{},t=i[e.attributes["GROUP-ID"]],f={default:/yes/i.test(e.attributes.DEFAULT)},f.default?f.autoselect=!0:f.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(f.language=e.attributes.LANGUAGE),e.attributes.URI&&(f.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(f.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(f.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(f.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=f}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){h+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),o.dateTimeString=e.dateTimeString,o.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):(this.manifest.targetDuration=e.duration,dc.call(this,this.manifest))},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){o.cueOut=e.data},"cue-out-cont":function(){o.cueOutCont=e.data},"cue-in":function(){o.cueIn=e.data},skip:function(){this.manifest.skip=hc(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part:function(){var t=this;s=!0;var i=this.manifest.segments.length,n=hc(e.attributes);o.parts=o.parts||[],o.parts.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=p),p=n.byterange.offset+n.byterange.length);var r=o.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+r+" for segment #"+i,e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(e,i){e.hasOwnProperty("lastPart")||t.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+i+" lacks required attribute(s): LAST-PART"})}))},"server-control":function(){var t=this.manifest.serverControl=hc(e.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),dc.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var t=this.manifest.segments.length,i=hc(e.attributes),n=i.type&&"PART"===i.type;o.preloadHints=o.preloadHints||[],o.preloadHints.push(i),i.byterange&&(i.byterange.hasOwnProperty("offset")||(i.byterange.offset=n?p:0,n&&(p=i.byterange.offset+i.byterange.length)));var r=o.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+r+" for segment #"+t,e.attributes,["TYPE","URI"]),i.type)for(var a=0;a<o.preloadHints.length-1;a++){var s=o.preloadHints[a];s.type&&(s.type===i.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+r+" for segment #"+t+" has the same TYPE "+i.type+" as preload hint #"+a}))}},"rendition-report":function(){var t=hc(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);var i=this.manifest.renditionReports.length-1,n=["LAST-MSN","URI"];s&&n.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+i,e.attributes,n)},"part-inf":function(){this.manifest.partInf=hc(e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),dc.call(this,this.manifest)}}[e.tagType]||l).call(r)},uri:function(){o.uri=e.uri,a.push(o),this.manifest.targetDuration&&!("duration"in o)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),n&&(o.key=n),o.timeline=h,i&&(o.map=i),p=0,o={}},comment:function(){},custom:function(){e.segment?(o.custom=o.custom||{},o.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(r)})),t}zl()(t,e);var i=t.prototype;return i.warnOnMissingAttributes_=function(e,t,i){var n=[];i.forEach((function(e){t.hasOwnProperty(e)||n.push(e)})),n.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+n.join(", ")})},i.push=function(e){this.lineStream.push(e)},i.end=function(){this.lineStream.push("\n"),this.trigger("end")},i.addParser=function(e){this.parseStream.addParser(e)},i.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(ic),fc={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},mc=["video","audio","text"],gc=["Video","Audio","Text"],vc=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,i){var n=("00"+Number(t).toString(16)).slice(-2),r=("00"+Number(i).toString(16)).slice(-2);return"avc1."+n+"00"+r})):e},yc=function(e){void 0===e&&(e="");var t=e.split(","),i=[];return t.forEach((function(e){var t;e=e.trim(),mc.forEach((function(n){var r=fc[n].exec(e.toLowerCase());if(r&&!(r.length<=1)){t=n;var a=e.substring(0,r[1].length),o=e.replace(a,"");i.push({type:a,details:o,mediaType:n})}})),t||i.push({type:e,details:"",mediaType:"unknown"})})),i},_c=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var n in i){var r=i[n];if(r.default&&r.playlists)return yc(r.playlists[0].attributes.CODECS)}return null},bc=function(e){return void 0===e&&(e=""),fc.audio.test(e.trim().toLowerCase())},xc=function(e){return void 0===e&&(e=""),fc.text.test(e.trim().toLowerCase())},wc=function(e){if(e&&"string"===typeof e){var t=e.toLowerCase().split(",").map((function(e){return vc(e.trim())})),i="video";1===t.length&&bc(t[0])?i="audio":1===t.length&&xc(t[0])&&(i="application");var n="mp4";return t.every((function(e){return fc.mp4.test(e)}))?n="mp4":t.every((function(e){return fc.webm.test(e)}))?n="webm":t.every((function(e){return fc.ogg.test(e)}))&&(n="ogg"),i+"/"+n+';codecs="'+e+'"'}},Tc=function(e){return void 0===e&&(e=""),Al.a.MediaSource&&Al.a.MediaSource.isTypeSupported&&Al.a.MediaSource.isTypeSupported(wc(e))||!1},Sc=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<gc.length;t++){var i=gc[t];if(fc["muxer"+i].test(e))return!0}return!1}))},Oc="mp4a.40.2",Cc="avc1.4d400d",kc=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Pc=/^application\/dash\+xml/i,Ec=function(e){return kc.test(e)?"hls":Pc.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},Ac=i("1456"),Ic=function(e){return!!e&&"object"===typeof e},Mc=function e(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.reduce((function(t,i){return"object"!==typeof i||Object.keys(i).forEach((function(n){Array.isArray(t[n])&&Array.isArray(i[n])?t[n]=t[n].concat(i[n]):Ic(t[n])&&Ic(i[n])?t[n]=e(t[n],i[n]):t[n]=i[n]})),t}),{})},Dc=function(e){return Object.keys(e).map((function(t){return e[t]}))},jc=function(e,t){for(var i=[],n=e;n<t;n++)i.push(n);return i},Lc=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])},Rc=function(e){if(!e.length)return[];for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},Nc=function(e,t){return e.reduce((function(e,i,n){return i[t]&&e.push(n),e}),[])},zc={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},Bc=function(e){var t=e.baseUrl,i=void 0===t?"":t,n=e.source,r=void 0===n?"":n,a=e.range,o=void 0===a?"":a,s=e.indexRange,l=void 0===s?"":s,c={uri:r,resolvedUri:tc(i||"",r)};if(o||l){var u=o||l,h=u.split("-"),d=parseInt(h[0],10),p=parseInt(h[1],10);c.byterange={length:p-d+1,offset:d}}return c},Vc=function(e){var t=e.offset+e.length-1;return e.offset+"-"+t},Fc=function(e){return e&&"number"!==typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e},Uc={static:function(e){var t=e.duration,i=e.timescale,n=void 0===i?1:i,r=e.sourceDuration,a=Fc(e.endNumber);return{start:0,end:"number"===typeof a?a:Math.ceil(r/(t/n))}},dynamic:function(e){var t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,a=void 0===r?1:r,o=e.duration,s=e.start,l=void 0===s?0:s,c=e.minimumUpdatePeriod,u=void 0===c?0:c,h=e.timeShiftBufferDepth,d=void 0===h?1/0:h,p=Fc(e.endNumber),f=(t+i)/1e3,m=n+l,g=f+u,v=g-m,y=Math.ceil(v*a/o),_=Math.floor((f-m-d)*a/o),b=Math.floor((f-m)*a/o);return{start:Math.max(0,_),end:"number"===typeof p?p:Math.min(y,b)}}},Gc=function(e){return function(t,i){var n=e.duration,r=e.timescale,a=void 0===r?1:r,o=e.periodIndex,s=e.startNumber,l=void 0===s?1:s;return{number:l+t,duration:n/a,timeline:o,time:i*n}}},Hc=function(e){var t=e.type,i=void 0===t?"static":t,n=e.duration,r=e.timescale,a=void 0===r?1:r,o=e.sourceDuration,s=Uc[i](e),l=s.start,c=s.end,u=jc(l,c).map(Gc(e));if("static"===i){var h=u.length-1;u[h].duration=o-n/a*h}return u},Wc=function(e){var t=e.baseUrl,i=e.initialization,n=void 0===i?{}:i,r=e.sourceDuration,a=e.indexRange,o=void 0===a?"":a,s=e.duration;if(!t)throw new Error(zc.NO_BASE_URL);var l=Bc({baseUrl:t,source:n.sourceURL,range:n.range}),c=Bc({baseUrl:t,source:t,indexRange:o});if(c.map=l,s){var u=Hc(e);u.length&&(c.duration=u[0].duration,c.timeline=u[0].timeline)}else r&&(c.duration=r,c.timeline=0);return c.number=0,[c]},qc=function(e,t,i){for(var n=e.sidx.map?e.sidx.map:null,r=e.sidx.duration,a=e.timeline||0,o=e.sidx.byterange,s=o.offset+o.length,l=t.timescale,c=t.references.filter((function(e){return 1!==e.referenceType})),u=[],h=s+t.firstOffset,d=0;d<c.length;d++){var p=t.references[d],f=p.referencedSize,m=p.subsegmentDuration,g=h+f-1,v=h+"-"+g,y={baseUrl:i,timescale:l,timeline:a,periodIndex:a,duration:m,sourceDuration:r,indexRange:v},_=Wc(y)[0];n&&(_.map=n),u.push(_),h+=f}return e.segments=u,e},Zc=function(e){return e&&e.uri+"-"+Vc(e.byterange)},Yc=function(e){var t=Dc(e.reduce((function(e,t){var i,n=t.attributes.id+(t.attributes.lang||"");e[n]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(i=e[n].segments).push.apply(i,t.segments),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):e[n]=t;return e}),{}));return t.map((function(e){return e.discontinuityStarts=Nc(e.segments,"discontinuity"),e}))},Xc=function(e,t){var i=Zc(e.sidx),n=i&&t[i]&&t[i].sidx;return n&&qc(e,n,e.sidx.resolvedUri),e},Kc=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var i in e)e[i]=Xc(e[i],t);return e},$c=function(e,t){var i,n=e.attributes,r=e.segments,a=e.sidx,o={attributes:(i={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1};return n.contentProtection&&(o.contentProtection=n.contentProtection),a&&(o.sidx=a),t&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},Qc=function(e){var t,i=e.attributes,n=e.segments;"undefined"===typeof n&&(n=[{uri:i.baseUrl,timeline:i.periodIndex,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);var r=(t={NAME:i.id,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t);return i.codecs&&(r.CODECS=i.codecs),{attributes:r,uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:i.baseUrl||"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1}},Jc=function(e,t,i){var n;void 0===t&&(t={}),void 0===i&&(i=!1);var r=e.reduce((function(e,r){var a=r.attributes.role&&r.attributes.role.value||"",o=r.attributes.lang||"",s=r.attributes.label||"main";if(o&&!r.attributes.label){var l=a?" ("+a+")":"";s=""+r.attributes.lang+l}e[s]||(e[s]={language:o,autoselect:!0,default:"main"===a,playlists:[],uri:""});var c=Xc($c(r,i),t);return e[s].playlists.push(c),"undefined"===typeof n&&"main"===a&&(n=r,n.default=!0),e}),{});if(!n){var a=Object.keys(r)[0];r[a].default=!0}return r},eu=function(e,t){return void 0===t&&(t={}),e.reduce((function(e,i){var n=i.attributes.lang||"text";return e[n]||(e[n]={language:n,default:!1,autoselect:!1,playlists:[],uri:""}),e[n].playlists.push(Xc(Qc(i),t)),e}),{})},tu=function(e){var t,i=e.attributes,n=e.segments,r=e.sidx,a={attributes:(t={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};return i.contentProtection&&(a.contentProtection=i.contentProtection),r&&(a.sidx=r),a},iu=function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType},nu=function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType},ru=function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType},au=function(e,t,i){var n;if(void 0===i&&(i={}),!e.length)return{};var r=e[0].attributes,a=r.sourceDuration,o=r.type,s=void 0===o?"static":o,l=r.suggestedPresentationDelay,c=r.minimumUpdatePeriod,u=Yc(e.filter(iu)).map(tu),h=Yc(e.filter(nu)),d=e.filter(ru),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:a,playlists:Kc(u,i)};c>=0&&(p.minimumUpdatePeriod=1e3*c),t&&(p.locations=t),"dynamic"===s&&(p.suggestedPresentationDelay=l);var f=0===p.playlists.length;return h.length&&(p.mediaGroups.AUDIO.audio=Jc(h,i,f)),d.length&&(p.mediaGroups.SUBTITLES.subs=eu(d,i)),p},ou=function(e,t,i){var n=e.NOW,r=e.clientOffset,a=e.availabilityStartTime,o=e.timescale,s=void 0===o?1:o,l=e.start,c=void 0===l?0:l,u=e.minimumUpdatePeriod,h=void 0===u?0:u,d=(n+r)/1e3,p=a+c,f=d+h,m=f-p;return Math.ceil((m*s-t)/i)},su=function(e,t){for(var i=e.type,n=void 0===i?"static":i,r=e.minimumUpdatePeriod,a=void 0===r?0:r,o=e.media,s=void 0===o?"":o,l=e.sourceDuration,c=e.timescale,u=void 0===c?1:c,h=e.startNumber,d=void 0===h?1:h,p=e.periodIndex,f=[],m=-1,g=0;g<t.length;g++){var v=t[g],y=v.d,_=v.r||0,b=v.t||0;m<0&&(m=b),b&&b>m&&(m=b);var x=void 0;if(_<0){var w=g+1;x=w===t.length?"dynamic"===n&&a>0&&s.indexOf("$Number$")>0?ou(e,m,y):(l*u-m)/y:(t[w].t-m)/y}else x=_+1;var T=d+f.length+x,S=d+f.length;while(S<T)f.push({number:S,duration:y/u,time:m,timeline:p}),m+=y,S++}return f},lu=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,cu=function(e){return function(t,i,n,r){if("$$"===t)return"$";if("undefined"===typeof e[i])return t;var a=""+e[i];return"RepresentationID"===i?a:(r=n?parseInt(r,10):1,a.length>=r?a:""+new Array(r-a.length+1).join("0")+a)}},uu=function(e,t){return e.replace(lu,cu(t))},hu=function(e,t){return e.duration||t?e.duration?Hc(e):su(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]},du=function(e,t){var i={RepresentationID:e.id,Bandwidth:e.bandwidth||0},n=e.initialization,r=void 0===n?{sourceURL:"",range:""}:n,a=Bc({baseUrl:e.baseUrl,source:uu(r.sourceURL,i),range:r.range}),o=hu(e,t);return o.map((function(t){i.Number=t.number,i.Time=t.time;var n=uu(e.media||"",i),r={uri:n,timeline:t.timeline,duration:t.duration,resolvedUri:tc(e.baseUrl||"",n),map:a,number:t.number};return e.presentationTimeOffset&&(r.presentationTimeOffset=e.presentationTimeOffset),r}))},pu=function(e,t){var i=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,a=Bc({baseUrl:i,source:r.sourceURL,range:r.range}),o=Bc({baseUrl:i,source:t.media,range:t.mediaRange});return o.map=a,o},fu=function(e,t){var i=e.duration,n=e.segmentUrls,r=void 0===n?[]:n;if(!i&&!t||i&&t)throw new Error(zc.SEGMENT_TIME_UNSPECIFIED);var a,o=r.map((function(t){return pu(e,t)}));i&&(a=Hc(e)),t&&(a=su(e,t));var s=a.map((function(e,t){if(o[t]){var i=o[t];return i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i}})).filter((function(e){return e}));return s},mu=function(e){var t,i,n=e.attributes,r=e.segmentInfo;r.template?(i=du,t=Mc(n,r.template),r.template.presentationTimeOffset&&(t.presentationTimeOffset=r.template.presentationTimeOffset/r.template.timescale)):r.base?(i=Wc,t=Mc(n,r.base)):r.list&&(i=fu,t=Mc(n,r.list));var a={attributes:n};if(!i)return a;var o=i(t,r.timeline);if(t.duration){var s=t,l=s.duration,c=s.timescale,u=void 0===c?1:c;t.duration=l/u}else o.length?t.duration=o.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0;return a.attributes=t,a.segments=o,r.base&&t.indexRange&&(a.sidx=o[0],a.segments=[]),a},gu=function(e){return e.map(mu)},vu=function(e,t){return Rc(e.childNodes).filter((function(e){var i=e.tagName;return i===t}))},yu=function(e){return e.textContent.trim()},_u=function(e){var t=31536e3,i=2592e3,n=86400,r=3600,a=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,s=o.exec(e);if(!s)return 0;var l=s.slice(1),c=l[0],u=l[1],h=l[2],d=l[3],p=l[4],f=l[5];return parseFloat(c||0)*t+parseFloat(u||0)*i+parseFloat(h||0)*n+parseFloat(d||0)*r+parseFloat(p||0)*a+parseFloat(f||0)},bu=function(e){var t=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return t.test(e)&&(e+="Z"),Date.parse(e)},xu={mediaPresentationDuration:function(e){return _u(e)},availabilityStartTime:function(e){return bu(e)/1e3},minimumUpdatePeriod:function(e){return _u(e)},suggestedPresentationDelay:function(e){return _u(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return _u(e)},start:function(e){return _u(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?_u(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},wu=function(e){return e&&e.attributes?Rc(e.attributes).reduce((function(e,t){var i=xu[t.name]||xu.DEFAULT;return e[t.name]=i(t.value),e}),{}):{}},Tu={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Su=function(e,t){return t.length?Lc(e.map((function(e){return t.map((function(t){return tc(e,yu(t))}))}))):e},Ou=function(e){var t=vu(e,"SegmentTemplate")[0],i=vu(e,"SegmentList")[0],n=i&&vu(i,"SegmentURL").map((function(e){return Mc({tag:"SegmentURL"},wu(e))})),r=vu(e,"SegmentBase")[0],a=i||t,o=a&&vu(a,"SegmentTimeline")[0],s=i||r||t,l=s&&vu(s,"Initialization")[0],c=t&&wu(t);c&&l?c.initialization=l&&wu(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var u={template:c,timeline:o&&vu(o,"S").map((function(e){return wu(e)})),list:i&&Mc(wu(i),{segmentUrls:n,initialization:wu(l)}),base:r&&Mc(wu(r),{initialization:wu(l)})};return Object.keys(u).forEach((function(e){u[e]||delete u[e]})),u},Cu=function(e,t,i){return function(n){var r=vu(n,"BaseURL"),a=Su(t,r),o=Mc(e,wu(n)),s=Ou(n);return a.map((function(e){return{segmentInfo:Mc(i,s),attributes:Mc(o,{baseUrl:e})}}))}},ku=function(e){return e.reduce((function(e,t){var i=wu(t),n=Tu[i.schemeIdUri];if(n){e[n]={attributes:i};var r=vu(t,"cenc:pssh")[0];if(r){var a=yu(r),o=a&&Object(nc["a"])(a);e[n].pssh=o}}return e}),{})},Pu=function(e,t,i){return function(n){var r=wu(n),a=Su(t,vu(n,"BaseURL")),o=vu(n,"Role")[0],s={role:wu(o)},l=Mc(e,r,s),c=vu(n,"Label")[0];if(c&&c.childNodes.length){var u=c.childNodes[0].nodeValue.trim();l=Mc(l,{label:u})}var h=ku(vu(n,"ContentProtection"));Object.keys(h).length&&(l=Mc(l,{contentProtection:h}));var d=Ou(n),p=vu(n,"Representation"),f=Mc(i,d);return Lc(p.map(Cu(l,a,f)))}},Eu=function(e,t){return function(i,n){var r=Su(t,vu(i,"BaseURL")),a=wu(i),o=parseInt(a.id,10),s=Al.a.isNaN(o)?n:o,l=Mc(e,{periodIndex:s}),c=vu(i,"AdaptationSet"),u=Ou(i);return Lc(c.map(Pu(l,r,u)))}},Au=function(e,t){void 0===t&&(t={});var i=t,n=i.manifestUri,r=void 0===n?"":n,a=i.NOW,o=void 0===a?Date.now():a,s=i.clientOffset,l=void 0===s?0:s,c=vu(e,"Period");if(!c.length)throw new Error(zc.INVALID_NUMBER_OF_PERIOD);var u=vu(e,"Location"),h=wu(e),d=Su([r],vu(e,"BaseURL"));return h.sourceDuration=h.mediaPresentationDuration||0,h.NOW=o,h.clientOffset=l,u.length&&(h.locations=u.map(yu)),{locations:h.locations,representationInfo:Lc(c.map(Eu(h,d)))}},Iu=function(e){if(""===e)throw new Error(zc.DASH_EMPTY_MANIFEST);var t,i,n=new Ac["DOMParser"];try{t=n.parseFromString(e,"application/xml"),i=t&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(r){}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(zc.DASH_INVALID_XML);return i},Mu=function(e){var t=vu(e,"UTCTiming")[0];if(!t)return null;var i=wu(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(zc.UNSUPPORTED_UTC_TIMING_SCHEME)}return i},Du=function(e,t){void 0===t&&(t={});var i=Au(Iu(e),t),n=gu(i.representationInfo);return au(n,i.locations,t.sidxMapping)},ju=function(e){return Mu(Iu(e))},Lu=i("81c0"),Ru=i.n(Lu),Nu=function(e){return e.toString(2).length},zu=function(e){return Math.ceil(Nu(e)/8)},Bu=function(e){return ArrayBuffer.isView(e)},Vu=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||Bu(e)||e instanceof ArrayBuffer||(e="number"!==typeof e||"number"===typeof e&&e!==e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Fu=Al.a.BigInt||Number,Uu=[Fu("0x1"),Fu("0x100"),Fu("0x10000"),Fu("0x1000000"),Fu("0x100000000"),Fu("0x10000000000"),Fu("0x1000000000000"),Fu("0x100000000000000"),Fu("0x10000000000000000")],Gu=(function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}(),function(e,t){var i=void 0===t?{}:t,n=i.signed,r=void 0!==n&&n,a=i.le,o=void 0!==a&&a;e=Vu(e);var s=o?"reduce":"reduceRight",l=e[s]?e[s]:Array.prototype[s],c=l.call(e,(function(t,i,n){var r=o?n:Math.abs(n+1-e.length);return t+Fu(i)*Uu[r]}),Fu(0));if(r){var u=Uu[e.length]/Fu(2)-Fu(1);c=Fu(c),c>u&&(c-=u,c-=u,c-=Fu(2))}return Number(c)}),Hu=function(e,t){var i=void 0===t?{}:t,n=i.le,r=void 0!==n&&n;("bigint"!==typeof e&&"number"!==typeof e||"number"===typeof e&&e!==e)&&(e=0),e=Fu(e);for(var a=zu(e),o=new Uint8Array(new ArrayBuffer(a)),s=0;s<a;s++){var l=r?s:Math.abs(s+1-o.length);o[l]=Number(e/Uu[s]&Fu(255)),e<0&&(o[l]=Math.abs(~o[l]),o[l]-=0===s?1:2)}return o},Wu=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,Vu(e));try{return decodeURIComponent(escape(t))}catch(i){}return t},qu=function(e,t){if("string"!==typeof e&&e&&"function"===typeof e.toString&&(e=e.toString()),"string"!==typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i},Zu=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t=t.filter((function(e){return e&&(e.byteLength||e.length)&&"string"!==typeof e})),t.length<=1)return Vu(t[0]);var n=t.reduce((function(e,t,i){return e+(t.byteLength||t.length)}),0),r=new Uint8Array(n),a=0;return t.forEach((function(e){e=Vu(e),r.set(e,a),a+=e.byteLength})),r},Yu=function(e,t,i){var n=void 0===i?{}:i,r=n.offset,a=void 0===r?0:r,o=n.mask,s=void 0===o?[]:o;e=Vu(e),t=Vu(t);var l=t.every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&l.call(t,(function(t,i){var n=s[i]?s[i]&e[a+i]:e[a+i];return t===n}))},Xu=Vu([73,68,51]),Ku=function(e,t){void 0===t&&(t=0),e=Vu(e);var i=e[t+5],n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],r=(16&i)>>4;return r?n+20:n+10},$u=function e(t,i){return void 0===i&&(i=0),t=Vu(t),t.length-i<10||!Yu(t,Xu,{offset:i})?i:(i+=Ku(t,i),e(t,i))},Qu=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"===typeof e?qu(e):e}),Ju=function(e){return Array.isArray(e)?e.map((function(e){return Qu(e)})):[Qu(e)]},eh=function(e){e=Vu(e);var t=[],i=0;while(e.length>i){var n=e[i],r=0,a=0;a++;var o=e[a];a++;while(128&o)r=(127&o)<<7,o=e[a],a++;r+=127&o;for(var s=0;s<Cl.length;s++){var l=Cl[s],c=l.id,u=l.parser;if(n===c){t.push(u(e.subarray(a,a+r)));break}}i+=r+a}return t};Cl=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var i=e[t.size];t.url=Wu(e.subarray(t.size+1,t.size+1+i)),t.size+=i}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=eh(e.subarray(t.size))||[],t}},{id:4,parser:function(e){var t={tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:eh(e.subarray(13))};return t}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var th=function e(t,i,n){void 0===n&&(n=!1),i=Ju(i),t=Vu(t);var r=[];if(!i.length)return r;var a=0;while(a<t.length){var o=(t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3])>>>0,s=t.subarray(a+4,a+8);if(0===o)break;var l=a+o;if(l>t.length){if(n)break;l=t.length}var c=t.subarray(a+8,l);Yu(s,i[0])&&(1===i.length?r.push(c):r.push.apply(r,e(c,i.slice(1),n))),a=l}return r},ih={EBML:Vu([26,69,223,163]),DocType:Vu([66,130]),Segment:Vu([24,83,128,103]),SegmentInfo:Vu([21,73,169,102]),Tracks:Vu([22,84,174,107]),Track:Vu([174]),TrackNumber:Vu([215]),DefaultDuration:Vu([35,227,131]),TrackEntry:Vu([174]),TrackType:Vu([131]),FlagDefault:Vu([136]),CodecID:Vu([134]),CodecPrivate:Vu([99,162]),VideoTrack:Vu([224]),AudioTrack:Vu([225]),Cluster:Vu([31,67,182,117]),Timestamp:Vu([231]),TimestampScale:Vu([42,215,177]),BlockGroup:Vu([160]),BlockDuration:Vu([155]),Block:Vu([161]),SimpleBlock:Vu([163])},nh=[128,64,32,16,8,4,2,1],rh=function(e){for(var t=1,i=0;i<nh.length;i++){if(e&nh[i])break;t++}return t},ah=function(e,t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var r=rh(e[t]),a=e.subarray(t,t+r);return i&&(a=Array.prototype.slice.call(e,t,t+r),a[0]^=nh[r-1]),{length:r,value:Gu(a,{signed:n}),bytes:a}},oh=function e(t){return"string"===typeof t?t.match(/.{1,2}/g).map((function(t){return e(t)})):"number"===typeof t?Hu(t):t},sh=function(e){return Array.isArray(e)?e.map((function(e){return oh(e)})):[oh(e)]},lh=function e(t,i,n){if(n>=i.length)return i.length;var r=ah(i,n,!1);if(Yu(t.bytes,r.bytes))return n;var a=ah(i,n+r.length);return e(t,i,n+a.length+a.value+r.length)},ch=function e(t,i){i=sh(i),t=Vu(t);var n=[];if(!i.length)return n;var r=0;while(r<t.length){var a=ah(t,r,!1),o=ah(t,r+a.length),s=r+a.length+o.length;127===o.value&&(o.value=lh(a,t,s),o.value!==t.length&&(o.value-=s));var l=s+o.value>t.length?t.length:s+o.value,c=t.subarray(s,l);Yu(i[0],a.bytes)&&(1===i.length?n.push(c):n=n.concat(e(c,i.slice(1))));var u=a.length+o.length+c.length;r+=u}return n},uh=Vu([0,0,0,1]),hh=Vu([0,0,1]),dh=Vu([0,0,3]),ph=function(e){var t=[],i=1;while(i<e.length-2)Yu(e.subarray(i,i+3),dh)&&(t.push(i+2),i++),i++;if(0===t.length)return e;var n=e.length-t.length,r=new Uint8Array(n),a=0;for(i=0;i<n;a++,i++)a===t[0]&&(a++,t.shift()),r[i]=e[a];return r},fh=function(e,t,i,n){void 0===n&&(n=1/0),e=Vu(e),i=[].concat(i);var r,a=0,o=0;while(a<e.length&&(o<n||r)){var s=void 0;if(Yu(e.subarray(a),uh)?s=4:Yu(e.subarray(a),hh)&&(s=3),s){if(o++,r)return ph(e.subarray(r,a));var l=void 0;"h264"===t?l=31&e[a+s]:"h265"===t&&(l=e[a+s]>>1&63),-1!==i.indexOf(l)&&(r=a+s),a+=s+("h264"===t?1:2)}else a++}return e.subarray(0,0)},mh=function(e,t,i){return fh(e,"h264",t,i)},gh=function(e,t,i){return fh(e,"h265",t,i)},vh={webm:Vu([119,101,98,109]),matroska:Vu([109,97,116,114,111,115,107,97]),flac:Vu([102,76,97,67]),ogg:Vu([79,103,103,83]),ac3:Vu([11,119]),riff:Vu([82,73,70,70]),avi:Vu([65,86,73]),wav:Vu([87,65,86,69]),"3gp":Vu([102,116,121,112,51,103]),mp4:Vu([102,116,121,112]),fmp4:Vu([115,116,121,112]),mov:Vu([102,116,121,112,113,116])},yh={aac:function(e){var t=$u(e);return Yu(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=$u(e);return Yu(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=ch(e,[ih.EBML,ih.DocType])[0];return Yu(t,vh.webm)},mkv:function(e){var t=ch(e,[ih.EBML,ih.DocType])[0];return Yu(t,vh.matroska)},mp4:function(e){return!yh["3gp"](e)&&!yh.mov(e)&&(Yu(e,vh.mp4,{offset:4})||Yu(e,vh.fmp4,{offset:4}))},mov:function(e){return Yu(e,vh.mov,{offset:4})},"3gp":function(e){return Yu(e,vh["3gp"],{offset:4})},ac3:function(e){var t=$u(e);return Yu(e,vh.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];var t=0;while(t+188<e.length&&t<188){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=$u(e);return Yu(e,vh.flac,{offset:t})},ogg:function(e){return Yu(e,vh.ogg)},avi:function(e){return Yu(e,vh.riff)&&Yu(e,vh.avi,{offset:8})},wav:function(e){return Yu(e,vh.riff)&&Yu(e,vh.wav,{offset:8})},h264:function(e){return mh(e,7,3).length},h265:function(e){return gh(e,[32,33],3).length}},_h=Object.keys(yh).filter((function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e})).concat(["ts","h264","h265"]);_h.forEach((function(e){var t=yh[e];yh[e]=function(e){return t(Vu(e))}}));for(var bh,xh=yh,wh=function(e){e=Vu(e);for(var t=0;t<_h.length;t++){var i=_h[t];if(xh[i](e))return i}return""},Th=function(e){return th(e,["moof"]).length>0},Sh=i("36c6"),Oh="7.12.3",Ch={prefixed:!0},kh=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Ph=kh[0],Eh=0;Eh<kh.length;Eh++)if(kh[Eh][1]in Ml.a){bh=kh[Eh];break}if(bh){for(var Ah=0;Ah<bh.length;Ah++)Ch[Ph[Ah]]=bh[Ah];Ch.prefixed=bh[0]!==Ph[0]}var Ih=[],Mh=function(e,t){return function(i,n,r){var a=t.levels[n],o=new RegExp("^("+a+")$");if("log"!==i&&r.unshift(i.toUpperCase()+":"),r.unshift(e+":"),Ih){Ih.push([].concat(r));var s=Ih.length-1e3;Ih.splice(0,s>0?s:0)}if(Al.a.console){var l=Al.a.console[i];l||"debug"!==i||(l=Al.a.console.info||Al.a.console.log),l&&a&&o.test(i)&&l[Array.isArray(r)?"apply":"call"](Al.a.console,r)}}};function Dh(e){var t,i="info",n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t("log",i,n)};return t=Mh(e,n),n.createLogger=function(t){return Dh(e+": "+t)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},n.level=function(e){if("string"===typeof e){if(!n.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');i=e}return i},n.history=function(){return Ih?[].concat(Ih):[]},n.history.filter=function(e){return(Ih||[]).filter((function(t){return new RegExp(".*"+e+".*").test(t[0])}))},n.history.clear=function(){Ih&&(Ih.length=0)},n.history.disable=function(){null!==Ih&&(Ih.length=0,Ih=null)},n.history.enable=function(){null===Ih&&(Ih=[])},n.error=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t("error",i,n)},n.warn=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t("warn",i,n)},n.debug=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t("debug",i,n)},n}var jh=Dh("VIDEOJS"),Lh=jh.createLogger,Rh=Object.prototype.toString,Nh=function(e){return Fh(e)?Object.keys(e):[]};function zh(e,t){Nh(e).forEach((function(i){return t(e[i],i)}))}function Bh(e,t,i){return void 0===i&&(i=0),Nh(e).reduce((function(i,n){return t(i,e[n],n)}),i)}function Vh(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Object.assign?jl.a.apply(void 0,[e].concat(i)):(i.forEach((function(t){t&&zh(t,(function(t,i){e[i]=t}))})),e)}function Fh(e){return!!e&&"object"===typeof e}function Uh(e){return Fh(e)&&"[object Object]"===Rh.call(e)&&e.constructor===Object}function Gh(e,t){if(!e||!t)return"";if("function"===typeof Al.a.getComputedStyle){var i;try{i=Al.a.getComputedStyle(e)}catch(n){return""}return i?i.getPropertyValue(t)||i[t]:""}return""}var Hh=Al.a.navigator&&Al.a.navigator.userAgent||"",Wh=/AppleWebKit\/([\d.]+)/i.exec(Hh),qh=Wh?parseFloat(Wh.pop()):null,Zh=/iPod/i.test(Hh),Yh=function(){var e=Hh.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),Xh=/Android/i.test(Hh),Kh=function(){var e=Hh.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),$h=Xh&&Kh<5&&qh<537,Qh=/Firefox/i.test(Hh),Jh=/Edg/i.test(Hh),ed=!Jh&&(/Chrome/i.test(Hh)||/CriOS/i.test(Hh)),td=function(){var e=Hh.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),id=function(){var e=/MSIE\s(\d+)\.\d/.exec(Hh),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(Hh)&&/rv:11.0/.test(Hh)&&(t=11),t}(),nd=/Safari/i.test(Hh)&&!ed&&!Xh&&!Jh,rd=/Windows/i.test(Hh),ad=Boolean(fd()&&("ontouchstart"in Al.a||Al.a.navigator.maxTouchPoints||Al.a.DocumentTouch&&Al.a.document instanceof Al.a.DocumentTouch)),od=/iPad/i.test(Hh)||nd&&ad&&!/iPhone/i.test(Hh),sd=/iPhone/i.test(Hh)&&!od,ld=sd||od||Zh,cd=(nd||ld)&&!ed,ud=Object.freeze({__proto__:null,IS_IPOD:Zh,IOS_VERSION:Yh,IS_ANDROID:Xh,ANDROID_VERSION:Kh,IS_NATIVE_ANDROID:$h,IS_FIREFOX:Qh,IS_EDGE:Jh,IS_CHROME:ed,CHROME_VERSION:td,IE_VERSION:id,IS_SAFARI:nd,IS_WINDOWS:rd,TOUCH_ENABLED:ad,IS_IPAD:od,IS_IPHONE:sd,IS_IOS:ld,IS_ANY_SAFARI:cd});function hd(e){return"string"===typeof e&&Boolean(e.trim())}function dd(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function pd(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function fd(){return Ml.a===Al.a.document}function md(e){return Fh(e)&&1===e.nodeType}function gd(){try{return Al.a.parent!==Al.a.self}catch(e){return!0}}function vd(e){return function(t,i){if(!hd(t))return Ml.a[e](null);hd(i)&&(i=Ml.a.querySelector(i));var n=md(i)?i:Ml.a;return n[e]&&n[e](t)}}function yd(e,t,i,n){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===i&&(i={});var r=Ml.a.createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){var i=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(jh.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+i+"."),r.setAttribute(e,i)):"textContent"===e?_d(r,i):r[e]===i&&"tabIndex"!==e||(r[e]=i)})),Object.getOwnPropertyNames(i).forEach((function(e){r.setAttribute(e,i[e])})),n&&zd(r,n),r}function _d(e,t){return"undefined"===typeof e.textContent?e.innerText=t:e.textContent=t,e}function bd(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function xd(e,t){return dd(t),e.classList?e.classList.contains(t):pd(t).test(e.className)}function wd(e,t){return e.classList?e.classList.add(t):xd(e,t)||(e.className=(e.className+" "+t).trim()),e}function Td(e,t){return e.classList?e.classList.remove(t):(dd(t),e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")),e}function Sd(e,t,i){var n=xd(e,t);if("function"===typeof i&&(i=i(e,t)),"boolean"!==typeof i&&(i=!n),i!==n)return i?wd(e,t):Td(e,t),e}function Od(e,t){Object.getOwnPropertyNames(t).forEach((function(i){var n=t[i];null===n||"undefined"===typeof n||!1===n?e.removeAttribute(i):e.setAttribute(i,!0===n?"":n)}))}function Cd(e){var t={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0)for(var n=e.attributes,r=n.length-1;r>=0;r--){var a=n[r].name,o=n[r].value;"boolean"!==typeof e[a]&&-1===i.indexOf(","+a+",")||(o=null!==o),t[a]=o}return t}function kd(e,t){return e.getAttribute(t)}function Pd(e,t,i){e.setAttribute(t,i)}function Ed(e,t){e.removeAttribute(t)}function Ad(){Ml.a.body.focus(),Ml.a.onselectstart=function(){return!1}}function Id(){Ml.a.onselectstart=function(){return!0}}function Md(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(i[e]=t[e])})),i.height||(i.height=parseFloat(Gh(e,"height"))),i.width||(i.width=parseFloat(Gh(e,"width"))),i}}function Dd(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};var t=e.offsetWidth,i=e.offsetHeight,n=0,r=0;while(e.offsetParent&&e!==Ml.a[Ch.fullscreenElement])n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{left:n,top:r,width:t,height:i}}function jd(e,t){var i={x:0,y:0};if(ld){var n=e;while(n&&"html"!==n.nodeName.toLowerCase()){var r=Gh(n,"transform");if(/^matrix/.test(r)){var a=r.slice(7,-1).split(/,\s/).map(Number);i.x+=a[4],i.y+=a[5]}else if(/^matrix3d/.test(r)){var o=r.slice(9,-1).split(/,\s/).map(Number);i.x+=o[12],i.y+=o[13]}n=n.parentNode}}var s={},l=Dd(t.target),c=Dd(e),u=c.width,h=c.height,d=t.offsetY-(c.top-l.top),p=t.offsetX-(c.left-l.left);return t.changedTouches&&(p=t.changedTouches[0].pageX-c.left,d=t.changedTouches[0].pageY+c.top,ld&&(p-=i.x,d-=i.y)),s.y=1-Math.max(0,Math.min(1,d/h)),s.x=Math.max(0,Math.min(1,p/u)),s}function Ld(e){return Fh(e)&&3===e.nodeType}function Rd(e){while(e.firstChild)e.removeChild(e.firstChild);return e}function Nd(e){return"function"===typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return"function"===typeof e&&(e=e()),md(e)||Ld(e)?e:"string"===typeof e&&/\S/.test(e)?Ml.a.createTextNode(e):void 0})).filter((function(e){return e}))}function zd(e,t){return Nd(t).forEach((function(t){return e.appendChild(t)})),e}function Bd(e,t){return zd(Rd(e),t)}function Vd(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||("mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons))}var Fd,Ud=vd("querySelector"),Gd=vd("querySelectorAll"),Hd=Object.freeze({__proto__:null,isReal:fd,isEl:md,isInFrame:gd,createEl:yd,textContent:_d,prependTo:bd,hasClass:xd,addClass:wd,removeClass:Td,toggleClass:Sd,setAttributes:Od,getAttributes:Cd,getAttribute:kd,setAttribute:Pd,removeAttribute:Ed,blockTextSelection:Ad,unblockTextSelection:Id,getBoundingClientRect:Md,findPosition:Dd,getPointerPosition:jd,isTextNode:Ld,emptyEl:Rd,normalizeContent:Nd,appendContent:zd,insertContent:Bd,isSingleLeftClick:Vd,$:Ud,$$:Gd}),Wd=!1,qd=function(){if(fd()&&!1!==Fd.options.autoSetup){var e=Array.prototype.slice.call(Ml.a.getElementsByTagName("video")),t=Array.prototype.slice.call(Ml.a.getElementsByTagName("audio")),i=Array.prototype.slice.call(Ml.a.getElementsByTagName("video-js")),n=e.concat(t,i);if(n&&n.length>0)for(var r=0,a=n.length;r<a;r++){var o=n[r];if(!o||!o.getAttribute){Zd(1);break}if(void 0===o.player){var s=o.getAttribute("data-setup");null!==s&&Fd(o)}}else Wd||Zd(1)}};function Zd(e,t){t&&(Fd=t),Al.a.setTimeout(qd,e)}function Yd(){Wd=!0,Al.a.removeEventListener("load",Yd)}fd()&&("complete"===Ml.a.readyState?Yd():Al.a.addEventListener("load",Yd));var Xd,Kd=function(e){var t=Ml.a.createElement("style");return t.className=e,t},$d=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},Qd=3,Jd=Qd;function ep(){return Jd++}Al.a.WeakMap||(Xd=function(){function e(){this.vdata="vdata"+Math.floor(Al.a.performance&&Al.a.performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var i=e[this.vdata]||ep();return e[this.vdata]||(e[this.vdata]=i),this.data[i]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];jh("We have no data for this element",e)},t.has=function(e){var t=e[this.vdata];return t in this.data},t["delete"]=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var tp,ip=Al.a.WeakMap?new WeakMap:new Xd;function np(e,t){if(ip.has(e)){var i=ip.get(e);0===i.handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&ip["delete"](e)}}function rp(e,t,i,n){i.forEach((function(i){e(t,i,n)}))}function ap(e){if(e.fixed_)return e;function t(){return!0}function i(){return!1}if(!e||!e.isPropagationStopped){var n=e||Al.a.event;for(var r in e={},n)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&n.preventDefault||(e[r]=n[r]));if(e.target||(e.target=e.srcElement||Ml.a),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){n.preventDefault&&n.preventDefault(),e.returnValue=!1,n.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),e.cancelBubble=!0,n.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=i,e.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=i,null!==e.clientX&&void 0!==e.clientX){var a=Ml.a.documentElement,o=Ml.a.body;e.pageX=e.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}var op=function(){if("boolean"!==typeof tp){tp=!1;try{var e=Object.defineProperty({},"passive",{get:function(){tp=!0}});Al.a.addEventListener("test",null,e),Al.a.removeEventListener("test",null,e)}catch(t){}}return tp},sp=["touchstart","touchmove"];function lp(e,t,i){if(Array.isArray(t))return rp(lp,e,t,i);ip.has(e)||ip.set(e,{});var n=ip.get(e);if(n.handlers||(n.handlers={}),n.handlers[t]||(n.handlers[t]=[]),i.guid||(i.guid=ep()),n.handlers[t].push(i),n.dispatcher||(n.disabled=!1,n.dispatcher=function(t,i){if(!n.disabled){t=ap(t);var r=n.handlers[t.type];if(r)for(var a=r.slice(0),o=0,s=a.length;o<s;o++){if(t.isImmediatePropagationStopped())break;try{a[o].call(e,t,i)}catch(l){jh.error(l)}}}}),1===n.handlers[t].length)if(e.addEventListener){var r=!1;op()&&sp.indexOf(t)>-1&&(r={passive:!0}),e.addEventListener(t,n.dispatcher,r)}else e.attachEvent&&e.attachEvent("on"+t,n.dispatcher)}function cp(e,t,i){if(ip.has(e)){var n=ip.get(e);if(n.handlers){if(Array.isArray(t))return rp(cp,e,t,i);var r=function(e,t){n.handlers[t]=[],np(e,t)};if(void 0!==t){var a=n.handlers[t];if(a)if(i){if(i.guid)for(var o=0;o<a.length;o++)a[o].guid===i.guid&&a.splice(o--,1);np(e,t)}else r(e,t)}else for(var s in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},s)&&r(e,s)}}}function up(e,t,i){var n=ip.has(e)?ip.get(e):{},r=e.parentNode||e.ownerDocument;if("string"===typeof t?t={type:t,target:e}:t.target||(t.target=e),t=ap(t),n.dispatcher&&n.dispatcher.call(e,t,i),r&&!t.isPropagationStopped()&&!0===t.bubbles)up.call(null,r,t,i);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){ip.has(t.target)||ip.set(t.target,{});var a=ip.get(t.target);t.target[t.type]&&(a.disabled=!0,"function"===typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function hp(e,t,i){if(Array.isArray(t))return rp(hp,e,t,i);var n=function n(){cp(e,t,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||ep(),lp(e,t,n)}function dp(e,t,i){var n=function n(){cp(e,t,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||ep(),lp(e,t,n)}var pp,fp=Object.freeze({__proto__:null,fixEvent:ap,on:lp,off:cp,trigger:up,one:hp,any:dp}),mp=30,gp=function(e,t,i){t.guid||(t.guid=ep());var n=t.bind(e);return n.guid=i?i+"_"+t.guid:t.guid,n},vp=function(e,t){var i=Al.a.performance.now(),n=function(){var n=Al.a.performance.now();n-i>=t&&(e.apply(void 0,arguments),i=n)};return n},yp=function(e,t,i,n){var r;void 0===n&&(n=Al.a);var a=function(){n.clearTimeout(r),r=null},o=function(){var a=this,o=arguments,s=function(){r=null,s=null,i||e.apply(a,o)};!r&&i&&e.apply(a,o),n.clearTimeout(r),r=n.setTimeout(s,t)};return o.cancel=a,o},_p=function(){};_p.prototype.allowedEvents_={},_p.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},lp(this,e,t),this.addEventListener=i},_p.prototype.addEventListener=_p.prototype.on,_p.prototype.off=function(e,t){cp(this,e,t)},_p.prototype.removeEventListener=_p.prototype.off,_p.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},hp(this,e,t),this.addEventListener=i},_p.prototype.any=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},dp(this,e,t),this.addEventListener=i},_p.prototype.trigger=function(e){var t=e.type||e;"string"===typeof e&&(e={type:t}),e=ap(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),up(this,e)},_p.prototype.dispatchEvent=_p.prototype.trigger,_p.prototype.queueTrigger=function(e){var t=this;pp||(pp=new Map);var i=e.type||e,n=pp.get(this);n||(n=new Map,pp.set(this,n));var r=n.get(i);n["delete"](i),Al.a.clearTimeout(r);var a=Al.a.setTimeout((function(){0===n.size&&(n=null,pp["delete"](t)),t.trigger(e)}),0);n.set(i,a)};var bp=function(e){return"function"===typeof e.name?e.name():"string"===typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},xp=function(e){return e instanceof _p||!!e.eventBusEl_&&["on","one","off","trigger"].every((function(t){return"function"===typeof e[t]}))},wp=function(e,t){xp(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))},Tp=function(e){return"string"===typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},Sp=function(e,t,i){if(!e||!e.nodeName&&!xp(e))throw new Error("Invalid target for "+bp(t)+"#"+i+"; must be a DOM node or evented object.")},Op=function(e,t,i){if(!Tp(e))throw new Error("Invalid event type for "+bp(t)+"#"+i+"; must be a non-empty string or array.")},Cp=function(e,t,i){if("function"!==typeof e)throw new Error("Invalid listener for "+bp(t)+"#"+i+"; must be a function.")},kp=function(e,t,i){var n,r,a,o=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return o?(n=e.eventBusEl_,t.length>=3&&t.shift(),r=t[0],a=t[1]):(n=t[0],r=t[1],a=t[2]),Sp(n,e,i),Op(r,e,i),Cp(a,e,i),a=gp(e,a),{isTargetingSelf:o,target:n,type:r,listener:a}},Pp=function(e,t,i,n){Sp(e,e,t),e.nodeName?fp[t](e,i,n):e[t](i,n)},Ep={on:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=kp(this,i,"on"),a=r.isTargetingSelf,o=r.target,s=r.type,l=r.listener;if(Pp(o,"on",s,l),!a){var c=function(){return e.off(o,s,l)};c.guid=l.guid;var u=function(){return e.off("dispose",c)};u.guid=l.guid,Pp(this,"on","dispose",c),Pp(o,"on","dispose",u)}},one:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=kp(this,i,"one"),a=r.isTargetingSelf,o=r.target,s=r.type,l=r.listener;if(a)Pp(o,"one",s,l);else{var c=function t(){e.off(o,s,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};c.guid=l.guid,Pp(o,"one",s,c)}},any:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=kp(this,i,"any"),a=r.isTargetingSelf,o=r.target,s=r.type,l=r.listener;if(a)Pp(o,"any",s,l);else{var c=function t(){e.off(o,s,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};c.guid=l.guid,Pp(o,"any",s,c)}},off:function(e,t,i){if(!e||Tp(e))cp(this.eventBusEl_,e,t);else{var n=e,r=t;Sp(n,this,"off"),Op(r,this,"off"),Cp(i,this,"off"),i=gp(this,i),this.off("dispose",i),n.nodeName?(cp(n,r,i),cp(n,"dispose",i)):xp(n)&&(n.off(r,i),n.off("dispose",i))}},trigger:function(e,t){Sp(this.eventBusEl_,this,"trigger");var i=e&&"string"!==typeof e?e.type:e;if(!Tp(i)){var n="Invalid event type for "+bp(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!e)throw new Error(n);(this.log||jh).error(n)}return up(this.eventBusEl_,e,t)}};function Ap(e,t){void 0===t&&(t={});var i=t,n=i.eventBusKey;if(n){if(!e[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');e.eventBusEl_=e[n]}else e.eventBusEl_=yd("span",{className:"vjs-event-bus"});return Vh(e,Ep),e.eventedCallbacks&&e.eventedCallbacks.forEach((function(e){e()})),e.on("dispose",(function(){e.off(),Al.a.setTimeout((function(){e.eventBusEl_=null}),0)})),e}var Ip={state:{},setState:function(e){var t,i=this;return"function"===typeof e&&(e=e()),zh(e,(function(e,n){i.state[n]!==e&&(t=t||{},t[n]={from:i.state[n],to:e}),i.state[n]=e})),t&&xp(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function Mp(e,t){return Vh(e,Ip),e.state=Vh({},e.state,t),"function"===typeof e.handleStateChanged&&xp(e)&&e.on("statechanged",e.handleStateChanged),e}var Dp=function(e){return"string"!==typeof e?e:e.replace(/./,(function(e){return e.toLowerCase()}))},jp=function(e){return"string"!==typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))},Lp=function(e,t){return jp(e)===jp(t)};function Rp(){for(var e={},t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.forEach((function(t){t&&zh(t,(function(t,i){Uh(t)?(Uh(e[i])||(e[i]={}),e[i]=Rp(e[i],t)):e[i]=t}))})),e}var Np=function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t["delete"]=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.map_[e]=t,this},t.forEach=function(e,t){for(var i in this.map_)e.call(t,this.map_[i],i,this)},e}(),zp=Al.a.Map?Al.a.Map:Np,Bp=function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t["delete"]=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var i in this.set_)e.call(t,i,i,this)},e}(),Vp=Al.a.Set?Al.a.Set:Bp,Fp=function(){function e(e,t,i){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Rp({},this.options_),t=this.options_=Rp(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var n=e&&e.id&&e.id()||"no_player";this.id_=n+"_component_"+ep()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&(Ap(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Mp(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Vp,this.setIntervalIds_=new Vp,this.rafIds_=new Vp,this.namedRafs_=new zp,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(i),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),ip.has(this.el_)&&ip["delete"](this.el_),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(e){return e?(this.options_=Rp(this.options_,e),this.options_):this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,i){return yd(e,t,i)},t.localize=function(e,t,i){void 0===i&&(i=e);var n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[n],o=n&&n.split("-")[0],s=r&&r[o],l=i;return a&&a[e]?l=a[e]:s&&s[e]&&(l=s[e]),t&&(l=l.replace(/\{(\d+)\}/g,(function(e,i){var n=t[i-1],r=n;return"undefined"===typeof n&&(r=e),r}))),l},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.getDescendant=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t=t.reduce((function(e,t){return e.concat(t)}),[]);for(var n=this,r=0;r<t.length;r++)if(n=n.getChild(t[r]),!n||!n.getChild)return;return n},t.addChild=function(t,i,n){var r,a;if(void 0===i&&(i={}),void 0===n&&(n=this.children_.length),"string"===typeof t){a=jp(t);var o=i.componentClass||a;i.name=a;var s=e.getComponent(o);if(!s)throw new Error("Component "+o+" does not exist");if("function"!==typeof s)return null;r=new s(this.player_||this,i)}else r=t;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(n,0,r),r.parentComponent_=this,"function"===typeof r.id&&(this.childIndex_[r.id()]=r),a=a||r.name&&jp(r.name()),a&&(this.childNameIndex_[a]=r,this.childNameIndex_[Dp(a)]=r),"function"===typeof r.el&&r.el()){var l=null;this.children_[n+1]&&(this.children_[n+1].el_?l=this.children_[n+1].el_:md(this.children_[n+1])&&(l=this.children_[n+1])),this.contentEl().insertBefore(r.el(),l)}return r},t.removeChild=function(e){if("string"===typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[jp(e.name())]=null,this.childNameIndex_[Dp(e.name())]=null;var n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},t.initChildren=function(){var t=this,i=this.options_.children;if(i){var n,r=this.options_,a=function(e){var i=e.name,n=e.opts;if(void 0!==r[i]&&(n=r[i]),!1!==n){!0===n&&(n={}),n.playerOptions=t.options_.playerOptions;var a=t.addChild(i,n);a&&(t[i]=a)}},o=e.getComponent("Tech");n=Array.isArray(i)?i:Object.keys(i),n.concat(Object.keys(this.options_).filter((function(e){return!n.some((function(t){return"string"===typeof t?e===t:e===t.name}))}))).map((function(e){var n,r;return"string"===typeof e?(n=e,r=i[n]||t.options_[n]||{}):(n=e.name,r=e),{name:n,opts:r}})).filter((function(t){var i=e.getComponent(t.opts.componentClass||jp(t.name));return i&&!o.isTech(i)})).forEach(a)}},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)},t.$=function(e,t){return Ud(e,t||this.contentEl())},t.$$=function(e,t){return Gd(e,t||this.contentEl())},t.hasClass=function(e){return xd(this.el_,e)},t.addClass=function(e){wd(this.el_,e)},t.removeClass=function(e){Td(this.el_,e)},t.toggleClass=function(e,t){Sd(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return kd(this.el_,e)},t.setAttribute=function(e,t){Pd(this.el_,e,t)},t.removeAttribute=function(e){Ed(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,i){if(void 0!==t)return null!==t&&t===t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;var n=this.el_.style[e],r=n.indexOf("px");return-1!==r?parseInt(n.slice(0,r),10):parseInt(this.el_["offset"+jp(e)],10)},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=Gh(this.el_,e),t=parseFloat(t),0===t||isNaN(t)){var i="offset"+jp(e);t=this.el_[i]}return t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&(e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){var e,t=0,i=null,n=10,r=200;this.on("touchstart",(function(n){1===n.touches.length&&(i={pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},t=Al.a.performance.now(),e=!0)})),this.on("touchmove",(function(t){if(t.touches.length>1)e=!1;else if(i){var r=t.touches[0].pageX-i.pageX,a=t.touches[0].pageY-i.pageY,o=Math.sqrt(r*r+a*a);o>n&&(e=!1)}}));var a=function(){e=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",(function(n){if(i=null,!0===e){var a=Al.a.performance.now()-t;a<r&&(n.preventDefault(),this.trigger("tap"))}}))},t.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=gp(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){t(),this.clearInterval(e),e=this.setInterval(t,250)}));var i=function(i){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",i),this.on("touchcancel",i)}},t.setTimeout=function(e,t){var i,n=this;return e=gp(this,e),this.clearTimersOnDispose_(),i=Al.a.setTimeout((function(){n.setTimeoutIds_.has(i)&&n.setTimeoutIds_["delete"](i),e()}),t),this.setTimeoutIds_.add(i),i},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_["delete"](e),Al.a.clearTimeout(e)),e},t.setInterval=function(e,t){e=gp(this,e),this.clearTimersOnDispose_();var i=Al.a.setInterval(e,t);return this.setIntervalIds_.add(i),i},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_["delete"](e),Al.a.clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,i=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=gp(this,e),t=Al.a.requestAnimationFrame((function(){i.rafIds_.has(t)&&i.rafIds_["delete"](t),e()})),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},t.requestNamedAnimationFrame=function(e,t){var i=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=gp(this,t);var n=this.requestAnimationFrame((function(){t(),i.namedRafs_.has(e)&&i.namedRafs_["delete"](e)}));return this.namedRafs_.set(e,n),e}},t.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_["delete"](e))},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_["delete"](e),Al.a.cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(t){var i=t[0],n=t[1];e[i].forEach((function(t,i){return e[n](i)}))})),e.clearingTimersOnDispose_=!1})))},e.registerComponent=function(t,i){if("string"!==typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var n,r=e.getComponent("Tech"),a=r&&r.isTech(i),o=e===i||e.prototype.isPrototypeOf(i.prototype);if(a||!o)throw n=a?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+t+'"; '+n+".");t=jp(t),e.components_||(e.components_={});var s=e.getComponent("Player");if("Player"===t&&s&&s.players){var l=s.players,c=Object.keys(l);if(l&&c.length>0&&c.map((function(e){return l[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=i,e.components_[Dp(t)]=i,i},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}();function Up(e,t,i){if("number"!==typeof t||t<0||t>i)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+i+").")}function Gp(e,t,i,n){return Up(e,n,i.length-1),i[n][t]}function Hp(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:Gp.bind(null,"start",0,e),end:Gp.bind(null,"end",1,e)}}function Wp(e,t){return Array.isArray(e)?Hp(e):void 0===e||void 0===t?Hp():Hp([[e,t]])}function qp(e,t){var i,n,r=0;if(!t)return 0;e&&e.length||(e=Wp(0,0));for(var a=0;a<e.length;a++)i=e.start(a),n=e.end(a),n>t&&(n=t),r+=n-i;return r/t}function Zp(e){if(e instanceof Zp)return e;"number"===typeof e?this.code=e:"string"===typeof e?this.message=e:Fh(e)&&("number"===typeof e.code&&(this.code=e.code),Vh(this,e)),this.message||(this.message=Zp.defaultMessages[this.code]||"")}Fp.prototype.supportsRaf_="function"===typeof Al.a.requestAnimationFrame&&"function"===typeof Al.a.cancelAnimationFrame,Fp.registerComponent("Component",Fp),Zp.prototype.code=0,Zp.prototype.message="",Zp.prototype.status=null,Zp.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Zp.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Yp=0;Yp<Zp.errorTypes.length;Yp++)Zp[Zp.errorTypes[Yp]]=Yp,Zp.prototype[Zp.errorTypes[Yp]]=Yp;function Xp(e){return void 0!==e&&null!==e&&"function"===typeof e.then}function Kp(e){Xp(e)&&e.then(null,(function(e){}))}var $p=function(e){var t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(t,i,n){return e[i]&&(t[i]=e[i]),t}),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))});return t},Qp=function(e){var t=e.$$("track"),i=Array.prototype.map.call(t,(function(e){return e.track})),n=Array.prototype.map.call(t,(function(e){var t=$p(e.track);return e.src&&(t.src=e.src),t}));return n.concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===i.indexOf(e)})).map($p))},Jp=function(e,t){return e.forEach((function(e){var i=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((function(e){return i.addCue(e)}))})),t.textTracks()},ef={textTracksToJson:Qp,jsonToTextTracks:Jp,trackToJson_:$p},tf="vjs-modal-dialog",nf=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.handleKeyDown_=function(e){return n.handleKeyDown(e)},n.close_=function(e){return n.close(e)},n.opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=yd("div",{className:tf+"-content"},{role:"document"}),n.descEl_=yd("p",{className:tf+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),_d(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}zl()(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},i.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},i.buildCSSClass=function(){return tf+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},i.label=function(){return this.localize(this.options_.label||"Modal Window")},i.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},i.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},i.opened=function(e){return"boolean"===typeof e&&this[e?"open":"close"](),this.opened_},i.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},i.closeable=function(e){if("boolean"===typeof e){var t=this.closeable_=!!e,i=this.getChild("closeButton");if(t&&!i){var n=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(i,"close",this.close_)}!t&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_},i.fill=function(){this.fillWith(this.content())},i.fillWith=function(e){var t=this.contentEl(),i=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),Bd(t,e),this.trigger("modalfill"),n?i.insertBefore(t,n):i.appendChild(t);var r=this.getChild("closeButton");r&&i.appendChild(r.el_)},i.empty=function(){this.trigger("beforemodalempty"),Rd(this.contentEl()),this.trigger("modalempty")},i.content=function(e){return"undefined"!==typeof e&&(this.content_=e),this.content_},i.conditionalFocus_=function(){var e=Ml.a.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())},i.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},i.handleKeyDown=function(e){if(e.stopPropagation(),Ul.a.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(Ul.a.isEventKey(e,"Tab")){for(var t,i=this.focusableEls_(),n=this.el_.querySelector(":focus"),r=0;r<i.length;r++)if(n===i[r]){t=r;break}Ml.a.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(i[i.length-1].focus(),e.preventDefault()):e.shiftKey||t!==i.length-1||(i[0].focus(),e.preventDefault())}},i.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(function(e){return(e instanceof Al.a.HTMLAnchorElement||e instanceof Al.a.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof Al.a.HTMLInputElement||e instanceof Al.a.HTMLSelectElement||e instanceof Al.a.HTMLTextAreaElement||e instanceof Al.a.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof Al.a.HTMLIFrameElement||e instanceof Al.a.HTMLObjectElement||e instanceof Al.a.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")}))},t}(Fp);nf.prototype.options_={pauseOnOpen:!0,temporary:!0},Fp.registerComponent("ModalDialog",nf);var rf=function(e){function t(t){var i;void 0===t&&(t=[]),i=e.call(this)||this,i.tracks_=[],Object.defineProperty(Rl()(i),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<t.length;n++)i.addTrack(t[n]);return i}zl()(t,e);var i=t.prototype;return i.addTrack=function(e){var t=this,i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.tracks_[i]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},xp(e)&&e.addEventListener("labelchange",e.labelchange_)},i.removeTrack=function(e){for(var t,i=0,n=this.length;i<n;i++)if(this[i]===e){t=this[i],t.off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},i.getTrackById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},t}(_p);for(var af in rf.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},rf.prototype.allowedEvents_)rf.prototype["on"+af]=null;var of=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].enabled=!1)},sf=function(e){function t(t){var i;void 0===t&&(t=[]);for(var n=t.length-1;n>=0;n--)if(t[n].enabled){of(t,t[n]);break}return i=e.call(this,t)||this,i.changing_=!1,i}zl()(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;t.enabled&&of(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){i.changing_||(i.changing_=!0,of(i,t),i.changing_=!1,i.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(rf),lf=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].selected=!1)},cf=function(e){function t(t){var i;void 0===t&&(t=[]);for(var n=t.length-1;n>=0;n--)if(t[n].selected){lf(t,t[n]);break}return i=e.call(this,t)||this,i.changing_=!1,Object.defineProperty(Rl()(i),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),i}zl()(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;t.selected&&lf(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){i.changing_||(i.changing_=!0,lf(i,t),i.changing_=!1,i.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(rf),uf=function(e){function t(){return e.apply(this,arguments)||this}zl()(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return i.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return i.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_);var n=["metadata","chapters"];-1===n.indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(rf),hf=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t},t.removeTrackElement_=function(e){for(var t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"===typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"===typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),df=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,i=0,n=e.length;this.cues_=e,this.length_=e.length;var r=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<n)for(i=t;i<n;i++)r.call(this,i)},t.getCueById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},e}(),pf={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},ff={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},mf={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},gf={disabled:"disabled",hidden:"hidden",showing:"showing"},vf=function(e){function t(t){var i;void 0===t&&(t={}),i=e.call(this)||this;var n={id:t.id||"vjs_track_"+ep(),kind:t.kind||"",language:t.language||""},r=t.label||"",a=function(e){Object.defineProperty(Rl()(i),e,{get:function(){return n[e]},set:function(){}})};for(var o in n)a(o);return Object.defineProperty(Rl()(i),"label",{get:function(){return r},set:function(e){e!==r&&(r=e,this.trigger("labelchange"))}}),i}return zl()(t,e),t}(_p),yf=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],i=Ml.a.createElement("a");i.href=e;var n,r=""===i.host&&"file:"!==i.protocol;r&&(n=Ml.a.createElement("div"),n.innerHTML='<a href="'+e+'"></a>',i=n.firstChild,n.setAttribute("style","display:none; position:absolute;"),Ml.a.body.appendChild(n));for(var a={},o=0;o<t.length;o++)a[t[o]]=i[t[o]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),a.protocol||(a.protocol=Al.a.location.protocol),r&&Ml.a.body.removeChild(n),a},_f=function(e){if(!e.match(/^https?:\/\//)){var t=Ml.a.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},bf=function(e){if("string"===typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,i=t.exec(e);if(i)return i.pop().toLowerCase()}return""},xf=function(e,t){void 0===t&&(t=Al.a.location);var i=yf(e),n=":"===i.protocol?t.protocol:i.protocol,r=n+i.host!==t.protocol+t.host;return r},wf=Object.freeze({__proto__:null,parseUrl:yf,getAbsoluteURL:_f,getFileExtension:bf,isCrossOrigin:xf}),Tf=function(e,t){var i=new Al.a.WebVTT.Parser(Al.a,Al.a.vttjs,Al.a.WebVTT.StringDecoder()),n=[];i.oncue=function(e){t.addCue(e)},i.onparsingerror=function(e){n.push(e)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(e),n.length>0&&(Al.a.console&&Al.a.console.groupCollapsed&&Al.a.console.groupCollapsed("Text Track parsing errors for "+t.src),n.forEach((function(e){return jh.error(e)})),Al.a.console&&Al.a.console.groupEnd&&Al.a.console.groupEnd()),i.flush()},Sf=function(e,t){var i={uri:e},n=xf(e);n&&(i.cors=n);var r="use-credentials"===t.tech_.crossOrigin();r&&(i.withCredentials=r),Hl()(i,gp(this,(function(e,i,n){if(e)return jh.error(e,i);t.loaded_=!0,"function"!==typeof Al.a.WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(function(e){if("vttjserror"!==e.type)return Tf(n,t);jh.error("vttjs failed to load, stopping trying to process "+t.src)})):Tf(n,t)})))},Of=function(e){function t(t){var i;if(void 0===t&&(t={}),!t.tech)throw new Error("A tech was not provided.");var n=Rp(t,{kind:mf[t.kind]||"subtitles",language:t.language||t.srclang||""}),r=gf[n.mode]||"disabled",a=n["default"];"metadata"!==n.kind&&"chapters"!==n.kind||(r="hidden"),i=e.call(this,n)||this,i.tech_=n.tech,i.cues_=[],i.activeCues_=[],i.preload_=!1!==i.tech_.preloadTextTracks;var o=new df(i.cues_),s=new df(i.activeCues_),l=!1,c=gp(Rl()(i),(function(){this.tech_.isReady_&&!this.tech_.isDisposed()&&(this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1))})),u=function(){i.tech_.off("timeupdate",c)};return i.tech_.one("dispose",u),"disabled"!==r&&i.tech_.on("timeupdate",c),Object.defineProperties(Rl()(i),{default:{get:function(){return a},set:function(){}},mode:{get:function(){return r},set:function(e){gf[e]&&r!==e&&(r=e,this.preload_||"disabled"===r||0!==this.cues.length||Sf(this.src,this),this.tech_.off("timeupdate",c),"disabled"!==r&&this.tech_.on("timeupdate",c),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?o:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return s;for(var e=this.tech_.currentTime(),t=[],i=0,n=this.cues.length;i<n;i++){var r=this.cues[i];(r.startTime<=e&&r.endTime>=e||r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e)&&t.push(r)}if(l=!1,t.length!==this.activeCues_.length)l=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(l=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set:function(){}}}),n.src?(i.src=n.src,i.preload_||(i.loaded_=!0),(i.preload_||"subtitles"!==n.kind&&"captions"!==n.kind)&&Sf(i.src,Rl()(i))):i.loaded_=!0,i}zl()(t,e);var i=t.prototype;return i.addCue=function(e){var t=e;if(Al.a.vttjs&&!(e instanceof Al.a.vttjs.VTTCue)){for(var i in t=new Al.a.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}for(var n=this.tech_.textTracks(),r=0;r<n.length;r++)n[r]!==this&&n[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},i.removeCue=function(e){var t=this.cues_.length;while(t--){var i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(vf);Of.prototype.allowedEvents_={cuechange:"cuechange"};var Cf=function(e){function t(t){var i;void 0===t&&(t={});var n=Rp(t,{kind:ff[t.kind]||""});i=e.call(this,n)||this;var r=!1;return Object.defineProperty(Rl()(i),"enabled",{get:function(){return r},set:function(e){"boolean"===typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),n.enabled&&(i.enabled=n.enabled),i.loaded_=!0,i}return zl()(t,e),t}(vf),kf=function(e){function t(t){var i;void 0===t&&(t={});var n=Rp(t,{kind:pf[t.kind]||""});i=e.call(this,n)||this;var r=!1;return Object.defineProperty(Rl()(i),"selected",{get:function(){return r},set:function(e){"boolean"===typeof e&&e!==r&&(r=e,this.trigger("selectedchange"))}}),n.selected&&(i.selected=n.selected),i}return zl()(t,e),t}(vf),Pf=0,Ef=1,Af=2,If=3,Mf=function(e){function t(t){var i,n;void 0===t&&(t={}),i=e.call(this)||this;var r=new Of(t);return i.kind=r.kind,i.src=r.src,i.srclang=r.language,i.label=r.label,i["default"]=r["default"],Object.defineProperties(Rl()(i),{readyState:{get:function(){return n}},track:{get:function(){return r}}}),n=Pf,r.addEventListener("loadeddata",(function(){n=Af,i.trigger({type:"load",target:Rl()(i)})})),i}return zl()(t,e),t}(_p);Mf.prototype.allowedEvents_={load:"load"},Mf.NONE=Pf,Mf.LOADING=Ef,Mf.LOADED=Af,Mf.ERROR=If;var Df={audio:{ListClass:sf,TrackClass:Cf,capitalName:"Audio"},video:{ListClass:cf,TrackClass:kf,capitalName:"Video"},text:{ListClass:uf,TrackClass:Of,capitalName:"Text"}};Object.keys(Df).forEach((function(e){Df[e].getterName=e+"Tracks",Df[e].privateName=e+"Tracks_"}));var jf={remoteText:{ListClass:uf,TrackClass:Of,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:hf,TrackClass:Mf,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Lf=jl()({},Df,jf);function Rf(e,t,i,n,r){void 0===r&&(r={});var a=e.textTracks();r.kind=t,i&&(r.label=i),n&&(r.language=n),r.tech=e;var o=new Lf.text.TrackClass(r);return a.addTrack(o),o}jf.names=Object.keys(jf),Df.names=Object.keys(Df),Lf.names=[].concat(jf.names).concat(Df.names);var Nf=function(e){function t(t,i){var n;return void 0===t&&(t={}),void 0===i&&(i=function(){}),t.reportTouchActivity=!1,n=e.call(this,null,t,i)||this,n.onDurationChange_=function(e){return n.onDurationChange(e)},n.trackProgress_=function(e){return n.trackProgress(e)},n.trackCurrentTime_=function(e){return n.trackCurrentTime(e)},n.stopTrackingCurrentTime_=function(e){return n.stopTrackingCurrentTime(e)},n.disposeSourceHandler_=function(e){return n.disposeSourceHandler(e)},n.hasStarted_=!1,n.on("playing",(function(){this.hasStarted_=!0})),n.on("loadstart",(function(){this.hasStarted_=!1})),Lf.names.forEach((function(e){var i=Lf[e];t&&t[i.getterName]&&(n[i.privateName]=t[i.getterName])})),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(e){!1===t["native"+e+"Tracks"]&&(n["featuresNative"+e+"Tracks"]=!1)})),!1===t.nativeCaptions||!1===t.nativeTextTracks?n.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.preloadTextTracks=!1!==t.preloadTextTracks,n.autoRemoteTextTracks_=new Lf.text.ListClass,n.initTrackListeners(),t.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}zl()(t,e);var i=t.prototype;return i.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",(function(){return t.setTimeout((function(){return t.triggerSourceset(e)}),1)})),this.trigger({src:e,type:"sourceset"})},i.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},i.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},i.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(gp(this,(function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)},i.onDurationChange=function(e){this.duration_=this.duration()},i.buffered=function(){return Wp(0,0)},i.bufferedPercent=function(){return qp(this.buffered(),this.duration_)},i.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},i.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},i.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},i.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},i.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.dispose=function(){this.clearTracks(Df.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},i.clearTracks=function(e){var t=this;e=[].concat(e),e.forEach((function(e){var i=t[e+"Tracks"]()||[],n=i.length;while(n--){var r=i[n];"text"===e&&t.removeRemoteTextTrack(r),i.removeTrack(r)}}))},i.cleanupAutoTextTracks=function(){var e=this.autoRemoteTextTracks_||[],t=e.length;while(t--){var i=e[t];this.removeRemoteTextTrack(i)}},i.reset=function(){},i.crossOrigin=function(){},i.setCrossOrigin=function(){},i.error=function(e){return void 0!==e&&(this.error_=new Zp(e),this.trigger("error")),this.error_},i.played=function(){return this.hasStarted_?Wp(0,0):Wp()},i.play=function(){},i.setScrubbing=function(){},i.scrubbing=function(){},i.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.initTrackListeners=function(){var e=this;Df.names.forEach((function(t){var i=Df[t],n=function(){e.trigger(t+"trackchange")},r=e[i.getterName]();r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),e.on("dispose",(function(){r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n)}))}))},i.addWebVttScript_=function(){var e=this;if(!Al.a.WebVTT)if(Ml.a.body.contains(this.el())){if(!this.options_["vtt.js"]&&Uh(ql.a)&&Object.keys(ql.a).length>0)return void this.trigger("vttjsloaded");var t=Ml.a.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",(function(){t.onload=null,t.onerror=null})),Al.a.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},i.emulateTextTracks=function(){var e=this,t=this.textTracks(),i=this.remoteTextTracks(),n=function(e){return t.addTrack(e.track)},r=function(e){return t.removeTrack(e.track)};i.on("addtrack",n),i.on("removetrack",r),this.addWebVttScript_();var a=function(){return e.trigger("texttrackchange")},o=function(){a();for(var e=0;e<t.length;e++){var i=t[e];i.removeEventListener("cuechange",a),"showing"===i.mode&&i.addEventListener("cuechange",a)}};o(),t.addEventListener("change",o),t.addEventListener("addtrack",o),t.addEventListener("removetrack",o),this.on("dispose",(function(){i.off("addtrack",n),i.off("removetrack",r),t.removeEventListener("change",o),t.removeEventListener("addtrack",o),t.removeEventListener("removetrack",o);for(var e=0;e<t.length;e++){var s=t[e];s.removeEventListener("cuechange",a)}}))},i.addTextTrack=function(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return Rf(this,e,t,i)},i.createRemoteTextTrack=function(e){var t=Rp(e,{tech:this});return new jf.remoteTextEl.TrackClass(t)},i.addRemoteTextTrack=function(e,t){var i=this;void 0===e&&(e={});var n=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(jh.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==t&&this.ready((function(){return i.autoRemoteTextTracks_.addTrack(n.track)})),n},i.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},i.getVideoPlaybackQuality=function(){return{}},i.requestPictureInPicture=function(){var e=this.options_.Promise||Al.a.Promise;if(e)return e.reject()},i.disablePictureInPicture=function(){return!0},i.setDisablePictureInPicture=function(){},i.setPoster=function(){},i.playsinline=function(){},i.setPlaysinline=function(){},i.overrideNativeAudioTracks=function(){},i.overrideNativeVideoTracks=function(){},i.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,i){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,i){if(t.techs_||(t.techs_={}),!t.isTech(i))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=jp(e),t.techs_[e]=i,t.techs_[Dp(e)]=i,"Tech"!==e&&t.defaultTechOrder_.push(e),i},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=jp(e),Al.a&&Al.a.videojs&&Al.a.videojs[e]?(jh.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),Al.a.videojs[e]):void 0)},t}(Fp);Lf.names.forEach((function(e){var t=Lf[e];Nf.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),Nf.prototype.featuresVolumeControl=!0,Nf.prototype.featuresMuteControl=!0,Nf.prototype.featuresFullscreenResize=!1,Nf.prototype.featuresPlaybackRate=!1,Nf.prototype.featuresProgressEvents=!1,Nf.prototype.featuresSourceset=!1,Nf.prototype.featuresTimeupdateEvents=!1,Nf.prototype.featuresNativeTextTracks=!1,Nf.withSourceHandlers=function(e){e.registerSourceHandler=function(t,i){var n=e.sourceHandlers;n||(n=e.sourceHandlers=[]),void 0===i&&(i=n.length),n.splice(i,0,t)},e.canPlayType=function(t){for(var i,n=e.sourceHandlers||[],r=0;r<n.length;r++)if(i=n[r].canPlayType(t),i)return i;return""},e.selectSourceHandler=function(t,i){for(var n,r=e.sourceHandlers||[],a=0;a<r.length;a++)if(n=r[a].canHandleSource(t,i),n)return r[a];return null},e.canPlaySource=function(t,i){var n=e.selectSourceHandler(t,i);return n?n.canHandleSource(t,i):""};var t=["seekable","seeking","duration"];t.forEach((function(e){var t=this[e];"function"===typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){var i=e.selectSourceHandler(t,this.options_);i||(e.nativeSourceHandler?i=e.nativeSourceHandler:jh.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Fp.registerComponent("Tech",Nf),Nf.registerTech("Tech",Nf),Nf.defaultTechOrder_=[];var zf={},Bf={},Vf={};function Ff(e,t){zf[e]=zf[e]||[],zf[e].push(t)}function Uf(e,t,i){e.setTimeout((function(){return em(t,zf[t.type],i,e)}),1)}function Gf(e,t){e.forEach((function(e){return e.setTech&&e.setTech(t)}))}function Hf(e,t,i){return e.reduceRight(Kf(i),t[i]())}function Wf(e,t,i,n){return t[i](e.reduce(Kf(i),n))}function qf(e,t,i,n){void 0===n&&(n=null);var r="call"+jp(i),a=e.reduce(Kf(r),n),o=a===Vf,s=o?null:t[i](a);return $f(e,i,s,o),s}var Zf={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},Yf={setCurrentTime:1,setMuted:1,setVolume:1},Xf={play:1,pause:1};function Kf(e){return function(t,i){return t===Vf?Vf:i[e]?i[e](t):t}}function $f(e,t,i,n){for(var r=e.length-1;r>=0;r--){var a=e[r];a[t]&&a[t](n,i)}}function Qf(e){Bf[e.id()]=null}function Jf(e,t){var i=Bf[e.id()],n=null;if(void 0===i||null===i)return n=t(e),Bf[e.id()]=[[t,n]],n;for(var r=0;r<i.length;r++){var a=i[r],o=a[0],s=a[1];o===t&&(n=s)}return null===n&&(n=t(e),i.push([t,n])),n}function em(e,t,i,n,r,a){void 0===e&&(e={}),void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===a&&(a=!1);var o=t,s=o[0],l=o.slice(1);if("string"===typeof s)em(e,zf[s],i,n,r,a);else if(s){var c=Jf(n,s);if(!c.setSource)return r.push(c),em(e,l,i,n,r,a);c.setSource(Vh({},e),(function(t,o){if(t)return em(e,l,i,n,r,a);r.push(c),em(o,e.type===o.type?l:zf[o.type],i,n,r,a)}))}else l.length?em(e,l,i,n,r,a):a?i(e,r):em(e,zf["*"],i,n,r,!0)}var tm={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},im=function(e){void 0===e&&(e="");var t=bf(e),i=tm[t.toLowerCase()];return i||""},nm=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter((function(e){return e.src===t}));if(i.length)return i[0].type;for(var n=e.$$("source"),r=0;r<n.length;r++){var a=n[r];if(a.type&&a.src&&a.src===t)return a.type}return im(t)},rm=function e(t){if(Array.isArray(t)){var i=[];t.forEach((function(t){t=e(t),Array.isArray(t)?i=i.concat(t):Fh(t)&&i.push(t)})),t=i}else t="string"===typeof t&&t.trim()?[am({src:t})]:Fh(t)&&"string"===typeof t.src&&t.src&&t.src.trim()?[am(t)]:[];return t};function am(e){if(!e.type){var t=im(e.src);t&&(e.type=t)}return e}var om=function(e){function t(t,i,n){var r,a=Rp({createEl:!1},i);if(r=e.call(this,t,a,n)||this,i.playerOptions.sources&&0!==i.playerOptions.sources.length)t.src(i.playerOptions.sources);else for(var o=0,s=i.playerOptions.techOrder;o<s.length;o++){var l=jp(s[o]),c=Nf.getTech(l);if(l||(c=Fp.getComponent(l)),c&&c.isSupported()){t.loadTech_(l);break}}return r}return zl()(t,e),t}(Fp);Fp.registerComponent("MediaLoader",om);var sm=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.handleMouseOver_=function(e){return n.handleMouseOver(e)},n.handleMouseOut_=function(e){return n.handleMouseOut(e)},n.handleClick_=function(e){return n.handleClick(e)},n.handleKeyDown_=function(e){return n.handleKeyDown(e)},n.emitTapEvents(),n.enable(),n}zl()(t,e);var i=t.prototype;return i.createEl=function(t,i,n){void 0===t&&(t="div"),void 0===i&&(i={}),void 0===n&&(n={}),i=Vh({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},i),"button"===t&&jh.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),n=Vh({role:"button"},n),this.tabIndex_=i.tabIndex;var r=e.prototype.createEl.call(this,t,i,n);return this.createControlTextEl(r),r},i.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},i.createControlTextEl=function(e){return this.controlTextEl_=yd("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},i.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var i=this.localize(e);this.controlText_=e,_d(this.controlTextEl_,i),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",i)},i.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},i.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},i.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},i.handleLanguagechange=function(){this.controlText(this.controlText_)},i.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},i.handleKeyDown=function(t){Ul.a.isEventKey(t,"Space")||Ul.a.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(Fp);Fp.registerComponent("ClickableComponent",sm);var lm=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.update(),n.update_=function(e){return n.update(e)},t.on("posterchange",n.update_),n}zl()(t,e);var i=t.prototype;return i.dispose=function(){this.player().off("posterchange",this.update_),e.prototype.dispose.call(this)},i.createEl=function(){var e=yd("div",{className:"vjs-poster",tabIndex:-1});return e},i.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},i.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},i.handleClick=function(e){if(this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(id||Jh)&&t||this.player_.tech(!0).focus(),this.player_.paused()?Kp(this.player_.play()):this.player_.pause()}},t}(sm);Fp.registerComponent("PosterImage",lm);var cm="#222",um="#ccc",hm={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function dm(e,t){var i;if(4===e.length)i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");i=e.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function pm(e,t,i){try{e.style[t]=i}catch(n){return}}var fm=function(e){function t(t,i,n){var r;r=e.call(this,t,i,n)||this;var a=function(e){return r.updateDisplay(e)};return t.on("loadstart",(function(e){return r.toggleDisplay(e)})),t.on("texttrackchange",a),t.on("loadedmetadata",(function(e){return r.preselectTrack(e)})),t.ready(gp(Rl()(r),(function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",a),t.on("playerresize",a),Al.a.addEventListener("orientationchange",a),t.on("dispose",(function(){return Al.a.removeEventListener("orientationchange",a)}));for(var e=this.options_.playerOptions.tracks||[],i=0;i<e.length;i++)this.player_.addRemoteTextTrack(e[i],!0);this.preselectTrack()}}))),r}zl()(t,e);var i=t.prototype;return i.preselectTrack=function(){for(var e,t,i,n={captions:1,subtitles:1},r=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,o=0;o<r.length;o++){var s=r[o];a&&a.enabled&&a.language&&a.language===s.language&&s.kind in n?s.kind===a.kind?i=s:i||(i=s):a&&!a.enabled?(i=null,e=null,t=null):s["default"]&&("descriptions"!==s.kind||e?s.kind in n&&!t&&(t=s):e=s)}i?i.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},i.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},i.clearDisplay=function(){"function"===typeof Al.a.WebVTT&&Al.a.WebVTT.processCues(Al.a,[],this.el_)},i.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var i=[],n=0;n<e.length;++n){var r=e[n];"showing"===r.mode&&i.push(r)}this.updateForTrack(i)}else{var a=null,o=null,s=e.length;while(s--){var l=e[s];"showing"===l.mode&&("descriptions"===l.kind?a=l:o=l)}o?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(o)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},i.updateDisplayState=function(e){var t=this.player_.textTrackSettings.getValues(),i=e.activeCues,n=i.length;while(n--){var r=i[n];if(r){var a=r.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&pm(a.firstChild,"color",dm(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&pm(a.firstChild,"backgroundColor",dm(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?pm(a,"backgroundColor",dm(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px "+cm+", 2px 2px 4px "+cm+", 2px 2px 5px "+cm:"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px "+cm+", 2px 2px "+cm+", 3px 3px "+cm:"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px "+um+", 0 1px "+um+", -1px -1px "+cm+", 0 -1px "+cm:"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px "+cm+", 0 0 4px "+cm+", 0 0 4px "+cm+", 0 0 4px "+cm)),t.fontPercent&&1!==t.fontPercent){var o=Al.a.parseFloat(a.style.fontSize);a.style.fontSize=o*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=hm[t.fontFamily])}}},i.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"===typeof Al.a.WebVTT&&!e.every((function(e){return!e.activeCues}))){for(var t=[],i=0;i<e.length;++i)for(var n=e[i],r=0;r<n.activeCues.length;++r)t.push(n.activeCues[r]);Al.a.WebVTT.processCues(Al.a,t,this.el_);for(var a=0;a<e.length;++a){for(var o=e[a],s=0;s<o.activeCues.length;++s){var l=o.activeCues[s].displayState;wd(l,"vjs-text-track-cue"),wd(l,"vjs-text-track-cue-"+(o.language?o.language:a))}this.player_.textTrackSettings&&this.updateDisplayState(o)}}},t}(Fp);Fp.registerComponent("TextTrackDisplay",fm);var mm=function(e){function t(){return e.apply(this,arguments)||this}zl()(t,e);var i=t.prototype;return i.createEl=function(){var t=this.player_.isAudio(),i=this.localize(t?"Audio Player":"Video Player"),n=yd("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[i])}),r=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(n),r},t}(Fp);Fp.registerComponent("LoadingSpinner",mm);var gm=function(e){function t(){return e.apply(this,arguments)||this}zl()(t,e);var i=t.prototype;return i.createEl=function(e,t,i){void 0===t&&(t={}),void 0===i&&(i={}),e="button",t=Vh({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),i=Vh({type:"button"},i);var n=Fp.prototype.createEl.call(this,e,t,i);return this.createControlTextEl(n),n},i.addChild=function(e,t){void 0===t&&(t={});var i=this.constructor.name;return jh.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),Fp.prototype.addChild.call(this,e,t)},i.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyDown=function(t){Ul.a.isEventKey(t,"Space")||Ul.a.isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(sm);Fp.registerComponent("Button",gm);var vm=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.mouseused_=!1,n.on("mousedown",(function(e){return n.handleMouseDown(e)})),n}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-big-play-button"},i.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var i=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return Kp(t),void(!this.player_.tech(!0)||(id||Jh)&&i||this.player_.tech(!0).focus())}var n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(r){var a=function(){return r.focus()};Xp(t)?t.then(a,(function(){})):this.setTimeout(a,1)}else this.player_.tech(!0).focus()},i.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},i.handleMouseDown=function(e){this.mouseused_=!0},t}(gm);vm.prototype.controlText_="Play Video",Fp.registerComponent("BigPlayButton",vm);var ym=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.controlText(i&&i.controlText||n.localize("Close")),n}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},i.handleKeyDown=function(t){Ul.a.isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(gm);Fp.registerComponent("CloseButton",ym);var _m=function(e){function t(t,i){var n;return void 0===i&&(i={}),n=e.call(this,t,i)||this,i.replay=void 0===i.replay||i.replay,n.on(t,"play",(function(e){return n.handlePlay(e)})),n.on(t,"pause",(function(e){return n.handlePause(e)})),i.replay&&n.on(t,"ended",(function(e){return n.handleEnded(e)})),n}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(e){this.player_.paused()?Kp(this.player_.play()):this.player_.pause()},i.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},i.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},i.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},i.handleEnded=function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(function(e){return t.handleSeeked(e)}))},t}(gm);_m.prototype.controlText_="Play",Fp.registerComponent("PlayToggle",_m);var bm=function(e,t){e=e<0?0:e;var i=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=n=i="-"),r=r>0||o>0?r+":":"",n=((r||a>=10)&&n<10?"0"+n:n)+":",i=i<10?"0"+i:i,r+n+i},xm=bm;function wm(e){xm=e}function Tm(){xm=bm}function Sm(e,t){return void 0===t&&(t=e),xm(e,t)}var Om=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.on(t,["timeupdate","ended"],(function(e){return n.updateContent(e)})),n.updateTextNode_(),n}zl()(t,e);var i=t.prototype;return i.createEl=function(){var t=this.buildCSSClass(),i=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=yd("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),i.appendChild(this.contentEl_),i},i.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},i.updateTextNode_=function(e){var t=this;void 0===e&&(e=0),e=Sm(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(function(){if(t.contentEl_){var e=t.textNode_;e&&t.contentEl_.firstChild!==e&&(e=null,jh.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=Ml.a.createTextNode(t.formattedTime_),t.textNode_&&(e?t.contentEl_.replaceChild(t.textNode_,e):t.contentEl_.appendChild(t.textNode_))}})))},i.updateContent=function(e){},t}(Fp);Om.prototype.labelText_="Time",Om.prototype.controlText_="Time",Fp.registerComponent("TimeDisplay",Om);var Cm=function(e){function t(){return e.apply(this,arguments)||this}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-current-time"},i.updateContent=function(e){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},t}(Om);Cm.prototype.labelText_="Current Time",Cm.prototype.controlText_="Current Time",Fp.registerComponent("CurrentTimeDisplay",Cm);var km=function(e){function t(t,i){var n;n=e.call(this,t,i)||this;var r=function(e){return n.updateContent(e)};return n.on(t,"durationchange",r),n.on(t,"loadstart",r),n.on(t,"loadedmetadata",r),n}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-duration"},i.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},t}(Om);km.prototype.labelText_="Duration",km.prototype.controlText_="Duration",Fp.registerComponent("DurationDisplay",km);var Pm=function(e){function t(){return e.apply(this,arguments)||this}zl()(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},t}(Fp);Fp.registerComponent("TimeDivider",Pm);var Em=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.on(t,"durationchange",(function(e){return n.updateContent(e)})),n}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-remaining-time"},i.createEl=function(){var t=e.prototype.createEl.call(this);return t.insertBefore(yd("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},i.updateContent=function(e){var t;"number"===typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},t}(Om);Em.prototype.labelText_="Remaining Time",Em.prototype.controlText_="Remaining Time",Fp.registerComponent("RemainingTimeDisplay",Em);var Am=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.updateShowing(),n.on(n.player(),"durationchange",(function(e){return n.updateShowing(e)})),n}zl()(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=yd("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},i.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},i.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(Fp);Fp.registerComponent("LiveDisplay",Am);var Im=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.updateLiveEdgeStatus(),n.player_.liveTracker&&(n.updateLiveEdgeStatusHandler_=function(e){return n.updateLiveEdgeStatus(e)},n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatusHandler_)),n}zl()(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=yd("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},i.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},i.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},i.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,e.prototype.dispose.call(this)},t}(gm);Im.prototype.controlText_="Seek to live, currently playing live",Fp.registerComponent("SeekToLive",Im);var Mm=function(e,t,i){return e=Number(e),Math.min(i,Math.max(t,isNaN(e)?t:e))},Dm=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.handleMouseDown_=function(e){return n.handleMouseDown(e)},n.handleMouseUp_=function(e){return n.handleMouseUp(e)},n.handleKeyDown_=function(e){return n.handleKeyDown(e)},n.handleClick_=function(e){return n.handleClick(e)},n.handleMouseMove_=function(e){return n.handleMouseMove(e)},n.update_=function(e){return n.update(e)},n.bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}zl()(t,e);var i=t.prototype;return i.enabled=function(){return this.enabled_},i.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},i.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},i.createEl=function(t,i,n){return void 0===i&&(i={}),void 0===n&&(n={}),i.className=i.className+" vjs-slider",i=Vh({tabIndex:0},i),n=Vh({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),e.prototype.createEl.call(this,t,i,n)},i.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||ed||e.preventDefault(),Ad(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e)},i.handleMouseMove=function(e){},i.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;Id(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},i.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",(function(){var i=e.vertical()?"height":"width";e.bar.el().style[i]=(100*t).toFixed(2)+"%"}))),t}},i.getProgress=function(){return Number(Mm(this.getPercent(),0,1).toFixed(4))},i.calculateDistance=function(e){var t=jd(this.el_,e);return this.vertical()?t.y:t.x},i.handleKeyDown=function(t){Ul.a.isEventKey(t,"Left")||Ul.a.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):Ul.a.isEventKey(t,"Right")||Ul.a.isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},i.handleClick=function(e){e.stopPropagation(),e.preventDefault()},i.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(Fp);Fp.registerComponent("Slider",Dm);var jm=function(e,t){return Mm(e/t*100,0,100).toFixed(2)+"%"},Lm=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.partEls_=[],n.on(t,"progress",(function(e){return n.update(e)})),n}zl()(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),i=yd("span",{className:"vjs-control-text"}),n=yd("span",{textContent:this.localize("Loaded")}),r=Ml.a.createTextNode(": ");return this.percentageEl_=yd("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(i),i.appendChild(n),i.appendChild(r),i.appendChild(this.percentageEl_),t},i.dispose=function(){this.partEls_=null,this.percentageEl_=null,e.prototype.dispose.call(this)},i.update=function(e){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",(function(){var e=t.player_.liveTracker,i=t.player_.buffered(),n=e&&e.isLive()?e.seekableEnd():t.player_.duration(),r=t.player_.bufferedEnd(),a=t.partEls_,o=jm(r,n);t.percent_!==o&&(t.el_.style.width=o,_d(t.percentageEl_,o),t.percent_=o);for(var s=0;s<i.length;s++){var l=i.start(s),c=i.end(s),u=a[s];u||(u=t.el_.appendChild(yd()),a[s]=u),u.dataset.start===l&&u.dataset.end===c||(u.dataset.start=l,u.dataset.end=c,u.style.left=jm(l,r),u.style.width=jm(c-l,r))}for(var h=a.length;h>i.length;h--)t.el_.removeChild(a[h-1]);a.length=i.length}))},t}(Fp);Fp.registerComponent("LoadProgressBar",Lm);var Rm=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.update=vp(gp(Rl()(n),n.update),mp),n}zl()(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},i.update=function(e,t,i){var n=Dd(this.el_),r=Md(this.player_.el()),a=e.width*t;if(r&&n){var o=e.left-r.left+a,s=e.width-a+(r.right-e.right),l=n.width/2;o<l?l+=l-o:s<l&&(l=s),l<0?l=0:l>n.width&&(l=n.width),l=Math.round(l),this.el_.style.right="-"+l+"px",this.write(i)}},i.write=function(e){_d(this.el_,e)},i.updateTime=function(e,t,i,n){var r=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",(function(){var a,o=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var s=r.player_.liveTracker.liveWindow(),l=s-t*s;a=(l<1?"":"-")+Sm(l,s)}else a=Sm(i,o);r.update(e,t,a),n&&n()}))},t}(Fp);Fp.registerComponent("TimeTooltip",Rm);var Nm=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.update=vp(gp(Rl()(n),n.update),mp),n}zl()(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},i.update=function(e,t){var i=this.getChild("timeTooltip");if(i){var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(e,t,n)}},t}(Fp);Nm.prototype.options_={children:[]},ld||Xh||Nm.prototype.options_.children.push("timeTooltip"),Fp.registerComponent("PlayProgressBar",Nm);var zm=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.update=vp(gp(Rl()(n),n.update),mp),n}zl()(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(e,t){var i=this,n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,(function(){i.el_.style.left=e.width*t+"px"}))},t}(Fp);zm.prototype.options_={children:["timeTooltip"]},Fp.registerComponent("MouseTimeDisplay",zm);var Bm=5,Vm=12,Fm=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.setEventHandlers_(),n}zl()(t,e);var i=t.prototype;return i.setEventHandlers_=function(){var e=this;this.update_=gp(this,this.update),this.update=vp(this.update_,mp),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(t){return e.enableInterval_(t)},this.disableIntervalHandler_=function(t){return e.disableInterval_(t)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ml.a&&"visibilityState"in Ml.a&&this.on(Ml.a,"visibilitychange",this.toggleVisibility_)},i.toggleVisibility_=function(e){"hidden"===Ml.a.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},i.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,mp))},i.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},i.update=function(t){var i=this;if("hidden"!==Ml.a.visibilityState){var n=e.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",(function(){var e=i.player_.ended()?i.player_.duration():i.getCurrentTime_(),t=i.player_.liveTracker,r=i.player_.duration();t&&t.isLive()&&(r=i.player_.liveTracker.liveCurrentTime()),i.percent_!==n&&(i.el_.setAttribute("aria-valuenow",(100*n).toFixed(2)),i.percent_=n),i.currentTime_===e&&i.duration_===r||(i.el_.setAttribute("aria-valuetext",i.localize("progress bar timing: currentTime={1} duration={2}",[Sm(e,r),Sm(r,r)],"{1} of {2}")),i.currentTime_=e,i.duration_=r),i.bar&&i.bar.update(Md(i.el()),i.getProgress())})),n}},i.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},i.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},i.getPercent=function(){var e,t=this.getCurrentTime_(),i=this.player_.liveTracker;return i&&i.isLive()?(e=(t-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},i.handleMouseDown=function(t){Vd(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},i.handleMouseMove=function(e){if(Vd(e)){var t,i=this.calculateDistance(e),n=this.player_.liveTracker;if(n&&n.isLive()){if(i>=.99)return void n.seekToLiveEdge();var r=n.seekableStart(),a=n.liveCurrentTime();if(t=r+i*n.liveWindow(),t>=a&&(t=a),t<=r&&(t=r+.1),t===1/0)return}else t=i*this.player_.duration(),t===this.player_.duration()&&(t-=.1);this.userSeek_(t)}},i.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},i.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},i.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Kp(this.player_.play()):this.update_()},i.stepForward=function(){this.userSeek_(this.player_.currentTime()+Bm)},i.stepBack=function(){this.userSeek_(this.player_.currentTime()-Bm)},i.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleKeyDown=function(t){var i=this.player_.liveTracker;if(Ul.a.isEventKey(t,"Space")||Ul.a.isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(Ul.a.isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(Ul.a.isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),i&&i.isLive()?this.userSeek_(i.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Ul()(t))){t.preventDefault(),t.stopPropagation();var n=10*(Ul.a.codes[Ul()(t)]-Ul.a.codes["0"])/100;i&&i.isLive()?this.userSeek_(i.seekableStart()+i.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else Ul.a.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-Bm*Vm)):Ul.a.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+Bm*Vm)):e.prototype.handleKeyDown.call(this,t)},i.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ml.a&&"visibilityState"in Ml.a&&this.off(Ml.a,"visibilitychange",this.toggleVisibility_),e.prototype.dispose.call(this)},t}(Dm);Fm.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},ld||Xh||Fm.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Fp.registerComponent("SeekBar",Fm);var Um=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.handleMouseMove=vp(gp(Rl()(n),n.handleMouseMove),mp),n.throttledHandleMouseSeek=vp(gp(Rl()(n),n.handleMouseSeek),mp),n.handleMouseUpHandler_=function(e){return n.handleMouseUp(e)},n.handleMouseDownHandler_=function(e){return n.handleMouseDown(e)},n.enable(),n}zl()(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},i.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var i=t.getChild("playProgressBar"),n=t.getChild("mouseTimeDisplay");if(i||n){var r=t.el(),a=Dd(r),o=jd(r,e).x;o=Mm(o,0,1),n&&n.update(a,o),i&&i.update(a,t.getProgress())}}},i.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},i.enabled=function(){return this.enabled_},i.disable=function(){if(this.children().forEach((function(e){return e.disable&&e.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Kp(this.player_.play())}},i.enable=function(){this.children().forEach((function(e){return e.enable&&e.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},i.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},i.handleMouseDown=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},i.handleMouseUp=function(e){var t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},t}(Fp);Um.prototype.options_={children:["seekBar"]},Fp.registerComponent("ProgressControl",Um);var Gm=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.on(t,["enterpictureinpicture","leavepictureinpicture"],(function(e){return n.handlePictureInPictureChange(e)})),n.on(t,["disablepictureinpicturechanged","loadedmetadata"],(function(e){return n.handlePictureInPictureEnabledChange(e)})),n.disable(),n}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},i.handlePictureInPictureEnabledChange=function(){Ml.a.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},i.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},i.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(gm);Gm.prototype.controlText_="Picture-in-Picture",Fp.registerComponent("PictureInPictureToggle",Gm);var Hm=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.on(t,"fullscreenchange",(function(e){return n.handleFullscreenChange(e)})),!1===Ml.a[t.fsApi_.fullscreenEnabled]&&n.disable(),n}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},i.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},i.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(gm);Hm.prototype.controlText_="Fullscreen",Fp.registerComponent("FullscreenToggle",Hm);var Wm=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))},qm=function(e){function t(){return e.apply(this,arguments)||this}zl()(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(Fp);Fp.registerComponent("VolumeLevel",qm);var Zm=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.update=vp(gp(Rl()(n),n.update),mp),n}zl()(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},i.update=function(e,t,i,n){if(!i){var r=Md(this.el_),a=Md(this.player_.el()),o=e.width*t;if(!a||!r)return;var s=e.left-a.left+o,l=e.width-o+(a.right-e.right),c=r.width/2;s<c?c+=c-s:l<c&&(c=l),c<0?c=0:c>r.width&&(c=r.width),this.el_.style.right="-"+c+"px"}this.write(n+"%")},i.write=function(e){_d(this.el_,e)},i.updateVolume=function(e,t,i,n,r){var a=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(function(){a.update(e,t,i,n.toFixed(0)),r&&r()}))},t}(Fp);Fp.registerComponent("VolumeLevelTooltip",Zm);var Ym=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.update=vp(gp(Rl()(n),n.update),mp),n}zl()(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(e,t,i){var n=this,r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,i,r,(function(){i?n.el_.style.bottom=e.height*t+"px":n.el_.style.left=e.width*t+"px"}))},t}(Fp);Ym.prototype.options_={children:["volumeLevelTooltip"]},Fp.registerComponent("MouseVolumeLevelDisplay",Ym);var Xm=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.on("slideractive",(function(e){return n.updateLastVolume_(e)})),n.on(t,"volumechange",(function(e){return n.updateARIAAttributes(e)})),t.ready((function(){return n.updateARIAAttributes()})),n}zl()(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},i.handleMouseDown=function(t){Vd(t)&&e.prototype.handleMouseDown.call(this,t)},i.handleMouseMove=function(e){var t=this.getChild("mouseVolumeLevelDisplay");if(t){var i=this.el(),n=Md(i),r=this.vertical(),a=jd(i,e);a=r?a.y:a.x,a=Mm(a,0,1),t.update(n,a,r)}Vd(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},i.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},i.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},i.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},i.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},i.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},i.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},i.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",(function(){0===e.player_.volume()&&e.player_.lastVolume_(t)}))},t}(Dm);Xm.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},ld||Xh||Xm.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Xm.prototype.playerEvent="volumechange",Fp.registerComponent("VolumeBar",Xm);var Km=function(e){function t(t,i){var n;return void 0===i&&(i={}),i.vertical=i.vertical||!1,("undefined"===typeof i.volumeBar||Uh(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),n=e.call(this,t,i)||this,Wm(Rl()(n),t),n.throttledHandleMouseMove=vp(gp(Rl()(n),n.handleMouseMove),mp),n.handleMouseUpHandler_=function(e){return n.handleMouseUp(e)},n.on("mousedown",(function(e){return n.handleMouseDown(e)})),n.on("touchstart",(function(e){return n.handleMouseDown(e)})),n.on("mousemove",(function(e){return n.handleMouseMove(e)})),n.on(n.volumeBar,["focus","slideractive"],(function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")})),n.on(n.volumeBar,["blur","sliderinactive"],(function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")})),n}zl()(t,e);var i=t.prototype;return i.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},i.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},i.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},i.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(Fp);Km.prototype.options_={children:["volumeBar"]},Fp.registerComponent("VolumeControl",Km);var $m=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))},Qm=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,$m(Rl()(n),t),n.on(t,["loadstart","volumechange"],(function(e){return n.update(e)})),n}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(e){var t=this.player_.volume(),i=this.player_.lastVolume_();if(0===t){var n=i<.1?.1:i;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},i.update=function(e){this.updateIcon_(),this.updateControlText_()},i.updateIcon_=function(){var e=this.player_.volume(),t=3;ld&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var i=0;i<4;i++)Td(this.el_,"vjs-vol-"+i);wd(this.el_,"vjs-vol-"+t)},i.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume(),t=e?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},t}(gm);Qm.prototype.controlText_="Mute",Fp.registerComponent("MuteToggle",Qm);var Jm=function(e){function t(t,i){var n;return void 0===i&&(i={}),"undefined"!==typeof i.inline?i.inline=i.inline:i.inline=!0,("undefined"===typeof i.volumeControl||Uh(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),n=e.call(this,t,i)||this,n.handleKeyPressHandler_=function(e){return n.handleKeyPress(e)},n.on(t,["loadstart"],(function(e){return n.volumePanelState_(e)})),n.on(n.muteToggle,"keyup",(function(e){return n.handleKeyPress(e)})),n.on(n.volumeControl,"keyup",(function(e){return n.handleVolumeControlKeyUp(e)})),n.on("keydown",(function(e){return n.handleKeyPress(e)})),n.on("mouseover",(function(e){return n.handleMouseOver(e)})),n.on("mouseout",(function(e){return n.handleMouseOut(e)})),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}zl()(t,e);var i=t.prototype;return i.sliderActive_=function(){this.addClass("vjs-slider-active")},i.sliderInactive_=function(){this.removeClass("vjs-slider-active")},i.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},i.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},i.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},i.handleVolumeControlKeyUp=function(e){Ul.a.isEventKey(e,"Esc")&&this.muteToggle.focus()},i.handleMouseOver=function(e){this.addClass("vjs-hover"),lp(Ml.a,"keyup",this.handleKeyPressHandler_)},i.handleMouseOut=function(e){this.removeClass("vjs-hover"),cp(Ml.a,"keyup",this.handleKeyPressHandler_)},i.handleKeyPress=function(e){Ul.a.isEventKey(e,"Esc")&&this.handleMouseOut()},t}(Fp);Jm.prototype.options_={children:["muteToggle","volumeControl"]},Fp.registerComponent("VolumePanel",Jm);var eg=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,i&&(n.menuButton_=i.menuButton),n.focusedChild_=-1,n.on("keydown",(function(e){return n.handleKeyDown(e)})),n.boundHandleBlur_=function(e){return n.handleBlur(e)},n.boundHandleTapClick_=function(e){return n.handleTapClick(e)},n}zl()(t,e);var i=t.prototype;return i.addEventListenerForItem=function(e){e instanceof Fp&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},i.removeEventListenerForItem=function(e){e instanceof Fp&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},i.removeChild=function(t){"string"===typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},i.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},i.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=yd(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var i=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),lp(i,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),i},i.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},i.handleBlur=function(e){var t=e.relatedTarget||Ml.a.activeElement;if(!this.children().some((function(e){return e.el()===t}))){var i=this.menuButton_;i&&i.buttonPressed_&&t!==i.el().firstChild&&i.unpressButton()}},i.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var i=t.filter((function(t){return t.el()===e.target}))[0];if(!i)return;"CaptionSettingsMenuItem"!==i.name()&&this.menuButton_.focus()}},i.handleKeyDown=function(e){Ul.a.isEventKey(e,"Left")||Ul.a.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Ul.a.isEventKey(e,"Right")||Ul.a.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},i.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},i.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},i.focus=function(e){void 0===e&&(e=0);var t=this.children().slice(),i=t.length&&t[0].hasClass("vjs-menu-title");i&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(Fp);Fp.registerComponent("Menu",eg);var tg=function(e){function t(t,i){var n;void 0===i&&(i={}),n=e.call(this,t,i)||this,n.menuButton_=new gm(t,i),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var r=gm.prototype.buildCSSClass();n.menuButton_.el_.className=n.buildCSSClass()+" "+r,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0;var a=function(e){return n.handleClick(e)};return n.handleMenuKeyUp_=function(e){return n.handleMenuKeyUp(e)},n.on(n.menuButton_,"tap",a),n.on(n.menuButton_,"click",a),n.on(n.menuButton_,"keydown",(function(e){return n.handleKeyDown(e)})),n.on(n.menuButton_,"mouseenter",(function(){n.addClass("vjs-hover"),n.menu.show(),lp(Ml.a,"keyup",n.handleMenuKeyUp_)})),n.on("mouseleave",(function(e){return n.handleMouseLeave(e)})),n.on("keydown",(function(e){return n.handleSubmenuKeyDown(e)})),n}zl()(t,e);var i=t.prototype;return i.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},i.createMenu=function(){var e=new eg(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=yd("li",{className:"vjs-menu-title",innerHTML:jp(this.options_.title),tabIndex:-1}),i=new Fp(this.player_,{el:t});e.addItem(i)}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},i.createItems=function(){},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},i.buildWrapperCSSClass=function(){var t="vjs-menu-button";!0===this.options_.inline?t+="-inline":t+="-popup";var i=gm.prototype.buildCSSClass();return"vjs-menu-button "+t+" "+i+" "+e.prototype.buildCSSClass.call(this)},i.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},i.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},i.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},i.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},i.handleMouseLeave=function(e){this.removeClass("vjs-hover"),cp(Ml.a,"keyup",this.handleMenuKeyUp_)},i.focus=function(){this.menuButton_.focus()},i.blur=function(){this.menuButton_.blur()},i.handleKeyDown=function(e){Ul.a.isEventKey(e,"Esc")||Ul.a.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Ul.a.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Ul.a.isEventKey(e,"Up")||Ul.a.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},i.handleMenuKeyUp=function(e){(Ul.a.isEventKey(e,"Esc")||Ul.a.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},i.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},i.handleSubmenuKeyDown=function(e){(Ul.a.isEventKey(e,"Esc")||Ul.a.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Ul.a.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},i.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ld&&gd())return;this.menu.focus()}},i.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},i.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},i.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(Fp);Fp.registerComponent("MenuButton",tg);var ig=function(e){function t(t,i){var n,r=i.tracks;if(n=e.call(this,t,i)||this,n.items.length<=1&&n.hide(),!r)return Rl()(n);var a=gp(Rl()(n),n.update);return r.addEventListener("removetrack",a),r.addEventListener("addtrack",a),r.addEventListener("labelchange",a),n.player_.on("ready",a),n.player_.on("dispose",(function(){r.removeEventListener("removetrack",a),r.removeEventListener("addtrack",a),r.removeEventListener("labelchange",a)})),n}return zl()(t,e),t}(tg);Fp.registerComponent("TrackButton",ig);var ng=["Tab","Esc","Up","Down","Right","Left"],rg=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.selectable=i.selectable,n.isSelected_=i.selected||!1,n.multiSelectable=i.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}zl()(t,e);var i=t.prototype;return i.createEl=function(t,i,n){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",Vh({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},i),n)},i.handleKeyDown=function(t){ng.some((function(e){return Ul.a.isEventKey(t,e)}))||e.prototype.handleKeyDown.call(this,t)},i.handleClick=function(e){this.selected(!0)},i.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(sm);Fp.registerComponent("MenuItem",rg);var ag=function(e){function t(t,i){var n,r=i.track,a=t.textTracks();i.label=r.label||r.language||"Unknown",i.selected="showing"===r.mode,n=e.call(this,t,i)||this,n.track=r,n.kinds=(i.kinds||[i.kind||n.track.kind]).filter(Boolean);var o,s=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleTracksChange.apply(Rl()(n),t)},l=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleSelectedLanguageChange.apply(Rl()(n),t)};(t.on(["loadstart","texttrackchange"],s),a.addEventListener("change",s),a.addEventListener("selectedlanguagechange",l),n.on("dispose",(function(){t.off(["loadstart","texttrackchange"],s),a.removeEventListener("change",s),a.removeEventListener("selectedlanguagechange",l)})),void 0===a.onchange)&&n.on(["tap","click"],(function(){if("object"!==typeof Al.a.Event)try{o=new Al.a.Event("change")}catch(e){}o||(o=Ml.a.createEvent("Event"),o.initEvent("change",!0,!0)),a.dispatchEvent(o)}));return n.handleTracksChange(),n}zl()(t,e);var i=t.prototype;return i.handleClick=function(t){var i=this.track,n=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),n)for(var r=0;r<n.length;r++){var a=n[r];-1!==this.kinds.indexOf(a.kind)&&(a===i?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled"))}},i.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},i.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},i.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(rg);Fp.registerComponent("TextTrackMenuItem",ag);var og=function(e){function t(t,i){return i.track={player:t,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,e.call(this,t,i)||this}zl()(t,e);var i=t.prototype;return i.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var a=t[n];if(this.options_.kinds.indexOf(a.kind)>-1&&"showing"===a.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)},i.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var a=t[n];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&"showing"===a.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(ag);Fp.registerComponent("OffTextTrackMenuItem",og);var sg=function(e){function t(t,i){return void 0===i&&(i={}),i.tracks=t.textTracks(),e.call(this,t,i)||this}zl()(t,e);var i=t.prototype;return i.createItems=function(e,t){var i;void 0===e&&(e=[]),void 0===t&&(t=ag),this.label_&&(i=this.label_+" off"),e.push(new og(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<n.length;r++){var a=n[r];if(this.kinds_.indexOf(a.kind)>-1){var o=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass("vjs-"+a.kind+"-menu-item"),e.push(o)}}return e},t}(ig);Fp.registerComponent("TextTrackButton",sg);var lg=function(e){function t(t,i){var n,r=i.track,a=i.cue,o=t.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=a.text,i.selected=a.startTime<=o&&o<a.endTime,n=e.call(this,t,i)||this,n.track=r,n.cue=a,r.addEventListener("cuechange",gp(Rl()(n),n.update)),n}zl()(t,e);var i=t.prototype;return i.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},i.update=function(e){var t=this.cue,i=this.player_.currentTime();this.selected(t.startTime<=i&&i<t.endTime)},t}(rg);Fp.registerComponent("ChaptersTrackMenuItem",lg);var cg=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},i.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},i.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_)}}},i.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var i=e[t];if(i.kind===this.kind_)return i}},i.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(jp(this.kind_))},i.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},i.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var i=0,n=t.length;i<n;i++){var r=t[i],a=new lg(this.player_,{track:this.track_,cue:r});e.push(a)}return e},t}(sg);cg.prototype.kind_="chapters",cg.prototype.controlText_="Chapters",Fp.registerComponent("ChaptersButton",cg);var ug=function(e){function t(t,i,n){var r;r=e.call(this,t,i,n)||this;var a=t.textTracks(),o=gp(Rl()(r),r.handleTracksChange);return a.addEventListener("change",o),r.on("dispose",(function(){a.removeEventListener("change",o)})),r}zl()(t,e);var i=t.prototype;return i.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!1,n=0,r=t.length;n<r;n++){var a=t[n];if(a.kind!==this.kind_&&"showing"===a.mode){i=!0;break}}i?this.disable():this.enable()},i.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(sg);ug.prototype.kind_="descriptions",ug.prototype.controlText_="Descriptions",Fp.registerComponent("DescriptionsButton",ug);var hg=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(sg);hg.prototype.kind_="subtitles",hg.prototype.controlText_="Subtitles",Fp.registerComponent("SubtitlesButton",hg);var dg=function(e){function t(t,i){var n;return i.track={player:t,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",n=e.call(this,t,i)||this,n.addClass("vjs-texttrack-settings"),n.controlText(", opens "+i.kind+" settings dialog"),n}zl()(t,e);var i=t.prototype;return i.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(ag);Fp.registerComponent("CaptionSettingsMenuItem",dg);var pg=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new dg(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(sg);pg.prototype.kind_="captions",pg.prototype.controlText_="Captions",Fp.registerComponent("CaptionsButton",pg);var fg=function(e){function t(){return e.apply(this,arguments)||this}zl()(t,e);var i=t.prototype;return i.createEl=function(t,i,n){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"captions"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),r+="</span>";var a=e.prototype.createEl.call(this,t,Vh({innerHTML:r},i),n);return a},t}(ag);Fp.registerComponent("SubsCapsMenuItem",fg);var mg=function(e){function t(t,i){var n;return void 0===i&&(i={}),n=e.call(this,t,i)||this,n.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)>-1&&(n.label_="captions"),n.menuButton_.controlText(jp(n.label_)),n}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new dg(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=e.prototype.createItems.call(this,t,fg),t},t}(sg);mg.prototype.kinds_=["captions","subtitles"],mg.prototype.controlText_="Subtitles",Fp.registerComponent("SubsCapsButton",mg);var gg=function(e){function t(t,i){var n,r=i.track,a=t.audioTracks();i.label=r.label||r.language||"Unknown",i.selected=r.enabled,n=e.call(this,t,i)||this,n.track=r,n.addClass("vjs-"+r.kind+"-menu-item");var o=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleTracksChange.apply(Rl()(n),t)};return a.addEventListener("change",o),n.on("dispose",(function(){a.removeEventListener("change",o)})),n}zl()(t,e);var i=t.prototype;return i.createEl=function(t,i,n){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"main-desc"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),r+="</span>";var a=e.prototype.createEl.call(this,t,Vh({innerHTML:r},i),n);return a},i.handleClick=function(t){e.prototype.handleClick.call(this,t),this.track.enabled=!0},i.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(rg);Fp.registerComponent("AudioTrackMenuItem",gg);var vg=function(e){function t(t,i){return void 0===i&&(i={}),i.tracks=t.audioTracks(),e.call(this,t,i)||this}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),i=0;i<t.length;i++){var n=t[i];e.push(new gg(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e},t}(ig);vg.prototype.controlText_="Audio Track",Fp.registerComponent("AudioTrackButton",vg);var yg=function(e){function t(t,i){var n,r=i.rate,a=parseFloat(r,10);return i.label=r,i.selected=1===a,i.selectable=!0,i.multiSelectable=!1,n=e.call(this,t,i)||this,n.label=r,n.rate=a,n.on(t,"ratechange",(function(e){return n.update(e)})),n}zl()(t,e);var i=t.prototype;return i.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},i.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(rg);yg.prototype.contentElType="button",Fp.registerComponent("PlaybackRateMenuItem",yg);var _g=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.menuButton_.el_.setAttribute("aria-describedby",n.labelElId_),n.updateVisibility(),n.updateLabel(),n.on(t,"loadstart",(function(e){return n.updateVisibility(e)})),n.on(t,"ratechange",(function(e){return n.updateLabel(e)})),n}zl()(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=yd("div",{className:"vjs-playback-rate-value",id:this.labelElId_,innerHTML:"1x"}),t.appendChild(this.labelEl_),t},i.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},i.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},i.createMenu=function(){var e=new eg(this.player()),t=this.playbackRates();if(t)for(var i=t.length-1;i>=0;i--)e.addChild(new yg(this.player(),{rate:t[i]+"x"}));return e},i.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},i.handleClick=function(e){for(var t=this.player().playbackRate(),i=this.playbackRates(),n=i[0],r=0;r<i.length;r++)if(i[r]>t){n=i[r];break}this.player().playbackRate(n)},i.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},i.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},i.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},i.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(tg);_g.prototype.controlText_="Playback Rate",Fp.registerComponent("PlaybackRateMenuButton",_g);var bg=function(e){function t(){return e.apply(this,arguments)||this}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(Fp);Fp.registerComponent("Spacer",bg);var xg=function(e){function t(){return e.apply(this,arguments)||this}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},i.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML=" ",t},t}(bg);Fp.registerComponent("CustomControlSpacer",xg);var wg=function(e){function t(){return e.apply(this,arguments)||this}zl()(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Fp);wg.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Ml.a&&wg.prototype.options_.children.splice(wg.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Fp.registerComponent("ControlBar",wg);var Tg=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,n.on(t,"error",(function(e){return n.open(e)})),n}zl()(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},i.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(nf);Tg.prototype.options_=jl()({},nf.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Fp.registerComponent("ErrorDisplay",Tg);var Sg="vjs-text-track-settings",Og=["#000","Black"],Cg=["#00F","Blue"],kg=["#0FF","Cyan"],Pg=["#0F0","Green"],Eg=["#F0F","Magenta"],Ag=["#F00","Red"],Ig=["#FFF","White"],Mg=["#FF0","Yellow"],Dg=["1","Opaque"],jg=["0.5","Semi-Transparent"],Lg=["0","Transparent"],Rg={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Og,Ig,Ag,Pg,Cg,Mg,Eg,kg]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Dg,jg,Lg]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Ig,Og,Ag,Pg,Cg,Mg,Eg,kg]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Dg,jg]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Lg,jg,Dg]}};function Ng(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}function zg(e,t){var i=e.options[e.options.selectedIndex].value;return Ng(i,t)}function Bg(e,t,i){if(t)for(var n=0;n<e.options.length;n++)if(Ng(e.options[n].value,i)===t){e.selectedIndex=n;break}}Rg.windowColor.options=Rg.backgroundColor.options;var Vg=function(e){function t(t,i){var n;return i.temporary=!1,n=e.call(this,t,i)||this,n.updateDisplay=n.updateDisplay.bind(Rl()(n)),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=yd("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===i.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",(function(){n.saveSettings(),n.close()})),n.on(n.$(".vjs-default-button"),"click",(function(){n.setDefaults(),n.updateDisplay()})),zh(Rg,(function(e){n.on(n.$(e.selector),"change",n.updateDisplay)})),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}zl()(t,e);var i=t.prototype;return i.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},i.createElSelect_=function(e,t,i){var n=this;void 0===t&&(t=""),void 0===i&&(i="label");var r=Rg[e],a=r.id.replace("%s",this.id_),o=[t,a].join(" ").trim();return["<"+i+' id="'+a+'" class="'+("label"===i?"vjs-label":"")+'">',this.localize(r.label),"</"+i+">",'<select aria-labelledby="'+o+'">'].concat(r.options.map((function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+o+" "+t+'">',n.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")},i.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},i.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},i.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},i.createElColors_=function(){return yd("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},i.createElFont_=function(){return yd("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},i.createElControls_=function(){var e=this.localize("restore all settings to the default values");return yd("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},i.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},i.label=function(){return this.localize("Caption Settings Dialog")},i.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},i.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},i.getValues=function(){var e=this;return Bh(Rg,(function(t,i,n){var r=zg(e.$(i.selector),i.parser);return void 0!==r&&(t[n]=r),t}),{})},i.setValues=function(e){var t=this;zh(Rg,(function(i,n){Bg(t.$(i.selector),e[n],i.parser)}))},i.setDefaults=function(){var e=this;zh(Rg,(function(t){var i=t.hasOwnProperty("default")?t["default"]:0;e.$(t.selector).selectedIndex=i}))},i.restoreSettings=function(){var e;try{e=JSON.parse(Al.a.localStorage.getItem(Sg))}catch(t){jh.warn(t)}e&&this.setValues(e)},i.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?Al.a.localStorage.setItem(Sg,JSON.stringify(e)):Al.a.localStorage.removeItem(Sg)}catch(t){jh.warn(t)}}},i.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},i.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,i=e&&e.captionsButton;t?t.focus():i&&i.focus()},t}(nf);Fp.registerComponent("TextTrackSettings",Vg);var Fg=function(e){function t(t,i){var n,r=i.ResizeObserver||Al.a.ResizeObserver;null===i.ResizeObserver&&(r=!1);var a=Rp({createEl:!r,reportTouchActivity:!1},i);return n=e.call(this,t,a)||this,n.ResizeObserver=i.ResizeObserver||Al.a.ResizeObserver,n.loadListener_=null,n.resizeObserver_=null,n.debouncedHandler_=yp((function(){n.resizeHandler()}),100,!1,Rl()(n)),r?(n.resizeObserver_=new n.ResizeObserver(n.debouncedHandler_),n.resizeObserver_.observe(t.el())):(n.loadListener_=function(){if(n.el_&&n.el_.contentWindow){var e=n.debouncedHandler_,t=n.unloadListener_=function(){cp(this,"resize",e),cp(this,"unload",t),t=null};lp(n.el_.contentWindow,"unload",t),lp(n.el_.contentWindow,"resize",e)}},n.one("load",n.loadListener_)),n}zl()(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},i.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},i.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,e.prototype.dispose.call(this)},t}(Fp);Fp.registerComponent("ResizeManager",Fg);var Ug={trackingThreshold:30,liveTolerance:15},Gg=function(e){function t(t,i){var n,r=Rp(Ug,i,{createEl:!1});return n=e.call(this,t,r)||this,n.handleVisibilityChange_=function(e){return n.handleVisibilityChange(e)},n.trackLiveHandler_=function(){return n.trackLive_()},n.handlePlay_=function(e){return n.handlePlay(e)},n.handleFirstTimeupdate_=function(e){return n.handleFirstTimeupdate(e)},n.handleSeeked_=function(e){return n.handleSeeked(e)},n.seekToLiveEdge_=function(e){return n.seekToLiveEdge(e)},n.reset_(),n.on(n.player_,"durationchange",(function(e){return n.handleDurationchange(e)})),n.one(n.player_,"canplay",(function(){return n.toggleTracking()})),id&&"hidden"in Ml.a&&"visibilityState"in Ml.a&&n.on(Ml.a,"visibilitychange",n.handleVisibilityChange_),n}zl()(t,e);var i=t.prototype;return i.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Ml.a.hidden?this.stopTracking():this.startTracking())},i.trackLive_=function(){var e=this.player_.seekable();if(e&&e.length){var t=Number(Al.a.performance.now().toFixed(4)),i=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+i;var n=this.liveCurrentTime(),r=this.player_.currentTime(),a=this.player_.paused()||this.seekedBehindLive_||Math.abs(n-r)>this.options_.liveTolerance;this.timeupdateSeen_&&n!==1/0||(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}},i.handleDurationchange=function(){this.toggleTracking()},i.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},i.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,mp),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},i.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},i.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()},i.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},i.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},i.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},i.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},i.seekableEnd=function(){var e=this.player_.seekable(),t=[],i=e?e.length:0;while(i--)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0},i.seekableStart=function(){var e=this.player_.seekable(),t=[],i=e?e.length:0;while(i--)t.push(e.start(i));return t.length?t.sort()[0]:0},i.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},i.isLive=function(){return this.isTracking()},i.atLiveEdge=function(){return!this.behindLiveEdge()},i.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},i.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},i.behindLiveEdge=function(){return this.behindLiveEdge_},i.isTracking=function(){return"number"===typeof this.trackingInterval_},i.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},i.dispose=function(){this.off(Ml.a,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),e.prototype.dispose.call(this)},t}(Fp);Fp.registerComponent("LiveTracker",Gg);var Hg,Wg=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var i=e.$$("source"),n=[],r="";if(!i.length)return!1;for(var a=0;a<i.length;a++){var o=i[a].src;o&&-1===n.indexOf(o)&&n.push(o)}return!!n.length&&(1===n.length&&(r=n[0]),e.triggerSourceset(r),!0)},qg=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=Ml.a.createElement(this.nodeName.toLowerCase());t.innerHTML=e;var i=Ml.a.createDocumentFragment();while(t.childNodes.length)i.appendChild(t.childNodes[0]);return this.innerText="",Al.a.Element.prototype.appendChild.call(this,i),this.innerHTML}}),Zg=function(e,t){for(var i={},n=0;n<e.length;n++)if(i=Object.getOwnPropertyDescriptor(e[n],t),i&&i.set&&i.get)break;return i.enumerable=!0,i.configurable=!0,i},Yg=function(e){return Zg([e.el(),Al.a.HTMLMediaElement.prototype,Al.a.Element.prototype,qg],"innerHTML")},Xg=function(e){var t=e.el();if(!t.resetSourceWatch_){var i={},n=Yg(e),r=function(i){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=i.apply(t,r);return Wg(e),o}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){t[e]&&(i[e]=t[e],t[e]=r(i[e]))})),Object.defineProperty(t,"innerHTML",Rp(n,{set:r(n.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(i).forEach((function(e){t[e]=i[e]})),Object.defineProperty(t,"innerHTML",n)},e.one("sourceset",t.resetSourceWatch_)}},Kg=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?_f(Al.a.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return Al.a.Element.prototype.setAttribute.call(this,"src",e),e}}),$g=function(e){return Zg([e.el(),Al.a.HTMLMediaElement.prototype,Kg],"src")},Qg=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var i=$g(e),n=t.setAttribute,r=t.load;Object.defineProperty(t,"src",Rp(i,{set:function(n){var r=i.set.call(t,n);return e.triggerSourceset(t.src),r}})),t.setAttribute=function(i,r){var a=n.call(t,i,r);return/src/i.test(i)&&e.triggerSourceset(t.src),a},t.load=function(){var i=r.call(t);return Wg(e)||(e.triggerSourceset(""),Xg(e)),i},t.currentSrc?e.triggerSourceset(t.currentSrc):Wg(e)||Xg(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=r,t.setAttribute=n,Object.defineProperty(t,"src",i),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},Jg=function(e,t,i,n){void 0===n&&(n=!0);var r=function(i){return Object.defineProperty(e,t,{value:i,enumerable:!0,writable:!0})},a={configurable:!0,enumerable:!0,get:function(){var e=i();return r(e),e}};return n&&(a.set=r),Object.defineProperty(e,t,a)},ev=function(e){function t(t,i){var n;n=e.call(this,t,i)||this;var r=t.source,a=!1;if(r&&(n.el_.currentSrc!==r.src||t.tag&&3===t.tag.initNetworkState_)?n.setSource(r):n.handleLateInit_(n.el_),t.enableSourceset&&n.setupSourcesetHandling_(),n.isScrubbing_=!1,n.el_.hasChildNodes()){var o=n.el_.childNodes,s=o.length,l=[];while(s--){var c=o[s],u=c.nodeName.toLowerCase();"track"===u&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(c),n.remoteTextTracks().addTrack(c.track),n.textTracks().addTrack(c.track),a||n.el_.hasAttribute("crossorigin")||!xf(c.src)||(a=!0)):l.push(c))}for(var h=0;h<l.length;h++)n.el_.removeChild(l[h])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&a&&jh.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),n.restoreMetadataTracksInIOSNativePlayer_(),(ad||sd||$h)&&!0===t.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}zl()(t,e);var i=t.prototype;return i.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},i.setupSourcesetHandling_=function(){Qg(this)},i.restoreMetadataTracksInIOSNativePlayer_=function(){var e,t=this.textTracks(),i=function(){e=[];for(var i=0;i<t.length;i++){var n=t[i];"metadata"===n.kind&&e.push({track:n,storedMode:n.mode})}};i(),t.addEventListener("change",i),this.on("dispose",(function(){return t.removeEventListener("change",i)}));var n=function i(){for(var n=0;n<e.length;n++){var r=e[n];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}t.removeEventListener("change",i)};this.on("webkitbeginfullscreen",(function(){t.removeEventListener("change",i),t.removeEventListener("change",n),t.addEventListener("change",n)})),this.on("webkitendfullscreen",(function(){t.removeEventListener("change",i),t.addEventListener("change",i),t.removeEventListener("change",n)}))},i.overrideNative_=function(e,t){var i=this;if(t===this["featuresNative"+e+"Tracks"]){var n=e.toLowerCase();this[n+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach((function(e){var t=i.el()[n+"Tracks"];t.removeEventListener(e,i[n+"TracksListeners_"][e])})),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n)}},i.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},i.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},i.proxyNativeTracksForType_=function(e){var t=this,i=Df[e],n=this.el()[i.getterName],r=this[i.getterName]();if(this["featuresNative"+i.capitalName+"Tracks"]&&n&&n.addEventListener){var a={change:function(i){var n={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(n),"text"===e&&t[jf.remoteText.getterName]().trigger(n)},addtrack:function(e){r.addTrack(e.track)},removetrack:function(e){r.removeTrack(e.track)}},o=function(){for(var e=[],t=0;t<r.length;t++){for(var i=!1,a=0;a<n.length;a++)if(n[a]===r[t]){i=!0;break}i||e.push(r[t])}while(e.length)r.removeTrack(e.shift())};this[i.getterName+"Listeners_"]=a,Object.keys(a).forEach((function(e){var i=a[e];n.addEventListener(e,i),t.on("dispose",(function(t){return n.removeEventListener(e,i)}))})),this.on("loadstart",o),this.on("dispose",(function(e){return t.off("loadstart",o)}))}},i.proxyNativeTracks_=function(){var e=this;Df.names.forEach((function(t){e.proxyNativeTracksForType_(t)}))},i.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),t.disposeMediaElement(e),e=i}else{e=Ml.a.createElement("video");var n=this.options_.tag&&Cd(this.options_.tag),r=Rp({},n);ad&&!0===this.options_.nativeControlsForTouch||delete r.controls,Od(e,Vh(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&Pd(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var a=["loop","muted","playsinline","autoplay"],o=0;o<a.length;o++){var s=a[o],l=this.options_[s];"undefined"!==typeof l&&(l?Pd(e,s,s):Ed(e,s),e[s]=l)}return e},i.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,i=function(){t=!0};this.on("loadstart",i);var n=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready((function(){this.off("loadstart",i),this.off("loadedmetadata",n),t||this.trigger("loadstart")}))}var r=["loadstart"];r.push("loadedmetadata"),e.readyState>=2&&r.push("loadeddata"),e.readyState>=3&&r.push("canplay"),e.readyState>=4&&r.push("canplaythrough"),this.ready((function(){r.forEach((function(e){this.trigger(e)}),this)}))}},i.setScrubbing=function(e){this.isScrubbing_=e},i.scrubbing=function(){return this.isScrubbing_},i.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&cd?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){jh(t,"Video is not ready. (Video.js)")}},i.duration=function(){var e=this;if(this.el_.duration===1/0&&Xh&&ed&&0===this.el_.currentTime){var t=function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN},i.width=function(){return this.el_.offsetWidth},i.height=function(){return this.el_.offsetHeight},i.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},i=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",(function(){e.off("webkitbeginfullscreen",i),e.off("webkitendfullscreen",t)}))}},i.supportsFullScreen=function(){if("function"===typeof this.el_.webkitEnterFullScreen){var e=Al.a.navigator&&Al.a.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},i.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Kp(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}),0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},i.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},i.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},i.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},i.reset=function(){t.resetMediaElement(this.el_)},i.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},i.setControls=function(e){this.el_.controls=!!e},i.addTextTrack=function(t,i,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,i,n):e.prototype.addTextTrack.call(this,t,i,n)},i.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var i=Ml.a.createElement("track");return t.kind&&(i.kind=t.kind),t.label&&(i.label=t.label),(t.language||t.srclang)&&(i.srclang=t.language||t.srclang),t["default"]&&(i["default"]=t["default"]),t.id&&(i.id=t.id),t.src&&(i.src=t.src),i},i.addRemoteTextTrack=function(t,i){var n=e.prototype.addRemoteTextTrack.call(this,t,i);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},i.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks){var i=this.$$("track"),n=i.length;while(n--)t!==i[n]&&t!==i[n].track||this.el().removeChild(i[n])}},i.getVideoPlaybackQuality=function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),Al.a.performance&&"function"===typeof Al.a.performance.now?e.creationTime=Al.a.performance.now():Al.a.performance&&Al.a.performance.timing&&"number"===typeof Al.a.performance.timing.navigationStart&&(e.creationTime=Al.a.Date.now()-Al.a.performance.timing.navigationStart),e},t}(Nf);Jg(ev,"TEST_VID",(function(){if(fd()){var e=Ml.a.createElement("video"),t=Ml.a.createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}})),ev.isSupported=function(){try{ev.TEST_VID.volume=.5}catch(e){return!1}return!(!ev.TEST_VID||!ev.TEST_VID.canPlayType)},ev.canPlayType=function(e){return ev.TEST_VID.canPlayType(e)},ev.canPlaySource=function(e,t){return ev.canPlayType(e.type)},ev.canControlVolume=function(){try{var e=ev.TEST_VID.volume;return ev.TEST_VID.volume=e/2+.1,e!==ev.TEST_VID.volume}catch(t){return!1}},ev.canMuteVolume=function(){try{var e=ev.TEST_VID.muted;return ev.TEST_VID.muted=!e,ev.TEST_VID.muted?Pd(ev.TEST_VID,"muted","muted"):Ed(ev.TEST_VID,"muted","muted"),e!==ev.TEST_VID.muted}catch(t){return!1}},ev.canControlPlaybackRate=function(){if(Xh&&ed&&td<58)return!1;try{var e=ev.TEST_VID.playbackRate;return ev.TEST_VID.playbackRate=e/2+.1,e!==ev.TEST_VID.playbackRate}catch(t){return!1}},ev.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(Ml.a.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(Ml.a.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(Ml.a.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(Ml.a.createElement("audio"),"innerHTML",{get:e,set:e})}catch(t){return!1}return!0},ev.supportsNativeTextTracks=function(){return cd||ld&&ed},ev.supportsNativeVideoTracks=function(){return!(!ev.TEST_VID||!ev.TEST_VID.videoTracks)},ev.supportsNativeAudioTracks=function(){return!(!ev.TEST_VID||!ev.TEST_VID.audioTracks)},ev.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(e){var t=e[0],i=e[1];Jg(ev.prototype,t,(function(){return ev[i]()}),!0)})),ev.prototype.movingMediaElementInDOM=!ld,ev.prototype.featuresFullscreenResize=!0,ev.prototype.featuresProgressEvents=!0,ev.prototype.featuresTimeupdateEvents=!0,ev.patchCanPlayType=function(){Kh>=4&&!Qh&&!ed&&(Hg=ev.TEST_VID&&ev.TEST_VID.constructor.prototype.canPlayType,ev.TEST_VID.constructor.prototype.canPlayType=function(e){var t=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return e&&t.test(e)?"maybe":Hg.call(this,e)})},ev.unpatchCanPlayType=function(){var e=ev.TEST_VID.constructor.prototype.canPlayType;return Hg&&(ev.TEST_VID.constructor.prototype.canPlayType=Hg),e},ev.patchCanPlayType(),ev.disposeMediaElement=function(e){if(e){e.parentNode&&e.parentNode.removeChild(e);while(e.hasChildNodes())e.removeChild(e.firstChild);e.removeAttribute("src"),"function"===typeof e.load&&function(){try{e.load()}catch(t){}}()}},ev.resetMediaElement=function(e){if(e){var t=e.querySelectorAll("source"),i=t.length;while(i--)e.removeChild(t[i]);e.removeAttribute("src"),"function"===typeof e.load&&function(){try{e.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){ev.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){ev.prototype["set"+jp(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){ev.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(e){ev.prototype["set"+jp(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){ev.prototype[e]=function(){return this.el_[e]()}})),Nf.withSourceHandlers(ev),ev.nativeSourceHandler={},ev.nativeSourceHandler.canPlayType=function(e){try{return ev.TEST_VID.canPlayType(e)}catch(t){return""}},ev.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return ev.nativeSourceHandler.canPlayType(e.type);if(e.src){var i=bf(e.src);return ev.nativeSourceHandler.canPlayType("video/"+i)}return""},ev.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},ev.nativeSourceHandler.dispose=function(){},ev.registerSourceHandler(ev.nativeSourceHandler),Nf.registerTech("Html5",ev);var tv=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],iv={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},nv=["tiny","xsmall","small","medium","large","xlarge","huge"],rv={};nv.forEach((function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;rv[e]="vjs-layout-"+t}));var av={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},ov=function(e){function t(i,n,r){var a;if(i.id=i.id||n.id||"vjs_video_"+ep(),n=Vh(t.getTagSettings(i),n),n.initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language)if("function"===typeof i.closest){var o=i.closest("[lang]");o&&o.getAttribute&&(n.language=o.getAttribute("lang"))}else{var s=i;while(s&&1===s.nodeType){if(Cd(s).hasOwnProperty("lang")){n.language=s.getAttribute("lang");break}s=s.parentNode}}if(a=e.call(this,null,n,r)||this,a.boundDocumentFullscreenChange_=function(e){return a.documentFullscreenChange_(e)},a.boundFullWindowOnEscKey_=function(e){return a.fullWindowOnEscKey(e)},a.boundUpdateStyleEl_=function(e){return a.updateStyleEl_(e)},a.boundApplyInitTime_=function(e){return a.applyInitTime_(e)},a.boundUpdateCurrentBreakpoint_=function(e){return a.updateCurrentBreakpoint_(e)},a.boundHandleTechClick_=function(e){return a.handleTechClick_(e)},a.boundHandleTechDoubleClick_=function(e){return a.handleTechDoubleClick_(e)},a.boundHandleTechTouchStart_=function(e){return a.handleTechTouchStart_(e)},a.boundHandleTechTouchMove_=function(e){return a.handleTechTouchMove_(e)},a.boundHandleTechTouchEnd_=function(e){return a.handleTechTouchEnd_(e)},a.boundHandleTechTap_=function(e){return a.handleTechTap_(e)},a.isFullscreen_=!1,a.log=Lh(a.id_),a.fsApi_=Ch,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=i,a.tagAttributes=i&&Cd(i),a.language(a.options_.language),n.languages){var l={};Object.getOwnPropertyNames(n.languages).forEach((function(e){l[e.toLowerCase()]=n.languages[e]})),a.languages_=l}else a.languages_=t.prototype.options_.languages;a.resetCache_(),a.poster_=n.poster||"",a.controls_=!!n.controls,i.controls=!1,i.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],i.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),n.plugins&&Object.keys(n.plugins).forEach((function(e){if("function"!==typeof a[e])throw new Error('plugin "'+e+'" does not exist')})),a.scrubbing_=!1,a.el_=a.createEl(),Ap(Rl()(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(lp(Ml.a,a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var c=Rp(a.options_);n.plugins&&Object.keys(n.plugins).forEach((function(e){a[e](n.plugins[e])})),n.debug&&a.debug(!0),a.options_.playerOptions=c,a.middleware_=[],a.initChildren(),a.isAudio("audio"===i.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),ad&&a.addClass("vjs-touch-enabled"),ld||a.addClass("vjs-workinghover"),t.players[a.id_]=Rl()(a);var u=Oh.split(".")[0];return a.addClass("vjs-v"+u),a.userActive(!0),a.reportUserActivity(),a.one("play",(function(e){return a.listenForUserActivity_(e)})),a.on("stageclick",(function(e){return a.handleStageClick_(e)})),a.on("keydown",(function(e){return a.handleKeyDown(e)})),a.on("languagechange",(function(e){return a.handleLanguagechange(e)})),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a}zl()(t,e);var i=t.prototype;return i.dispose=function(){var i=this;this.trigger("dispose"),this.off("dispose"),cp(Ml.a,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),cp(Ml.a,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Qf(this),Lf.names.forEach((function(e){var t=Lf[e],n=i[t.getterName]();n&&n.off&&n.off()})),e.prototype.dispose.call(this)},i.createEl=function(){var t,i=this.tag,n=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),r="video-js"===this.tag.tagName.toLowerCase();n?t=this.el_=i.parentNode:r||(t=this.el_=e.prototype.createEl.call(this,"div"));var a=Cd(i);if(r){t=this.el_=i,i=this.tag=Ml.a.createElement("video");while(t.children.length)i.appendChild(t.firstChild);xd(t,"video-js")||wd(t,"video-js"),t.appendChild(i),n=this.playerElIngest_=t,Object.keys(t).forEach((function(e){try{i[e]=t[e]}catch(n){}}))}if(i.setAttribute("tabindex","-1"),a.tabindex="-1",(id||ed&&rd)&&(i.setAttribute("role","application"),a.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in a&&delete a.width,"height"in a&&delete a.height,Object.getOwnPropertyNames(a).forEach((function(e){r&&"class"===e||t.setAttribute(e,a[e]),r&&i.setAttribute(e,a[e])})),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=t.player=this,this.addClass("vjs-paused"),!0!==Al.a.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Kd("vjs-styles-dimensions");var o=Ud(".vjs-styles-defaults"),s=Ud("head");s.insertBefore(this.styleEl_,o?o.nextSibling:s.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var l=i.getElementsByTagName("a"),c=0;c<l.length;c++){var u=l.item(c);wd(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!n&&i.parentNode.insertBefore(t,i),bd(i,t),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_=t,t},i.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):jh.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},i.width=function(e){return this.dimension("width",e)},i.height=function(e){return this.dimension("height",e)},i.dimension=function(e,t){var i=e+"_";if(void 0===t)return this[i]||0;if(""===t||"auto"===t)return this[i]=void 0,void this.updateStyleEl_();var n=parseFloat(t);isNaN(n)?jh.error('Improper value "'+t+'" supplied for for '+e):(this[i]=n,this.updateStyleEl_())},i.fluid=function(e){var t=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,xp(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),wp(this,(function(){t.on(["playerreset","resize"],t.boundUpdateStyleEl_)}))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},i.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},i.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},i.updateStyleEl_=function(){if(!0!==Al.a.VIDEOJS_NO_DYNAMIC_STYLE){var e,t,i,n;i=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";var r=i.split(":"),a=r[1]/r[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/a:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*a,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),$d(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*a+"%;\n      }\n    ")}else{var o="number"===typeof this.width_?this.width_:this.options_.width,s="number"===typeof this.height_?this.height_:this.options_.height,l=this.tech_&&this.tech_.el();l&&(o>=0&&(l.width=o),s>=0&&(l.height=s))}},i.loadTech_=function(e,t){var i=this;this.tech_&&this.unloadTech_();var n=jp(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(Nf.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;var a="string"!==typeof this.autoplay()&&this.autoplay(),o={source:t,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Lf.names.forEach((function(e){var t=Lf[e];o[t.getterName]=i[t.privateName]})),Vh(o,this.options_[n]),Vh(o,this.options_[r]),Vh(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);var s=Nf.getTech(e);if(!s)throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'");this.tech_=new s(o),this.tech_.ready(gp(this,this.handleTechReady_),!0),ef.jsonToTextTracks(this.textTracksJson_||[],this.tech_),tv.forEach((function(e){i.on(i.tech_,e,(function(t){return i["handleTech"+jp(e)+"_"](t)}))})),Object.keys(iv).forEach((function(e){i.on(i.tech_,e,(function(t){0===i.tech_.playbackRate()&&i.tech_.seeking()?i.queuedCallbacks_.push({callback:i["handleTech"+iv[e]+"_"].bind(i),event:t}):i["handleTech"+iv[e]+"_"](t)}))})),this.on(this.tech_,"loadstart",(function(e){return i.handleTechLoadStart_(e)})),this.on(this.tech_,"sourceset",(function(e){return i.handleTechSourceset_(e)})),this.on(this.tech_,"waiting",(function(e){return i.handleTechWaiting_(e)})),this.on(this.tech_,"ended",(function(e){return i.handleTechEnded_(e)})),this.on(this.tech_,"seeking",(function(e){return i.handleTechSeeking_(e)})),this.on(this.tech_,"play",(function(e){return i.handleTechPlay_(e)})),this.on(this.tech_,"firstplay",(function(e){return i.handleTechFirstPlay_(e)})),this.on(this.tech_,"pause",(function(e){return i.handleTechPause_(e)})),this.on(this.tech_,"durationchange",(function(e){return i.handleTechDurationChange_(e)})),this.on(this.tech_,"fullscreenchange",(function(e){return i.handleTechFullscreenChange_(e)})),this.on(this.tech_,"fullscreenerror",(function(e){return i.handleTechFullscreenError_(e)})),this.on(this.tech_,"enterpictureinpicture",(function(e){return i.handleTechEnterPictureInPicture_(e)})),this.on(this.tech_,"leavepictureinpicture",(function(e){return i.handleTechLeavePictureInPicture_(e)})),this.on(this.tech_,"error",(function(e){return i.handleTechError_(e)})),this.on(this.tech_,"posterchange",(function(e){return i.handleTechPosterChange_(e)})),this.on(this.tech_,"textdata",(function(e){return i.handleTechTextData_(e)})),this.on(this.tech_,"ratechange",(function(e){return i.handleTechRateChange_(e)})),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||bd(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},i.unloadTech_=function(){var e=this;Lf.names.forEach((function(t){var i=Lf[t];e[i.privateName]=e[i.getterName]()})),this.textTracksJson_=ef.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},i.tech=function(e){return void 0===e&&jh.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},i.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},i.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"mouseup",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},i.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},i.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},i.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"===typeof e){var i,n=function(){var e=t.muted();t.muted(!0);var i=function(){t.muted(e)};t.playTerminatedQueue_.push(i);var n=t.play();if(Xp(n))return n["catch"](i)};if("any"===e&&!0!==this.muted()?(i=this.play(),Xp(i)&&(i=i["catch"](n))):i="muted"===e&&!0!==this.muted()?n():this.play(),Xp(i))return i.then((function(){t.trigger({type:"autoplay-success",autoplay:e})}))["catch"]((function(i){t.trigger({type:"autoplay-failure",autoplay:e})}))}},i.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,i="";"string"!==typeof t&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=nm(this,t)),this.cache_.source=Rp({},e,{src:t,type:i});for(var n=this.cache_.sources.filter((function(e){return e.src&&e.src===t})),r=[],a=this.$$("source"),o=[],s=0;s<a.length;s++){var l=Cd(a[s]);r.push(l),l.src&&l.src===t&&o.push(l.src)}o.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},i.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var i=function(e){return t.updateSourceCaches_(e)},n=this.currentSource().src,r=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==n)&&(i=function(){}),i(r),e.src||this.tech_.any(["sourceset","loadstart"],(function(e){if("sourceset"!==e.type){var i=t.techGet("currentSrc");t.lastSource_.tech=i,t.updateSourceCaches_(i)}}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},i.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},i.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},i.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},i.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime(),i=function i(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",i))};this.on("timeupdate",i)},i.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},i.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},i.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},i.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},i.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},i.handleTechFirstPlay_=function(){this.options_.starttime&&(jh.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},i.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},i.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},i.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},i.handleTechClick_=function(e){Vd(e)&&this.controls_&&(this.paused()?Kp(this.play()):this.pause())},i.handleTechDoubleClick_=function(e){if(this.controls_){var t=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(t){return t.contains(e.target)}));t||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},i.handleTechTap_=function(){this.userActive(!this.userActive())},i.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},i.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},i.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},i.handleStageClick_=function(){this.reportUserActivity()},i.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},i.documentFullscreenChange_=function(e){var t=e.target.player;if(!t||t===this){var i=this.el(),n=Ml.a[this.fsApi_.fullscreenElement]===i;!n&&i.matches?n=i.matches(":"+this.fsApi_.fullscreen):!n&&i.msMatchesSelector&&(n=i.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}},i.handleTechFullscreenChange_=function(e,t){t&&(t.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(t.isFullscreen))},i.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},i.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},i.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},i.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},i.handleTechError_=function(){var e=this.tech_.error();this.error(e)},i.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},i.getCache=function(){return this.cache_},i.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},i.techCall_=function(e,t){this.ready((function(){if(e in Yf)return Wf(this.middleware_,this.tech_,e,t);if(e in Xf)return qf(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(i){throw jh(i),i}}),!0)},i.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Zf)return Hf(this.middleware_,this.tech_,e);if(e in Xf)return qf(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw jh("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw jh("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw jh(t),t}}},i.play=function(){var e=this,t=this.options_.Promise||Al.a.Promise;return t?new t((function(t){e.play_(t)})):this.play_()},i.play_=function(e){var t=this;void 0===e&&(e=Kp),this.playCallbacks_.push(e);var i=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(i||!cd&&!ld||this.load());var n=this.techGet_("play");null===n?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)},i.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))},i.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))},i.pause=function(){this.techCall_("pause")},i.paused=function(){return!1!==this.techGet_("paused")},i.played=function(){return this.techGet_("played")||Wp(0,0)},i.scrubbing=function(e){if("undefined"===typeof e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},i.currentTime=function(e){return"undefined"!==typeof e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},i.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},i.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},i.remainingTime=function(){return this.duration()-this.currentTime()},i.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},i.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=Wp(0,0)),e},i.bufferedPercent=function(){return qp(this.buffered(),this.duration())},i.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),i=e.end(e.length-1);return i>t&&(i=t),i},i.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},i.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},i.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},i.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},i.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},i.isFullscreen=function(e){if(void 0!==e){var t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},i.requestFullscreen=function(e){var t=this.options_.Promise||Al.a.Promise;if(t){var i=this;return new t((function(t,n){function r(){i.off("fullscreenerror",o),i.off("fullscreenchange",a)}function a(){r(),t()}function o(e,t){r(),n(t)}i.one("fullscreenchange",a),i.one("fullscreenerror",o);var s=i.requestFullscreenHelper_(e);if(s)return s.then(r,r),s}))}return this.requestFullscreenHelper_()},i.requestFullscreenHelper_=function(e){var t,i=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var n=this.el_[this.fsApi_.requestFullscreen](t);return n&&n.then((function(){return i.isFullscreen(!0)}),(function(){return i.isFullscreen(!1)})),n}this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()},i.exitFullscreen=function(){var e=this.options_.Promise||Al.a.Promise;if(e){var t=this;return new e((function(e,i){function n(){t.off("fullscreenerror",a),t.off("fullscreenchange",r)}function r(){n(),e()}function a(e,t){n(),i(t)}t.one("fullscreenchange",r),t.one("fullscreenerror",a);var o=t.exitFullscreenHelper_();if(o)return o.then(n,n),o}))}return this.exitFullscreenHelper_()},i.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=Ml.a[this.fsApi_.exitFullscreen]();return t&&t.then((function(){return e.isFullscreen(!1)})),t}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()},i.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Ml.a.documentElement.style.overflow,lp(Ml.a,"keydown",this.boundFullWindowOnEscKey_),Ml.a.documentElement.style.overflow="hidden",wd(Ml.a.body,"vjs-full-window"),this.trigger("enterFullWindow")},i.fullWindowOnEscKey=function(e){Ul.a.isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},i.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,cp(Ml.a,"keydown",this.boundFullWindowOnEscKey_),Ml.a.documentElement.style.overflow=this.docOrigOverflow,Td(Ml.a.body,"vjs-full-window"),this.trigger("exitFullWindow")},i.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},i.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},i.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Ml.a&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},i.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Ml.a)return Ml.a.exitPictureInPicture()},i.handleKeyDown=function(e){var t=this.options_.userActions;if(t&&t.hotkeys){var i=function(e){var t=e.tagName.toLowerCase();if(e.isContentEditable)return!0;var i=["button","checkbox","hidden","radio","reset","submit"];if("input"===t)return-1===i.indexOf(e.type);var n=["textarea"];return-1!==n.indexOf(t)};i(this.el_.ownerDocument.activeElement)||("function"===typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}},i.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},i=t.fullscreenKey,n=void 0===i?function(e){return Ul.a.isEventKey(e,"f")}:i,r=t.muteKey,a=void 0===r?function(e){return Ul.a.isEventKey(e,"m")}:r,o=t.playPauseKey,s=void 0===o?function(e){return Ul.a.isEventKey(e,"k")||Ul.a.isEventKey(e,"Space")}:o;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();var l=Fp.getComponent("FullscreenToggle");!1!==Ml.a[this.fsApi_.fullscreenEnabled]&&l.prototype.handleClick.call(this,e)}else if(a.call(this,e)){e.preventDefault(),e.stopPropagation();var c=Fp.getComponent("MuteToggle");c.prototype.handleClick.call(this,e)}else if(s.call(this,e)){e.preventDefault(),e.stopPropagation();var u=Fp.getComponent("PlayToggle");u.prototype.handleClick.call(this,e)}},i.canPlayType=function(e){for(var t,i=0,n=this.options_.techOrder;i<n.length;i++){var r=n[i],a=Nf.getTech(r);if(a||(a=Fp.getComponent(r)),a){if(a.isSupported()&&(t=a.canPlayType(e),t))return t}else jh.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},i.selectSource=function(e){var t,i=this,n=this.options_.techOrder.map((function(e){return[e,Nf.getTech(e)]})).filter((function(e){var t=e[0],i=e[1];return i?i.isSupported():(jh.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),r=function(e,t,i){var n;return e.some((function(e){return t.some((function(t){if(n=i(e,t),n)return!0}))})),n},a=function(e){return function(t,i){return e(i,t)}},o=function(e,t){var n=e[0],r=e[1];if(r.canPlaySource(t,i.options_[n.toLowerCase()]))return{source:t,tech:n}};return t=this.options_.sourceOrder?r(e,n,a(o)):r(n,e,o),t||!1},i.handleSrc_=function(e,t){var i=this;if("undefined"===typeof e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var n=rm(e);if(n.length){if(this.changingSrc_=!0,t||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),Uf(this,n[0],(function(e,r){i.middleware_=r,t||(i.cache_.sources=n),i.updateSourceCaches_(e);var a=i.src_(e);if(a)return n.length>1?i.handleSrc_(n.slice(1)):(i.changingSrc_=!1,i.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0),void i.triggerReady());Gf(r,i.tech_)})),this.options_.retryOnError&&n.length>1){var r=function(){i.error(null),i.handleSrc_(n.slice(1),!0)},a=function(){i.off("error",r)};this.one("error",r),this.one("playing",a),this.resetRetryOnError_=function(){i.off("error",r),i.off("playing",a)}}}else this.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0)},i.src=function(e){return this.handleSrc_(e,!1)},i.src_=function(e){var t=this,i=this.selectSource([e]);return!i||(Lp(i.tech,this.techName_)?(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1):(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready((function(){t.changingSrc_=!1})),!1))},i.load=function(){this.techCall_("load")},i.reset=function(){var e=this,t=this.options_.Promise||Al.a.Promise;if(this.paused()||!t)this.doReset_();else{var i=this.play();Kp(i.then((function(){return e.doReset_()})))}},i.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),xp(this)&&this.trigger("playerreset")},i.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},i.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar,t=e.durationDisplay,i=e.remainingTimeDisplay;t&&t.updateContent(),i&&i.updateContent()},i.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},i.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},i.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},i.currentSource=function(){return this.cache_.source||{}},i.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},i.currentType=function(){return this.currentSource()&&this.currentSource().type||""},i.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},i.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"===typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t="undefined"===typeof t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},i.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},i.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},i.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},i.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},i.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},i.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},i.error=function(e){if(void 0===e)return this.error_||null;if(this.options_.suppressNotSupportedError&&e&&4===e.code){var t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",(function(){this.off(["click","touchstart"],t)}))}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Zp(e),this.addClass("vjs-error"),jh.error("(CODE:"+this.error_.code+" "+Zp.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},i.reportUserActivity=function(e){this.userActivity_=!0},i.userActive=function(e){if(void 0===e)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},i.listenForUserActivity_=function(){var e,t,i,n=gp(this,this.reportUserActivity),r=function(e){e.screenX===t&&e.screenY===i||(t=e.screenX,i=e.screenY,n())},a=function(){n(),this.clearInterval(e),e=this.setInterval(n,250)},o=function(t){n(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",r),this.on("mouseup",o),this.on("mouseleave",o);var s,l=this.getChild("controlBar");!l||ld||Xh||(l.on("mouseenter",(function(e){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0})),l.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",n),this.on("keyup",n),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(s);var e=this.options_.inactivityTimeout;e<=0||(s=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}}),250)},i.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},i.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},i.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},i.addTextTrack=function(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)},i.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},i.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e,i=t.track;if(i||(i=e),this.tech_)return this.tech_.removeRemoteTextTrack(i)},i.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},i.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},i.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},i.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),xp(this)&&this.trigger("languagechange"))},i.languages=function(){return Rp(t.prototype.options_.languages,this.languages_)},i.toJSON=function(){var e=Rp(this.options_),t=e.tracks;e.tracks=[];for(var i=0;i<t.length;i++){var n=t[i];n=Rp(n),n.player=void 0,e.tracks[i]=n}return e},i.createModal=function(e,t){var i=this;t=t||{},t.content=e||"";var n=new nf(this,t);return this.addChild(n),n.on("dispose",(function(){i.removeChild(n)})),n.open(),n},i.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),i=0;i<nv.length;i++){var n=nv[i],r=this.breakpoints_[n];if(t<=r){if(e===n)return;e&&this.removeClass(rv[e]),this.addClass(rv[n]),this.breakpoint_=n;break}}},i.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},i.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=Vh({},av,e),this.updateCurrentBreakpoint_()),Vh(this.breakpoints_)},i.responsive=function(e){if(void 0===e)return this.responsive_;e=Boolean(e);var t=this.responsive_;return e!==t?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},i.currentBreakpoint=function(){return this.breakpoint_},i.currentBreakpointClass=function(){return rv[this.breakpoint_]||""},i.loadMedia=function(e,t){var i=this;if(e&&"object"===typeof e){this.reset(),this.cache_.media=Rp(e);var n=this.cache_.media,r=n.artwork,a=n.poster,o=n.src,s=n.textTracks;!r&&a&&(this.cache_.media.artwork=[{src:a,type:im(a)}]),o&&this.src(o),a&&this.poster(a),Array.isArray(s)&&s.forEach((function(e){return i.addRemoteTextTrack(e,!1)})),this.ready(t)}},i.getMedia=function(){if(!this.cache_.media){var e=this.poster(),t=this.currentSources(),i=Array.prototype.map.call(this.remoteTextTracks(),(function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}})),n={src:t,textTracks:i};return e&&(n.poster=e,n.artwork=[{src:n.poster,type:im(n.poster)}]),n}return Rp(this.cache_.media)},t.getTagSettings=function(e){var t={sources:[],tracks:[]},i=Cd(e),n=i["data-setup"];if(xd(e,"vjs-fill")&&(i.fill=!0),xd(e,"vjs-fluid")&&(i.fluid=!0),null!==n){var r=Vl()(n||"{}"),a=r[0],o=r[1];a&&jh.error(a),Vh(i,o)}if(Vh(t,i),e.hasChildNodes())for(var s=e.childNodes,l=0,c=s.length;l<c;l++){var u=s[l],h=u.nodeName.toLowerCase();"source"===h?t.sources.push(Cd(u)):"track"===h&&t.tracks.push(Cd(u))}return t},i.flexNotSupported_=function(){var e=Ml.a.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},i.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},t}(Fp);Lf.names.forEach((function(e){var t=Lf[e];ov.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),ov.prototype.crossorigin=ov.prototype.crossOrigin,ov.players={};var sv=Al.a.navigator;ov.prototype.options_={techOrder:Nf.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:sv&&(sv.languages&&sv.languages[0]||sv.userLanguage||sv.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){ov.prototype[e]=function(){return this.techGet_(e)}})),tv.forEach((function(e){ov.prototype["handleTech"+jp(e)+"_"]=function(){return this.trigger(e)}})),Fp.registerComponent("Player",ov);var lv="plugin",cv="activePlugins_",uv={},hv=function(e){return uv.hasOwnProperty(e)},dv=function(e){return hv(e)?uv[e]:void 0},pv=function(e,t){e[cv]=e[cv]||{},e[cv][t]=!0},fv=function(e,t,i){var n=(i?"before":"")+"pluginsetup";e.trigger(n,t),e.trigger(n+":"+t.name,t)},mv=function(e,t){var i=function(){fv(this,{name:e,plugin:t,instance:null},!0);var i=t.apply(this,arguments);return pv(this,e),fv(this,{name:e,plugin:t,instance:i}),i};return Object.keys(t).forEach((function(e){i[e]=t[e]})),i},gv=function(e,t){return t.prototype.name=e,function(){fv(this,{name:e,plugin:t,instance:null},!0);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];var a=Yl()(t,[this].concat(n));return this[e]=function(){return a},fv(this,a.getEventHash()),a}},vv=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),Ap(this),delete this.trigger,Mp(this,this.constructor.defaultState),pv(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),up(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[cv][e]=!1,this.player=this.state=null,t[e]=gv(e,uv[e])},e.isBasic=function(t){var i="string"===typeof t?dv(t):t;return"function"===typeof i&&!e.prototype.isPrototypeOf(i.prototype)},e.registerPlugin=function(t,i){if("string"!==typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(hv(t))jh.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(ov.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!==typeof i)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof i+".");return uv[t]=i,t!==lv&&(e.isBasic(i)?ov.prototype[t]=mv(t,i):ov.prototype[t]=gv(t,i)),i},e.deregisterPlugin=function(e){if(e===lv)throw new Error("Cannot de-register base plugin.");hv(e)&&(delete uv[e],delete ov.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(uv)),e.forEach((function(e){var i=dv(e);i&&(t=t||{},t[e]=i)})),t},e.getPluginVersion=function(e){var t=dv(e);return t&&t.VERSION||""},e}();vv.getPlugin=dv,vv.BASE_PLUGIN_NAME=lv,vv.registerPlugin(lv,vv),ov.prototype.usingPlugin=function(e){return!!this[cv]&&!0===this[cv][e]},ov.prototype.hasPlugin=function(e){return!!hv(e)};var yv=function(e,t){void 0===t&&(t={});var i=function(){e.apply(this,arguments)},n={};for(var r in"object"===typeof t?(t.constructor!==Object.prototype.constructor&&(i=t.constructor),n=t):"function"===typeof t&&(i=t),Kl()(i,e),e&&(i.super_=e),n)n.hasOwnProperty(r)&&(i.prototype[r]=n[r]);return i},_v=function(e){return 0===e.indexOf("#")?e.slice(1):e};function bv(e,t,i){var n=bv.getPlayer(e);if(n)return t&&jh.warn('Player "'+e+'" is already initialised. Options will not be applied.'),i&&n.ready(i),n;var r="string"===typeof e?Ud("#"+_v(e)):e;if(!md(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||jh.warn("The element supplied is not included in the DOM"),t=t||{},bv.hooks("beforesetup").forEach((function(e){var i=e(r,Rp(t));Fh(i)&&!Array.isArray(i)?t=Rp(t,i):jh.error("please return an object in beforesetup hooks")}));var a=Fp.getComponent("Player");return n=new a(r,t,i),bv.hooks("setup").forEach((function(e){return e(n)})),n}if(bv.hooks_={},bv.hooks=function(e,t){return bv.hooks_[e]=bv.hooks_[e]||[],t&&(bv.hooks_[e]=bv.hooks_[e].concat(t)),bv.hooks_[e]},bv.hook=function(e,t){bv.hooks(e,t)},bv.hookOnce=function(e,t){bv.hooks(e,[].concat(t).map((function(t){var i=function i(){return bv.removeHook(e,i),t.apply(void 0,arguments)};return i})))},bv.removeHook=function(e,t){var i=bv.hooks(e).indexOf(t);return!(i<=-1)&&(bv.hooks_[e]=bv.hooks_[e].slice(),bv.hooks_[e].splice(i,1),!0)},!0!==Al.a.VIDEOJS_NO_DYNAMIC_STYLE&&fd()){var xv=Ud(".vjs-styles-defaults");if(!xv){xv=Kd("vjs-styles-defaults");var wv=Ud("head");wv&&wv.insertBefore(xv,wv.firstChild),$d(xv,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}Zd(1,bv),bv.VERSION=Oh,bv.options=ov.prototype.options_,bv.getPlayers=function(){return ov.players},bv.getPlayer=function(e){var t,i=ov.players;if("string"===typeof e){var n=_v(e),r=i[n];if(r)return r;t=Ud("#"+n)}else t=e;if(md(t)){var a=t,o=a.player,s=a.playerId;if(o||i[s])return o||i[s]}},bv.getAllPlayers=function(){return Object.keys(ov.players).map((function(e){return ov.players[e]})).filter(Boolean)},bv.players=ov.players,bv.getComponent=Fp.getComponent,bv.registerComponent=function(e,t){Nf.isTech(t)&&jh.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Fp.registerComponent.call(Fp,e,t)},bv.getTech=Nf.getTech,bv.registerTech=Nf.registerTech,bv.use=Ff,Object.defineProperty(bv,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(bv.middleware,"TERMINATOR",{value:Vf,writeable:!1,enumerable:!0}),bv.browser=ud,bv.TOUCH_ENABLED=ad,bv.extend=yv,bv.mergeOptions=Rp,bv.bind=gp,bv.registerPlugin=vv.registerPlugin,bv.deregisterPlugin=vv.deregisterPlugin,bv.plugin=function(e,t){return jh.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),vv.registerPlugin(e,t)},bv.getPlugins=vv.getPlugins,bv.getPlugin=vv.getPlugin,bv.getPluginVersion=vv.getPluginVersion,bv.addLanguage=function(e,t){var i;return e=(""+e).toLowerCase(),bv.options.languages=Rp(bv.options.languages,(i={},i[e]=t,i)),bv.options.languages[e]},bv.log=jh,bv.createLogger=Lh,bv.createTimeRange=bv.createTimeRanges=Wp,bv.formatTime=Sm,bv.setFormatTime=wm,bv.resetFormatTime=Tm,bv.parseUrl=yf,bv.isCrossOrigin=xf,bv.EventTarget=_p,bv.on=lp,bv.one=hp,bv.off=cp,bv.trigger=up,bv.xhr=Hl.a,bv.TextTrack=Of,bv.AudioTrack=Cf,bv.VideoTrack=kf,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){bv[e]=function(){return jh.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),Hd[e].apply(null,arguments)}})),bv.computedStyle=Gh,bv.dom=Hd,bv.url=wf,bv.defineLazyProperty=Jg,bv.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});
/*! @name @videojs/http-streaming @version 2.8.2 @license Apache-2.0 */
var Tv=tc,Sv=function(e,t,i){return e&&i&&i.responseURL&&t!==i.responseURL?i.responseURL:t},Ov=function(e){return bv.log.debug?bv.log.debug.bind(bv,"VHS:",e+" >"):function(){}},Cv=bv.log,kv=function(e,t){return e+"-"+t},Pv=function(e){var t=e.onwarn,i=e.oninfo,n=e.manifestString,r=e.customTagParsers,a=void 0===r?[]:r,o=e.customTagMappers,s=void 0===o?[]:o,l=e.experimentalLLHLS,c=new pc;t&&c.on("warn",t),i&&c.on("info",i),a.forEach((function(e){return c.addParser(e)})),s.forEach((function(e){return c.addTagMapper(e)})),c.push(n),c.end();var u=c.manifest;if(l||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(e){u.hasOwnProperty(e)&&delete u[e]})),u.segments&&u.segments.forEach((function(e){["parts","preloadHints"].forEach((function(t){e.hasOwnProperty(t)&&delete e[t]}))}))),!u.targetDuration){var h=10;u.segments&&u.segments.length&&(h=u.segments.reduce((function(e,t){return Math.max(e,t.duration)}),0)),t&&t("manifest has no targetDuration defaulting to "+h),u.targetDuration=h}return u},Ev=function(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach((function(i){if(e.mediaGroups[i])for(var n in e.mediaGroups[i])for(var r in e.mediaGroups[i][n]){var a=e.mediaGroups[i][n][r];t(a,i,n,r)}}))},Av=function(e){var t=e.playlist,i=e.uri,n=e.id;t.id=n,i&&(t.uri=i),t.attributes=t.attributes||{}},Iv=function(e){var t=e.playlists.length;while(t--){var i=e.playlists[t];Av({playlist:i,id:kv(t,i.uri)}),i.resolvedUri=Tv(e.uri,i.uri),e.playlists[i.id]=i,e.playlists[i.uri]=i,i.attributes.BANDWIDTH||Cv.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},Mv=function(e){Ev(e,(function(t){t.uri&&(t.resolvedUri=Tv(e.uri,t.uri))}))},Dv=function(e,t){var i=kv(0,t),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Al.a.location.href,resolvedUri:Al.a.location.href,playlists:[{uri:t,id:i,resolvedUri:t,attributes:{}}]};return n.playlists[i]=n.playlists[0],n.playlists[t]=n.playlists[0],n},jv=function(e,t){e.uri=t;for(var i=0;i<e.playlists.length;i++)if(!e.playlists[i].uri){var n="placeholder-uri-"+i;e.playlists[i].uri=n}Ev(e,(function(t,i,n,r){var a="placeholder-uri-"+i+"-"+n+"-"+r;t.playlists&&t.playlists.length||(t.playlists=[jl()({},t)]),t.playlists.forEach((function(t,i){var n=kv(i,a);t.uri?t.resolvedUri=t.resolvedUri||Tv(e.uri,t.uri):(t.uri=0===i?a:n,t.resolvedUri=t.uri),t.id=t.id||n,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),Iv(e),Mv(e)},Lv=bv.mergeOptions,Rv=bv.EventTarget,Nv=function(e,t){if(!e)return t;var i=Lv(e,t);if(e.parts&&!t.parts)delete i.parts;else if(e.parts&&t.parts)for(var n=0;n<t.parts.length;n++)e.parts&&e.parts[n]&&(i.parts[n]=Lv(e.parts[n],t.parts[n]));return i},zv=function(e,t,i){var n=e.slice(),r=t.slice();i=i||0;for(var a=Math.min(e.length,t.length+i),o=i;o<a;o++){var s=o-i;r[s]=Nv(n[o],r[s])}return r},Bv=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=Tv(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Tv(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Tv(t,e.map.uri)),e.parts&&e.parts.length&&e.parts.forEach((function(e){e.resolvedUri||(e.resolvedUri=Tv(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((function(e){e.resolvedUri||(e.resolvedUri=Tv(t,e.uri))}))},Vv=function(e){var t=e.segments||[];return e.preloadSegment&&e.preloadSegment.parts&&t.push(e.preloadSegment),t},Fv=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence},Uv=function(e,t,i){void 0===i&&(i=Fv);var n=Lv(e,{}),r=n.playlists[t.id];if(!r)return null;if(i(r,t))return null;var a=Lv(r,t);t.segments=Vv(t),r.segments&&(a.segments=zv(r.segments,t.segments,t.mediaSequence-r.mediaSequence)),a.segments.forEach((function(e){Bv(e,a.resolvedUri)}));for(var o=0;o<n.playlists.length;o++)n.playlists[o].id===t.id&&(n.playlists[o]=a);return n.playlists[t.id]=a,n.playlists[t.uri]=a,Ev(e,(function(e,i,n,r){if(e.playlists)for(var a=0;a<e.playlists.length;a++)t.id===e.playlists[a].id&&(e.playlists[a]=t)})),n},Gv=function(e,t){var i=e.segments[e.segments.length-1],n=i&&i.parts&&i.parts[i.parts.length-1],r=n&&n.duration||i&&i.duration;return t&&r?1e3*r:500*(e.partTargetDuration||e.targetDuration||10)},Hv=function(e){function t(t,i,n){var r;if(void 0===n&&(n={}),r=e.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");r.logger_=Ov("PlaylistLoader");var a=n,o=a.withCredentials,s=void 0!==o&&o,l=a.handleManifestRedirects,c=void 0!==l&&l;r.src=t,r.vhs_=i,r.withCredentials=s,r.handleManifestRedirects=c;var u=i.options_;return r.customTagParsers=u&&u.customTagParsers||[],r.customTagMappers=u&&u.customTagMappers||[],r.experimentalLLHLS=u&&u.experimentalLLHLS||!1,r.state="HAVE_NOTHING",r.on("mediaupdatetimeout",(function(){"HAVE_METADATA"===r.state&&(r.state="HAVE_CURRENT_METADATA",r.request=r.vhs_.xhr({uri:Tv(r.master.uri,r.media().uri),withCredentials:r.withCredentials},(function(e,t){if(r.request)return e?r.playlistRequestError(r.request,r.media(),"HAVE_METADATA"):void r.haveMetadata({playlistString:r.request.responseText,url:r.media().uri,id:r.media().id})})))})),r}zl()(t,e);var i=t.prototype;return i.playlistRequestError=function(e,t,i){var n=t.uri,r=t.id;this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[r],status:e.status,message:"HLS playlist request error at URL: "+n+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},i.haveMetadata=function(e){var t=this,i=e.playlistString,n=e.playlistObject,r=e.url,a=e.id;this.request=null,this.state="HAVE_METADATA";var o=n||Pv({onwarn:function(e){var i=e.message;return t.logger_("m3u8-parser warn for "+a+": "+i)},oninfo:function(e){var i=e.message;return t.logger_("m3u8-parser info for "+a+": "+i)},manifestString:i,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS});o.lastRequest=Date.now(),Av({playlist:o,uri:r,id:a});var s=Uv(this.master,o);this.targetDuration=o.partTargetDuration||o.targetDuration,s?(this.master=s,this.media_=this.master.playlists[a]):this.trigger("playlistunchanged"),this.media().endList||(Al.a.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=Al.a.setTimeout((function(){t.trigger("mediaupdatetimeout")}),Gv(this.media(),!!s))),this.trigger("loadedplaylist")},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),Al.a.clearTimeout(this.mediaUpdateTimeout),Al.a.clearTimeout(this.finalRenditionTimeout),this.off()},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e,t){var i=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"===typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(Al.a.clearTimeout(this.finalRenditionTimeout),t){var n=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=Al.a.setTimeout(this.media.bind(this,e,!1),n)}else{var r=this.state,a=!this.media_||e.id!==this.media_.id,o=this.master.playlists[e.id];if(o&&o.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(a&&(this.trigger("mediachanging"),"HAVE_MASTER"===r?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(a){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(function(t,n){if(i.request){if(e.lastRequest=Date.now(),e.resolvedUri=Sv(i.handleManifestRedirects,e.resolvedUri,n),t)return i.playlistRequestError(i.request,e,r);i.haveMetadata({playlistString:n.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===r?i.trigger("loadedmetadata"):i.trigger("mediachange")}}))}}},i.pause=function(){this.stopRequest(),Al.a.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},i.load=function(e){var t=this;Al.a.clearTimeout(this.mediaUpdateTimeout);var i=this.media();if(e){var n=i?(i.partTargetDuration||i.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Al.a.setTimeout((function(){return t.load()}),n)}else this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},i.start=function(){var e=this;if(this.started=!0,"object"===typeof this.src)return this.src.uri||(this.src.uri=Al.a.location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){e.setupInitialPlaylist(e.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(t,i){if(e.request){if(e.request=null,t)return e.error={status:i.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:i.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=Sv(e.handleManifestRedirects,e.src,i);var n=Pv({manifestString:i.responseText,customTagParsers:e.customTagParsers,customTagMappers:e.customTagMappers,experimentalLLHLS:e.experimentalLLHLS});e.setupInitialPlaylist(n)}}))},i.srcUri=function(){return"string"===typeof this.src?this.src:this.src.uri},i.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,jv(this.master,this.srcUri()),e.playlists.forEach((function(e){e.segments=Vv(e),e.segments.forEach((function(t){Bv(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t=this.srcUri()||Al.a.location.href;this.master=Dv(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(Rv),Wv=1/30,qv=3*Wv,Zv=function(e,t){var i,n=[];if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return bv.createTimeRanges(n)},Yv=function(e,t){return Zv(e,(function(e,i){return e-qv<=t&&i+qv>=t}))},Xv=function(e,t){return Zv(e,(function(e){return e-Wv>=t}))},Kv=function(e){if(e.length<2)return bv.createTimeRanges();for(var t=[],i=1;i<e.length;i++){var n=e.end(i-1),r=e.start(i);t.push([n,r])}return bv.createTimeRanges(t)},$v=function(e,t){var i=null,n=null,r=0,a=[],o=[];if(!e||!e.length||!t||!t.length)return bv.createTimeRange();var s=e.length;while(s--)a.push({time:e.start(s),type:"start"}),a.push({time:e.end(s),type:"end"});s=t.length;while(s--)a.push({time:t.start(s),type:"start"}),a.push({time:t.end(s),type:"end"});for(a.sort((function(e,t){return e.time-t.time})),s=0;s<a.length;s++)"start"===a[s].type?(r++,2===r&&(i=a[s].time)):"end"===a[s].type&&(r--,1===r&&(n=a[s].time)),null!==i&&null!==n&&(o.push([i,n]),i=null,n=null);return bv.createTimeRanges(o)},Qv=function(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")},Jv=function(e,t,i){void 0===i&&(i=1);var n=e.length?e.end(e.length-1):0;return(n-t)/i},ey=function(e){for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t},ty=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var i=0;i<e.length;i++)if(e.start(i)!==t.start(i)||e.end(i)!==t.end(i))return!0;return!1},iy=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},ny=bv.createTimeRange,ry=function(e){return(e.segments||[]).reduce((function(e,t,i){return t.parts?t.parts.forEach((function(t,n){e.push({duration:t.duration,segmentIndex:i,partIndex:n})})):e.push({duration:t.duration,segmentIndex:i,partIndex:null}),e}),[])},ay=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var i=t.segments&&t.segments.length&&t.segments[t.segments.length-1],n=i&&i.parts&&i.parts.length;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},oy=function(e,t){var i=0,n=t-e.mediaSequence,r=e.segments[n];if(r){if("undefined"!==typeof r.start)return{result:r.start,precise:!0};if("undefined"!==typeof r.end)return{result:r.end-r.duration,precise:!0}}while(n--){if(r=e.segments[n],"undefined"!==typeof r.end)return{result:i+r.end,precise:!0};if(i+=r.duration,"undefined"!==typeof r.start)return{result:i+r.start,precise:!0}}return{result:i,precise:!1}},sy=function(e,t){for(var i,n=0,r=t-e.mediaSequence;r<e.segments.length;r++){if(i=e.segments[r],"undefined"!==typeof i.start)return{result:i.start-n,precise:!0};if(n+=i.duration,"undefined"!==typeof i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}},ly=function(e,t,i){if("undefined"===typeof t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var n=oy(e,t);if(n.precise)return n.result;var r=sy(e,t);return r.precise?r.result:n.result+i},cy=function(e,t,i){if(!e)return 0;if("number"!==typeof i&&(i=0),"undefined"===typeof t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return Al.a.Infinity}return ly(e,t,i)},uy=function(e,t,i){var n=0;if(t>i){var r=[i,t];t=r[0],i=r[1]}if(t<0){for(var a=t;a<Math.min(0,i);a++)n+=e.targetDuration;t=0}for(var o=t;o<i;o++)n+=e.segments[o].duration;return n},hy=function(e,t,i,n){if(!e||!e.segments)return null;if(e.endList)return cy(e);if(null===t)return null;t=t||0;var r=ly(e,e.mediaSequence+e.segments.length,t);return i&&(n="number"===typeof n?n:ay(null,e),r-=n),Math.max(0,r)},dy=function(e,t,i){var n=!0,r=t||0,a=hy(e,t,n,i);return null===a?ny():ny(r,a)},py=function(e,t,i,n){var r=ry(e),a=t-n;if(a<0){if(i>0)for(var o=i-1;o>=0;o--){var s=r[o];if(a+=s.duration+Wv,a>0)return{mediaIndex:s.segmentIndex,startTime:n-uy(e,i,s.segmentIndex),partIndex:s.partIndex}}return{mediaIndex:r[0]&&r[0].segmentIndex||0,partIndex:r[0]&&r[0].partIndex||null,startTime:t}}if(i<0){for(var l=i;l<0;l++)if(a-=e.targetDuration,a<0)return{mediaIndex:r[0].segmentIndex,startTime:t};i=0}for(var c=i;c<r.length;c++){var u=r[c];if(a-=u.duration+Wv,a<0)return{mediaIndex:u.segmentIndex,startTime:n+uy(e,i,u.segmentIndex),partIndex:u.partIndex}}return{mediaIndex:r[r.length-1].segmentIndex,partIndex:r[r.length-1].partIndex,startTime:t}},fy=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},my=function(e){return e.excludeUntil&&e.excludeUntil===1/0},gy=function(e){var t=fy(e);return!e.disabled&&!t},vy=function(e){return e.disabled},yy=function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},_y=function(e,t){return t.attributes&&t.attributes[e]},by=function(e,t,i,n){if(void 0===n&&(n=0),!_y("BANDWIDTH",i))return NaN;var r=e*i.attributes.BANDWIDTH;return(r-8*n)/t},xy=function(e,t){if(1===e.playlists.length)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!gy(e)&&(e.attributes.BANDWIDTH||0)<i})).length},wy=function(e,t){return!(!e&&!t||!e&&t||e&&!t)&&(e===t||(!(!e.id||!t.id||e.id!==t.id)||(!(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)||!(!e.uri||!t.uri||e.uri!==t.uri))))},Ty=function(e,t){var i=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},n=!1;for(var r in i){for(var a in i[r])if(n=t(i[r][a]),n)break;if(n)break}return!!n},Sy=function(e){if(!e||!e.playlists||!e.playlists.length){var t=Ty(e,(function(e){return e.playlists&&e.playlists.length||e.uri}));return t}for(var i=function(t){var i=e.playlists[t],n=i.attributes&&i.attributes.CODECS;if(n&&n.split(",").every((function(e){return bc(e)})))return"continue";var r=Ty(e,(function(e){return wy(i,e)}));return r?"continue":{v:!1}},n=0;n<e.playlists.length;n++){var r=i(n);if("continue"!==r&&"object"===typeof r)return r.v}return!0},Oy={liveEdgeDelay:ay,duration:cy,seekable:dy,getMediaInfoForTime:py,isEnabled:gy,isDisabled:vy,isBlacklisted:fy,isIncompatible:my,playlistEnd:hy,isAes:yy,hasAttribute:_y,estimateSegmentRequestTime:by,isLowestEnabledRendition:xy,isAudioOnly:Sy,playlistMatch:wy},Cy=bv.xhr,ky=bv.mergeOptions,Py=function(e,t,i,n){var r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),i.headers&&(e.responseHeaders=i.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===i.statusCode||206===i.statusCode||0===i.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(r||e.responseText)))),n(t,e)},Ey=function(){var e=function e(t,i){t=ky({timeout:45e3},t);var n=e.beforeRequest||bv.Vhs.xhr.beforeRequest;if(n&&"function"===typeof n){var r=n(t);r&&(t=r)}var a=!0===bv.Vhs.xhr.original?Cy:bv.Vhs.xhr,o=a(t,(function(e,t){return Py(o,e,t,i)})),s=o.abort;return o.abort=function(){return o.aborted=!0,s.apply(o,arguments)},o.uri=t.uri,o.requestTime=Date.now(),o};return e.original=!0,e},Ay=function(e){var t=e.offset+e.length-1,i=e.offset;return"bytes="+i+"-"+t},Iy=function(e){var t={};return e.byterange&&(t.Range=Ay(e.byterange)),t},My=function(e,t){return e.start(t)+"-"+e.end(t)},Dy=function(e,t){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},jy=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Ly=function(e){var t={};return Object.keys(e).forEach((function(i){var n=e[i];ArrayBuffer.isView(n)?t[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:t[i]=n})),t},Ry=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Ny=function(e){return e.resolvedUri},zy=function(e){for(var t,i,n=Array.prototype.slice.call(e),r=16,a="",o=0;o<n.length/r;o++)t=n.slice(o*r,o*r+r).map(Dy).join(""),i=n.slice(o*r,o*r+r).map(jy).join(""),a+=t+" "+i+"\n";return a},By=function(e){var t=e.bytes;return zy(t)},Vy=function(e){var t,i="";for(t=0;t<e.length;t++)i+=My(e,t)+" ";return i},Fy=Object.freeze({__proto__:null,createTransferableMessage:Ly,initSegmentId:Ry,segmentKeyId:Ny,hexDump:zy,tagDump:By,textRanges:Vy}),Uy=.25,Gy=function(e,t){if(!t.dateTimeObject)return null;var i=t.videoTimingInfo.transmuxerPrependedSeconds,n=t.videoTimingInfo.transmuxedPresentationStart,r=n+i,a=e-r;return new Date(t.dateTimeObject.getTime()+1e3*a)},Hy=function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds},Wy=function(e,t){var i;try{i=new Date(e)}catch(u){return null}if(!t||!t.segments||0===t.segments.length)return null;var n=t.segments[0];if(i<n.dateTimeObject)return null;for(var r=0;r<t.segments.length-1;r++){n=t.segments[r];var a=t.segments[r+1].dateTimeObject;if(i<a)break}var o=t.segments[t.segments.length-1],s=o.dateTimeObject,l=o.videoTimingInfo?Hy(o.videoTimingInfo):o.duration+o.duration*Uy,c=new Date(s.getTime()+1e3*l);return i>c?null:(i>s&&(n=o),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Oy.duration(t,t.mediaSequence+t.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})},qy=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var i,n=0,r=0;r<t.segments.length;r++)if(i=t.segments[r],n=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration,e<=n)break;var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+a.duration*Uy)return null;i=a}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},Zy=function(e,t){var i,n;try{i=new Date(e),n=new Date(t)}catch(o){}var r=i.getTime(),a=n.getTime();return(a-r)/1e3},Yy=function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++){var i=e.segments[t];if(!i.dateTimeObject)return!1}return!0},Xy=function(e){var t=e.playlist,i=e.time,n=void 0===i?void 0:i,r=e.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===n)return r({message:"getProgramTime: playlist and time must be provided"});var a=qy(n,t);if(!a)return r({message:"valid programTime was not found"});if("estimate"===a.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var o={mediaSeconds:n},s=Gy(n,a.segment);return s&&(o.programDateTime=s.toISOString()),r(null,o)},Ky=function e(t){var i=t.programTime,n=t.playlist,r=t.retryCount,a=void 0===r?2:r,o=t.seekTo,s=t.pauseAfterSeek,l=void 0===s||s,c=t.tech,u=t.callback;if(!u)throw new Error("seekToProgramTime: callback must be provided");if("undefined"===typeof i||!n||!o)return u({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!c.hasStarted_)return u({message:"player must be playing a live stream to start buffering"});if(!Yy(n))return u({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var h=Wy(i,n);if(!h)return u({message:i+" was not found in the stream"});var d=h.segment,p=Zy(d.dateTimeObject,i);if("estimate"===h.type)return 0===a?u({message:i+" is not buffered yet. Try again"}):(o(h.estimatedStart+p),void c.one("seeked",(function(){e({programTime:i,playlist:n,retryCount:a-1,seekTo:o,pauseAfterSeek:l,tech:c,callback:u})})));var f=d.start+p,m=function(){return u(null,c.currentTime())};c.one("seeked",m),l&&c.pause(),o(f)},$y=function(e,t){if(4===e.readyState)return t()},Qy=function(e,t,i){var n,r=[],a=!1,o=function(e,t,n,r){return t.abort(),a=!0,i(e,t,n,r)},s=function(e,t){if(!a){if(e)return o(e,t,"",r);var i=t.responseText.substring(r&&r.byteLength||0,t.responseText.length);if(r=Zu(r,qu(i,!0)),n=n||$u(r),r.length<10||n&&r.length<n+2)return $y(t,(function(){return o(e,t,"",r)}));var s=wh(r);return"ts"===s&&r.length<188||!s&&r.length<376?$y(t,(function(){return o(e,t,"",r)})):o(null,t,s,r)}},l={uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function(t){return t.total,t.loaded,Py(e,null,{statusCode:e.status},s)}))}},c=t(l,(function(e,t){return Py(c,e,t,s)}));return c},Jy=bv.EventTarget,e_=bv.mergeOptions,t_=function(e,t){if(!Fv(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var i=0;i<e.segments.length;i++){var n=e.segments[i],r=t.segments[i];if(n.uri!==r.uri)return!1;if(n.byterange||r.byterange){var a=n.byterange,o=r.byterange;if(a&&!o||!a&&o)return!1;if(a.offset!==o.offset||a.length!==o.length)return!1}}return!0},i_=function(e){var t=e.masterXml,i=e.srcUrl,n=e.clientOffset,r=e.sidxMapping,a=Du(t,{manifestUri:i,clientOffset:n,sidxMapping:r});return jv(a,i),a},n_=function(e,t,i){for(var n=!0,r=e_(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),a=0;a<t.playlists.length;a++){var o=t.playlists[a];if(o.sidx){var s=Zc(o.sidx);i&&i[s]&&i[s].sidx&&qc(o,i[s].sidx,o.sidx.resolvedUri)}var l=Uv(r,o,t_);l&&(r=l,n=!1)}return Ev(t,(function(e,t,i,a){if(e.playlists&&e.playlists.length){var o=e.playlists[0].id,s=Uv(r,e.playlists[0],t_);s&&(r=s,r.mediaGroups[t][i][a].playlists[0]=r.playlists[o],n=!1)}})),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(n=!1),n?null:r},r_=function(e,t){var i=Boolean(!e.map&&!t.map),n=i||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length);return n&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},a_=function(e,t){var i={};for(var n in e){var r=e[n],a=r.sidx;if(a){var o=Zc(a);if(!t[o])break;var s=t[o].sidxInfo;r_(s,a)&&(i[o]=t[o])}}return i},o_=function(e,t){var i=a_(e.playlists,t),n=i;return Ev(e,(function(e,i,r,a){if(e.playlists&&e.playlists.length){var o=e.playlists;n=e_(n,a_(o,t))}})),n},s_=function(e){function t(t,i,n,r){var a;void 0===n&&(n={}),a=e.call(this)||this,a.masterPlaylistLoader_=r||Rl()(a),r||(a.isMaster_=!0);var o=n,s=o.withCredentials,l=void 0!==s&&s,c=o.handleManifestRedirects,u=void 0!==c&&c;if(a.vhs_=i,a.withCredentials=l,a.handleManifestRedirects=u,!t)throw new Error("A non-empty playlist URL or object is required");return a.on("minimumUpdatePeriod",(function(){a.refreshXml_()})),a.on("mediaupdatetimeout",(function(){a.refreshMedia_(a.media().id)})),a.state="HAVE_NOTHING",a.loadedPlaylists_={},a.logger_=Ov("DashPlaylistLoader"),a.isMaster_?(a.masterPlaylistLoader_.srcUrl=t,a.masterPlaylistLoader_.sidxMapping_={}):a.childPlaylist_=t,a}zl()(t,e);var i=t.prototype;return i.requestErrored_=function(e,t,i){return!this.request||(this.request=null,e?(this.error="object"!==typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,i&&(this.state=i),this.trigger("error"),!0):void 0)},i.addSidxSegments_=function(e,t,i){var n=this,r=e.sidx&&Zc(e.sidx);if(e.sidx&&r&&!this.masterPlaylistLoader_.sidxMapping_[r]){var a=Sv(this.handleManifestRedirects,e.sidx.resolvedUri),o=function(a,o){if(!n.requestErrored_(a,o,t)){var s,l=n.masterPlaylistLoader_.sidxMapping_;try{s=Ru()(Vu(o.response).subarray(8))}catch(c){return void n.requestErrored_(c,o,t)}return l[r]={sidxInfo:e.sidx,sidx:s},qc(e,s,e.sidx.resolvedUri),i(!0)}};this.request=Qy(a,this.vhs_.xhr,(function(t,i,r,s){if(t)return o(t,i);if(!r||"mp4"!==r)return o({status:i.status,message:"Unsupported "+(r||"unknown")+" container type for sidx segment at URL: "+a,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},i);var l=e.sidx.byterange,c=l.offset,u=l.length;if(s.length>=u+c)return o(t,{response:s.subarray(c,c+u),status:i.status,uri:i.uri});n.request=n.vhs_.xhr({uri:a,responseType:"arraybuffer",headers:Iy({byterange:e.sidx.byterange})},o)}))}else this.mediaRequest_=Al.a.setTimeout((function(){return i(!1)}),0)},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Al.a.clearTimeout(this.minimumUpdatePeriodTimeout_),Al.a.clearTimeout(this.mediaRequest_),Al.a.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},i.hasPendingRequest=function(){return this.request||this.mediaRequest_},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if("string"===typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(n&&(this.trigger("mediachanging"),this.trigger("mediachange")));n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,i,(function(n){t.haveMetadata({startingState:i,playlist:e})})))},i.haveMetadata=function(e){var t=e.startingState,i=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[i.id]=i,this.mediaRequest_=null,this.refreshMedia_(i.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},i.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Al.a.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(Al.a.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},i.load=function(e){var t=this;Al.a.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var i=this.media();if(e){var n=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Al.a.setTimeout((function(){return t.load()}),n)}else this.started?i&&!i.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},i.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_((function(t,i){e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[0])})):this.mediaRequest_=Al.a.setTimeout((function(){return e.haveMaster_()}),0)},i.requestMaster_=function(e){var t=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(function(i,n){if(!t.requestErrored_(i,n)){var r=n.responseText!==t.masterPlaylistLoader_.masterXml_;return t.masterPlaylistLoader_.masterXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?t.masterLoaded_=Date.parse(n.responseHeaders.date):t.masterLoaded_=Date.now(),t.masterPlaylistLoader_.srcUrl=Sv(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,n),r?(t.handleMaster_(),void t.syncClientServerClock_((function(){return e(n,r)}))):e(n,r)}"HAVE_NOTHING"===t.state&&(t.started=!1)}))},i.syncClientServerClock_=function(e){var t=this,i=ju(this.masterPlaylistLoader_.masterXml_);return null===i?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===i.method?(this.masterPlaylistLoader_.clientOffset_=i.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:Tv(this.masterPlaylistLoader_.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials},(function(n,r){if(t.request){if(n)return t.masterPlaylistLoader_.clientOffset_=t.masterLoaded_-Date.now(),e();var a;a="HEAD"===i.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):t.masterLoaded_:Date.parse(r.responseText),t.masterPlaylistLoader_.clientOffset_=a-Date.now(),e()}})))},i.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},i.handleMaster_=function(){this.mediaRequest_=null;var e=i_({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_}),t=this.masterPlaylistLoader_.master;t&&(e=n_(t,e,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=e||t;var i=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return i&&i!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=i),(!t||e&&e.minimumUpdatePeriod!==t.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(e)},i.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(Al.a.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.master&&e.master.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!==typeof t||t<=0?t<0&&this.logger_("found invalid minimumUpdatePeriod of "+t+", not setting a timeout"):this.createMUPTimeout_(t)},i.createMUPTimeout_=function(e){var t=this.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=Al.a.setTimeout((function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)}),e)},i.refreshXml_=function(){var e=this;this.requestMaster_((function(t,i){i&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=o_(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.sidxMapping_),e.addSidxSegments_(e.media(),e.state,(function(t){e.refreshMedia_(e.media().id)})))}))},i.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var i=this.masterPlaylistLoader_.master.playlists,n=!this.media_||this.media_!==i[e];if(n?this.media_=i[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var r=function e(){t.media().endList||(t.mediaUpdateTimeout=Al.a.setTimeout((function(){t.trigger("mediaupdatetimeout"),e()}),Gv(t.media(),Boolean(n))))};r()}this.trigger("loadedplaylist")},t}(Jy),l_={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},c_=function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t.buffer},u_=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},h_=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(i){var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}},d_=function(e){return function(){var t=h_(e),i=u_(new Worker(t));i.objURL=t;var n=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(t),n.call(this)},i}},p_=function(e){return"var browserWorkerPolyFill = "+u_.toString()+";\nbrowserWorkerPolyFill(self);\n"+e},f_=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},m_=p_(f_((function(){var e=function(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t]=e[t].concat(i)},this.off=function(t,i){var n;return!!e[t]&&(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var i,n,r,a;if(i=e[t],i)if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(a=[],n=arguments.length,n=1;n<arguments.length;++n)a.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,a)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,i,n,r,a,o,s,l,c,u,h,d,p,f,m,g,v,y,_,b,x,w,T,S,O,C,k,P,E,A,I,M,D,j,L,R,N=e,z=Math.pow(2,32)-1;(function(){var e;if(T={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!==typeof Uint8Array){for(e in T)T.hasOwnProperty(e)&&(T[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),O=new Uint8Array([0,0,0,1]),k=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),P=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),E={video:k,audio:P},M=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),I=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),j=D,L=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),R=D,A=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),t=function(e){var t,i,n,r=[],a=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);t=r.length;while(t--)a+=r[t].byteLength;for(i=new Uint8Array(a+8),n=new DataView(i.buffer,i.byteOffset,i.byteLength),n.setUint32(0,i.byteLength),i.set(e,4),t=0,a=8;t<r.length;t++)i.set(r[t],a),a+=r[t].byteLength;return i},i=function(){return t(T.dinf,t(T.dref,M))},n=function(e){return t(T.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},r=function(){return t(T.ftyp,S,O,S,C)},g=function(e){return t(T.hdlr,E[e])},a=function(e){return t(T.mdat,e)},m=function(e){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(i[12]=e.samplerate>>>24&255,i[13]=e.samplerate>>>16&255,i[14]=e.samplerate>>>8&255,i[15]=255&e.samplerate),t(T.mdhd,i)},f=function(e){return t(T.mdia,m(e),g(e.type),s(e))},o=function(e){return t(T.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},s=function(e){return t(T.minf,"video"===e.type?t(T.vmhd,A):t(T.smhd,I),i(),y(e))},l=function(e,i){var n=[],r=i.length;while(r--)n[r]=b(i[r]);return t.apply(null,[T.moof,o(e)].concat(n))},c=function(e){var i=e.length,n=[];while(i--)n[i]=d(e[i]);return t.apply(null,[T.moov,h(4294967295)].concat(n).concat(u(e)))},u=function(e){var i=e.length,n=[];while(i--)n[i]=x(e[i]);return t.apply(null,[T.mvex].concat(n))},h=function(e){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(T.mvhd,i)},v=function(e){var i,n,r=e.samples||[],a=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)i=r[n].flags,a[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t(T.sdtp,a)},y=function(e){return t(T.stbl,_(e),t(T.stts,R),t(T.stsc,j),t(T.stsz,L),t(T.stco,D))},function(){var e,i;_=function(n){return t(T.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===n.type?e(n):i(n))},e=function(e){var i,n,r=e.sps||[],a=e.pps||[],o=[],s=[];for(i=0;i<r.length;i++)o.push((65280&r[i].byteLength)>>>8),o.push(255&r[i].byteLength),o=o.concat(Array.prototype.slice.call(r[i]));for(i=0;i<a.length;i++)s.push((65280&a[i].byteLength)>>>8),s.push(255&a[i].byteLength),s=s.concat(Array.prototype.slice.call(a[i]));if(n=[T.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(T.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],o,[a.length],s))),t(T.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var l=e.sarRatio[0],c=e.sarRatio[1];n.push(t(T.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&c)>>24,(16711680&c)>>16,(65280&c)>>8,255&c])))}return t.apply(null,n)},i=function(e){return t(T.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),n(e))}}(),p=function(e){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(T.tkhd,i)},b=function(e){var i,n,r,a,o,s,l;return i=t(T.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/(z+1)),l=Math.floor(e.baseMediaDecodeTime%(z+1)),n=t(T.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,l>>>24&255,l>>>16&255,l>>>8&255,255&l])),o=92,"audio"===e.type?(r=w(e,o),t(T.traf,i,n,r)):(a=v(e),r=w(e,a.length+o),t(T.traf,i,n,r,a))},d=function(e){return e.duration=e.duration||4294967295,t(T.trak,p(e),f(e))},x=function(e){var i=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(i[i.length-1]=0),t(T.trex,i)},function(){var e,i,n;n=function(e,t){var i=0,n=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,i|n|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},i=function(e,i){var r,a,o,s,l,c;for(s=e.samples||[],i+=20+16*s.length,o=n(s,i),a=new Uint8Array(o.length+16*s.length),a.set(o),r=o.length,c=0;c<s.length;c++)l=s[c],a[r++]=(4278190080&l.duration)>>>24,a[r++]=(16711680&l.duration)>>>16,a[r++]=(65280&l.duration)>>>8,a[r++]=255&l.duration,a[r++]=(4278190080&l.size)>>>24,a[r++]=(16711680&l.size)>>>16,a[r++]=(65280&l.size)>>>8,a[r++]=255&l.size,a[r++]=l.flags.isLeading<<2|l.flags.dependsOn,a[r++]=l.flags.isDependedOn<<6|l.flags.hasRedundancy<<4|l.flags.paddingValue<<1|l.flags.isNonSyncSample,a[r++]=61440&l.flags.degradationPriority,a[r++]=15&l.flags.degradationPriority,a[r++]=(4278190080&l.compositionTimeOffset)>>>24,a[r++]=(16711680&l.compositionTimeOffset)>>>16,a[r++]=(65280&l.compositionTimeOffset)>>>8,a[r++]=255&l.compositionTimeOffset;return t(T.trun,a)},e=function(e,i){var r,a,o,s,l,c;for(s=e.samples||[],i+=20+8*s.length,o=n(s,i),r=new Uint8Array(o.length+8*s.length),r.set(o),a=o.length,c=0;c<s.length;c++)l=s[c],r[a++]=(4278190080&l.duration)>>>24,r[a++]=(16711680&l.duration)>>>16,r[a++]=(65280&l.duration)>>>8,r[a++]=255&l.duration,r[a++]=(4278190080&l.size)>>>24,r[a++]=(16711680&l.size)>>>16,r[a++]=(65280&l.size)>>>8,r[a++]=255&l.size;return t(T.trun,r)},w=function(t,n){return"audio"===t.type?e(t,n):i(t,n)}}();var B,V,F,U,G,H,W,q,Z={ftyp:r,mdat:a,moof:l,moov:c,initSegment:function(e){var t,i=r(),n=c(e);return t=new Uint8Array(i.byteLength+n.byteLength),t.set(i),t.set(n,i.byteLength),t}},Y=function(e){var t,i,n=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,n.byteLength=0,t=0;t<e.length;t++)i=e[t],"access_unit_delimiter_rbsp"===i.nalUnitType?(n.length&&(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),n=[i],n.byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return r.length&&(!n.duration||n.duration<=0)&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r},X=function(e){var t,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)i=e[t],i.keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),n=[i],n.nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},K=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},$=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Q=function(e,t){var i=$();return i.dataOffset=t,i.compositionTimeOffset=e.pts-e.dts,i.duration=e.duration,i.size=4*e.length,i.size+=e.byteLength,e.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i},J=function(e,t){var i,n,r,a,o,s=t||0,l=[];for(i=0;i<e.length;i++)for(a=e[i],n=0;n<a.length;n++)o=a[n],r=Q(o,s),s+=r.size,l.push(r);return l},ee=function(e){var t,i,n,r,a,o,s=0,l=e.byteLength,c=e.nalCount,u=l+4*c,h=new Uint8Array(u),d=new DataView(h.buffer);for(t=0;t<e.length;t++)for(r=e[t],i=0;i<r.length;i++)for(a=r[i],n=0;n<a.length;n++)o=a[n],d.setUint32(s,o.data.byteLength),s+=4,h.set(o.data,s),s+=o.data.byteLength;return h},te=function(e,t){var i,n=t||0,r=[];return i=Q(e,n),r.push(i),r},ie=function(e){var t,i,n=0,r=e.byteLength,a=e.length,o=r+4*a,s=new Uint8Array(o),l=new DataView(s.buffer);for(t=0;t<e.length;t++)i=e[t],l.setUint32(n,i.data.byteLength),n+=4,s.set(i.data,n),n+=i.data.byteLength;return s},ne={groupNalsIntoFrames:Y,groupFramesIntoGops:X,extendFirstKeyFrame:K,generateSampleTable:J,concatenateNalData:ee,generateSampleTableForFrame:te,concatenateNalDataForFrame:ie},re=[33,16,5,32,164,27],ae=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],oe=function(e){var t=[];while(e--)t.push(0);return t},se=function(e){return Object.keys(e).reduce((function(t,i){return t[i]=new Uint8Array(e[i].reduce((function(e,t){return e.concat(t)}),[])),t}),{})},le=function(){if(!B){var e={96e3:[re,[227,64],oe(154),[56]],88200:[re,[231],oe(170),[56]],64e3:[re,[248,192],oe(240),[56]],48e3:[re,[255,192],oe(268),[55,148,128],oe(54),[112]],44100:[re,[255,192],oe(268),[55,163,128],oe(84),[112]],32e3:[re,[255,192],oe(268),[55,234],oe(226),[112]],24e3:[re,[255,192],oe(268),[55,255,128],oe(268),[111,112],oe(126),[224]],16e3:[re,[255,192],oe(268),[55,255,128],oe(268),[111,255],oe(269),[223,108],oe(195),[1,192]],12e3:[ae,oe(268),[3,127,248],oe(268),[6,255,240],oe(268),[13,255,224],oe(268),[27,253,128],oe(259),[56]],11025:[ae,oe(268),[3,127,248],oe(268),[6,255,240],oe(268),[13,255,224],oe(268),[27,255,192],oe(268),[55,175,128],oe(108),[112]],8e3:[ae,oe(268),[3,121,16],oe(47),[7]]};B=se(e)}return B},ce=9e4;V=function(e){return e*ce},F=function(e,t){return e*t},U=function(e){return e/ce},G=function(e,t){return e/t},H=function(e,t){return V(G(e,t))},W=function(e,t){return F(U(e),t)},q=function(e,t,i){return U(i?e:e-t)};var ue={ONE_SECOND_IN_TS:ce,secondsToVideoTs:V,secondsToAudioTs:F,videoTsToSeconds:U,audioTsToSeconds:G,audioTsToVideoTs:H,videoTsToAudioTs:W,metadataTsToSeconds:q},he=function(e){var t,i,n=0;for(t=0;t<e.length;t++)i=e[t],n+=i.data.byteLength;return n},de=function(e,t,i,n){var r,a,o,s,l=0,c=0,u=0,h=0;if(t.length&&(r=ue.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),l=Math.ceil(ue.ONE_SECOND_IN_TS/(e.samplerate/1024)),i&&n&&(c=r-Math.max(i,n),u=Math.floor(c/l),h=u*l),!(u<1||h>ue.ONE_SECOND_IN_TS/2))){for(a=le()[e.samplerate],a||(a=t[0].data),o=0;o<u;o++)s=t[0],t.splice(0,0,{data:a,dts:s.dts-l,pts:s.pts-l});return e.baseMediaDecodeTime-=Math.floor(ue.videoTsToAudioTs(h,e.samplerate)),h}},pe=function(e,t,i){return t.minSegmentDts>=i?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=i&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))},fe=function(e){var t,i,n=[];for(t=0;t<e.length;t++)i=e[t],n.push({size:i.data.byteLength,duration:1024});return n},me=function(e){var t,i,n=0,r=new Uint8Array(he(e));for(t=0;t<e.length;t++)i=e[t],r.set(i.data,n),n+=i.data.byteLength;return r},ge={prefixWithSilence:de,trimAdtsFramesByEarliestDts:pe,generateSampleTable:fe,concatenateFrameData:me},ve=ue.ONE_SECOND_IN_TS,ye=function(e,t){"number"===typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"===typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},_e=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},be=function(e,t){var i,n,r=e.minSegmentDts;return t||(r-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=r,i=Math.max(0,i),"audio"===e.type&&(n=e.samplerate/ve,i*=n,i=Math.floor(i)),i},xe={clearDtsInfo:_e,calculateTrackBaseMediaDecodeTime:be,collectDtsInfo:ye},we=4,Te=128,Se=function(e){var t=0,i={payloadType:-1,payloadSize:0},n=0,r=0;while(t<e.byteLength){if(e[t]===Te)break;while(255===e[t])n+=255,t++;n+=e[t++];while(255===e[t])r+=255,t++;if(r+=e[t++],!i.payload&&n===we){var a=String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6]);if("GA94"===a){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);break}i.payload=void 0}t+=r,n=0,r=0}return i},Oe=function(e){return 181!==e.payload[0]||49!==(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Ce=function(e,t){var i,n,r,a,o=[];if(!(64&t[0]))return o;for(n=31&t[0],i=0;i<n;i++)r=3*i,a={type:3&t[r+2],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],o.push(a));return o},ke=function(e){var t,i,n=e.byteLength,r=[],a=1;while(a<n-2)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===r[0]&&(o++,r.shift()),i[a]=e[o];return i},Pe={parseSei:Se,parseUserData:Oe,parseCaptionPackets:Ce,discardEmulationPreventionBytes:ke,USER_DATA_REGISTERED_ITU_T_T35:we},Ee=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!==typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Fe(0,0),new Fe(0,1),new Fe(1,0),new Fe(1,1)],this.parse708captions_&&(this.cc708Stream_=new Le),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Ee.prototype=new N,Ee.prototype.push=function(e){var t,i,n;if("sei_rbsp"===e.nalUnitType&&(t=Pe.parseSei(e.escapedRBSP),t.payload&&t.payloadType===Pe.USER_DATA_REGISTERED_ITU_T_T35&&(i=Pe.parseUserData(t),i)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=Pe.parseCaptionPackets(e.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},Ee.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},Ee.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},Ee.prototype.flush=function(){return this.flushStream("flush")},Ee.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ee.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},Ee.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},Ee.prototype.setsChannel1Active=function(e){return 4096===(30720&e.ccData)},Ee.prototype.setsChannel2Active=function(e){return 6144===(30720&e.ccData)},Ee.prototype.setsTextOrXDSActive=function(e){return 256===(28928&e.ccData)||4138===(30974&e.ccData)||6186===(30974&e.ccData)},Ee.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var Ae={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Ie=function(e){var t=Ae[e]||e;return 4096&e&&e===t?"":String.fromCharCode(t)},Me=function(e){return 32<=e&&e<=127||160<=e&&e<=255},De=function(e){this.windowNum=e,this.reset()};De.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},De.prototype.getText=function(){return this.rows.join("\n")},De.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},De.prototype.newLine=function(e){this.rows.length>=this.virtualRowCount&&"function"===typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);while(this.rows.length>this.virtualRowCount)this.rows.shift(),this.rowIdx--},De.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},De.prototype.addText=function(e){this.rows[this.rowIdx]+=e},De.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var je=function(e){this.serviceNum=e,this.text="",this.currentWindow=new De(-1),this.windows=[]};je.prototype.init=function(e,t){this.startPts=e;for(var i=0;i<8;i++)this.windows[i]=new De(i),"function"===typeof t&&(this.windows[i].beforeRowOverflow=t)},je.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]};var Le=function e(){e.prototype.init.call(this);var t=this;this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(t.new708Packet(),t.add708Bytes(e)):(null===t.current708Packet&&t.new708Packet(),t.add708Bytes(e))}};Le.prototype=new N,Le.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Le.prototype.add708Bytes=function(e){var t=e.ccData,i=t>>>8,n=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(i),this.current708Packet.data.push(n)},Le.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,i=null,n=null,r=0,a=t[r++];for(e.seq=a>>6,e.sizeCode=63&a;r<t.length;r++)a=t[r++],i=a>>5,n=31&a,7===i&&n>0&&(a=t[r++],i=a),this.pushServiceBlock(i,r,n),n>0&&(r+=n-1)},Le.prototype.pushServiceBlock=function(e,t,i){var n,r=t,a=this.current708Packet.data,o=this.services[e];for(o||(o=this.initService(e,r));r<t+i&&r<a.length;r++)n=a[r],Me(n)?r=this.handleText(r,o):16===n?r=this.extendedCommands(r,o):128<=n&&n<=135?r=this.setCurrentWindow(r,o):152<=n&&n<=159?r=this.defineWindow(r,o):136===n?r=this.clearWindows(r,o):140===n?r=this.deleteWindows(r,o):137===n?r=this.displayWindows(r,o):138===n?r=this.hideWindows(r,o):139===n?r=this.toggleWindows(r,o):151===n?r=this.setWindowAttributes(r,o):144===n?r=this.setPenAttributes(r,o):145===n?r=this.setPenColor(r,o):146===n?r=this.setPenLocation(r,o):143===n?o=this.reset(r,o):8===n?o.currentWindow.backspace():12===n?o.currentWindow.clearText():13===n?o.currentWindow.pendingNewLine=!0:14===n?o.currentWindow.clearText():141===n&&r++},Le.prototype.extendedCommands=function(e,t){var i=this.current708Packet.data,n=i[++e];return Me(n)&&(e=this.handleText(e,t,!0)),e},Le.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},Le.prototype.initService=function(e,t){var i=this;return this.services[e]=new je(e),this.services[e].init(this.getPts(t),(function(t){i.flushDisplayed(t,i.services[e])})),this.services[e]},Le.prototype.handleText=function(e,t,i){var n=this.current708Packet.data,r=n[e],a=i?4096:0,o=Ie(a|r),s=t.currentWindow;return s.pendingNewLine&&!s.isEmpty()&&s.newLine(this.getPts(e)),s.pendingNewLine=!1,s.addText(o),e},Le.prototype.setCurrentWindow=function(e,t){var i=this.current708Packet.data,n=i[e],r=7&n;return t.setCurrentWindow(r),e},Le.prototype.defineWindow=function(e,t){var i=this.current708Packet.data,n=i[e],r=7&n;t.setCurrentWindow(r);var a=t.currentWindow;return n=i[++e],a.visible=(32&n)>>5,a.rowLock=(16&n)>>4,a.columnLock=(8&n)>>3,a.priority=7&n,n=i[++e],a.relativePositioning=(128&n)>>7,a.anchorVertical=127&n,n=i[++e],a.anchorHorizontal=n,n=i[++e],a.anchorPoint=(240&n)>>4,a.rowCount=15&n,n=i[++e],a.columnCount=63&n,n=i[++e],a.windowStyle=(56&n)>>3,a.penStyle=7&n,a.virtualRowCount=a.rowCount+1,e},Le.prototype.setWindowAttributes=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.winAttr;return n=i[++e],r.fillOpacity=(192&n)>>6,r.fillRed=(48&n)>>4,r.fillGreen=(12&n)>>2,r.fillBlue=3&n,n=i[++e],r.borderType=(192&n)>>6,r.borderRed=(48&n)>>4,r.borderGreen=(12&n)>>2,r.borderBlue=3&n,n=i[++e],r.borderType+=(128&n)>>5,r.wordWrap=(64&n)>>6,r.printDirection=(48&n)>>4,r.scrollDirection=(12&n)>>2,r.justify=3&n,n=i[++e],r.effectSpeed=(240&n)>>4,r.effectDirection=(12&n)>>2,r.displayEffect=3&n,e},Le.prototype.flushDisplayed=function(e,t){for(var i=[],n=0;n<8;n++)t.windows[n].visible&&!t.windows[n].isEmpty()&&i.push(t.windows[n].getText());t.endPts=e,t.text=i.join("\n\n"),this.pushCaption(t),t.startPts=e},Le.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},Le.prototype.displayWindows=function(e,t){var i=this.current708Packet.data,n=i[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var a=0;a<8;a++)n&1<<a&&(t.windows[a].visible=1);return e},Le.prototype.hideWindows=function(e,t){var i=this.current708Packet.data,n=i[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var a=0;a<8;a++)n&1<<a&&(t.windows[a].visible=0);return e},Le.prototype.toggleWindows=function(e,t){var i=this.current708Packet.data,n=i[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var a=0;a<8;a++)n&1<<a&&(t.windows[a].visible^=1);return e},Le.prototype.clearWindows=function(e,t){var i=this.current708Packet.data,n=i[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var a=0;a<8;a++)n&1<<a&&t.windows[a].clearText();return e},Le.prototype.deleteWindows=function(e,t){var i=this.current708Packet.data,n=i[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var a=0;a<8;a++)n&1<<a&&t.windows[a].reset();return e},Le.prototype.setPenAttributes=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.penAttr;return n=i[++e],r.textTag=(240&n)>>4,r.offset=(12&n)>>2,r.penSize=3&n,n=i[++e],r.italics=(128&n)>>7,r.underline=(64&n)>>6,r.edgeType=(56&n)>>3,r.fontStyle=7&n,e},Le.prototype.setPenColor=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.penColor;return n=i[++e],r.fgOpacity=(192&n)>>6,r.fgRed=(48&n)>>4,r.fgGreen=(12&n)>>2,r.fgBlue=3&n,n=i[++e],r.bgOpacity=(192&n)>>6,r.bgRed=(48&n)>>4,r.bgGreen=(12&n)>>2,r.bgBlue=3&n,n=i[++e],r.edgeRed=(48&n)>>4,r.edgeGreen=(12&n)>>2,r.edgeBlue=3&n,e},Le.prototype.setPenLocation=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,n=i[++e],r.row=15&n,n=i[++e],r.column=63&n,e},Le.prototype.reset=function(e,t){var i=this.getPts(e);return this.flushDisplayed(i,t),this.initService(t.serviceNum,e)};var Re={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ne=function(e){return null===e?"":(e=Re[e]||e,String.fromCharCode(e))},ze=14,Be=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ve=function(){var e=[],t=ze+1;while(t--)e.push("");return e},Fe=function e(t,i){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,r,a;if(t=32639&e.ccData,t!==this.lastControlCode_){if(4096===(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Ve();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ve();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Ve()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,r))n=(3&n)<<8,a=Ne(n|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),n=(3&n)<<8,a=Ne(n|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14===(14&r)&&this.addFormatting(e.pts,["i"]),1===(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var o=Be.indexOf(7968&t);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16===(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14===(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),a=Ne(n),a+=Ne(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};Fe.prototype=new N,Fe.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e){try{return e.trim()}catch(t){return console.error("Skipping malformed caption."),""}})).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Fe.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ve(),this.nonDisplayed_=Ve(),this.lastControlCode_=null,this.column_=0,this.row_=ze,this.rollUpRows_=2,this.formatting_=[]},Fe.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Fe.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Fe.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Fe.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Fe.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Fe.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Fe.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Fe.prototype.isNormalChar=function(e){return e>=32&&e<=127},Fe.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=ze,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Ve(),this.displayed_=Ve()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Fe.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,i)},Fe.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},Fe.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t,this.nonDisplayed_[this.row_]=i},Fe.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i},Fe.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<ze+1;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Fe.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i};var Ue={CaptionStream:Ee,Cea608Stream:Fe,Cea708Stream:Le},Ge={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},He=8589934592,We=4294967296,qe="shared",Ze=function(e,t){var i=1;e>t&&(i=-1);while(Math.abs(t-e)>We)e+=i*He;return e},Ye=function e(t){var i,n;e.prototype.init.call(this),this.type_=t||qe,this.push=function(e){this.type_!==qe&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=Ze(e.dts,n),e.pts=Ze(e.pts,n),i=e.dts,this.trigger("data",e))},this.flush=function(){n=i,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Ye.prototype=new N;var Xe,Ke={TimestampRolloverStream:Ye,handleRollover:Ze},$e=function(e,t,i){var n,r="";for(n=t;n<i;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r},Qe=function(e,t,i){return decodeURIComponent($e(e,t,i))},Je=function(e,t,i){return unescape($e(e,t,i))},et=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},tt={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Qe(e.data,1,t),e.value=Qe(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Qe(e.data,1,t),e.url=Qe(e.data,t+1,e.data.length);break}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=Je(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};Xe=function(e){var t,i={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},n=0,r=[],a=0;if(Xe.prototype.init.call(this),this.dispatchType=Ge.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(t=0;t<i.descriptor.length;t++)this.dispatchType+=("00"+i.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,o,s,l,c,u;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))i.debug&&console.log("Skipping unrecognized metadata packet");else if(r.push(e),a+=e.data.byteLength,1===r.length&&(n=et(e.data.subarray(6,10)),n+=10),!(a<n)){for(t={data:new Uint8Array(n),frames:[],pts:r[0].pts,dts:r[0].dts},c=0;c<n;)t.data.set(r[0].data.subarray(0,n-c),c),c+=r[0].data.byteLength,a-=r[0].data.byteLength,r.shift();o=10,64&t.data[5]&&(o+=4,o+=et(t.data.subarray(10,14)),n-=et(t.data.subarray(16,20)));do{if(s=et(t.data.subarray(o+4,o+8)),s<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if(u=String.fromCharCode(t.data[o],t.data[o+1],t.data[o+2],t.data[o+3]),l={id:u,data:t.data.subarray(o+10,o+s+10)},l.key=l.id,tt[l.id]&&(tt[l.id](l),"com.apple.streaming.transportStreamTimestamp"===l.owner)){var h=l.data,d=(1&h[3])<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;d*=4,d+=3&h[7],l.timeStamp=d,void 0===t.pts&&void 0===t.dts&&(t.pts=l.timeStamp,t.dts=l.timeStamp),this.trigger("timestamp",l)}t.frames.push(l),o+=10,o+=s}while(o<n);this.trigger("data",t)}}},Xe.prototype=new N;var it,nt,rt,at=Xe,ot=Ke.TimestampRolloverStream,st=188,lt=71;it=function(){var e=new Uint8Array(st),t=0;it.prototype.init.call(this),this.push=function(i){var n,r=0,a=st;t?(n=new Uint8Array(i.byteLength+t),n.set(e.subarray(0,t)),n.set(i,t),t=0):n=i;while(a<n.byteLength)n[r]!==lt||n[a]!==lt?(r++,a++):(this.trigger("data",n.subarray(r,a)),r+=st,a+=st);r<n.byteLength&&(e.set(n.subarray(r),0),t=n.byteLength-r)},this.flush=function(){t===st&&e[0]===lt&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}},it.prototype=new N,nt=function(){var e,t,i,n;nt.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,n){var r=0;n.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===n.type?t(e.subarray(r),n):i(e.subarray(r),n)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],n.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=n.pmtPid},i=function(e,t){var i,r,a,o;if(1&e[5]){n.programMapTable={video:null,audio:null,"timed-metadata":{}},i=(15&e[1])<<8|e[2],r=3+i-4,a=(15&e[10])<<8|e[11],o=12+a;while(o<r){var s=e[o],l=(31&e[o+1])<<8|e[o+2];s===Ge.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=l:s===Ge.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=l:s===Ge.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][l]=s),o+=5+((15&e[o+3])<<8|e[o+4])}t.programMapTable=n.programMapTable}},this.push=function(t){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&t[1]),i.pid=31&t[1],i.pid<<=8,i.pid|=t[2],(48&t[3])>>>4>1&&(n+=t[n]+1),0===i.pid)i.type="pat",e(t.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid){i.type="pmt",e(t.subarray(n),i),this.trigger("data",i);while(this.packetsWaitingForPmt.length)this.processPes_.apply(this,this.packetsWaitingForPmt.shift())}else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,i]):this.processPes_(t,n,i)},this.processPes_=function(e,t,i){i.pid===this.programMapTable.video?i.streamType=Ge.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=Ge.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}},nt.prototype=new N,nt.STREAM_TYPES={h264:27,adts:15},rt=function(){var e,t=this,i={data:[],size:0},n={data:[],size:0},r={data:[],size:0},a=function(e,t){var i,n=e[0]<<16|e[1]<<8|e[2];t.data=new Uint8Array,1===n&&(t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!==(4&e[6]),i=e[7],192&i&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&i&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8]))},o=function(e,i,n){var r,o=new Uint8Array(e.size),s={type:i},l=0,c=0,u=!1;if(e.data.length&&!(e.size<9)){for(s.trackId=e.data[0].pid,l=0;l<e.data.length;l++)r=e.data[l],o.set(r.data,c),c+=r.data.byteLength;a(o,s),u="video"===i||s.packetLength<=e.size,(n||u)&&(e.size=0,e.data.length=0),u&&t.trigger("data",s)}};rt.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var e,t;switch(a.streamType){case Ge.H264_STREAM_TYPE:e=i,t="video";break;case Ge.ADTS_STREAM_TYPE:e=n,t="audio";break;case Ge.METADATA_STREAM_TYPE:e=r,t="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&o(e,t,!0),e.data.push(a),e.size+=a.data.byteLength},pmt:function(){var i={type:"metadata",tracks:[]};e=a.programMapTable,null!==e.video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",i)}})[a.type]()},this.reset=function(){i.size=0,i.data.length=0,n.size=0,n.data.length=0,this.trigger("reset")},this.flushStreams_=function(){o(i,"video"),o(n,"audio"),o(r,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}},rt.prototype=new N;var ct={PAT_PID:0,MP2T_PACKET_LENGTH:st,TransportPacketStream:it,TransportParseStream:nt,ElementaryStream:rt,TimestampRolloverStream:ot,CaptionStream:Ue.CaptionStream,Cea608Stream:Ue.Cea608Stream,Cea708Stream:Ue.Cea708Stream,MetadataStream:at};for(var ut in Ge)Ge.hasOwnProperty(ut)&&(ct[ut]=Ge[ut]);var ht,dt=ct,pt=ue.ONE_SECOND_IN_TS,ft=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ht=function(e){var t,i=0;ht.prototype.init.call(this),this.push=function(n){var r,a,o,s,l,c,u=0;if(e||(i=0),"audio"===n.type){t?(s=t,t=new Uint8Array(s.byteLength+n.data.byteLength),t.set(s),t.set(n.data,s.byteLength)):t=n.data;while(u+5<t.length)if(255===t[u]&&240===(246&t[u+1])){if(a=2*(1&~t[u+1]),r=(3&t[u+3])<<11|t[u+4]<<3|(224&t[u+5])>>5,l=1024*(1+(3&t[u+6])),c=l*pt/ft[(60&t[u+2])>>>2],o=u+r,t.byteLength<o)return;if(this.trigger("data",{pts:n.pts+i*c,dts:n.dts+i*c,sampleCount:l,audioobjecttype:1+(t[u+2]>>>6&3),channelcount:(1&t[u+2])<<2|(192&t[u+3])>>>6,samplerate:ft[(60&t[u+2])>>>2],samplingfrequencyindex:(60&t[u+2])>>>2,samplesize:16,data:t.subarray(u+7+a,o)}),i++,t.byteLength===o)return void(t=void 0);t=t.subarray(o)}else u++}},this.flush=function(){i=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},ht.prototype=new N;var mt,gt=ht;mt=function(e){var t=e.byteLength,i=0,n=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+n},this.loadWord=function(){var r=e.byteLength-t,a=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");a.set(e.subarray(r,r+o)),i=new DataView(a.buffer).getUint32(0),n=8*o,t-=o},this.skipBits=function(e){var r;n>e?(i<<=e,n-=e):(e-=n,r=Math.floor(e/8),e-=8*r,t-=r,this.loadWord(),i<<=e,n-=e)},this.readBits=function(e){var r=Math.min(n,e),a=i>>>32-r;return n-=r,n>0?i<<=r:t>0&&this.loadWord(),r=e-r,r>0?a<<r|this.readBits(r):a},this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e)if(0!==(i&2147483648>>>e))return i<<=e,n-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var vt,yt,_t,bt=mt;yt=function(){var e,t,i=0;yt.prototype.init.call(this),this.push=function(n){var r;t?(r=new Uint8Array(t.byteLength+n.data.byteLength),r.set(t),r.set(n.data,t.byteLength),t=r):t=n.data;for(var a=t.byteLength;i<a-3;i++)if(1===t[i+2]){e=i+5;break}while(e<a)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}i+3!==e-2&&this.trigger("data",t.subarray(i+3,e-2));do{e++}while(1!==t[e]&&e<a);i=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(i+3,e-2)),i=e-2,e+=3;break;default:e+=3;break}t=t.subarray(i),e-=i,i=0},this.reset=function(){t=null,i=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(i+3)),t=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},yt.prototype=new N,_t={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},vt=function(){var e,t,i,n,r,a,o,s=new yt;vt.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,i=e.pts,n=e.dts,s.push(e))},s.on("data",(function(o){var s={trackId:t,pts:i,dts:n,data:o};switch(31&o[0]){case 5:s.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:s.nalUnitType="sei_rbsp",s.escapedRBSP=r(o.subarray(1));break;case 7:s.nalUnitType="seq_parameter_set_rbsp",s.escapedRBSP=r(o.subarray(1)),s.config=a(s.escapedRBSP);break;case 8:s.nalUnitType="pic_parameter_set_rbsp";break;case 9:s.nalUnitType="access_unit_delimiter_rbsp";break}e.trigger("data",s)})),s.on("done",(function(){e.trigger("done")})),s.on("partialdone",(function(){e.trigger("partialdone")})),s.on("reset",(function(){e.trigger("reset")})),s.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){s.flush()},this.partialFlush=function(){s.partialFlush()},this.reset=function(){s.reset()},this.endTimeline=function(){s.endTimeline()},o=function(e,t){var i,n,r=8,a=8;for(i=0;i<e;i++)0!==a&&(n=t.readExpGolomb(),a=(r+n+256)%256),r=0===a?r:a},r=function(e){var t,i,n=e.byteLength,r=[],a=1;while(a<n-2)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===r[0]&&(o++,r.shift()),i[a]=e[o];return i},a=function(e){var t,i,n,r,a,s,l,c,u,h,d,p,f,m,g=0,v=0,y=0,_=0,b=1;if(t=new bt(e),i=t.readUnsignedByte(),r=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),_t[i]&&(a=t.readUnsignedExpGolomb(),3===a&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(d=3!==a?8:12,m=0;m<d;m++)t.readBoolean()&&o(m<6?16:64,t);if(t.skipUnsignedExpGolomb(),s=t.readUnsignedExpGolomb(),0===s)t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),m=0;m<l;m++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),c=t.readUnsignedExpGolomb(),u=t.readUnsignedExpGolomb(),h=t.readBits(1),0===h&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(g=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb(),_=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(f=t.readUnsignedByte(),f){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()];break}p&&(b=p[0]/p[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:r,width:Math.ceil((16*(c+1)-2*g-2*v)*b),height:(2-h)*(u+1)*16-2*y-2*_,sarRatio:p}}},vt.prototype=new N;var xt,wt={H264Stream:vt,NalByteStream:yt},Tt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],St=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],n=e[t+5],r=(16&n)>>4;return i=i>=0?i:0,r?i+20:i+10},Ot=function e(t,i){return t.length-i<10||t[i]!=="I".charCodeAt(0)||t[i+1]!=="D".charCodeAt(0)||t[i+2]!=="3".charCodeAt(0)?i:(i+=St(t,i),e(t,i))},Ct=function(e){var t=Ot(e,0);return e.length>=t+2&&255===(255&e[t])&&240===(240&e[t+1])&&16===(22&e[t+1])},kt=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Pt=function(e,t,i){var n,r="";for(n=t;n<i;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r},Et=function(e,t,i){return unescape(Pt(e,t,i))},At=function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3,r=6144&e[t+3];return r|n|i},It=function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240===(240&e[t+1])?"audio":null},Mt=function(e){var t=0;while(t+5<e.length){if(255===e[t]&&240===(246&e[t+1]))return Tt[(60&e[t+2])>>>2];t++}return null},Dt=function(e){var t,i,n,r;t=10,64&e[5]&&(t+=4,t+=kt(e.subarray(10,14)));do{if(i=kt(e.subarray(t+4,t+8)),i<1)return null;if(r=String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3]),"PRIV"===r){n=e.subarray(t+10,t+i+10);for(var a=0;a<n.byteLength;a++)if(0===n[a]){var o=Et(n,0,a);if("com.apple.streaming.transportStreamTimestamp"===o){var s=n.subarray(a+1),l=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return l*=4,l+=3&s[7],l}break}}t+=10,t+=i}while(t<e.byteLength);return null},jt={isLikelyAacData:Ct,parseId3TagSize:St,parseAdtsSize:At,parseType:It,parseSampleRate:Mt,parseAacTimestamp:Dt};xt=function(){var e=new Uint8Array,t=0;xt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(i){var n,r,a,o,s=0,l=0;e.length?(o=e.length,e=new Uint8Array(i.byteLength+o),e.set(e.subarray(0,o)),e.set(i,o)):e=i;while(e.length-l>=3)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(255!==(255&e[l])||240!==(240&e[l+1]))l++;else{if(e.length-l<7)break;if(s=jt.parseAdtsSize(e,l),l+s>e.length)break;a={type:"audio",data:e.subarray(l,l+s),pts:t,dts:t},this.trigger("data",a),l+=s}else{if(e.length-l<10)break;if(s=jt.parseId3TagSize(e,l),l+s>e.length)break;r={type:"timed-metadata",data:e.subarray(l,l+s)},this.trigger("data",r),l+=s}n=e.length-l,e=n>0?e.subarray(l):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}},xt.prototype=new N;var Lt,Rt,Nt,zt,Bt=xt,Vt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ft=Vt,Ut=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Gt=Ut,Ht=wt.H264Stream,Wt=jt.isLikelyAacData,qt=ue.ONE_SECOND_IN_TS,Zt=function(e,t){var i;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},Yt=function(e,t,i,n,r,a){var o=i-t,s=n-t,l=r-i;return{start:{dts:e,pts:e+o},end:{dts:e+s,pts:e+l},prependedContentDuration:a,baseMediaDecodeTime:e}};Rt=function(e,t){var i=[],n=0,r=0,a=0,o=1/0;t=t||{},Rt.prototype.init.call(this),this.push=function(t){xe.collectDtsInfo(e,t),e&&Ft.forEach((function(i){e[i]=t[i]})),i.push(t)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var s,l,c,u,h,d,p;0!==i.length?(s=ge.trimAdtsFramesByEarliestDts(i,e,r),e.baseMediaDecodeTime=xe.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),p=ge.prefixWithSilence(e,s,a,o),e.samples=ge.generateSampleTable(s),c=Z.mdat(ge.concatenateFrameData(s)),i=[],l=Z.moof(n,[e]),u=new Uint8Array(l.byteLength+c.byteLength),n++,u.set(l),u.set(c,l.byteLength),xe.clearDtsInfo(e),h=Math.ceil(1024*qt/e.samplerate),s.length&&(d=s.length*h,this.trigger("segmentTimingInfo",Yt(ue.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),s[0].dts,s[0].pts,s[0].dts+d,s[0].pts+d,p||0)),this.trigger("timingInfo",{start:s[0].pts,end:s[0].pts+d})),this.trigger("data",{track:e,boxes:u}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){xe.clearDtsInfo(e),i=[],this.trigger("reset")}},Rt.prototype=new N,Lt=function(e,t){var i,n,r=0,a=[],o=[];t=t||{},Lt.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){xe.collectDtsInfo(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],Gt.forEach((function(t){e[t]=i[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){var i,n,s,l,c,u,h,d,p=0;while(a.length){if("access_unit_delimiter_rbsp"===a[0].nalUnitType)break;a.shift()}if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=ne.groupNalsIntoFrames(a),s=ne.groupFramesIntoGops(i),s[0][0].keyFrame||(n=this.getGopForFusion_(a[0],e),n?(p=n.duration,s.unshift(n),s.byteLength+=n.byteLength,s.nalCount+=n.nalCount,s.pts=n.pts,s.dts=n.dts,s.duration+=n.duration):s=ne.extendFirstKeyFrame(s)),o.length){var f;if(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(s):this.alignGopsAtStart_(s),!f)return this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");xe.clearDtsInfo(e),s=f}xe.collectDtsInfo(e,s),e.samples=ne.generateSampleTable(s),c=Z.mdat(ne.concatenateNalData(s)),e.baseMediaDecodeTime=xe.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",s.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),h=s[0],d=s[s.length-1],this.trigger("segmentTimingInfo",Yt(e.baseMediaDecodeTime,h.dts,h.pts,d.dts+d.duration,d.pts+d.duration,p)),this.trigger("timingInfo",{start:s[0].pts,end:s[s.length-1].pts+s[s.length-1].duration}),this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=Z.moof(r,[e]),u=new Uint8Array(l.byteLength+c.byteLength),r++,u.set(l),u.set(c,l.byteLength),this.trigger("data",{track:e,boxes:u}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,o.length=0,this.trigger("reset")},this.resetStream_=function(){xe.clearDtsInfo(e),i=void 0,n=void 0},this.getGopForFusion_=function(t){var i,n,r,a,o,s=45e3,l=1e4,c=1/0;for(o=0;o<this.gopCache_.length;o++)a=this.gopCache_[o],r=a.gop,e.pps&&Zt(e.pps[0],a.pps[0])&&e.sps&&Zt(e.sps[0],a.sps[0])&&(r.dts<e.timelineStartInfo.dts||(i=t.dts-r.dts-r.duration,i>=-l&&i<=s&&(!n||c>i)&&(n=a,c=i)));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,i,n,r,a,s,l,c;a=e.byteLength,s=e.nalCount,l=e.duration,t=i=0;while(t<o.length&&i<e.length){if(n=o[t],r=e[i],n.pts===r.pts)break;r.pts>n.pts?t++:(i++,a-=r.byteLength,s-=r.nalCount,l-=r.duration)}return 0===i?e:i===e.length?null:(c=e.slice(i),c.byteLength=a,c.duration=l,c.nalCount=s,c.pts=c[0].pts,c.dts=c[0].dts,c)},this.alignGopsAtEnd_=function(e){var t,i,n,r,a,s,l;t=o.length-1,i=e.length-1,a=null,s=!1;while(t>=0&&i>=0){if(n=o[t],r=e[i],n.pts===r.pts){s=!0;break}n.pts>r.pts?t--:(t===o.length-1&&(a=i),i--)}if(!s&&null===a)return null;if(l=s?i:a,0===l)return e;var c=e.slice(l),u=c.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return c.byteLength=u.byteLength,c.duration=u.duration,c.nalCount=u.nalCount,c.pts=c[0].pts,c.dts=c[0].dts,c},this.alignGopsWith=function(e){o=e}},Lt.prototype=new N,zt=function(e,t){this.numberOfTracks=0,this.metadataStream=t,e=e||{},"undefined"!==typeof e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"===typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,zt.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},zt.prototype=new N,zt.prototype.flush=function(e){var t,i,n,r,a=0,o={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,Gt.forEach((function(e){o.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,Ft.forEach((function(e){o.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,n=Z.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(n.byteLength),o.initSegment.set(n),o.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)o.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)t=this.pendingCaptions[r],t.startTime=ue.metadataTsToSeconds(t.startPts,s,this.keepOriginalTimestamps),t.endTime=ue.metadataTsToSeconds(t.endPts,s,this.keepOriginalTimestamps),o.captionStreams[t.stream]=!0,o.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)i=this.pendingMetadata[r],i.cueTime=ue.metadataTsToSeconds(i.pts,s,this.keepOriginalTimestamps),o.metadata.push(i);for(o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),r=0;r<o.captions.length;r++)t=o.captions[r],this.trigger("caption",t);for(r=0;r<o.metadata.length;r++)i=o.metadata[r],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},zt.prototype.setRemux=function(e){this.remuxTracks=e},Nt=function(e){var t,i,n=this,r=!0;Nt.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new dt.MetadataStream,r.aacStream=new Bt,r.audioTimestampRolloverStream=new dt.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new dt.TimestampRolloverStream("timed-metadata"),r.adtsStream=new gt,r.coalesceStream=new zt(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(e){r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on("data",(function(a){"timed-metadata"!==a.type&&"audio"!==a.type||r.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new Rt(i,e),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!t}))})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new dt.MetadataStream,r.packetStream=new dt.TransportPacketStream,r.parseStream=new dt.TransportParseStream,r.elementaryStream=new dt.ElementaryStream,r.timestampRolloverStream=new dt.TimestampRolloverStream,r.adtsStream=new gt,r.h264Stream=new Ht,r.captionStream=new dt.CaptionStream(e),r.coalesceStream=new zt(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(a){var o;if("metadata"===a.type){o=a.tracks.length;while(o--)t||"video"!==a.tracks[o].type?i||"audio"!==a.tracks[o].type||(i=a.tracks[o],i.timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=a.tracks[o],t.timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime);t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new Lt(t,e),r.videoSegmentStream.on("timelineStartInfo",(function(t){i&&!e.keepOriginalTimestamps&&(i.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-n.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(e){i&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on("timingInfo",n.trigger.bind(n,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new Rt(i,e),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!t})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(e){e.dispatchType=r.metadataStream.dispatchType,n.trigger("id3Frame",e)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(n){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=n),i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,xe.clearDtsInfo(i),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,xe.clearDtsInfo(t),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var i=this.transmuxPipeline_;e.remux=t,i&&i.coalesceStream&&i.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(r){var t=Wt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Nt.prototype=new N;var Xt,Kt,$t,Qt,Jt,ei,ti={Transmuxer:Nt,VideoSegmentStream:Lt,AudioSegmentStream:Rt,AUDIO_PROPERTIES:Ft,VIDEO_PROPERTIES:Gt,generateSegmentTimingInfo:Yt},ii=function(e){return e>>>0},ni=function(e){return("00"+e.toString(16)).slice(-2)},ri={toUnsigned:ii,toHexString:ni},ai=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3]),t},oi=ai,si=ri.toUnsigned,li=function e(t,i){var n,r,a,o,s,l=[];if(!i.length)return null;for(n=0;n<t.byteLength;)r=si(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),a=oi(t.subarray(n+4,n+8)),o=r>1?n+r:t.byteLength,a===i[0]&&(1===i.length?l.push(t.subarray(n+8,o)):(s=e(t.subarray(n+8,o),i.slice(1)),s.length&&(l=l.concat(s)))),n=o;return l},ci=li,ui=ri.toUnsigned,hi=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:ui(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=ui(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t},di=hi,pi=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},fi=pi,mi=function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&i.flags[2],a=4&i.flags[2],o=1&i.flags[1],s=2&i.flags[1],l=4&i.flags[1],c=8&i.flags[1],u=n.getUint32(4),h=8;r&&(i.dataOffset=n.getInt32(h),h+=4),a&&u&&(t={flags:fi(e.subarray(h,h+4))},h+=4,o&&(t.duration=n.getUint32(h),h+=4),s&&(t.size=n.getUint32(h),h+=4),c&&(1===i.version?t.compositionTimeOffset=n.getInt32(h):t.compositionTimeOffset=n.getUint32(h),h+=4),i.samples.push(t),u--);while(u--)t={},o&&(t.duration=n.getUint32(h),h+=4),s&&(t.size=n.getUint32(h),h+=4),l&&(t.flags=fi(e.subarray(h,h+4)),h+=4),c&&(1===i.version?t.compositionTimeOffset=n.getInt32(h):t.compositionTimeOffset=n.getUint32(h),h+=4),i.samples.push(t);return i},gi=mi,vi=function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:i.getUint32(4)},r=1&n.flags[2],a=2&n.flags[2],o=8&n.flags[2],s=16&n.flags[2],l=32&n.flags[2],c=65536&n.flags[0],u=131072&n.flags[0];return t=8,r&&(t+=4,n.baseDataOffset=i.getUint32(12),t+=4),a&&(n.sampleDescriptionIndex=i.getUint32(t),t+=4),o&&(n.defaultSampleDuration=i.getUint32(t),t+=4),s&&(n.defaultSampleSize=i.getUint32(t),t+=4),l&&(n.defaultSampleFlags=i.getUint32(t)),c&&(n.durationIsEmpty=!0),!r&&u&&(n.baseDataOffsetIsMoof=!0),n},yi=vi,_i=Pe.discardEmulationPreventionBytes,bi=Ue.CaptionStream,xi=function(e,t){for(var i=e,n=0;n<t.length;n++){var r=t[n];if(i<r.size)return r;i-=r.size}return null},wi=function(e,t,i){var n,r,a,o,s=new DataView(e.buffer,e.byteOffset,e.byteLength),l=[];for(r=0;r+4<e.length;r+=a)if(a=s.getUint32(r),r+=4,!(a<=0))switch(31&e[r]){case 6:var c=e.subarray(r+1,r+1+a),u=xi(r,t);if(n={nalUnitType:"sei_rbsp",size:a,data:c,escapedRBSP:_i(c),trackId:i},u)n.pts=u.pts,n.dts=u.dts,o=u;else{if(!o){console.log("We've encountered a nal unit without data. See mux.js#233.");break}n.pts=o.pts,n.dts=o.dts}l.push(n);break}return l},Ti=function(e,t,i){var n=t,r=i.defaultSampleDuration||0,a=i.defaultSampleSize||0,o=i.trackId,s=[];return e.forEach((function(e){var t=gi(e),i=t.samples;i.forEach((function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=o,e.dts=n,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=n+e.compositionTimeOffset,n+=e.duration})),s=s.concat(i)})),s},Si=function(e,t){var i=ci(e,["moof","traf"]),n=ci(e,["mdat"]),r={},a=[];return n.forEach((function(e,t){var n=i[t];a.push({mdat:e,traf:n})})),a.forEach((function(e){var i,n,a=e.mdat,o=e.traf,s=ci(o,["tfhd"]),l=yi(s[0]),c=l.trackId,u=ci(o,["tfdt"]),h=u.length>0?di(u[0]).baseMediaDecodeTime:0,d=ci(o,["trun"]);t===c&&d.length>0&&(i=Ti(d,h,l),n=wi(a,i,c),r[c]||(r[c]=[]),r[c]=r[c].concat(n))})),r},Oi=function(e,t,i){var n;return null===t?null:(n=Si(e,t),{seiNals:n[t],timescale:i})},Ci=function(){var e,t,i,n,r,a,o=!1;this.isInitialized=function(){return o},this.init=function(t){e=new bi,o=!0,a=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/n,e.endTime=e.endPts/n,r.captions.push(e),r.captionStreams[e.stream]=!0}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"===typeof t&&0===Object.keys(t).length)&&(i!==e[0]||n!==t[i])},this.parse=function(e,a,o){var s;if(!this.isInitialized())return null;if(!a||!o)return null;if(this.isNewInit(a,o))i=a[0],n=o[i];else if(null===i||!n)return t.push(e),null;while(t.length>0){var l=t.shift();this.parse(l,a,o)}return s=Oi(e,i,n),null!==s&&s.seiNals?(this.pushNals(s.seiNals),this.flushStream(),r):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],i=null,n=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},ki=Ci,Pi=ri.toUnsigned,Ei=ri.toHexString;Xt=function(e){var t={},i=ci(e,["moov","trak"]);return i.reduce((function(e,t){var i,n,r,a,o;return i=ci(t,["tkhd"])[0],i?(n=i[0],r=0===n?12:20,a=Pi(i[r]<<24|i[r+1]<<16|i[r+2]<<8|i[r+3]),o=ci(t,["mdia","mdhd"])[0],o?(n=o[0],r=0===n?12:20,e[a]=Pi(o[r]<<24|o[r+1]<<16|o[r+2]<<8|o[r+3]),e):null):null}),t)},Kt=function(e,t){var i,n,r;return i=ci(t,["moof","traf"]),n=[].concat.apply([],i.map((function(t){return ci(t,["tfhd"]).map((function(i){var n,r,a;return n=Pi(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),r=e[n]||9e4,a=ci(t,["tfdt"]).map((function(e){var t,i;return t=e[0],i=Pi(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(i*=Math.pow(2,32),i+=Pi(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),i}))[0],a="number"!==typeof a||isNaN(a)?1/0:a,a/r}))}))),r=Math.min.apply(null,n),isFinite(r)?r:0},$t=function(e,t){var i,n=ci(t,["moof","traf"]),r=0,a=0;if(n&&n.length){var o=ci(n[0],["tfhd"])[0],s=ci(n[0],["trun"])[0],l=ci(n[0],["tfdt"])[0];if(o){var c=yi(o);i=c.trackId}if(l){var u=di(l);r=u.baseMediaDecodeTime}if(s){var h=gi(s);h.samples&&h.samples.length&&(a=h.samples[0].compositionTimeOffset||0)}}var d=e[i]||9e4;return(r+a)/d},Qt=function(e){var t=ci(e,["moov","trak"]),i=[];return t.forEach((function(e){var t=ci(e,["mdia","hdlr"]),n=ci(e,["tkhd"]);t.forEach((function(e,t){var r,a,o,s=oi(e.subarray(8,12)),l=n[t];"vide"===s&&(r=new DataView(l.buffer,l.byteOffset,l.byteLength),a=r.getUint8(0),o=0===a?r.getUint32(12):r.getUint32(20),i.push(o))}))})),i},ei=function(e){var t=e[0],i=0===t?12:20;return Pi(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3])},Jt=function(e){var t=ci(e,["moov","trak"]),i=[];return t.forEach((function(e){var t,n,r={},a=ci(e,["tkhd"])[0];a&&(t=new DataView(a.buffer,a.byteOffset,a.byteLength),n=t.getUint8(0),r.id=0===n?t.getUint32(12):t.getUint32(20));var o=ci(e,["mdia","hdlr"])[0];if(o){var s=oi(o.subarray(8,12));r.type="vide"===s?"video":"soun"===s?"audio":s}var l=ci(e,["mdia","minf","stbl","stsd"])[0];if(l){var c=l.subarray(8);r.codec=oi(c.subarray(4,8));var u,h,d=ci(c,[r.codec])[0];d&&(/^[a-z]vc[1-9]$/i.test(r.codec)?(u=d.subarray(78),h=oi(u.subarray(4,8)),"avcC"===h&&u.length>11?(r.codec+=".",r.codec+=Ei(u[9]),r.codec+=Ei(u[10]),r.codec+=Ei(u[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(u=d.subarray(28),h=oi(u.subarray(4,8)),"esds"===h&&u.length>20&&0!==u[19]?(r.codec+="."+Ei(u[19]),r.codec+="."+Ei(u[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var p=ci(e,["mdia","mdhd"])[0];p&&(r.timescale=ei(p)),i.push(r)})),i};var Ai={findBox:ci,parseType:oi,timescale:Xt,startTime:Kt,compositionStartTime:$t,videoTrackIds:Qt,tracks:Jt,getTimescaleFromMediaHeader:ei},Ii=function(e){var t=31&e[1];return t<<=8,t|=e[2],t},Mi=function(e){return!!(64&e[1])},Di=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},ji=function(e,t){var i=Ii(e);return 0===i?"pat":i===t?"pmt":t?"pes":null},Li=function(e){var t=Mi(e),i=4+Di(e);return t&&(i+=e[i]+1),(31&e[i+10])<<8|e[i+11]},Ri=function(e){var t={},i=Mi(e),n=4+Di(e);if(i&&(n+=e[n]+1),1&e[n+5]){var r,a,o;r=(15&e[n+1])<<8|e[n+2],a=3+r-4,o=(15&e[n+10])<<8|e[n+11];var s=12+o;while(s<a){var l=n+s;t[(31&e[l+1])<<8|e[l+2]]=e[l],s+=5+((15&e[l+3])<<8|e[l+4])}return t}},Ni=function(e,t){var i=Ii(e),n=t[i];switch(n){case Ge.H264_STREAM_TYPE:return"video";case Ge.ADTS_STREAM_TYPE:return"audio";case Ge.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},zi=function(e){var t=Mi(e);if(!t)return null;var i=4+Di(e);if(i>=e.byteLength)return null;var n,r=null;return n=e[i+7],192&n&&(r={},r.pts=(14&e[i+9])<<27|(255&e[i+10])<<20|(254&e[i+11])<<12|(255&e[i+12])<<5|(254&e[i+13])>>>3,r.pts*=4,r.pts+=(6&e[i+13])>>>1,r.dts=r.pts,64&n&&(r.dts=(14&e[i+14])<<27|(255&e[i+15])<<20|(254&e[i+16])<<12|(255&e[i+17])<<5|(254&e[i+18])>>>3,r.dts*=4,r.dts+=(6&e[i+18])>>>1)),r},Bi=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Vi=function(e){for(var t,i=4+Di(e),n=e.subarray(i),r=0,a=0,o=!1;a<n.byteLength-3;a++)if(1===n[a+2]){r=a+5;break}while(r<n.byteLength)switch(n[r]){case 0:if(0!==n[r-1]){r+=2;break}if(0!==n[r-2]){r++;break}a+3!==r-2&&(t=Bi(31&n[a+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(o=!0));do{r++}while(1!==n[r]&&r<n.length);a=r-2,r+=3;break;case 1:if(0!==n[r-1]||0!==n[r-2]){r+=3;break}t=Bi(31&n[a+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(o=!0),a=r-2,r+=3;break;default:r+=3;break}return n=n.subarray(a),r-=a,a=0,n&&n.byteLength>3&&(t=Bi(31&n[a+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(o=!0)),o},Fi={parseType:ji,parsePat:Li,parsePmt:Ri,parsePayloadUnitStartIndicator:Mi,parsePesType:Ni,parsePesTime:zi,videoPacketContainsKeyFrame:Vi},Ui=Ke.handleRollover,Gi={};Gi.ts=Fi,Gi.aac=jt;var Hi=ue.ONE_SECOND_IN_TS,Wi=188,qi=71,Zi=function(e,t){var i,n,r=0,a=Wi;while(a<e.byteLength)if(e[r]!==qi||e[a]!==qi)r++,a++;else{switch(i=e.subarray(r,a),n=Gi.ts.parseType(i,t.pid),n){case"pat":t.pid||(t.pid=Gi.ts.parsePat(i));break;case"pmt":t.table||(t.table=Gi.ts.parsePmt(i));break}if(t.pid&&t.table)return;r+=Wi,a+=Wi}},Yi=function(e,t,i){var n,r,a,o,s,l=0,c=Wi,u=!1;while(c<=e.byteLength)if(e[l]!==qi||e[c]!==qi&&c!==e.byteLength)l++,c++;else{switch(n=e.subarray(l,c),r=Gi.ts.parseType(n,t.pid),r){case"pes":a=Gi.ts.parsePesType(n,t.table),o=Gi.ts.parsePayloadUnitStartIndicator(n),"audio"===a&&o&&(s=Gi.ts.parsePesTime(n),s&&(s.type="audio",i.audio.push(s),u=!0));break}if(u)break;l+=Wi,c+=Wi}c=e.byteLength,l=c-Wi,u=!1;while(l>=0)if(e[l]!==qi||e[c]!==qi&&c!==e.byteLength)l--,c--;else{switch(n=e.subarray(l,c),r=Gi.ts.parseType(n,t.pid),r){case"pes":a=Gi.ts.parsePesType(n,t.table),o=Gi.ts.parsePayloadUnitStartIndicator(n),"audio"===a&&o&&(s=Gi.ts.parsePesTime(n),s&&(s.type="audio",i.audio.push(s),u=!0));break}if(u)break;l-=Wi,c-=Wi}},Xi=function(e,t,i){var n,r,a,o,s,l,c,u,h=0,d=Wi,p=!1,f={data:[],size:0};while(d<e.byteLength)if(e[h]!==qi||e[d]!==qi)h++,d++;else{switch(n=e.subarray(h,d),r=Gi.ts.parseType(n,t.pid),r){case"pes":if(a=Gi.ts.parsePesType(n,t.table),o=Gi.ts.parsePayloadUnitStartIndicator(n),"video"===a&&(o&&!p&&(s=Gi.ts.parsePesTime(n),s&&(s.type="video",i.video.push(s),p=!0)),!i.firstKeyFrame)){if(o&&0!==f.size){l=new Uint8Array(f.size),c=0;while(f.data.length)u=f.data.shift(),l.set(u,c),c+=u.byteLength;if(Gi.ts.videoPacketContainsKeyFrame(l)){var m=Gi.ts.parsePesTime(l);m?(i.firstKeyFrame=m,i.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}f.size=0}f.data.push(n),f.size+=n.byteLength}break}if(p&&i.firstKeyFrame)break;h+=Wi,d+=Wi}d=e.byteLength,h=d-Wi,p=!1;while(h>=0)if(e[h]!==qi||e[d]!==qi)h--,d--;else{switch(n=e.subarray(h,d),r=Gi.ts.parseType(n,t.pid),r){case"pes":a=Gi.ts.parsePesType(n,t.table),o=Gi.ts.parsePayloadUnitStartIndicator(n),"video"===a&&o&&(s=Gi.ts.parsePesTime(n),s&&(s.type="video",i.video.push(s),p=!0));break}if(p)break;h-=Wi,d-=Wi}},Ki=function(e,t){if(e.audio&&e.audio.length){var i=t;("undefined"===typeof i||isNaN(i))&&(i=e.audio[0].dts),e.audio.forEach((function(e){e.dts=Ui(e.dts,i),e.pts=Ui(e.pts,i),e.dtsTime=e.dts/Hi,e.ptsTime=e.pts/Hi}))}if(e.video&&e.video.length){var n=t;if(("undefined"===typeof n||isNaN(n))&&(n=e.video[0].dts),e.video.forEach((function(e){e.dts=Ui(e.dts,n),e.pts=Ui(e.pts,n),e.dtsTime=e.dts/Hi,e.ptsTime=e.pts/Hi})),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=Ui(r.dts,n),r.pts=Ui(r.pts,n),r.dtsTime=r.dts/Hi,r.ptsTime=r.pts/Hi}}},$i=function(e){var t,i=!1,n=0,r=null,a=null,o=0,s=0;while(e.length-s>=3){var l=Gi.aac.parseType(e,s);switch(l){case"timed-metadata":if(e.length-s<10){i=!0;break}if(o=Gi.aac.parseId3TagSize(e,s),o>e.length){i=!0;break}null===a&&(t=e.subarray(s,s+o),a=Gi.aac.parseAacTimestamp(t)),s+=o;break;case"audio":if(e.length-s<7){i=!0;break}if(o=Gi.aac.parseAdtsSize(e,s),o>e.length){i=!0;break}null===r&&(t=e.subarray(s,s+o),r=Gi.aac.parseSampleRate(t)),n++,s+=o;break;default:s++;break}if(i)return null}if(null===r||null===a)return null;var c=Hi/r,u={audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*n*c,pts:a+1024*n*c}]};return u},Qi=function(e){var t={pid:null,table:null},i={};for(var n in Zi(e,t),t.table)if(t.table.hasOwnProperty(n)){var r=t.table[n];switch(r){case Ge.H264_STREAM_TYPE:i.video=[],Xi(e,t,i),0===i.video.length&&delete i.video;break;case Ge.ADTS_STREAM_TYPE:i.audio=[],Yi(e,t,i),0===i.audio.length&&delete i.audio;break}}return i},Ji=function(e,t){var i,n=Gi.aac.isLikelyAacData(e);return i=n?$i(e):Qi(e),i&&(i.audio||i.video)?(Ki(i,t),i):null},en={inspect:Ji,parseAudioPes_:Yi},tn=function(e,t){t.on("data",(function(t){var i=t.initSegment;t.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};var n=t.data;t.data=n.buffer,e.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){var i={start:{decode:ue.videoTsToSeconds(t.start.dts),presentation:ue.videoTsToSeconds(t.start.pts)},end:{decode:ue.videoTsToSeconds(t.end.dts),presentation:ue.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:ue.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(i.prependedContentDuration=ue.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:i})})),t.on("audioSegmentTimingInfo",(function(t){var i={start:{decode:ue.videoTsToSeconds(t.start.dts),presentation:ue.videoTsToSeconds(t.start.pts)},end:{decode:ue.videoTsToSeconds(t.end.dts),presentation:ue.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:ue.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(i.prependedContentDuration=ue.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:i})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:ue.videoTsToSeconds(t.start),end:ue.videoTsToSeconds(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:ue.videoTsToSeconds(t.start),end:ue.videoTsToSeconds(t.end)}})}))},nn=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new ti.Transmuxer(this.options),tn(this.self,this.transmuxer)},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new ki,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),i=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:i&&i.captions||[],data:t.buffer},[t.buffer])},t.probeMp4StartTime=function(e){var t=e.timescales,i=e.data,n=Ai.startTime(t,i);this.self.postMessage({action:"probeMp4StartTime",startTime:n,data:i},[i.buffer])},t.probeMp4Tracks=function(e){var t=e.data,i=Ai.tracks(t);this.self.postMessage({action:"probeMp4Tracks",tracks:i,data:t},[t.buffer])},t.probeTs=function(e){var t=e.data,i=e.baseStartTime,n="number"!==typeof i||isNaN(i)?void 0:i*ue.ONE_SECOND_IN_TS,r=en.inspect(t,n),a=null;r&&(a={hasVideo:r.video&&2===r.video.length||!1,hasAudio:r.audio&&2===r.audio.length||!1},a.hasVideo&&(a.videoStart=r.video[0].ptsTime),a.hasAudio&&(a.audioStart=r.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:a,data:t},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(ue.secondsToVideoTs(t)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(ue.secondsToVideoTs(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new nn(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new nn(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}))),g_=d_(m_),v_=function(e,t,i){var n=e.data.segment,r=n.type,a=n.initSegment,o=n.captions,s=n.captionStreams,l=n.metadata,c=n.videoFrameDtsTime,u=n.videoFramePtsTime;t.buffer.push({captions:o,captionStreams:s,metadata:l});var h=e.data.segment.boxes||{data:e.data.segment.data},d={type:r,data:new Uint8Array(h.data,h.data.byteOffset,h.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};"undefined"!==typeof c&&(d.videoFrameDtsTime=c),"undefined"!==typeof u&&(d.videoFramePtsTime=u),i(d)},y_=function(e){var t=e.transmuxedData,i=e.callback;t.buffer=[],i(t)},__=function(e,t){t.gopInfo=e.data.gopInfo},b_=function(e){var t=e.transmuxer,i=e.bytes,n=e.audioAppendStart,r=e.gopsToAlignWith,a=e.remux,o=e.onData,s=e.onTrackInfo,l=e.onAudioTimingInfo,c=e.onVideoTimingInfo,u=e.onVideoSegmentTimingInfo,h=e.onAudioSegmentTimingInfo,d=e.onId3,p=e.onCaptions,f=e.onDone,m=e.onEndedTimeline,g=e.isEndOfTimeline,v={buffer:[]},y=g,_=function(i){t.currentTransmux===e&&("data"===i.data.action&&v_(i,v,o),"trackinfo"===i.data.action&&s(i.data.trackInfo),"gopInfo"===i.data.action&&__(i,v),"audioTimingInfo"===i.data.action&&l(i.data.audioTimingInfo),"videoTimingInfo"===i.data.action&&c(i.data.videoTimingInfo),"videoSegmentTimingInfo"===i.data.action&&u(i.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===i.data.action&&h(i.data.audioSegmentTimingInfo),"id3Frame"===i.data.action&&d([i.data.id3Frame],i.data.id3Frame.dispatchType),"caption"===i.data.action&&p(i.data.caption),"endedtimeline"===i.data.action&&(y=!1,m()),"transmuxed"===i.data.type&&(y||(t.onmessage=null,y_({transmuxedData:v,callback:f}),x_(t))))};if(t.onmessage=_,n&&t.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(r)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),"undefined"!==typeof a&&t.postMessage({action:"setRemux",remux:a}),i.byteLength){var b=i instanceof ArrayBuffer?i:i.buffer,x=i instanceof ArrayBuffer?0:i.byteOffset;t.postMessage({action:"push",data:b,byteOffset:x,byteLength:i.byteLength},[b])}g&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},x_=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"===typeof e.currentTransmux?e.currentTransmux():b_(e.currentTransmux))},w_=function(e,t){e.postMessage({action:t}),x_(e)},T_=function(e,t){if(!t.currentTransmux)return t.currentTransmux=e,void w_(t,e);t.transmuxQueue.push(w_.bind(null,t,e))},S_=function(e){T_("reset",e)},O_=function(e){T_("endTimeline",e)},C_=function(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void b_(e);e.transmuxer.transmuxQueue.push(e)},k_=function(e){var t=new g_;t.currentTransmux=null,t.transmuxQueue=[];var i=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,i.call(t)},t.postMessage({action:"init",options:e}),t},P_={reset:S_,endTimeline:O_,transmux:C_,createTransmuxer:k_},E_=function(e){var t=e.transmuxer,i=e.endAction||e.action,n=e.callback,r=jl()({},e,{endAction:null,transmuxer:null,callback:null}),a=function r(a){a.data.action===i&&(t.removeEventListener("message",r),a.data.data&&(a.data.data=new Uint8Array(a.data.data,e.byteOffset||0,e.byteLength||a.data.data.byteLength),e.data&&(e.data=a.data.data)),n(a.data))};if(t.addEventListener("message",a),e.data){var o=e.data instanceof ArrayBuffer;r.byteOffset=o?0:e.data.byteOffset,r.byteLength=e.data.byteLength;var s=[o?e.data:e.data.buffer];t.postMessage(r,s)}else t.postMessage(r)},A_={FAILURE:2,TIMEOUT:-101,ABORTED:-102},I_=function(e){e.forEach((function(e){e.abort()}))},M_=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},D_=function(e){var t=e.target,i=Date.now()-t.requestTime,n={bandwidth:1/0,bytesReceived:0,roundTripTime:i||0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n},j_=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:A_.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:A_.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:A_.FAILURE,xhr:t}:null},L_=function(e,t){return function(i,n){var r=n.response,a=j_(i,n);if(a)return t(a,e);if(16!==r.byteLength)return t({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:A_.FAILURE,xhr:n},e);var o=new DataView(r);return e.key.bytes=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]),t(null,e)}},R_=function(e){var t=e.segment,i=e.finishProcessingFn;return function(e,n){var r=n.response,a=j_(e,n);if(a)return i(a,t);if(0===r.byteLength)return i({status:n.status,message:"Empty HLS segment content at URL: "+n.uri,code:A_.FAILURE,xhr:n},t);t.map.bytes=new Uint8Array(n.response);var o=wh(t.map.bytes);if("mp4"!==o)return i({status:n.status,message:"Found unsupported "+(o||"unknown")+" container for initialization segment at URL: "+n.uri,code:A_.FAILURE,internal:!0,xhr:n},t);E_({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:function(e){var n=e.tracks,r=e.data;return t.map.bytes=r,n.forEach((function(e){t.map.tracks=t.map.tracks||{},t.map.tracks[e.type]||(t.map.tracks[e.type]=e,"number"===typeof e.id&&e.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[e.id]=e.timescale))})),i(null,t)}})}},N_=function(e){var t=e.segment,i=e.finishProcessingFn,n=e.responseType;return function(e,r){var a=r.response,o=j_(e,r);if(o)return i(o,t);var s="arraybuffer"!==n&&r.responseText?c_(r.responseText.substring(t.lastReachedChar||0)):r.response;return 0===a.byteLength?i({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:A_.FAILURE,xhr:r},t):(t.stats=M_(r),t.key?t.encryptedBytes=new Uint8Array(s):t.bytes=new Uint8Array(s),i(null,t))}},z_=function(e){var t=e.segment,i=e.bytes,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,l=e.captionsFn,c=e.isEndOfTimeline,u=e.endedTimelineFn,h=e.dataFn,d=e.doneFn,p=t.map&&t.map.tracks||{},f=Boolean(p.audio&&p.video),m=r.bind(null,t,"audio","start"),g=r.bind(null,t,"audio","end"),v=r.bind(null,t,"video","start"),y=r.bind(null,t,"video","end"),_=function(){return C_({bytes:i,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:f,onData:function(e){e.type="combined"===e.type?"video":e.type,h(t,e)},onTrackInfo:function(e){n&&(f&&(e.isMuxed=!0),n(t,e))},onAudioTimingInfo:function(e){m&&"undefined"!==typeof e.start&&(m(e.start),m=null),g&&"undefined"!==typeof e.end&&g(e.end)},onVideoTimingInfo:function(e){v&&"undefined"!==typeof e.start&&(v(e.start),v=null),y&&"undefined"!==typeof e.end&&y(e.end)},onVideoSegmentTimingInfo:function(e){a(e)},onAudioSegmentTimingInfo:function(e){o(e)},onId3:function(e,i){s(t,e,i)},onCaptions:function(e){l(t,[e])},isEndOfTimeline:c,onEndedTimeline:function(){u()},onDone:function(e){d&&(e.type="combined"===e.type?"video":e.type,d(null,t,e))}})};E_({action:"probeTs",transmuxer:t.transmuxer,data:i,baseStartTime:t.baseStartTime,callback:function(e){t.bytes=i=e.data;var r=e.result;r&&(n(t,{hasAudio:r.hasAudio,hasVideo:r.hasVideo,isMuxed:f}),n=null,r.hasAudio&&!f&&m(r.audioStart),r.hasVideo&&v(r.videoStart),m=null,v=null),_()}})},B_=function(e){var t=e.segment,i=e.bytes,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,l=e.captionsFn,c=e.isEndOfTimeline,u=e.endedTimelineFn,h=e.dataFn,d=e.doneFn,p=new Uint8Array(i);if(Th(p)){t.isFmp4=!0;var f=t.map.tracks,m={isFmp4:!0,hasVideo:!!f.video,hasAudio:!!f.audio};f.audio&&f.audio.codec&&"enca"!==f.audio.codec&&(m.audioCodec=f.audio.codec),f.video&&f.video.codec&&"encv"!==f.video.codec&&(m.videoCodec=f.video.codec),f.video&&f.audio&&(m.isMuxed=!0),n(t,m);var g=function(e){h(t,{data:p,type:m.hasAudio&&!m.isMuxed?"audio":"video"}),e&&e.length&&l(t,e),d(null,t,{})};E_({action:"probeMp4StartTime",timescales:t.map.timescales,data:p,transmuxer:t.transmuxer,callback:function(e){var n=e.data,a=e.startTime;i=n.buffer,t.bytes=p=n,m.hasAudio&&!m.isMuxed&&r(t,"audio","start",a),m.hasVideo&&r(t,"video","start",a),f.video&&n.byteLength&&t.transmuxer?E_({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:p,timescales:t.map.timescales,trackIds:[f.video.id],callback:function(e){i=e.data.buffer,t.bytes=p=e.data,g(e.captions)}}):g()}})}else if(t.transmuxer){if("undefined"===typeof t.container&&(t.container=wh(p)),"ts"!==t.container&&"aac"!==t.container)return n(t,{hasAudio:!1,hasVideo:!1}),void d(null,t,{});z_({segment:t,bytes:i,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:u,dataFn:h,doneFn:d})}else d(null,t,{})},V_=function(e){var t,i=e.decryptionWorker,n=e.segment,r=e.trackInfoFn,a=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,l=e.id3Fn,c=e.captionsFn,u=e.isEndOfTimeline,h=e.endedTimelineFn,d=e.dataFn,p=e.doneFn,f=function e(t){if(t.data.source===n.requestId){i.removeEventListener("message",e);var f=t.data.decrypted;n.bytes=new Uint8Array(f.bytes,f.byteOffset,f.byteLength),B_({segment:n,bytes:n.bytes,trackInfoFn:r,timingInfoFn:a,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:c,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:p})}};i.addEventListener("message",f),t=n.key.bytes.slice?n.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(n.key.bytes)),i.postMessage(Ly({source:n.requestId,encrypted:n.encryptedBytes,key:t,iv:n.key.iv}),[n.encryptedBytes.buffer,t.buffer])},F_=function(e){var t=e.activeXhrs,i=e.decryptionWorker,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,l=e.captionsFn,c=e.isEndOfTimeline,u=e.endedTimelineFn,h=e.dataFn,d=e.doneFn,p=0,f=!1;return function(e,m){if(!f){if(e)return f=!0,I_(t),d(e,m);if(p+=1,p===t.length){if(m.endOfAllRequests=Date.now(),m.encryptedBytes)return V_({decryptionWorker:i,segment:m,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:u,dataFn:h,doneFn:d});B_({segment:m,bytes:m.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:u,dataFn:h,doneFn:d})}}}},U_=function(e){var t=e.loadendState,i=e.abortFn;return function(e){var n=e.target;n.aborted&&i&&!t.calledAbortFn&&(i(),t.calledAbortFn=!0)}},G_=function(e){var t=e.segment,i=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(e){var n=e.target;if(!n.aborted)return t.stats=bv.mergeOptions(t.stats,D_(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),i(e,t)}},H_=function(e){var t=e.xhr,i=e.xhrOptions,n=e.decryptionWorker,r=e.segment,a=e.abortFn,o=e.progressFn,s=e.trackInfoFn,l=e.timingInfoFn,c=e.videoSegmentTimingInfoFn,u=e.audioSegmentTimingInfoFn,h=e.id3Fn,d=e.captionsFn,p=e.isEndOfTimeline,f=e.endedTimelineFn,m=e.dataFn,g=e.doneFn,v=[],y=F_({activeXhrs:v,decryptionWorker:n,trackInfoFn:s,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:u,id3Fn:h,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:f,dataFn:m,doneFn:g});if(r.key&&!r.key.bytes){var _=bv.mergeOptions(i,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),b=L_(r,y),x=t(_,b);v.push(x)}if(r.map&&!r.map.bytes){var w=bv.mergeOptions(i,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Iy(r.map)}),T=R_({segment:r,finishProcessingFn:y}),S=t(w,T);v.push(S)}var O=bv.mergeOptions(i,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:Iy(r)}),C=N_({segment:r,finishProcessingFn:y,responseType:O.responseType}),k=t(O,C);k.addEventListener("progress",G_({segment:r,progressFn:o,trackInfoFn:s,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:u,id3Fn:h,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:f,dataFn:m})),v.push(k);var P={};return v.forEach((function(e){e.addEventListener("loadend",U_({loadendState:P,abortFn:a}))})),function(){return I_(v)}},W_=Ov("CodecUtils"),q_=function(e){var t=e.attributes||{};if(t.CODECS)return yc(t.CODECS)},Z_=function(e,t){var i=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&i.AUDIO&&e.mediaGroups.AUDIO[i.AUDIO]},Y_=function(e,t){if(!Z_(e,t))return!0;var i=t.attributes||{},n=e.mediaGroups.AUDIO[i.AUDIO];for(var r in n)if(!n[r].uri&&!n[r].playlists)return!0;return!1},X_=function(e){var t={};return e.forEach((function(e){var i=e.mediaType,n=e.type,r=e.details;t[i]=t[i]||[],t[i].push(vc(""+n+r))})),Object.keys(t).forEach((function(e){if(t[e].length>1)return W_("multiple "+e+" codecs found as attributes: "+t[e].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(t[e]=null);t[e]=t[e][0]})),t},K_=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},$_=function(e,t){var i=t.attributes||{},n=X_(q_(t)||[]);if(Z_(e,t)&&!n.audio&&!Y_(e,t)){var r=X_(_c(e,i.AUDIO)||[]);r.audio&&(n.audio=r.audio)}return n},Q_=Ov("PlaylistSelector"),J_=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},eb=function(e,t){if(!e)return"";var i=Al.a.getComputedStyle(e);return i?i[t]:""},tb=function(e,t){var i=e.slice();e.sort((function(e,n){var r=t(e,n);return 0===r?i.indexOf(e)-i.indexOf(n):r}))},ib=function(e,t){var i,n;return e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||Al.a.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||Al.a.Number.MAX_VALUE,i-n},nb=function(e,t){var i,n;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||Al.a.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||Al.a.Number.MAX_VALUE,i===n&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-n},rb=function(e,t,i,n,r,a){if(e){var o={bandwidth:t,width:i,height:n,limitRenditionByPlayerDimensions:r},s=e.playlists;Oy.isAudioOnly(e)&&(s=a.getAudioTrackPlaylists_(),o.audioOnly=!0);var l=s.map((function(e){var t,i=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return t=e.attributes&&e.attributes.BANDWIDTH,t=t||Al.a.Number.MAX_VALUE,{bandwidth:t,width:i,height:n,playlist:e}}));tb(l,(function(e,t){return e.bandwidth-t.bandwidth})),l=l.filter((function(e){return!Oy.isIncompatible(e.playlist)}));var c=l.filter((function(e){return Oy.isEnabled(e.playlist)}));c.length||(c=l.filter((function(e){return!Oy.isDisabled(e.playlist)})));var u=c.filter((function(e){return e.bandwidth*l_.BANDWIDTH_VARIANCE<t})),h=u[u.length-1],d=u.filter((function(e){return e.bandwidth===h.bandwidth}))[0];if(!1===r){var p=d||c[0]||l[0];if(p&&p.playlist){var f="sortedPlaylistReps";return d&&(f="bandwidthBestRep"),c[0]&&(f="enabledPlaylistReps"),Q_("choosing "+J_(p)+" using "+f+" with options",o),p.playlist}return Q_("could not choose a playlist with options",o),null}var m=u.filter((function(e){return e.width&&e.height}));tb(m,(function(e,t){return e.width-t.width}));var g=m.filter((function(e){return e.width===i&&e.height===n}));h=g[g.length-1];var v,y,_,b=g.filter((function(e){return e.bandwidth===h.bandwidth}))[0];b||(v=m.filter((function(e){return e.width>i||e.height>n})),y=v.filter((function(e){return e.width===v[0].width&&e.height===v[0].height})),h=y[y.length-1],_=y.filter((function(e){return e.bandwidth===h.bandwidth}))[0]);var x=_||b||d||c[0]||l[0];if(x&&x.playlist){var w="sortedPlaylistReps";return _?w="resolutionPlusOneRep":b?w="resolutionBestRep":d?w="bandwidthBestRep":c[0]&&(w="enabledPlaylistReps"),Q_("choosing "+J_(x)+" using "+w+" with options",o),x.playlist}return Q_("could not choose a playlist with options",o),null}},ab=function(){var e=this.useDevicePixelRatio&&Al.a.devicePixelRatio||1;return rb(this.playlists.master,this.systemBandwidth,parseInt(eb(this.tech_.el(),"width"),10)*e,parseInt(eb(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},ob=function(e){var t=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&Al.a.devicePixelRatio||1;return t<0&&(t=this.systemBandwidth),t=e*this.systemBandwidth+(1-e)*t,rb(this.playlists.master,t,parseInt(eb(this.tech_.el(),"width"),10)*i,parseInt(eb(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},sb=function(e){var t=e.master,i=e.currentTime,n=e.bandwidth,r=e.duration,a=e.segmentDuration,o=e.timeUntilRebuffer,s=e.currentTimeline,l=e.syncController,c=t.playlists.filter((function(e){return!Oy.isIncompatible(e)})),u=c.filter(Oy.isEnabled);u.length||(u=c.filter((function(e){return!Oy.isDisabled(e)})));var h=u.filter(Oy.hasAttribute.bind(null,"BANDWIDTH")),d=h.map((function(e){var t=l.getSyncPoint(e,r,s,i),c=t?1:2,u=Oy.estimateSegmentRequestTime(a,n,e),h=u*c-o;return{playlist:e,rebufferingImpact:h}})),p=d.filter((function(e){return e.rebufferingImpact<=0}));return tb(p,(function(e,t){return ib(t.playlist,e.playlist)})),p.length?p[0]:(tb(d,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),d[0]||null)},lb=function(){var e=this,t=this.playlists.master.playlists.filter(Oy.isEnabled);tb(t,(function(e,t){return ib(e,t)}));var i=t.filter((function(t){return!!$_(e.playlists.master,t).video}));return i[0]||null},cb=function(e){var t,i=0;return e.bytes&&(t=new Uint8Array(e.bytes),e.segments.forEach((function(e){t.set(e,i),i+=e.byteLength}))),t},ub=function(e,t,i){if(!e[i]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var n=t.textTracks().getTrackById(i);e[i]=n||t.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}},hb=function(e){var t=e.inbandTextTracks,i=e.captionArray,n=e.timestampOffset;if(i){var r=Al.a.WebKitDataCue||Al.a.VTTCue;i.forEach((function(e){var i=e.stream;t[i].addCue(new r(e.startTime+n,e.endTime+n,e.text))}))}},db=function(e){Object.defineProperties(e.frame,{id:{get:function(){return bv.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return bv.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return bv.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},pb=function(e){var t=e.inbandTextTracks,i=e.metadataArray,n=e.timestampOffset,r=e.videoDuration;if(i){var a=Al.a.WebKitDataCue||Al.a.VTTCue,o=t.metadataTrack_;if(o&&(i.forEach((function(e){var t=e.cueTime+n;!("number"!==typeof t||Al.a.isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((function(e){var i=new a(t,t,e.value||e.url||e.data||"");i.frame=e,i.value=e,db(i),o.addCue(i)}))})),o.cues&&o.cues.length)){for(var s=o.cues,l=[],c=0;c<s.length;c++)s[c]&&l.push(s[c]);var u=l.reduce((function(e,t){var i=e[t.startTime]||[];return i.push(t),e[t.startTime]=i,e}),{}),h=Object.keys(u).sort((function(e,t){return Number(e)-Number(t)}));h.forEach((function(e,t){var i=u[e],n=Number(h[t+1])||r;i.forEach((function(e){e.endTime=n}))}))}}},fb=function(e,t,i){e.metadataTrack_||(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)},mb=function(e,t,i){var n,r;if(i&&i.cues){n=i.cues.length;while(n--)r=i.cues[n],r.startTime>=e&&r.endTime<=t&&i.removeCue(r)}},gb=function(e){var t=e.cues;if(t)for(var i=0;i<t.length;i++){for(var n=[],r=0,a=0;a<t.length;a++)t[i].startTime===t[a].startTime&&t[i].endTime===t[a].endTime&&t[i].text===t[a].text&&(r++,r>1&&n.push(t[a]));n.length&&n.forEach((function(t){return e.removeCue(t)}))}},vb=function(e,t,i){if("undefined"===typeof t||null===t||!e.length)return[];var n,r=Math.ceil((t-i+3)*Sh["ONE_SECOND_IN_TS"]);for(n=0;n<e.length;n++)if(e[n].pts>r)break;return e.slice(n)},yb=function(e,t,i){if(!t.length)return e;if(i)return t.slice();var n=t[0].pts,r=0;for(r;r<e.length;r++)if(e[r].pts>=n)break;return e.slice(0,r).concat(t)},_b=function(e,t,i,n){var r=Math.ceil((t-n)*Sh["ONE_SECOND_IN_TS"]),a=Math.ceil((i-n)*Sh["ONE_SECOND_IN_TS"]),o=e.slice(),s=e.length;while(s--)if(e[s].pts<=a)break;if(-1===s)return o;var l=s+1;while(l--)if(e[l].pts<=r)break;return l=Math.max(l,0),o.splice(l,s-l+1),o},bb=function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var i=Object.keys(e).sort(),n=Object.keys(t).sort();if(i.length!==n.length)return!1;for(var r=0;r<i.length;r++){var a=i[r];if(a!==n[r])return!1;if(e[a]!==t[a])return!1}return!0},xb=22,wb=function(e,t){var i=void 0===t?{}:t,n=i.segments,r=void 0===n?[]:n;if(-1===e)return 0;var a=r.reduce((function(t,i,n){return i.timeline===e&&t.push(n),t}),[]);return a.length?a[Math.min(a.length-1,1)]:Math.max(r.length-1,0)},Tb=1,Sb=500,Ob=function(e){return"number"===typeof e&&isFinite(e)},Cb=1/60,kb=function(e,t,i){return"main"===e&&t&&i?i.hasAudio||i.hasVideo?t.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null},Pb=function(e,t,i){var n=t-l_.BACK_BUFFER_LENGTH;e.length&&(n=Math.max(n,e.start(0)));var r=t-i;return Math.min(r,n)},Eb=function(e){var t=e.startOfSegment,i=e.duration,n=e.segment,r=n.start,a=n.end,o=n.parts,s=e.playlist,l=s.mediaSequence,c=s.id,u=s.segments,h=void 0===u?[]:u,d=e.mediaIndex,p=e.partIndex,f=e.timeline,m=h.length-1,g="mediaIndex/partIndex increment";e.getMediaInfoForTime?g="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(g="getSyncSegmentCandidate (isSyncRequest)");var v=e.segment.uri?"segment":"pre-segment";return v+" ["+d+"/"+m+"]"+(p?" part ["+p+"/"+(o.length-1)+"]":"")+" mediaSequenceNumber ["+l+"/"+(l+m)+"] start/end ["+r+" => "+a+"] startOfSegment ["+t+"] duration ["+i+"] timeline ["+f+"] selected by ["+g+"] playlist ["+c+"]"},Ab=function(e){return e+"TimingInfo"},Ib=function(e){var t=e.segmentTimeline,i=e.currentTimeline,n=e.startOfSegment,r=e.buffered,a=e.overrideCheck;return a||t!==i?t<i?n:r.length?r.end(r.length-1):n:null},Mb=function(e){var t=e.timelineChangeController,i=e.currentTimeline,n=e.segmentTimeline,r=e.loaderType,a=e.audioDisabled;if(i===n)return!1;if("audio"===r){var o=t.lastTimelineChange({type:"main"});return!o||o.to!==n}if("main"===r&&a){var s=t.pendingTimelineChange({type:"audio"});return!s||s.to!==n}return!1},Db=function(e,t){var i=e&&"number"===typeof e.start&&"number"===typeof e.end?e.end-e.start:0,n=t&&"number"===typeof t.start&&"number"===typeof t.end?t.end-t.start:0;return Math.max(i,n)},jb=function(e){var t=e.segmentDuration,i=e.maxDuration;return!!t&&Math.round(t)>i+Wv},Lb=function(e,t){if("hls"!==t)return null;var i=Db(e.audioTimingInfo,e.videoTimingInfo);if(!i)return null;var n=e.playlist.targetDuration,r=jb({segmentDuration:i,maxDuration:2*n}),a=jb({segmentDuration:i,maxDuration:n}),o="Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+i+" when the reported duration is "+e.duration+" and the target duration is "+n+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return r||a?{severity:r?"warn":"info",message:o}:null},Rb=function(e){function t(t,i){var n;if(n=e.call(this)||this,!t)throw new TypeError("Initialization settings are required");if("function"!==typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return n.bandwidth=t.bandwidth,n.throughput={rate:0,count:0},n.roundTrip=NaN,n.resetStats_(),n.mediaIndex=null,n.partIndex=null,n.hasPlayed_=t.hasPlayed,n.currentTime_=t.currentTime,n.seekable_=t.seekable,n.seeking_=t.seeking,n.duration_=t.duration,n.mediaSource_=t.mediaSource,n.vhs_=t.vhs,n.loaderType_=t.loaderType,n.currentMediaInfo_=void 0,n.startingMediaInfo_=void 0,n.segmentMetadataTrack_=t.segmentMetadataTrack,n.goalBufferLength_=t.goalBufferLength,n.sourceType_=t.sourceType,n.sourceUpdater_=t.sourceUpdater,n.inbandTextTracks_=t.inbandTextTracks,n.state_="INIT",n.timelineChangeController_=t.timelineChangeController,n.shouldSaveSegmentTimingInfo_=!0,n.parse708captions_=t.parse708captions,n.checkBufferTimeout_=null,n.error_=void 0,n.currentTimeline_=-1,n.pendingSegment_=null,n.xhrOptions_=null,n.pendingSegments_=[],n.audioDisabled_=!1,n.isPendingTimestampOffset_=!1,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=bv.browser.IE_VERSION>=11,n.appendInitSegment_={audio:!0,video:!0},n.playlistOfLastInitSegment_={audio:null,video:null},n.callQueue_=[],n.loadQueue_=[],n.metadataQueue_={id3:[],caption:[]},n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=null,n.activeInitSegmentId_=null,n.initSegments_={},n.cacheEncryptionKeys_=t.cacheEncryptionKeys,n.keyCache_={},n.decrypter_=t.decrypter,n.syncController_=t.syncController,n.syncPoint_={segmentIndex:0,time:0},n.transmuxer_=n.createTransmuxer_(),n.triggerSyncInfoUpdate_=function(){return n.trigger("syncinfoupdate")},n.syncController_.on("syncinfoupdate",n.triggerSyncInfoUpdate_),n.mediaSource_.addEventListener("sourceopen",(function(){n.isEndOfStream_()||(n.ended_=!1)})),n.fetchAtBuffer_=!1,n.logger_=Ov("SegmentLoader["+n.loaderType_+"]"),Object.defineProperty(Rl()(n),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),n.sourceUpdater_.on("ready",(function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()})),"main"===n.loaderType_&&n.timelineChangeController_.on("pendingtimelinechange",(function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()})),"audio"===n.loaderType_&&n.timelineChangeController_.on("timelinechange",(function(){n.hasEnoughInfoToLoad_()&&n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&&n.processCallQueue_()})),n}zl()(t,e);var i=t.prototype;return i.createTransmuxer_=function(){return P_.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_})},i.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0},i.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Al.a.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},i.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},i.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},i.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Al.a.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},i.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},i.error=function(e){return"undefined"!==typeof e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},i.endOfStream=function(){this.ended_=!0,this.transmuxer_&&P_.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},i.buffered_=function(){if(!this.sourceUpdater_||!this.startingMediaInfo_)return bv.createTimeRanges();if("main"===this.loaderType_){var e=this.startingMediaInfo_,t=e.hasAudio,i=e.hasVideo,n=e.isMuxed;if(i&&t&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},i.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=Ry(e),n=this.initSegments_[i];return t&&!n&&e.bytes&&(this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),n||e},i.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=Ny(e),n=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[i]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});var r={resolvedUri:(n||e).resolvedUri};return n&&(r.bytes=n.bytes),r},i.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},i.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.playlist=function(e,t){if(void 0===t&&(t={}),e){var i=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_("playlist update ["+r+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri)return null!==this.mediaIndex&&this.resyncLoader(),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var a=e.mediaSequence-i.mediaSequence;if(this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){var s=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=s}}n&&(n.mediaIndex-=a,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(n.mediaIndex>=0&&(n.segment=e.segments[n.mediaIndex]),n.partIndex>=0&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,e)}},i.pause=function(){this.checkBufferTimeout_&&(Al.a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},i.paused=function(){return null===this.checkBufferTimeout_},i.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})},i.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},i.resyncLoader=function(){this.transmuxer_&&P_.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},i.remove=function(e,t,i,n){if(void 0===i&&(i=function(){}),void 0===n&&(n=!1),t===1/0&&(t=this.duration_()),t<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.startingMediaInfo_){var r=1,a=function(){r--,0===r&&i()};for(var o in!n&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(e,t,a)),(n||"main"===this.loaderType_)&&(this.gopBuffer_=_b(this.gopBuffer_,e,t,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,t,a)),this.inbandTextTracks_)mb(e,t,this.inbandTextTracks_[o]);mb(e,t,this.segmentMetadataTrack_),a()}else this.logger_("skipping remove because no source updater or starting media info")},i.monitorBuffer_=function(){this.checkBufferTimeout_&&Al.a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Al.a.setTimeout(this.monitorBufferTick_.bind(this),1)},i.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Al.a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Al.a.setTimeout(this.monitorBufferTick_.bind(this),Sb)},i.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&("number"===typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},i.isEndOfStream_=function(e,t,i){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),void 0===i&&(i=this.partIndex),!t||!this.mediaSource_)return!1;var n="number"===typeof e&&t.segments[e],r=e+1===t.segments.length,a=!n||!n.parts||i+1===n.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&r&&a},i.chooseNextRequest_=function(){var e=iy(this.buffered_())||0,t=Math.max(0,e-this.currentTime_()),i=!this.hasPlayed_()&&t>=1,n=t>=this.goalBufferLength_(),r=this.playlist_.segments;if(!r.length||i||n)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var a={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(a.isSyncRequest)a.mediaIndex=wb(this.currentTimeline_,this.playlist_);else if(null!==this.mediaIndex){var o=r[this.mediaIndex],s="number"===typeof this.partIndex?this.partIndex:-1;a.startOfSegment=o.end?o.end:e,o.parts&&o.parts[s+1]?(a.mediaIndex=this.mediaIndex,a.partIndex=s+1):a.mediaIndex=this.mediaIndex+1}else{var l=Oy.getMediaInfoForTime(this.playlist_,this.fetchAtBuffer_?e:this.currentTime_(),this.syncPoint_.segmentIndex,this.syncPoint_.time);a.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd":"currentTime",a.mediaIndex=l.mediaIndex,a.startOfSegment=l.startTime,a.partIndex=l.partIndex}var c=r[a.mediaIndex],u=c&&"number"===typeof a.partIndex&&c.parts&&c.parts[a.partIndex];if(!c||"number"===typeof a.partIndex&&!u)return null;"number"!==typeof a.partIndex&&c.parts&&(a.partIndex=0);var h=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return a.mediaIndex>=r.length-1&&h&&!this.seeking_()?null:this.generateSegmentInfo_(a)},i.generateSegmentInfo_=function(e){var t=e.playlist,i=e.mediaIndex,n=e.startOfSegment,r=e.isSyncRequest,a=e.partIndex,o=e.forceTimestampOffset,s=e.getMediaInfoForTime,l=t.segments[i],c="number"===typeof a&&l.parts[a],u={requestId:"segment-loader-"+Math.random(),uri:c&&c.resolvedUri||l.resolvedUri,mediaIndex:i,partIndex:c?a:null,isSyncRequest:r,startOfSegment:n,playlist:t,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:l.timeline,duration:l.duration,segment:l,part:c,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:s},h="undefined"!==typeof o?o:this.isPendingTimestampOffset_;u.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:l.timeline,currentTimeline:this.currentTimeline_,startOfSegment:n,buffered:this.buffered_(),overrideCheck:h});var d=iy(this.sourceUpdater_.audioBuffered());return"number"===typeof d&&(u.audioAppendStart=d-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(u.gopsToAlignWith=vb(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),u},i.timestampOffsetForSegment_=function(e){return Ib(e)},i.earlyAbortWhenNeeded_=function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),i=e.bandwidth,n=this.pendingSegment_.duration,r=Oy.estimateSegmentRequestTime(n,i,this.playlist_,e.bytesReceived),a=Jv(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(!(r<=a)){var o=sb({master:this.vhs_.playlists.master,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(o){var s=r-a,l=s-o.rebufferingImpact,c=.5;a<=Wv&&(c=1),!o.playlist||o.playlist.uri===this.playlist_.uri||l<c||(this.bandwidth=o.playlist.attributes.BANDWIDTH*l_.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},i.handleAbort_=function(e){this.logger_("Aborting "+Eb(e)),this.mediaRequestsAborted+=1},i.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},i.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},bb(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},i.handleTimingInfo_=function(e,t,i,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var r=this.pendingSegment_,a=Ab(t);r[a]=r[a]||{},r[a][i]=n,this.logger_("timinginfo: "+t+" - "+i+" - "+n),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},i.handleCaptions_=function(e,t){var i=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(0!==t.length){var n=this.pendingSegment_;if(n.hasAppendedData_){var r=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),a={};t.forEach((function(e){a[e.stream]=a[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=a[e.stream];t.startTime=Math.min(t.startTime,e.startTime+r),t.endTime=Math.max(t.endTime,e.endTime+r),t.captions.push(e)})),Object.keys(a).forEach((function(e){var t=a[e],n=t.startTime,o=t.endTime,s=t.captions,l=i.inbandTextTracks_;i.logger_("adding cues from "+n+" -> "+o+" for "+e),ub(l,i.vhs_.tech_,e),mb(n,o,l[e]),hb({captionArray:s,inbandTextTracks:l,timestampOffset:r})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t))}else this.logger_("SegmentLoader received no captions from a caption event")},i.handleId3_=function(e,t,i){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var n=this.pendingSegment_;if(n.hasAppendedData_){var r=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();fb(this.inbandTextTracks_,i,this.vhs_.tech_),pb({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:r,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,i))}},i.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach((function(e){return e()})),this.metadataQueue_.caption.forEach((function(e){return e()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},i.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach((function(e){return e()}))},i.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach((function(e){return e()}))},i.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!!e&&(!this.currentMediaInfo_||!Mb({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_;if(!e||!e.trackInfo)return!1;var t=this.currentMediaInfo_,i=t.hasAudio,n=t.hasVideo,r=t.isMuxed;return!(n&&!e.videoTimingInfo)&&(!(i&&!this.audioDisabled_&&!r&&!e.audioTimingInfo)&&!Mb({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[Ab(t.type)].start;else{var n,r="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo;r&&(n=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:r,firstVideoFrameTimeForData:n,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}this.updateAppendInitSegmentStatus(i,t.type),this.updateSourceBufferTimestampOffset_(i),i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},i.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!==typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},i.getInitSegmentAndUpdateState_=function(e){var t=e.type,i=e.initSegment,n=e.map,r=e.playlist;if(n){var a=Ry(n);if(this.activeInitSegmentId_===a)return null;i=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=a}return i&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=r,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,i):null},i.handleQuotaExceededError_=function(e,t){var i=this,n=e.segmentInfo,r=e.type,a=e.bytes,o=this.sourceUpdater_.audioBuffered(),s=this.sourceUpdater_.videoBuffered();o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+ey(o).join(", ")),s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+ey(s).join(", "));var l=o.length?o.start(0):0,c=o.length?o.end(o.length-1):0,u=s.length?s.start(0):0,h=s.length?s.end(s.length-1):0;if(c-l<=Tb&&h-u<=Tb)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+a.byteLength+", audio buffer: "+ey(o).join(", ")+", video buffer: "+ey(s).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",blacklistDuration:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:n,type:r,bytes:a}));var d=this.currentTime_(),p=d-Tb;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+p),this.remove(0,p,(function(){i.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+Tb+"s"),i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=Al.a.setTimeout((function(){i.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),i.quotaExceededErrorRetryTimeout_=null,i.processCallQueue_()}),1e3*Tb)}),!0)},i.handleAppendError_=function(e,t){var i=e.segmentInfo,n=e.type,r=e.bytes;t&&(t.code!==xb?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error(n+" append of "+r.length+"b failed for segment #"+i.mediaIndex+" in playlist "+i.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:i,type:n,bytes:r}))},i.appendToSourceBuffer_=function(e){var t=e.segmentInfo,i=e.type,n=e.initSegment,r=e.data,a=e.bytes;if(!a){var o=[r],s=r.byteLength;n&&(o.unshift(n),s+=n.byteLength),a=cb({bytes:s,segments:o})}this.sourceUpdater_.appendBuffer({segmentInfo:t,type:i,bytes:a},this.handleAppendError_.bind(this,{segmentInfo:t,type:i,bytes:a}))},i.handleSegmentTimingInfo_=function(e,t,i){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var n=this.pendingSegment_.segment,r=e+"TimingInfo";n[r]||(n[r]={}),n[r].transmuxerPrependedSeconds=i.prependedContentDuration||0,n[r].transmuxedPresentationStart=i.start.presentation,n[r].transmuxedDecodeStart=i.start.decode,n[r].transmuxedPresentationEnd=i.end.presentation,n[r].transmuxedDecodeEnd=i.end.decode,n[r].baseMediaDecodeTime=i.baseMediaDecodeTime}},i.appendData_=function(e,t){var i=t.type,n=t.data;if(n&&n.byteLength&&("audio"!==i||!this.audioDisabled_)){var r=this.getInitSegmentAndUpdateState_({type:i,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:r,data:n})}},i.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"===typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((function(){var i=jl()({},e,{forceTimestampOffset:!0});jl()(e,t.generateSegmentInfo_(i)),t.isPendingTimestampOffset_=!1,t.updateTransmuxerAndRequestSegment_(e)}))},i.updateTransmuxerAndRequestSegment_=function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var i=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=null!==this.mediaIndex,a=e.timeline!==this.currentTimeline_&&e.timeline>0,o=n||r&&a;this.logger_("Requesting "+Eb(e)),i.map&&!i.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=H_({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:i,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:o,endedTimelineFn:function(){t.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this)})},i.trimBackBuffer_=function(e){var t=Pb(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)},i.createSimplifiedSegmentObj_=function(e){var t=e.segment,i=e.part,n={resolvedUri:i?i.resolvedUri:t.resolvedUri,byterange:i?i.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},r=e.playlist.segments[e.mediaIndex-1];if(r&&r.timeline===t.timeline&&(r.videoTimingInfo?n.baseStartTime=r.videoTimingInfo.transmuxedDecodeEnd:r.audioTimingInfo&&(n.baseStartTime=r.audioTimingInfo.transmuxedDecodeEnd)),t.key){var a=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);n.key=this.segmentKey(t.key),n.key.iv=a}return t.map&&(n.map=this.initSegmentForMap(t.map)),n},i.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},i.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<Cb?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record "+Cb):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},i.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},i.segmentRequestFinished_=function(e,t,i){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,i));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===A_.ABORTED)return;return this.pause(),e.code===A_.TIMEOUT?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}var n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,t.stats),n.endOfAllRequests=t.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=yb(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(n)}},i.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)},i.updateMediaSecondsLoaded_=function(e){"number"===typeof e.start&&"number"===typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},i.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},i.trueSegmentStart_=function(e){var t=e.currentStart,i=e.playlist,n=e.mediaIndex,r=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,o=e.useVideoTimingInfo,s=e.videoTimingInfo,l=e.audioTimingInfo;if("undefined"!==typeof t)return t;if(!o)return l.start;var c=i.segments[n-1];return 0!==n&&c&&"undefined"!==typeof c.start&&c.end===r+a?s.start:r},i.waitForAppendsToComplete_=function(e){if(!this.currentMediaInfo_)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var t=this.currentMediaInfo_,i=t.hasAudio,n=t.hasVideo,r=t.isMuxed,a="main"===this.loaderType_&&n,o=!this.audioDisabled_&&i&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!==typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},i.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},i.checkForIllegalMediaSwitch=function(e){var t=kb(this.loaderType_,this.currentMediaInfo_,e);return!!t&&(this.error({message:t,blacklistDuration:1/0}),this.trigger("error"),!0)},i.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"===typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=e.timingInfo.start,e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},i.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo,i=t&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;i&&(e.timingInfo.end="number"===typeof i.end?i.end:i.start+e.duration)},i.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_}),this.logger_("Appended "+Eb(e));var t=Lb(e,this.sourceType_);if(t&&("warn"===t.severity?bv.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest)this.trigger("syncinfoupdate");else{this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var i=e.segment;if(i.end&&this.currentTime_()-i.end>3*e.playlist.targetDuration)this.resetEverything();else{var n=null!==this.mediaIndex;n&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),this.paused()||this.monitorBuffer_()}}},i.recordThroughput_=function(e){if(e.duration<Cb)this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record "+Cb);else{var t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count}},i.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,i=t.start,n=t.end;if(Ob(i)&&Ob(n)){mb(i,n,this.segmentMetadataTrack_);var r=Al.a.WebKitDataCue||Al.a.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:n},o=JSON.stringify(a),s=new r(i,n,o);s.value=a,this.segmentMetadataTrack_.addCue(s)}}},t}(bv.EventTarget);function Nb(){}var zb,Bb=function(e){return"string"!==typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))},Vb=["video","audio"],Fb=function(e,t){var i=t[e+"Buffer"];return i&&i.updating||t.queuePending[e]},Ub=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if("mediaSource"===n.type)return null;if(n.type===e)return i}return null},Gb=function e(t,i){if(0!==i.queue.length){var n=0,r=i.queue[n];if("mediaSource"!==r.type){if("mediaSource"!==t&&i.ready()&&"closed"!==i.mediaSource.readyState&&!Fb(t,i)){if(r.type!==t){if(n=Ub(t,i.queue),null===n)return;r=i.queue[n]}return i.queue.splice(n,1),i.queuePending[t]=r,r.action(t,i),r.doneFn?void 0:(i.queuePending[t]=null,void e(t,i))}}else i.updating()||"closed"===i.mediaSource.readyState||(i.queue.shift(),r.action(i),r.doneFn&&r.doneFn(),e("audio",i),e("video",i))}},Hb=function(e,t){var i=t[e+"Buffer"],n=Bb(e);i&&(i.removeEventListener("updateend",t["on"+n+"UpdateEnd_"]),i.removeEventListener("error",t["on"+n+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},Wb=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},qb={appendBuffer:function(e,t,i){return function(n,r){var a=r[n+"Buffer"];if(Wb(r.mediaSource,a)){r.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+n+"Buffer");try{a.appendBuffer(e)}catch(o){r.logger_("Error with code "+o.code+" "+(o.code===xb?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+t.mediaIndex+" to "+n+"Buffer"),r.queuePending[n]=null,i(o)}}}},remove:function(e,t){return function(i,n){var r=n[i+"Buffer"];if(Wb(n.mediaSource,r)){n.logger_("Removing "+e+" to "+t+" from "+i+"Buffer");try{r.remove(e,t)}catch(a){n.logger_("Remove "+e+" to "+t+" from "+i+"Buffer failed")}}}},timestampOffset:function(e){return function(t,i){var n=i[t+"Buffer"];Wb(i.mediaSource,n)&&(i.logger_("Setting "+t+"timestampOffset to "+e),n.timestampOffset=e)}},callback:function(e){return function(t,i){e()}},endOfStream:function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(i){bv.log.warn("Failed to call media source endOfStream",i)}}}},duration:function(e){return function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(i){bv.log.warn("Failed to set media source duration",i)}}},abort:function(){return function(e,t){if("open"===t.mediaSource.readyState){var i=t[e+"Buffer"];if(Wb(t.mediaSource,i)){t.logger_("calling abort on "+e+"Buffer");try{i.abort()}catch(n){bv.log.warn("Failed to abort on "+e+"Buffer",n)}}}}},addSourceBuffer:function(e,t){return function(i){var n=Bb(e),r=wc(t);i.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var a=i.mediaSource.addSourceBuffer(r);a.addEventListener("updateend",i["on"+n+"UpdateEnd_"]),a.addEventListener("error",i["on"+n+"Error_"]),i.codecs[e]=t,i[e+"Buffer"]=a}},removeSourceBuffer:function(e){return function(t){var i=t[e+"Buffer"];if(Hb(e,t),Wb(t.mediaSource,i)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(i)}catch(n){bv.log.warn("Failed to removeSourceBuffer "+e+"Buffer",n)}}}},changeType:function(e){return function(t,i){var n=i[t+"Buffer"],r=wc(e);Wb(i.mediaSource,n)&&i.codecs[t]!==e&&(i.logger_("changing "+t+"Buffer codec from "+i.codecs[t]+" to "+e),n.changeType(r),i.codecs[t]=e)}}},Zb=function(e){var t=e.type,i=e.sourceUpdater,n=e.action,r=e.doneFn,a=e.name;i.queue.push({type:t,action:n,doneFn:r,name:a}),Gb(t,i)},Yb=function(e,t){return function(i){if(t.queuePending[e]){var n=t.queuePending[e].doneFn;t.queuePending[e]=null,n&&n(t[e+"Error_"])}Gb(e,t)}},Xb=function(e){function t(t){var i;return i=e.call(this)||this,i.mediaSource=t,i.sourceopenListener_=function(){return Gb("mediaSource",Rl()(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=Ov("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=Yb("video",Rl()(i)),i.onAudioUpdateEnd_=Yb("audio",Rl()(i)),i.onVideoError_=function(e){i.videoError_=e},i.onAudioError_=function(e){i.audioError_=e},i.createdSourceBuffers_=!1,i.initializedEme_=!1,i.triggeredReady_=!1,i}zl()(t,e);var i=t.prototype;return i.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},i.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},i.hasInitializedAnyEme=function(){return this.initializedEme_},i.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},i.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},i.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},i.addSourceBuffer=function(e,t){Zb({type:"mediaSource",sourceUpdater:this,action:qb.addSourceBuffer(e,t),name:"addSourceBuffer"})},i.abort=function(e){Zb({type:e,sourceUpdater:this,action:qb.abort(e),name:"abort"})},i.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?Zb({type:"mediaSource",sourceUpdater:this,action:qb.removeSourceBuffer(e),name:"removeSourceBuffer"}):bv.log.error("removeSourceBuffer is not supported!")},i.canRemoveSourceBuffer=function(){return!bv.browser.IE_VERSION&&!bv.browser.IS_FIREFOX&&Al.a.MediaSource&&Al.a.MediaSource.prototype&&"function"===typeof Al.a.MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return Al.a.SourceBuffer&&Al.a.SourceBuffer.prototype&&"function"===typeof Al.a.SourceBuffer.prototype.changeType},i.canChangeType=function(){return this.constructor.canChangeType()},i.changeType=function(e,t){this.canChangeType()?Zb({type:e,sourceUpdater:this,action:qb.changeType(t),name:"changeType"}):bv.log.error("changeType is not supported!")},i.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!==typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((function(i){var n=e[i];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(i,n);t.canChangeType()&&t.changeType(i,n)}))},i.appendBuffer=function(e,t){var i=this,n=e.segmentInfo,r=e.type,a=e.bytes;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+a.length+" until video append");var o=t;if(Zb({type:r,sourceUpdater:this,action:qb.appendBuffer(a,n||{mediaIndex:-1},o),doneFn:t,name:"appendBuffer"}),"video"===r){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var s=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+s.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,s.forEach((function(e){i.appendBuffer.apply(i,e)}))}},i.audioBuffered=function(){return Wb(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:bv.createTimeRange()},i.videoBuffered=function(){return Wb(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:bv.createTimeRange()},i.buffered=function(){var e=Wb(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=Wb(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():$v(this.audioBuffered(),this.videoBuffered())},i.setDuration=function(e,t){void 0===t&&(t=Nb),Zb({type:"mediaSource",sourceUpdater:this,action:qb.duration(e),name:"duration",doneFn:t})},i.endOfStream=function(e,t){void 0===e&&(e=null),void 0===t&&(t=Nb),"string"!==typeof e&&(e=void 0),Zb({type:"mediaSource",sourceUpdater:this,action:qb.endOfStream(e),name:"endOfStream",doneFn:t})},i.removeAudio=function(e,t,i){void 0===i&&(i=Nb),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Zb({type:"audio",sourceUpdater:this,action:qb.remove(e,t),doneFn:i,name:"remove"}):i()},i.removeVideo=function(e,t,i){void 0===i&&(i=Nb),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Zb({type:"video",sourceUpdater:this,action:qb.remove(e,t),doneFn:i,name:"remove"}):i()},i.updating=function(){return!(!Fb("audio",this)&&!Fb("video",this))},i.audioTimestampOffset=function(e){return"undefined"!==typeof e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Zb({type:"audio",sourceUpdater:this,action:qb.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},i.videoTimestampOffset=function(e){return"undefined"!==typeof e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(Zb({type:"video",sourceUpdater:this,action:qb.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},i.audioQueueCallback=function(e){this.audioBuffer&&Zb({type:"audio",sourceUpdater:this,action:qb.callback(e),name:"callback"})},i.videoQueueCallback=function(e){this.videoBuffer&&Zb({type:"video",sourceUpdater:this,action:qb.callback(e),name:"callback"})},i.dispose=function(){var e=this;this.trigger("dispose"),Vb.forEach((function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"]((function(){return Hb(t,e)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(bv.EventTarget),Kb=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},$b=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),Qb=function(e){function t(t,i){var n;return void 0===i&&(i={}),n=e.call(this,t,i)||this,n.mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=t.featuresNativeTextTracks,n.shouldSaveSegmentTimingInfo_=!1,n}zl()(t,e);var i=t.prototype;return i.createTransmuxer_=function(){return null},i.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return bv.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return bv.createTimeRanges([[t,i]])},i.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=Ry(e),n=this.initSegments_[i];if(t&&!n&&e.bytes){var r=$b.byteLength+e.bytes.byteLength,a=new Uint8Array(r);a.set(e.bytes),a.set($b,e.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return n||e},i.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.track=function(e){return"undefined"===typeof e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},i.remove=function(e,t){mb(e,t,this.subtitlesTrack_)},i.fillBuffer_=function(){var e=this,t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){var i=function(){e.state="READY",e.paused()||e.monitorBuffer_()};return this.syncController_.one("timestampoffset",i),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}},i.timestampOffsetForSegment_=function(){return null},i.chooseNextRequest_=function(){return this.skipEmptySegments_(e.prototype.chooseNextRequest_.call(this))},i.skipEmptySegments_=function(e){while(e&&e.segment.empty){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},i.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},i.segmentRequestFinished_=function(e,t,i){var n=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===A_.TIMEOUT&&this.handleTimeout_(),e.code===A_.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),this.state="APPENDING",this.trigger("appending");var a=r.segment;if(a.map&&(a.map.bytes=t.map.bytes),r.bytes=t.bytes,"function"!==typeof Al.a.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var o,s=function(){n.subtitlesTrack_.tech_.off("vttjsloaded",o),n.stopForError({message:"Error loading vtt.js"})};return o=function(){n.subtitlesTrack_.tech_.off("vttjserror",s),n.segmentRequestFinished_(e,t,i)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",o),void this.subtitlesTrack_.tech_.one("vttjserror",s)}a.requested=!0;try{this.parseVTTCues_(r)}catch(l){return void this.stopForError({message:l.message})}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,r.cues.forEach((function(e){n.subtitlesTrack_.addCue(n.featuresNativeTextTracks_?new Al.a.VTTCue(e.startTime,e.endTime,e.text):e)})),gb(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},i.handleData_=function(){},i.updateTimingInfoEnd_=function(){},i.parseVTTCues_=function(e){var t,i=!1;"function"===typeof Al.a.TextDecoder?t=new Al.a.TextDecoder("utf8"):(t=Al.a.WebVTT.StringDecoder(),i=!0);var n=new Al.a.WebVTT.Parser(Al.a,Al.a.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=function(t){e.timestampmap=t},n.onparsingerror=function(e){bv.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var r=e.segment.map.bytes;i&&(r=Kb(r)),n.parse(r)}var a=e.bytes;i&&(a=Kb(a)),n.parse(a),n.flush()},i.updateTimeMapping_=function(e,t,i){var n=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,a=r.MPEGTS/Sh["ONE_SECOND_IN_TS"]-r.LOCAL+t.mapping;if(e.cues.forEach((function(e){e.startTime+=a,e.endTime+=a})),!i.syncInfo){var o=e.cues[0].startTime,s=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(o,s-n.duration)}}}else n.empty=!0},t}(Rb),Jb=function(e,t){for(var i=e.cues,n=0;n<i.length;n++){var r=i[n];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},ex=function(e,t,i){if(void 0===i&&(i=0),e.segments)for(var n,r=i,a=0;a<e.segments.length;a++){var o=e.segments[a];if(n||(n=Jb(t,r+o.duration/2)),n){if("cueIn"in o){n.endTime=r,n.adEndTime=r,r+=o.duration,n=null;continue}if(r<n.endTime){r+=o.duration;continue}n.endTime+=o.duration}else if("cueOut"in o&&(n=new Al.a.VTTCue(r,r+o.duration,o.cueOut),n.adStartTime=r,n.adEndTime=r+parseFloat(o.cueOut),t.addCue(n)),"cueOutCont"in o){var s=o.cueOutCont.split("/").map(parseFloat),l=s[0],c=s[1];n=new Al.a.VTTCue(r,r+o.duration,""),n.adStartTime=r-l,n.adEndTime=n.adStartTime+c,t.addCue(n)}r+=o.duration}},tx=function(e,t,i){void 0===i&&(i=0);var n=t.segments;return t.endList||0===i?e:n.length-(e+1)},ix=[{name:"VOD",run:function(e,t,i,n,r){if(i!==1/0){var a={time:0,segmentIndex:0};return a}return null}},{name:"ProgramDateTime",run:function(e,t,i,n,r){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var a=t.segments||[],o=null,s=null;r=r||0;for(var l=0;l<a.length;l++){var c=tx(l,t,r),u=a[c],h=e.timelineToDatetimeMappings[u.timeline];if(h&&u.dateTimeObject){var d=u.dateTimeObject.getTime()/1e3,p=d+h,f=Math.abs(r-p);if(null!==s&&(0===f||s<f))break;s=f,o={time:p,segmentIndex:c}}}return o}},{name:"Segment",run:function(e,t,i,n,r){var a=t.segments||[],o=null,s=null;r=r||0;for(var l=0;l<a.length;l++){var c=tx(l,t,r),u=a[c];if(u.timeline===n&&"undefined"!==typeof u.start){var h=Math.abs(r-u.start);if(null!==s&&s<h)break;(!o||null===s||s>=h)&&(s=h,o={time:u.start,segmentIndex:c})}}return o}},{name:"Discontinuity",run:function(e,t,i,n,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,s=0;s<t.discontinuityStarts.length;s++){var l=t.discontinuityStarts[s],c=t.discontinuitySequence+s+1,u=e.discontinuities[c];if(u){var h=Math.abs(r-u.time);if(null!==o&&o<h)break;(!a||null===o||o>=h)&&(o=h,a={time:u.time,segmentIndex:l})}}return a}},{name:"Playlist",run:function(e,t,i,n,r){if(t.syncInfo){var a={time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence};return a}return null}}],nx=function(e){function t(t){var i;return i=e.call(this)||this,i.timelines=[],i.discontinuities=[],i.timelineToDatetimeMappings={},i.logger_=Ov("SyncController"),i}zl()(t,e);var i=t.prototype;return i.getSyncPoint=function(e,t,i,n){var r=this.runStrategies_(e,t,i,n);return r.length?this.selectSyncPoint_(r,{key:"time",value:n}):null},i.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;var n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+uy(e,n.segmentIndex,0))},i.runStrategies_=function(e,t,i,n){for(var r=[],a=0;a<ix.length;a++){var o=ix[a],s=o.run(this,e,t,i,n);s&&(s.strategy=o.name,r.push({strategy:o.name,syncPoint:s}))}return r},i.selectSyncPoint_=function(e,t){for(var i=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var o=Math.abs(e[a].syncPoint[t.key]-t.value);o<n&&(n=o,i=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+"]"),i},i.saveExpiredSegmentInfo=function(e,t){for(var i=t.mediaSequence-e.mediaSequence,n=i-1;n>=0;n--){var r=e.segments[n];if(r&&"undefined"!==typeof r.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:r.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},i.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0],i=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-i}},i.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,i=e.shouldSaveTimelineMapping,n=this.calculateSegmentTimeMapping_(t,t.timingInfo,i),r=t.segment;n&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:r.start}));var a=r.dateTimeObject;r.discontinuity&&i&&a&&(this.timelineToDatetimeMappings[r.timeline]=-a.getTime()/1e3)},i.timestampOffsetForTimeline=function(e){return"undefined"===typeof this.timelines[e]?null:this.timelines[e].time},i.mappingForTimeline=function(e){return"undefined"===typeof this.timelines[e]?null:this.timelines[e].mapping},i.calculateSegmentTimeMapping_=function(e,t,i){var n=e.segment,r=this.timelines[e.timeline];if("number"===typeof e.timestampOffset)r={time:e.startOfSegment,mapping:e.startOfSegment-t.start},i&&(this.timelines[e.timeline]=r,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+r.time+"] [mapping: "+r.mapping+"]")),n.start=e.startOfSegment,n.end=t.end+r.mapping;else{if(!r)return!1;n.start=t.start+r.mapping,n.end=t.end+r.mapping}return!0},i.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var r=t.discontinuityStarts[n],a=t.discontinuitySequence+n+1,o=r-e.mediaIndex,s=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>s){var l=void 0;l=o<0?i.start-uy(t,e.mediaIndex,r):i.end+uy(t,e.mediaIndex+1,r),this.discontinuities[a]={time:l,accuracy:s}}}},i.dispose=function(){this.trigger("dispose"),this.off()},t}(bv.EventTarget),rx=function(e){function t(){var t;return t=e.call(this)||this,t.pendingTimelineChanges_={},t.lastTimelineChanges_={},t}zl()(t,e);var i=t.prototype;return i.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},i.pendingTimelineChange=function(e){var t=e.type,i=e.from,n=e.to;return"number"===typeof i&&"number"===typeof n&&(this.pendingTimelineChanges_[t]={type:t,from:i,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},i.lastTimelineChange=function(e){var t=e.type,i=e.from,n=e.to;return"number"===typeof i&&"number"===typeof n&&(this.lastTimelineChanges_[t]={type:t,from:i,to:n},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},i.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(bv.EventTarget),ax=p_(f_((function(){function e(e,i,n){return n={path:i,exports:{},require:function(e,i){return t(e,void 0===i||null===i?n.path:i)}},e(n,n.exports),n.exports}function t(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var i=e((function(e){function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}e.exports=i,e.exports["default"]=e.exports,e.exports.__esModule=!0})),n=e((function(e){function t(i,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports["default"]=e.exports,e.exports.__esModule=!0,t(i,n)}e.exports=t,e.exports["default"]=e.exports,e.exports.__esModule=!0})),r=e((function(e){function t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}e.exports=t,e.exports["default"]=e.exports,e.exports.__esModule=!0})),a=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(i,1),i>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,o=0;o<a;++o)t[o].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}();
/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */
function o(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}
/*! @name aes-decrypter @version 3.1.2 @license Apache-2.0 */var s=function(){var e,t,i,n,r,a,o,s,l,c=[[[],[],[],[],[]],[[],[],[],[],[]]],u=c[0],h=c[1],d=u[4],p=h[4],f=[],m=[];for(e=0;e<256;e++)m[(f[e]=e<<1^283*(e>>7))^e]=e;for(t=i=0;!d[t];t^=n||1,i=m[i]||1)for(o=i^i<<1^i<<2^i<<3^i<<4,o=o>>8^255&o^99,d[t]=o,p[o]=t,a=f[r=f[n=f[t]]],l=16843009*a^65537*r^257*n^16843008*t,s=257*f[o]^16843008*o,e=0;e<4;e++)u[e][t]=s=s<<24^s>>>8,h[e][o]=l=l<<24^l>>>8;for(e=0;e<5;e++)u[e]=u[e].slice(0),h[e]=h[e].slice(0);return c},l=null,c=function(){function e(e){var t,i,n;l||(l=s()),this._tables=[[l[0][0].slice(),l[0][1].slice(),l[0][2].slice(),l[0][3].slice(),l[0][4].slice()],[l[1][0].slice(),l[1][1].slice(),l[1][2].slice(),l[1][3].slice(),l[1][4].slice()]];var r=this._tables[0][4],a=this._tables[1],o=e.length,c=1;if(4!==o&&6!==o&&8!==o)throw new Error("Invalid aes key size");var u=e.slice(0),h=[];for(this._key=[u,h],t=o;t<4*o+28;t++)n=u[t-1],(t%o===0||8===o&&t%o===4)&&(n=r[n>>>24]<<24^r[n>>16&255]<<16^r[n>>8&255]<<8^r[255&n],t%o===0&&(n=n<<8^n>>>24^c<<24,c=c<<1^283*(c>>7))),u[t]=u[t-o]^n;for(i=0;t;i++,t--)n=u[3&i?t:t-4],h[i]=t<=4||i<4?n:a[0][r[n>>>24]]^a[1][r[n>>16&255]]^a[2][r[n>>8&255]]^a[3][r[255&n]]}var t=e.prototype;return t.decrypt=function(e,t,i,n,r,a){var o,s,l,c,u=this._key[1],h=e^u[0],d=n^u[1],p=i^u[2],f=t^u[3],m=u.length/4-2,g=4,v=this._tables[1],y=v[0],_=v[1],b=v[2],x=v[3],w=v[4];for(c=0;c<m;c++)o=y[h>>>24]^_[d>>16&255]^b[p>>8&255]^x[255&f]^u[g],s=y[d>>>24]^_[p>>16&255]^b[f>>8&255]^x[255&h]^u[g+1],l=y[p>>>24]^_[f>>16&255]^b[h>>8&255]^x[255&d]^u[g+2],f=y[f>>>24]^_[h>>16&255]^b[d>>8&255]^x[255&p]^u[g+3],g+=4,h=o,d=s,p=l;for(c=0;c<4;c++)r[(3&-c)+a]=w[h>>>24]<<24^w[d>>16&255]<<16^w[p>>8&255]<<8^w[255&f]^u[g++],o=h,h=d,d=p,p=f,f=o},e}(),u=function(e){function t(){var t;return t=e.call(this,a)||this,t.jobs=[],t.delay=1,t.timeout_=null,t}r(t,e);var i=t.prototype;return i.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},i.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(a),h=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},d=function(e,t,i){var n,r,a,o,s,l,u,d,p,f=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),m=new c(Array.prototype.slice.call(t)),g=new Uint8Array(e.byteLength),v=new Int32Array(g.buffer);for(n=i[0],r=i[1],a=i[2],o=i[3],p=0;p<f.length;p+=4)s=h(f[p]),l=h(f[p+1]),u=h(f[p+2]),d=h(f[p+3]),m.decrypt(s,l,u,d,v,p),v[p]=h(v[p]^n),v[p+1]=h(v[p+1]^r),v[p+2]=h(v[p+2]^a),v[p+3]=h(v[p+3]^o),n=s,r=l,a=u,o=d;return g},p=function(){function e(t,i,n,r){var a=e.STEP,s=new Int32Array(t.buffer),l=new Uint8Array(t.byteLength),c=0;for(this.asyncStream_=new u,this.asyncStream_.push(this.decryptChunk_(s.subarray(c,c+a),i,n,l)),c=a;c<s.length;c+=a)n=new Uint32Array([h(s[c-4]),h(s[c-3]),h(s[c-2]),h(s[c-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(c,c+a),i,n,l));this.asyncStream_.push((function(){r(null,o(l))}))}var t=e.prototype;return t.decryptChunk_=function(e,t,i,n){return function(){var r=d(e,t,i);n.set(r,e.byteOffset)}},i(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),f=function(e){var t={};return Object.keys(e).forEach((function(i){var n=e[i];ArrayBuffer.isView(n)?t[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:t[i]=n})),t};self.onmessage=function(e){var t=e.data,i=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),n=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),r=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new p(i,n,r,(function(e,i){self.postMessage(f({source:t.source,decrypted:i}),[i.buffer])}))}}))),ox=d_(ax),sx=function(e){var t=e["default"]?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},lx=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},cx=function(e,t){t.activePlaylistLoader=e,e.load()},ux=function(e,t){return function(){var i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],o=a.activeTrack(),s=a.getActiveGroup(),l=a.activePlaylistLoader,c=a.lastGroup_;s&&c&&s.id===c.id||(a.lastGroup_=s,a.lastTrack_=o,lx(n,a),s&&!s.isMasterPlaylist&&(s.playlistLoader?(n.resyncLoader(),cx(s.playlistLoader,a)):l&&r.resetEverything()))}},hx=function(e,t){return function(){var i=t.segmentLoaders[e],n=t.mediaTypes[e];n.lastGroup_=null,i.abort(),i.pause()}},dx=function(e,t){return function(){var i=t.masterPlaylistLoader,n=t.segmentLoaders,r=n[e],a=n.main,o=t.mediaTypes[e],s=o.activeTrack(),l=o.getActiveGroup(),c=o.activePlaylistLoader,u=o.lastTrack_;if((!u||!s||u.id!==s.id)&&(o.lastGroup_=l,o.lastTrack_=s,lx(r,o),l)){if(l.isMasterPlaylist){if(!s||!u||s.id===u.id)return;var h=t.vhs.masterPlaylistController_,d=h.selectPlaylist();if(h.media()===d)return;return o.logger_("track change. Switching master audio from "+u.id+" to "+s.id),i.pause(),a.resetEverything(),void h.fastQualityChange_(d)}if("AUDIO"===e){if(!l.playlistLoader)return a.setAudio(!0),void a.resetEverything();r.setAudio(!0),a.setAudio(!1)}c!==l.playlistLoader?(r.track&&r.track(s),r.resetEverything(),cx(l.playlistLoader,o)):cx(l.playlistLoader,o)}}},px={AUDIO:function(e,t){return function(){var i=t.segmentLoaders[e],n=t.mediaTypes[e],r=t.blacklistCurrentPlaylist;lx(i,n);var a=n.activeTrack(),o=n.activeGroup(),s=(o.filter((function(e){return e["default"]}))[0]||o[0]).id,l=n.tracks[s];if(a!==l){for(var c in bv.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[c].enabled=n.tracks[c]===l;n.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var i=t.segmentLoaders[e],n=t.mediaTypes[e];bv.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),lx(i,n);var r=n.activeTrack();r&&(r.mode="disabled"),n.onTrackChanged()}}},fx={AUDIO:function(e,t,i){if(t){var n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,r),(!n.paused()||e.endList&&"none"!==n.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),r),n.paused()||a.load()})),t.on("error",px[e](e,i))}},SUBTITLES:function(e,t,i){var n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e],o=i.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,r),a.track(o.activeTrack()),(!n.paused()||e.endList&&"none"!==n.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),r),n.paused()||a.load()})),t.on("error",px[e](e,i))}},mx={AUDIO:function(e,t){var i=t.vhs,n=t.sourceType,r=t.segmentLoaders[e],a=t.requestOptions,o=t.master.mediaGroups,s=t.mediaTypes[e],l=s.groups,c=s.tracks,u=s.logger_,h=t.masterPlaylistLoader,d=Sy(h.master);for(var p in o[e]&&0!==Object.keys(o[e]).length||(o[e]={main:{default:{default:!0}}}),o[e])for(var f in l[p]||(l[p]=[]),o[e][p]){var m=o[e][p][f],g=void 0;if(d?(u("AUDIO group '"+p+"' label '"+f+"' is a master playlist"),m.isMasterPlaylist=!0,g=null):g="vhs-json"===n&&m.playlists?new Hv(m.playlists[0],i,a):m.resolvedUri?new Hv(m.resolvedUri,i,a):m.playlists&&"dash"===n?new s_(m.playlists[0],i,a,h):null,m=bv.mergeOptions({id:f,playlistLoader:g},m),fx[e](e,m.playlistLoader,t),l[p].push(m),"undefined"===typeof c[f]){var v=new bv.AudioTrack({id:f,kind:sx(m),enabled:!1,language:m.language,default:m["default"],label:f});c[f]=v}}r.on("error",px[e](e,t))},SUBTITLES:function(e,t){var i=t.tech,n=t.vhs,r=t.sourceType,a=t.segmentLoaders[e],o=t.requestOptions,s=t.master.mediaGroups,l=t.mediaTypes[e],c=l.groups,u=l.tracks,h=t.masterPlaylistLoader;for(var d in s[e])for(var p in c[d]||(c[d]=[]),s[e][d])if(!s[e][d][p].forced){var f=s[e][d][p],m=void 0;if("hls"===r)m=new Hv(f.resolvedUri,n,o);else if("dash"===r){var g=f.playlists.filter((function(e){return e.excludeUntil!==1/0}));if(!g.length)return;m=new s_(f.playlists[0],n,o,h)}else"vhs-json"===r&&(m=new Hv(f.playlists?f.playlists[0]:f.resolvedUri,n,o));if(f=bv.mergeOptions({id:p,playlistLoader:m},f),fx[e](e,f.playlistLoader,t),c[d].push(f),"undefined"===typeof u[p]){var v=i.addRemoteTextTrack({id:p,kind:"subtitles",default:f["default"]&&f.autoselect,language:f.language,label:p},!1).track;u[p]=v}}a.on("error",px[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i=t.tech,n=t.master.mediaGroups,r=t.mediaTypes[e],a=r.groups,o=r.tracks;for(var s in n[e])for(var l in a[s]||(a[s]=[]),n[e][s]){var c=n[e][s][l];if(c.instreamId.match(/CC\d/)&&(a[s].push(bv.mergeOptions({id:l},c)),"undefined"===typeof o[l])){var u=i.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c["default"]&&c.autoselect,language:c.language,label:l},!1).track;o[l]=u}}}},gx=function e(t,i){for(var n=0;n<t.length;n++){if(wy(i,t[n]))return!0;if(t[n].playlists&&e(t[n].playlists,i))return!0}return!1},vx=function(e,t){return function(i){var n=t.masterPlaylistLoader,r=t.mediaTypes[e].groups,a=n.media();if(!a)return null;var o=null;a.attributes[e]&&(o=r[a.attributes[e]]);var s=Object.keys(r);if(!o)if("AUDIO"===e&&s.length>1&&Sy(t.master))for(var l=0;l<s.length;l++){var c=r[s[l]];if(gx(c,a)){o=c;break}}else r.main?o=r.main:1===s.length&&(o=r[s[0]]);return"undefined"===typeof i?o:null!==i&&o&&o.filter((function(e){return e.id===i.id}))[0]||null}},yx={AUDIO:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var n in i)if(i[n].enabled)return i[n];return null}},SUBTITLES:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var n in i)if("showing"===i[n].mode||"hidden"===i[n].mode)return i[n];return null}}},_x=function(e,t){var i=t.mediaTypes;return function(){var t=i[e].activeTrack();return t?i[e].activeGroup(t):null}},bx=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){mx[t](t,e)}));var t=e.mediaTypes,i=e.masterPlaylistLoader,n=e.tech,r=e.vhs,a=e.segmentLoaders,o=a["AUDIO"],s=a.main;["AUDIO","SUBTITLES"].forEach((function(i){t[i].activeGroup=vx(i,e),t[i].activeTrack=yx[i](i,e),t[i].onGroupChanged=ux(i,e),t[i].onGroupChanging=hx(i,e),t[i].onTrackChanged=dx(i,e),t[i].getActiveGroup=_x(i,e)}));var l=t.AUDIO.activeGroup();if(l){var c=(l.filter((function(e){return e["default"]}))[0]||l[0]).id;t.AUDIO.tracks[c].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged();var u=t.AUDIO.getActiveGroup();u.playlistLoader?(s.setAudio(!1),o.setAudio(!0)):s.setAudio(!0)}i.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))})),i.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanging()}))}));var h=function(){t.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"}),n.trigger({type:"usage",name:"hls-audio-change"})};for(var d in n.audioTracks().addEventListener("change",h),n.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",(function(){n.audioTracks().removeEventListener("change",h),n.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),n.clearTracks("audio"),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[d])},xx=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Nb,activeTrack:Nb,getActiveGroup:Nb,onGroupChanged:Nb,onTrackChanged:Nb,lastTrack_:null,logger_:Ov("MediaGroups["+t+"]")}})),e},wx=120,Tx=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],Sx=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Ox=function(e){var t=e.currentPlaylist,i=e.nextPlaylist,n=e.forwardBuffer,r=e.bufferLowWaterLine,a=e.bufferHighWaterLine,o=e.duration,s=e.experimentalBufferBasedABR,l=e.log;if(!i)return bv.log.warn("We received no playlist to switch to. Please check your stream."),!1;var c="allowing switch "+(t&&t.id||"null")+" -> "+i.id;if(!t||!t.endList)return l(c+" as current playlist "+(t?"is live":"is not set")),!0;if(i.id===t.id)return!1;var u=s?l_.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:l_.MAX_BUFFER_LOW_WATER_LINE;if(o<u)return l(c+" as duration < max low water line ("+o+" < "+u+")"),!0;var h=i.attributes.BANDWIDTH,d=t.attributes.BANDWIDTH;if(h<d&&(!s||n<a)){var p=c+" as next bandwidth < current bandwidth ("+h+" < "+d+")";return s&&(p+=" and forwardBuffer < bufferHighWaterLine ("+n+" < "+a+")"),l(p),!0}if((!s||h>d)&&n>=r){var f=c+" as forwardBuffer >= bufferLowWaterLine ("+n+" >= "+r+")";return s&&(f+=" and next bandwidth > current bandwidth ("+h+" > "+d+")"),l(f),!0}return l("not "+c+" as no switching criteria met"),!1},Cx=function(e){function t(t){var i;i=e.call(this)||this;var n=t.src,r=t.handleManifestRedirects,a=t.withCredentials,o=t.tech,s=t.bandwidth,l=t.externVhs,c=t.useCueTags,u=t.blacklistDuration,h=t.enableLowInitialPlaylist,d=t.sourceType,p=t.cacheEncryptionKeys,f=t.experimentalBufferBasedABR;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");zb=l,i.experimentalBufferBasedABR=Boolean(f),i.withCredentials=a,i.tech_=o,i.vhs_=o.vhs,i.sourceType_=d,i.useCueTags_=c,i.blacklistDuration=u,i.enableLowInitialPlaylist=h,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:a,handleManifestRedirects:r,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=xx(),i.mediaSource=new Al.a.MediaSource,i.handleDurationChange_=i.handleDurationChange_.bind(Rl()(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(Rl()(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(Rl()(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=bv.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new nx(t),i.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new ox,i.sourceUpdater_=new Xb(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new rx;var m={vhs:i.vhs_,parse708captions:t.parse708captions,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:s,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:p,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_};return i.masterPlaylistLoader_="dash"===i.sourceType_?new s_(n,i.vhs_,i.requestOptions_):new Hv(n,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new Rb(bv.mergeOptions(m,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),t),i.audioSegmentLoader_=new Rb(bv.mergeOptions(m,{loaderType:"audio"}),t),i.subtitleSegmentLoader_=new Qb(bv.mergeOptions(m,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks}),t),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&&(i.masterPlaylistLoader_.one("loadedplaylist",(function(){return i.startABRTimer_()})),i.tech_.on("pause",(function(){return i.stopABRTimer_()})),i.tech_.on("play",(function(){return i.startABRTimer_()}))),Tx.forEach((function(e){i[e+"_"]=Sx.bind(Rl()(i),e)})),i.logger_=Ov("MPC"),i.triggeredFmp4Usage=!1,"none"===i.tech_.preload()?(i.loadOnPlay_=function(){i.loadOnPlay_=null,i.masterPlaylistLoader_.load()},i.tech_.one("play",i.loadOnPlay_)):i.masterPlaylistLoader_.load(),i}zl()(t,e);var i=t.prototype;return i.checkABR_=function(){var e=this.selectPlaylist();this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,"abr")},i.switchMedia_=function(e,t,i){var n=this.media(),r=n&&(n.id||n.uri),a=e.id||e.uri;r&&r!==a&&(this.logger_("switch media "+r+" -> "+a+" from "+t),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t})),this.masterPlaylistLoader_.media(e,i)},i.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=Al.a.setInterval((function(){return e.checkABR_()}),250)},i.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Al.a.clearInterval(this.abrTimer_),this.abrTimer_=null)},i.getAudioTrackPlaylists_=function(){var e=this.master();if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return e&&e.playlists||[];var t,i=e.mediaGroups.AUDIO,n=Object.keys(i);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)t=this.mediaTypes_.AUDIO.activeTrack();else{var r=i.main||n.length&&i[n[0]];for(var a in r)if(r[a]["default"]){t={label:a};break}}if(!t)return[];var o=[];for(var s in i)if(i[s][t.label]){var l=i[s][t.label];l.playlists?o.push.apply(o,l.playlists):o.push(l)}return o},i.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;xy(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),bx({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var t=e.masterPlaylistLoader_.media();if(!t){var i;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(i=e.selectInitialPlaylist()),i||(i=e.selectPlaylist()),!i||!e.shouldSwitchToMedia_(i))return;e.initialMedia_=i,e.switchMedia_(e.initialMedia_,"initial");var n="vhs-json"===e.sourceType_&&e.initialMedia_.segments;if(!n)return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;xy(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();if("playlist-unchanged"!==t.lastExcludeReason_){var i=e.stuckAtPlaylistEnd_(t);i&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))}})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},i.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},i.triggerPresenceUsage_=function(e,t){var i=e.mediaGroups||{},n=!0,r=Object.keys(i.AUDIO);for(var a in i.AUDIO)for(var o in i.AUDIO[a]){var s=i.AUDIO[a][o];s.uri||(n=!1)}n&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(i.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),zb.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),r.length&&Object.keys(i.AUDIO[r[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},i.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media(),i=this.tech_.buffered(),n=i.length?i.end(i.length-1)-this.tech_.currentTime():0,r=this.bufferLowWaterLine(),a=this.bufferHighWaterLine();return Ox({currentPlaylist:t,nextPlaylist:e,forwardBuffer:n,bufferLowWaterLine:r,bufferHighWaterLine:a,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},i.setupSegmentLoaderListeners_=function(){var e=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",(function(){var t=e.selectPlaylist();e.shouldSwitchToMedia_(t)&&e.switchMedia_(t,"bandwidthupdate"),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")}))),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){e.logger_("main segment loader ended"),e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(t){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},wx))}));var t=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()}))},i.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},i.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},i.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()&&(this.switchMedia_(e,"smooth-quality"),this.mainSegmentLoader_.resetLoader())},i.fastQualityChange_=function(e){var t=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything((function(){bv.browser.IE_VERSION||bv.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")},i.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},i.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var i=this.seekable();if(!i.length)return!1;if(bv.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.tech_.setCurrentTime(i.end(0)),e.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0))}return this.hasPlayed_=!0,this.load(),!0},i.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();"undefined"!==typeof e&&"function"===typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")},i.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},i.handleDurationChange_=function(){this.tech_.trigger("durationchange")},i.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.currentMediaInfo_||this.mainSegmentLoader_.currentMediaInfo_.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},i.stuckAtPlaylistEnd_=function(e){var t=this.seekable();if(!t.length)return!1;var i=this.syncController_.getExpiredTime(e,this.duration());if(null===i)return!1;var n=zb.Playlist.playlistEnd(e,i),r=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return n-r<=qv;var o=a.end(a.length-1);return o-r<=qv&&n-o<=qv},i.blacklistCurrentPlaylist=function(e,t){void 0===e&&(e={});var i=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!i)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));var n=this.masterPlaylistLoader_.master.playlists,r=n.filter(gy),a=1===r.length&&r[0]===i;if(1===n.length&&t!==1/0)return bv.log.warn("Problem encountered with playlist "+i.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(a);if(a){var o=!1;n.forEach((function(e){if(e!==i){var t=e.excludeUntil;"undefined"!==typeof t&&t!==1/0&&(o=!0,delete e.excludeUntil)}})),o&&(bv.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}i.excludeUntil=Date.now()+1e3*t,e.reason&&(i.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var s=this.selectPlaylist();if(!s)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var l=e.internal?this.logger_:bv.log.warn,c=e.message?" "+e.message:"";l((e.internal?"Internal problem":"Problem")+" encountered with playlist "+i.id+"."+c+" Switching to playlist "+s.id+"."),s.attributes.AUDIO!==i.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),s.attributes.SUBTITLES!==i.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var u=s.targetDuration/2*1e3||5e3,h="number"===typeof s.lastRequest&&Date.now()-s.lastRequest<=u;return this.switchMedia_(s,"exclude",a||h)},i.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},i.delegateLoaders_=function(e,t){var i=this,n=[],r="all"===e;(r||"main"===e)&&n.push(this.masterPlaylistLoader_);var a=[];(r||"audio"===e)&&a.push("AUDIO"),(r||"subtitle"===e)&&(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach((function(e){var t=i.mediaTypes_[e]&&i.mediaTypes_[e].activePlaylistLoader;t&&n.push(t)})),["main","audio","subtitle"].forEach((function(t){var r=i[t+"SegmentLoader_"];!r||e!==t&&"all"!==e||n.push(r)})),n.forEach((function(e){return t.forEach((function(t){"function"===typeof e[t]&&e[t]()}))}))},i.setCurrentTime=function(e){var t=Yv(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},i.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:zb.Playlist.duration(e):1/0:0},i.seekable=function(){return this.seekable_},i.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var i=this.syncController_.getExpiredTime(t,this.duration());if(null!==i){var n=this.masterPlaylistLoader_.master,r=zb.Playlist.seekable(t,i,zb.Playlist.liveEdgeDelay(n,t));if(0!==r.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),i=this.syncController_.getExpiredTime(t,this.duration()),null===i)return;if(e=zb.Playlist.seekable(t,i,zb.Playlist.liveEdgeDelay(n,t)),0===e.length)return}var a,o;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>r.end(0)||r.start(0)>e.end(0)?this.seekable_=r:this.seekable_=bv.createTimeRanges([[e.start(0)>r.start(0)?e.start(0):r.start(0),e.end(0)<r.end(0)?e.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===o||(this.logger_("seekable updated ["+Qv(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},i.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var i=this.tech_.buffered(),n=zb.Playlist.duration(this.masterPlaylistLoader_.media());i.length>0&&(n=Math.max(n,i.end(i.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}},i.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((function(t){var i=e.mediaTypes_[t].groups;for(var n in i)i[n].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},i.master=function(){return this.masterPlaylistLoader_.master},i.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},i.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader;return!(!this.mainSegmentLoader_.currentMediaInfo_||e&&!this.audioSegmentLoader_.currentMediaInfo_)},i.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.currentMediaInfo_||{},audio:this.audioSegmentLoader_.currentMediaInfo_||{}};t.video=t.main;var i=$_(this.master(),this.media()),n={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(n.video=i.video||t.main.videoCodec||Cc),t.main.isMuxed&&(n.video+=","+(i.audio||t.main.audioCodec||Oc)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||r)&&(n.audio=i.audio||t.main.audioCodec||t.audio.audioCodec||Oc,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),n.audio||n.video){var a,o=function(e,t){return e?Tc(t):Sc(t)},s={};if(["video","audio"].forEach((function(e){if(n.hasOwnProperty(e)&&!o(t[e].isFmp4,n[e])){var i=t[e].isFmp4?"browser":"muxer";s[i]=s[i]||[],s[i].push(n[e]),"audio"===e&&(a=i)}})),r&&a&&this.media().attributes.AUDIO){var l=this.media().attributes.AUDIO;this.master().playlists.forEach((function(t){var i=t.attributes&&t.attributes.AUDIO;i===l&&t!==e.media()&&(t.excludeUntil=1/0)})),this.logger_("excluding audio group "+l+" as "+a+' does not support codec(s): "'+n.audio+'"')}if(!Object.keys(s).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var c=[];if(["video","audio"].forEach((function(t){var i=(yc(e.sourceUpdater_.codecs[t]||"")[0]||{}).type,r=(yc(n[t]||"")[0]||{}).type;i&&r&&i.toLowerCase()!==r.toLowerCase()&&c.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+n[t]+'"')})),c.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+c.join(", ")+".",blacklistDuration:1/0,internal:!0})}return n}var u=Object.keys(s).reduce((function(e,t){return e&&(e+=", "),e+=t+' does not support codec(s): "'+s[t].join(",")+'"',e}),"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:u,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},i.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},i.excludeUnsupportedVariants_=function(){var e=this,t=this.master().playlists,i=[];Object.keys(t).forEach((function(n){var r=t[n];if(-1===i.indexOf(r.id)){i.push(r.id);var a=$_(e.master,r),o=[];!a.audio||Sc(a.audio)||Tc(a.audio)||o.push("audio codec "+a.audio),!a.video||Sc(a.video)||Tc(a.video)||o.push("video codec "+a.video),a.text&&"stpp.ttml.im1t"===a.text&&o.push("text codec "+a.text),o.length&&(r.excludeUntil=1/0,e.logger_("excluding "+r.id+" for unsupported: "+o.join(", ")))}}))},i.excludeIncompatibleVariants_=function(e){var t=this,i=[],n=this.master().playlists,r=X_(yc(e)),a=K_(r),o=r.video&&yc(r.video)[0]||null,s=r.audio&&yc(r.audio)[0]||null;Object.keys(n).forEach((function(e){var r=n[e];if(-1===i.indexOf(r.id)&&r.excludeUntil!==1/0){i.push(r.id);var l=[],c=$_(t.masterPlaylistLoader_.master,r),u=K_(c);if(c.audio||c.video){if(u!==a&&l.push('codec count "'+u+'" !== "'+a+'"'),!t.sourceUpdater_.canChangeType()){var h=c.video&&yc(c.video)[0]||null,d=c.audio&&yc(c.audio)[0]||null;h&&o&&h.type.toLowerCase()!==o.type.toLowerCase()&&l.push('video codec "'+h.type+'" !== "'+o.type+'"'),d&&s&&d.type.toLowerCase()!==s.type.toLowerCase()&&l.push('audio codec "'+d.type+'" !== "'+s.type+'"')}l.length&&(r.excludeUntil=1/0,t.logger_("blacklisting "+r.id+": "+l.join(" && ")))}}}))},i.updateAdCues_=function(e){var t=0,i=this.seekable();i.length&&(t=i.start(0)),ex(e,this.cueTagsTrack_,t)},i.goalBufferLength=function(){var e=this.tech_.currentTime(),t=l_.GOAL_BUFFER_LENGTH,i=l_.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,l_.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,n)},i.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=l_.BUFFER_LOW_WATER_LINE,i=l_.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,l_.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,l_.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,this.experimentalBufferBasedABR?r:n)},i.bufferHighWaterLine=function(){return l_.BUFFER_HIGH_WATER_LINE},t}(bv.EventTarget),kx=function(e,t,i){return function(n){var r=e.master.playlists[t],a=my(r),o=gy(r);return"undefined"===typeof n?o:(n?delete r.disabled:r.disabled=!0,n===o||a||(i(),n?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),n)}},Px=function(e,t,i){var n=e.masterPlaylistController_,r=e.options_.smoothQualityChange,a=r?"smooth":"fast",o=n[a+"QualityChange_"].bind(n);if(t.attributes){var s=t.attributes.RESOLUTION;this.width=s&&s.width,this.height=s&&s.height,this.bandwidth=t.attributes.BANDWIDTH}this.codecs=$_(n.master(),t),this.playlist=t,this.id=i,this.enabled=kx(e.playlists,t.id,o)},Ex=function(e){e.representations=function(){var t=e.masterPlaylistController_.master(),i=Sy(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return i?i.filter((function(e){return!my(e)})).map((function(t,i){return new Px(e,t,t.id)})):[]}},Ax=["seeking","seeked","pause","playing","error"],Ix=function(e){var t=e.buffered,i=e.targetDuration,n=e.currentTime;return!!t.length&&(!(t.end(0)-t.start(0)<2*i)&&(!(n>t.start(0))&&t.start(0)-n<i))},Mx=function(){function e(e){var t=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ov("PlaybackWatcher"),this.logger_("initialize");var i=function(){return t.monitorCurrentTime_()},n=function(){return t.monitorCurrentTime_()},r=function(){return t.techWaiting_()},a=function(){return t.cancelTimer_()},o=function(){return t.fixesBadSeeks_()},s=this.masterPlaylistController_,l=["main","subtitle","audio"],c={};l.forEach((function(e){c[e]={reset:function(){return t.resetSegmentDownloads_(e)},updateend:function(){return t.checkSegmentDownloads_(e)}},s[e+"SegmentLoader_"].on("appendsdone",c[e].updateend),s[e+"SegmentLoader_"].on("playlistupdate",c[e].reset),t.tech_.on(["seeked","seeking"],c[e].reset)})),this.tech_.on("seekablechanged",o),this.tech_.on("waiting",r),this.tech_.on(Ax,a),this.tech_.on("canplay",n),this.tech_.one("play",i),this.dispose=function(){t.logger_("dispose"),t.tech_.off("seekablechanged",o),t.tech_.off("waiting",r),t.tech_.off(Ax,a),t.tech_.off("canplay",n),t.tech_.off("play",i),l.forEach((function(e){s[e+"SegmentLoader_"].off("appendsdone",c[e].updateend),s[e+"SegmentLoader_"].off("playlistupdate",c[e].reset),t.tech_.off(["seeked","seeking"],c[e].reset)})),t.checkCurrentTimeTimeout_&&Al.a.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Al.a.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Al.a.setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];this[e+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,i=t[e+"SegmentLoader_"],n=i.buffered_(),r=ty(this[e+"Buffered_"],n);this[e+"Buffered_"]=n,r?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:i.playlist_&&i.playlist_.id,buffered:ey(n)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+qv>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){var e=this.tech_.seeking();if(!e)return!1;var t,i=this.seekable(),n=this.tech_.currentTime(),r=this.afterSeekableWindow_(i,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow);if(r){var a=i.end(i.length-1);t=a}if(this.beforeSeekableWindow_(i,n)){var o=i.start(0);t=o+(o===i.end(0)?0:qv)}if("undefined"!==typeof t)return this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+Qv(i)+". Seeking to "+t+"."),this.tech_.setCurrentTime(t),!0;var s=this.tech_.buffered();return!!Ix({buffered:s,targetDuration:this.media().targetDuration,currentTime:n})&&(t=s.start(0)+qv,this.logger_("Buffered region starts ("+s.start(0)+")  just beyond seek point ("+n+"). Seeking to "+t+"."),this.tech_.setCurrentTime(t),!0)},t.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),i=Yv(t,e);return i.length&&e+3<=i.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var i=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var n=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,r=this.tech_.buffered(),a=this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t});if(a)return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var o=Xv(r,t);if(o.length>0){var s=o.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+s+", seeking to "+o.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*s,t),!0}return!1},t.afterSeekableWindow_=function(e,t,i,n){if(void 0===n&&(n=!1),!e.length)return!1;var r=e.end(e.length-1)+qv,a=!i.endList;return a&&n&&(r=e.end(e.length-1)+3*i.targetDuration),t>r},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(e){var t=e.videoBuffered,i=e.audioBuffered,n=e.currentTime;if(t){var r;if(t.length&&i.length){var a=Yv(t,n-3),o=Yv(t,n),s=Yv(i,n);s.length&&!o.length&&a.length&&(r={start:a.end(0),end:s.end(0)})}else{var l=Xv(t,n);l.length||(r=this.gapFromVideoUnderflow_(t,n))}return!!r&&(this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+n),!0)}},t.skipTheGap_=function(e){var t=this.tech_.buffered(),i=this.tech_.currentTime(),n=Xv(t,i);this.cancelTimer_(),0!==n.length&&i===e&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+Wv),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var i=Kv(e),n=0;n<i.length;n++){var r=i.start(n),a=i.end(n);if(t-r<4&&t-r>2)return{start:r,end:a}}return null},e}(),Dx={errorInterval:30,getSource:function(e){var t=this.tech({IWillNotUseThisInPlugins:!0}),i=t.currentSource_||this.currentSource();return e(i)}},jx=function e(t,i){var n=0,r=0,a=bv.mergeOptions(Dx,i);t.ready((function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var o=function(){r&&t.currentTime(r)},s=function(e){null!==e&&void 0!==e&&(r=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",o),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},l=function(){return Date.now()-n<1e3*a.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):a.getSource&&"function"===typeof a.getSource?(n=Date.now(),a.getSource.call(t,s)):void bv.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},c=function e(){t.off("loadedmetadata",o),t.off("error",l),t.off("dispose",e)},u=function(i){c(),e(t,i)};t.on("error",l),t.on("dispose",c),t.reloadSourceOnError=u},Lx=function(e){jx(this,e)},Rx="2.8.2",Nx="5.11.0",zx="0.16.0",Bx="4.7.0",Vx="3.1.2",Fx={PlaylistLoader:Hv,Playlist:Oy,utils:Fy,STANDARD_PLAYLIST_SELECTOR:ab,INITIAL_PLAYLIST_SELECTOR:lb,lastBandwidthSelector:ab,movingAverageBandwidthSelector:ob,comparePlaylistBandwidth:ib,comparePlaylistResolution:nb,xhr:Ey()};Object.keys(l_).forEach((function(e){Object.defineProperty(Fx,e,{get:function(){return bv.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),l_[e]},set:function(t){bv.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!==typeof t||t<0?bv.log.warn("value of Vhs."+e+" must be greater than or equal to 0"):l_[e]=t}})}));var Ux="videojs-vhs",Gx=function(e,t){for(var i=t.media(),n=-1,r=0;r<e.length;r++)if(e[r].id===i.id){n=r;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})},Hx=function(e,t){t.representations().forEach((function(t){e.addQualityLevel(t)})),Gx(e,t.playlists)};Fx.canPlaySource=function(){return bv.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Wx=function(e,t,i){if(!e)return e;var n={};t&&t.attributes&&t.attributes.CODECS&&(n=X_(yc(t.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(n.audio=i.attributes.CODECS);var r=wc(n.video),a=wc(n.audio),o={};for(var s in e)o[s]={},a&&(o[s].audioContentType=a),r&&(o[s].videoContentType=r),t.contentProtection&&t.contentProtection[s]&&t.contentProtection[s].pssh&&(o[s].pssh=t.contentProtection[s].pssh),"string"===typeof e[s]&&(o[s].url=e[s]);return bv.mergeOptions(e,o)},qx=function(e,t){return e.reduce((function(e,i){if(!i.contentProtection)return e;var n=t.reduce((function(e,t){var n=i.contentProtection[t];return n&&n.pssh&&(e[t]={pssh:n.pssh}),e}),{});return Object.keys(n).length&&e.push(n),e}),[])},Zx=function(e){var t=e.player,i=e.sourceKeySystems,n=e.audioMedia,r=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var a=n?r.concat([n]):r,o=qx(a,Object.keys(i)),s=[],l=[];return o.forEach((function(e){l.push(new Promise((function(e,i){t.tech_.one("keysessioncreated",e)}))),s.push(new Promise((function(i,n){t.eme.initializeMediaKeys({keySystems:e},(function(e){e?n(e):i()}))})))})),Promise.race([Promise.all(s),Promise.race(l)])},Yx=function(e){var t=e.player,i=e.sourceKeySystems,n=e.media,r=e.audioMedia,a=Wx(i,n,r);return!!a&&(t.currentSource().keySystems=a,!(a&&!t.eme)||(bv.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},Xx=function(){if(!Al.a.localStorage)return null;var e=Al.a.localStorage.getItem(Ux);if(!e)return null;try{return JSON.parse(e)}catch(t){return null}},Kx=function(e){if(!Al.a.localStorage)return!1;var t=Xx();t=t?bv.mergeOptions(t,e):e;try{Al.a.localStorage.setItem(Ux,JSON.stringify(t))}catch(i){return!1}return t},$x=function(e){return 0===e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(e.substring(e.indexOf(",")+1)):e};Fx.supportsNativeHls=function(){if(!Ml.a||!Ml.a.createElement)return!1;var e=Ml.a.createElement("video");if(!bv.getTech("Html5").isSupported())return!1;var t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return t.some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),Fx.supportsNativeDash=function(){return!!(Ml.a&&Ml.a.createElement&&bv.getTech("Html5").isSupported())&&/maybe|probably/i.test(Ml.a.createElement("video").canPlayType("application/dash+xml"))}(),Fx.supportsTypeNatively=function(e){return"hls"===e?Fx.supportsNativeHls:"dash"===e&&Fx.supportsNativeDash},Fx.isSupported=function(){return bv.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Qx=bv.getComponent("Component"),Jx=function(e){function t(t,i,n){var r;if(r=e.call(this,i,bv.mergeOptions(n.hls,n.vhs))||this,n.hls&&Object.keys(n.hls).length&&bv.log.warn("Using hls options is deprecated. Use vhs instead."),"number"===typeof n.initialBandwidth&&(r.options_.bandwidth=n.initialBandwidth),r.logger_=Ov("VhsHandler"),i.options_&&i.options_.playerId){var a=bv(i.options_.playerId);a.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return bv.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"hls-player-access"}),Rl()(r)},configurable:!0}),a.hasOwnProperty("vhs")||Object.defineProperty(a,"vhs",{get:function(){return bv.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"vhs-player-access"}),Rl()(r)},configurable:!0}),a.hasOwnProperty("dash")||Object.defineProperty(a,"dash",{get:function(){return bv.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Rl()(r)},configurable:!0}),r.player_=a}if(r.tech_=i,r.source_=t,r.stats={},r.ignoreNextSeekingEvent_=!1,r.setOptions_(),r.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return r.on(Ml.a,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=Ml.a.fullscreenElement||Ml.a.webkitFullscreenElement||Ml.a.mozFullScreenElement||Ml.a.msFullscreenElement;t&&t.contains(r.tech_.el())&&r.masterPlaylistController_.smoothQualityChange_()})),r.on(r.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),r.on(r.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),r.on(r.tech_,"play",r.play),r}zl()(t,e);var i=t.prototype;return i.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage="undefined"!==typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!==typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!==typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=Xx();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=l_.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===l_.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS"].forEach((function(t){"undefined"!==typeof e.source_[t]&&(e.options_[t]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},i.src=function(e,t){var i=this;if(e){this.setOptions_(),this.options_.src=$x(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Fx,this.options_.sourceType=Ec(t),this.options_.seekTo=function(e){i.tech_.setCurrentTime(e)},this.masterPlaylistController_=new Cx(this.options_);var n=bv.mergeOptions({liveRangeSafeTimeDelta:qv},this.options_,{seekable:function(){return i.seekable()},media:function(){return i.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new Mx(n),this.masterPlaylistController_.on("error",(function(){var e=bv.players[i.tech_.options_.playerId],t=i.masterPlaylistController_.error;"object"!==typeof t||t.code?"string"===typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));var r=this.options_.experimentalBufferBasedABR?Fx.movingAverageBandwidthSelector(.55):Fx.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):r.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Fx.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);e=this.throughput>0?1/this.throughput:0;var i=Math.floor(1/(t+e));return i},set:function(){bv.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return i.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return i.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return ey(i.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return i.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return i.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return i.tech_.name_},enumerable:!0},duration:{get:function(){return i.tech_.duration()},enumerable:!0},master:{get:function(){return i.playlists.master},enumerable:!0},playerDimensions:{get:function(){return i.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return ey(i.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return i.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){i.options_.useBandwidthFromLocalStorage&&Kx({bandwidth:i.bandwidth,throughput:Math.round(i.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){Ex(i)})),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",(function(){i.setupEme_()})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Al.a.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},i.setupEme_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,i=Yx({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});11!==bv.browser.IE_VERSION&&i?(this.logger_("waiting for EME key session creation"),Zx({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.master.playlists}).then((function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()}))["catch"]((function(t){e.logger_("error while creating EME key session",t),e.player_.error({message:"Failed to initialize media keys for EME",code:3})}))):this.masterPlaylistController_.sourceUpdater_.initializedEme()},i.setupQualityLevels_=function(){var e=this,t=bv.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){Hx(e.qualityLevels_,e)})),this.playlists.on("mediachange",(function(){Gx(e.qualityLevels_,e.playlists)})))},t.version=function(){return{"@videojs/http-streaming":Rx,"mux.js":Nx,"mpd-parser":zx,"m3u8-parser":Bx,"aes-decrypter":Vx}},i.version=function(){return this.constructor.version()},i.canChangeType=function(){return Xb.canChangeType()},i.play=function(){this.masterPlaylistController_.play()},i.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},i.duration=function(){return this.masterPlaylistController_.duration()},i.seekable=function(){return this.masterPlaylistController_.seekable()},i.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&Al.a.URL.revokeObjectURL&&(Al.a.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),e.prototype.dispose.call(this)},i.convertToProgramTime=function(e,t){return Xy({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},i.seekToProgramTime=function(e,t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=2),Ky({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},t}(Qx),ew={name:"videojs-http-streaming",VERSION:Rx,canHandleSource:function(e,t){void 0===t&&(t={});var i=bv.mergeOptions(bv.options,t);return ew.canPlayType(e.type,i)},handleSource:function(e,t,i){void 0===i&&(i={});var n=bv.mergeOptions(bv.options,i);return t.vhs=new Jx(e,t,n),bv.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return bv.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=Ey(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){void 0===t&&(t={});var i=bv.mergeOptions(bv.options,t),n=i.vhs.overrideNative,r=void 0===n?!bv.browser.IS_ANY_SAFARI:n,a=Ec(e),o=a&&(!Fx.supportsTypeNatively(a)||r);return o?"maybe":""}},tw=function(){return Tc("avc1.4d400d,mp4a.40.2")};tw()&&bv.getTech("Html5").registerSourceHandler(ew,0),bv.VhsHandler=Jx,Object.defineProperty(bv,"HlsHandler",{get:function(){return bv.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Jx},configurable:!0}),bv.VhsSourceHandler=ew,Object.defineProperty(bv,"HlsSourceHandler",{get:function(){return bv.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),ew},configurable:!0}),bv.Vhs=Fx,Object.defineProperty(bv,"Hls",{get:function(){return bv.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Fx},configurable:!0}),bv.use||(bv.registerComponent("Hls",Fx),bv.registerComponent("Vhs",Fx)),bv.options.vhs=bv.options.vhs||{},bv.options.hls=bv.options.hls||{},bv.registerPlugin?bv.registerPlugin("reloadSourceOnError",Lx):bv.plugin("reloadSourceOnError",Lx);var iw=bv,nw=(i("398e"),i("d489"));function rw(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function aw(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){rw(a,n,r,o,s,"next",e)}function s(e){rw(a,n,r,o,s,"throw",e)}o(void 0)}))}}var ow={name:"videoPlayer",props:["videoUrl","userName","hideControls","endStream"],data:function(){return{playUrl:"",player:null,loading:!0}},computed:{controls:function(){return!this.hideControls}},mounted:function(){var e=this;return aw(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.playUrl="http://zb.iot-cas.com/xiaKe/".concat(e.userName,".m3u8"),console.log(e.playUrl),setTimeout((function(){e.loading=!1,e.initPlayer()}),5e3);case 3:case"end":return t.stop()}}),t)})))()},methods:{initPlayer:function(){this.player&&this.player.dispose();var e=this.playUrl.includes("flv")?"video/x-flv":"application/x-mpegURL";this.player=iw(this.$refs.videoPlayer,{autolay:!0,sources:[{type:e,src:this.playUrl}],techOrder:["html5"],controls:this.controls,fluid:!1,language:"zh-CN",languages:{"zh-CN":nw}},(function(){console.log("onPlayerReady",this),this.play()}))}},beforeDestroy:function(){this.player&&(this.player.dispose(),window.onresize=null)},watch:{endStream:{handler:function(e){console.log(e)}}}},sw=ow,lw=(i("26ac"),i("84cc"),Object(d["a"])(sw,kl,Pl,!1,null,"4cce5a6c",null)),cw=lw.exports;function uw(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function hw(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?uw(Object(i),!0).forEach((function(t){dw(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):uw(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function dw(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function pw(e){return vw(e)||gw(e)||mw(e)||fw()}function fw(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mw(e,t){if(e){if("string"===typeof e)return yw(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?yw(e,t):void 0}}function gw(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function vw(e){if(Array.isArray(e))return yw(e)}function yw(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _w(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function bw(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){_w(a,n,r,o,s,"next",e)}function s(e){_w(a,n,r,o,s,"throw",e)}o(void 0)}))}}var xw={components:{Community:ml,ScreenHeader:f,ReportLayer:it,MapLayer:Kt,PersonDetail:fo,HotelDetail:bo,MapFilter:Po,Gald:Ro,ArcgisLayer:Da,DataTotal:wl,videoPlayer:cw,RyList:Fa,RyDetail:$a},name:"index",data:function(){return{mapData:{heatMapData:[],markers:[]},hotalData:[],redYellowData:[],detailList:{},hotelType:{1:"入境者酒店",3:"本土（广州市）密切接触者酒店",2:"入境者密切接触者酒店"},zIndex:1,showPlaceMap:!1,layer:0,showDataTotal:!1,websocket:null,endStream:!1,dialogWidth:{redYellow:"1040px"},chartUpdateTime:{ym:"",hs:""},redTotal:"",yellowTotal:""}},methods:{getChartUpdateTime:function(){var e=this;return bw(o.a.mark((function t(){var i,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ce();case 2:return i=t.sent,t.next=5,ke();case 5:n=t.sent,e.chartUpdateTime={ym:i,hs:n};case 7:case"end":return t.stop()}}),t)})))()},setHotelData:function(e){this.hotalData=e,this.setMarkers()},setRedYellowData:function(e){this.redYellowData=e,this.redYellowData&&this.redYellowData.length?(this.hotalData=[],this.$set(this.mapData,"markers",this.redYellowData),this.$set(this.mapData,"heatMapData",[])):this.$set(this.mapData,"markers",this.hotalData)},setMarkers:function(){this.$set(this.mapData,"markers",[].concat(pw(this.hotalData),pw(this.redYellowData)))},setHeatMapData:function(e){this.$set(this.mapData,"heatMapData",e)},showHotelDetal:function(e){var t=this;return bw(o.a.mark((function i(){var n;return o.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(1!==t.layer){i.next=3;break}return t.$refs.gald.showInfo(e),i.abrupt("return");case 3:return i.next=5,Object(ia["l"])(e.id);case 5:n=i.sent,t.$set(t.detailList,e.id,hw(hw(hw({},e),n),{},{detailType:"hotel"})),t.$forceUpdate();case 8:case"end":return i.stop()}}),i)})))()},showContactDetail:function(e){var t=this;return bw(o.a.mark((function i(){var n;return o.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Object(ia["n"])(e.sfzhzhm);case 2:n=i.sent,t.$set(t.detailList,e.sfzhzhm,hw(hw(hw({},e),n),{},{detailType:"person"})),t.$forceUpdate();case 5:case"end":return i.stop()}}),i)})))()},switchLayer:function(e){this.layer=e},showRyDetail:function(e){this.$set(this.detailList,e.idNumber,hw(hw({},e),{},{detailType:"ryDetail"}))},showRyTotal:function(e){this.$set(this.detailList,"ry_total",{detailType:"redYellow",type:e})},getRyTotal:function(e){this.redTotal=e.redTotal,this.yellowTotal=e.yellowTotal}},watch:{layer:function(e){0!==e&&(this.setHotelData([]),this.setHeatMapData([])),0===e&&(this.$refs["MapFilter"].hotelTypeChange(),this.$refs["MapFilter"].heatMapTypeChange())}},mounted:function(){var e=this;sessionStorage.screenType="",this.$store.state.authority.accessPaths.includes("big")||this.$router.push({path:"/401",replace:!0}),this.getChartUpdateTime(),window.mapItemClick=function(i){for(var n=0;n<i.path.length;n++)if("map_hotel"===i.path[n].className){var r=i.path[n],a=JSON.parse(r.getAttribute("extData"));a=a.join(" "),e.showHotelDetal(JSON.parse(a))}else if("alarm-marker animated zoomIn"===i.path[n].className){var o=i.path[n],s=JSON.parse(o.getAttribute("extData"));s.playUrl.indexOf("meet")<=-1?e.$set(e.detailList,s.name,{userName:s.name,playUrl:s.playUrl,detailType:"stream"}):window.open("https://".concat(window.location.host.indexOf("develop")<-1?"dnvideopre.iot-cas.com":"dnvideodev.iot-cas.com","/video/index.html#/?name=").concat(e.$store.state.user.username,"&romm=999")),t.endStream=!1}},window.redYellowItemClick=function(t){console.log("event",t);var i=t.getAttribute("data-key"),n=i.split("_")[0],r=i.split("_")[1],a=e.redYellowData.find((function(e){return e.name===n}));e.$set(e.detailList,i,hw(hw({},a),{},{type:r,detailType:"redYellow"}))},this.websocket=Ol();var t=this;this.websocket.onmessage=function(e){try{var i=JSON.parse(e.data);if(console.log(i),"app-spzb-02"===i.eventCode)return t.endStream=!0,void t.$refs.MapLayer.deleteEventMarker();var n=[113.532608,22.808156];i.location.longitude&&(n=[i.location.longitude,i.location.latitude]),t.$refs.MapLayer.addEventMarker(n,i)}catch(r){}}}},ww=xw,Tw=(i("f9e8"),i("8a85"),Object(d["a"])(ww,n,r,!1,null,"9617a932",null));t["default"]=Tw.exports},cf7c:function(e,t,i){"use strict";i("7cfb")},cf7e:function(e,t,i){var n=i("6d8b");function r(e){return this._axes[e]}var a=function(e){this._axes={},this._dimList=[],this.name=e||""};a.prototype={constructor:a,type:"cartesian",getAxis:function(e){return this._axes[e]},getAxes:function(){return n.map(this._dimList,r,this)},getAxesByScale:function(e){return e=e.toLowerCase(),n.filter(this.getAxes(),(function(t){return t.scale.type===e}))},addAxis:function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},dataToCoord:function(e){return this._dataCoordConvert(e,"dataToCoord")},coordToData:function(e){return this._dataCoordConvert(e,"coordToData")},_dataCoordConvert:function(e,t){for(var i=this._dimList,n=e instanceof Array?[]:{},r=0;r<i.length;r++){var a=i[r],o=this._axes[a];n[a]=o[t](e[a])}return n}};var o=a;e.exports=o},cfd2:function(e,t,i){"use strict";i("d50f")},d02c:function(e,t,i){var n=i("ef34"),r=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function a(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function o(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function s(){this.values=r(null)}function l(e,t,i,n){var r=n?e.split(n):[e];for(var a in r)if("string"===typeof r[a]){var o=r[a].split(i);if(2===o.length){var s=o[0],l=o[1];t(s,l)}}}function c(e,t,i){var n=e;function r(){var t=o(e);if(null===t)throw new a(a.Errors.BadTimeStamp,"Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function c(e,t){var n=new s;l(e,(function(e,t){switch(e){case"region":for(var r=i.length-1;r>=0;r--)if(i[r].id===t){n.set(e,i[r].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];n.integer(e,o),n.percent(e,o)&&n.set("snapToLines",!1),n.alt(e,o,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start","center","end"]);break;case"position":a=t.split(","),n.percent(e,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start","center","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","center","end","left","right"]);break}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");try{t.line=n.get("line","auto")}catch(r){}t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100);try{t.align=n.get("align","center")}catch(r){t.align=n.get("align","middle")}try{t.position=n.get("position","auto")}catch(r){t.position=n.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=n.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}function u(){e=e.replace(/^\s+/,"")}if(u(),t.startTime=r(),u(),"--\x3e"!==e.substr(0,3))throw new a(a.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),u(),t.endTime=r(),u(),c(e,t)}a.prototype=r(Error.prototype),a.prototype.constructor=a,a.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},s.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t),t>=0&&t<=100))&&(this.set(e,t),!0)}};var u=n.createElement&&n.createElement("textarea"),h={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},d={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},p={v:"title",lang:"lang"},f={rt:"ruby"};function m(e,t){function i(){if(!t)return null;function e(e){return t=t.substr(e.length),e}var i=t.match(/^([^<]*)(<[^>]*>?)?/);return e(i[1]?i[1]:i[2])}function n(e){return u.innerHTML=e,e=u.textContent,u.textContent="",e}function r(e,t){return!f[t.localName]||f[t.localName]===e.localName}function a(t,i){var n=h[t];if(!n)return null;var r=e.document.createElement(n),a=p[t];return a&&i&&(r[a]=i.trim()),r}var s,l=e.document.createElement("div"),c=l,m=[];while(null!==(s=i()))if("<"!==s[0])c.appendChild(e.document.createTextNode(n(s)));else{if("/"===s[1]){m.length&&m[m.length-1]===s.substr(2).replace(">","")&&(m.pop(),c=c.parentNode);continue}var g,v=o(s.substr(1,s.length-2));if(v){g=e.document.createProcessingInstruction("timestamp",v),c.appendChild(g);continue}var y=s.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y)continue;if(g=a(y[1],y[3]),!g)continue;if(!r(c,g))continue;if(y[2]){var _=y[2].split(".");_.forEach((function(e){var t=/^bg_/.test(e),i=t?e.slice(3):e;if(d.hasOwnProperty(i)){var n=t?"background-color":"color",r=d[i];g.style[n]=r}})),g.className=_.join(" ")}m.push(y[1]),c.appendChild(g),c=g}return l}var g=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function v(e){for(var t=0;t<g.length;t++){var i=g[t];if(e>=i[0]&&e<=i[1])return!0}return!1}function y(e){var t,i=[],n="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var i=t.childNodes.length-1;i>=0;i--)e.push(t.childNodes[i])}function a(e){if(!e||!e.length)return null;var t=e.pop(),i=t.textContent||t.innerText;if(i){var n=i.match(/^.*(\n|\r)/);return n?(e.length=0,n[0]):i}return"ruby"===t.tagName?a(e):t.childNodes?(r(e,t),a(e)):void 0}r(i,e);while(n=a(i))for(var o=0;o<n.length;o++)if(t=n.charCodeAt(o),v(t))return"rtl";return"ltr"}function _(e){if("number"===typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,i=t.textTrackList,n=0,r=0;r<i.length&&i[r]!==t;r++)"showing"===i[r].mode&&n++;return-1*++n}function b(){}function x(e,t,i){b.call(this),this.cue=t,this.cueDiv=m(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={direction:y(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size;break}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function w(e){var t,i,n,r;if(e.div){i=e.div.offsetHeight,n=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||i,this.bottom=e.bottom||r+(e.height||i),this.width=e.width||n,this.lineHeight=void 0!==t?t:e.lineHeight}function T(e,t,i,n){function r(e,t){for(var r,a=new w(e),o=1,s=0;s<t.length;s++){while(e.overlapsOppositeAxis(i,t[s])||e.within(i)&&e.overlapsAny(n))e.move(t[s]);if(e.within(i))return e;var l=e.intersectPercentage(i);o>l&&(r=new w(e),o=l),e=new w(a)}return r||a}var a=new w(t),o=t.cue,s=_(o),l=[];if(o.snapToLines){var c;switch(o.vertical){case"":l=["+y","-y"],c="height";break;case"rl":l=["+x","-x"],c="width";break;case"lr":l=["-x","+x"],c="width";break}var u=a.lineHeight,h=u*Math.round(s),d=i[c]+u,p=l[0];Math.abs(h)>d&&(h=h<0?-1:1,h*=Math.ceil(d/u)*u),s<0&&(h+=""===o.vertical?i.height:i.width,l=l.reverse()),a.move(p,h)}else{var f=a.lineHeight/i.height*100;switch(o.lineAlign){case"center":s-=f/2;break;case"end":s-=f;break}switch(o.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")});break}l=["+y","-x","+x","-y"],a=new w(t)}var m=r(a,l);t.move(m.toCSSCompatValues(i))}function S(){}b.prototype.applyStyles=function(e,t){for(var i in t=t||this.div,e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},b.prototype.formatStyle=function(e,t){return 0===e?0:e+t},x.prototype=r(b.prototype),x.prototype.constructor=x,w.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t;break}},w.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},w.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},w.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},w.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},w.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),i=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),n=t*i;return n/(this.height*this.width)},w.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},w.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var r={left:e.left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||i};return r},S.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},S.convertCueToDOMTree=function(e,t){return e&&t?m(e,t):null};var O=.05,C="sans-serif",k="1.5%";S.processCues=function(e,t,i){if(!e||!t||!i)return null;while(i.firstChild)i.removeChild(i.firstChild);var n=e.document.createElement("div");function r(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin=k,i.appendChild(n),r(t)){var a=[],o=w.getSimpleBoxPosition(n),s=Math.round(o.height*O*100)/100,l={font:s+"px "+C};(function(){for(var i,r,s=0;s<t.length;s++)r=t[s],i=new x(e,r,l),n.appendChild(i.div),T(e,i,o,a),r.displayState=i.div,a.push(w.getSimpleBoxPosition(i))})()}else for(var c=0;c<t.length;c++)n.appendChild(t[c].displayState)},S.Parser=function(e,t,i){i||(i=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]},S.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof a))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function i(){var e=t.buffer,i=0;while(i<e.length&&"\r"!==e[i]&&"\n"!==e[i])++i;var n=e.substr(0,i);return"\r"===e[i]&&++i,"\n"===e[i]&&++i,t.buffer=e.substr(i),n}function n(e){var i=new s;if(l(e,(function(e,t){switch(e){case"id":i.set(e,t);break;case"width":i.percent(e,t);break;case"lines":i.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var r=new s;if(r.percent("x",n[0]),r.percent("y",n[1]),!r.has("x")||!r.has("y"))break;i.set(e+"X",r.get("x")),i.set(e+"Y",r.get("y"));break;case"scroll":i.alt(e,t,["up"]);break}}),/=/,/\s/),i.has("id")){var n=new(t.vttjs.VTTRegion||t.window.VTTRegion);n.width=i.get("width",100),n.lines=i.get("lines",3),n.regionAnchorX=i.get("regionanchorX",0),n.regionAnchorY=i.get("regionanchorY",100),n.viewportAnchorX=i.get("viewportanchorX",0),n.viewportAnchorY=i.get("viewportanchorY",100),n.scroll=i.get("scroll",""),t.onregion&&t.onregion(n),t.regionList.push({id:i.get("id"),region:n})}}function r(e){var i=new s;l(e,(function(e,t){switch(e){case"MPEGT":i.integer(e+"S",t);break;case"LOCA":i.set(e+"L",o(t));break}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")})}function u(e){e.match(/X-TIMESTAMP-MAP/)?l(e,(function(e,t){switch(e){case"X-TIMESTAMP-MAP":r(t);break}}),/=/):l(e,(function(e,t){switch(e){case"Region":n(t);break}}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var h;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;h=i();var d=h.match(/^WEBVTT([ \t].*)?$/);if(!d||!d[0])throw new a(a.Errors.BadSignature);t.state="HEADER"}var p=!1;while(t.buffer){if(!/\r\n|\n/.test(t.buffer))return this;switch(p?p=!1:h=i(),t.state){case"HEADER":/:/.test(h)?u(h):h||(t.state="ID");continue;case"NOTE":h||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(h)){t.state="NOTE";break}if(!h)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(m){t.cue.align="middle"}if(t.state="CUE",-1===h.indexOf("--\x3e")){t.cue.id=h;continue}case"CUE":try{c(h,t.cue,t.regionList)}catch(m){t.reportOrThrowError(m),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var f=-1!==h.indexOf("--\x3e");if(!h||f&&(p=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=h.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":h||(t.state="ID");continue}}}catch(m){t.reportOrThrowError(m),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new a(a.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=S},d0cb:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("38862"),r=i("2f98");function a(e,t){const i=e;i.include(r["a"]),i.attributes.add("position","vec3"),i.attributes.add("normal","vec3"),i.attributes.add("auxpos1","vec4"),i.vertex.uniforms.add("proj","mat4"),i.vertex.uniforms.add("view","mat4"),i.vertex.uniforms.add("viewNormal","mat4"),i.vertex.uniforms.add("viewport","vec4"),i.vertex.uniforms.add("camPos","vec3"),i.vertex.uniforms.add("polygonOffset","float"),i.vertex.uniforms.add("cameraGroundRelative","float"),i.vertex.uniforms.add("pixelRatio","float"),i.vertex.uniforms.add("perDistancePixelRatio","float"),i.vertex.uniforms.add("uRenderTransparentlyOccludedHUD","float"),t.verticalOffsetEnabled&&i.vertex.uniforms.add("verticalOffset","vec4"),t.screenSizePerspectiveEnabled&&i.vertex.uniforms.add("screenSizePerspectiveAlignment","vec4"),i.vertex.uniforms.add("hudVisibilityTexture","sampler2D"),i.vertex.constants.add("smallOffsetAngle","float",.984807753012208),i.vertex.code.add(n["a"]`
    struct ProjectHUDAux {
      vec3 posModel;
      vec3 posView;
      vec3 vnormal;

      float distanceToCamera;
      float absCosAngle;
    };
  `),i.vertex.code.add(n["a"]`
    float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {
      float pointGroundSign = sign(pointGroundDistance);

      if (pointGroundSign == 0.0) {
        pointGroundSign = cameraGroundRelative;
      }

      // cameraGroundRelative is -1 if camera is below ground, 1 if above ground
      // groundRelative is 1 if both camera and symbol are on the same side of the ground, -1 otherwise
      float groundRelative = cameraGroundRelative * pointGroundSign;

      // view angle dependent part of polygon offset emulation
      // we take the absolute value because the sign that is dropped is
      // instead introduced using the ground-relative position of the symbol and the camera
      if (polygonOffset > .0) {
        float cosAlpha = clamp(absCosAngle, 0.01, 1.0);

        float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;
        float factor = (1.0 - tanAlpha / viewport[2]);

        // same side of the terrain
        if (groundRelative > 0.0) {
          posView *= factor;
        }
        // opposite sides of the terrain
        else {
          posView /= factor;
        }
      }

      return groundRelative;
    }
  `),t.isDraped||i.vertex.code.add(n["a"]`
    void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {
      float distanceToCamera = length(posView);

      // Compute offset in world units for a half pixel shift
      float pixelOffset = distanceToCamera * perDistancePixelRatio * 0.5;

      // Apply offset along normal in the direction away from the ground surface
      vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;

      // Apply the same offset also on the view space position
      vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;

      posModel += modelOffset;
      posView += viewOffset;
    }
  `),i.vertex.code.add(n["a"]`
    vec4 projectPositionHUD(out ProjectHUDAux aux) {
      // centerOffset is in view space and is used to implement world size offsetting
      // of labels with respect to objects. It also pulls the label towards the viewer
      // so that the label is visible in front of the object.
      vec3 centerOffset = auxpos1.xyz;

      // The pointGroundDistance is the distance of the geometry to the ground and is
      // negative if the point is below the ground, or positive if the point is above
      // ground.
      float pointGroundDistance = auxpos1.w;

      aux.posModel = position;
      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;
      aux.vnormal = normal;
      ${t.isDraped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);"}

      // Screen sized offset in world space, used for example for line callouts
      // Note: keep this implementation in sync with the CPU implementation, see
      //   - MaterialUtil.verticalOffsetAtDistance
      //   - HUDMaterial.applyVerticalOffsetTransformation

      aux.distanceToCamera = length(aux.posView);

      vec3 viewDirObjSpace = normalize(camPos - aux.posModel);
      float cosAngle = dot(aux.vnormal, viewDirObjSpace);

      aux.absCosAngle = abs(cosAngle);

      ${t.screenSizePerspectiveEnabled&&(t.verticalOffsetEnabled||1===t.screenCenterOffsetUnitsEnabled)?"vec4 perspectiveFactor = screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":""}

      ${t.verticalOffsetEnabled?t.screenSizePerspectiveEnabled?"float verticalOffsetScreenHeight = applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight = verticalOffset.x;":""}

      ${t.verticalOffsetEnabled?n["a"]`
            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);
            vec3 modelOffset = aux.vnormal * worldOffset;
            aux.posModel += modelOffset;
            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;
            aux.posView += viewOffset;
            // Since we elevate the object, we need to take that into account
            // in the distance to ground
            pointGroundDistance += worldOffset;`:""}

      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);

      ${1!==t.screenCenterOffsetUnitsEnabled?n["a"]`
            // Apply x/y in view space, but z in screen space (i.e. along posView direction)
            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);

            // Same material all have same z != 0.0 condition so should not lead to
            // branch fragmentation and will save a normalization if it's not needed
            if (centerOffset.z != 0.0) {
              aux.posView -= normalize(aux.posView) * centerOffset.z;
            }
          `:""}

      vec4 posProj = proj * vec4(aux.posView, 1.0);

      ${1===t.screenCenterOffsetUnitsEnabled?t.screenSizePerspectiveEnabled?"float centerOffsetY = applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY = centerOffset.y;":""}

      ${1===t.screenCenterOffsetUnitsEnabled?"posProj.xy += vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":""}

      // constant part of polygon offset emulation
      posProj.z -= groundRelative * polygonOffset * posProj.w;
      return posProj;
    }
  `),i.vertex.code.add(n["a"]`
    bool testVisibilityHUD(vec4 posProj) {
      // For occlusion testing, use the nearest pixel center to avoid
      // subpixel filtering messing up the color we use to test for
      vec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);

      vec4 occlusionPixel = texture2D(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);

      // the red pixel here indicates that the occlusion pixel passed the depth test against solid geometry and was written
      // the green pixel stores transparency of transparent geometry (1.0 -> fully transparent)
      // note that we also check against green == 0.0, i.e. transparent geometry that has opaque parts

      // thus we render visible pixels that are occluded by semi-transparent (but not fully transparent!) geometry here
      if (uRenderTransparentlyOccludedHUD > 0.5) {
        // multiplying by uRenderTransparentlyOccludedHUD allows us to ignore the second condition if
        // uRenderTransparentlyOccludedHUD = 0.75
        return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * uRenderTransparentlyOccludedHUD < 1.0;
      }

      // and visible pixels that are not occluded by semi-transparent geometry here
      return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;
    }
  `)}!function(e){function t(e,t){e.setUniform1f("uRenderTransparentlyOccludedHUD",0===t.renderTransparentlyOccludedHUD?1:1===t.renderTransparentlyOccludedHUD?0:.75)}function i(e,t,i){t.setUniform1i("hudVisibilityTexture",4),e.bindTexture(i.hudVisibilityTexture,4),e.setActiveTexture(0)}e.bindUniforms=t,e.bindVisibilityTexture=i}(a||(a={}))},d136:function(e,t,i){(function(t){var i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,n=/^([^\/?#]*)([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),t=t.trim(),!t){if(!i.alwaysNormalize)return e;var r=o.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=o.normalizePath(r.path),o.buildURLFromParts(r)}var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return i.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var c={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(c.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var u=s.path,h=u.substring(0,u.lastIndexOf("/")+1)+a.path;c.path=o.normalizePath(h)}else c.path=s.path,a.params||(c.params=s.params,a.query||(c.query=s.query));return null===c.path&&(c.path=i.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(c)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){e=e.split("").reverse().join("").replace(r,"");while(e.length!==(e=e.replace(a,"")).length);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o})()},d15d:function(e,t,i){var n=i("6d8b"),r=n.createHashMap,a=n.each;function o(e){var t=r();e.eachSeries((function(e){var i=e.get("stack");if(i){var n=t.get(i)||t.set(i,[]),r=e.getData(),a={stackResultDimension:r.getCalculationInfo("stackResultDimension"),stackedOverDimension:r.getCalculationInfo("stackedOverDimension"),stackedDimension:r.getCalculationInfo("stackedDimension"),stackedByDimension:r.getCalculationInfo("stackedByDimension"),isStackedByIndex:r.getCalculationInfo("isStackedByIndex"),data:r,seriesModel:e};if(!a.stackedDimension||!a.isStackedByIndex&&!a.stackedByDimension)return;n.length&&r.setCalculationInfo("stackedOnSeries",n[n.length-1].seriesModel),n.push(a)}})),t.each(s)}function s(e){a(e,(function(t,i){var n=[],r=[NaN,NaN],a=[t.stackResultDimension,t.stackedOverDimension],o=t.data,s=t.isStackedByIndex,l=o.map(a,(function(a,l,c){var u,h,d=o.get(t.stackedDimension,c);if(isNaN(d))return r;s?h=o.getRawIndex(c):u=o.get(t.stackedByDimension,c);for(var p=NaN,f=i-1;f>=0;f--){var m=e[f];if(s||(h=m.data.rawIndexOf(m.stackedByDimension,u)),h>=0){var g=m.data.getByRawIndex(m.stackResultDimension,h);if(d>=0&&g>0||d<=0&&g<0){d+=g,p=g;break}}}return n[0]=d,n[1]=p,n}));o.hostModel.setData(l),t.data=l}))}e.exports=o},d232:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));i("c120");var n=i("e92d"),r=i("6706"),a=i("7dcb");n["a"].getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");class o extends a["a"]{constructor(e,t){super(),this.lineStart=e,this.lineEnd=t}equals(e){return e instanceof o&&Object(r["d"])(this.lineStart,e.lineStart)&&Object(r["d"])(this.lineEnd,e.lineEnd)}}},d28f:function(e,t,i){var n=i("3eba");i("84d5"),i("4650"),i("5e97");var r=i("903c"),a=i("6cb7");n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,r),a.registerSubTypeDefaulter("legend",(function(){return"plain"}))},d2a5:function(e,t,i){var n=i("3eba");n.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},(function(){})),n.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},(function(){}))},d2cf:function(e,t,i){var n=i("6d8b"),r=i("401b"),a=i("cb6d"),o=i("1fab"),s=i("607d"),l=i("0b44"),c="silent";function u(e,t,i){return{type:e,event:i,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:i.zrX,offsetY:i.zrY,gestureEvent:i.gestureEvent,pinchX:i.pinchX,pinchY:i.pinchY,pinchScale:i.pinchScale,wheelDelta:i.zrDelta,zrByTouch:i.zrByTouch,which:i.which,stop:h}}function h(){s.stop(this.event)}function d(){}d.prototype.dispose=function(){};var p=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],f=function(e,t,i,n){o.call(this),this.storage=e,this.painter=t,this.painterRoot=n,i=i||new d,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,this._gestureMgr,a.call(this),this.setHandlerProxy(i)};function m(e,t,i){if(e[e.rectHover?"rectContain":"contain"](t,i)){var n,r=e;while(r){if(r.clipPath&&!r.clipPath.contain(t,i))return!1;r.silent&&(n=!0),r=r.parent}return!n||c}return!1}function g(e,t,i){var n=e.painter;return t<0||t>n.getWidth()||i<0||i>n.getHeight()}f.prototype={constructor:f,setHandlerProxy:function(e){this.proxy&&this.proxy.dispose(),e&&(n.each(p,(function(t){e.on&&e.on(t,this[t],this)}),this),e.handler=this),this.proxy=e},mousemove:function(e){var t=e.zrX,i=e.zrY,n=g(this,t,i),r=this._hovered,a=r.target;a&&!a.__zr&&(r=this.findHover(r.x,r.y),a=r.target);var o=this._hovered=n?{x:t,y:i}:this.findHover(t,i),s=o.target,l=this.proxy;l.setCursor&&l.setCursor(s?s.cursor:"default"),a&&s!==a&&this.dispatchToElement(r,"mouseout",e),this.dispatchToElement(o,"mousemove",e),s&&s!==a&&this.dispatchToElement(o,"mouseover",e)},mouseout:function(e){var t=e.zrEventControl,i=e.zrIsToLocalDOM;"only_globalout"!==t&&this.dispatchToElement(this._hovered,"mouseout",e),"no_globalout"!==t&&!i&&this.trigger("globalout",{type:"globalout",event:e})},resize:function(e){this._hovered={}},dispatch:function(e,t){var i=this[e];i&&i.call(this,t)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(e){var t=this.proxy;t.setCursor&&t.setCursor(e)},dispatchToElement:function(e,t,i){e=e||{};var n=e.target;if(!n||!n.silent){var r="on"+t,a=u(t,e,i);while(n)if(n[r]&&(a.cancelBubble=n[r].call(n,a)),n.trigger(t,a),n=n.parent,a.cancelBubble)break;a.cancelBubble||(this.trigger(t,a),this.painter&&this.painter.eachOtherLayer((function(e){"function"===typeof e[r]&&e[r].call(e,a),e.trigger&&e.trigger(t,a)})))}},findHover:function(e,t,i){for(var n=this.storage.getDisplayList(),r={x:e,y:t},a=n.length-1;a>=0;a--){var o;if(n[a]!==i&&!n[a].ignore&&(o=m(n[a],e,t))&&(!r.topTarget&&(r.topTarget=n[a]),o!==c)){r.target=n[a];break}}return r},processGesture:function(e,t){this._gestureMgr||(this._gestureMgr=new l);var i=this._gestureMgr;"start"===t&&i.clear();var n=i.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if("end"===t&&i.clear(),n){var r=n.type;e.gestureEvent=r,this.dispatchToElement({target:n.target},r,n.event)}}},n.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],(function(e){f.prototype[e]=function(t){var i,n,a=t.zrX,o=t.zrY,s=g(this,a,o);if("mouseup"===e&&s||(i=this.findHover(a,o),n=i.target),"mousedown"===e)this._downEl=n,this._downPoint=[t.zrX,t.zrY],this._upEl=n;else if("mouseup"===e)this._upEl=n;else if("click"===e){if(this._downEl!==this._upEl||!this._downPoint||r.dist(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(i,e,t)}})),n.mixin(f,o),n.mixin(f,a);var v=f;e.exports=v},d357:function(e,t,i){var n=i("6d8b"),r=n.each,a=i("1c5f"),o=a.simpleLayout,s=a.simpleLayoutEdge;function l(e,t){e.eachSeriesByType("graph",(function(e){var t=e.get("layout"),i=e.coordinateSystem;if(i&&"view"!==i.type){var n=e.getData(),a=[];r(i.dimensions,(function(e){a=a.concat(n.mapDimension(e,!0))}));for(var l=0;l<n.count();l++){for(var c=[],u=!1,h=0;h<a.length;h++){var d=n.get(a[h],l);isNaN(d)||(u=!0),c.push(d)}u?n.setItemLayout(l,i.dataToPoint(c)):n.setItemLayout(l,[NaN,NaN])}s(n.graph,e)}else t&&"none"!==t||o(e)}))}e.exports=l},d36e:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n=i("d7f7"),r=i("7c51"),a=i("35b3"),o=i("7438"),s=i("8675"),l=i("a4ee"),c=i("c3a4"),u=i("ca98"),h=i("da35"),d=i("fa1e"),p=i("8e374"),f=i("189c"),m=i("8e97"),g=i("d272"),v=i("6a07"),y=i("c6d7"),_=i("87b7"),b=i("1962");class x extends u["a"]{initializeProgram(e){const t=x.shader.get(),i=this.configuration,n=t.build({output:i.output,OITEnabled:0===i.transparencyPassType,attributeColor:i.vertexColors,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,multipassTerrainEnabled:i.multipassTerrainEnabled,cullAboveGround:i.cullAboveGround});return new p["a"](e.rctx,n.generateSource("vertex"),n.generateSource("fragment"),d["a"])}bindPass(e,t,i){m["a"].bindProjectionMatrix(this.program,i.camera.projectionMatrix),this.program.setUniform4fv("eColor",t.color),4===this.configuration.output&&v["a"].bindOutputHighlight(e,this.program,i),(1===this.configuration.output||i.multipassTerrainEnabled)&&this.program.setUniform2fv("cameraNearFar",i.camera.nearFar),i.multipassTerrainEnabled&&(this.program.setUniform2fv("inverseViewport",i.inverseViewport),Object(y["a"])(this.program,e,i))}bindDraw(e){m["a"].bindView(this.program,e),g["a"].bindUniformsWithOrigin(this.program,this.configuration,e)}setPipelineState(e,t){const i=this.configuration,n=3===e,r=2===e,a=e=>0!==e&&{face:1===e?1028:1029,mode:2305};return Object(f["d"])({blending:0!==i.output&&7!==i.output||!i.transparent?null:n?o["f"]:Object(o["a"])(e),culling:a(i.cullFace),depthTest:{func:Object(o["b"])(e)},depthWrite:n||r?i.writeDepth&&f["c"]:null,colorWrite:f["b"],stencilWrite:i.sceneHasOcludees?_["h"]:null,stencilTest:i.sceneHasOcludees?t?_["d"]:_["c"]:null,polygonOffset:n||r?i.polygonOffset&&w:Object(o["g"])(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}getPipelineState(e){return e?this._occludeePipelineState:this.pipeline}}x.shader=new c["a"](b["a"],()=>i.e("chunk-2d0de726").then(i.bind(null,"864f")));const w={factor:1,units:1};class T extends h["a"]{constructor(){super(...arguments),this.output=0,this.cullFace=0,this.slicePlaneEnabled=!1,this.vertexColors=!1,this.transparent=!1,this.polygonOffset=!1,this.enableOffset=!0,this.writeDepth=!0,this.sceneHasOcludees=!1,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!0}}Object(l["a"])([Object(h["b"])({count:8})],T.prototype,"output",void 0),Object(l["a"])([Object(h["b"])({count:3})],T.prototype,"cullFace",void 0),Object(l["a"])([Object(h["b"])()],T.prototype,"slicePlaneEnabled",void 0),Object(l["a"])([Object(h["b"])()],T.prototype,"vertexColors",void 0),Object(l["a"])([Object(h["b"])()],T.prototype,"transparent",void 0),Object(l["a"])([Object(h["b"])()],T.prototype,"polygonOffset",void 0),Object(l["a"])([Object(h["b"])()],T.prototype,"enableOffset",void 0),Object(l["a"])([Object(h["b"])()],T.prototype,"writeDepth",void 0),Object(l["a"])([Object(h["b"])()],T.prototype,"sceneHasOcludees",void 0),Object(l["a"])([Object(h["b"])({count:4})],T.prototype,"transparencyPassType",void 0),Object(l["a"])([Object(h["b"])()],T.prototype,"multipassTerrainEnabled",void 0),Object(l["a"])([Object(h["b"])()],T.prototype,"cullAboveGround",void 0);class S extends a["a"]{constructor(e){super(e,C),this.supportsEdges=!0,this.techniqueConfig=new T}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.params.cullFace,this.techniqueConfig.vertexColors=this.params.vertexColors,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.enableOffset=!t||t.camera.relativeElevation<o["e"],this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!t||t.cullAboveGround,this.techniqueConfig}getPassParameters(){return this.params}intersect(e,t,i,n,a,o,s){Object(r["e"])(e,t,n,a,o,void 0,s)}getGLMaterial(e){return 0===e.output||7===e.output||4===e.output||1===e.output&&this.params.writeLinearDepth?new O(e):void 0}createBufferWriter(){return new s["a"](s["b"])}}class O extends n["a"]{constructor(e){super(e),this.updateParameters()}updateParameters(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(x,this.material.getTechniqueConfig(this.output,e),this.technique)}beginSlot(e){return 4===this.output?3===e:e===(this.technique.configuration.transparent?this.technique.configuration.writeDepth?5:8:3)}_updateOccludeeState(e){e.hasOccludees!==this.material.params.sceneHasOcludees&&this.material.setParameterValues({sceneHasOcludees:e.hasOccludees})}ensureParameters(e){0!==this.output&&7!==this.output||this._updateOccludeeState(e),this.updateParameters(e)}bind(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}getPipelineState(e,t){return this.technique.getPipelineState(t)}}const C={color:[1,1,1,1],transparent:!1,writeDepth:!0,writeLinearDepth:!1,vertexColors:!1,polygonOffset:!1,slicePlaneEnabled:!1,cullFace:0,sceneHasOcludees:!1,...a["b"]}},d3cf:function(e,t,i){"use strict";i.d(t,"a",(function(){return m})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return s}));i("c120");var n=i("a21b"),r=(i("7ffa"),i("b2b2")),a=i("a9ab"),o=(i("8d60"),i("1a54"));function s(e){return"declaredClass"in e}function l(e){return"declaredClass"in e}function c(e){return Object(r["j"])(e)?null:s(e)?e:Object(a["a"])(u(e))}function u(e){const t=e.spatialReference.toJSON();switch(e.type){case"point":{const{x:i,y:n,z:r,m:a}=e;return{x:i,y:n,z:r,m:a,spatialReference:t}}case"polygon":{const{rings:i,hasZ:n,hasM:r}=e;return{rings:h(i),hasZ:n,hasM:r,spatialReference:t}}case"polyline":{const{paths:i,hasZ:n,hasM:r}=e;return{paths:h(i),hasZ:n,hasM:r,spatialReference:t}}case"extent":{const{xmin:i,xmax:n,ymin:r,ymax:a,zmin:o,zmax:s,mmin:l,mmax:c,hasZ:u,hasM:h}=e;return{xmin:i,xmax:n,ymin:r,ymax:a,zmin:o,zmax:s,mmin:l,mmax:c,hasZ:u,hasM:h,spatialReference:t}}case"multipoint":{const{points:i,hasZ:n,hasM:r}=e;return{points:f(i)?d(i):i,hasZ:n,hasM:r,spatialReference:t}}default:return}}function h(e){return p(e)?e.map(e=>d(e)):e}function d(e){return e.map(e=>Object(n["n"])(e))}function p(e){for(const t of e)if(0!==t.length)return f(t);return!1}function f(e){return e.length&&(Object(n["d"])(e[0])||Object(n["e"])(e[0]))}function m(e,t){if(!e)return null;let i;if(l(e)){if(null==t)return e.clone();if(l(t))return t.copy(e)}return null!=t?(i=t,i.x=e.x,i.y=e.y,i.spatialReference=e.spatialReference,e.hasZ?(i.z=e.z,i.hasZ=e.hasZ):(i.z=null,i.hasZ=!1),e.hasM?(i.m=e.m,i.hasM=!0):(i.m=null,i.hasM=!1)):(i=Object(o["d"])(e.x,e.y,e.z,e.spatialReference),e.hasM&&(i.m=e.m,i.hasM=!0)),i}},d3f4:function(e,t){function i(e){return{seriesType:e,reset:function(e,t){var i=t.findComponents({mainType:"legend"});if(i&&i.length){var n=e.getData();n.filterSelf((function(e){for(var t=n.getName(e),r=0;r<i.length;r++)if(!i[r].isSelected(t))return!1;return!0}))}}}}e.exports=i},d489:function(e){e.exports=JSON.parse('{"Play":"播放","Pause":"暂停","Current Time":"当前时间","Duration":"时长","Remaining Time":"剩余时间","Stream Type":"媒体流类型","LIVE":"直播","Loaded":"加载完成","Progress":"进度","Fullscreen":"全屏","Non-Fullscreen":"退出全屏","Picture-in-Picture":"画中画","Exit Picture-in-Picture":"退出画中画","Mute":"静音","Unmute":"取消静音","Playback Rate":"播放速度","Subtitles":"字幕","subtitles off":"关闭字幕","Captions":"内嵌字幕","captions off":"关闭内嵌字幕","Chapters":"节目段落","Close Modal Dialog":"关闭弹窗","Descriptions":"描述","descriptions off":"关闭描述","Audio Track":"音轨","You aborted the media playback":"视频播放被终止","A network error caused the media download to fail part-way.":"网络错误导致视频下载中途失败。","The media could not be loaded, either because the server or network failed or because the format is not supported.":"视频因格式不支持或者服务器或网络的问题无法加载。","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"由于视频文件损坏或是该视频使用了你的浏览器不支持的功能，播放终止。","No compatible source was found for this media.":"无法找到此视频兼容的源。","The media is encrypted and we do not have the keys to decrypt it.":"视频已加密，无法解密。","Play Video":"播放视频","Close":"关闭","Modal Window":"弹窗","This is a modal window":"这是一个弹窗","This modal can be closed by pressing the Escape key or activating the close button.":"可以按ESC按键或启用关闭按钮来关闭此弹窗。",", opens captions settings dialog":", 开启标题设置弹窗",", opens subtitles settings dialog":", 开启字幕设置弹窗",", opens descriptions settings dialog":", 开启描述设置弹窗",", selected":", 选择","captions settings":"字幕设定","Audio Player":"音频播放器","Video Player":"视频播放器","Replay":"重新播放","Progress Bar":"进度条","Volume Level":"音量","subtitles settings":"字幕设定","descriptions settings":"描述设定","Text":"文字","White":"白","Black":"黑","Red":"红","Green":"绿","Blue":"蓝","Yellow":"黄","Magenta":"紫红","Cyan":"青","Background":"背景","Window":"窗口","Transparent":"透明","Semi-Transparent":"半透明","Opaque":"不透明","Font Size":"字体尺寸","Text Edge Style":"字体边缘样式","None":"无","Raised":"浮雕","Depressed":"压低","Uniform":"均匀","Dropshadow":"下阴影","Font Family":"字体库","Proportional Sans-Serif":"比例无细体","Monospace Sans-Serif":"单间隔无细体","Proportional Serif":"比例细体","Monospace Serif":"单间隔细体","Casual":"舒适","Script":"手写体","Small Caps":"小型大写字体","Reset":"重置","restore all settings to the default values":"恢复全部设定至预设值","Done":"完成","Caption Settings Dialog":"字幕设定窗口","Beginning of dialog window. Escape will cancel and close the window.":"打开对话窗口。Escape键将取消并关闭对话窗口","End of dialog window.":"结束对话窗口","Seek to live, currently behind live":"尝试直播，当前为延时播放","Seek to live, currently playing live":"尝试直播，当前为实时播放","progress bar timing: currentTime={1} duration={2}":"{1}/{2}","{1} is loading.":"正在加载 {1}。","Playback cannot continue. No available working or supported playlists.":"播放失败"}')},d498:function(e,t,i){var n=i("cbe5"),r=i("4fac"),a=n.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(e,t){r.buildPath(e,t,!1)}});e.exports=a},d4a2:function(e,t){t.entityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}},d4b1:function(e,t,i){var n=i("3eba"),r=i("17d6"),a=n.extendComponentView({type:"axisPointer",render:function(e,t,i){var n=t.getComponent("tooltip"),a=e.get("triggerOn")||n&&n.get("triggerOn")||"mousemove|click";r.register("axisPointer",i,(function(e,t,i){"none"!==a&&("leave"===e||a.indexOf(e)>=0)&&i({type:"updateAxisPointer",currTrigger:e,x:t&&t.offsetX,y:t&&t.offsetY})}))},remove:function(e,t){r.unregister(t.getZr(),"axisPointer"),a.superApply(this._model,"remove",arguments)},dispose:function(e,t){r.unregister("axisPointer",t),a.superApply(this._model,"dispose",arguments)}}),o=a;e.exports=o},d4c6:function(e,t,i){var n=i("cbe5"),r=n.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var e=this.__dirtyPath,t=this.shape.paths,i=0;i<t.length;i++)e=e||t[i].__dirtyPath;this.__dirtyPath=e,this.__dirty=this.__dirty||e},beforeBrush:function(){this._updatePathDirty();for(var e=this.shape.paths||[],t=this.getGlobalScale(),i=0;i<e.length;i++)e[i].path||e[i].createPathProxy(),e[i].path.setScale(t[0],t[1],e[i].segmentIgnoreThreshold)},buildPath:function(e,t){for(var i=t.paths||[],n=0;n<i.length;n++)i[n].buildPath(e,i[n].shape,!0)},afterBrush:function(){for(var e=this.shape.paths||[],t=0;t<e.length;t++)e[t].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),n.prototype.getBoundingRect.call(this)}});e.exports=r},d4d1:function(e,t,i){var n=i("cbe5"),r=i("401b"),a=i("897a"),o=r.min,s=r.max,l=r.scaleAndAdd,c=r.copy,u=[],h=[],d=[];function p(e){return isNaN(e[0])||isNaN(e[1])}function f(e,t,i,n,r,a,o,s,l,c,u){return"none"!==c&&c?m.apply(this,arguments):g.apply(this,arguments)}function m(e,t,i,n,r,a,o,s,l,u,f){for(var m=0,g=i,v=0;v<n;v++){var y=t[g];if(g>=r||g<0)break;if(p(y)){if(f){g+=a;continue}break}if(g===i)e[a>0?"moveTo":"lineTo"](y[0],y[1]);else if(l>0){var _=t[m],b="y"===u?1:0,x=(y[b]-_[b])*l;c(h,_),h[b]=_[b]+x,c(d,y),d[b]=y[b]-x,e.bezierCurveTo(h[0],h[1],d[0],d[1],y[0],y[1])}else e.lineTo(y[0],y[1]);m=g,g+=a}return v}function g(e,t,i,n,a,f,m,g,v,y,_){for(var b=0,x=i,w=0;w<n;w++){var T=t[x];if(x>=a||x<0)break;if(p(T)){if(_){x+=f;continue}break}if(x===i)e[f>0?"moveTo":"lineTo"](T[0],T[1]),c(h,T);else if(v>0){var S=x+f,O=t[S];if(_)while(O&&p(t[S]))S+=f,O=t[S];var C=.5,k=t[b];O=t[S];if(!O||p(O))c(d,T);else{var P,E;if(p(O)&&!_&&(O=T),r.sub(u,O,k),"x"===y||"y"===y){var A="x"===y?0:1;P=Math.abs(T[A]-k[A]),E=Math.abs(T[A]-O[A])}else P=r.dist(T,k),E=r.dist(T,O);C=E/(E+P),l(d,T,u,-v*(1-C))}o(h,h,g),s(h,h,m),o(d,d,g),s(d,d,m),e.bezierCurveTo(h[0],h[1],d[0],d[1],T[0],T[1]),l(h,T,u,v*C)}else e.lineTo(T[0],T[1]);b=x,x+=f}return w}function v(e,t){var i=[1/0,1/0],n=[-1/0,-1/0];if(t)for(var r=0;r<e.length;r++){var a=e[r];a[0]<i[0]&&(i[0]=a[0]),a[1]<i[1]&&(i[1]=a[1]),a[0]>n[0]&&(n[0]=a[0]),a[1]>n[1]&&(n[1]=a[1])}return{min:t?i:n,max:t?n:i}}var y=n.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:a(n.prototype.brush),buildPath:function(e,t){var i=t.points,n=0,r=i.length,a=v(i,t.smoothConstraint);if(t.connectNulls){for(;r>0;r--)if(!p(i[r-1]))break;for(;n<r;n++)if(!p(i[n]))break}while(n<r)n+=f(e,i,n,r,r,1,a.min,a.max,t.smooth,t.smoothMonotone,t.connectNulls)+1}}),_=n.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:a(n.prototype.brush),buildPath:function(e,t){var i=t.points,n=t.stackedOnPoints,r=0,a=i.length,o=t.smoothMonotone,s=v(i,t.smoothConstraint),l=v(n,t.smoothConstraint);if(t.connectNulls){for(;a>0;a--)if(!p(i[a-1]))break;for(;r<a;r++)if(!p(i[r]))break}while(r<a){var c=f(e,i,r,a,a,1,s.min,s.max,t.smooth,o,t.connectNulls);f(e,n,r+c-1,c,a,-1,l.min,l.max,t.stackedOnSmooth,o,t.connectNulls),r+=c+1,e.closePath()}}});t.Polyline=y,t.Polygon=_},d4ea:function(e,t,i){"use strict";i("5d38")},d50f:function(e,t,i){},d51b:function(e,t){var i=function(){this.head=null,this.tail=null,this._len=0},n=i.prototype;n.insert=function(e){var t=new r(e);return this.insertEntry(t),t},n.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},n.remove=function(e){var t=e.prev,i=e.next;t?t.next=i:this.head=i,i?i.prev=t:this.tail=t,e.next=e.prev=null,this._len--},n.len=function(){return this._len},n.clear=function(){this.head=this.tail=null,this._len=0};var r=function(e){this.value=e,this.next,this.prev},a=function(e){this._list=new i,this._map={},this._maxSize=e||10,this._lastRemovedEntry=null},o=a.prototype;o.put=function(e,t){var i=this._list,n=this._map,a=null;if(null==n[e]){var o=i.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var l=i.head;i.remove(l),delete n[l.key],a=l.value,this._lastRemovedEntry=l}s?s.value=t:s=new r(t),s.key=e,i.insertEntry(s),n[e]=s}return a},o.get=function(e){var t=this._map[e],i=this._list;if(null!=t)return t!==i.tail&&(i.remove(t),i.insertEntry(t)),t.value},o.clear=function(){this._list.clear(),this._map={}};var s=a;e.exports=s},d52f:function(e,t,i){"use strict";i("7a03")},d5b7:function(e,t,i){var n=i("de00"),r=i("1fab"),a=i("0cde"),o=i("bd6b"),s=i("6d8b"),l=function(e){a.call(this,e),r.call(this,e),o.call(this,e),this.id=e.id||n()};l.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(e,t){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=t,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(e,t){},attrKV:function(e,t){if("position"===e||"scale"===e||"origin"===e){if(t){var i=this[e];i||(i=this[e]=[]),i[0]=t[0],i[1]=t[1]}}else this[e]=t},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(e,t){if("string"===typeof e)this.attrKV(e,t);else if(s.isObject(e))for(var i in e)e.hasOwnProperty(i)&&this.attrKV(i,e[i]);return this.dirty(!1),this},setClipPath:function(e){var t=this.__zr;t&&e.addSelfToZr(t),this.clipPath&&this.clipPath!==e&&this.removeClipPath(),this.clipPath=e,e.__zr=t,e.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var e=this.clipPath;e&&(e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(e){this.__zr=e;var t=this.animators;if(t)for(var i=0;i<t.length;i++)e.animation.addAnimator(t[i]);this.clipPath&&this.clipPath.addSelfToZr(e)},removeSelfFromZr:function(e){this.__zr=null;var t=this.animators;if(t)for(var i=0;i<t.length;i++)e.animation.removeAnimator(t[i]);this.clipPath&&this.clipPath.removeSelfFromZr(e)}},s.mixin(l,o),s.mixin(l,a),s.mixin(l,r);var c=l;e.exports=c},d747:function(e,t,i){var n=i("3eba"),r=i("d81e"),a=r.updateCenterAndZoom;i("d2a5");var o={type:"graphRoam",event:"graphRoam",update:"none"};n.registerAction(o,(function(e,t){t.eachComponent({mainType:"series",query:e},(function(t){var i=t.coordinateSystem,n=a(i,e);t.setCenter&&t.setCenter(n.center),t.setZoom&&t.setZoom(n.zoom)}))}))},d7ee:function(e,t,i){"use strict";i("a0fe")},d81e:function(e,t){function i(e,t,i){var n=e.getZoom(),r=e.getCenter(),a=t.zoom,o=e.dataToPoint(r);if(null!=t.dx&&null!=t.dy){o[0]-=t.dx,o[1]-=t.dy;r=e.pointToData(o);e.setCenter(r)}if(null!=a){if(i){var s=i.min||0,l=i.max||1/0;a=Math.max(Math.min(n*a,l),s)/n}e.scale[0]*=a,e.scale[1]*=a;var c=e.position,u=(t.originX-c[0])*(a-1),h=(t.originY-c[1])*(a-1);c[0]-=u,c[1]-=h,e.updateTransform();r=e.pointToData(o);e.setCenter(r),e.setZoom(a*n)}return{center:e.getCenter(),zoom:e.getZoom()}}t.updateCenterAndZoom=i},d833:function(e,t,i){var n=i("20c8"),r=i("9680"),a=i("e7d2"),o=i("68ab"),s=i("9f51"),l=i("857d"),c=l.normalizeRadian,u=i("4a3f"),h=i("8728"),d=n.CMD,p=2*Math.PI,f=1e-4;function m(e,t){return Math.abs(e-t)<f}var g=[-1,-1,-1],v=[-1,-1];function y(){var e=v[0];v[0]=v[1],v[1]=e}function _(e,t,i,n,r,a,o,s,l,c){if(c>t&&c>n&&c>a&&c>s||c<t&&c<n&&c<a&&c<s)return 0;var h=u.cubicRootAt(t,n,a,s,c,g);if(0===h)return 0;for(var d,p,f=0,m=-1,_=0;_<h;_++){var b=g[_],x=0===b||1===b?.5:1,w=u.cubicAt(e,i,r,o,b);w<l||(m<0&&(m=u.cubicExtrema(t,n,a,s,v),v[1]<v[0]&&m>1&&y(),d=u.cubicAt(t,n,a,s,v[0]),m>1&&(p=u.cubicAt(t,n,a,s,v[1]))),2===m?b<v[0]?f+=d<t?x:-x:b<v[1]?f+=p<d?x:-x:f+=s<p?x:-x:b<v[0]?f+=d<t?x:-x:f+=s<d?x:-x)}return f}function b(e,t,i,n,r,a,o,s){if(s>t&&s>n&&s>a||s<t&&s<n&&s<a)return 0;var l=u.quadraticRootAt(t,n,a,s,g);if(0===l)return 0;var c=u.quadraticExtremum(t,n,a);if(c>=0&&c<=1){for(var h=0,d=u.quadraticAt(t,n,a,c),p=0;p<l;p++){var f=0===g[p]||1===g[p]?.5:1,m=u.quadraticAt(e,i,r,g[p]);m<o||(g[p]<c?h+=d<t?f:-f:h+=a<d?f:-f)}return h}f=0===g[0]||1===g[0]?.5:1,m=u.quadraticAt(e,i,r,g[0]);return m<o?0:a<t?f:-f}function x(e,t,i,n,r,a,o,s){if(s-=t,s>i||s<-i)return 0;var l=Math.sqrt(i*i-s*s);g[0]=-l,g[1]=l;var u=Math.abs(n-r);if(u<1e-4)return 0;if(u%p<1e-4){n=0,r=p;var h=a?1:-1;return o>=g[0]+e&&o<=g[1]+e?h:0}if(a){l=n;n=c(r),r=c(l)}else n=c(n),r=c(r);n>r&&(r+=p);for(var d=0,f=0;f<2;f++){var m=g[f];if(m+e>o){var v=Math.atan2(s,m);h=a?1:-1;v<0&&(v=p+v),(v>=n&&v<=r||v+p>=n&&v+p<=r)&&(v>Math.PI/2&&v<1.5*Math.PI&&(h=-h),d+=h)}}return d}function w(e,t,i,n,l){for(var c=0,u=0,p=0,f=0,g=0,v=0;v<e.length;){var y=e[v++];switch(y===d.M&&v>1&&(i||(c+=h(u,p,f,g,n,l))),1===v&&(u=e[v],p=e[v+1],f=u,g=p),y){case d.M:f=e[v++],g=e[v++],u=f,p=g;break;case d.L:if(i){if(r.containStroke(u,p,e[v],e[v+1],t,n,l))return!0}else c+=h(u,p,e[v],e[v+1],n,l)||0;u=e[v++],p=e[v++];break;case d.C:if(i){if(a.containStroke(u,p,e[v++],e[v++],e[v++],e[v++],e[v],e[v+1],t,n,l))return!0}else c+=_(u,p,e[v++],e[v++],e[v++],e[v++],e[v],e[v+1],n,l)||0;u=e[v++],p=e[v++];break;case d.Q:if(i){if(o.containStroke(u,p,e[v++],e[v++],e[v],e[v+1],t,n,l))return!0}else c+=b(u,p,e[v++],e[v++],e[v],e[v+1],n,l)||0;u=e[v++],p=e[v++];break;case d.A:var w=e[v++],T=e[v++],S=e[v++],O=e[v++],C=e[v++],k=e[v++];v+=1;var P=1-e[v++],E=Math.cos(C)*S+w,A=Math.sin(C)*O+T;v>1?c+=h(u,p,E,A,n,l):(f=E,g=A);var I=(n-w)*O/S+w;if(i){if(s.containStroke(w,T,O,C,C+k,P,t,I,l))return!0}else c+=x(w,T,O,C,C+k,P,I,l);u=Math.cos(C+k)*S+w,p=Math.sin(C+k)*O+T;break;case d.R:f=u=e[v++],g=p=e[v++];var M=e[v++],D=e[v++];E=f+M,A=g+D;if(i){if(r.containStroke(f,g,E,g,t,n,l)||r.containStroke(E,g,E,A,t,n,l)||r.containStroke(E,A,f,A,t,n,l)||r.containStroke(f,A,f,g,t,n,l))return!0}else c+=h(E,g,E,A,n,l),c+=h(f,A,f,g,n,l);break;case d.Z:if(i){if(r.containStroke(u,p,f,g,t,n,l))return!0}else c+=h(u,p,f,g,n,l);u=f,p=g;break}}return i||m(p,g)||(c+=h(u,p,f,g,n,l)||0),0!==c}function T(e,t,i){return w(e,0,!1,t,i)}function S(e,t,i,n){return w(e,t,!0,i,n)}t.contain=T,t.containStroke=S},d9fc:function(e,t,i){var n=i("cbe5"),r=n.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(e,t,i){i&&e.moveTo(t.cx+t.r,t.cy),e.arc(t.cx,t.cy,t.r,0,2*Math.PI,!0)}});e.exports=r},da8e:function(e,t,i){},db0e:function(e,t,i){var n=i("3eba");i("a8c6"),i("8344"),n.registerPreprocessor((function(e){e.markPoint=e.markPoint||{}}))},dc2e:function(e,t,i){},dc2f:function(e,t){var i=function(e,t){this.image=e,this.repeat=t,this.type="pattern"};i.prototype.getCanvasPattern=function(e){return e.createPattern(this.image,this.repeat||"repeat")};var n=i;e.exports=n},dcb3:function(e,t,i){var n=i("6d8b"),r=i("625e"),a=i("2306"),o=i("cd33"),s=i("607d"),l=i("88b3"),c=i("e0d3"),u=c.makeInner,h=u(),d=n.clone,p=n.bind;function f(){}function m(e,t,i,n){g(h(i).lastProp,n)||(h(i).lastProp=n,t?a.updateProps(i,n,e):(i.stopAnimation(),i.attr(n)))}function g(e,t){if(n.isObject(e)&&n.isObject(t)){var i=!0;return n.each(t,(function(t,n){i=i&&g(e[n],t)})),!!i}return e===t}function v(e,t){e[t.get("label.show")?"show":"hide"]()}function y(e){return{position:e.position.slice(),rotation:e.rotation||0}}function _(e,t,i){var n=t.get("z"),r=t.get("zlevel");e&&e.traverse((function(e){"group"!==e.type&&(null!=n&&(e.z=n),null!=r&&(e.zlevel=r),e.silent=i)}))}f.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(e,t,i,r){var o=t.get("value"),s=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=i,r||this._lastValue!==o||this._lastStatus!==s){this._lastValue=o,this._lastStatus=s;var l=this._group,c=this._handle;if(!s||"hide"===s)return l&&l.hide(),void(c&&c.hide());l&&l.show(),c&&c.show();var u={};this.makeElOption(u,o,e,t,i);var h=u.graphicKey;h!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=h;var d=this._moveAnimation=this.determineAnimation(e,t);if(l){var p=n.curry(m,t,d);this.updatePointerEl(l,u,p,t),this.updateLabelEl(l,u,p,t)}else l=this._group=new a.Group,this.createPointerEl(l,u,e,t),this.createLabelEl(l,u,e,t),i.getZr().add(l);_(l,t,!0),this._renderHandle(o)}},remove:function(e){this.clear(e)},dispose:function(e){this.clear(e)},determineAnimation:function(e,t){var i=t.get("animation"),n=e.axis,r="category"===n.type,a=t.get("snap");if(!a&&!r)return!1;if("auto"===i||null==i){var s=this.animationThreshold;if(r&&n.getBandWidth()>s)return!0;if(a){var l=o.getAxisInfo(e).seriesDataCount,c=n.getExtent();return Math.abs(c[0]-c[1])/l>s}return!1}return!0===i},makeElOption:function(e,t,i,n,r){},createPointerEl:function(e,t,i,n){var r=t.pointer;if(r){var o=h(e).pointerEl=new a[r.type](d(t.pointer));e.add(o)}},createLabelEl:function(e,t,i,n){if(t.label){var r=h(e).labelEl=new a.Rect(d(t.label));e.add(r),v(r,n)}},updatePointerEl:function(e,t,i){var n=h(e).pointerEl;n&&t.pointer&&(n.setStyle(t.pointer.style),i(n,{shape:t.pointer.shape}))},updateLabelEl:function(e,t,i,n){var r=h(e).labelEl;r&&(r.setStyle(t.label.style),i(r,{shape:t.label.shape,position:t.label.position}),v(r,n))},_renderHandle:function(e){if(!this._dragging&&this.updateHandleTransform){var t,i=this._axisPointerModel,r=this._api.getZr(),o=this._handle,c=i.getModel("handle"),u=i.get("status");if(!c.get("show")||!u||"hide"===u)return o&&r.remove(o),void(this._handle=null);this._handle||(t=!0,o=this._handle=a.createIcon(c.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(e){s.stop(e.event)},onmousedown:p(this._onHandleDragMove,this,0,0),drift:p(this._onHandleDragMove,this),ondragend:p(this._onHandleDragEnd,this)}),r.add(o)),_(o,i,!1);var h=["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];o.setStyle(c.getItemStyle(null,h));var d=c.get("size");n.isArray(d)||(d=[d,d]),o.attr("scale",[d[0]/2,d[1]/2]),l.createOrUpdate(this,"_doDispatchAxisPointer",c.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,t)}},_moveHandleToValue:function(e,t){m(this._axisPointerModel,!t&&this._moveAnimation,this._handle,y(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(e,t){var i=this._handle;if(i){this._dragging=!0;var n=this.updateHandleTransform(y(i),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=n,i.stopAnimation(),i.attr(y(n)),h(i).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){var e=this._handle;if(e){var t=this._payloadInfo,i=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:i.axis.dim,axisIndex:i.componentIndex}]})}},_onHandleDragEnd:function(e){this._dragging=!1;var t=this._handle;if(t){var i=this._axisPointerModel.get("value");this._moveHandleToValue(i),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),i=this._group,n=this._handle;t&&i&&(this._lastGraphicKey=null,i&&t.remove(i),n&&t.remove(n),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(e,t,i){return i=i||0,{x:e[i],y:e[1-i],width:t[i],height:t[1-i]}}},f.prototype.constructor=f,r.enableClassExtend(f);var b=f;e.exports=b},dd63:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("b2b2"),r=i("3795"),a=i("5a22"),o=i("748f");class s{constructor(e){this.resourceFactory=e,this._resources=null,this._visible=!0,this._attached=!1}destroy(){this._destroyResources()}get object(){return Object(n["k"])(this._resources)?this._resources.object:null}get resources(){return Object(n["k"])(this._resources)?this._resources.external:null}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this._syncVisible())}get attached(){return this._attached}set attached(e){e!==this._attached&&(this._attached=e,this._createOrDestroyResources())}recreate(){this.attached&&this._createResources()}recreateGeometry(){if(!this.resourceFactory.recreateGeometry)return void this.recreate();const e=this.resourceFactory.view._stage;if(Object(n["j"])(this._resources)||!e)return;const t=this._resources.object;this._resources.external.forEach(t=>{2===t.type&&e.remove(t)}),t.removeAllGeometries();const i=this.resourceFactory.recreateGeometry(this._resources.external,t,this._resources.layer);e.addMany(i),this._resources.layer.commit()}_createOrDestroyResources(){this._attached?this._resources||this._createResources():this._destroyResources()}_createResources(){this._destroyResources();const e=this.resourceFactory.view._stage;if(!e)return;const t=new o["a"]({isPickable:!1});e.add(t);const i=new a["a"]({castShadow:!1}),n=this.resourceFactory.createResources(i,t);n.forEach(t=>e.add(t)),e.add(i),t.add(i),t.commit(),this._syncVisible();const s=this.resourceFactory.cameraChanged?Object(r["a"])(this.resourceFactory.view.state,"camera",e=>this.resourceFactory.cameraChanged(e)):null;this._resources={layer:t,object:i,external:n,cameraHandle:s}}_destroyResources(){if(Object(n["j"])(this._resources))return;const e=this.resourceFactory.view._stage;null==e||e.remove(this._resources.object),null==e||e.remove(this._resources.layer),this._resources.external.forEach(t=>{null==e||e.remove(t),"dispose"in t&&t.dispose()}),this._resources.object.dispose(),this._resources.cameraHandle&&this._resources.cameraHandle.remove(),this._resources=null}_syncVisible(){Object(n["j"])(this._resources)||(this._resources.object.setVisible(this._visible),this._resources.layer.commit())}}},ddc3:function(e,t,i){},dded:function(e,t,i){var n=i("6d8b"),r=i("42e5"),a=function(e,t,i,n,a){this.x=null==e?.5:e,this.y=null==t?.5:t,this.r=null==i?.5:i,this.type="radial",this.global=a||!1,r.call(this,n)};a.prototype={constructor:a},n.inherits(a,r);var o=a;e.exports=o},de00:function(e,t){var i=2311;function n(){return i++}e.exports=n},de1c:function(e,t){var i={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}};e.exports=i},de6e:function(e,t){function i(e){return e instanceof Array||(e=[e,e]),e}function n(e){e.eachSeriesByType("graph",(function(e){var t=e.getGraph(),n=e.getEdgeData(),r=i(e.get("edgeSymbol")),a=i(e.get("edgeSymbolSize")),o="lineStyle.color".split("."),s="lineStyle.opacity".split(".");n.setVisual("fromSymbol",r&&r[0]),n.setVisual("toSymbol",r&&r[1]),n.setVisual("fromSymbolSize",a&&a[0]),n.setVisual("toSymbolSize",a&&a[1]),n.setVisual("color",e.get(o)),n.setVisual("opacity",e.get(s)),n.each((function(e){var r=n.getItemModel(e),a=t.getEdgeByIndex(e),l=i(r.getShallow("symbol",!0)),c=i(r.getShallow("symbolSize",!0)),u=r.get(o),h=r.get(s);switch(u){case"source":u=a.node1.getVisual("color");break;case"target":u=a.node2.getVisual("color");break}l[0]&&a.setVisual("fromSymbol",l[0]),l[1]&&a.setVisual("toSymbol",l[1]),c[0]&&a.setVisual("fromSymbolSize",c[0]),c[1]&&a.setVisual("toSymbolSize",c[1]),a.setVisual("color",u),a.setVisual("opacity",h)}))}))}e.exports=n},df33:function(e,t){function i(e){if(e&&"object"===typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"===typeof e)return o[e];var i=String(e),a=n[i.toLowerCase()];if(a)return a;a=r[i.toLowerCase()];return a||(1===i.length?i.charCodeAt(0):void 0)}i.isEventKey=function(e,t){if(e&&"object"===typeof e){var i=e.which||e.keyCode||e.charCode;if(null===i||void 0===i)return!1;if("string"===typeof t){var a=n[t.toLowerCase()];if(a)return a===i;a=r[t.toLowerCase()];if(a)return a===i}else if("number"===typeof t)return t===i;return!1}},t=e.exports=i;var n=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};
/*!
 * Programatically add the following
 */
for(a=97;a<123;a++)n[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)n[a-48]=a;for(a=1;a<13;a++)n["f"+a]=a+111;for(a=0;a<10;a++)n["numpad "+a]=a+96;var o=t.names=t.title={};for(a in n)o[n[a]]=a;for(var s in r)n[s]=r[s]},df3b:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e,t,i){this.coordinateHelper=e,this.targetPoint=t,this.constraint=i}}},dfec:function(e,t,i){},e073:function(e,t,i){var n=i("6d8b"),r=i("e86a"),a=i("e0d3"),o=a.makeInner,s=i("697e"),l=s.makeLabelFormatter,c=s.getOptionCategoryInterval,u=s.shouldShowAllLabels,h=o();function d(e){return"category"===e.type?f(e):v(e)}function p(e,t){return"category"===e.type?g(e,t):{ticks:e.scale.getTicks()}}function f(e){var t=e.getLabelModel(),i=m(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:i.labelCategoryInterval}:i}function m(e,t){var i,r,a=y(e,"labels"),o=c(t),s=_(a,o);return s||(n.isFunction(o)?i=O(e,o):(r="auto"===o?x(e):o,i=S(e,r)),b(a,o,{labels:i,labelCategoryInterval:r}))}function g(e,t){var i,r,a=y(e,"ticks"),o=c(t),s=_(a,o);if(s)return s;if(t.get("show")&&!e.scale.isBlank()||(i=[]),n.isFunction(o))i=O(e,o,!0);else if("auto"===o){var l=m(e,e.getLabelModel());r=l.labelCategoryInterval,i=n.map(l.labels,(function(e){return e.tickValue}))}else r=o,i=S(e,r,!0);return b(a,o,{ticks:i,tickCategoryInterval:r})}function v(e){var t=e.scale.getTicks(),i=l(e);return{labels:n.map(t,(function(t,n){return{formattedLabel:i(t,n),rawLabel:e.scale.getLabel(t),tickValue:t}}))}}function y(e,t){return h(e)[t]||(h(e)[t]=[])}function _(e,t){for(var i=0;i<e.length;i++)if(e[i].key===t)return e[i].value}function b(e,t,i){return e.push({key:t,value:i}),i}function x(e){var t=h(e).autoInterval;return null!=t?t:h(e).autoInterval=e.calculateCategoryInterval()}function w(e){var t=T(e),i=l(e),n=(t.axisRotate-t.labelRotate)/180*Math.PI,a=e.scale,o=a.getExtent(),s=a.count();if(o[1]-o[0]<1)return 0;var c=1;s>40&&(c=Math.max(1,Math.floor(s/40)));for(var u=o[0],d=e.dataToCoord(u+1)-e.dataToCoord(u),p=Math.abs(d*Math.cos(n)),f=Math.abs(d*Math.sin(n)),m=0,g=0;u<=o[1];u+=c){var v=0,y=0,_=r.getBoundingRect(i(u),t.font,"center","top");v=1.3*_.width,y=1.3*_.height,m=Math.max(m,v,7),g=Math.max(g,y,7)}var b=m/p,x=g/f;isNaN(b)&&(b=1/0),isNaN(x)&&(x=1/0);var w=Math.max(0,Math.floor(Math.min(b,x))),S=h(e.model),O=e.getExtent(),C=S.lastAutoInterval,k=S.lastTickCount;return null!=C&&null!=k&&Math.abs(C-w)<=1&&Math.abs(k-s)<=1&&C>w&&S.axisExtend0===O[0]&&S.axisExtend1===O[1]?w=C:(S.lastTickCount=s,S.lastAutoInterval=w,S.axisExtend0=O[0],S.axisExtend1=O[1]),w}function T(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function S(e,t,i){var n=l(e),r=e.scale,a=r.getExtent(),o=e.getLabelModel(),s=[],c=Math.max((t||0)+1,1),h=a[0],d=r.count();0!==h&&c>1&&d/c>2&&(h=Math.round(Math.ceil(h/c)*c));var p=u(e),f=o.get("showMinLabel")||p,m=o.get("showMaxLabel")||p;f&&h!==a[0]&&v(a[0]);for(var g=h;g<=a[1];g+=c)v(g);function v(e){s.push(i?e:{formattedLabel:n(e),rawLabel:r.getLabel(e),tickValue:e})}return m&&g-c!==a[1]&&v(a[1]),s}function O(e,t,i){var r=e.scale,a=l(e),o=[];return n.each(r.getTicks(),(function(e){var n=r.getLabel(e);t(e,n)&&o.push(i?e:{formattedLabel:a(e),rawLabel:n,tickValue:e})})),o}t.createAxisLabels=d,t.createAxisTicks=p,t.calculateCategoryInterval=w},e0a5:function(e,t,i){"use strict";i("8c54")},e0ad:function(e,t,i){},e0d3:function(e,t,i){var n=i("6d8b"),r=i("22d1"),a=n.each,o=n.isObject,s=n.isArray,l="series\0";function c(e){return e instanceof Array?e:null==e?[]:[e]}function u(e,t,i){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var n=0,r=i.length;n<r;n++){var a=i[n];!e.emphasis[t].hasOwnProperty(a)&&e[t].hasOwnProperty(a)&&(e.emphasis[t][a]=e[t][a])}}}var h=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function d(e){return!o(e)||s(e)||e instanceof Date?e:e.value}function p(e){return o(e)&&!(e instanceof Array)}function f(e,t){t=(t||[]).slice();var i=n.map(e||[],(function(e,t){return{exist:e}}));return a(t,(function(e,n){if(o(e)){for(var r=0;r<i.length;r++)if(!i[r].option&&null!=e.id&&i[r].exist.id===e.id+"")return i[r].option=e,void(t[n]=null);for(r=0;r<i.length;r++){var a=i[r].exist;if(!i[r].option&&(null==a.id||null==e.id)&&null!=e.name&&!v(e)&&!v(a)&&a.name===e.name+"")return i[r].option=e,void(t[n]=null)}}})),a(t,(function(e,t){if(o(e)){for(var n=0;n<i.length;n++){var r=i[n].exist;if(!i[n].option&&!v(r)&&null==e.id){i[n].option=e;break}}n>=i.length&&i.push({option:e})}})),i}function m(e){var t=n.createHashMap();a(e,(function(e,i){var n=e.exist;n&&t.set(n.id,e)})),a(e,(function(e,i){var r=e.option;n.assert(!r||null==r.id||!t.get(r.id)||t.get(r.id)===e,"id duplicates: "+(r&&r.id)),r&&null!=r.id&&t.set(r.id,e),!e.keyInfo&&(e.keyInfo={})})),a(e,(function(e,i){var n=e.exist,r=e.option,a=e.keyInfo;if(o(r)){if(a.name=null!=r.name?r.name+"":n?n.name:l+i,n)a.id=n.id;else if(null!=r.id)a.id=r.id+"";else{var s=0;do{a.id="\0"+a.name+"\0"+s++}while(t.get(a.id))}t.set(a.id,e)}}))}function g(e){var t=e.name;return!(!t||!t.indexOf(l))}function v(e){return o(e)&&e.id&&0===(e.id+"").indexOf("\0_ec_\0")}function y(e,t){var i={},n={};return r(e||[],i),r(t||[],n,i),[a(i),a(n)];function r(e,t,i){for(var n=0,r=e.length;n<r;n++)for(var a=e[n].seriesId,o=c(e[n].dataIndex),s=i&&i[a],l=0,u=o.length;l<u;l++){var h=o[l];s&&s[h]?s[h]=null:(t[a]||(t[a]={}))[h]=1}}function a(e,t){var i=[];for(var n in e)if(e.hasOwnProperty(n)&&null!=e[n])if(t)i.push(+n);else{var r=a(e[n],!0);r.length&&i.push({seriesId:n,dataIndex:r})}return i}}function _(e,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?n.isArray(t.dataIndex)?n.map(t.dataIndex,(function(t){return e.indexOfRawIndex(t)})):e.indexOfRawIndex(t.dataIndex):null!=t.name?n.isArray(t.name)?n.map(t.name,(function(t){return e.indexOfName(t)})):e.indexOfName(t.name):void 0}function b(){var e="__\0ec_inner_"+x+++"_"+Math.random().toFixed(5);return function(t){return t[e]||(t[e]={})}}var x=0;function w(e,t,i){if(n.isString(t)){var r={};r[t+"Index"]=0,t=r}var o=i&&i.defaultMainType;!o||T(t,o+"Index")||T(t,o+"Id")||T(t,o+"Name")||(t[o+"Index"]=0);var s={};return a(t,(function(r,a){r=t[a];if("dataIndex"!==a&&"dataIndexInside"!==a){var o=a.match(/^(\w+)(Index|Id|Name)$/)||[],l=o[1],c=(o[2]||"").toLowerCase();if(!(!l||!c||null==r||"index"===c&&"none"===r||i&&i.includeMainTypes&&n.indexOf(i.includeMainTypes,l)<0)){var u={mainType:l};"index"===c&&"all"===r||(u[c]=r);var h=e.queryComponents(u);s[l+"Models"]=h,s[l+"Model"]=h[0]}}else s[a]=r})),s}function T(e,t){return e&&e.hasOwnProperty(t)}function S(e,t,i){e.setAttribute?e.setAttribute(t,i):e[t]=i}function O(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function C(e){return"auto"===e?r.domSupported?"html":"richText":e||"html"}function k(e,t){var i=n.createHashMap(),r=[];return n.each(e,(function(e){var n=t(e);(i.get(n)||(r.push(n),i.set(n,[]))).push(e)})),{keys:r,buckets:i}}t.normalizeToArray=c,t.defaultEmphasis=u,t.TEXT_STYLE_OPTIONS=h,t.getDataItemValue=d,t.isDataItemOption=p,t.mappingToExists=f,t.makeIdAndName=m,t.isNameSpecified=g,t.isIdInner=v,t.compressBatches=y,t.queryDataIndex=_,t.makeInner=b,t.parseFinder=w,t.setAttribute=S,t.getAttribute=O,t.getTooltipRenderMode=C,t.groupData=k},e0d8:function(e,t,i){var n=i("625e");function r(e){this._setting=e||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}r.prototype.parse=function(e){return e},r.prototype.getSetting=function(e){return this._setting[e]},r.prototype.contain=function(e){var t=this._extent;return e>=t[0]&&e<=t[1]},r.prototype.normalize=function(e){var t=this._extent;return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])},r.prototype.scale=function(e){var t=this._extent;return e*(t[1]-t[0])+t[0]},r.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},r.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.setExtent=function(e,t){var i=this._extent;isNaN(e)||(i[0]=e),isNaN(t)||(i[1]=t)},r.prototype.isBlank=function(){return this._isBlank},r.prototype.setBlank=function(e){this._isBlank=e},r.prototype.getLabel=null,n.enableClassExtend(r),n.enableClassManagement(r,{registerWhenExtend:!0});var a=r;e.exports=a},e11e:function(e,t,i){
/* @preserve
 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
(function(e,i){i(t)})(0,(function(e){"use strict";var t="1.7.1";function i(e){var t,i,n,r;for(i=1,n=arguments.length;i<n;i++)for(t in r=arguments[i],r)e[t]=r[t];return e}var n=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function r(e,t){var i=Array.prototype.slice;if(e.bind)return e.bind.apply(e,i.call(arguments,1));var n=i.call(arguments,2);return function(){return e.apply(t,n.length?n.concat(i.call(arguments)):arguments)}}var a=0;function o(e){return e._leaflet_id=e._leaflet_id||++a,e._leaflet_id}function s(e,t,i){var n,r,a,o;return o=function(){n=!1,r&&(a.apply(i,r),r=!1)},a=function(){n?r=arguments:(e.apply(i,arguments),setTimeout(o,t),n=!0)},a}function l(e,t,i){var n=t[1],r=t[0],a=n-r;return e===n&&i?e:((e-r)%a+a)%a+r}function c(){return!1}function u(e,t){var i=Math.pow(10,void 0===t?6:t);return Math.round(e*i)/i}function h(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function d(e){return h(e).split(/\s+/)}function p(e,t){for(var i in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?n(e.options):{}),t)e.options[i]=t[i];return e.options}function f(e,t,i){var n=[];for(var r in e)n.push(encodeURIComponent(i?r.toUpperCase():r)+"="+encodeURIComponent(e[r]));return(t&&-1!==t.indexOf("?")?"&":"?")+n.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(e,t){return e.replace(m,(function(e,i){var n=t[i];if(void 0===n)throw new Error("No value provided for variable "+e);return"function"===typeof n&&(n=n(t)),n}))}var v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function y(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var x=0;function w(e){var t=+new Date,i=Math.max(0,16-(t-x));return x=t+i,window.setTimeout(e,i)}var T=window.requestAnimationFrame||b("RequestAnimationFrame")||w,S=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function O(e,t,i){if(!i||T!==w)return T.call(window,r(e,t));e.call(t)}function C(e){e&&S.call(window,e)}var k={extend:i,create:n,bind:r,lastId:a,stamp:o,throttle:s,wrapNum:l,falseFn:c,formatNum:u,trim:h,splitWords:d,setOptions:p,getParamString:f,template:g,isArray:v,indexOf:y,emptyImageUrl:_,requestFn:T,cancelFn:S,requestAnimFrame:O,cancelAnimFrame:C};function P(){}function E(e){if("undefined"!==typeof L&&L&&L.Mixin){e=v(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}P.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=t.__super__=this.prototype,a=n(r);for(var o in a.constructor=t,t.prototype=a,this)Object.prototype.hasOwnProperty.call(this,o)&&"prototype"!==o&&"__super__"!==o&&(t[o]=this[o]);return e.statics&&(i(t,e.statics),delete e.statics),e.includes&&(E(e.includes),i.apply(null,[a].concat(e.includes)),delete e.includes),a.options&&(e.options=i(n(a.options),e.options)),i(a,e),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=a._initHooks.length;e<t;e++)a._initHooks[e].call(this)}},t},P.include=function(e){return i(this.prototype,e),this},P.mergeOptions=function(e){return i(this.prototype.options,e),this},P.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),i="function"===typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var A={on:function(e,t,i){if("object"===typeof e)for(var n in e)this._on(n,e[n],t);else{e=d(e);for(var r=0,a=e.length;r<a;r++)this._on(e[r],t,i)}return this},off:function(e,t,i){if(e)if("object"===typeof e)for(var n in e)this._off(n,e[n],t);else{e=d(e);for(var r=0,a=e.length;r<a;r++)this._off(e[r],t,i)}else delete this._events;return this},_on:function(e,t,i){this._events=this._events||{};var n=this._events[e];n||(n=[],this._events[e]=n),i===this&&(i=void 0);for(var r={fn:t,ctx:i},a=n,o=0,s=a.length;o<s;o++)if(a[o].fn===t&&a[o].ctx===i)return;a.push(r)},_off:function(e,t,i){var n,r,a;if(this._events&&(n=this._events[e],n))if(t){if(i===this&&(i=void 0),n)for(r=0,a=n.length;r<a;r++){var o=n[r];if(o.ctx===i&&o.fn===t)return o.fn=c,this._firingCount&&(this._events[e]=n=n.slice()),void n.splice(r,1)}}else{for(r=0,a=n.length;r<a;r++)n[r].fn=c;delete this._events[e]}},fire:function(e,t,n){if(!this.listens(e,n))return this;var r=i({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var a=this._events[e];if(a){this._firingCount=this._firingCount+1||1;for(var o=0,s=a.length;o<s;o++){var l=a[o];l.fn.call(l.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens:function(e,t){var i=this._events&&this._events[e];if(i&&i.length)return!0;if(t)for(var n in this._eventParents)if(this._eventParents[n].listens(e,t))return!0;return!1},once:function(e,t,i){if("object"===typeof e){for(var n in e)this.once(n,e[n],t);return this}var a=r((function(){this.off(e,t,i).off(e,a,i)}),this);return this.on(e,t,i).on(e,a,i)},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[o(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[o(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,i({layer:e.target,propagatedFrom:e.target},e),!0)}};A.addEventListener=A.on,A.removeEventListener=A.clearAllEventListeners=A.off,A.addOneTimeEventListener=A.once,A.fireEvent=A.fire,A.hasEventListeners=A.listens;var I=P.extend(A);function M(e,t,i){this.x=i?Math.round(e):e,this.y=i?Math.round(t):t}var D=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function j(e,t,i){return e instanceof M?e:v(e)?new M(e[0],e[1]):void 0===e||null===e?e:"object"===typeof e&&"x"in e&&"y"in e?new M(e.x,e.y):new M(e,t,i)}function R(e,t){if(e)for(var i=t?[e,t]:e,n=0,r=i.length;n<r;n++)this.extend(i[n])}function N(e,t){return!e||e instanceof R?e:new R(e,t)}function z(e,t){if(e)for(var i=t?[e,t]:e,n=0,r=i.length;n<r;n++)this.extend(i[n])}function B(e,t){return e instanceof z?e:new z(e,t)}function V(e,t,i){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==i&&(this.alt=+i)}function F(e,t,i){return e instanceof V?e:v(e)&&"object"!==typeof e[0]?3===e.length?new V(e[0],e[1],e[2]):2===e.length?new V(e[0],e[1]):null:void 0===e||null===e?e:"object"===typeof e&&"lat"in e?new V(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new V(e,t,i)}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(e){return this.clone()._add(j(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(j(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new M(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new M(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=D(this.x),this.y=D(this.y),this},distanceTo:function(e){e=j(e);var t=e.x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},equals:function(e){return e=j(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=j(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},R.prototype={extend:function(e){return e=j(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new M(this.min.x,this.max.y)},getTopRight:function(){return new M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,i;return e="number"===typeof e[0]||e instanceof M?j(e):N(e),e instanceof R?(t=e.min,i=e.max):t=i=e,t.x>=this.min.x&&i.x<=this.max.x&&t.y>=this.min.y&&i.y<=this.max.y},intersects:function(e){e=N(e);var t=this.min,i=this.max,n=e.min,r=e.max,a=r.x>=t.x&&n.x<=i.x,o=r.y>=t.y&&n.y<=i.y;return a&&o},overlaps:function(e){e=N(e);var t=this.min,i=this.max,n=e.min,r=e.max,a=r.x>t.x&&n.x<i.x,o=r.y>t.y&&n.y<i.y;return a&&o},isValid:function(){return!(!this.min||!this.max)}},z.prototype={extend:function(e){var t,i,n=this._southWest,r=this._northEast;if(e instanceof V)t=e,i=e;else{if(!(e instanceof z))return e?this.extend(F(e)||B(e)):this;if(t=e._southWest,i=e._northEast,!t||!i)return this}return n||r?(n.lat=Math.min(t.lat,n.lat),n.lng=Math.min(t.lng,n.lng),r.lat=Math.max(i.lat,r.lat),r.lng=Math.max(i.lng,r.lng)):(this._southWest=new V(t.lat,t.lng),this._northEast=new V(i.lat,i.lng)),this},pad:function(e){var t=this._southWest,i=this._northEast,n=Math.abs(t.lat-i.lat)*e,r=Math.abs(t.lng-i.lng)*e;return new z(new V(t.lat-n,t.lng-r),new V(i.lat+n,i.lng+r))},getCenter:function(){return new V((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new V(this.getNorth(),this.getWest())},getSouthEast:function(){return new V(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"===typeof e[0]||e instanceof V||"lat"in e?F(e):B(e);var t,i,n=this._southWest,r=this._northEast;return e instanceof z?(t=e.getSouthWest(),i=e.getNorthEast()):t=i=e,t.lat>=n.lat&&i.lat<=r.lat&&t.lng>=n.lng&&i.lng<=r.lng},intersects:function(e){e=B(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),r=e.getNorthEast(),a=r.lat>=t.lat&&n.lat<=i.lat,o=r.lng>=t.lng&&n.lng<=i.lng;return a&&o},overlaps:function(e){e=B(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),r=e.getNorthEast(),a=r.lat>t.lat&&n.lat<i.lat,o=r.lng>t.lng&&n.lng<i.lng;return a&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=B(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},V.prototype={equals:function(e,t){if(!e)return!1;e=F(e);var i=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return i<=(void 0===t?1e-9:t)},toString:function(e){return"LatLng("+u(this.lat,e)+", "+u(this.lng,e)+")"},distanceTo:function(e){return G.distance(this,F(e))},wrap:function(){return G.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return B([this.lat-t,this.lng-i],[this.lat+t,this.lng+i])},clone:function(){return new V(this.lat,this.lng,this.alt)}};var U={latLngToPoint:function(e,t){var i=this.projection.project(e),n=this.scale(t);return this.transformation._transform(i,n)},pointToLatLng:function(e,t){var i=this.scale(t),n=this.transformation.untransform(e,i);return this.projection.unproject(n)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,i=this.scale(e),n=this.transformation.transform(t.min,i),r=this.transformation.transform(t.max,i);return new R(n,r)},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng,i=this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,n=e.alt;return new V(i,t,n)},wrapLatLngBounds:function(e){var t=e.getCenter(),i=this.wrapLatLng(t),n=t.lat-i.lat,r=t.lng-i.lng;if(0===n&&0===r)return e;var a=e.getSouthWest(),o=e.getNorthEast(),s=new V(a.lat-n,a.lng-r),l=new V(o.lat-n,o.lng-r);return new z(s,l)}},G=i({},U,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var i=Math.PI/180,n=e.lat*i,r=t.lat*i,a=Math.sin((t.lat-e.lat)*i/2),o=Math.sin((t.lng-e.lng)*i/2),s=a*a+Math.cos(n)*Math.cos(r)*o*o,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),H=6378137,W={R:H,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,e.lat),-i),r=Math.sin(n*t);return new M(this.R*e.lng*t,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(e){var t=180/Math.PI;return new V((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=H*Math.PI;return new R([-e,-e],[e,e])}()};function q(e,t,i,n){if(v(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=i,this._d=n}function Z(e,t,i,n){return new q(e,t,i,n)}q.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new M((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var Y=i({},G,{code:"EPSG:3857",projection:W,transformation:function(){var e=.5/(Math.PI*W.R);return Z(e,.5,-e,.5)}()}),X=i({},Y,{code:"EPSG:900913"});function K(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function $(e,t){var i,n,r,a,o,s,l="";for(i=0,r=e.length;i<r;i++){for(o=e[i],n=0,a=o.length;n<a;n++)s=o[n],l+=(n?"L":"M")+s.x+" "+s.y;l+=t?Ee?"z":"x":""}return l||"M0 0"}var Q=document.documentElement.style,J="ActiveXObject"in window,ee=J&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ie=Ie("webkit"),ne=Ie("android"),re=Ie("android 2")||Ie("android 3"),ae=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),oe=ne&&Ie("Google")&&ae<537&&!("AudioNode"in window),se=!!window.opera,le=!te&&Ie("chrome"),ce=Ie("gecko")&&!ie&&!se&&!J,ue=!le&&Ie("safari"),he=Ie("phantom"),de="OTransition"in Q,pe=0===navigator.platform.indexOf("Win"),fe=J&&"transition"in Q,me="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!re,ge="MozPerspective"in Q,ve=!window.L_DISABLE_3D&&(fe||me||ge)&&!de&&!he,ye="undefined"!==typeof orientation||Ie("mobile"),_e=ye&&ie,be=ye&&me,xe=!window.PointerEvent&&window.MSPointerEvent,we=!(!window.PointerEvent&&!xe),Te=!window.L_NO_TOUCH&&(we||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Se=ye&&se,Oe=ye&&ce,Ce=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ke=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",c,t),window.removeEventListener("testPassiveEventSupport",c,t)}catch(i){}return e}(),Pe=function(){return!!document.createElement("canvas").getContext}(),Ee=!(!document.createElementNS||!K("svg").createSVGRect),Ae=!Ee&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"===typeof t.adj}catch(i){return!1}}();function Ie(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Me={ie:J,ielt9:ee,edge:te,webkit:ie,android:ne,android23:re,androidStock:oe,opera:se,chrome:le,gecko:ce,safari:ue,phantom:he,opera12:de,win:pe,ie3d:fe,webkit3d:me,gecko3d:ge,any3d:ve,mobile:ye,mobileWebkit:_e,mobileWebkit3d:be,msPointer:xe,pointer:we,touch:Te,mobileOpera:Se,mobileGecko:Oe,retina:Ce,passiveEvents:ke,canvas:Pe,svg:Ee,vml:Ae},De=xe?"MSPointerDown":"pointerdown",je=xe?"MSPointerMove":"pointermove",Le=xe?"MSPointerUp":"pointerup",Re=xe?"MSPointerCancel":"pointercancel",Ne={},ze=!1;function Be(e,t,i,n){return"touchstart"===t?Fe(e,i,n):"touchmove"===t?qe(e,i,n):"touchend"===t&&Ze(e,i,n),this}function Ve(e,t,i){var n=e["_leaflet_"+t+i];return"touchstart"===t?e.removeEventListener(De,n,!1):"touchmove"===t?e.removeEventListener(je,n,!1):"touchend"===t&&(e.removeEventListener(Le,n,!1),e.removeEventListener(Re,n,!1)),this}function Fe(e,t,i){var n=r((function(e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Gt(e),We(e,t)}));e["_leaflet_touchstart"+i]=n,e.addEventListener(De,n,!1),ze||(document.addEventListener(De,Ue,!0),document.addEventListener(je,Ge,!0),document.addEventListener(Le,He,!0),document.addEventListener(Re,He,!0),ze=!0)}function Ue(e){Ne[e.pointerId]=e}function Ge(e){Ne[e.pointerId]&&(Ne[e.pointerId]=e)}function He(e){delete Ne[e.pointerId]}function We(e,t){for(var i in e.touches=[],Ne)e.touches.push(Ne[i]);e.changedTouches=[e],t(e)}function qe(e,t,i){var n=function(e){e.pointerType===(e.MSPOINTER_TYPE_MOUSE||"mouse")&&0===e.buttons||We(e,t)};e["_leaflet_touchmove"+i]=n,e.addEventListener(je,n,!1)}function Ze(e,t,i){var n=function(e){We(e,t)};e["_leaflet_touchend"+i]=n,e.addEventListener(Le,n,!1),e.addEventListener(Re,n,!1)}var Ye=xe?"MSPointerDown":we?"pointerdown":"touchstart",Xe=xe?"MSPointerUp":we?"pointerup":"touchend",Ke="_leaflet_";function $e(e,t,i){var n,r,a=!1,o=250;function s(e){if(we){if(!e.isPrimary)return;if("mouse"===e.pointerType)return}else if(e.touches.length>1)return;var t=Date.now(),i=t-(n||t);r=e.touches?e.touches[0]:e,a=i>0&&i<=o,n=t}function l(e){if(a&&!r.cancelBubble){if(we){if("mouse"===e.pointerType)return;var i,o,s={};for(o in r)i=r[o],s[o]=i&&i.bind?i.bind(r):i;r=s}r.type="dblclick",r.button=0,t(r),n=null}}return e[Ke+Ye+i]=s,e[Ke+Xe+i]=l,e[Ke+"dblclick"+i]=t,e.addEventListener(Ye,s,!!ke&&{passive:!1}),e.addEventListener(Xe,l,!!ke&&{passive:!1}),e.addEventListener("dblclick",t,!1),this}function Qe(e,t){var i=e[Ke+Ye+t],n=e[Ke+Xe+t],r=e[Ke+"dblclick"+t];return e.removeEventListener(Ye,i,!!ke&&{passive:!1}),e.removeEventListener(Xe,n,!!ke&&{passive:!1}),e.removeEventListener("dblclick",r,!1),this}var Je,et,tt,it,nt,rt=xt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),at=xt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ot="webkitTransition"===at||"OTransition"===at?at+"End":"transitionend";function st(e){return"string"===typeof e?document.getElementById(e):e}function lt(e,t){var i=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(e,null);i=n?n[t]:null}return"auto"===i?null:i}function ct(e,t,i){var n=document.createElement(e);return n.className=t||"",i&&i.appendChild(n),n}function ut(e){var t=e.parentNode;t&&t.removeChild(e)}function ht(e){while(e.firstChild)e.removeChild(e.firstChild)}function dt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function pt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function ft(e,t){if(void 0!==e.classList)return e.classList.contains(t);var i=yt(e);return i.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(i)}function mt(e,t){if(void 0!==e.classList)for(var i=d(t),n=0,r=i.length;n<r;n++)e.classList.add(i[n]);else if(!ft(e,t)){var a=yt(e);vt(e,(a?a+" ":"")+t)}}function gt(e,t){void 0!==e.classList?e.classList.remove(t):vt(e,h((" "+yt(e)+" ").replace(" "+t+" "," ")))}function vt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function yt(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function _t(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&bt(e,t)}function bt(e,t){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=e.filters.item(n)}catch(r){if(1===t)return}t=Math.round(100*t),i?(i.Enabled=100!==t,i.Opacity=t):e.style.filter+=" progid:"+n+"(opacity="+t+")"}function xt(e){for(var t=document.documentElement.style,i=0;i<e.length;i++)if(e[i]in t)return e[i];return!1}function wt(e,t,i){var n=t||new M(0,0);e.style[rt]=(fe?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function Tt(e,t){e._leaflet_pos=t,ve?wt(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function St(e){return e._leaflet_pos||new M(0,0)}if("onselectstart"in document)Je=function(){Dt(window,"selectstart",Gt)},et=function(){Lt(window,"selectstart",Gt)};else{var Ot=xt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Je=function(){if(Ot){var e=document.documentElement.style;tt=e[Ot],e[Ot]="none"}},et=function(){Ot&&(document.documentElement.style[Ot]=tt,tt=void 0)}}function Ct(){Dt(window,"dragstart",Gt)}function kt(){Lt(window,"dragstart",Gt)}function Pt(e){while(-1===e.tabIndex)e=e.parentNode;e.style&&(Et(),it=e,nt=e.style.outline,e.style.outline="none",Dt(window,"keydown",Et))}function Et(){it&&(it.style.outline=nt,it=void 0,nt=void 0,Lt(window,"keydown",Et))}function At(e){do{e=e.parentNode}while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function It(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Mt={TRANSFORM:rt,TRANSITION:at,TRANSITION_END:ot,get:st,getStyle:lt,create:ct,remove:ut,empty:ht,toFront:dt,toBack:pt,hasClass:ft,addClass:mt,removeClass:gt,setClass:vt,getClass:yt,setOpacity:_t,testProp:xt,setTransform:wt,setPosition:Tt,getPosition:St,disableTextSelection:Je,enableTextSelection:et,disableImageDrag:Ct,enableImageDrag:kt,preventOutline:Pt,restoreOutline:Et,getSizedParentNode:At,getScale:It};function Dt(e,t,i,n){if("object"===typeof t)for(var r in t)zt(e,r,t[r],i);else{t=d(t);for(var a=0,o=t.length;a<o;a++)zt(e,t[a],i,n)}return this}var jt="_leaflet_events";function Lt(e,t,i,n){if("object"===typeof t)for(var r in t)Bt(e,r,t[r],i);else if(t){t=d(t);for(var a=0,o=t.length;a<o;a++)Bt(e,t[a],i,n)}else{for(var s in e[jt])Bt(e,s,e[jt][s]);delete e[jt]}return this}function Rt(){if(we)return!(te||ue)}var Nt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function zt(e,t,i,n){var r=t+o(i)+(n?"_"+o(n):"");if(e[jt]&&e[jt][r])return this;var a=function(t){return i.call(n||e,t||window.event)},s=a;we&&0===t.indexOf("touch")?Be(e,t,a,r):Te&&"dblclick"===t&&!Rt()?$e(e,a,r):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(Nt[t]||t,a,!!ke&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(a=function(t){t=t||window.event,$t(e,t)&&s(t)},e.addEventListener(Nt[t],a,!1)):e.addEventListener(t,s,!1):"attachEvent"in e&&e.attachEvent("on"+t,a),e[jt]=e[jt]||{},e[jt][r]=a}function Bt(e,t,i,n){var r=t+o(i)+(n?"_"+o(n):""),a=e[jt]&&e[jt][r];if(!a)return this;we&&0===t.indexOf("touch")?Ve(e,t,r):Te&&"dblclick"===t&&!Rt()?Qe(e,r):"removeEventListener"in e?e.removeEventListener(Nt[t]||t,a,!1):"detachEvent"in e&&e.detachEvent("on"+t,a),e[jt][r]=null}function Vt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,Kt(e),this}function Ft(e){return zt(e,"wheel",Vt),this}function Ut(e){return Dt(e,"mousedown touchstart dblclick",Vt),zt(e,"click",Xt),this}function Gt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Ht(e){return Gt(e),Vt(e),this}function Wt(e,t){if(!t)return new M(e.clientX,e.clientY);var i=It(t),n=i.boundingClientRect;return new M((e.clientX-n.left)/i.x-t.clientLeft,(e.clientY-n.top)/i.y-t.clientTop)}var qt=pe&&le?2*window.devicePixelRatio:ce?window.devicePixelRatio:1;function Zt(e){return te?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/qt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}var Yt={};function Xt(e){Yt[e.type]=!0}function Kt(e){var t=Yt[e.type];return Yt[e.type]=!1,t}function $t(e,t){var i=t.relatedTarget;if(!i)return!0;try{while(i&&i!==e)i=i.parentNode}catch(n){return!1}return i!==e}var Qt={on:Dt,off:Lt,stopPropagation:Vt,disableScrollPropagation:Ft,disableClickPropagation:Ut,preventDefault:Gt,stop:Ht,getMousePosition:Wt,getWheelDelta:Zt,fakeStop:Xt,skipped:Kt,isExternalTarget:$t,addListener:Dt,removeListener:Lt},Jt=I.extend({run:function(e,t,i,n){this.stop(),this._el=e,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=St(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,i=1e3*this._duration;t<i?this._runFrame(this._easeOut(t/i),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var i=this._startPos.add(this._offset.multiplyBy(e));t&&i._round(),Tt(this._el,i),this.fire("step")},_complete:function(){C(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),ei=I.extend({options:{crs:Y,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=p(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(F(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=at&&ve&&!Se&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Dt(this._proxy,ot,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,n){if(t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(F(e),t,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n){void 0!==n.animate&&(n.zoom=i({animate:n.animate},n.zoom),n.pan=i({animate:n.animate,duration:n.duration},n.pan));var r=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,n.zoom):this._tryAnimatedPan(e,n.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(ve?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(ve?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,i){var n=this.getZoomScale(t),r=this.getSize().divideBy(2),a=e instanceof M?e:this.latLngToContainerPoint(e),o=a.subtract(r).multiplyBy(1-1/n),s=this.containerPointToLatLng(r.add(o));return this.setView(s,t,{zoom:i})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():B(e);var i=j(t.paddingTopLeft||t.padding||[0,0]),n=j(t.paddingBottomRight||t.padding||[0,0]),r=this.getBoundsZoom(e,!1,i.add(n));if(r="number"===typeof t.maxZoom?Math.min(t.maxZoom,r):r,r===1/0)return{center:e.getCenter(),zoom:r};var a=n.subtract(i).divideBy(2),o=this.project(e.getSouthWest(),r),s=this.project(e.getNorthEast(),r),l=this.unproject(o.add(s).divideBy(2).add(a),r);return{center:l,zoom:r}},fitBounds:function(e,t){if(e=B(e),!e.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(e,t);return this.setView(i.center,i.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(e=j(e).round(),t=t||{},!e.x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Jt,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){mt(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,i,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,i){if(i=i||{},!1===i.animate||!ve)return this.setView(e,t,i);this._stop();var n=this.project(this.getCenter()),r=this.project(e),a=this.getSize(),o=this._zoom;e=F(e),t=void 0===t?o:t;var s=Math.max(a.x,a.y),l=s*this.getZoomScale(o,t),c=r.distanceTo(n)||1,u=1.42,h=u*u;function d(e){var t=e?-1:1,i=e?l:s,n=l*l-s*s+t*h*h*c*c,r=2*i*h*c,a=n/r,o=Math.sqrt(a*a+1)-a,u=o<1e-9?-18:Math.log(o);return u}function p(e){return(Math.exp(e)-Math.exp(-e))/2}function f(e){return(Math.exp(e)+Math.exp(-e))/2}function m(e){return p(e)/f(e)}var g=d(0);function v(e){return s*(f(g)/f(g+u*e))}function y(e){return s*(f(g)*m(g+u*e)-p(g))/h}function _(e){return 1-Math.pow(1-e,1.5)}var b=Date.now(),x=(d(1)-g)/u,w=i.duration?1e3*i.duration:1e3*x*.8;function T(){var i=(Date.now()-b)/w,a=_(i)*x;i<=1?(this._flyToFrame=O(T,this),this._move(this.unproject(n.add(r.subtract(n).multiplyBy(y(a)/c)),o),this.getScaleZoom(s/v(a),o),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),T.call(this),this},flyToBounds:function(e,t){var i=this._getBoundsCenterZoom(e,t);return this.flyTo(i.center,i.zoom,t)},setMaxBounds:function(e){return e=B(e),e.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,B(e));return i.equals(n)||this.panTo(n,t),this._enforcingBounds=!1,this},panInside:function(e,t){t=t||{};var i=j(t.paddingTopLeft||t.padding||[0,0]),n=j(t.paddingBottomRight||t.padding||[0,0]),r=this.getCenter(),a=this.project(r),o=this.project(e),s=this.getPixelBounds(),l=s.getSize().divideBy(2),c=N([s.min.add(i),s.max.subtract(n)]);if(!c.contains(o)){this._enforcingBounds=!0;var u=a.subtract(o),h=j(o.x+u.x,o.y+u.y);(o.x<c.min.x||o.x>c.max.x)&&(h.x=a.x-u.x,u.x>0?h.x+=l.x-i.x:h.x-=l.x-n.x),(o.y<c.min.y||o.y>c.max.y)&&(h.y=a.y-u.y,u.y>0?h.y+=l.y-i.y:h.y-=l.y-n.y),this.panTo(this.unproject(h),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=i({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),a=t.divideBy(2).round(),o=n.divideBy(2).round(),s=a.subtract(o);return s.x||s.y?(e.animate&&e.pan?this.panBy(s):(e.pan&&this._rawPanBy(s),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=i({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=r(this._handleGeolocationResponse,this),n=r(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,n,e):navigator.geolocation.getCurrentPosition(t,n,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,i=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(e){var t=e.coords.latitude,i=e.coords.longitude,n=new V(t,i),r=n.toBounds(2*e.coords.accuracy),a=this._locateOptions;if(a.setView){var o=this.getBoundsZoom(r);this.setView(n,a.maxZoom?Math.min(o,a.maxZoom):o)}var s={latlng:n,bounds:r,timestamp:e.timestamp};for(var l in e.coords)"number"===typeof e.coords[l]&&(s[l]=e.coords[l]);this.fire("locationfound",s)},addHandler:function(e,t){if(!t)return this;var i=this[e]=new t(this);return this._handlers.push(i),this.options[e]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ut(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(C(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)ut(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var i="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),n=ct("div",i,t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),i=this.unproject(e.getTopRight());return new z(t,i)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,i){e=B(e),i=j(i||[0,0]);var n=this.getZoom()||0,r=this.getMinZoom(),a=this.getMaxZoom(),o=e.getNorthWest(),s=e.getSouthEast(),l=this.getSize().subtract(i),c=N(this.project(s,n),this.project(o,n)).getSize(),u=ve?this.options.zoomSnap:1,h=l.x/c.x,d=l.y/c.y,p=t?Math.max(h,d):Math.min(h,d);return n=this.getScaleZoom(p,n),u&&(n=Math.round(n/(u/100))*(u/100),n=t?Math.ceil(n/u)*u:Math.floor(n/u)*u),Math.max(r,Math.min(a,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var i=this._getTopLeftPoint(e,t);return new R(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"===typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var i=this.options.crs;return t=void 0===t?this._zoom:t,i.scale(e)/i.scale(t)},getScaleZoom:function(e,t){var i=this.options.crs;t=void 0===t?this._zoom:t;var n=i.zoom(e*i.scale(t));return isNaN(n)?1/0:n},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(F(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(j(e),t)},layerPointToLatLng:function(e){var t=j(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(F(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(F(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(B(e))},distance:function(e,t){return this.options.crs.distance(F(e),F(t))},containerPointToLayerPoint:function(e){return j(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return j(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(j(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(e)))},mouseEventToContainerPoint:function(e){return Wt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=st(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");Dt(t,"scroll",this._onScroll,this),this._containerId=o(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&ve,mt(e,"leaflet-container"+(Te?" leaflet-touch":"")+(Ce?" leaflet-retina":"")+(ee?" leaflet-oldie":"")+(ue?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=lt(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Tt(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(mt(e.markerPane,"leaflet-zoom-hide"),mt(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t){Tt(this._mapPane,new M(0,0));var i=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var n=this._zoom!==t;this._moveStart(n,!1)._move(e,t)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,i){void 0===t&&(t=this._zoom);var n=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return C(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Tt(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[o(this._container)]=this;var t=e?Lt:Dt;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),ve&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){C(this._resizeRequest),this._resizeRequest=O((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){var i,n=[],r="mouseout"===t||"mouseover"===t,a=e.target||e.srcElement,s=!1;while(a){if(i=this._targets[o(a)],i&&("click"===t||"preclick"===t)&&!e._simulated&&this._draggableMoved(i)){s=!0;break}if(i&&i.listens(t,!0)){if(r&&!$t(a,e))break;if(n.push(i),r)break}if(a===this._container)break;a=a.parentNode}return n.length||s||r||!$t(a,e)||(n=[this]),n},_handleDOMEvent:function(e){if(this._loaded&&!Kt(e)){var t=e.type;"mousedown"!==t&&"keypress"!==t&&"keyup"!==t&&"keydown"!==t||Pt(e.target||e.srcElement),this._fireDOMEvent(e,t)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,n){if("click"===e.type){var r=i({},e);r.type="preclick",this._fireDOMEvent(r,r.type,n)}if(!e._stopped&&(n=(n||[]).concat(this._findEventTargets(e,t)),n.length)){var a=n[0];"contextmenu"===t&&a.listens(t,!0)&&Gt(e);var o={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var s=a.getLatLng&&(!a._radius||a._radius<=10);o.containerPoint=s?this.latLngToContainerPoint(a.getLatLng()):this.mouseEventToContainerPoint(e),o.layerPoint=this.containerPointToLayerPoint(o.containerPoint),o.latlng=s?a.getLatLng():this.layerPointToLatLng(o.layerPoint)}for(var l=0;l<n.length;l++)if(n[l].fire(t,o,!0),o.originalEvent._stopped||!1===n[l].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,t))return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return St(this._mapPane)||new M(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var i=e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var i=this.getSize()._divideBy(2);return this.project(e,t)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,i){var n=this._getNewPixelOrigin(i,t);return this.project(e,t)._subtract(n)},_latLngBoundsToNewLayerBounds:function(e,t,i){var n=this._getNewPixelOrigin(i,t);return N([this.project(e.getSouthWest(),t)._subtract(n),this.project(e.getNorthWest(),t)._subtract(n),this.project(e.getSouthEast(),t)._subtract(n),this.project(e.getNorthEast(),t)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,i){if(!i)return e;var n=this.project(e,t),r=this.getSize().divideBy(2),a=new R(n.subtract(r),n.add(r)),o=this._getBoundsOffset(a,i,t);return o.round().equals([0,0])?e:this.unproject(n.add(o),t)},_limitOffset:function(e,t){if(!t)return e;var i=this.getPixelBounds(),n=new R(i.min.add(e),i.max.add(e));return e.add(this._getBoundsOffset(n,t))},_getBoundsOffset:function(e,t,i){var n=N(this.project(t.getNorthEast(),i),this.project(t.getSouthWest(),i)),r=n.min.subtract(e.min),a=n.max.subtract(e.max),o=this._rebound(r.x,-a.x),s=this._rebound(r.y,-a.y);return new M(o,s)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),i=this.getMaxZoom(),n=ve?this.options.zoomSnap:1;return n&&(e=Math.round(e/n)*n),Math.max(t,Math.min(i,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){gt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var i=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(i))&&(this.panBy(i,t),!0)},_createAnimProxy:function(){var e=this._proxy=ct("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",(function(e){var t=rt,i=this._proxy.style[t];wt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),i===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ut(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();wt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(t),r=this._getCenterOffset(e)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(r))&&(O((function(){this._moveStart(!0,!1)._animateZoom(e,t,!0)}),this),!0)},_animateZoom:function(e,t,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,mt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:n}),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&gt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),O((function(){this._moveEnd(!0)}),this))}});function ti(e,t){return new ei(e,t)}var ii=P.extend({options:{position:"topright"},initialize:function(e){p(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),i=this.getPosition(),n=e._controlCorners[i];return mt(t,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(t,n.firstChild):n.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ut(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),ni=function(e){return new ii(e)};ei.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",i=this._controlContainer=ct("div",t+"control-container",this._container);function n(n,r){var a=t+n+" "+t+r;e[n+r]=ct("div",a,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)ut(this._controlCorners[e]);ut(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ri=ii.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,i,n){return i<n?-1:n<i?1:0}},initialize:function(e,t,i){for(var n in p(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,e)this._addLayer(e[n],n);for(n in t)this._addLayer(t[n],n,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return ii.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(o(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){mt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(mt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):gt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return gt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=ct("div",e),i=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Ut(t),Ft(t);var n=this._section=ct("section",e+"-list");i&&(this._map.on("click",this.collapse,this),ne||Dt(t,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=ct("a",e+"-toggle",t);r.href="#",r.title="Layers",Te?(Dt(r,"click",Ht),Dt(r,"click",this.expand,this)):Dt(r,"focus",this.expand,this),i||this.expand(),this._baseLayersList=ct("div",e+"-base",n),this._separator=ct("div",e+"-separator",n),this._overlaysList=ct("div",e+"-overlays",n),t.appendChild(n)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&o(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,i){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:i}),this.options.sortLayers&&this._layers.sort(r((function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)}),this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ht(this._baseLayersList),ht(this._overlaysList),this._layerControlInputs=[];var e,t,i,n,r=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),t=t||n.overlay,e=e||!n.overlay,r+=n.overlay?0:1;return this.options.hideSingleBase&&(e=e&&r>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(o(e.target)),i=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;i&&this._map.fire(i,t)},_createRadioElement:function(e,t){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(e){var t,i=document.createElement("label"),n=this._map.hasLayer(e.layer);e.overlay?(t=document.createElement("input"),t.type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=n):t=this._createRadioElement("leaflet-base-layers_"+o(this),n),this._layerControlInputs.push(t),t.layerId=o(e.layer),Dt(t,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+e.name;var a=document.createElement("div");i.appendChild(a),a.appendChild(t),a.appendChild(r);var s=e.overlay?this._overlaysList:this._baseLayersList;return s.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var e,t,i=this._layerControlInputs,n=[],r=[];this._handlingClick=!0;for(var a=i.length-1;a>=0;a--)e=i[a],t=this._getLayer(e.layerId).layer,e.checked?n.push(t):e.checked||r.push(t);for(a=0;a<r.length;a++)this._map.hasLayer(r[a])&&this._map.removeLayer(r[a]);for(a=0;a<n.length;a++)this._map.hasLayer(n[a])||this._map.addLayer(n[a]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var e,t,i=this._layerControlInputs,n=this._map.getZoom(),r=i.length-1;r>=0;r--)e=i[r],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&n<t.options.minZoom||void 0!==t.options.maxZoom&&n>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),ai=function(e,t,i){return new ri(e,t,i)},oi=ii.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",i=ct("div",t+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,t+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,t+"-out",i,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,i,n,r){var a=ct("a",i,n);return a.innerHTML=e,a.href="#",a.title=t,a.setAttribute("role","button"),a.setAttribute("aria-label",t),Ut(a),Dt(a,"click",Ht),Dt(a,"click",r,this),Dt(a,"click",this._refocusOnMap,this),a},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";gt(this._zoomInButton,t),gt(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMinZoom())&&mt(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMaxZoom())&&mt(this._zoomInButton,t)}});ei.mergeOptions({zoomControl:!0}),ei.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new oi,this.addControl(this.zoomControl))}));var si=function(e){return new oi(e)},li=ii.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",i=ct("div",t),n=this.options;return this._addScales(n,t+"-line",i),e.on(n.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),i},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,i){e.metric&&(this._mScale=ct("div",t,i)),e.imperial&&(this._iScale=ct("div",t,i))},_update:function(){var e=this._map,t=e.getSize().y/2,i=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(i)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),i=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,i,t/e)},_updateImperial:function(e){var t,i,n,r=3.2808399*e;r>5280?(t=r/5280,i=this._getRoundNum(t),this._updateScale(this._iScale,i+" mi",i/t)):(n=this._getRoundNum(r),this._updateScale(this._iScale,n+" ft",n/r))},_updateScale:function(e,t,i){e.style.width=Math.round(this.options.maxWidth*i)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),i=e/t;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,t*i}}),ci=function(e){return new li(e)},ui=ii.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){p(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=ct("div","leaflet-control-attribution"),Ut(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),this._container},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var i=[];this.options.prefix&&i.push(this.options.prefix),e.length&&i.push(e.join(", ")),this._container.innerHTML=i.join(" | ")}}});ei.mergeOptions({attributionControl:!0}),ei.addInitHook((function(){this.options.attributionControl&&(new ui).addTo(this)}));var hi=function(e){return new ui(e)};ii.Layers=ri,ii.Zoom=oi,ii.Scale=li,ii.Attribution=ui,ni.layers=ai,ni.zoom=si,ni.scale=ci,ni.attribution=hi;var di=P.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});di.addTo=function(e,t){return e.addHandler(t,this),this};var pi,fi={Events:A},mi=Te?"touchstart mousedown":"mousedown",gi={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},vi={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},yi=I.extend({options:{clickTolerance:3},initialize:function(e,t,i,n){p(this,n),this._element=e,this._dragStartTarget=t||e,this._preventOutline=i},enable:function(){this._enabled||(Dt(this._dragStartTarget,mi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(yi._dragging===this&&this.finishDrag(),Lt(this._dragStartTarget,mi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(!e._simulated&&this._enabled&&(this._moved=!1,!ft(this._element,"leaflet-zoom-anim")&&!(yi._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&(yi._dragging=this,this._preventOutline&&Pt(this._element),Ct(),Je(),!this._moving))){this.fire("down");var t=e.touches?e.touches[0]:e,i=At(this._element);this._startPoint=new M(t.clientX,t.clientY),this._parentScale=It(i),Dt(document,vi[e.type],this._onMove,this),Dt(document,gi[e.type],this._onUp,this)}},_onMove:function(e){if(!e._simulated&&this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,i=new M(t.clientX,t.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,Gt(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=St(this._element).subtract(i),mt(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),mt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,C(this._animRequest),this._lastEvent=e,this._animRequest=O(this._updatePosition,this,!0)))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Tt(this._element,this._newPos),this.fire("drag",e)},_onUp:function(e){!e._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var e in gt(document.body,"leaflet-dragging"),this._lastTarget&&(gt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),vi)Lt(document,vi[e],this._onMove,this),Lt(document,gi[e],this._onUp,this);kt(),et(),this._moved&&this._moving&&(C(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,yi._dragging=!1}});function _i(e,t){if(!t||!e.length)return e.slice();var i=t*t;return e=Si(e,i),e=wi(e,i),e}function bi(e,t,i){return Math.sqrt(Ei(e,t,i,!0))}function xi(e,t,i){return Ei(e,t,i)}function wi(e,t){var i=e.length,n=typeof Uint8Array!==void 0+""?Uint8Array:Array,r=new n(i);r[0]=r[i-1]=1,Ti(e,r,t,0,i-1);var a,o=[];for(a=0;a<i;a++)r[a]&&o.push(e[a]);return o}function Ti(e,t,i,n,r){var a,o,s,l=0;for(o=n+1;o<=r-1;o++)s=Ei(e[o],e[n],e[r],!0),s>l&&(a=o,l=s);l>i&&(t[a]=1,Ti(e,t,i,n,a),Ti(e,t,i,a,r))}function Si(e,t){for(var i=[e[0]],n=1,r=0,a=e.length;n<a;n++)Pi(e[n],e[r])>t&&(i.push(e[n]),r=n);return r<a-1&&i.push(e[a-1]),i}function Oi(e,t,i,n,r){var a,o,s,l=n?pi:ki(e,i),c=ki(t,i);pi=c;while(1){if(!(l|c))return[e,t];if(l&c)return!1;a=l||c,o=Ci(e,t,a,i,r),s=ki(o,i),a===l?(e=o,l=s):(t=o,c=s)}}function Ci(e,t,i,n,r){var a,o,s=t.x-e.x,l=t.y-e.y,c=n.min,u=n.max;return 8&i?(a=e.x+s*(u.y-e.y)/l,o=u.y):4&i?(a=e.x+s*(c.y-e.y)/l,o=c.y):2&i?(a=u.x,o=e.y+l*(u.x-e.x)/s):1&i&&(a=c.x,o=e.y+l*(c.x-e.x)/s),new M(a,o,r)}function ki(e,t){var i=0;return e.x<t.min.x?i|=1:e.x>t.max.x&&(i|=2),e.y<t.min.y?i|=4:e.y>t.max.y&&(i|=8),i}function Pi(e,t){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n}function Ei(e,t,i,n){var r,a=t.x,o=t.y,s=i.x-a,l=i.y-o,c=s*s+l*l;return c>0&&(r=((e.x-a)*s+(e.y-o)*l)/c,r>1?(a=i.x,o=i.y):r>0&&(a+=s*r,o+=l*r)),s=e.x-a,l=e.y-o,n?s*s+l*l:new M(a,o)}function Ai(e){return!v(e[0])||"object"!==typeof e[0][0]&&"undefined"!==typeof e[0][0]}function Ii(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ai(e)}var Mi={simplify:_i,pointToSegmentDistance:bi,closestPointOnSegment:xi,clipSegment:Oi,_getEdgeIntersection:Ci,_getBitCode:ki,_sqClosestPointOnSegment:Ei,isFlat:Ai,_flat:Ii};function Di(e,t,i){var n,r,a,o,s,l,c,u,h,d=[1,4,2,8];for(r=0,c=e.length;r<c;r++)e[r]._code=ki(e[r],t);for(o=0;o<4;o++){for(u=d[o],n=[],r=0,c=e.length,a=c-1;r<c;a=r++)s=e[r],l=e[a],s._code&u?l._code&u||(h=Ci(l,s,u,t,i),h._code=ki(h,t),n.push(h)):(l._code&u&&(h=Ci(l,s,u,t,i),h._code=ki(h,t),n.push(h)),n.push(s));e=n}return e}var ji={clipPolygon:Di},Li={project:function(e){return new M(e.lng,e.lat)},unproject:function(e){return new V(e.y,e.x)},bounds:new R([-180,-90],[180,90])},Ri={R:6378137,R_MINOR:6356752.314245179,bounds:new R([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,i=this.R,n=e.lat*t,r=this.R_MINOR/i,a=Math.sqrt(1-r*r),o=a*Math.sin(n),s=Math.tan(Math.PI/4-n/2)/Math.pow((1-o)/(1+o),a/2);return n=-i*Math.log(Math.max(s,1e-10)),new M(e.lng*t*i,n)},unproject:function(e){for(var t,i=180/Math.PI,n=this.R,r=this.R_MINOR/n,a=Math.sqrt(1-r*r),o=Math.exp(-e.y/n),s=Math.PI/2-2*Math.atan(o),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)t=a*Math.sin(s),t=Math.pow((1-t)/(1+t),a/2),c=Math.PI/2-2*Math.atan(o*t)-s,s+=c;return new V(s*i,e.x*i/n)}},Ni={LonLat:Li,Mercator:Ri,SphericalMercator:W},zi=i({},G,{code:"EPSG:3395",projection:Ri,transformation:function(){var e=.5/(Math.PI*Ri.R);return Z(e,.5,-e,.5)}()}),Bi=i({},G,{code:"EPSG:4326",projection:Li,transformation:Z(1/180,1,-1/180,.5)}),Vi=i({},U,{projection:Li,transformation:Z(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var i=t.lng-e.lng,n=t.lat-e.lat;return Math.sqrt(i*i+n*n)},infinite:!0});U.Earth=G,U.EPSG3395=zi,U.EPSG3857=Y,U.EPSG900913=X,U.EPSG4326=Bi,U.Simple=Vi;var Fi=I.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[o(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[o(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var i=this.getEvents();t.on(i,this),this.once("remove",(function(){t.off(i,this)}),this)}this.onAdd(t),this.getAttribution&&t.attributionControl&&t.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),t.fire("layeradd",{layer:this})}}});ei.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=o(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=o(e);return this._layers[t]?(this._loaded&&e.onRemove(this),e.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(e.getAttribution()),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return!!e&&o(e)in this._layers},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},_addLayers:function(e){e=e?v(e)?e:[e]:[];for(var t=0,i=e.length;t<i;t++)this.addLayer(e[t])},_addZoomLimit:function(e){!isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[o(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=o(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var r=this._zoomBoundLayers[n].options;e=void 0===r.minZoom?e:Math.min(e,r.minZoom),t=void 0===r.maxZoom?t:Math.max(t,r.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ui=Fi.extend({initialize:function(e,t){var i,n;if(p(this,t),this._layers={},e)for(i=0,n=e.length;i<n;i++)this.addLayer(e[i])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){if(!e)return!1;var t="number"===typeof e?e:this.getLayerId(e);return t in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,i,n=Array.prototype.slice.call(arguments,1);for(t in this._layers)i=this._layers[t],i[e]&&i[e].apply(i,n);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return o(e)}}),Gi=function(e,t){return new Ui(e,t)},Hi=Ui.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Ui.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Ui.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new z;for(var t in this._layers){var i=this._layers[t];e.extend(i.getBounds?i.getBounds():i.getLatLng())}return e}}),Wi=function(e,t){return new Hi(e,t)},qi=P.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(e){p(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var i=this._getIconUrl(e);if(!i){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(n,e),n},_setIconStyles:function(e,t){var i=this.options,n=i[t+"Size"];"number"===typeof n&&(n=[n,n]);var r=j(n),a=j("shadow"===t&&i.shadowAnchor||i.iconAnchor||r&&r.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(i.className||""),a&&(e.style.marginLeft=-a.x+"px",e.style.marginTop=-a.y+"px"),r&&(e.style.width=r.x+"px",e.style.height=r.y+"px")},_createImg:function(e,t){return t=t||document.createElement("img"),t.src=e,t},_getIconUrl:function(e){return Ce&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Zi(e){return new qi(e)}var Yi=qi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return Yi.imagePath||(Yi.imagePath=this._detectIconPath()),(this.options.imagePath||Yi.imagePath)+qi.prototype._getIconUrl.call(this,e)},_detectIconPath:function(){var e=ct("div","leaflet-default-icon-path",document.body),t=lt(e,"background-image")||lt(e,"backgroundImage");return document.body.removeChild(e),t=null===t||0!==t.indexOf("url")?"":t.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,""),t}}),Xi=di.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new yi(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),mt(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&gt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,i=t._map,n=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,a=St(t._icon),o=i.getPixelBounds(),s=i.getPixelOrigin(),l=N(o.min._subtract(s).add(r),o.max._subtract(s).subtract(r));if(!l.contains(a)){var c=j((Math.max(l.max.x,a.x)-l.max.x)/(o.max.x-l.max.x)-(Math.min(l.min.x,a.x)-l.min.x)/(o.min.x-l.min.x),(Math.max(l.max.y,a.y)-l.max.y)/(o.max.y-l.max.y)-(Math.min(l.min.y,a.y)-l.min.y)/(o.min.y-l.min.y)).multiplyBy(n);i.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),Tt(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=O(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(C(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,i=t._shadow,n=St(t._icon),r=t._map.layerPointToLatLng(n);i&&Tt(i,n),t._latlng=r,e.latlng=r,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){C(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),Ki=Fi.extend({options:{icon:new Yi,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){p(this,t),this._latlng=F(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=F(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=e.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,e.title&&(i.title=e.title),"IMG"===i.tagName&&(i.alt=e.alt||"")),mt(i,t),e.keyboard&&(i.tabIndex="0"),this._icon=i,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=e.icon.createShadow(this._shadow),a=!1;r!==this._shadow&&(this._removeShadow(),a=!0),r&&(mt(r,t),r.alt=""),this._shadow=r,e.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&a&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ut(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ut(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Tt(this._icon,e),this._shadow&&Tt(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(mt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Xi)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Xi(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&_t(this._icon,e),this._shadow&&_t(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function $i(e,t){return new Ki(e,t)}var Qi=Fi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return p(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Ji=Qi.extend({options:{fill:!0,radius:10},initialize:function(e,t){p(this,t),this._latlng=F(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=F(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return Qi.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,i=this._clickTolerance(),n=[e+i,t+i];this._pxBounds=new R(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function en(e,t){return new Ji(e,t)}var tn=Ji.extend({initialize:function(e,t,n){if("number"===typeof t&&(t=i({},n,{radius:t})),p(this,t),this._latlng=F(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new z(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:Qi.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===G.distance){var r=Math.PI/180,a=this._mRadius/G.R/r,o=i.project([t+a,e]),s=i.project([t-a,e]),l=o.add(s).divideBy(2),c=i.unproject(l).lat,u=Math.acos((Math.cos(a*r)-Math.sin(t*r)*Math.sin(c*r))/(Math.cos(t*r)*Math.cos(c*r)))/r;(isNaN(u)||0===u)&&(u=a/Math.cos(Math.PI/180*t)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-i.project([c,e-u]).x,this._radiusY=l.y-o.y}else{var h=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(h).x}this._updateBounds()}});function nn(e,t,i){return new tn(e,t,i)}var rn=Qi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){p(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,i,n=1/0,r=null,a=Ei,o=0,s=this._parts.length;o<s;o++)for(var l=this._parts[o],c=1,u=l.length;c<u;c++){t=l[c-1],i=l[c];var h=a(e,t,i,!0);h<n&&(n=h,r=a(e,t,i))}return r&&(r.distance=Math.sqrt(n)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e,t,i,n,r,a,o,s=this._rings[0],l=s.length;if(!l)return null;for(e=0,t=0;e<l-1;e++)t+=s[e].distanceTo(s[e+1])/2;if(0===t)return this._map.layerPointToLatLng(s[0]);for(e=0,n=0;e<l-1;e++)if(r=s[e],a=s[e+1],i=r.distanceTo(a),n+=i,n>t)return o=(n-t)/i,this._map.layerPointToLatLng([a.x-o*(a.x-r.x),a.y-o*(a.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=F(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new z,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Ai(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],i=Ai(e),n=0,r=e.length;n<r;n++)i?(t[n]=F(e[n]),this._bounds.extend(t[n])):t[n]=this._convertLatLngs(e[n]);return t},_project:function(){var e=new R;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new M(e,e);this._pxBounds=new R([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)])},_projectLatlngs:function(e,t,i){var n,r,a=e[0]instanceof V,o=e.length;if(a){for(r=[],n=0;n<o;n++)r[n]=this._map.latLngToLayerPoint(e[n]),i.extend(r[n]);t.push(r)}else for(n=0;n<o;n++)this._projectLatlngs(e[n],t,i)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,i,n,r,a,o,s,l=this._parts;for(t=0,n=0,r=this._rings.length;t<r;t++)for(s=this._rings[t],i=0,a=s.length;i<a-1;i++)o=Oi(s[i],s[i+1],e,i,!0),o&&(l[n]=l[n]||[],l[n].push(o[0]),o[1]===s[i+1]&&i!==a-2||(l[n].push(o[1]),n++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,i=0,n=e.length;i<n;i++)e[i]=_i(e[i],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var i,n,r,a,o,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(i=0,a=this._parts.length;i<a;i++)for(s=this._parts[i],n=0,o=s.length,r=o-1;n<o;r=n++)if((t||0!==n)&&bi(e,s[r],s[n])<=l)return!0;return!1}});function an(e,t){return new rn(e,t)}rn._flat=Ii;var on=rn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e,t,i,n,r,a,o,s,l,c=this._rings[0],u=c.length;if(!u)return null;for(a=o=s=0,e=0,t=u-1;e<u;t=e++)i=c[e],n=c[t],r=i.y*n.x-n.y*i.x,o+=(i.x+n.x)*r,s+=(i.y+n.y)*r,a+=3*r;return l=0===a?c[0]:[o/a,s/a],this._map.layerPointToLatLng(l)},_convertLatLngs:function(e){var t=rn.prototype._convertLatLngs.call(this,e),i=t.length;return i>=2&&t[0]instanceof V&&t[0].equals(t[i-1])&&t.pop(),t},_setLatLngs:function(e){rn.prototype._setLatLngs.call(this,e),Ai(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ai(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,i=new M(t,t);if(e=new R(e.min.subtract(i),e.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var n,r=0,a=this._rings.length;r<a;r++)n=Di(this._rings[r],e,!0),n.length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,i,n,r,a,o,s,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(r=0,s=this._parts.length;r<s;r++)for(t=this._parts[r],a=0,l=t.length,o=l-1;a<l;o=a++)i=t[a],n=t[o],i.y>e.y!==n.y>e.y&&e.x<(n.x-i.x)*(e.y-i.y)/(n.y-i.y)+i.x&&(c=!c);return c||rn.prototype._containsPoint.call(this,e,!0)}});function sn(e,t){return new on(e,t)}var ln=Hi.extend({initialize:function(e,t){p(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,i,n,r=v(e)?e:e.features;if(r){for(t=0,i=r.length;t<i;t++)n=r[t],(n.geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var a=this.options;if(a.filter&&!a.filter(e))return this;var o=cn(e,a);return o?(o.feature=gn(e),o.defaultOptions=o.options,this.resetStyle(o),a.onEachFeature&&a.onEachFeature(e,o),this.addLayer(o)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=i({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer((function(t){this._setLayerStyle(t,e)}),this)},_setLayerStyle:function(e,t){e.setStyle&&("function"===typeof t&&(t=t(e.feature)),e.setStyle(t))}});function cn(e,t){var i,n,r,a,o="Feature"===e.type?e.geometry:e,s=o?o.coordinates:null,l=[],c=t&&t.pointToLayer,u=t&&t.coordsToLatLng||hn;if(!s&&!o)return null;switch(o.type){case"Point":return i=u(s),un(c,e,i,t);case"MultiPoint":for(r=0,a=s.length;r<a;r++)i=u(s[r]),l.push(un(c,e,i,t));return new Hi(l);case"LineString":case"MultiLineString":return n=dn(s,"LineString"===o.type?0:1,u),new rn(n,t);case"Polygon":case"MultiPolygon":return n=dn(s,"Polygon"===o.type?1:2,u),new on(n,t);case"GeometryCollection":for(r=0,a=o.geometries.length;r<a;r++){var h=cn({geometry:o.geometries[r],type:"Feature",properties:e.properties},t);h&&l.push(h)}return new Hi(l);default:throw new Error("Invalid GeoJSON object.")}}function un(e,t,i,n){return e?e(t,i):new Ki(i,n&&n.markersInheritOptions&&n)}function hn(e){return new V(e[1],e[0],e[2])}function dn(e,t,i){for(var n,r=[],a=0,o=e.length;a<o;a++)n=t?dn(e[a],t-1,i):(i||hn)(e[a]),r.push(n);return r}function pn(e,t){return t="number"===typeof t?t:6,void 0!==e.alt?[u(e.lng,t),u(e.lat,t),u(e.alt,t)]:[u(e.lng,t),u(e.lat,t)]}function fn(e,t,i,n){for(var r=[],a=0,o=e.length;a<o;a++)r.push(t?fn(e[a],t-1,i,n):pn(e[a],n));return!t&&i&&r.push(r[0]),r}function mn(e,t){return e.feature?i({},e.feature,{geometry:t}):gn(t)}function gn(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var vn={toGeoJSON:function(e){return mn(this,{type:"Point",coordinates:pn(this.getLatLng(),e)})}};function yn(e,t){return new ln(e,t)}Ki.include(vn),tn.include(vn),Ji.include(vn),rn.include({toGeoJSON:function(e){var t=!Ai(this._latlngs),i=fn(this._latlngs,t?1:0,!1,e);return mn(this,{type:(t?"Multi":"")+"LineString",coordinates:i})}}),on.include({toGeoJSON:function(e){var t=!Ai(this._latlngs),i=t&&!Ai(this._latlngs[0]),n=fn(this._latlngs,i?2:t?1:0,!0,e);return t||(n=[n]),mn(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),Ui.include({toMultiPoint:function(e){var t=[];return this.eachLayer((function(i){t.push(i.toGeoJSON(e).geometry.coordinates)})),mn(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var i="GeometryCollection"===t,n=[];return this.eachLayer((function(t){if(t.toGeoJSON){var r=t.toGeoJSON(e);if(i)n.push(r.geometry);else{var a=gn(r);"FeatureCollection"===a.type?n.push.apply(n,a.features):n.push(a)}}})),i?mn(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var _n=yn,bn=Fi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,i){this._url=e,this._bounds=B(t),p(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(mt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ut(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&dt(this._image),this},bringToBack:function(){return this._map&&pt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=B(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:ct("img");mt(t,"leaflet-image-layer"),this._zoomAnimated&&mt(t,"leaflet-zoom-animated"),this.options.className&&mt(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onload=r(this.fire,this,"load"),t.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;wt(this._image,i,t)},_reset:function(){var e=this._image,t=new R(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=t.getSize();Tt(e,t.min),e.style.width=i.x+"px",e.style.height=i.y+"px"},_updateOpacity:function(){_t(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)}}),xn=function(e,t,i){return new bn(e,t,i)},wn=bn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:ct("video");if(mt(t,"leaflet-image-layer"),this._zoomAnimated&&mt(t,"leaflet-zoom-animated"),this.options.className&&mt(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onloadeddata=r(this.fire,this,"load"),e){for(var i=t.getElementsByTagName("source"),n=[],a=0;a<i.length;a++)n.push(i[a].src);this._url=i.length>0?n:[t.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style["objectFit"]="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted;for(var o=0;o<this._url.length;o++){var s=ct("source");s.src=this._url[o],t.appendChild(s)}}}});function Tn(e,t,i){return new wn(e,t,i)}var Sn=bn.extend({_initImage:function(){var e=this._image=this._url;mt(e,"leaflet-image-layer"),this._zoomAnimated&&mt(e,"leaflet-zoom-animated"),this.options.className&&mt(e,this.options.className),e.onselectstart=c,e.onmousemove=c}});function On(e,t,i){return new Sn(e,t,i)}var Cn=Fi.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(e,t){p(this,e),this._source=t},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&_t(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&_t(this._container,1),this.bringToFront()},onRemove:function(e){e._fadeAnimated?(_t(this._container,0),this._removeTimeout=setTimeout(r(ut,void 0,this._container),200)):ut(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=F(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&dt(this._container),this},bringToBack:function(){return this._map&&pt(this._container),this},_prepareOpen:function(e,t,i){if(t instanceof Fi||(i=t,t=e),t instanceof Hi)for(var n in e._layers){t=e._layers[n];break}if(!i)if(t.getCenter)i=t.getCenter();else{if(!t.getLatLng)throw new Error("Unable to get source layer LatLng.");i=t.getLatLng()}return this._source=t,this.update(),i},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof t)e.innerHTML=t;else{while(e.hasChildNodes())e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=j(this.options.offset),i=this._getAnchor();this._zoomAnimated?Tt(this._container,e.add(i)):t=t.add(e).add(i);var n=this._containerBottom=-t.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=n+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),kn=Cn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e.openPopup(this),this},onAdd:function(e){Cn.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Qi||this._source.on("preclick",Vt))},onRemove:function(e){Cn.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Qi||this._source.off("preclick",Vt))},getEvents:function(){var e=Cn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e="leaflet-popup",t=this._container=ct("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=ct("div",e+"-content-wrapper",t);if(this._contentNode=ct("div",e+"-content",i),Ut(t),Ft(this._contentNode),Dt(t,"contextmenu",Vt),this._tipContainer=ct("div",e+"-tip-container",t),this._tip=ct("div",e+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=ct("a",e+"-close-button",t);n.href="#close",n.innerHTML="&#215;",Dt(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var i=e.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),t.width=i+1+"px",t.whiteSpace="",t.height="";var n=e.offsetHeight,r=this.options.maxHeight,a="leaflet-popup-scrolled";r&&n>r?(t.height=r+"px",mt(e,a)):gt(e,a),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),i=this._getAnchor();Tt(this._container,t.add(i))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var e=this._map,t=parseInt(lt(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+t,n=this._containerWidth,r=new M(this._containerLeft,-i-this._containerBottom);r._add(St(this._container));var a=e.layerPointToContainerPoint(r),o=j(this.options.autoPanPadding),s=j(this.options.autoPanPaddingTopLeft||o),l=j(this.options.autoPanPaddingBottomRight||o),c=e.getSize(),u=0,h=0;a.x+n+l.x>c.x&&(u=a.x+n-c.x+l.x),a.x-u-s.x<0&&(u=a.x-s.x),a.y+i+l.y>c.y&&(h=a.y+i-c.y+l.y),a.y-h-s.y<0&&(h=a.y-s.y),(u||h)&&e.fire("autopanstart").panBy([u,h])}},_onCloseButtonClick:function(e){this._close(),Ht(e)},_getAnchor:function(){return j(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Pn=function(e,t){return new kn(e,t)};ei.mergeOptions({closePopupOnClick:!0}),ei.include({openPopup:function(e,t,i){return e instanceof kn||(e=new kn(i).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=e,this.addLayer(e))},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&this.removeLayer(e),this}}),Fi.include({bindPopup:function(e,t){return e instanceof kn?(p(e,t),this._popup=e,e._source=this):(this._popup&&!t||(this._popup=new kn(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e,t){return this._popup&&this._map&&(t=this._popup._prepareOpen(this,e,t),this._map.openPopup(this._popup,t)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(e){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(e)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){var t=e.layer||e.target;this._popup&&this._map&&(Ht(e),t instanceof Qi?this.openPopup(e.layer||e.target,e.latlng):this._map.hasLayer(this._popup)&&this._popup._source===t?this.closePopup():this.openPopup(t,e.latlng))},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var En=Cn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(e){Cn.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(e){Cn.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var e=Cn.prototype.getEvents.call(this);return Te&&!this.options.permanent&&(e.preclick=this._close),e},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var e="leaflet-tooltip",t=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ct("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,i,n=this._map,r=this._container,a=n.latLngToContainerPoint(n.getCenter()),o=n.layerPointToContainerPoint(e),s=this.options.direction,l=r.offsetWidth,c=r.offsetHeight,u=j(this.options.offset),h=this._getAnchor();"top"===s?(t=l/2,i=c):"bottom"===s?(t=l/2,i=0):"center"===s?(t=l/2,i=c/2):"right"===s?(t=0,i=c/2):"left"===s?(t=l,i=c/2):o.x<a.x?(s="right",t=0,i=c/2):(s="left",t=l+2*(u.x+h.x),i=c/2),e=e.subtract(j(t,i,!0)).add(u).add(h),gt(r,"leaflet-tooltip-right"),gt(r,"leaflet-tooltip-left"),gt(r,"leaflet-tooltip-top"),gt(r,"leaflet-tooltip-bottom"),mt(r,"leaflet-tooltip-"+s),Tt(r,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&_t(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return j(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),An=function(e,t){return new En(e,t)};ei.include({openTooltip:function(e,t,i){return e instanceof En||(e=new En(i).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:this.addLayer(e)},closeTooltip:function(e){return e&&this.removeLayer(e),this}}),Fi.include({bindTooltip:function(e,t){return e instanceof En?(p(e,t),this._tooltip=e,e._source=this):(this._tooltip&&!t||(this._tooltip=new En(t,this)),this._tooltip.setContent(e)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),Te&&(i.click=this._openTooltip)),this[t](i),this._tooltipHandlersAdded=!e}},openTooltip:function(e,t){return this._tooltip&&this._map&&(t=this._tooltip._prepareOpen(this,e,t),this._map.openTooltip(this._tooltip,t),this._tooltip.options.interactive&&this._tooltip._container&&(mt(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(gt(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(e){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(e)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_openTooltip:function(e){var t=e.layer||e.target;this._tooltip&&this._map&&this.openTooltip(t,this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,i,n=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),i=this._map.containerPointToLayerPoint(t),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var In=qi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),i=this.options;if(i.html instanceof Element?(ht(t),t.appendChild(i.html)):t.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=j(i.bgPos);t.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Mn(e){return new In(e)}qi.Default=Yi;var Dn=Fi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ye,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){p(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),ut(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(dt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(pt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof M?e:new M(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,i=this.getPane().children,n=-e(-1/0,1/0),r=0,a=i.length;r<a;r++)t=i[r].style.zIndex,i[r]!==this._container&&t&&(n=e(n,+t));isFinite(n)&&(this.options.zIndex=n+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ee){_t(this._container,this.options.opacity);var e=+new Date,t=!1,i=!1;for(var n in this._tiles){var r=this._tiles[n];if(r.current&&r.loaded){var a=Math.min(1,(e-r.loaded)/200);_t(r.el,a),a<1?t=!0:(r.active?i=!0:this._onOpaqueTile(r),r.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),t&&(C(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=ct("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===e?(this._levels[i].el.style.zIndex=t-Math.abs(e-i),this._onUpdateLevel(i)):(ut(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[e],r=this._map;return n||(n=this._levels[e]={},n.el=ct("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=t,n.origin=r.project(r.unproject(r.getPixelOrigin()),e).round(),n.zoom=e,this._setZoomTransform(n,r.getCenter(),r.getZoom()),c(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var e,t,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)t=this._tiles[e],t.retain=t.current;for(e in this._tiles)if(t=this._tiles[e],t.current&&!t.active){var n=t.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)ut(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,i,n){var r=Math.floor(e/2),a=Math.floor(t/2),o=i-1,s=new M(+r,+a);s.z=+o;var l=this._tileCoordsToKey(s),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),o>n&&this._retainParent(r,a,o,n))},_retainChildren:function(e,t,i,n){for(var r=2*e;r<2*e+2;r++)for(var a=2*t;a<2*t+2;a++){var o=new M(r,a);o.z=i+1;var s=this._tileCoordsToKey(o),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(r,a,i+1,n))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,i,n){var r=Math.round(t);r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r);var a=this.options.updateWhenZooming&&r!==this._tileZoom;n&&!a||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(e),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var i in this._levels)this._setZoomTransform(this._levels[i],e,t)},_setZoomTransform:function(e,t,i){var n=this._map.getZoomScale(i,e.zoom),r=e.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(t,i)).round();ve?wt(e.el,r,n):Tt(e.el,r)},_resetGrid:function(){var e=this._map,t=e.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],n).x/i.x),Math.ceil(e.project([0,t.wrapLng[1]],n).x/i.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],n).y/i.x),Math.ceil(e.project([t.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,i=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),n=t.getZoomScale(i,this._tileZoom),r=t.project(e,this._tileZoom).floor(),a=t.getSize().divideBy(2*n);return new R(r.subtract(a),r.add(a))},_update:function(e){var t=this._map;if(t){var i=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(e),r=this._pxBoundsToTileRange(n),a=r.getCenter(),o=[],s=this.options.keepBuffer,l=new R(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new M(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(i-this._tileZoom)>1)this._setView(e,i);else{for(var h=r.min.y;h<=r.max.y;h++)for(var d=r.min.x;d<=r.max.x;d++){var p=new M(d,h);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:o.push(p)}}if(o.sort((function(e,t){return e.distanceTo(a)-t.distanceTo(a)})),0!==o.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<o.length;d++)this._addTile(o[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var i=this._globalTileRange;if(!t.wrapLng&&(e.x<i.min.x||e.x>i.max.x)||!t.wrapLat&&(e.y<i.min.y||e.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(e);return B(this.options.bounds).overlaps(n)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,i=this.getTileSize(),n=e.scaleBy(i),r=n.add(i),a=t.unproject(n,e.z),o=t.unproject(r,e.z);return[a,o]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),i=new z(t[0],t[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),i=new M(+t[0],+t[1]);return i.z=+t[2],i},_removeTile:function(e){var t=this._tiles[e];t&&(ut(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){mt(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=c,e.onmousemove=c,ee&&this.options.opacity<1&&_t(e,this.options.opacity),ne&&!re&&(e.style.WebkitBackfaceVisibility="hidden")},_addTile:function(e,t){var i=this._getTilePos(e),n=this._tileCoordsToKey(e),a=this.createTile(this._wrapCoords(e),r(this._tileReady,this,e));this._initTile(a),this.createTile.length<2&&O(r(this._tileReady,this,e,null,a)),Tt(a,i),this._tiles[n]={el:a,coords:e,current:!0},t.appendChild(a),this.fire("tileloadstart",{tile:a,coords:e})},_tileReady:function(e,t,i){t&&this.fire("tileerror",{error:t,tile:i,coords:e});var n=this._tileCoordsToKey(e);i=this._tiles[n],i&&(i.loaded=+new Date,this._map._fadeAnimated?(_t(i.el,0),C(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),t||(mt(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ee||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new M(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new R(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function jn(e){return new Dn(e)}var Ln=Dn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(e,t){this._url=e,t=p(this,t),t.detectRetina&&Ce&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom++):(t.zoomOffset++,t.maxZoom--),t.minZoom=Math.max(0,t.minZoom)),"string"===typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),ne||this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var i=document.createElement("img");return Dt(i,"load",r(this._tileOnLoad,this,t,i)),Dt(i,"error",r(this._tileOnError,this,t,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(e),i},getTileUrl:function(e){var t={r:Ce?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-e.y;this.options.tms&&(t["y"]=n),t["-y"]=n}return g(this._url,i(t,this.options))},_tileOnLoad:function(e,t){ee?setTimeout(r(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,i){var n=this.options.errorTileUrl;n&&t.getAttribute("src")!==n&&(t.src=n),e(i,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,i=this.options.zoomReverse,n=this.options.zoomOffset;return i&&(e=t-e),e+n},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=c,t.onerror=c,t.complete||(t.src=_,ut(t),delete this._tiles[e]))},_removeTile:function(e){var t=this._tiles[e];if(t)return oe||t.el.setAttribute("src",_),Dn.prototype._removeTile.call(this,e)},_tileReady:function(e,t,i){if(this._map&&(!i||i.getAttribute("src")!==_))return Dn.prototype._tileReady.call(this,e,t,i)}});function Rn(e,t){return new Ln(e,t)}var Nn=Ln.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var n=i({},this.defaultWmsParams);for(var r in t)r in this.options||(n[r]=t[r]);t=p(this,t);var a=t.detectRetina&&Ce?2:1,o=this.getTileSize();n.width=o.x*a,n.height=o.y*a,this.wmsParams=n},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,Ln.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),i=this._crs,n=N(i.project(t[0]),i.project(t[1])),r=n.min,a=n.max,o=(this._wmsVersion>=1.3&&this._crs===Bi?[r.y,r.x,a.y,a.x]:[r.x,r.y,a.x,a.y]).join(","),s=Ln.prototype.getTileUrl.call(this,e);return s+f(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(e,t){return i(this.wmsParams,e),t||this.redraw(),this}});function zn(e,t){return new Nn(e,t)}Ln.WMS=Nn,Rn.wms=zn;var Bn=Fi.extend({options:{padding:.1,tolerance:0},initialize:function(e){p(this,e),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&mt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var i=this._map.getZoomScale(t,this._zoom),n=St(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),a=this._map.project(this._center,t),o=this._map.project(e,t),s=o.subtract(a),l=r.multiplyBy(-i).add(n).add(r).subtract(s);ve?wt(this._container,l,i):Tt(this._container,l)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),i=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new R(i,i.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Vn=Bn.extend({getEvents:function(){var e=Bn.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Bn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Dt(e,"mousemove",this._onMouseMove,this),Dt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Dt(e,"mouseout",this._handleMouseOut,this),this._ctx=e.getContext("2d")},_destroyContainer:function(){C(this._redrawRequest),delete this._ctx,ut(this._container),Lt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;for(var t in this._redrawBounds=null,this._layers)e=this._layers[t],e._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Bn.prototype._update.call(this);var e=this._bounds,t=this._container,i=e.getSize(),n=Ce?2:1;Tt(t,e.min),t.width=n*i.x,t.height=n*i.y,t.style.width=i.x+"px",t.style.height=i.y+"px",Ce&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Bn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[o(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,i=t.next,n=t.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete e._order,delete this._layers[o(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"===typeof e.options.dashArray){var t,i,n=e.options.dashArray.split(/[, ]+/),r=[];for(i=0;i<n.length;i++){if(t=Number(n[i]),isNaN(t))return;r.push(t)}e.options._dashArray=r}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new R,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var i=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)e=n.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var i,n,r,a,o=e._parts,s=o.length,l=this._ctx;if(s){for(l.beginPath(),i=0;i<s;i++){for(n=0,r=o[i].length;n<r;n++)a=o[i][n],l[n?"lineTo":"moveTo"](a.x,a.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,i=this._ctx,n=Math.max(Math.round(e._radius),1),r=(Math.max(Math.round(e._radiusY),1)||n)/n;1!==r&&(i.save(),i.scale(1,r)),i.beginPath(),i.arc(t.x,t.y/r,n,0,2*Math.PI,!1),1!==r&&i.restore(),this._fillStroke(i,e)}},_fillStroke:function(e,t){var i=t.options;i.fill&&(e.globalAlpha=i.fillOpacity,e.fillStyle=i.fillColor||i.color,e.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=i.opacity,e.lineWidth=i.weight,e.strokeStyle=i.color,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.stroke())},_onClick:function(e){for(var t,i,n=this._map.mouseEventToLayerPoint(e),r=this._drawFirst;r;r=r.next)t=r.layer,t.options.interactive&&t._containsPoint(n)&&("click"!==e.type&&"preclick"===e.type||!this._map._draggableMoved(t))&&(i=t);i&&(Xt(e),this._fireEvent([i],e))},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(gt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var i,n,a=this._drawFirst;a;a=a.next)i=a.layer,i.options.interactive&&i._containsPoint(t)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(e),n&&(mt(this._container,"leaflet-interactive"),this._fireEvent([n],e,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(r((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(e,t,i){this._map._fireDOMEvent(t,i||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var i=t.next,n=t.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var i=t.next,n=t.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function Fn(e){return Pe?new Vn(e):null}var Un=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Gn={_initContainer:function(){this._container=ct("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Bn.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Un("shape");mt(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Un("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;ut(t),e.removeInteractiveTarget(t),delete this._layers[o(e)]},_updateStyle:function(e){var t=e._stroke,i=e._fill,n=e.options,r=e._container;r.stroked=!!n.stroke,r.filled=!!n.fill,n.stroke?(t||(t=e._stroke=Un("stroke")),r.appendChild(t),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,n.dashArray?t.dashStyle=v(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=n.lineCap.replace("butt","flat"),t.joinstyle=n.lineJoin):t&&(r.removeChild(t),e._stroke=null),n.fill?(i||(i=e._fill=Un("fill")),r.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(r.removeChild(i),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),i=Math.round(e._radius),n=Math.round(e._radiusY||i);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+i+","+n+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){dt(e._container)},_bringToBack:function(e){pt(e._container)}},Hn=Ae?Un:K,Wn=Bn.extend({getEvents:function(){var e=Bn.prototype.getEvents.call(this);return e.zoomstart=this._onZoomStart,e},_initContainer:function(){this._container=Hn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Hn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ut(this._container),Lt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){Bn.prototype._update.call(this);var e=this._bounds,t=e.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,i.setAttribute("width",t.x),i.setAttribute("height",t.y)),Tt(i,e.min),i.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Hn("path");e.options.className&&mt(t,e.options.className),e.options.interactive&&mt(t,"leaflet-interactive"),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){ut(e._path),e.removeInteractiveTarget(e._path),delete this._layers[o(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,i=e.options;t&&(i.stroke?(t.setAttribute("stroke",i.color),t.setAttribute("stroke-opacity",i.opacity),t.setAttribute("stroke-width",i.weight),t.setAttribute("stroke-linecap",i.lineCap),t.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?t.setAttribute("stroke-dasharray",i.dashArray):t.removeAttribute("stroke-dasharray"),i.dashOffset?t.setAttribute("stroke-dashoffset",i.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),i.fill?(t.setAttribute("fill",i.fillColor||i.color),t.setAttribute("fill-opacity",i.fillOpacity),t.setAttribute("fill-rule",i.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,$(e._parts,t))},_updateCircle:function(e){var t=e._point,i=Math.max(Math.round(e._radius),1),n=Math.max(Math.round(e._radiusY),1)||i,r="a"+i+","+n+" 0 1,0 ",a=e._empty()?"M0 0":"M"+(t.x-i)+","+t.y+r+2*i+",0 "+r+2*-i+",0 ";this._setPath(e,a)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){dt(e._path)},_bringToBack:function(e){pt(e._path)}});function qn(e){return Ee||Ae?new Wn(e):null}Ae&&Wn.include(Gn),ei.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Fn(e)||qn(e)}});var Zn=on.extend({initialize:function(e,t){on.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=B(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Yn(e,t){return new Zn(e,t)}Wn.create=Hn,Wn.pointsToPath=$,ln.geometryToLayer=cn,ln.coordsToLatLng=hn,ln.coordsToLatLngs=dn,ln.latLngToCoords=pn,ln.latLngsToCoords=fn,ln.getFeature=mn,ln.asFeature=gn,ei.mergeOptions({boxZoom:!0});var Xn=di.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Dt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Lt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ut(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),Je(),Ct(),this._startPoint=this._map.mouseEventToContainerPoint(e),Dt(document,{contextmenu:Ht,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=ct("div","leaflet-zoom-box",this._container),mt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new R(this._point,this._startPoint),i=t.getSize();Tt(this._box,t.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(ut(this._box),gt(this._container,"leaflet-crosshair")),et(),kt(),Lt(document,{contextmenu:Ht,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var t=new z(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}});ei.addInitHook("addHandler","boxZoom",Xn),ei.mergeOptions({doubleClickZoom:!0});var Kn=di.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,i=t.getZoom(),n=t.options.zoomDelta,r=e.originalEvent.shiftKey?i-n:i+n;"center"===t.options.doubleClickZoom?t.setZoom(r):t.setZoomAround(e.containerPoint,r)}});ei.addInitHook("addHandler","doubleClickZoom",Kn),ei.mergeOptions({dragging:!0,inertia:!re,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var $n=di.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new yi(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}mt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){gt(this._map._container,"leaflet-grab"),gt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=B(this._map.options.maxBounds);this._offsetLimit=N(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){while(this._positions.length>1&&e-this._times[0]>50)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,r=(n-t+i)%e+t-i,a=(n+t+i)%e-t-i,o=Math.abs(r+i)<Math.abs(a+i)?r:a;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(e){var t=this._map,i=t.options,n=!i.inertia||this._times.length<2;if(t.fire("dragend",e),n)t.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),a=(this._lastTime-this._times[0])/1e3,o=i.easeLinearity,s=r.multiplyBy(o/a),l=s.distanceTo([0,0]),c=Math.min(i.inertiaMaxSpeed,l),u=s.multiplyBy(c/l),h=c/(i.inertiaDeceleration*o),d=u.multiplyBy(-h/2).round();d.x||d.y?(d=t._limitOffset(d,t.options.maxBounds),O((function(){t.panBy(d,{duration:h,easeLinearity:o,noMoveStart:!0,animate:!0})}))):t.fire("moveend")}}});ei.addInitHook("addHandler","dragging",$n),ei.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Qn=di.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Dt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Lt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,i=e.scrollTop||t.scrollTop,n=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,i,n=this._panKeys={},r=this.keyCodes;for(t=0,i=r.left.length;t<i;t++)n[r.left[t]]=[-1*e,0];for(t=0,i=r.right.length;t<i;t++)n[r.right[t]]=[e,0];for(t=0,i=r.down.length;t<i;t++)n[r.down[t]]=[0,e];for(t=0,i=r.up.length;t<i;t++)n[r.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,i,n=this._zoomKeys={},r=this.keyCodes;for(t=0,i=r.zoomIn.length;t<i;t++)n[r.zoomIn[t]]=e;for(t=0,i=r.zoomOut.length;t<i;t++)n[r.zoomOut[t]]=-e},_addHooks:function(){Dt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Lt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,i=e.keyCode,n=this._map;if(i in this._panKeys)n._panAnim&&n._panAnim._inProgress||(t=this._panKeys[i],e.shiftKey&&(t=j(t).multiplyBy(3)),n.panBy(t),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}Ht(e)}}});ei.addInitHook("addHandler","keyboard",Qn),ei.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Jn=di.extend({addHooks:function(){Dt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Lt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Zt(e),i=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),n),Ht(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),i=this._map.options.zoomSnap||0;e._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,a=i?Math.ceil(r/i)*i:r,o=e._limitZoom(t+(this._delta>0?a:-a))-t;this._delta=0,this._startTime=null,o&&("center"===e.options.scrollWheelZoom?e.setZoom(t+o):e.setZoomAround(this._lastMousePos,t+o))}});ei.addInitHook("addHandler","scrollWheelZoom",Jn),ei.mergeOptions({tap:!0,tapTolerance:15});var er=di.extend({addHooks:function(){Dt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Lt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(Gt(e),this._fireClick=!0,e.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var t=e.touches[0],i=t.target;this._startPos=this._newPos=new M(t.clientX,t.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&mt(i,"leaflet-active"),this._holdTimeout=setTimeout(r((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",t))}),this),1e3),this._simulateEvent("mousedown",t),Dt(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),Lt(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&e&&e.changedTouches){var t=e.changedTouches[0],i=t.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&gt(i,"leaflet-active"),this._simulateEvent("mouseup",t),this._isTapValid()&&this._simulateEvent("click",t)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var t=e.touches[0];this._newPos=new M(t.clientX,t.clientY),this._simulateEvent("mousemove",t)},_simulateEvent:function(e,t){var i=document.createEvent("MouseEvents");i._simulated=!0,t.target._simulatedClick=!0,i.initMouseEvent(e,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(i)}});!Te||we&&!ue||ei.addInitHook("addHandler","tap",er),ei.mergeOptions({touchZoom:Te&&!re,bounceAtZoomLimits:!0});var tr=di.extend({addHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),Dt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){gt(this._map._container,"leaflet-touch-zoom"),Lt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var i=t.mouseEventToContainerPoint(e.touches[0]),n=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Dt(document,"touchmove",this._onTouchMove,this),Dt(document,"touchend",this._onTouchEnd,this),Gt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,i=t.mouseEventToContainerPoint(e.touches[0]),n=t.mouseEventToContainerPoint(e.touches[1]),a=i.distanceTo(n)/this._startDist;if(this._zoom=t.getScaleZoom(a,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&a<1||this._zoom>t.getMaxZoom()&&a>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===a)return}else{var o=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===a&&0===o.x&&0===o.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),C(this._animRequest);var s=r(t._move,t,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=O(s,this,!0),Gt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,C(this._animRequest),Lt(document,"touchmove",this._onTouchMove,this),Lt(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});ei.addInitHook("addHandler","touchZoom",tr),ei.BoxZoom=Xn,ei.DoubleClickZoom=Kn,ei.Drag=$n,ei.Keyboard=Qn,ei.ScrollWheelZoom=Jn,ei.Tap=er,ei.TouchZoom=tr,e.version=t,e.Control=ii,e.control=ni,e.Browser=Me,e.Evented=I,e.Mixin=fi,e.Util=k,e.Class=P,e.Handler=di,e.extend=i,e.bind=r,e.stamp=o,e.setOptions=p,e.DomEvent=Qt,e.DomUtil=Mt,e.PosAnimation=Jt,e.Draggable=yi,e.LineUtil=Mi,e.PolyUtil=ji,e.Point=M,e.point=j,e.Bounds=R,e.bounds=N,e.Transformation=q,e.transformation=Z,e.Projection=Ni,e.LatLng=V,e.latLng=F,e.LatLngBounds=z,e.latLngBounds=B,e.CRS=U,e.GeoJSON=ln,e.geoJSON=yn,e.geoJson=_n,e.Layer=Fi,e.LayerGroup=Ui,e.layerGroup=Gi,e.FeatureGroup=Hi,e.featureGroup=Wi,e.ImageOverlay=bn,e.imageOverlay=xn,e.VideoOverlay=wn,e.videoOverlay=Tn,e.SVGOverlay=Sn,e.svgOverlay=On,e.DivOverlay=Cn,e.Popup=kn,e.popup=Pn,e.Tooltip=En,e.tooltip=An,e.Icon=qi,e.icon=Zi,e.DivIcon=In,e.divIcon=Mn,e.Marker=Ki,e.marker=$i,e.TileLayer=Ln,e.tileLayer=Rn,e.GridLayer=Dn,e.gridLayer=jn,e.SVG=Wn,e.svg=qn,e.Renderer=Bn,e.Canvas=Vn,e.canvas=Fn,e.Path=Qi,e.CircleMarker=Ji,e.circleMarker=en,e.Circle=tn,e.circle=nn,e.Polyline=rn,e.polyline=an,e.Polygon=on,e.polygon=sn,e.Rectangle=Zn,e.rectangle=Yn,e.Map=ei,e.map=ti;var ir=window.L;e.noConflict=function(){return window.L=ir,this},window.L=e}))},e1d7:function(e,t,i){!function(t,n){e.exports=n(i("e11e"))}(window,(function(e){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=59)}([function(e,t){e.exports="object"==typeof window&&window&&window.Math==Math?window:"object"==typeof self&&self&&self.Math==Math?self:Function("return this")()},function(t,i){t.exports=e},function(e,t,i){var n=i(4);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,i){var n=i(0),r=i(11).f,a=i(16),o=i(33),s=i(30),l=i(52),c=i(69);e.exports=function(e,t){var i,u,h,d,p,f=e.target,m=e.global,g=e.stat;if(i=m?n:g?n[f]||s(f,{}):(n[f]||{}).prototype)for(u in t){if(d=t[u],h=e.noTargetGet?(p=r(i,u))&&p.value:i[u],!c(m?u:f+(g?".":"#")+u,e.forced)&&void 0!==h){if(typeof d==typeof h)continue;l(d,h)}(e.sham||h&&h.sham)&&a(d,"sham",!0),o(i,u,d,e)}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,i){var n=i(20),r=i(7),a=i(55),o=i(8).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});r(t,e)||o(t,e,{value:a.f(e)})}},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){var n=i(9),r=i(46),a=i(2),o=i(13),s=Object.defineProperty;t.f=n?s:function(e,t,i){if(a(e),t=o(t,!0),a(i),r)try{return s(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){e.exports=!i(5)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,i){var n=i(15)("wks"),r=i(31),a=i(0).Symbol,o=i(49);e.exports=function(e){return n[e]||(n[e]=o&&a[e]||(o?a:r)("Symbol."+e))}},function(e,t,i){var n=i(9),r=i(32),a=i(14),o=i(17),s=i(13),l=i(7),c=i(46),u=Object.getOwnPropertyDescriptor;t.f=n?u:function(e,t){if(e=o(e),t=s(t,!0),c)try{return u(e,t)}catch(e){}if(l(e,t))return a(!r.f.call(e,t),e[t])}},function(e,t,i){e.exports=i(21)},function(e,t,i){var n=i(4);e.exports=function(e,t){if(!n(e))return e;var i,r;if(t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!n(r=i.call(e)))return r;if(!t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,i){var n=i(0),r=i(30),a=n["__core-js_shared__"]||r("__core-js_shared__",{});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.0.1",mode:i(48)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,i){var n=i(8),r=i(14);e.exports=i(9)?function(e,t,i){return n.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var n=i(65),r=i(43);e.exports=function(e){return n(r(e))}},function(e,t,i){var n=i(15)("keys"),r=i(31);e.exports=function(e){return n[e]||(n[e]=r(e))}},function(e,t){e.exports={}},function(e,t,i){e.exports=i(0)},function(e,t,i){var n=function(){return this||"object"==typeof self&&self}()||Function("return this")(),r=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,a=r&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=i(22),r)n.regeneratorRuntime=a;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var i,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag",c="object"==typeof e,u=t.regeneratorRuntime;if(u)c&&(e.exports=u);else{(u=t.regeneratorRuntime=c?e.exports:{}).wrap=b;var h="suspendedStart",d="suspendedYield",p="executing",f="completed",m={},g={};g[o]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==n&&r.call(y,o)&&(g=y);var _=S.prototype=w.prototype=Object.create(g);T.prototype=_.constructor=S,S.constructor=T,S[l]=T.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===T||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(_),e},u.awrap=function(e){return{__await:e}},O(C.prototype),C.prototype[s]=function(){return this},u.AsyncIterator=C,u.async=function(e,t,i,n){var r=new C(b(e,t,i,n));return u.isGeneratorFunction(t)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},O(_),_[l]="Generator",_[o]=function(){return this},_.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},u.values=I,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=i)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=i),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),E(i),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;E(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=i),m}}}function b(e,t,i,n){var r=t&&t.prototype instanceof w?t:w,a=Object.create(r.prototype),o=new A(n||[]);return a._invoke=function(e,t,i){var n=h;return function(r,a){if(n===p)throw new Error("Generator is already running");if(n===f){if("throw"===r)throw a;return M()}for(i.method=r,i.arg=a;;){var o=i.delegate;if(o){var s=k(o,i);if(s){if(s===m)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===h)throw n=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=p;var l=x(e,t,i);if("normal"===l.type){if(n=i.done?f:d,l.arg===m)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=f,i.method="throw",i.arg=l.arg)}}}(e,i,o),a}function x(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}function w(){}function T(){}function S(){}function O(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function C(e){var t;this._invoke=function(i,n){function a(){return new Promise((function(t,a){!function t(i,n,a,o){var s=x(e[i],e,n);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&r.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,a,o)}),(function(e){t("throw",e,a,o)})):Promise.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return t("throw",e,a,o)}))}o(s.arg)}(i,n,t,a)}))}return t=t?t.then(a,a):a()}}function k(e,t){var n=e.iterator[t.method];if(n===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=i,k(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=x(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=i),t.delegate=null,m):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function I(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=i,t.done=!0,t};return a.next=a}}return{next:M}}function M(){return{value:i,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(e,t,i){var n=i(24);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};i(26)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,i){(e.exports=i(25)(!1)).push([e.i,"@-webkit-keyframes leaflet-ant-path-animation {\n  from {\n    stroke-dashoffset: 100%; }\n  to {\n    stroke-dashoffset: 0%; } }\n\n@-moz-keyframes leaflet-ant-path-animation {\n  from {\n    stroke-dashoffset: 100%; }\n  to {\n    stroke-dashoffset: 0%; } }\n\n@-ms-keyframes leaflet-ant-path-animation {\n  from {\n    stroke-dashoffset: 100%; }\n  to {\n    stroke-dashoffset: 0%; } }\n\n@-o-keyframes leaflet-ant-path-animation {\n  from {\n    stroke-dashoffset: 100%; }\n  to {\n    stroke-dashoffset: 0%; } }\n\n@keyframes leaflet-ant-path-animation {\n  from {\n    stroke-dashoffset: 100%; }\n  to {\n    stroke-dashoffset: 0%; } }\n\npath.leaflet-ant-path {\n  fill: none;\n  -webkit-animation: linear infinite leaflet-ant-path-animation;\n  -moz-animation: linear infinite leaflet-ant-path-animation;\n  -ms-animation: linear infinite leaflet-ant-path-animation;\n  -o-animation: linear infinite leaflet-ant-path-animation;\n  animation: linear infinite leaflet-ant-path-animation; }\n  path.leaflet-ant-path__hardware-acceleration {\n    -webkit-transform: translateZ(0);\n    -moz-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    -o-transform: translateZ(0);\n    transform: translateZ(0); }\n  path.leaflet-ant-path__reverse {\n    -webkit-animation-direction: reverse;\n    -moz-animation-direction: reverse;\n    -ms-animation-direction: reverse;\n    -o-animation-direction: reverse;\n    animation-direction: reverse; }\n",""])},function(e,t,i){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i,n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var a=(i=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),o=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(o).concat([a]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i})).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},r=0;r<this.length;r++){var a=this[r][0];null!=a&&(n[a]=!0)}for(r=0;r<e.length;r++){var o=e[r];null!=o[0]&&n[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),t.push(o))}},t}},function(e,t,i){var n,r,a={},o=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=n.apply(this,arguments)),r}),s=function(e){var t={};return function(e,i){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,i);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),l=null,c=0,u=[],h=i(27);function d(e,t){for(var i=0;i<e.length;i++){var n=e[i],r=a[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(y(n.parts[o],t))}else{var s=[];for(o=0;o<n.parts.length;o++)s.push(y(n.parts[o],t));a[n.id]={id:n.id,refs:1,parts:s}}}}function p(e,t){for(var i=[],n={},r=0;r<e.length;r++){var a=e[r],o=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};n[o]?n[o].parts.push(s):i.push(n[o]={id:o,parts:[s]})}return i}function f(e,t){var i=s(e.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=u[u.length-1];if("top"===e.insertAt)n?n.nextSibling?i.insertBefore(t,n.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),u.push(t);else if("bottom"===e.insertAt)i.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=s(e.insertAt.before,i);i.insertBefore(t,r)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function g(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=function(){return i.nc}();n&&(e.attrs.nonce=n)}return v(t,e.attrs),f(e,t),t}function v(e,t){Object.keys(t).forEach((function(i){e.setAttribute(i,t[i])}))}function y(e,t){var i,n,r,a;if(t.transform&&e.css){if(!(a="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=a}if(t.singleton){var o=c++;i=l||(l=g(t)),n=x.bind(null,i,o,!1),r=x.bind(null,i,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(t,e.attrs),f(e,t),t}(t),n=function(e,t,i){var n=i.css,r=i.sourceMap,a=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||a)&&(n=h(n)),r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,i,t),r=function(){m(i),i.href&&URL.revokeObjectURL(i.href)}):(i=g(t),n=function(e,t){var i=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}.bind(null,i),r=function(){m(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var i=p(e,t);return d(i,t),function(e){for(var n=[],r=0;r<i.length;r++){var o=i[r];(s=a[o.id]).refs--,n.push(s)}for(e&&d(p(e,t),t),r=0;r<n.length;r++){var s;if(0===(s=n[r]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete a[s.id]}}}};var _,b=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function x(e,t,i,n){var r=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var a=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var i=t.protocol+"//"+t.host,n=i+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(r=0===a.indexOf("//")?a:0===a.indexOf("/")?i+a:n+a.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(e,t,i){var n=i(29);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t,i){var n=i(0),r=i(16);e.exports=function(e,t){try{r(n,e,t)}catch(i){n[e]=t}return t}},function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},function(e,t,i){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!n.call({1:2},1);t.f=a?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},function(e,t,i){var n=i(0),r=i(16),a=i(7),o=i(30),s=i(50),l=i(51),c=l.get,u=l.enforce,h=String(s).split("toString");i(15)("inspectSource",(function(e){return s.call(e)})),(e.exports=function(e,t,i,s){var l=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof i&&("string"!=typeof t||a(i,"name")||r(i,"name",t),u(i).source=h.join("string"==typeof t?t:"")),e!==n?(l?!d&&e[t]&&(c=!0):delete e[t],c?e[t]=i:r(e,t,i)):c?e[t]=i:o(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s.call(this)}))},function(e,t,i){var n=i(54),r=i(35).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,r)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,i){var n=i(8).f,r=i(7),a=i(10)("toStringTag");e.exports=function(e,t,i){e&&!r(e=i?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,i){var n=i(54),r=i(35);e.exports=Object.keys||function(e){return n(e,r)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,i){var n=i(7),r=i(42),a=i(18)("IE_PROTO"),o=i(57),s=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=r(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,i){"use strict";i.r(t);var n=i(1),r=i(12),a=i.n(r);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){p(e,t,i[t])}))}return e}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var f={main:Symbol("main"),pulse:Symbol("pulse")},m=f.main,g=f.pulse,v=Symbol.species,y=Symbol.toStringTag,_=Symbol.iterator,b=function(e){function t(e){var i,r,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=!(a=u(t).call(this))||"object"!==o(a)&&"function"!=typeof a?d(r):a,p(d(d(i)),m,null),p(d(d(i)),g,null),p(d(d(i)),"_map",null),p(d(d(i)),"_path",null),p(d(d(i)),"_animatedPathId",null),p(d(d(i)),"_animatedPathClass","leaflet-ant-path"),p(d(d(i)),"_reversePathClass","".concat(i._animatedPathClass,"__reverse")),p(d(d(i)),"_hardwareAccClass","hardware-acceleration"),p(d(d(i)),"_defaultOptions",{use:n.polyline,paused:!1,reverse:!1,hardwareAcceleration:!1,renderer:Object(n.svg)({pane:"overlayPane"}),delay:400,dashArray:[10,20],weight:5,opacity:.5,color:"#0000FF",pulseColor:"#FFFFFF"}),n.Util.setOptions(d(d(i)),l({},i._defaultOptions,s)),i._path=e,i._animatedPathId="ant-path-".concat((new Date).getTime()),i._mount(),i}var i,r,b;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,n["FeatureGroup"]),i=t,b=[{key:v,get:function(){return this}}],(r=[{key:"map",value:function(e){return new(0,this.constructor[Symbol.species])(this._path.map(e),l({},this.options))}},{key:_,value:a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._path,"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"_processOptions",value:function(){var e=this.options,t=this._animatedPathClass,i=this._reversePathClass,n=this._hardwareAccClass,r=this._animatedPathId,a=e.reverse,o=e.hardwareAcceleration,s=l({},e),c=l({},e);return c.color=c.pulseColor||e.pulseColor,c.className=[t,r,a?i:"",o?"".concat(t,"__").concat(n):""].join(" "),delete s.dashArray,Array.isArray(c.dashArray)&&(c.dashArray=String(c.dashArray)),{pathOpts:s,pulseOpts:c}}},{key:"_mount",value:function(){var e=this._processOptions(),t=e.pathOpts,i=e.pulseOpts,n=this.options.use;this.addLayer(this[f.main]=n(this._path,t)),this.addLayer(this[f.pulse]=n(this._path,i))}},{key:"_calculateAnimationSpeed",value:function(){var e=this.options,t=this._map,i=this._animatedPathId;if(!e.paused&&t){var n=t.getZoom(),r=document.getElementsByClassName(i),a=1+e.delay/3/n+"s",o=["-webkit-","-moz-","-ms-","-o-",""].map((function(e){return"".concat(e,"animation-duration: ").concat(a)})).join(";");Array.from(r,(function(e){e.style.cssText=o,e.setAttribute("data-animated","true")}))}}},{key:"_pureReverse",value:function(){var e=this[f.pulse].getElement();e&&(this.options.reverse?e.classList.remove(this._reversePathClass):e.classList.add(this._reversePathClass))}},{key:"onAdd",value:function(e){return this._map=e,this._map.on("zoomend",this._calculateAnimationSpeed,this),this._mount(),this._calculateAnimationSpeed(),this}},{key:"onRemove",value:function(e){return this._map&&(this._map.off("zoomend",this._calculateAnimationSpeed,this),this._map=null),e&&e.removeLayer(this[f.main]).removeLayer(this[f.pulse]),this}},{key:"pause",value:function(){if(!this.options.paused){var e=this[f.pulse].getElement();return this.options.paused=!0,e&&(e.removeAttribute("style"),e.setAttribute("data-animated","true")),!0}return!1}},{key:"resume",value:function(){var e=this.options;return!!e.paused&&(e.paused=!1,this._calculateAnimationSpeed(),!0)}},{key:"bringToFront",value:function(){return this[f.main].bringToFront(),this[f.pulse].bringToFront(),this}},{key:"bringToBack",value:function(){return this[f.pulse].bringToBack(),this[f.main].bringToBack(),this}},{key:"removeFrom",value:function(e){return e&&e.hasLayer(this)&&e.removeLayer(this),this}},{key:"setStyle",value:function(e){var t=l({},this.options,e),i=t.paused,n=t.delay,r=t.reverse;i?this.pause():this.resume(),n!==this.options.delay&&(this.options.delay=n||this._defaultOptions.delay,this._calculateAnimationSpeed()),void 0!==r&&r!==this.options.reverse&&this._pureReverse(),this.options=l({},this.options,e);var a=this._processOptions(),o=a.pathOpts,s=a.pulseOpts;return this[f.main].setStyle(o),this[f.pulse].setStyle(s),this}},{key:"reverse",value:function(){return this._pureReverse(),this.options.reverse=!this.options.reverse,this}},{key:"redraw",value:function(){return this[f.main].redraw(),this[f.pulse].redraw(),this}},{key:"addLatLng",value:function(){for(var e,t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return this._path=[].concat(s(this._path),[n]),(e=this[f.main]).addLatLng.apply(e,n),(t=this[f.pulse]).addLatLng.apply(t,n),this}},{key:"setLatLngs",value:function(){for(var e,t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return this._path=n,(e=this[f.main]).setLatLngs.apply(e,n),(t=this[f.pulse]).setLatLngs.apply(t,n),this}},{key:"getLatLngs",value:function(){return this[f.main].getLatLngs()}},{key:"spliceLatLngs",value:function(){var e,t,i=(e=this[f.main]).spliceLatLngs.apply(e,arguments);return(t=this[f.pulse]).spliceLatLngs.apply(t,arguments),i}},{key:"getBounds",value:function(){return this[f.main].getBounds()}},{key:"toGeoJSON",value:function(){return this[f.main].toGeoJSON()}},{key:y,get:function(){return"L.Polyline.AntPath"}}])&&c(i.prototype,r),b&&c(i,b),t}(),x=function(e,t){return Reflect.construct(b,[e,t])};i(23),i.d(t,"AntPath",(function(){return w})),i.d(t,"antPath",(function(){return T})),n.Polyline.AntPath=b,n.polyline.antPath=x;var w=b,T=x;t.default={AntPath:w,antPath:T}},function(e,t,i){var n=i(43);e.exports=function(e){return Object(n(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,i){var n=i(45),r=Math.min;e.exports=function(e){return e>0?r(n(e),9007199254740991):0}},function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},function(e,t,i){e.exports=!i(9)&&!i(5)((function(){return 7!=Object.defineProperty(i(47)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,i){var n=i(4),r=i(0).document,a=n(r)&&n(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},function(e,t){e.exports=!1},function(e,t,i){e.exports=!i(5)((function(){return!String(Symbol())}))},function(e,t,i){e.exports=i(15)("native-function-to-string",Function.toString)},function(e,t,i){var n,r,a,o=i(66),s=i(4),l=i(16),c=i(7),u=i(18),h=i(19),d=i(0).WeakMap;if(o){var p=new d,f=p.get,m=p.has,g=p.set;n=function(e,t){return g.call(p,e,t),t},r=function(e){return f.call(p,e)||{}},a=function(e){return m.call(p,e)}}else{var v=u("state");h[v]=!0,n=function(e,t){return l(e,v,t),t},r=function(e){return c(e,v)?e[v]:{}},a=function(e){return c(e,v)}}e.exports={set:n,get:r,has:a,enforce:function(e){return a(e)?r(e):n(e,{})},getterFor:function(e){return function(t){var i;if(!s(t)||(i=r(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return i}}}},function(e,t,i){var n=i(7),r=i(53),a=i(11),o=i(8);e.exports=function(e,t){for(var i=r(t),s=o.f,l=a.f,c=0;c<i.length;c++){var u=i[c];n(e,u)||s(e,u,l(t,u))}}},function(e,t,i){var n=i(34),r=i(36),a=i(2),o=i(0).Reflect;e.exports=o&&o.ownKeys||function(e){var t=n.f(a(e)),i=r.f;return i?t.concat(i(e)):t}},function(e,t,i){var n=i(7),r=i(17),a=i(67)(!1),o=i(19);e.exports=function(e,t){var i,s=r(e),l=0,c=[];for(i in s)!n(o,i)&&n(s,i)&&c.push(i);for(;t.length>l;)n(s,i=t[l++])&&(~a(c,i)||c.push(i));return c}},function(e,t,i){t.f=i(10)},function(e,t,i){var n=i(2),r=i(75),a=i(35),o=i(76),s=i(47),l=i(18)("IE_PROTO"),c=function(){},u=function(){var e,t=s("iframe"),i=a.length;for(t.style.display="none",o.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;i--;)delete u.prototype[a[i]];return u()};e.exports=Object.create||function(e,t){var i;return null!==e?(c.prototype=n(e),i=new c,c.prototype=null,i[l]=e):i=u(),void 0===t?i:r(i,t)},i(19)[l]=!0},function(e,t,i){e.exports=!i(5)((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,i){var n=i(4),r=i(2);e.exports=function(e,t){if(r(e),!n(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}},function(e,t,i){i(60),i(93),e.exports=i(41)},function(e,t,i){i(61),i(70),i(73),i(78),i(79),i(80),i(81),i(82),i(83),i(84),i(85),i(86),i(87),i(88),i(89),i(90),i(91),i(92),e.exports=i(20).Symbol},function(e,t,i){"use strict";var n=i(28),r=i(4),a=i(42),o=i(44),s=i(62),l=i(63),c=i(10)("isConcatSpreadable"),u=!i(5)((function(){var e=[];return e[c]=!1,e.concat()[0]!==e})),h=i(64)("concat"),d=function(e){if(!r(e))return!1;var t=e[c];return void 0!==t?!!t:n(e)},p=!u||!h;i(3)({target:"Array",proto:!0,forced:p},{concat:function(e){var t,i,n,r,c,u=a(this),h=l(u,0),p=0;for(t=-1,n=arguments.length;t<n;t++)if(c=-1===t?u:arguments[t],d(c)){if(p+(r=o(c.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(i=0;i<r;i++,p++)i in c&&s(h,p,c[i])}else{if(p>=9007199254740991)throw TypeError("Maximum allowed index exceeded");s(h,p++,c)}return h.length=p,h}})},function(e,t,i){"use strict";var n=i(13),r=i(8),a=i(14);e.exports=function(e,t,i){var o=n(t);o in e?r.f(e,o,a(0,i)):e[o]=i}},function(e,t,i){var n=i(4),r=i(28),a=i(10)("species");e.exports=function(e,t){var i;return r(e)&&("function"!=typeof(i=e.constructor)||i!==Array&&!r(i.prototype)?n(i)&&null===(i=i[a])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===t?0:t)}},function(e,t,i){var n=i(5),r=i(10)("species");e.exports=function(e){return!n((function(){var t=[];return(t.constructor={})[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,i){var n=i(5),r=i(29),a="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==r(e)?a.call(e,""):Object(e)}:Object},function(e,t,i){var n=i(50),r=i(0).WeakMap;e.exports="function"==typeof r&&/native code/.test(n.call(r))},function(e,t,i){var n=i(17),r=i(44),a=i(68);e.exports=function(e){return function(t,i,o){var s,l=n(t),c=r(l.length),u=a(o,c);if(e&&i!=i){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===i)return e||u||0;return!e&&-1}}},function(e,t,i){var n=i(45),r=Math.max,a=Math.min;e.exports=function(e,t){var i=n(e);return i<0?r(i+t,0):a(i,t)}},function(e,t,i){var n=i(5),r=/#|\.prototype\./,a=function(e,t){var i=s[o(e)];return i==c||i!=l&&("function"==typeof t?n(t):!!t)},o=a.normalize=function(e){return String(e).replace(r,".").toLowerCase()},s=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},function(e,t,i){var n=i(71),r=Object.prototype;n!==r.toString&&i(33)(r,"toString",n,{unsafe:!0})},function(e,t,i){"use strict";var n=i(72),r={};r[i(10)("toStringTag")]="z",e.exports="[object z]"!==String(r)?function(){return"[object "+n(this)+"]"}:r.toString},function(e,t,i){var n=i(29),r=i(10)("toStringTag"),a="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,i,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?i:a?n(t):"Object"==(o=n(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t,i){"use strict";var n=i(0),r=i(7),a=i(9),o=i(48),s=i(3),l=i(33),c=i(19),u=i(5),h=i(15),d=i(37),p=i(31),f=i(10),m=i(55),g=i(6),v=i(74),y=i(28),_=i(2),b=i(4),x=i(17),w=i(13),T=i(14),S=i(56),O=i(77),C=i(11),k=i(8),P=i(32),E=i(16),A=i(38),I=i(18)("hidden"),M=i(51),D=M.set,j=M.getterFor("Symbol"),L=C.f,R=k.f,N=O.f,z=n.Symbol,B=n.JSON,V=B&&B.stringify,F=f("toPrimitive"),U=P.f,G=h("symbol-registry"),H=h("symbols"),W=h("op-symbols"),q=h("wks"),Z=Object.prototype,Y=n.QObject,X=i(49),K=!Y||!Y.prototype||!Y.prototype.findChild,$=a&&u((function(){return 7!=S(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a}))?function(e,t,i){var n=L(Z,t);n&&delete Z[t],R(e,t,i),n&&e!==Z&&R(Z,t,n)}:R,Q=function(e,t){var i=H[e]=S(z.prototype);return D(i,{type:"Symbol",tag:e,description:t}),a||(i.description=t),i},J=X&&"symbol"==typeof z.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof z},ee=function(e,t,i){return e===Z&&ee(W,t,i),_(e),t=w(t,!0),_(i),r(H,t)?(i.enumerable?(r(e,I)&&e[I][t]&&(e[I][t]=!1),i=S(i,{enumerable:T(0,!1)})):(r(e,I)||R(e,I,T(1,{})),e[I][t]=!0),$(e,t,i)):R(e,t,i)},te=function(e,t){_(e);for(var i,n=v(t=x(t)),r=0,a=n.length;a>r;)ee(e,i=n[r++],t[i]);return e},ie=function(e){var t=U.call(this,e=w(e,!0));return!(this===Z&&r(H,e)&&!r(W,e))&&(!(t||!r(this,e)||!r(H,e)||r(this,I)&&this[I][e])||t)},ne=function(e,t){if(e=x(e),t=w(t,!0),e!==Z||!r(H,t)||r(W,t)){var i=L(e,t);return!i||!r(H,t)||r(e,I)&&e[I][t]||(i.enumerable=!0),i}},re=function(e){for(var t,i=N(x(e)),n=[],a=0;i.length>a;)r(H,t=i[a++])||r(c,t)||n.push(t);return n},ae=function(e){for(var t,i=e===Z,n=N(i?W:x(e)),a=[],o=0;n.length>o;)!r(H,t=n[o++])||i&&!r(Z,t)||a.push(H[t]);return a};X||(l((z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var e=void 0===arguments[0]?void 0:String(arguments[0]),t=p(e),i=function(e){this===Z&&i.call(W,e),r(this,I)&&r(this[I],t)&&(this[I][t]=!1),$(this,t,T(1,e))};return a&&K&&$(Z,t,{configurable:!0,set:i}),Q(t,e)}).prototype,"toString",(function(){return j(this).tag})),P.f=ie,k.f=ee,C.f=ne,i(34).f=O.f=re,i(36).f=ae,a&&(R(z.prototype,"description",{configurable:!0,get:function(){return j(this).description}}),o||l(Z,"propertyIsEnumerable",ie,{unsafe:!0})),m.f=function(e){return Q(f(e),e)}),s({global:!0,wrap:!0,forced:!X,sham:!X},{Symbol:z});for(var oe=A(q),se=0;oe.length>se;)g(oe[se++]);s({target:"Symbol",stat:!0,forced:!X},{for:function(e){return r(G,e+="")?G[e]:G[e]=z(e)},keyFor:function(e){if(!J(e))throw TypeError(e+" is not a symbol");for(var t in G)if(G[t]===e)return t},useSetter:function(){K=!0},useSimple:function(){K=!1}}),s({target:"Object",stat:!0,forced:!X,sham:!a},{create:function(e,t){return void 0===t?S(e):te(S(e),t)},defineProperty:ee,defineProperties:te,getOwnPropertyDescriptor:ne}),s({target:"Object",stat:!0,forced:!X},{getOwnPropertyNames:re,getOwnPropertySymbols:ae}),B&&s({target:"JSON",stat:!0,forced:!X||u((function(){var e=z();return"[null]"!=V([e])||"{}"!=V({a:e})||"{}"!=V(Object(e))}))},{stringify:function(e){for(var t,i,n=[e],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=t=n[1],(b(t)||void 0!==e)&&!J(e))return y(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!J(t))return t}),n[1]=t,V.apply(B,n)}}),z.prototype[F]||E(z.prototype,F,z.prototype.valueOf),d(z,"Symbol"),c[I]=!0},function(e,t,i){var n=i(38),r=i(36),a=i(32);e.exports=function(e){var t=n(e),i=r.f;if(i)for(var o,s=i(e),l=a.f,c=0;s.length>c;)l.call(e,o=s[c++])&&t.push(o);return t}},function(e,t,i){var n=i(9),r=i(8),a=i(2),o=i(38);e.exports=n?Object.defineProperties:function(e,t){a(e);for(var i,n=o(t),s=n.length,l=0;s>l;)r.f(e,i=n[l++],t[i]);return e}},function(e,t,i){var n=i(0).document;e.exports=n&&n.documentElement},function(e,t,i){var n=i(17),r=i(34).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?function(e){try{return r(e)}catch(e){return o.slice()}}(e):r(n(e))}},function(e,t,i){i(6)("asyncIterator")},function(e,t,i){"use strict";var n=i(9),r=i(7),a=i(4),o=i(8).f,s=i(52),l=i(0).Symbol;if(n&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var c={},u=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof u?new l(e):void 0===e?l():l(e);return""===e&&(c[t]=!0),t};s(u,l);var h=u.prototype=l.prototype;h.constructor=u;var d=h.toString,p="Symbol(test)"==String(l("test")),f=/^Symbol\((.*)\)[^)]+$/;o(h,"description",{configurable:!0,get:function(){var e=a(this)?this.valueOf():this,t=d.call(e);if(r(c,e))return"";var i=p?t.slice(7,-1):t.replace(f,"$1");return""===i?void 0:i}}),i(3)({global:!0,forced:!0},{Symbol:u})}},function(e,t,i){i(6)("hasInstance")},function(e,t,i){i(6)("isConcatSpreadable")},function(e,t,i){i(6)("iterator")},function(e,t,i){i(6)("match")},function(e,t,i){i(6)("replace")},function(e,t,i){i(6)("search")},function(e,t,i){i(6)("species")},function(e,t,i){i(6)("split")},function(e,t,i){i(6)("toPrimitive")},function(e,t,i){i(6)("toStringTag")},function(e,t,i){i(6)("unscopables")},function(e,t,i){i(37)(Math,"Math",!0)},function(e,t,i){i(37)(i(0).JSON,"JSON",!0)},function(e,t,i){i(94),i(95),i(97),i(98),i(99),i(100),i(101),i(102),i(103),i(104),i(105),i(108),i(109),e.exports=i(20).Reflect},function(e,t,i){var n=i(39),r=i(2),a=(i(0).Reflect||{}).apply,o=Function.apply,s=!i(5)((function(){a((function(){}))}));i(3)({target:"Reflect",stat:!0,forced:s},{apply:function(e,t,i){return n(e),r(i),a?a(e,t,i):o.call(e,t,i)}})},function(e,t,i){var n=i(56),r=i(39),a=i(2),o=i(4),s=i(5),l=i(96),c=(i(0).Reflect||{}).construct,u=s((function(){function e(){}return!(c((function(){}),[],e)instanceof e)})),h=!s((function(){c((function(){}))})),d=u||h;i(3)({target:"Reflect",stat:!0,forced:d,sham:d},{construct:function(e,t){r(e),a(t);var i=arguments.length<3?e:r(arguments[2]);if(h&&!u)return c(e,t,i);if(e==i){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var s=[null];return s.push.apply(s,t),new(l.apply(e,s))}var d=i.prototype,p=n(o(d)?d:Object.prototype),f=Function.apply.call(e,p,t);return o(f)?f:p}})},function(e,t,i){"use strict";var n=i(39),r=i(4),a=[].slice,o={};e.exports=Function.bind||function(e){var t=n(this),i=a.call(arguments,1),s=function(){var n=i.concat(a.call(arguments));return this instanceof s?function(e,t,i){if(!(t in o)){for(var n=[],r=0;r<t;r++)n[r]="a["+r+"]";o[t]=Function("C,a","return new C("+n.join(",")+")")}return o[t](e,i)}(t,n.length,n):t.apply(e,n)};return r(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t,i){var n=i(8),r=i(2),a=i(13),o=i(9),s=i(5)((function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}));i(3)({target:"Reflect",stat:!0,forced:s,sham:!o},{defineProperty:function(e,t,i){r(e),t=a(t,!0),r(i);try{return n.f(e,t,i),!0}catch(e){return!1}}})},function(e,t,i){var n=i(11).f,r=i(2);i(3)({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var i=n(r(e),t);return!(i&&!i.configurable)&&delete e[t]}})},function(e,t,i){var n=i(11),r=i(40),a=i(7),o=i(4),s=i(2);i(3)({target:"Reflect",stat:!0},{get:function e(t,i){var l,c,u=arguments.length<3?t:arguments[2];return s(t)===u?t[i]:(l=n.f(t,i))?a(l,"value")?l.value:void 0===l.get?void 0:l.get.call(u):o(c=r(t))?e(c,i,u):void 0}})},function(e,t,i){var n=i(11),r=i(2),a=i(9);i(3)({target:"Reflect",stat:!0,sham:!a},{getOwnPropertyDescriptor:function(e,t){return n.f(r(e),t)}})},function(e,t,i){var n=i(40),r=i(2),a=i(57);i(3)({target:"Reflect",stat:!0,sham:!a},{getPrototypeOf:function(e){return n(r(e))}})},function(e,t,i){i(3)({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},function(e,t,i){var n=i(2),r=Object.isExtensible;i(3)({target:"Reflect",stat:!0},{isExtensible:function(e){return n(e),!r||r(e)}})},function(e,t,i){i(3)({target:"Reflect",stat:!0},{ownKeys:i(53)})},function(e,t,i){var n=i(106),r=i(2),a=i(107);i(3)({target:"Reflect",stat:!0,sham:!a},{preventExtensions:function(e){r(e);try{var t=n("Object","preventExtensions");return t&&t(e),!0}catch(e){return!1}}})},function(e,t,i){var n=i(20),r=i(0),a=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?a(n[e])||a(r[e]):n[e]&&n[e][t]||r[e]&&r[e][t]}},function(e,t,i){e.exports=!i(5)((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,i){var n=i(8),r=i(11),a=i(40),o=i(7),s=i(14),l=i(2),c=i(4);i(3)({target:"Reflect",stat:!0},{set:function e(t,i,u){var h,d,p=arguments.length<4?t:arguments[3],f=r.f(l(t),i);if(!f){if(c(d=a(t)))return e(d,i,u,p);f=s(0)}if(o(f,"value")){if(!1===f.writable||!c(p))return!1;if(h=r.f(p,i)){if(h.get||h.set||!1===h.writable)return!1;h.value=u,n.f(p,i,h)}else n.f(p,i,s(0,u));return!0}return void 0!==f.set&&(f.set.call(p,u),!0)}})},function(e,t,i){var n=i(110),r=i(58);n&&i(3)({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){r(e,t);try{return n(e,t),!0}catch(e){return!1}}})},function(e,t,i){var n=i(58);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),t=i instanceof Array}catch(e){}return function(i,r){return n(i,r),t?e.call(i,r):i.__proto__=r,i}}():void 0)}])}))},e1e0:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("b50f"),r=i("34f2");class a extends r["a"]{constructor(e,t,i,n=0){super(e),this.origin=t,this.angle=i,this.accumulationType=n}rotate(e,t){this.helper.rotate(e.pos,this.origin,t)}apply(e){this.rotate(e,this.angle)}undo(e){this.rotate(e,-this.angle)}canAccumulate(e){return e instanceof a&&Object(n["c"])(this.origin,e.origin)}accumulate(e,t){const i=1===t.accumulationType;this.rotate(e,i?t.angle-this.angle:t.angle)}accumulateParams(e){const t=1===e.accumulationType;this.angle=t?e.angle:this.angle+e.angle}}},e1fc:function(e,t,i){var n=i("6d8b"),r=i("d5b7"),a=i("9850"),o=function(e){for(var t in e=e||{},r.call(this,e),e)e.hasOwnProperty(t)&&(this[t]=e[t]);this._children=[],this.__storage=null,this.__dirty=!0};o.prototype={constructor:o,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(e){return this._children[e]},childOfName:function(e){for(var t=this._children,i=0;i<t.length;i++)if(t[i].name===e)return t[i]},childCount:function(){return this._children.length},add:function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},addBefore:function(e,t){if(e&&e!==this&&e.parent!==this&&t&&t.parent===this){var i=this._children,n=i.indexOf(t);n>=0&&(i.splice(n,0,e),this._doAdd(e))}return this},_doAdd:function(e){e.parent&&e.parent.remove(e),e.parent=this;var t=this.__storage,i=this.__zr;t&&t!==e.__storage&&(t.addToStorage(e),e instanceof o&&e.addChildrenToStorage(t)),i&&i.refresh()},remove:function(e){var t=this.__zr,i=this.__storage,r=this._children,a=n.indexOf(r,e);return a<0||(r.splice(a,1),e.parent=null,i&&(i.delFromStorage(e),e instanceof o&&e.delChildrenFromStorage(i)),t&&t.refresh()),this},removeAll:function(){var e,t,i=this._children,n=this.__storage;for(t=0;t<i.length;t++)e=i[t],n&&(n.delFromStorage(e),e instanceof o&&e.delChildrenFromStorage(n)),e.parent=null;return i.length=0,this},eachChild:function(e,t){for(var i=this._children,n=0;n<i.length;n++){var r=i[n];e.call(t,r,n)}return this},traverse:function(e,t){for(var i=0;i<this._children.length;i++){var n=this._children[i];e.call(t,n),"group"===n.type&&n.traverse(e,t)}return this},addChildrenToStorage:function(e){for(var t=0;t<this._children.length;t++){var i=this._children[t];e.addToStorage(i),i instanceof o&&i.addChildrenToStorage(e)}},delChildrenFromStorage:function(e){for(var t=0;t<this._children.length;t++){var i=this._children[t];e.delFromStorage(i),i instanceof o&&i.delChildrenFromStorage(e)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(e){for(var t=null,i=new a(0,0,0,0),n=e||this._children,r=[],o=0;o<n.length;o++){var s=n[o];if(!s.ignore&&!s.invisible){var l=s.getBoundingRect(),c=s.getLocalTransform(r);c?(i.copy(l),i.applyTransform(c),t=t||i.clone(),t.union(i)):(t=t||l.clone(),t.union(l))}}return t||i}},n.inherits(o,r);var s=o;e.exports=s},e263:function(e,t,i){var n=i("401b"),r=i("4a3f"),a=Math.min,o=Math.max,s=Math.sin,l=Math.cos,c=2*Math.PI,u=n.create(),h=n.create(),d=n.create();function p(e,t,i){if(0!==e.length){var n,r=e[0],s=r[0],l=r[0],c=r[1],u=r[1];for(n=1;n<e.length;n++)r=e[n],s=a(s,r[0]),l=o(l,r[0]),c=a(c,r[1]),u=o(u,r[1]);t[0]=s,t[1]=c,i[0]=l,i[1]=u}}function f(e,t,i,n,r,s){r[0]=a(e,i),r[1]=a(t,n),s[0]=o(e,i),s[1]=o(t,n)}var m=[],g=[];function v(e,t,i,n,s,l,c,u,h,d){var p,f=r.cubicExtrema,v=r.cubicAt,y=f(e,i,s,c,m);for(h[0]=1/0,h[1]=1/0,d[0]=-1/0,d[1]=-1/0,p=0;p<y;p++){var _=v(e,i,s,c,m[p]);h[0]=a(_,h[0]),d[0]=o(_,d[0])}for(y=f(t,n,l,u,g),p=0;p<y;p++){var b=v(t,n,l,u,g[p]);h[1]=a(b,h[1]),d[1]=o(b,d[1])}h[0]=a(e,h[0]),d[0]=o(e,d[0]),h[0]=a(c,h[0]),d[0]=o(c,d[0]),h[1]=a(t,h[1]),d[1]=o(t,d[1]),h[1]=a(u,h[1]),d[1]=o(u,d[1])}function y(e,t,i,n,s,l,c,u){var h=r.quadraticExtremum,d=r.quadraticAt,p=o(a(h(e,i,s),1),0),f=o(a(h(t,n,l),1),0),m=d(e,i,s,p),g=d(t,n,l,f);c[0]=a(e,s,m),c[1]=a(t,l,g),u[0]=o(e,s,m),u[1]=o(t,l,g)}function _(e,t,i,r,a,o,p,f,m){var g=n.min,v=n.max,y=Math.abs(a-o);if(y%c<1e-4&&y>1e-4)return f[0]=e-i,f[1]=t-r,m[0]=e+i,void(m[1]=t+r);if(u[0]=l(a)*i+e,u[1]=s(a)*r+t,h[0]=l(o)*i+e,h[1]=s(o)*r+t,g(f,u,h),v(m,u,h),a%=c,a<0&&(a+=c),o%=c,o<0&&(o+=c),a>o&&!p?o+=c:a<o&&p&&(a+=c),p){var _=o;o=a,a=_}for(var b=0;b<o;b+=Math.PI/2)b>a&&(d[0]=l(b)*i+e,d[1]=s(b)*r+t,g(f,d,f),v(m,d,m))}t.fromPoints=p,t.fromLine=f,t.fromCubic=v,t.fromQuadratic=y,t.fromArc=_},e3db:function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},e41e:function(e,t,i){var n={"./ArcgisGald.vue":["fc56"],"./Camera.vue":["e703"],"./CameraList.vue":["94a6","chunk-ac51e2ae"],"./DeviceDetail.vue":["ac07"],"./FloatingPanelLayer.vue":["f499"],"./GoodsDetail.vue":["26be"],"./HCamera.vue":["ebe4c","chunk-0e2dfacc"],"./PatientDetail.vue":["758a"],"./PolicyDetail.vue":["4e21"],"./StickPanel.vue":["83b8"]};function r(e){if(!i.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return Promise.all(t.slice(1).map(i.e)).then((function(){return i(r)}))}r.keys=function(){return Object.keys(n)},r.id="e41e",e.exports=r},e46b:function(e,t,i){var n=i("b1d4"),r=i("6179"),a=i("6d8b"),o=a.extend,s=a.isArray;function l(e,t,i){t=s(t)&&{coordDimensions:t}||o({},t);var a=e.getSource(),l=n(a,t),c=new r(l,e);return c.initData(a,i),c}e.exports=l},e47b:function(e,t,i){var n=i("e0d3"),r=n.makeInner,a=n.normalizeToArray,o=r();function s(e,t){for(var i=e.length,n=0;n<i;n++)if(e[n].length>t)return e[n];return e[i-1]}var l={clearColorPalette:function(){o(this).colorIdx=0,o(this).colorNameMap={}},getColorFromPalette:function(e,t,i){t=t||this;var n=o(t),r=n.colorIdx||0,l=n.colorNameMap=n.colorNameMap||{};if(l.hasOwnProperty(e))return l[e];var c=a(this.get("color",!0)),u=this.get("colorLayer",!0),h=null!=i&&u?s(u,i):c;if(h=h||c,h&&h.length){var d=h[r];return e&&(l[e]=d),n.colorIdx=(r+1)%h.length,d}}};e.exports=l},e4d1:function(e,t,i){i("6932"),i("3a561"),i("7dcf"),i("3790"),i("2325"),i("2c17"),i("9e87")},e6aa:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("38862");function r(e,t){e.vertex.uniforms.add("intrinsicWidth","float"),t.vvSize?(e.attributes.add("sizeFeatureAttribute","float"),e.vertex.uniforms.add("vvSizeMinSize","vec3"),e.vertex.uniforms.add("vvSizeMaxSize","vec3"),e.vertex.uniforms.add("vvSizeOffset","vec3"),e.vertex.uniforms.add("vvSizeFactor","vec3"),e.vertex.code.add(n["a"]`
    float getSize() {
      return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;
    }
    `)):(e.attributes.add("size","float"),e.vertex.code.add(n["a"]`
    float getSize(){
      return intrinsicWidth * size;
    }
    `)),t.vvOpacity?(e.attributes.add("opacityFeatureAttribute","float"),e.vertex.constants.add("vvOpacityNumber","int",8),e.vertex.code.add(n["a"]`
    uniform float vvOpacityValues[vvOpacityNumber];
    uniform float vvOpacityOpacities[vvOpacityNumber];

    float interpolateOpacity( float value ){
      if (value <= vvOpacityValues[0]) {
        return vvOpacityOpacities[0];
      }

      for (int i = 1; i < vvOpacityNumber; ++i) {
        if (vvOpacityValues[i] >= value) {
          float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);
          return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);
        }
      }

      return vvOpacityOpacities[vvOpacityNumber - 1];
    }

    vec4 applyOpacity( vec4 color ){
      return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));
    }
    `)):e.vertex.code.add(n["a"]`
    vec4 applyOpacity( vec4 color ){
      return color;
    }
    `),t.vvColor?(e.attributes.add("colorFeatureAttribute","float"),e.vertex.constants.add("vvColorNumber","int",8),e.vertex.code.add(n["a"]`
    uniform float vvColorValues[vvColorNumber];
    uniform vec4 vvColorColors[vvColorNumber];

    vec4 interpolateColor( float value ) {
      if (value <= vvColorValues[0]) {
        return vvColorColors[0];
      }

      for (int i = 1; i < vvColorNumber; ++i) {
        if (vvColorValues[i] >= value) {
          float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);
          return mix(vvColorColors[i-1], vvColorColors[i], f);
        }
      }

      return vvColorColors[vvColorNumber - 1];
    }

    vec4 getColor(){
      return applyOpacity(interpolateColor(colorFeatureAttribute));
    }
    `)):(e.attributes.add("color","vec4"),e.vertex.code.add(n["a"]`
    vec4 getColor(){
      return applyOpacity(color);
    }
    `))}},e6b53:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));i("c120");var n=i("e92d"),r=i("6706"),a=i("7dcb");n["a"].getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");class o extends a["a"]{constructor(e,t,i,n=!0,r=!0){super(),this.type=e,this.lineStart=t,this.lineEnd=i,this.fadeLeft=n,this.fadeRight=r}equals(e){return e instanceof o&&this.type===e.type&&Object(r["d"])(this.lineStart,e.lineStart)&&Object(r["d"])(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}}},e703:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"camera"},[i("iframe",{ref:"frame",attrs:{src:e.videoUrl}}),i("div",{staticClass:"refresh-btn",on:{click:e.refreshFrame}},[e._v("刷新")])])},r=[],a={name:"Camera",components:{},props:{attributes:{type:Object,default:function(){return{}}}},data:function(){return{videoUrl:""}},watch:{attributes:{handler:function(){this.initFrame()},immediate:!0}},mounted:function(){},methods:{initFrame:function(){var e=this.attributes.deviceUid;this.videoUrl="".concat(location.origin,"/cyjk/player/qufu/player.html?id=").concat(e,"&fullbtn=0")},refreshFrame:function(){this.$refs["frame"].src=this.videoUrl+"&time="+parseInt(1e5*Math.random())}}},o=a,s=(i("7281"),i("2877")),l=Object(s["a"])(o,n,r,!1,null,"6d1659de",null);t["default"]=l.exports},e753:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("6706"),r=i("7dcb");class a extends r["a"]{constructor(e){super(),this.intersectionPoint=e}equals(e){return e instanceof a&&Object(n["d"])(this.intersectionPoint,e.intersectionPoint)}}},e7aa:function(e,t,i){var n=i("2306"),r=i("c775"),a=r.getDefaultLabel;function o(e,t,i,r,o,l,c){var u=i.getModel("label"),h=i.getModel("emphasis.label");n.setLabelStyle(e,t,u,h,{labelFetcher:o,labelDataIndex:l,defaultText:a(o.getData(),l),isRectText:!0,autoColor:r}),s(e),s(t)}function s(e,t){"outside"===e.textPosition&&(e.textPosition=t)}t.setLabel=o},e7d2:function(e,t,i){var n=i("4a3f");function r(e,t,i,r,a,o,s,l,c,u,h){if(0===c)return!1;var d=c;if(h>t+d&&h>r+d&&h>o+d&&h>l+d||h<t-d&&h<r-d&&h<o-d&&h<l-d||u>e+d&&u>i+d&&u>a+d&&u>s+d||u<e-d&&u<i-d&&u<a-d&&u<s-d)return!1;var p=n.cubicProjectPoint(e,t,i,r,a,o,s,l,u,h,null);return p<=d/2}t.containStroke=r},e7da:function(e,t,i){"use strict";i("8a07")},e86a:function(e,t,i){var n=i("9850"),r=i("5e76"),a=i("6d8b"),o=a.getContext,s=a.extend,l=a.retrieve2,c=a.retrieve3,u=a.trim,h={},d=0,p=5e3,f=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,m="12px sans-serif",g={};function v(e,t){g[e]=t}function y(e,t){t=t||m;var i=e+":"+t;if(h[i])return h[i];for(var n=(e+"").split("\n"),r=0,a=0,o=n.length;a<o;a++)r=Math.max(I(n[a],t).width,r);return d>p&&(d=0,h={}),d++,h[i]=r,r}function _(e,t,i,n,r,a,o,s){return o?x(e,t,i,n,r,a,o,s):b(e,t,i,n,r,a,s)}function b(e,t,i,r,a,o,s){var l=M(e,t,a,o,s),c=y(e,t);a&&(c+=a[1]+a[3]);var u=l.outerHeight,h=w(0,c,i),d=T(0,u,r),p=new n(h,d,c,u);return p.lineHeight=l.lineHeight,p}function x(e,t,i,r,a,o,s,l){var c=D(e,{rich:s,truncate:l,font:t,textAlign:i,textPadding:a,textLineHeight:o}),u=c.outerWidth,h=c.outerHeight,d=w(0,u,i),p=T(0,h,r);return new n(d,p,u,h)}function w(e,t,i){return"right"===i?e-=t:"center"===i&&(e-=t/2),e}function T(e,t,i){return"middle"===i?e-=t/2:"bottom"===i&&(e-=t),e}function S(e,t,i){var n=t.textPosition,r=t.textDistance,a=i.x,o=i.y;r=r||0;var s=i.height,l=i.width,c=s/2,u="left",h="top";switch(n){case"left":a-=r,o+=c,u="right",h="middle";break;case"right":a+=r+l,o+=c,h="middle";break;case"top":a+=l/2,o-=r,u="center",h="bottom";break;case"bottom":a+=l/2,o+=s+r,u="center";break;case"inside":a+=l/2,o+=c,u="center",h="middle";break;case"insideLeft":a+=r,o+=c,h="middle";break;case"insideRight":a+=l-r,o+=c,u="right",h="middle";break;case"insideTop":a+=l/2,o+=r,u="center";break;case"insideBottom":a+=l/2,o+=s-r,u="center",h="bottom";break;case"insideTopLeft":a+=r,o+=r;break;case"insideTopRight":a+=l-r,o+=r,u="right";break;case"insideBottomLeft":a+=r,o+=s-r,h="bottom";break;case"insideBottomRight":a+=l-r,o+=s-r,u="right",h="bottom";break}return e=e||{},e.x=a,e.y=o,e.textAlign=u,e.textVerticalAlign=h,e}function O(e,t,i){var n={textPosition:e,textDistance:i};return S({},n,t)}function C(e,t,i,n,r){if(!t)return"";var a=(e+"").split("\n");r=k(t,i,n,r);for(var o=0,s=a.length;o<s;o++)a[o]=P(a[o],r);return a.join("\n")}function k(e,t,i,n){n=s({},n),n.font=t;i=l(i,"...");n.maxIterations=l(n.maxIterations,2);var r=n.minChar=l(n.minChar,0);n.cnCharWidth=y("国",t);var a=n.ascCharWidth=y("a",t);n.placeholder=l(n.placeholder,"");for(var o=e=Math.max(0,e-1),c=0;c<r&&o>=a;c++)o-=a;var u=y(i,t);return u>o&&(i="",u=0),o=e-u,n.ellipsis=i,n.ellipsisWidth=u,n.contentWidth=o,n.containerWidth=e,n}function P(e,t){var i=t.containerWidth,n=t.font,r=t.contentWidth;if(!i)return"";var a=y(e,n);if(a<=i)return e;for(var o=0;;o++){if(a<=r||o>=t.maxIterations){e+=t.ellipsis;break}var s=0===o?E(e,r,t.ascCharWidth,t.cnCharWidth):a>0?Math.floor(e.length*r/a):0;e=e.substr(0,s),a=y(e,n)}return""===e&&(e=t.placeholder),e}function E(e,t,i,n){for(var r=0,a=0,o=e.length;a<o&&r<t;a++){var s=e.charCodeAt(a);r+=0<=s&&s<=127?i:n}return a}function A(e){return y("国",e)}function I(e,t){return g.measureText(e,t)}function M(e,t,i,n,r){null!=e&&(e+="");var a=l(n,A(t)),o=e?e.split("\n"):[],s=o.length*a,c=s,u=!0;if(i&&(c+=i[0]+i[2]),e&&r){u=!1;var h=r.outerHeight,d=r.outerWidth;if(null!=h&&c>h)e="",o=[];else if(null!=d)for(var p=k(d-(i?i[1]+i[3]:0),t,r.ellipsis,{minChar:r.minChar,placeholder:r.placeholder}),f=0,m=o.length;f<m;f++)o[f]=P(o[f],p)}return{lines:o,height:s,outerHeight:c,lineHeight:a,canCacheByTextString:u}}function D(e,t){var i={lines:[],width:0,height:0};if(null!=e&&(e+=""),!e)return i;var n,a=f.lastIndex=0;while(null!=(n=f.exec(e))){var o=n.index;o>a&&j(i,e.substring(a,o)),j(i,n[2],n[1]),a=f.lastIndex}a<e.length&&j(i,e.substring(a,e.length));var s=i.lines,u=0,h=0,d=[],p=t.textPadding,m=t.truncate,g=m&&m.outerWidth,v=m&&m.outerHeight;p&&(null!=g&&(g-=p[1]+p[3]),null!=v&&(v-=p[0]+p[2]));for(var _=0;_<s.length;_++){for(var b=s[_],x=0,w=0,T=0;T<b.tokens.length;T++){var S=b.tokens[T],O=S.styleName&&t.rich[S.styleName]||{},k=S.textPadding=O.textPadding,P=S.font=O.font||t.font,E=S.textHeight=l(O.textHeight,A(P));if(k&&(E+=k[0]+k[2]),S.height=E,S.lineHeight=c(O.textLineHeight,t.textLineHeight,E),S.textAlign=O&&O.textAlign||t.textAlign,S.textVerticalAlign=O&&O.textVerticalAlign||"middle",null!=v&&u+S.lineHeight>v)return{lines:[],width:0,height:0};S.textWidth=y(S.text,P);var I=O.textWidth,M=null==I||"auto"===I;if("string"===typeof I&&"%"===I.charAt(I.length-1))S.percentWidth=I,d.push(S),I=0;else{if(M){I=S.textWidth;var D=O.textBackgroundColor,L=D&&D.image;L&&(L=r.findExistImage(L),r.isImageReady(L)&&(I=Math.max(I,L.width*E/L.height)))}var R=k?k[1]+k[3]:0;I+=R;var N=null!=g?g-w:null;null!=N&&N<I&&(!M||N<R?(S.text="",S.textWidth=I=0):(S.text=C(S.text,N-R,P,m.ellipsis,{minChar:m.minChar}),S.textWidth=y(S.text,P),I=S.textWidth+R))}w+=S.width=I,O&&(x=Math.max(x,S.lineHeight))}b.width=w,b.lineHeight=x,u+=x,h=Math.max(h,w)}i.outerWidth=i.width=l(t.textWidth,h),i.outerHeight=i.height=l(t.textHeight,u),p&&(i.outerWidth+=p[1]+p[3],i.outerHeight+=p[0]+p[2]);for(_=0;_<d.length;_++){S=d[_];var z=S.percentWidth;S.width=parseInt(z,10)/100*h}return i}function j(e,t,i){for(var n=""===t,r=t.split("\n"),a=e.lines,o=0;o<r.length;o++){var s=r[o],l={styleName:i,text:s,isLineHolder:!s&&!n};if(o)a.push({tokens:[l]});else{var c=(a[a.length-1]||(a[0]={tokens:[]})).tokens,u=c.length;1===u&&c[0].isLineHolder?c[0]=l:(s||!u||n)&&c.push(l)}}}function L(e){var t=(e.fontSize||e.fontFamily)&&[e.fontStyle,e.fontWeight,(e.fontSize||12)+"px",e.fontFamily||"sans-serif"].join(" ");return t&&u(t)||e.textFont||e.font}g.measureText=function(e,t){var i=o();return i.font=t||m,i.measureText(e)},t.DEFAULT_FONT=m,t.$override=v,t.getWidth=y,t.getBoundingRect=_,t.adjustTextX=w,t.adjustTextY=T,t.calculateTextPosition=S,t.adjustTextPositionOnRect=O,t.truncateText=C,t.getLineHeight=A,t.measureText=I,t.parsePlainText=M,t.parseRichText=D,t.makeFont=L},e887:function(e,t,i){var n=i("6d8b"),r=n.each,a=i("e1fc"),o=i("8918"),s=i("625e"),l=i("e0d3"),c=i("2306"),u=i("f47d"),h=u.createTask,d=i("cccd"),p=l.makeInner(),f=d();function m(){this.group=new a,this.uid=o.getUID("viewChart"),this.renderTask=h({plan:_,reset:b}),this.renderTask.context={view:this}}m.prototype={type:"chart",init:function(e,t){},render:function(e,t,i,n){},highlight:function(e,t,i,n){y(e.getData(),n,"emphasis")},downplay:function(e,t,i,n){y(e.getData(),n,"normal")},remove:function(e,t){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};var g=m.prototype;function v(e,t,i){if(e&&(e.trigger(t,i),e.isGroup&&!c.isHighDownDispatcher(e)))for(var n=0,r=e.childCount();n<r;n++)v(e.childAt(n),t,i)}function y(e,t,i){var n=l.queryDataIndex(e,t),a=t&&null!=t.highlightKey?c.getHighlightDigit(t.highlightKey):null;null!=n?r(l.normalizeToArray(n),(function(t){v(e.getItemGraphicEl(t),i,a)})):e.eachItemGraphicEl((function(e){v(e,i,a)}))}function _(e){return f(e.model)}function b(e){var t=e.model,i=e.ecModel,n=e.api,r=e.payload,a=t.pipelineContext.progressiveRender,o=e.view,s=r&&p(r).updateMethod,l=a?"incrementalPrepareRender":s&&o[s]?s:"render";return"render"!==l&&o[l](t,i,n,r),x[l]}g.updateView=g.updateLayout=g.updateVisual=function(e,t,i,n){this.render(e,t,i,n)},s.enableClassExtend(m,["dispose"]),s.enableClassManagement(m,{registerWhenExtend:!0}),m.markUpdateMethod=function(e,t){p(e).updateMethod=t};var x={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},w=m;e.exports=w},eb6b:function(e,t,i){var n=i("6d8b"),r=i("e0d3"),a=r.makeInner,o=i("cd33"),s=i("133d"),l=n.each,c=n.curry,u=a();function h(e,t,i){var r=e.currTrigger,a=[e.x,e.y],o=e,u=e.dispatchAction||n.bind(i.dispatchAction,i),h=t.getComponent("axisPointer").coordSysAxesInfo;if(h){x(a)&&(a=s({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var p=x(a),w=o.axesInfo,T=h.axesInfo,S="leave"===r||x(a),O={},C={},k={list:[],map:{}},P={showPointer:c(f,C),showTooltip:c(m,k)};l(h.coordSysMap,(function(e,t){var i=p||e.containPoint(a);l(h.coordSysAxesInfo[t],(function(e,t){var n=e.axis,r=_(w,e);if(!S&&i&&(!w||r)){var o=r&&r.value;null!=o||p||(o=n.pointToData(a)),null!=o&&d(e,o,P,!1,O)}}))}));var E={};return l(T,(function(e,t){var i=e.linkGroup;i&&!C[t]&&l(i.axesInfo,(function(t,n){var r=C[n];if(t!==e&&r){var a=r.value;i.mapper&&(a=e.axis.scale.parse(i.mapper(a,b(t),b(e)))),E[e.key]=a}}))})),l(E,(function(e,t){d(T[t],e,P,!0,O)})),g(C,T,O),v(k,a,e,u),y(T,u,i),O}}function d(e,t,i,r,a){var o=e.axis;if(!o.scale.isBlank()&&o.containData(t))if(e.involveSeries){var s=p(t,e),l=s.payloadBatch,c=s.snapToValue;l[0]&&null==a.seriesIndex&&n.extend(a,l[0]),!r&&e.snap&&o.containData(c)&&null!=c&&(t=c),i.showPointer(e,t,l,a),i.showTooltip(e,s,c)}else i.showPointer(e,t)}function p(e,t){var i=t.axis,n=i.dim,r=e,a=[],o=Number.MAX_VALUE,s=-1;return l(t.seriesModels,(function(t,c){var u,h,d=t.getData().mapDimension(n,!0);if(t.getAxisTooltipData){var p=t.getAxisTooltipData(d,e,i);h=p.dataIndices,u=p.nestestValue}else{if(h=t.getData().indicesOfNearest(d[0],e,"category"===i.type?.5:null),!h.length)return;u=t.getData().get(d[0],h[0])}if(null!=u&&isFinite(u)){var f=e-u,m=Math.abs(f);m<=o&&((m<o||f>=0&&s<0)&&(o=m,s=f,r=u,a.length=0),l(h,(function(e){a.push({seriesIndex:t.seriesIndex,dataIndexInside:e,dataIndex:t.getData().getRawIndex(e)})})))}})),{payloadBatch:a,snapToValue:r}}function f(e,t,i,n){e[t.key]={value:i,payloadBatch:n}}function m(e,t,i,n){var r=i.payloadBatch,a=t.axis,s=a.model,l=t.axisPointerModel;if(t.triggerTooltip&&r.length){var c=t.coordSys.model,u=o.makeKey(c),h=e.map[u];h||(h=e.map[u]={coordSysId:c.id,coordSysIndex:c.componentIndex,coordSysType:c.type,coordSysMainType:c.mainType,dataByAxis:[]},e.list.push(h)),h.dataByAxis.push({axisDim:a.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:n,valueLabelOpt:{precision:l.get("label.precision"),formatter:l.get("label.formatter")},seriesDataIndices:r.slice()})}}function g(e,t,i){var n=i.axesInfo=[];l(t,(function(t,i){var r=t.axisPointerModel.option,a=e[i];a?(!t.useHandle&&(r.status="show"),r.value=a.value,r.seriesDataIndices=(a.payloadBatch||[]).slice()):!t.useHandle&&(r.status="hide"),"show"===r.status&&n.push({axisDim:t.axis.dim,axisIndex:t.axis.model.componentIndex,value:r.value})}))}function v(e,t,i,n){if(!x(t)&&e.list.length){var r=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:i.tooltipOption,position:i.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:e.list})}else n({type:"hideTip"})}function y(e,t,i){var r=i.getZr(),a="axisPointerLastHighlights",o=u(r)[a]||{},s=u(r)[a]={};l(e,(function(e,t){var i=e.axisPointerModel.option;"show"===i.status&&l(i.seriesDataIndices,(function(e){var t=e.seriesIndex+" | "+e.dataIndex;s[t]=e}))}));var c=[],h=[];n.each(o,(function(e,t){!s[t]&&h.push(e)})),n.each(s,(function(e,t){!o[t]&&c.push(e)})),h.length&&i.dispatchAction({type:"downplay",escapeConnect:!0,batch:h}),c.length&&i.dispatchAction({type:"highlight",escapeConnect:!0,batch:c})}function _(e,t){for(var i=0;i<(e||[]).length;i++){var n=e[i];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function b(e){var t=e.axis.model,i={},n=i.axisDim=e.axis.dim;return i.axisIndex=i[n+"AxisIndex"]=t.componentIndex,i.axisName=i[n+"AxisName"]=t.name,i.axisId=i[n+"AxisId"]=t.id,i}function x(e){return!e||null==e[0]||isNaN(e[0])||null==e[1]||isNaN(e[1])}e.exports=h},ebf9:function(e,t,i){var n=i("3eba");n.registerAction("legendScroll","legendscroll",(function(e,t){var i=e.scrollDataIndex;null!=i&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},(function(e){e.setScrollDataIndex(i)}))}))},ec02:function(e,t,i){var n=i("6d8b"),r=i("84ce"),a=function(e,t,i,n,a){r.call(this,e,t,i),this.type=n||"value",this.position=a||"bottom"};a.prototype={constructor:a,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},getGlobalExtent:function(e){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),e&&t[0]>t[1]&&t.reverse(),t},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(e,t){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),t)},toLocalCoord:null,toGlobalCoord:null},n.inherits(a,r);var o=a;e.exports=o},ec1b:function(e,t,i){!function(t,i){e.exports=i()}(0,(function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=2)}([function(e,t,i){var n=i(4)(i(1),i(5),null,null);e.exports=n.exports},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3);t.default={props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator:function(e){return e>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default:function(e,t,i,n){return i*(1-Math.pow(2,-10*e/n))*1024/1023+t}}},data:function(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown:function(){return this.startVal>this.endVal}},watch:{startVal:function(){this.autoplay&&this.start()},endVal:function(){this.autoplay&&this.start()}},mounted:function(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start:function(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=(0,n.requestAnimationFrame)(this.count)},pauseResume:function(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause:function(){(0,n.cancelAnimationFrame)(this.rAF)},resume:function(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,(0,n.requestAnimationFrame)(this.count)},reset:function(){this.startTime=null,(0,n.cancelAnimationFrame)(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count:function(e){this.startTime||(this.startTime=e),this.timestamp=e;var t=e-this.startTime;this.remaining=this.localDuration-t,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(t,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(t,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(t/this.localDuration):this.printVal=this.localStartVal+(this.localStartVal-this.startVal)*(t/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),t<this.localDuration?this.rAF=(0,n.requestAnimationFrame)(this.count):this.$emit("callback")},isNumber:function(e){return!isNaN(parseFloat(e))},formatNumber:function(e){e=e.toFixed(this.decimals),e+="";var t=e.split("."),i=t[0],n=t.length>1?this.decimal+t[1]:"",r=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;r.test(i);)i=i.replace(r,"$1"+this.separator+"$2");return this.prefix+i+n+this.suffix}},destroyed:function(){(0,n.cancelAnimationFrame)(this.rAF)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default,"undefined"!=typeof window&&window.Vue&&window.Vue.component("count-to",r.default)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=0,r="webkit moz ms o".split(" "),a=void 0,o=void 0;if("undefined"==typeof window)t.requestAnimationFrame=a=function(){},t.cancelAnimationFrame=o=function(){};else{t.requestAnimationFrame=a=window.requestAnimationFrame,t.cancelAnimationFrame=o=window.cancelAnimationFrame;for(var s=void 0,l=0;l<r.length&&(!a||!o);l++)s=r[l],t.requestAnimationFrame=a=a||window[s+"RequestAnimationFrame"],t.cancelAnimationFrame=o=o||window[s+"CancelAnimationFrame"]||window[s+"CancelRequestAnimationFrame"];a&&o||(t.requestAnimationFrame=a=function(e){var t=(new Date).getTime(),i=Math.max(0,16-(t-n)),r=window.setTimeout((function(){e(t+i)}),i);return n=t+i,r},t.cancelAnimationFrame=o=function(e){window.clearTimeout(e)})}t.requestAnimationFrame=a,t.cancelAnimationFrame=o},function(e,t){e.exports=function(e,t,i,n){var r,a=e=e||{},o=typeof e.default;"object"!==o&&"function"!==o||(r=e,a=e.default);var s="function"==typeof a?a.options:a;if(t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),i&&(s._scopeId=i),n){var l=Object.create(s.computed||null);Object.keys(n).forEach((function(e){var t=n[e];l[e]=function(){return t}})),s.computed=l}return{esModule:r,exports:a,options:s}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",[e._v("\n  "+e._s(e.displayValue)+"\n")])},staticRenderFns:[]}}])}))},ec34:function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("6d8b")),a=r.createHashMap,o=r.isString,s=r.isArray,l=r.each,c=(r.assert,i("3041")),u=c.parseXML,h=a(),d={registerMap:function(e,t,i){var n;return s(t)?n=t:t.svg?n=[{type:"svg",source:t.svg,specialAreas:t.specialAreas}]:(t.geoJson&&!t.features&&(i=t.specialAreas,t=t.geoJson),n=[{type:"geoJSON",source:t,specialAreas:i}]),l(n,(function(e){var t=e.type;"geoJson"===t&&(t=e.type="geoJSON");var i=p[t];i(e)})),h.set(e,n)},retrieveMap:function(e){return h.get(e)}},p={geoJSON:function(e){var t=e.source;e.geoJSON=o(t)?"undefined"!==typeof JSON&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t},svg:function(e){e.svgXML=u(e.source)}};e.exports=d},ec6f:function(e,t,i){var n=i("6d8b"),r=n.createHashMap,a=n.isTypedArray,o=i("625e"),s=o.enableClassCheck,l=i("93d0"),c=l.SOURCE_FORMAT_ORIGINAL,u=l.SERIES_LAYOUT_BY_COLUMN,h=l.SOURCE_FORMAT_UNKNOWN,d=l.SOURCE_FORMAT_TYPED_ARRAY,p=l.SOURCE_FORMAT_KEYED_COLUMNS;function f(e){this.fromDataset=e.fromDataset,this.data=e.data||(e.sourceFormat===p?{}:[]),this.sourceFormat=e.sourceFormat||h,this.seriesLayoutBy=e.seriesLayoutBy||u,this.dimensionsDefine=e.dimensionsDefine,this.encodeDefine=e.encodeDefine&&r(e.encodeDefine),this.startIndex=e.startIndex||0,this.dimensionsDetectCount=e.dimensionsDetectCount}f.seriesDataToSource=function(e){return new f({data:e,sourceFormat:a(e)?d:c,fromDataset:!1})},s(f);var m=f;e.exports=m},ed21:function(e,t,i){var n=i("2cf4"),r=n.devicePixelRatio,a=i("6d8b"),o=i("4942"),s=i("9850"),l=i("04f6"),c=i("5e68"),u=i("98b7"),h=i("0da8"),d=i("22d1"),p=1e5,f=314159,m=.01,g=.001;function v(e){return parseInt(e,10)}function y(e){return!!e&&(!!e.__builtin__||"function"===typeof e.resize&&"function"===typeof e.refresh)}var _=new s(0,0,0,0),b=new s(0,0,0,0);function x(e,t,i){return _.copy(e.getBoundingRect()),e.transform&&_.applyTransform(e.transform),b.width=t,b.height=i,!_.intersect(b)}function w(e,t){if(e===t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!0;return!1}function T(e,t){for(var i=0;i<e.length;i++){var n=e[i];n.setTransform(t),t.beginPath(),n.buildPath(t,n.shape),t.clip(),n.restoreTransform(t)}}function S(e,t){var i=document.createElement("div");return i.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",i}var O=function(e,t,i){this.type="canvas";var n=!e.nodeName||"CANVAS"===e.nodeName.toUpperCase();this._opts=i=a.extend({},i||{}),this.dpr=i.devicePixelRatio||r,this._singleCanvas=n,this.root=e;var o=e.style;o&&(o["-webkit-tap-highlight-color"]="transparent",o["-webkit-user-select"]=o["user-select"]=o["-webkit-touch-callout"]="none",e.innerHTML=""),this.storage=t;var s=this._zlevelList=[],l=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,n){var u=e.width,h=e.height;null!=i.width&&(u=i.width),null!=i.height&&(h=i.height),this.dpr=i.devicePixelRatio||1,e.width=u*this.dpr,e.height=h*this.dpr,this._width=u,this._height=h;var d=new c(e,this,this.dpr);d.__builtin__=!0,d.initContext(),l[f]=d,d.zlevel=f,s.push(f),this._domRoot=e}else{this._width=this._getSize(0),this._height=this._getSize(1);var p=this._domRoot=S(this._width,this._height);e.appendChild(p)}this._hoverlayer=null,this._hoverElements=[]};O.prototype={constructor:O,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(e){var t=this.storage.getDisplayList(!0),i=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,e,this._redrawId);for(var n=0;n<i.length;n++){var r=i[n],a=this._layers[r];if(!a.__builtin__&&a.refresh){var o=0===n?this._backgroundColor:null;a.refresh(o)}}return this.refreshHover(),this},addHover:function(e,t){if(!e.__hoverMir){var i=new e.constructor({style:e.style,shape:e.shape,z:e.z,z2:e.z2,silent:e.silent});return i.__from=e,e.__hoverMir=i,t&&i.setStyle(t),this._hoverElements.push(i),i}},removeHover:function(e){var t=e.__hoverMir,i=this._hoverElements,n=a.indexOf(i,t);n>=0&&i.splice(n,1),e.__hoverMir=null},clearHover:function(e){for(var t=this._hoverElements,i=0;i<t.length;i++){var n=t[i].__from;n&&(n.__hoverMir=null)}t.length=0},refreshHover:function(){var e=this._hoverElements,t=e.length,i=this._hoverlayer;if(i&&i.clear(),t){l(e,this.storage.displayableSortFunc),i||(i=this._hoverlayer=this.getLayer(p));var n={};i.ctx.save();for(var r=0;r<t;){var a=e[r],o=a.__from;o&&o.__zr?(r++,o.invisible||(a.transform=o.transform,a.invTransform=o.invTransform,a.__clipPaths=o.__clipPaths,this._doPaintEl(a,i,!0,n))):(e.splice(r,1),o.__hoverMir=null,t--)}i.ctx.restore()}},getHoverLayer:function(){return this.getLayer(p)},_paintList:function(e,t,i){if(this._redrawId===i){t=t||!1,this._updateLayerStatus(e);var n=this._doPaintList(e,t);if(this._needsManuallyCompositing&&this._compositeManually(),!n){var r=this;u((function(){r._paintList(e,t,i)}))}}},_compositeManually:function(){var e=this.getLayer(f).ctx,t=this._domRoot.width,i=this._domRoot.height;e.clearRect(0,0,t,i),this.eachBuiltinLayer((function(n){n.virtual&&e.drawImage(n.dom,0,0,t,i)}))},_doPaintList:function(e,t){for(var i=[],n=0;n<this._zlevelList.length;n++){var r=this._zlevelList[n],o=this._layers[r];o.__builtin__&&o!==this._hoverlayer&&(o.__dirty||t)&&i.push(o)}for(var s=!0,l=0;l<i.length;l++){o=i[l];var c=o.ctx,u={};c.save();var h=t?o.__startIndex:o.__drawIndex,p=!t&&o.incremental&&Date.now,f=p&&Date.now(),m=o.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(o.__startIndex===o.__endIndex)o.clear(!1,m);else if(h===o.__startIndex){var g=e[h];g.incremental&&g.notClear&&!t||o.clear(!1,m)}-1===h&&(console.error("For some unknown reason. drawIndex is -1"),h=o.__startIndex);for(var v=h;v<o.__endIndex;v++){var y=e[v];if(this._doPaintEl(y,o,t,u),y.__dirty=y.__dirtyText=!1,p){var _=Date.now()-f;if(_>15)break}}o.__drawIndex=v,o.__drawIndex<o.__endIndex&&(s=!1),u.prevElClipPaths&&c.restore(),c.restore()}return d.wxa&&a.each(this._layers,(function(e){e&&e.ctx&&e.ctx.draw&&e.ctx.draw()})),s},_doPaintEl:function(e,t,i,n){var r=t.ctx,a=e.transform;if((t.__dirty||i)&&!e.invisible&&0!==e.style.opacity&&(!a||a[0]||a[3])&&(!e.culling||!x(e,this._width,this._height))){var o=e.__clipPaths,s=n.prevElClipPaths;s&&!w(o,s)||(s&&(r.restore(),n.prevElClipPaths=null,n.prevEl=null),o&&(r.save(),T(o,r),n.prevElClipPaths=o)),e.beforeBrush&&e.beforeBrush(r),e.brush(r,n.prevEl||null),n.prevEl=e,e.afterBrush&&e.afterBrush(r)}},getLayer:function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=f);var i=this._layers[e];return i||(i=new c("zr_"+e,this,this.dpr),i.zlevel=e,i.__builtin__=!0,this._layerConfig[e]?a.merge(i,this._layerConfig[e],!0):this._layerConfig[e-m]&&a.merge(i,this._layerConfig[e-m],!0),t&&(i.virtual=t),this.insertLayer(e,i),i.initContext()),i},insertLayer:function(e,t){var i=this._layers,n=this._zlevelList,r=n.length,a=null,s=-1,l=this._domRoot;if(i[e])o("ZLevel "+e+" has been used already");else if(y(t)){if(r>0&&e>n[0]){for(s=0;s<r-1;s++)if(n[s]<e&&n[s+1]>e)break;a=i[n[s]]}if(n.splice(s+1,0,e),i[e]=t,!t.virtual)if(a){var c=a.dom;c.nextSibling?l.insertBefore(t.dom,c.nextSibling):l.appendChild(t.dom)}else l.firstChild?l.insertBefore(t.dom,l.firstChild):l.appendChild(t.dom)}else o("Layer of zlevel "+e+" is not valid")},eachLayer:function(e,t){var i,n,r=this._zlevelList;for(n=0;n<r.length;n++)i=r[n],e.call(t,this._layers[i],i)},eachBuiltinLayer:function(e,t){var i,n,r,a=this._zlevelList;for(r=0;r<a.length;r++)n=a[r],i=this._layers[n],i.__builtin__&&e.call(t,i,n)},eachOtherLayer:function(e,t){var i,n,r,a=this._zlevelList;for(r=0;r<a.length;r++)n=a[r],i=this._layers[n],i.__builtin__||e.call(t,i,n)},getLayers:function(){return this._layers},_updateLayerStatus:function(e){function t(e){a&&(a.__endIndex!==e&&(a.__dirty=!0),a.__endIndex=e)}if(this.eachBuiltinLayer((function(e,t){e.__dirty=e.__used=!1})),this._singleCanvas)for(var i=1;i<e.length;i++){var n=e[i];if(n.zlevel!==e[i-1].zlevel||n.incremental){this._needsManuallyCompositing=!0;break}}var r,a=null,s=0;for(i=0;i<e.length;i++){n=e[i];var l,c=n.zlevel;r!==c&&(r=c,s=0),n.incremental?(l=this.getLayer(c+g,this._needsManuallyCompositing),l.incremental=!0,s=1):l=this.getLayer(c+(s>0?m:0),this._needsManuallyCompositing),l.__builtin__||o("ZLevel "+c+" has been used by unkown layer "+l.id),l!==a&&(l.__used=!0,l.__startIndex!==i&&(l.__dirty=!0),l.__startIndex=i,l.incremental?l.__drawIndex=-1:l.__drawIndex=i,t(i),a=l),n.__dirty&&(l.__dirty=!0,l.incremental&&l.__drawIndex<0&&(l.__drawIndex=i))}t(i),this.eachBuiltinLayer((function(e,t){!e.__used&&e.getElementCount()>0&&(e.__dirty=!0,e.__startIndex=e.__endIndex=e.__drawIndex=0),e.__dirty&&e.__drawIndex<0&&(e.__drawIndex=e.__startIndex)}))},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(e){e.clear()},setBackgroundColor:function(e){this._backgroundColor=e},configLayer:function(e,t){if(t){var i=this._layerConfig;i[e]?a.merge(i[e],t,!0):i[e]=t;for(var n=0;n<this._zlevelList.length;n++){var r=this._zlevelList[n];if(r===e||r===e+m){var o=this._layers[r];a.merge(o,i[e],!0)}}}},delLayer:function(e){var t=this._layers,i=this._zlevelList,n=t[e];n&&(n.dom.parentNode.removeChild(n.dom),delete t[e],i.splice(a.indexOf(i,e),1))},resize:function(e,t){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var n=this._opts;if(null!=e&&(n.width=e),null!=t&&(n.height=t),e=this._getSize(0),t=this._getSize(1),i.style.display="",this._width!==e||t!==this._height){for(var r in i.style.width=e+"px",i.style.height=t+"px",this._layers)this._layers.hasOwnProperty(r)&&this._layers[r].resize(e,t);a.each(this._progressiveLayers,(function(i){i.resize(e,t)})),this.refresh(!0)}this._width=e,this._height=t}else{if(null==e||null==t)return;this._width=e,this._height=t,this.getLayer(f).resize(e,t)}return this},clearLayer:function(e){var t=this._layers[e];t&&t.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[f].dom;var t=new c("image",this,e.pixelRatio||this.dpr);if(t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor),e.pixelRatio<=this.dpr){this.refresh();var i=t.dom.width,n=t.dom.height,r=t.ctx;this.eachLayer((function(e){e.__builtin__?r.drawImage(e.dom,0,0,i,n):e.renderToCanvas&&(t.ctx.save(),e.renderToCanvas(t.ctx),t.ctx.restore())}))}else for(var a={},o=this.storage.getDisplayList(!0),s=0;s<o.length;s++){var l=o[s];this._doPaintEl(l,t,!0,a)}return t.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,i=["width","height"][e],n=["clientWidth","clientHeight"][e],r=["paddingLeft","paddingTop"][e],a=["paddingRight","paddingBottom"][e];if(null!=t[i]&&"auto"!==t[i])return parseFloat(t[i]);var o=this.root,s=document.defaultView.getComputedStyle(o);return(o[n]||v(s[i])||v(o.style[i]))-(v(s[r])||0)-(v(s[a])||0)|0},pathToImage:function(e,t){t=t||this.dpr;var i=document.createElement("canvas"),n=i.getContext("2d"),r=e.getBoundingRect(),a=e.style,o=a.shadowBlur*t,s=a.shadowOffsetX*t,l=a.shadowOffsetY*t,c=a.hasStroke()?a.lineWidth:0,u=Math.max(c/2,-s+o),d=Math.max(c/2,s+o),p=Math.max(c/2,-l+o),f=Math.max(c/2,l+o),m=r.width+u+d,g=r.height+p+f;i.width=m*t,i.height=g*t,n.scale(t,t),n.clearRect(0,0,m,g),n.dpr=t;var v={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[u-r.x,p-r.y],e.rotation=0,e.scale=[1,1],e.updateTransform(),e&&e.brush(n);var y=h,_=new y({style:{x:0,y:0,image:i}});return null!=v.position&&(_.position=e.position=v.position),null!=v.rotation&&(_.rotation=e.rotation=v.rotation),null!=v.scale&&(_.scale=e.scale=v.scale),_}};var C=O;e.exports=C},ed6d:function(e,t,i){var n=i("4a4b");function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}e.exports=r,e.exports["default"]=e.exports,e.exports.__esModule=!0},eda2:function(e,t,i){var n=i("6d8b"),r=i("e86a"),a=i("3842");function o(e){return isNaN(e)?"-":(e=(e+"").split("."),e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:""))}function s(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,(function(e,t){return t.toUpperCase()})),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var l=n.normalizeCssArray,c=/([&<>"'])/g,u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function h(e){return null==e?"":(e+"").replace(c,(function(e,t){return u[t]}))}var d=["a","b","c","d","e","f","g"],p=function(e,t){return"{"+e+(null==t?"":t)+"}"};function f(e,t,i){n.isArray(t)||(t=[t]);var r=t.length;if(!r)return"";for(var a=t[0].$vars||[],o=0;o<a.length;o++){var s=d[o];e=e.replace(p(s),p(s,0))}for(var l=0;l<r;l++)for(var c=0;c<a.length;c++){var u=t[l][a[c]];e=e.replace(p(d[c],l),i?h(u):u)}return e}function m(e,t,i){return n.each(t,(function(t,n){e=e.replace("{"+n+"}",i?h(t):t)})),e}function g(e,t){e=n.isString(e)?{color:e,extraCssText:t}:e||{};var i=e.color,r=e.type,a=(t=e.extraCssText,e.renderMode||"html"),o=e.markerId||"X";return i?"html"===a?"subItem"===r?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+h(i)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+h(i)+";"+(t||"")+'"></span>':{renderMode:a,content:"{marker"+o+"|}  ",style:{color:i}}:""}function v(e,t){return e+="","0000".substr(0,t-e.length)+e}function y(e,t,i){"week"!==e&&"month"!==e&&"quarter"!==e&&"half-year"!==e&&"year"!==e||(e="MM-dd\nyyyy");var n=a.parseDate(t),r=i?"UTC":"",o=n["get"+r+"FullYear"](),s=n["get"+r+"Month"]()+1,l=n["get"+r+"Date"](),c=n["get"+r+"Hours"](),u=n["get"+r+"Minutes"](),h=n["get"+r+"Seconds"](),d=n["get"+r+"Milliseconds"]();return e=e.replace("MM",v(s,2)).replace("M",s).replace("yyyy",o).replace("yy",o%100).replace("dd",v(l,2)).replace("d",l).replace("hh",v(c,2)).replace("h",c).replace("mm",v(u,2)).replace("m",u).replace("ss",v(h,2)).replace("s",h).replace("SSS",v(d,3)),e}function _(e){return e?e.charAt(0).toUpperCase()+e.substr(1):e}var b=r.truncateText;function x(e){return r.getBoundingRect(e.text,e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich,e.truncate)}function w(e,t,i,n,a,o,s,l){return r.getBoundingRect(e,t,i,n,a,l,o,s)}function T(e,t){if("_blank"===t||"blank"===t){var i=window.open();i.opener=null,i.location=e}else window.open(e,t)}t.addCommas=o,t.toCamelCase=s,t.normalizeCssArray=l,t.encodeHTML=h,t.formatTpl=f,t.formatTplSimple=m,t.getTooltipMarker=g,t.formatTime=y,t.capitalFirst=_,t.truncateText=b,t.getTextBoundingRect=x,t.getTextRect=w,t.windowOpen=T},ee1a:function(e,t,i){var n=i("6d8b"),r=n.each,a=n.isString;function o(e,t,i){i=i||{};var n,o,s,l,c=i.byIndex,u=i.stackedCoordDimension,h=!(!e||!e.get("stack"));if(r(t,(function(e,i){a(e)&&(t[i]=e={name:e}),h&&!e.isExtraCoord&&(c||n||!e.ordinalMeta||(n=e),o||"ordinal"===e.type||"time"===e.type||u&&u!==e.coordDim||(o=e))})),!o||c||n||(c=!0),o){s="__\0ecstackresult",l="__\0ecstackedover",n&&(n.createInvertedIndices=!0);var d=o.coordDim,p=o.type,f=0;r(t,(function(e){e.coordDim===d&&f++})),t.push({name:s,coordDim:d,coordDimIndex:f,type:p,isExtraCoord:!0,isCalculationCoord:!0}),f++,t.push({name:l,coordDim:l,coordDimIndex:f,type:p,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:o&&o.name,stackedByDimension:n&&n.name,isStackedByIndex:c,stackedOverDimension:l,stackResultDimension:s}}function s(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function l(e,t){return s(e,t)?e.getCalculationInfo("stackResultDimension"):t}t.enableDataStack=o,t.isDimensionStacked=s,t.getStackedDimension=l},ee84:function(e,t,i){var n=i("20c8"),r=i("401b"),a=r.applyTransform,o=n.CMD,s=[[],[],[]],l=Math.sqrt,c=Math.atan2;function u(e,t){var i,n,r,u,h,d=e.data,p=o.M,f=o.C,m=o.L,g=o.R,v=o.A,y=o.Q;for(r=0,u=0;r<d.length;){switch(i=d[r++],u=r,n=0,i){case p:n=1;break;case m:n=1;break;case f:n=3;break;case y:n=2;break;case v:var _=t[4],b=t[5],x=l(t[0]*t[0]+t[1]*t[1]),w=l(t[2]*t[2]+t[3]*t[3]),T=c(-t[1]/w,t[0]/x);d[r]*=x,d[r++]+=_,d[r]*=w,d[r++]+=b,d[r++]*=x,d[r++]*=w,d[r++]+=T,d[r++]+=T,r+=2,u=r;break;case g:S[0]=d[r++],S[1]=d[r++],a(S,S,t),d[u++]=S[0],d[u++]=S[1],S[0]+=d[r++],S[1]+=d[r++],a(S,S,t),d[u++]=S[0],d[u++]=S[1]}for(h=0;h<n;h++){var S=s[h];S[0]=d[r++],S[1]=d[r++],a(S,S,t),d[u++]=S[0],d[u++]=S[1]}}}e.exports=u},ef2b:function(e,t,i){var n=i("401b"),r=n.scaleAndAdd;function a(e,t,i){for(var a=i.rect,o=a.width,s=a.height,l=[a.x+o/2,a.y+s/2],c=null==i.gravity?.1:i.gravity,u=0;u<e.length;u++){var h=e[u];h.p||(h.p=n.create(o*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),h.pp=n.clone(h.p),h.edges=null}var d=null==i.friction?.6:i.friction,p=d;return{warmUp:function(){p=.8*d},setFixed:function(t){e[t].fixed=!0},setUnfixed:function(t){e[t].fixed=!1},step:function(i){for(var a=[],o=e.length,s=0;s<t.length;s++){var u=t[s];if(!u.ignoreForceLayout){var h=u.n1,d=u.n2;n.sub(a,d.p,h.p);var f=n.len(a)-u.d,m=d.w/(h.w+d.w);isNaN(m)&&(m=0),n.normalize(a,a),!h.fixed&&r(h.p,h.p,a,m*f*p),!d.fixed&&r(d.p,d.p,a,-(1-m)*f*p)}}for(s=0;s<o;s++){var g=e[s];g.fixed||(n.sub(a,l,g.p),r(g.p,g.p,a,c*p))}for(s=0;s<o;s++){h=e[s];for(var v=s+1;v<o;v++){d=e[v];n.sub(a,d.p,h.p);f=n.len(a);0===f&&(n.set(a,Math.random()-.5,Math.random()-.5),f=1);var y=(h.rep+d.rep)/f/f;!h.fixed&&r(h.pp,h.pp,a,y),!d.fixed&&r(d.pp,d.pp,a,-y)}}var _=[];for(s=0;s<o;s++){g=e[s];g.fixed||(n.sub(_,g.p,g.pp),r(g.p,g.p,_,p),n.copy(g.pp,g.p))}p*=.992,i&&i(e,t,p<.01)}}}t.forceLayout=a},ef34:function(e,t,i){(function(t){var n,r="undefined"!==typeof t?t:"undefined"!==typeof window?window:{},a=i(4);"undefined"!==typeof document?n=document:(n=r["__GLOBAL_DOCUMENT_CACHE@4"],n||(n=r["__GLOBAL_DOCUMENT_CACHE@4"]=a)),e.exports=n}).call(this,i("c8ba"))},ef6a:function(e,t){function i(e,t,i,a,o,s){e=e||0;var l=i[1]-i[0];if(null!=o&&(o=r(o,[0,l])),null!=s&&(s=Math.max(s,null!=o?o:0)),"all"===a){var c=Math.abs(t[1]-t[0]);c=r(c,[0,l]),o=s=r(c,[o,s]),a=0}t[0]=r(t[0],i),t[1]=r(t[1],i);var u=n(t,a);t[a]+=e;var h=o||0,d=i.slice();u.sign<0?d[0]+=h:d[1]-=h,t[a]=r(t[a],d);var p=n(t,a);null!=o&&(p.sign!==u.sign||p.span<o)&&(t[1-a]=t[a]+u.sign*o);p=n(t,a);return null!=s&&p.span>s&&(t[1-a]=t[a]+p.sign*s),t}function n(e,t){var i=e[t]-e[1-t];return{span:Math.abs(i),sign:i>0?-1:i<0?1:t?-1:1}}function r(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}e.exports=i},ef97:function(e,t,i){var n=i("3eba");i("217b"),i("f17f");var r=i("7f96"),a=i("87c3"),o=i("fdde");i("01ed"),n.registerVisual(r("line","circle","line")),n.registerLayout(a("line")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,o("line"))},f080:function(e,t,i){"use strict";i("62e9")},f0b9:function(e,t,i){"use strict";function n(e){return 32+e.length}function r(){return 16}function a(e){if(!e)return 0;let t=32;for(const i in e)if(e.hasOwnProperty(i)){const a=e[i];switch(typeof a){case"string":t+=n(a);break;case"number":t+=r();break;case"boolean":t+=4}}return t}function o(e,t){return 32+e.length*t}i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o}))},f123:function(e,t,i){var n=i("9f82"),r=n.prepareDataCoordInfo,a=n.getStackedOnPoint;function o(e,t){var i=[];return t.diff(e).add((function(e){i.push({cmd:"+",idx:e})})).update((function(e,t){i.push({cmd:"=",idx:t,idx1:e})})).remove((function(e){i.push({cmd:"-",idx:e})})).execute(),i}function s(e,t,i,n,s,l,c,u){for(var h=o(e,t),d=[],p=[],f=[],m=[],g=[],v=[],y=[],_=r(s,t,c),b=r(l,e,u),x=0;x<h.length;x++){var w=h[x],T=!0;switch(w.cmd){case"=":var S=e.getItemLayout(w.idx),O=t.getItemLayout(w.idx1);(isNaN(S[0])||isNaN(S[1]))&&(S=O.slice()),d.push(S),p.push(O),f.push(i[w.idx]),m.push(n[w.idx1]),y.push(t.getRawIndex(w.idx1));break;case"+":var C=w.idx;d.push(s.dataToPoint([t.get(_.dataDimsForPoint[0],C),t.get(_.dataDimsForPoint[1],C)])),p.push(t.getItemLayout(C).slice()),f.push(a(_,s,t,C)),m.push(n[C]),y.push(t.getRawIndex(C));break;case"-":C=w.idx;var k=e.getRawIndex(C);k!==C?(d.push(e.getItemLayout(C)),p.push(l.dataToPoint([e.get(b.dataDimsForPoint[0],C),e.get(b.dataDimsForPoint[1],C)])),f.push(i[C]),m.push(a(b,l,e,C)),y.push(k)):T=!1}T&&(g.push(w),v.push(v.length))}v.sort((function(e,t){return y[e]-y[t]}));var P=[],E=[],A=[],I=[],M=[];for(x=0;x<v.length;x++){C=v[x];P[x]=d[C],E[x]=p[C],A[x]=f[C],I[x]=m[C],M[x]=g[C]}return{current:P,next:E,stackedOnCurrent:A,stackedOnNext:I,status:M}}e.exports=s},f14c:function(e,t,i){var n=i("84d5"),r=i("f934"),a=r.mergeLayoutParam,o=r.getLayoutParams,s=n.extend({type:"legend.scroll",setScrollDataIndex:function(e){this.option.scrollDataIndex=e},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(e,t,i,n){var r=o(e);s.superCall(this,"init",e,t,i,n),l(this,e,r)},mergeOption:function(e,t){s.superCall(this,"mergeOption",e,t),l(this,this.option,e)}});function l(e,t,i){var n=e.getOrient(),r=[1,1];r[n.index]=0,a(t,i,{type:"box",ignoreSize:r})}var c=s;e.exports=c},f16b:function(e,t,i){"use strict";i("6569")},f17f:function(e,t,i){var n=i("4e08"),r=(n.__DEV__,i("6d8b")),a=i("e263"),o=a.fromPoints,s=i("f706"),l=i("1418"),c=i("f123"),u=i("2306"),h=i("e0d3"),d=i("d4d1"),p=d.Polyline,f=d.Polygon,m=i("e887"),g=i("9f82"),v=g.prepareDataCoordInfo,y=g.getStackedOnPoint,_=i("b0af"),b=_.createGridClipPath,x=_.createPolarClipPath;function w(e,t){if(e.length===t.length){for(var i=0;i<e.length;i++){var n=e[i],r=t[i];if(n[0]!==r[0]||n[1]!==r[1])return}return!0}}function T(e,t){var i=[],n=[],r=[],a=[];return o(e,i,n),o(t,r,a),Math.max(Math.abs(i[0]-r[0]),Math.abs(i[1]-r[1]),Math.abs(n[0]-a[0]),Math.abs(n[1]-a[1]))}function S(e){return"number"===typeof e?e:e?.5:0}function O(e,t,i){if(!i.valueDim)return[];for(var n=[],r=0,a=t.count();r<a;r++)n.push(y(i,e,t,r));return n}function C(e,t,i){for(var n=t.getBaseAxis(),r="x"===n.dim||"radius"===n.dim?0:1,a=[],o=0;o<e.length-1;o++){var s=e[o+1],l=e[o];a.push(l);var c=[];switch(i){case"end":c[r]=s[r],c[1-r]=l[1-r],a.push(c);break;case"middle":var u=(l[r]+s[r])/2,h=[];c[r]=h[r]=u,c[1-r]=l[1-r],h[1-r]=s[1-r],a.push(c),a.push(h);break;default:c[r]=l[r],c[1-r]=s[1-r],a.push(c)}}return e[o]&&a.push(e[o]),a}function k(e,t){var i=e.getVisual("visualMeta");if(i&&i.length&&e.count()&&"cartesian2d"===t.type){for(var n,a,o=i.length-1;o>=0;o--){var s=i[o].dimension,l=e.dimensions[s],c=e.getDimensionInfo(l);if(n=c&&c.coordDim,"x"===n||"y"===n){a=i[o];break}}if(a){var h=t.getAxis(n),d=r.map(a.stops,(function(e){return{coord:h.toGlobalCoord(h.dataToCoord(e.value)),color:e.color}})),p=d.length,f=a.outerColors.slice();p&&d[0].coord>d[p-1].coord&&(d.reverse(),f.reverse());var m=10,g=d[0].coord-m,v=d[p-1].coord+m,y=v-g;if(y<.001)return"transparent";r.each(d,(function(e){e.offset=(e.coord-g)/y})),d.push({offset:p?d[p-1].offset:.5,color:f[1]||"transparent"}),d.unshift({offset:p?d[0].offset:.5,color:f[0]||"transparent"});var _=new u.LinearGradient(0,0,0,0,d,!0);return _[n]=g,_[n+"2"]=v,_}}}function P(e,t,i){var n=e.get("showAllSymbol"),a="auto"===n;if(!n||a){var o=i.getAxesByScale("ordinal")[0];if(o&&(!a||!E(o,t))){var s=t.mapDimension(o.dim),l={};return r.each(o.getViewLabels(),(function(e){l[e.tickValue]=1})),function(e){return!l.hasOwnProperty(t.get(s,e))}}}}function E(e,t){var i=e.getExtent(),n=Math.abs(i[1]-i[0])/e.scale.count();isNaN(n)&&(n=0);for(var r=t.count(),a=Math.max(1,Math.round(r/5)),o=0;o<r;o+=a)if(1.5*l.getSymbolSize(t,o)[e.isHorizontal()?1:0]>n)return!1;return!0}function A(e,t,i){if("cartesian2d"===e.type){var n=e.getBaseAxis().isHorizontal(),r=b(e,t,i);if(!i.get("clip",!0)){var a=r.shape,o=Math.max(a.width,a.height);n?(a.y-=o,a.height+=2*o):(a.x-=o,a.width+=2*o)}return r}return x(e,t,i)}var I=m.extend({type:"line",init:function(){var e=new u.Group,t=new s;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e},render:function(e,t,i){var n=e.coordinateSystem,a=this.group,o=e.getData(),s=e.getModel("lineStyle"),l=e.getModel("areaStyle"),c=o.mapArray(o.getItemLayout),u="polar"===n.type,h=this._coordSys,d=this._symbolDraw,p=this._polyline,f=this._polygon,m=this._lineGroup,g=e.get("animation"),y=!l.isEmpty(),_=l.get("origin"),b=v(n,o,_),x=O(n,o,b),T=e.get("showSymbol"),E=T&&!u&&P(e,o,n),I=this._data;I&&I.eachItemGraphicEl((function(e,t){e.__temp&&(a.remove(e),I.setItemGraphicEl(t,null))})),T||d.remove(),a.add(m);var M,D=!u&&e.get("step");n&&n.getArea&&e.get("clip",!0)&&(M=n.getArea(),null!=M.width?(M.x-=.1,M.y-=.1,M.width+=.2,M.height+=.2):M.r0&&(M.r0-=.5,M.r1+=.5)),this._clipShapeForSymbol=M,p&&h.type===n.type&&D===this._step?(y&&!f?f=this._newPolygon(c,x,n,g):f&&!y&&(m.remove(f),f=this._polygon=null),m.setClipPath(A(n,!1,e)),T&&d.updateData(o,{isIgnore:E,clipShape:M}),o.eachItemGraphicEl((function(e){e.stopAnimation(!0)})),w(this._stackedOnPoints,x)&&w(this._points,c)||(g?this._updateAnimation(o,x,n,i,D,_):(D&&(c=C(c,n,D),x=C(x,n,D)),p.setShape({points:c}),f&&f.setShape({points:c,stackedOnPoints:x})))):(T&&d.updateData(o,{isIgnore:E,clipShape:M}),D&&(c=C(c,n,D),x=C(x,n,D)),p=this._newPolyline(c,n,g),y&&(f=this._newPolygon(c,x,n,g)),m.setClipPath(A(n,!0,e)));var j=k(o,n)||o.getVisual("color");p.useStyle(r.defaults(s.getLineStyle(),{fill:"none",stroke:j,lineJoin:"bevel"}));var L=e.get("smooth");if(L=S(e.get("smooth")),p.setShape({smooth:L,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")}),f){var R=o.getCalculationInfo("stackedOnSeries"),N=0;f.useStyle(r.defaults(l.getAreaStyle(),{fill:j,opacity:.7,lineJoin:"bevel"})),R&&(N=S(R.get("smooth"))),f.setShape({smooth:L,stackedOnSmooth:N,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")})}this._data=o,this._coordSys=n,this._stackedOnPoints=x,this._points=c,this._step=D,this._valueOrigin=_},dispose:function(){},highlight:function(e,t,i,n){var r=e.getData(),a=h.queryDataIndex(r,n);if(!(a instanceof Array)&&null!=a&&a>=0){var o=r.getItemGraphicEl(a);if(!o){var s=r.getItemLayout(a);if(!s)return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(s[0],s[1]))return;o=new l(r,a),o.position=s,o.setZ(e.get("zlevel"),e.get("z")),o.ignore=isNaN(s[0])||isNaN(s[1]),o.__temp=!0,r.setItemGraphicEl(a,o),o.stopSymbolAnimation(!0),this.group.add(o)}o.highlight()}else m.prototype.highlight.call(this,e,t,i,n)},downplay:function(e,t,i,n){var r=e.getData(),a=h.queryDataIndex(r,n);if(null!=a&&a>=0){var o=r.getItemGraphicEl(a);o&&(o.__temp?(r.setItemGraphicEl(a,null),this.group.remove(o)):o.downplay())}else m.prototype.downplay.call(this,e,t,i,n)},_newPolyline:function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new p({shape:{points:e},silent:!0,z2:10}),this._lineGroup.add(t),this._polyline=t,t},_newPolygon:function(e,t){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new f({shape:{points:e,stackedOnPoints:t},silent:!0}),this._lineGroup.add(i),this._polygon=i,i},_updateAnimation:function(e,t,i,n,r,a){var o=this._polyline,s=this._polygon,l=e.hostModel,h=c(this._data,e,this._stackedOnPoints,t,this._coordSys,i,this._valueOrigin,a),d=h.current,p=h.stackedOnCurrent,f=h.next,m=h.stackedOnNext;if(r&&(d=C(h.current,i,r),p=C(h.stackedOnCurrent,i,r),f=C(h.next,i,r),m=C(h.stackedOnNext,i,r)),T(d,f)>3e3||s&&T(p,m)>3e3)return o.setShape({points:f}),void(s&&s.setShape({points:f,stackedOnPoints:m}));o.shape.__points=h.current,o.shape.points=d,u.updateProps(o,{shape:{points:f}},l),s&&(s.setShape({points:d,stackedOnPoints:p}),u.updateProps(s,{shape:{points:f,stackedOnPoints:m}},l));for(var g=[],v=h.status,y=0;y<v.length;y++){var _=v[y].cmd;if("="===_){var b=e.getItemGraphicEl(v[y].idx1);b&&g.push({el:b,ptIdx:y})}}o.animators&&o.animators.length&&o.animators[0].during((function(){for(var e=0;e<g.length;e++){var t=g[e].el;t.attr("position",o.shape.__points[g[e].ptIdx])}}))},remove:function(e){var t=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl((function(e,n){e.__temp&&(t.remove(e),i.setItemGraphicEl(n,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});e.exports=I},f219:function(e,t){var i="#eee",n=function(){return{axisLine:{lineStyle:{color:i}},axisTick:{lineStyle:{color:i}},axisLabel:{textStyle:{color:i}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:i}}}},r=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],a={color:r,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:i},crossStyle:{color:i},label:{color:"#000"}}},legend:{textStyle:{color:i}},textStyle:{color:i},title:{textStyle:{color:i}},toolbox:{iconStyle:{normal:{borderColor:i}}},dataZoom:{textStyle:{color:i}},visualMap:{textStyle:{color:i}},timeline:{lineStyle:{color:i},itemStyle:{normal:{color:r[1]}},label:{normal:{textStyle:{color:i}}},controlStyle:{normal:{color:i,borderColor:i}}},timeAxis:n(),logAxis:n(),valueAxis:n(),categoryAxis:n(),line:{symbol:"circle"},graph:{color:r},gauge:{title:{textStyle:{color:i}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};a.categoryAxis.splitLine.show=!1;var o=a;e.exports=o},f273:function(e,t,i){var n=i("6d8b"),r=i("2306"),a=i("fab2"),o=i("6679"),s=i("0156"),l=i("58df"),c=l.rectCoordAxisBuildSplitArea,u=l.rectCoordAxisHandleRemove,h=["axisLine","axisTickLabel","axisName"],d=["splitArea","splitLine","minorSplitLine"],p=o.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(e,t,i,o){this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new r.Group,this.group.add(this._axisGroup),e.get("show")){var c=e.getCoordSysModel(),u=s.layout(c,e),f=new a(e,u);n.each(h,f.add,f),this._axisGroup.add(f.getGroup()),n.each(d,(function(t){e.get(t+".show")&&this["_"+t](e,c)}),this),r.groupTransition(l,this._axisGroup,e),p.superCall(this,"render",e,t,i,o)}},remove:function(){u(this)},_splitLine:function(e,t){var i=e.axis;if(!i.scale.isBlank()){var a=e.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=n.isArray(s)?s:[s];for(var l=t.coordinateSystem.getRect(),c=i.isHorizontal(),u=0,h=i.getTicksCoords({tickModel:a}),d=[],p=[],f=o.getLineStyle(),m=0;m<h.length;m++){var g=i.toGlobalCoord(h[m].coord);c?(d[0]=g,d[1]=l.y,p[0]=g,p[1]=l.y+l.height):(d[0]=l.x,d[1]=g,p[0]=l.x+l.width,p[1]=g);var v=u++%s.length,y=h[m].tickValue;this._axisGroup.add(new r.Line({anid:null!=y?"line_"+h[m].tickValue:null,subPixelOptimize:!0,shape:{x1:d[0],y1:d[1],x2:p[0],y2:p[1]},style:n.defaults({stroke:s[v]},f),silent:!0}))}}},_minorSplitLine:function(e,t){var i=e.axis,n=e.getModel("minorSplitLine"),a=n.getModel("lineStyle"),o=t.coordinateSystem.getRect(),s=i.isHorizontal(),l=i.getMinorTicksCoords();if(l.length)for(var c=[],u=[],h=a.getLineStyle(),d=0;d<l.length;d++)for(var p=0;p<l[d].length;p++){var f=i.toGlobalCoord(l[d][p].coord);s?(c[0]=f,c[1]=o.y,u[0]=f,u[1]=o.y+o.height):(c[0]=o.x,c[1]=f,u[0]=o.x+o.width,u[1]=f),this._axisGroup.add(new r.Line({anid:"minor_line_"+l[d][p].tickValue,subPixelOptimize:!0,shape:{x1:c[0],y1:c[1],x2:u[0],y2:u[1]},style:h,silent:!0}))}},_splitArea:function(e,t){c(this,this._axisGroup,e,t)}});p.extend({type:"xAxis"}),p.extend({type:"yAxis"})},f279:function(e,t,i){var n=i("9850"),r=i("e263"),a=i("401b"),o=i("0655");function s(e,t,i){if(this.name=e,this.geometries=t,i)i=[i[0],i[1]];else{var n=this.getBoundingRect();i=[n.x+n.width/2,n.y+n.height/2]}this.center=i}s.prototype={constructor:s,properties:null,getBoundingRect:function(){var e=this._rect;if(e)return e;for(var t=Number.MAX_VALUE,i=[t,t],o=[-t,-t],s=[],l=[],c=this.geometries,u=0;u<c.length;u++)if("polygon"===c[u].type){var h=c[u].exterior;r.fromPoints(h,s,l),a.min(i,i,s),a.max(o,o,l)}return 0===u&&(i[0]=i[1]=o[0]=o[1]=0),this._rect=new n(i[0],i[1],o[0]-i[0],o[1]-i[1])},contain:function(e){var t=this.getBoundingRect(),i=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var n=0,r=i.length;n<r;n++)if("polygon"===i[n].type){var a=i[n].exterior,s=i[n].interiors;if(o.contain(a,e[0],e[1])){for(var l=0;l<(s?s.length:0);l++)if(o.contain(s[l]))continue e;return!0}}return!1},transformTo:function(e,t,i,r){var o=this.getBoundingRect(),s=o.width/o.height;i?r||(r=i/s):i=s*r;for(var l=new n(e,t,i,r),c=o.calculateTransform(l),u=this.geometries,h=0;h<u.length;h++)if("polygon"===u[h].type){for(var d=u[h].exterior,p=u[h].interiors,f=0;f<d.length;f++)a.applyTransform(d[f],d[f],c);for(var m=0;m<(p?p.length:0);m++)for(f=0;f<p[m].length;f++)a.applyTransform(p[m][f],p[m][f],c)}o=this._rect,o.copy(l),this.center=[o.x+o.width/2,o.y+o.height/2]},cloneShallow:function(e){null==e&&(e=this.name);var t=new s(e,this.geometries,this.center);return t._rect=this._rect,t.transformTo=null,t}};var l=s;e.exports=l},f38b:function(e,t,i){"use strict";i("0e3a")},f408:function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return p})),i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return l})),i.d(t,"e",(function(){return s})),i.d(t,"f",(function(){return h})),i.d(t,"g",(function(){return c}));var n=i("b2b2"),r=i("8076");function a(e,t){return Object(n["j"])(t)||!t.mode?e?"absolute-height":"on-the-ground":t.mode}function o(e,t){return a(!!Object(n["k"])(e)&&e.hasZ,t)}function s(e){const t=u(e);return o(e.geometry,t)}function l(e){const t=u(e),i=o(e.geometry,t);return{mode:i,offset:Object(n["k"])(t)&&"on-the-ground"!==i?Object(n["r"])(t.offset,0)*Object(r["a"])(Object(n["r"])(t.unit,"meters")):0}}function c(e){if("on-the-ground"===s(e))return!1;const t=u(e),i=Object(n["k"])(t)&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!i||"0"===i)}function u(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function h(e,t,i){if(Object(n["j"])(i)||!i.mode)return;const r=e.hasZ?e.z:0,a=Object(n["k"])(i.offset)?i.offset:0;switch(i.mode){case"absolute-height":return r-a;case"on-the-ground":return 0;case"relative-to-ground":return r-(Object(n["r"])(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"ground"),0)+a);case"relative-to-scene":return r-(Object(n["r"])(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"scene"),0)+a)}}function d(e,t,i,n=null){return f(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,i,n)}function p(e,t,i,n,r=null){return f(e,t[0],t[1],t.length>2?t[2]:0,i,n,r)}function f(e,t,i,r,a,o,s=null){if(Object(n["j"])(o))return;const l=Object(n["k"])(s)?s.mode:"absolute-height";return"on-the-ground"===l?0:g(m(t,i,r,a,e,o),t,i,r,a,e,s,l)}function m(e,t,i,r,a,o){const s=Object(n["k"])(o.offset)?o.offset:0;switch(o.mode){case"absolute-height":return i+s;case"on-the-ground":return Object(n["r"])(a.elevationProvider.getElevation(e,t,0,r,"ground"),0);case"relative-to-ground":return i+Object(n["r"])(a.elevationProvider.getElevation(e,t,i,r,"ground"),0)+s;case"relative-to-scene":return i+Object(n["r"])(a.elevationProvider.getElevation(e,t,i,r,"scene"),0)+s}}function g(e,t,i,r,a,o,s,l){const c=Object(n["k"])(s)&&Object(n["k"])(s.offset)?s.offset:0;switch(l){case"absolute-height":return e-c;case"relative-to-ground":return e-(Object(n["r"])(o.elevationProvider.getElevation(t,i,r,a,"ground"),0)+c);case"relative-to-scene":return e-(Object(n["r"])(o.elevationProvider.getElevation(t,i,r,a,"scene"),0)+c)}}},f423:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAA4CAYAAAC/pKvXAAAJRUlEQVRogb2aCXBV5RXHfzcEAwmhQhKGZYQqBSuIvvKguHSjlKUMS5WALLIotlgIYGUkBAqOndbaEgVMIztlc8FRFOm0EJbiFEpIcuVqi7KEJUFQSAEJSSCE5HXOu/e+d+9b8u5LXvjP3OR++/m/77vnO+d8n0KM4HG57wQeAlxAV6ALkAy0NkaoACqBM8Ap4DPgoKKpZbGQoFFEPC53GjAWeBLo28D+NOAtYLOiqV81VJYGEfG43PKLvwA8BdxhK7yjOXS5S3/atIHEJPB4oLISrlyC06VQcg7qagO7lYzNwB8VTT3WpEQ8LrcslUXAc0C8r6Drt2HwQOjbD3r2hObN6+/oxg3QDkNBAezIg68uWEvrgOXAAkVTr8aciMfl7g9sAjp5M+LiYNBPYfwE6NXLaTchOq6DQ4dg4yY4WGAtEXaTFE3Nc9JNRCIel1sxZkGeOG/mQ33g+eehW/eGEwgFVYXsV+Hocd/wwB9kbEVTPQ0m4nG5Zf2vAiZ7MxJbwtw5MPIXsSVgRW0tbFgPb6zS33W8DUxRNPVmuGZhiXhc7mbAVmCEN+OeLpC9GO6+p+lIWPGJCvOyoOyymbkdGKVoak2o6iGJGMtpnfwK3owHe8KSpboWup0oLYGMmXD2vDnoRmNmgpZZXBix5vhI9LgX/pJ7+0kIOneBFcuhfTszZxKQGapq0Ix4XO4fAPuAZnRsD+vXQ2pbXbNcudJ44bp3h67fia7NyWKY8jRUVGHsNz9RNHW/tYqNiMflTgD+A3SjWTNYuxIedMH778HvX2k8CUFcM9i+FTp2iq7djr9D1iIzVQzcr2hqta/bgOqZXhKCaU/rJATnzjVKdhtkR794Mfp2Q4bC8J+bKZnSudZiHxGPy53qKxTzYtKUGEkeQ8yaDcnJZn+Zhsx2IsBvgCTv24xnISGhfgFkxg4X6c+i+fayvB16fmE+3NctdkRSU+GpJ82UyDrLTHiJGBvfs94csZsGDIzcaUqq/z01zV6WZpTFx0PbGGu70WMgOclMzTBk983IMKCt9y19lG5HRcKtW/4KNdX2yjWWPasmyMptHFolw4hhZhci81AsFuxY71/RVAMHORtn+Wo4YGjA4yftZZMmQkpbuHkTCrXYEhEMGQJvbjFT44EP441dvL83q3cvSElx1pn4F0eO6u/XKu1l4nN8fdFqK8UW9/eCtBQouyTd9hcOsoY6yCr3DtT3+87Hm/4r+Ode/fndQnvZrh16/sf7oNd9TUPm4X7mm8jeIc7nXwh69HDeUevW/vfkb9nLko0yRYHWydSLQ/kwZTK88rL9u4sEceD86CTfiF/ldO7svCPx8kxUX7eXVd+AhBZGveqgpj5cK4cFC+HSFfj0iG5ZPzHW2fh2WdOEiF8/RmM25K6AvF26kXOm1F6Wnq4bmULixKnwfaxdq5MwsXwVDBrszEDt0MGaulOWVkvva8IdutZyCgkolJfD1XKorbM3EgKSf70qfGdnTsPmd+x50mbNamcCJCbZUkJE38ITWzonIciYBtu26c+LC+xlHxn52/8G33sgdPtly0JrtXfeh+ITkcdPTLSmEoSI/oVVh/UiQ6OFpaOWSfYqLS1liS3sZXd11N2BffsJCTEqly6JPP5123d5S4jo23DVdT2i4RSVFf6KldfsjSos6YqA5ZUxHXLf8Kdffkm3y9QCaG/onQMFuvqul4it3xr52P2xowsXoH2HUM2CkbMSNmw2iAQIO3ioHqir9cA1C6l+veHSZTh5xp9XZ/x4YhZZNdyyHHjk0fDGq90VuCoz4vPuKS0N1SQ0ZAl8U64/NQH6X2ZX8q0kRNCpv9RNm8C6Jsots1xyFt59O/z4JSXW1GUh4vPsOfaFcyLRYtRI2LvbTk5gpmXN1wUs7RXroOx/oQc6apP1vBA5awTCoKCoYUKmtoHMOTB/LjwzObhcnKHBg+DdD4LLKirs/62oqoIVuaHHPFRovonsZ+MVTa3yuNxF3mh64Sd6h61aRUfk3m4wdpxfoDUb7OXTpsKatcG/uGDLe1ByBkq/DN331u3weLrdJDlVDKU+97tIOJiOx3bvX1HBe3ZHRyISJLDXLg3yw8x2+mOQ/Rq8mq1vyqGw5DV9Azaxc6e1kld2k8hb/l9ga2yJZMyAnDDLQ+DuoxuXEsOS8FMoqJ/q7rNAfJwPPrJWetNHRNFU8Yz2eLM/+1y3SGOBHz0CX5ZaI4XBWLkS8g/C6pW6HxMOr+fqJLZ9aPohgj2KpnqNuXhLs2xggPctN1f3TWTTW/xnOBJBmx07AfOMAGCtRRXPng05OfW3/fwY/Hpm5F/t/Ndw4jis+6s1d7H5EhigE7vhUW9iQSa4XDB6XORBQiGlDezepbvDWQuD1W60GDwA2rWDTb69Zb+iqT8MR0QOM//tzW+VCJs3QJe7GydArFBUCNMyzCM7+fL7KZrq08G2cImiqfJx6F+m2EhZ86GqsknkigplZfDbRdZzx9etJIKIGJgnK9f7+sUJyMyMzgWNNcRHmTUTLvhOsSU2nRU4ShARRVNlCtLF8vFm7M+HrEyorsdlbSp8cxWemwVHi80BrhiHPdcDRwwZiVM0VdTUSJ+Jv/tjmJkBl2NwrOAUZ0vhmamg/ddsIMIPVzQ1pNcVNqSoaKqckTxudACFh2HCBP3AsqmRtxMmTLSa++InDFM09UBYeSOJ5HG5RcWJtadH7sQcf2w4zMiI/SnW+XO6qbL3X9ZcuQ0xQtHUei1aR+fsHpdbdPAW45qGDgkkP5EOY8b5g9YNhSyjTRth2z/gpu1blFUx3snVjmguDMh1hgWGVvO7bRJ5+fHD8LNB0KcvpKXV248PInxhIezMg6LDgZZxuXGun6NoqiP/O+q7KMY9FDnEHxOyvRwSde+qB9DEHUgyXALx40WVnj4Nxad0kyMYEvUTG+QlRVMvhKoQMyIWQhLUnW6ctLZ20KQ+nAbWA6sbekOo0fe1PC53K+PILivACHUC2WlfBP6kaGqjQvexvHjmMq5afNdhE3EJRxtmUaPh4GjKGRRN1Qyt5sQzOwj0iRUJYkkEnYxEEEYDS+upJq7pgGg/5ohjx7IzKzwud7ZxFcQK2YsmhrsY0xjEdEYC8ILxzZjIMy6SxZwETTkj6LMiIf58Qz33VjT1NlqdMYbH5X7A43I7OLhvBID/A/FF8mIuZVkCAAAAAElFTkSuQmCC"},f470:function(e,t,i){"use strict";i("afdf")},f47d:function(e,t,i){var n=i("6d8b"),r=(n.assert,n.isArray),a=i("4e08");a.__DEV__;function o(e){return new s(e)}function s(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0,this.context}var l=s.prototype;l.perform=function(e){var t,i=this._upstream,n=e&&e.skip;if(this._dirty&&i){var a=this.context;a.data=a.outputData=i.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!n&&(t=this._plan(this.context));var o,s=p(this._modBy),l=this._modDataCount||0,c=p(e&&e.modBy),d=e&&e.modDataCount||0;function p(e){return!(e>=1)&&(e=1),e}s===c&&l===d||(t="reset"),(this._dirty||"reset"===t)&&(this._dirty=!1,o=h(this,n)),this._modBy=c,this._modDataCount=d;var f=e&&e.step;if(this._dueEnd=i?i._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var m=this._dueIndex,g=Math.min(null!=f?this._dueIndex+f:1/0,this._dueEnd);if(!n&&(o||m<g)){var v=this._progress;if(r(v))for(var y=0;y<v.length;y++)u(this,v[y],m,g,c,d);else u(this,v,m,g,c,d)}this._dueIndex=g;var _=null!=this._settedOutputEnd?this._settedOutputEnd:g;this._outputDueEnd=_}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var c=function(){var e,t,i,n,r,a={reset:function(l,c,u,h){t=l,e=c,i=u,n=h,r=Math.ceil(n/i),a.next=i>1&&n>0?s:o}};return a;function o(){return t<e?t++:null}function s(){var a=t%r*i+Math.ceil(t/r),o=t>=e?null:a<n?a:t;return t++,o}}();function u(e,t,i,n,r,a){c.reset(i,n,r,a),e._callingProgress=t,e._callingProgress({start:i,end:n,count:n-i,next:c.next},e.context)}function h(e,t){var i,n;e._dueIndex=e._outputDueEnd=e._dueEnd=0,e._settedOutputEnd=null,!t&&e._reset&&(i=e._reset(e.context),i&&i.progress&&(n=i.forceFirstProgress,i=i.progress),r(i)&&!i.length&&(i=null)),e._progress=i,e._modBy=e._modDataCount=null;var a=e._downstream;return a&&a.dirty(),n}l.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},l.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},l.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},l.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},l.getUpstream=function(){return this._upstream},l.getDownstream=function(){return this._downstream},l.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},t.createTask=o},f499:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"floating-panel-layer"},e._l(e.floatingList,(function(e){return i("stick-panel",{key:e.id,attrs:{data:e.data,id:e.id,myStyle:e.style}})})),1)},r=[],a=i("2f62"),o=i("83b8");function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var u={name:"FloatingPanelLayer",components:{StickPanel:o["default"]},data:function(){return{}},computed:l({},Object(a["b"])(["floatingList"])),mounted:function(){},methods:{}},h=u,d=(i("5d85"),i("2877")),p=Object(d["a"])(h,n,r,!1,null,null,null);t["default"]=p.exports},f53a:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=e,this.view.watch("ready",e=>{this._resourcesCreated&&(e?this._createResources():this._destroyResources())})}applyProps(e){let t=!1;for(const i in e)i in this?"attached"===i?t=e[i]:this[i]=e[i]:console.error("Cannot set unknown property",i);this.attached=t}destroy(){this.attached=!1}get attached(){return this._attached}set attached(e){e!==this._attached&&this.view._stage&&(this._attached=e,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources())}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this.attached&&this.updateVisibility(e))}_createResources(){this.createResources(),this._resourcesCreated=!0,this.visible||this.updateVisibility(!1)}_destroyResources(){this.destroyResources(),this._resourcesCreated=!1}}},f706:function(e,t,i){var n=i("2306"),r=i("1418"),a=i("6d8b"),o=a.isObject;function s(e){this.group=new n.Group,this._symbolCtor=e||r}var l=s.prototype;function c(e,t,i,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(i))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&"none"!==e.getItemVisual(i,"symbol")}function u(e){return null==e||o(e)||(e={isIgnore:e}),e||{}}function h(e){var t=e.hostModel;return{itemStyle:t.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:t.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label"),cursorStyle:t.get("cursor")}}l.updateData=function(e,t){t=u(t);var i=this.group,r=e.hostModel,a=this._data,o=this._symbolCtor,s=h(e);a||i.removeAll(),e.diff(a).add((function(n){var r=e.getItemLayout(n);if(c(e,r,n,t)){var a=new o(e,n,s);a.attr("position",r),e.setItemGraphicEl(n,a),i.add(a)}})).update((function(l,u){var h=a.getItemGraphicEl(u),d=e.getItemLayout(l);c(e,d,l,t)?(h?(h.updateData(e,l,s),n.updateProps(h,{position:d},r)):(h=new o(e,l),h.attr("position",d)),i.add(h),e.setItemGraphicEl(l,h)):i.remove(h)})).remove((function(e){var t=a.getItemGraphicEl(e);t&&t.fadeOut((function(){i.remove(t)}))})).execute(),this._data=e},l.isPersistent=function(){return!0},l.updateLayout=function(){var e=this._data;e&&e.eachItemGraphicEl((function(t,i){var n=e.getItemLayout(i);t.attr("position",n)}))},l.incrementalPrepareUpdate=function(e){this._seriesScope=h(e),this._data=null,this.group.removeAll()},l.incrementalUpdate=function(e,t,i){function n(e){e.isGroup||(e.incremental=e.useHoverLayer=!0)}i=u(i);for(var r=e.start;r<e.end;r++){var a=t.getItemLayout(r);if(c(t,a,r,i)){var o=new this._symbolCtor(t,r,this._seriesScope);o.traverse(n),o.attr("position",a),this.group.add(o),t.setItemGraphicEl(r,o)}}},l.remove=function(e){var t=this.group,i=this._data;i&&e?i.eachItemGraphicEl((function(e){e.fadeOut((function(){t.remove(e)}))})):t.removeAll()};var d=s;e.exports=d},f707:function(e,t,i){e.exports=i.p+"img/ico-full.4ceecbe0.svg"},f7c6:function(e,t,i){var n=i("3eba"),r=i("e46b"),a=i("6d8b"),o=i("e0d3"),s=i("3842"),l=s.getPercentWithPrecision,c=i("7023"),u=i("2b17"),h=u.retrieveRawAttr,d=i("0f99"),p=d.makeSeriesEncodeForNameBased,f=i("c4a3"),m=n.extendSeriesModel({type:"series.pie",init:function(e){m.superApply(this,"init",arguments),this.legendVisualProvider=new f(a.bind(this.getData,this),a.bind(this.getRawData,this)),this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(e)},mergeOption:function(e){m.superCall(this,"mergeOption",e),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(e,t){return r(this,{coordDimensions:["value"],encodeDefaulter:a.curry(p,this)})},_createSelectableList:function(){for(var e=this.getRawData(),t=e.mapDimension("value"),i=[],n=0,r=e.count();n<r;n++)i.push({name:e.getName(n),value:e.get(t,n),selected:h(e,n,"selected")});return i},getDataParams:function(e){var t=this.getData(),i=m.superCall(this,"getDataParams",e),n=[];return t.each(t.mapDimension("value"),(function(e){n.push(e)})),i.percent=l(n,e,t.hostModel.get("percentPrecision")),i.$vars.push("percent"),i},_defaultLabelLine:function(e){o.defaultEmphasis(e,"labelLine",["show"]);var t=e.labelLine,i=e.emphasis.labelLine;t.show=t.show&&e.label.show,i.show=i.show&&e.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:!1,show:!0,position:"outer",alignTo:"none",margin:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});a.mixin(m,c);var g=m;e.exports=g},f934:function(e,t,i){var n=i("6d8b"),r=i("9850"),a=i("3842"),o=a.parsePercent,s=i("eda2"),l=n.each,c=["left","right","top","bottom","width","height"],u=[["width","left","right"],["height","top","bottom"]];function h(e,t,i,n,r){var a=0,o=0;null==n&&(n=1/0),null==r&&(r=1/0);var s=0;t.eachChild((function(l,c){var u,h,d=l.position,p=l.getBoundingRect(),f=t.childAt(c+1),m=f&&f.getBoundingRect();if("horizontal"===e){var g=p.width+(m?-m.x+p.x:0);u=a+g,u>n||l.newline?(a=0,u=g,o+=s+i,s=p.height):s=Math.max(s,p.height)}else{var v=p.height+(m?-m.y+p.y:0);h=o+v,h>r||l.newline?(a+=s+i,o=0,h=v,s=p.width):s=Math.max(s,p.width)}l.newline||(d[0]=a,d[1]=o,"horizontal"===e?a=u+i:o=h+i)}))}var d=h,p=n.curry(h,"vertical"),f=n.curry(h,"horizontal");function m(e,t,i){var n=t.width,r=t.height,a=o(e.x,n),l=o(e.y,r),c=o(e.x2,n),u=o(e.y2,r);return(isNaN(a)||isNaN(parseFloat(e.x)))&&(a=0),(isNaN(c)||isNaN(parseFloat(e.x2)))&&(c=n),(isNaN(l)||isNaN(parseFloat(e.y)))&&(l=0),(isNaN(u)||isNaN(parseFloat(e.y2)))&&(u=r),i=s.normalizeCssArray(i||0),{width:Math.max(c-a-i[1]-i[3],0),height:Math.max(u-l-i[0]-i[2],0)}}function g(e,t,i){i=s.normalizeCssArray(i||0);var n=t.width,a=t.height,l=o(e.left,n),c=o(e.top,a),u=o(e.right,n),h=o(e.bottom,a),d=o(e.width,n),p=o(e.height,a),f=i[2]+i[0],m=i[1]+i[3],g=e.aspect;switch(isNaN(d)&&(d=n-u-m-l),isNaN(p)&&(p=a-h-f-c),null!=g&&(isNaN(d)&&isNaN(p)&&(g>n/a?d=.8*n:p=.8*a),isNaN(d)&&(d=g*p),isNaN(p)&&(p=d/g)),isNaN(l)&&(l=n-u-d-m),isNaN(c)&&(c=a-h-p-f),e.left||e.right){case"center":l=n/2-d/2-i[3];break;case"right":l=n-d-m;break}switch(e.top||e.bottom){case"middle":case"center":c=a/2-p/2-i[0];break;case"bottom":c=a-p-f;break}l=l||0,c=c||0,isNaN(d)&&(d=n-m-l-(u||0)),isNaN(p)&&(p=a-f-c-(h||0));var v=new r(l+i[3],c+i[0],d,p);return v.margin=i,v}function v(e,t,i,a,o){var s=!o||!o.hv||o.hv[0],l=!o||!o.hv||o.hv[1],c=o&&o.boundingMode||"all";if(s||l){var u;if("raw"===c)u="group"===e.type?new r(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(u=e.getBoundingRect(),e.needLocalTransform()){var h=e.getLocalTransform();u=u.clone(),u.applyTransform(h)}t=g(n.defaults({width:u.width,height:u.height},t),i,a);var d=e.position,p=s?t.x-u.x:0,f=l?t.y-u.y:0;e.attr("position","raw"===c?[p,f]:[d[0]+p,d[1]+f])}}function y(e,t){return null!=e[u[t][0]]||null!=e[u[t][1]]&&null!=e[u[t][2]]}function _(e,t,i){!n.isObject(i)&&(i={});var r=i.ignoreSize;!n.isArray(r)&&(r=[r,r]);var a=s(u[0],0),o=s(u[1],1);function s(i,n){var a={},o=0,s={},u=0,d=2;if(l(i,(function(t){s[t]=e[t]})),l(i,(function(e){c(t,e)&&(a[e]=s[e]=t[e]),h(a,e)&&o++,h(s,e)&&u++})),r[n])return h(t,i[1])?s[i[2]]=null:h(t,i[2])&&(s[i[1]]=null),s;if(u!==d&&o){if(o>=d)return a;for(var p=0;p<i.length;p++){var f=i[p];if(!c(a,f)&&c(e,f)){a[f]=e[f];break}}return a}return s}function c(e,t){return e.hasOwnProperty(t)}function h(e,t){return null!=e[t]&&"auto"!==e[t]}function d(e,t,i){l(e,(function(e){t[e]=i[e]}))}d(u[0],e,a),d(u[1],e,o)}function b(e){return x({},e)}function x(e,t){return t&&e&&l(c,(function(i){t.hasOwnProperty(i)&&(e[i]=t[i])})),e}t.LOCATION_PARAMS=c,t.HV_NAMES=u,t.box=d,t.vbox=p,t.hbox=f,t.getAvailableSize=m,t.getLayoutRect=g,t.positionElement=v,t.sizeCalculable=y,t.mergeLayoutParam=_,t.getLayoutParams=b,t.copyLayoutParams=x},f97d:function(e,t){var i={"":!0,up:!0};function n(e){if("string"!==typeof e)return!1;var t=i[e.toLowerCase()];return!!t&&e.toLowerCase()}function r(e){return"number"===typeof e&&e>=0&&e<=100}function a(){var e=100,t=3,i=0,a=100,o=0,s=100,l="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!r(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!==typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!r(e))throw new Error("RegionAnchorX must be between 0 and 100.");a=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!r(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!r(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(e){if(!r(e))throw new Error("ViewportAnchorX must be between 0 and 100.");o=e}},scroll:{enumerable:!0,get:function(){return l},set:function(e){var t=n(e);!1===t?console.warn("Scroll: an invalid or illegal string was specified."):l=t}}})}e.exports=a},f991:function(e,t,i){"use strict";i("a1eb")},f9d8:function(e,t,i){"use strict";i("6593")},f9e8:function(e,t,i){"use strict";i("61bf")},fab2:function(e,t,i){var n=i("6d8b"),r=n.retrieve,a=n.defaults,o=n.extend,s=n.each,l=i("eda2"),c=i("2306"),u=i("4319"),h=i("3842"),d=h.isRadianAroundZero,p=h.remRadian,f=i("a15a"),m=f.createSymbol,g=i("1687"),v=i("401b"),y=v.applyTransform,_=i("697e"),b=_.shouldShowAllLabels,x=Math.PI,w=function(e,t){this.opt=t,this.axisModel=e,a(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new c.Group;var i=new c.Group({position:t.position.slice(),rotation:t.rotation});i.updateTransform(),this._transform=i.transform,this._dumbGroup=i};w.prototype={constructor:w,hasBuilder:function(e){return!!T[e]},add:function(e){T[e].call(this)},getGroup:function(){return this.group}};var T={axisLine:function(){var e=this.opt,t=this.axisModel;if(t.get("axisLine.show")){var i=this.axisModel.axis.getExtent(),n=this._transform,r=[i[0],0],a=[i[1],0];n&&(y(r,r,n),y(a,a,n));var l=o({lineCap:"round"},t.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new c.Line({anid:"line",subPixelOptimize:!0,shape:{x1:r[0],y1:r[1],x2:a[0],y2:a[1]},style:l,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1}));var u=t.get("axisLine.symbol"),h=t.get("axisLine.symbolSize"),d=t.get("axisLine.symbolOffset")||0;if("number"===typeof d&&(d=[d,d]),null!=u){"string"===typeof u&&(u=[u,u]),"string"!==typeof h&&"number"!==typeof h||(h=[h,h]);var p=h[0],f=h[1];s([{rotate:e.rotation+Math.PI/2,offset:d[0],r:0},{rotate:e.rotation-Math.PI/2,offset:d[1],r:Math.sqrt((r[0]-a[0])*(r[0]-a[0])+(r[1]-a[1])*(r[1]-a[1]))}],(function(t,i){if("none"!==u[i]&&null!=u[i]){var n=m(u[i],-p/2,-f/2,p,f,l.stroke,!0),a=t.r+t.offset,o=[r[0]+a*Math.cos(e.rotation),r[1]-a*Math.sin(e.rotation)];n.attr({rotation:t.rotate,position:o,silent:!0,z2:11}),this.group.add(n)}}),this)}}},axisTickLabel:function(){var e=this.axisModel,t=this.opt,i=D(this,e,t),n=L(this,e,t);P(e,n,i),j(this,e,t)},axisName:function(){var e=this.opt,t=this.axisModel,i=r(e.axisName,t.get("name"));if(i){var n,a,s=t.get("nameLocation"),u=e.nameDirection,h=t.getModel("nameTextStyle"),d=t.get("nameGap")||0,p=this.axisModel.axis.getExtent(),f=p[0]>p[1]?-1:1,m=["start"===s?p[0]-f*d:"end"===s?p[1]+f*d:(p[0]+p[1])/2,I(s)?e.labelOffset+u*d:0],g=t.get("nameRotate");null!=g&&(g=g*x/180),I(s)?n=O(e.rotation,null!=g?g:e.rotation,u):(n=C(e,s,g||0,p),a=e.axisNameAvailableWidth,null!=a&&(a=Math.abs(a/Math.sin(n.rotation)),!isFinite(a)&&(a=null)));var v=h.getFont(),y=t.get("nameTruncate",!0)||{},_=y.ellipsis,b=r(e.nameTruncateMaxWidth,y.maxWidth,a),w=null!=_&&null!=b?l.truncateText(i,b,v,_,{minChar:2,placeholder:y.placeholder}):i,T=t.get("tooltip",!0),P=t.mainType,E={componentType:P,name:i,$vars:["name"]};E[P+"Index"]=t.componentIndex;var A=new c.Text({anid:"name",__fullText:i,__truncatedText:w,position:m,rotation:n.rotation,silent:k(t),z2:1,tooltip:T&&T.show?o({content:i,formatter:function(){return i},formatterParams:E},T):null});c.setTextStyle(A.style,h,{text:w,textFont:v,textFill:h.getTextColor()||t.get("axisLine.lineStyle.color"),textAlign:h.get("align")||n.textAlign,textVerticalAlign:h.get("verticalAlign")||n.textVerticalAlign}),t.get("triggerEvent")&&(A.eventData=S(t),A.eventData.targetType="axisName",A.eventData.name=i),this._dumbGroup.add(A),A.updateTransform(),this.group.add(A),A.decomposeTransform()}}},S=w.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},O=w.innerTextLayout=function(e,t,i){var n,r,a=p(t-e);return d(a)?(r=i>0?"top":"bottom",n="center"):d(a-x)?(r=i>0?"bottom":"top",n="center"):(r="middle",n=a>0&&a<x?i>0?"right":"left":i>0?"left":"right"),{rotation:a,textAlign:n,textVerticalAlign:r}};function C(e,t,i,n){var r,a,o=p(i-e.rotation),s=n[0]>n[1],l="start"===t&&!s||"start"!==t&&s;return d(o-x/2)?(a=l?"bottom":"top",r="center"):d(o-1.5*x)?(a=l?"top":"bottom",r="center"):(a="middle",r=o<1.5*x&&o>x/2?l?"left":"right":l?"right":"left"),{rotation:o,textAlign:r,textVerticalAlign:a}}var k=w.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)};function P(e,t,i){if(!b(e.axis)){var n=e.get("axisLabel.showMinLabel"),r=e.get("axisLabel.showMaxLabel");t=t||[],i=i||[];var a=t[0],o=t[1],s=t[t.length-1],l=t[t.length-2],c=i[0],u=i[1],h=i[i.length-1],d=i[i.length-2];!1===n?(E(a),E(c)):A(a,o)&&(n?(E(o),E(u)):(E(a),E(c))),!1===r?(E(s),E(h)):A(l,s)&&(r?(E(l),E(d)):(E(s),E(h)))}}function E(e){e&&(e.ignore=!0)}function A(e,t,i){var n=e&&e.getBoundingRect().clone(),r=t&&t.getBoundingRect().clone();if(n&&r){var a=g.identity([]);return g.rotate(a,a,-e.rotation),n.applyTransform(g.mul([],a,e.getLocalTransform())),r.applyTransform(g.mul([],a,t.getLocalTransform())),n.intersect(r)}}function I(e){return"middle"===e||"center"===e}function M(e,t,i,n,r){for(var a=[],o=[],s=[],l=0;l<e.length;l++){var u=e[l].coord;o[0]=u,o[1]=0,s[0]=u,s[1]=i,t&&(y(o,o,t),y(s,s,t));var h=new c.Line({anid:r+"_"+e[l].tickValue,subPixelOptimize:!0,shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:n,z2:2,silent:!0});a.push(h)}return a}function D(e,t,i){var n=t.axis,r=t.getModel("axisTick");if(r.get("show")&&!n.scale.isBlank()){for(var o=r.getModel("lineStyle"),s=i.tickDirection*r.get("length"),l=n.getTicksCoords(),c=M(l,e._transform,s,a(o.getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")}),"ticks"),u=0;u<c.length;u++)e.group.add(c[u]);return c}}function j(e,t,i){var n=t.axis,r=t.getModel("minorTick");if(r.get("show")&&!n.scale.isBlank()){var o=n.getMinorTicksCoords();if(o.length)for(var s=r.getModel("lineStyle"),l=i.tickDirection*r.get("length"),c=a(s.getLineStyle(),a(t.getModel("axisTick").getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")})),u=0;u<o.length;u++)for(var h=M(o[u],e._transform,l,c,"minorticks_"+u),d=0;d<h.length;d++)e.group.add(h[d])}}function L(e,t,i){var n=t.axis,a=r(i.axisLabelShow,t.get("axisLabel.show"));if(a&&!n.scale.isBlank()){var o=t.getModel("axisLabel"),l=o.get("margin"),h=n.getViewLabels(),d=(r(i.labelRotate,o.get("rotate"))||0)*x/180,p=O(i.rotation,d,i.labelDirection),f=t.getCategories&&t.getCategories(!0),m=[],g=k(t),v=t.get("triggerEvent");return s(h,(function(r,a){var s=r.tickValue,h=r.formattedLabel,d=r.rawLabel,y=o;f&&f[s]&&f[s].textStyle&&(y=new u(f[s].textStyle,o,t.ecModel));var _=y.getTextColor()||t.get("axisLine.lineStyle.color"),b=n.dataToCoord(s),x=[b,i.labelOffset+i.labelDirection*l],w=new c.Text({anid:"label_"+s,position:x,rotation:p.rotation,silent:g,z2:10});c.setTextStyle(w.style,y,{text:h,textAlign:y.getShallow("align",!0)||p.textAlign,textVerticalAlign:y.getShallow("verticalAlign",!0)||y.getShallow("baseline",!0)||p.textVerticalAlign,textFill:"function"===typeof _?_("category"===n.type?d:"value"===n.type?s+"":s,a):_}),v&&(w.eventData=S(t),w.eventData.targetType="axisLabel",w.eventData.value=d),e._dumbGroup.add(w),w.updateTransform(),m.push(w),e.group.add(w),w.decomposeTransform()})),m}}var R=w;e.exports=R},fb05:function(e,t,i){var n=i("6d8b"),r=n.each,a=n.isArray,o=n.isObject,s=i("26e1"),l=i("e0d3"),c=l.normalizeToArray;function u(e,t){t=t.split(",");for(var i=e,n=0;n<t.length;n++)if(i=i&&i[t[n]],null==i)break;return i}function h(e,t,i,n){t=t.split(",");for(var r,a=e,o=0;o<t.length-1;o++)r=t[o],null==a[r]&&(a[r]={}),a=a[r];(n||null==a[t[o]])&&(a[t[o]]=i)}function d(e){r(p,(function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])}))}var p=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],f=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"];function m(e,t){s(e,t),e.series=c(e.series),r(e.series,(function(e){if(o(e)){var t=e.type;if("line"===t)null!=e.clipOverflow&&(e.clip=e.clipOverflow);else if("pie"===t||"gauge"===t)null!=e.clockWise&&(e.clockwise=e.clockWise);else if("gauge"===t){var i=u(e,"pointer.color");null!=i&&h(e,"itemStyle.color",i)}d(e)}})),e.dataRange&&(e.visualMap=e.dataRange),r(f,(function(t){var i=e[t];i&&(a(i)||(i=[i]),r(i,(function(e){d(e)})))}))}e.exports=m},fbd0:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("b50f"),r=i("02f1"),a=i("3349"),o=i("34f2");class s extends o["a"]{constructor(e,t,i,n,o,s=0){super(e),this.origin=t,this.axis1=i,this.factor1=n,this.factor2=o,this.accumulationType=s,this.axis2=Object(a["r"])(Object(r["a"])(),i[1],-i[0])}scale(e,t,i){this.helper.scale(e.pos,this.origin,this.axis1,t),this.helper.scale(e.pos,this.origin,this.axis2,i)}apply(e){this.scale(e,this.factor1,this.factor2)}undo(e){this.scale(e,1/this.factor1,1/this.factor2)}canAccumulate(e){return e instanceof s&&Object(n["c"])(this.origin,e.origin)&&Object(n["c"])(this.axis1,e.axis1)}accumulate(e,t){1===t.accumulationType?this.scale(e,t.factor1/this.factor1,t.factor2/this.factor2):this.scale(e,t.factor1,t.factor2)}accumulateParams(e){const t=1===e.accumulationType;this.factor1=t?e.factor1:this.factor1*e.factor1,this.factor2=t?e.factor2:this.factor2*e.factor2}}},fc56:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"layer"},[e.popullationNum?i("div",{staticClass:"arrow-box",on:{click:function(t){e.leftPopullationVisible=!e.leftPopullationVisible}}},[i("i",{staticClass:"arrow-icon",class:[e.leftPopullationVisible?"el-icon-arrow-left":"el-icon-arrow-right"]})]):e._e(),e.popullationNum?i("div",{staticClass:"popullation",class:{"p-hide":!e.leftPopullationVisible}},[i("div",{staticClass:"popullation-body"},[e._l(e.popullationNum,(function(t,n){return i("div",{key:n,staticClass:"popullation-item"},[i("label",[e._v(e._s(t.suffix))]),i("span",[i("b",{staticClass:"prim"},[e._v(e._s(t.num))]),e._v(" km²")])])})),i("div",{staticClass:"popullation-item tlink"},[i("span",{on:{click:e.viewDetail}},[i("i",{staticClass:"el-icon-info",on:{click:e.viewDetail}}),e._v(" 分级管理措施")])])],2)]):e._e(),e.description?i("div",{staticClass:"popullation pr"},[i("div",{staticClass:"popullation-body"},e._l(e.description,(function(t,n){return i("div",{key:n,staticClass:"popullation-item"},[t.color?i("i",{staticClass:"dot",style:{backgroundColor:t.color}}):e._e(),i("label",{domProps:{innerHTML:e._s(t.suffix)}}),i("span",[i("b",{staticClass:"prim"},[e._v(e._s(t.num))]),e._v(" 人")])])})),0)]):e._e(),i("policy-detail",{model:{value:e.policyDetailVisible,callback:function(t){e.policyDetailVisible=t},expression:"policyDetailVisible"}})],1)},r=[],a=i("4795"),o=i.n(a),s=i("4e21");function l(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function c(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){l(a,n,r,o,s,"next",e)}function s(e){l(a,n,r,o,s,"throw",e)}o(void 0)}))}}var u={components:{PolicyDetail:s["default"]},name:"ArcgisGald",data:function(){return{popullationNum:null,description:null,policyDetailVisible:!1,leftPopullationVisible:!0}},mounted:function(){var e=this;return c(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.popullationNum=[{suffix:"封闭管理区",num:"0.16"},{suffix:"封控管理区",num:"3"},{suffix:"防控区",num:"28"},{suffix:"健康管理区",num:"156"}],e.description=[{suffix:"封闭管理区",num:"3729",color:"#f00"},{suffix:"封控管理区",num:"23000",color:"#ff9800 "},{suffix:"防控区",num:"36158",color:"#3266ff"},{suffix:"健康管理区<br/>(常住)",num:"127036",color:"#3bd0fd"}];case 2:case"end":return t.stop()}}),t)})))()},methods:{viewDetail:function(){this.policyDetailVisible=!0}}},h=u,d=(i("d52f"),i("2877")),p=Object(d["a"])(h,n,r,!1,null,"69cfc06f",null);t["default"]=p.exports},fc93:function(e){e.exports=JSON.parse('{"instance":null,"container":null,"AMap":null,"conf":{"center":[117.744559,20.119604],"resizeEnable":true,"zooms":[3,20],"viewMode":"2D","defaultCursor":"default","pitch":75,"mapStyle":"amap://styles/8f6e4fd8e511a83e01e44eb560fa30c5","expandZoomRange":true,"rotation":0,"zoom":6,"limitZoom":12}}')},fd11:function(e,t,i){},fd63:function(e,t,i){var n=i("42e5"),r=i("6d8b"),a=r.isFunction,o={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var i=e.getData(),r=(e.visualColorAccessPath||"itemStyle.color").split("."),o=e.get(r),s=!a(o)||o instanceof n?null:o;o&&!s||(o=e.getColorFromPalette(e.name,null,t.getSeriesCount())),i.setVisual("color",o);var l=(e.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),c=e.get(l);if(i.setVisual("borderColor",c),!t.isSeriesFiltered(e)){s&&i.each((function(t){i.setItemVisual(t,"color",s(e.getDataParams(t)))}));var u=function(e,t){var i=e.getItemModel(t),n=i.get(r,!0),a=i.get(l,!0);null!=n&&e.setItemVisual(t,"color",n),null!=a&&e.setItemVisual(t,"borderColor",a)};return{dataEach:i.hasItemOption?u:null}}}};e.exports=o},fdde:function(e,t){var i={average:function(e){for(var t=0,i=0,n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n],i++);return 0===i?NaN:t/i},sum:function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i]||0;return t},max:function(e){for(var t=-1/0,i=0;i<e.length;i++)e[i]>t&&(t=e[i]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,i=0;i<e.length;i++)e[i]<t&&(t=e[i]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},n=function(e,t){return Math.round(e.length/2)};function r(e){return{seriesType:e,modifyOutputEnd:!0,reset:function(e,t,r){var a=e.getData(),o=e.get("sampling"),s=e.coordinateSystem;if("cartesian2d"===s.type&&o){var l,c=s.getBaseAxis(),u=s.getOtherAxis(c),h=c.getExtent(),d=Math.abs(h[1]-h[0]),p=Math.round(a.count()/d);if(p>1)"string"===typeof o?l=i[o]:"function"===typeof o&&(l=o),l&&e.setData(a.downSample(a.mapDimension(u.dim),1/p,l,n))}}}}e.exports=r},fe21:function(e,t,i){var n=i("e86a"),r=i("2306"),a=["textStyle","color"],o={getTextColor:function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(a):null)},getFont:function(){return r.getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(e){return n.getBoundingRect(e,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}};e.exports=o},feba:function(e,t,i){"use strict";i.d(t,"a",(function(){return L}));i("c120");var n=i("c649"),r=i("9ef0"),a=i("0b2d"),o=i("e431"),s=i("c9fb"),l=i("6706"),c=i("65a7"),u=i("8f1c"),h=i("b2b2"),d=i("a915"),p=i("af40"),f=i("afe1"),m=i("3349"),g=i("7577"),v=i("5ef2"),y=i("caf7"),_=i("86ba"),b=i("5fae");class x extends b["a"]{constructor(e){super(e),this._handles=new p["a"],this._location=Object(a["e"])(),this._direction=Object(a["g"])(1,0,0),this._width=1,this._offset=1,this._length=18,this._color=Object(v["c"])(1,0,1,1),this._renderOccluded=4,this.applyProps(e)}get location(){return this._location}set location(e){Object(o["p"])(this._location,e)||(Object(o["j"])(this._location,e),this.updateGeometry())}get direction(){return this._direction}set direction(e){Object(o["p"])(this._direction,e)||(Object(o["j"])(this._direction,e),this.updateGeometry())}setDirectionFromPoints(e,t){Object(o["q"])(this._direction,Object(o["i"])(this._direction,t,e)),this.updateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this.updateMaterial())}get offset(){return this._offset}set offset(e){e!==this._offset&&(this._offset=e,this.updateGeometry())}get length(){return this._length}set length(e){e!==this._length&&(this._length=e,this.updateGeometry())}get color(){return this._color}set color(e){Object(g["g"])(e,this._color)||(Object(g["c"])(this._color,e),this.updateMaterial())}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this.updateMaterial())}createExternalResources(){const e=new _["a"](this.materialParameters);this._handles.add(this.view.state.watch("camera",()=>{this.updateGeometry()})),this._externalResources={material:e}}destroyExternalResources(){this._handles.removeAll(),this._externalResources=null}createGeometries(e){const t=y["a"].createPolylineGeometry([Object(a["e"])(),Object(a["e"])()]),i=y["a"].createPolylineGeometry([Object(a["e"])(),Object(a["e"])()]),n=Object(h["q"])(this._externalResources).material;e.addGeometry(t,n,f["a"]),e.addGeometry(i,n,f["a"]),this.updateVertices(e)}forEachExternalMaterial(e){Object(h["k"])(this._externalResources)&&e(this._externalResources.material)}updateMaterial(){Object(h["j"])(this._externalResources)||this._externalResources.material.setParameterValues(this.materialParameters)}get materialParameters(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded}}updateGeometry(){const e=this.object;Object(h["j"])(e)||this.updateVertices(e)}updateVertices(e){const t=this.view.state.camera;t.projectToScreen(this.location,T),Object(o["e"])(w,this.location,this.direction),t.projectToScreen(w,S),Object(m["e"])(S,Object(m["d"])(S,S,T)),this.updateVertexAttributes(t,e,0,T,S,1),this.updateVertexAttributes(t,e,1,T,S,-1)}updateVertexAttributes(e,t,i,n,r,a){const o=t.geometryRecords[i].geometry.getMutableAttribute("position").data,s=Object(m["a"])(O,Object(m["r"])(O,r[1]*a,r[0]*-a),this.offset+this.width/2),l=Object(m["h"])(C,Object(m["h"])(C,Object(m["h"])(C,n,Object(m["a"])(C,r,this.length/2)),s),s),c=Object(m["h"])(k,l,Object(m["a"])(k,r,-this.length));e.unprojectFromScreen(l,w),o[0]=w[0],o[1]=w[1],o[2]=w[2],e.unprojectFromScreen(c,w),o[3]=w[0],o[4]=w[1],o[5]=w[2],t.geometryVertexAttrsUpdated(i)}}const w=Object(a["e"])(),T=Object(d["f"])(),S=Object(d["f"])(),O=Object(d["f"])(),C=Object(d["f"])(),k=Object(d["f"])();var P=i("002c"),E=i("d791"),A=i("f091"),I=i("0278"),M=i("d36e");class D extends b["a"]{constructor(e){super(e),this._handles=new p["a"],this._quadMaterial=null,this._outlineMaterial=null,this._maxSize=0,this._position=Object(a["e"])(),this._up=Object(a["e"])(),this._right=Object(a["e"])(),this._renderOccluded=4,this._color=Object(v["c"])(1,0,0,1),this._outlineColor=Object(v["c"])(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=16,this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}get color(){return this._color}set color(e){Object(g["c"])(this._color,e),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(e){Object(g["c"])(this._outlineColor,e),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(e){const t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}set geometry({previous:e,center:t,next:i}){this._maxSize=Math.min(Object(o["n"])(t,e),Object(o["n"])(t,i))/3,Object(o["q"])(this._up,Object(o["i"])(this._up,e,t)),Object(o["q"])(this._right,Object(o["i"])(this._right,i,t)),Object(o["j"])(this._position,t),this.recreateGeometry()}createExternalResources(){this._quadMaterial=new M["a"](this.quadMaterialParameters),this._outlineMaterial=new _["a"](this.outlineMaterialParameters),this._handles.add(this.view.state.watch("camera",()=>this._updateTransform()))}destroyExternalResources(){this._quadMaterial=null,this._outlineMaterial=null,this._handles.removeAll()}forEachExternalMaterial(e){e(this._quadMaterial),e(this._outlineMaterial)}createGeometries(e){this._createQuadGeometry(e),this._createOutlineGeometry(e),this._updateTransform(e)}_createQuadGeometry(e){const t=this._quadGeometryData(this._up,this._right);e.addGeometry(t,this._quadMaterial)}_createOutlineGeometry(e){if(0===this._outlineSize)return;const t=Object(o["e"])(A["d"].get(),this._up,this._right),i=y["a"].createPolylineGeometry([this._up,t,this._right]);e.addGeometry(i,this._outlineMaterial)}_updateTransform(e=this.object){const t=this.view.state.camera,i=this._size*t.computeScreenPixelSizeAt(this._position),n=Math.min(this._maxSize,i);Object(E["i"])(j),Object(E["r"])(j,j,this._position),Object(E["q"])(j,j,[n,n,n]),Object(h["k"])(e)&&(e.transformation=j)}_quadGeometryData(e,t){const i=Object(o["e"])(A["d"].get(),e,t);return new I["a"]([["position",{size:3,data:[0,0,0,...t,...e,...i],exclusive:!0}]],[["position",new Uint16Array([0,1,2,1,2,3])]])}get quadMaterialParameters(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}_updateQuadMaterial(){this._quadMaterial&&this._quadMaterial.setParameterValues(this.quadMaterialParameters)}get outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}_updateOutlineMaterial(){this._outlineMaterial&&this._outlineMaterial.setParameterValues(this.outlineMaterialParameters)}}const j=Object(f["b"])();class L extends c["a"]{visualizeIntersectionPoint(e,t){const{coordinateHelper:i,elevationInfo:a,view:o}=t;return Object(n["a"])(new P["a"]({view:o,primitive:"circle",geometry:i.createPoint(e.intersectionPoint),elevationInfo:a,size:20,outlineSize:2,color:[0,0,0,0],outlineColor:r["a"].toUnitRGBA(s["a"].orange),pixelSnappingEnabled:!1}))}visualizePoint(e,t){const{coordinateHelper:i,elevationInfo:a,view:o}=t;return Object(n["a"])(new P["a"]({view:o,primitive:"circle",geometry:i.createPoint(e.point),elevationInfo:a,size:20,outlineSize:2,color:[0,0,0,0],outlineColor:r["a"].toUnitRGBA(s["a"].orange),pixelSnappingEnabled:!1}))}visualizeLine(e,t){const{coordinateHelper:i,elevationInfo:r,view:a}=t;return Object(n["a"])(this.createLineSegmentHintFromMap(e.type,e.lineStart,e.lineEnd,i,r,a,e.fadeLeft,e.fadeRight))}visualizeParallelSign(e,t){const{coordinateHelper:i,elevationInfo:a,view:c}=t,u=Object(l["a"])(e.lineStart,i,a,t.view),h=Object(l["a"])(e.lineEnd,i,a,t.view),d=Object(o["h"])(h,u,h,.5),p=new x({view:c,attached:!1,offset:s["a"].parallelLineHintOffset,length:s["a"].parallelLineHintLength,width:s["a"].parallelLineHintWidth,color:r["a"].toUnitRGBA(s["a"].orange),location:d,renderOccluded:16});return p.setDirectionFromPoints(u,d),p.attached=!0,Object(n["a"])(p)}visualizeRightAngleQuad(e,t){const{coordinateHelper:i,elevationInfo:a,view:o}=t;return Object(n["a"])(new D({view:o,attached:!0,color:r["a"].toUnitRGBA(s["a"].orange),renderOccluded:2,outlineRenderOccluded:16,outlineColor:r["a"].toUnitRGBA(s["a"].orange),outlineSize:s["a"].rightAngleHintOutlineSize,size:s["a"].rightAngleHintSize,geometry:{previous:Object(l["a"])(e.previousVertex,i,a,o),center:Object(l["a"])(e.centerVertex,i,a,o),next:Object(l["a"])(e.nextVertex,i,a,o)}}))}createLineSegmentHintFromMap(e,t,i,n,r,o,s=!0,c=!0){const u=Object(a["e"])(),h=Object(a["e"])();return Object(l["c"])(t,i,n,r,o,u,h),this.createLineSegmentHint(e,o,u,h,s,c)}createLineSegmentHint(e,t,i,n,a=!0,o=!0){const l=new u["a"]({view:t,extensionType:3,start:i,end:n,color:r["a"].toUnitRGBA(s["a"].orange),renderOccluded:16});switch(e){case 0:l.width=s["a"].lineHintWidthTarget,l.fadedExtensions={start:0,end:s["a"].lineHintFadedExtensions};break;case 2:l.width=s["a"].lineHintWidthReference,l.fadedExtensions={start:0,end:0};break;case 1:l.width=s["a"].lineHintWidthReference,l.fadedExtensions={start:a?s["a"].lineHintFadedExtensions:0,end:o?s["a"].lineHintFadedExtensions:0}}return l.attached=!0,l}}},ff2e:function(e,t,i){var n=i("6d8b"),r=i("2306"),a=i("e86a"),o=i("eda2"),s=i("1687"),l=i("697e"),c=i("fab2");function u(e){var t,i=e.get("type"),n=e.getModel(i+"Style");return"line"===i?(t=n.getLineStyle(),t.fill=null):"shadow"===i&&(t=n.getAreaStyle(),t.stroke=null),t}function h(e,t,i,n,r){var s=i.get("value"),l=p(s,t.axis,t.ecModel,i.get("seriesDataIndices"),{precision:i.get("label.precision"),formatter:i.get("label.formatter")}),c=i.getModel("label"),u=o.normalizeCssArray(c.get("padding")||0),h=c.getFont(),f=a.getBoundingRect(l,h),m=r.position,g=f.width+u[1]+u[3],v=f.height+u[0]+u[2],y=r.align;"right"===y&&(m[0]-=g),"center"===y&&(m[0]-=g/2);var _=r.verticalAlign;"bottom"===_&&(m[1]-=v),"middle"===_&&(m[1]-=v/2),d(m,g,v,n);var b=c.get("backgroundColor");b&&"auto"!==b||(b=t.get("axisLine.lineStyle.color")),e.label={shape:{x:0,y:0,width:g,height:v,r:c.get("borderRadius")},position:m.slice(),style:{text:l,textFont:h,textFill:c.getTextColor(),textPosition:"inside",textPadding:u,fill:b,stroke:c.get("borderColor")||"transparent",lineWidth:c.get("borderWidth")||0,shadowBlur:c.get("shadowBlur"),shadowColor:c.get("shadowColor"),shadowOffsetX:c.get("shadowOffsetX"),shadowOffsetY:c.get("shadowOffsetY")},z2:10}}function d(e,t,i,n){var r=n.getWidth(),a=n.getHeight();e[0]=Math.min(e[0]+t,r)-t,e[1]=Math.min(e[1]+i,a)-i,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function p(e,t,i,r,a){e=t.scale.parse(e);var o=t.scale.getLabel(e,{precision:a.precision}),s=a.formatter;if(s){var c={value:l.getAxisRawValue(t,e),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};n.each(r,(function(e){var t=i.getSeriesByIndex(e.seriesIndex),n=e.dataIndexInside,r=t&&t.getDataParams(n);r&&c.seriesData.push(r)})),n.isString(s)?o=s.replace("{value}",o):n.isFunction(s)&&(o=s(c))}return o}function f(e,t,i){var n=s.create();return s.rotate(n,n,i.rotation),s.translate(n,n,i.position),r.applyTransform([e.dataToCoord(t),(i.labelOffset||0)+(i.labelDirection||1)*(i.labelMargin||0)],n)}function m(e,t,i,n,r,a){var o=c.innerTextLayout(i.rotation,0,i.labelDirection);i.labelMargin=r.get("label.margin"),h(t,n,r,a,{position:f(n.axis,e,i),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function g(e,t,i){return i=i||0,{x1:e[i],y1:e[1-i],x2:t[i],y2:t[1-i]}}function v(e,t,i){return i=i||0,{x:e[i],y:e[1-i],width:t[i],height:t[1-i]}}function y(e,t,i,n,r,a){return{cx:e,cy:t,r0:i,r:n,startAngle:r,endAngle:a,clockwise:!0}}t.buildElStyle=u,t.buildLabelElOption=h,t.getValueLabel=p,t.getTransformedPosition=f,t.buildCartesianSingleLabelElOption=m,t.makeLineShape=g,t.makeRectShape=v,t.makeSectorShape=y},ffdf:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return o}));var n=i("be09"),r=i.n(n),a=function(t){return r.a.atob?r.a.atob(t):e.from(t,"base64").toString("binary")};function o(e){for(var t=a(e),i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i}}).call(this,i("b639").Buffer)}}]);