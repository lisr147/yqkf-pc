(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50f4bcc6"],{"3a08":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.tableListData.tableKeys.length?a("table-page",{attrs:{data:e.tableListData,filter:e.filter,defaultSearchMore:!0},on:{search:e.search,resetSearch:e.resetSearch,sizeChange:e.sizeChange,currentChange:e.currentChange,tableSelectionChange:e.tableSelectionChange}},[a("template",{slot:"searchFilter"},[a("el-form",{staticClass:"area-main-filter",attrs:{inline:!0,model:e.filter,"label-width":"170px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}}},[a("StatusSelect",{model:{value:e.filter.statu,callback:function(t){e.$set(e.filter,"statu",t)},expression:"filter.statu"}}),a("el-form-item",{attrs:{label:"人员去向"}},[a("el-select",{model:{value:e.filter.ryqx,callback:function(t){e.$set(e.filter,"ryqx",t)},expression:"filter.ryqx"}},[a("el-option",{attrs:{value:"",label:"全部"}}),a("el-option",{attrs:{value:"居家隔离"}}),a("el-option",{attrs:{value:"已确定可转运"}}),a("el-option",{attrs:{value:"拟转外区管理"}}),a("el-option",{attrs:{value:"找不到人"}}),a("el-option",{attrs:{value:"其他"}})],1)],1),e._l(e.dataKeys,(function(t){return[t.searchable?a("el-form-item",{key:t.storeFiled,class:t.fieldName.includes("日期")||t.fieldName.includes("时间")?"search2x":"",attrs:{label:t.fieldName,prop:t.storeFiled}},["mjlx"===t.storeFiled?a("el-select",{model:{value:e.filter[t.storeFiled],callback:function(a){e.$set(e.filter,t.storeFiled,a)},expression:"filter[item.storeFiled]"}},[a("el-option",{attrs:{value:"",label:"全部"}}),a("el-option",{attrs:{value:"密切接触者"}}),a("el-option",{attrs:{value:"密接的密接"}}),a("el-option",{attrs:{value:"一般接触者"}}),a("el-option",{attrs:{value:"重点人群"}}),a("el-option",{attrs:{value:"一般人群"}})],1):"jdid"===t.storeFiled?a("el-select",{model:{value:e.filter.jdid,callback:function(t){e.$set(e.filter,"jdid",t)},expression:"filter.jdid"}},[a("el-option",{attrs:{value:"",label:"全部"}},[e._v("全部")]),e._l(e.hotelList,(function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.jkgcjd}},[e._v(e._s(t.jkgcjd))])}))],2):t.fieldName.includes("日期")||t.fieldName.includes("时间")?[a("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期时间",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.filter[t.storeFiled],callback:function(a){e.$set(e.filter,t.storeFiled,a)},expression:"filter[item.storeFiled]"}})]:a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.filter[t.storeFiled],callback:function(a){e.$set(e.filter,t.storeFiled,a)},expression:"filter[item.storeFiled]"}})],2):e._e()]}))],2)],1),a("template",{slot:"controler"},[a("el-button",{attrs:{icon:"el-icon-download",type:"primary"},on:{click:e.exportFile}},[e._v("批量导出")])],1)],2):e._e(),"healty"===e.dialog?a("HealtyInfo",{attrs:{data:e.detail},on:{close:function(t){e.detail=null,e.dialog=null}}}):e._e(),"timeline"===e.dialog?a("Timeline",{attrs:{data:e.detail},on:{close:function(t){e.detail=null,e.dialog=null}}}):e._e()],1)},i=[],l=a("4795"),r=a.n(l),s=a("b575"),o=a("05d5"),c=a("d2b8"),u=a("c6cf"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"时间轴",visible:!0,"append-to-body":"",width:"400px",top:"30px"},on:{close:function(t){return e.$emit("close")}}},[e.timeline.length?e._e():[e._v(" 暂无数据 ")],a("el-timeline",{attrs:{reverse:e.reverse}},[e._l(e.timeline,(function(t,n){return[t&&t.timestamp?a("el-timeline-item",{key:n,attrs:{timestamp:t.timestamp}},[e._v(" "+e._s(t.content)+" ")]):e._e()]}))],2)],2)},f=[],p=a("c1df"),m=a.n(p),h={name:"timeline",props:["data"],data:function(){return{reverse:!1}},computed:{timeline:function(){var e=[{content:"结束时间",timestamp:this.data.jssj},{content:"应解除观察日期",timestamp:this.data.yjcgcrq},{content:"开始观察日期",timestamp:this.data.ksgcrq},{content:"开始隔离时间",timestamp:this.data.ksglsj},"密切接触者"===this.data.mjlx?{content:"转为密接日期",timestamp:this.data.zwmjrq}:null,"是"===this.data.sffb?{content:"发病日期",timestamp:this.data.fbrq}:null,{content:"最后接触日期",timestamp:this.data.zhjcrq}];return e=e.filter((function(e){return e&&e.timestamp})),e.forEach((function(e){e&&e.timestamp&&(e.timestamp=m()(e.timestamp).format("YYYY-MM-DD"))})),e.sort((function(e,t){return new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()})),e}}},v=h,b=a("2877"),g=Object(b["a"])(v,d,f,!1,null,null,null),y=g.exports,x=a("81be"),w=a("b592");function D(e,t,a,n,i,l,r){try{var s=e[l](r),o=s.value}catch(c){return void a(c)}s.done?t(o):Promise.resolve(o).then(n,i)}function _(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var l=e.apply(t,a);function r(e){D(l,n,i,r,s,"next",e)}function s(e){D(l,n,i,r,s,"throw",e)}r(void 0)}))}}var k={name:"data-list",components:{TablePage:o["a"],HealtyInfo:u["a"],Timeline:y,StatusSelect:w["a"]},mixins:[s["a"],x["a"]],data:function(){return{dialog:null,filter:{pageNum:1,pageSize:c["g"][0],rowTotal:0,pageSizes:c["g"],glblxm:"",glmjxm:"",jdid:"",lxdh:"",rylx:"",ssjd:"",statu:"",ryqx:""},tableListData:{selection:!1,columnFunctionsWidth:220,tableData:[],tableKeys:[],tableFunctions:[]},hotelList:[],detail:null,dataKeys:[]}},mounted:function(){var e=this;return _(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Api().HotelController.get_getAllHotelList.request();case 2:e.hotelList=t.sent,e.getTableKeys(["sfzhzhm","lxdh","xm"]),e.tableListData.tableFunctions.push({label:"查看健康信息",method:e.viewInfo}),e.tableListData.tableFunctions.push({label:"时间轴查看",method:e.viewTL});case 6:case"end":return t.stop()}}),t)})))()},methods:{getData:function(){var e=this;return _(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(JSON.stringify(e.filter)),delete a.rowTotal,delete a.pageSizes,t.next=5,e.$Api().ConnectionController.post_searchByInfo.request({data:a,heaaders:{hideNotify:!0}});case 5:n=t.sent,e.tableListData.tableData=n.data,e.filter.pageNum=n.pageNum,e.filter.pageSize=n.pageSize,e.filter.rowTotal=n.rowTotal;case 10:case"end":return t.stop()}}),t)})))()},submit:function(e){var t=this;return _(r.a.mark((function a(){return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.dialog=null,console.log(e),t.multiData.length){a.next=5;break}return t.$message({type:"warn",message:"请先选择人员"}),a.abrupt("return");case 5:return a.next=7,t.$Api().RoomController.post_assignByRoom.request({data:{ids:t.multiData.map((function(e){return e._id})),fjh:e.fjh,ksglsj:e.ksglsj}});case 7:t.getData();case 8:case"end":return a.stop()}}),a)})))()},viewInfo:function(e){this.detail=e.row,this.dialog="healty"},viewTL:function(e){this.detail=e.row,this.dialog="timeline"},exportFile:function(){var e=this;return _(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Api().ImportDataController.post_exportData.request({path:{templateId:"10001"},data:{},responseType:"blob"});case 2:t.sent,e.$message({message:"导出成功",type:"success",duration:3e3,showClose:!0});case 4:case"end":return t.stop()}}),t)})))()}}},j=k,F=Object(b["a"])(j,n,i,!1,null,null,null);t["default"]=F.exports},5069:function(e,t,a){"use strict";a("a3a8")},"81be":function(e,t,a){"use strict";var n=a("4795"),i=a.n(n),l=a("c1df"),r=a.n(l);function s(e,t,a,n,i,l,r){try{var s=e[l](r),o=s.value}catch(c){return void a(c)}s.done?t(o):Promise.resolve(o).then(n,i)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var l=e.apply(t,a);function r(e){s(l,n,i,r,o,"next",e)}function o(e){s(l,n,i,r,o,"throw",e)}r(void 0)}))}}t["a"]={methods:{getTableKeys:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"10001",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(function(){var l=o(i.a.mark((function l(s){var o;return i.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.tableShow=!1,e.tableListData=e.$options.data().tableListData,i.next=4,e.$Api().ImportDataController.get_config.request({path:{id:a}});case 4:if(o=i.sent,e.dataKeys=o.columns,e.dataKeys.forEach((function(e){"jdid"===e.storeFiled&&(e.fieldName="隔离酒店")})),"10001"===a&&(e.tableListData.tableKeys.push({id:"glzt",label:"隔离状态",minWidth:120}),e.tableListData.tableKeys.push({id:"yglsc",label:"已隔离时长",minWidth:120,formatter:function(e){if(!e.ksglsj)return"未知";var t=new Date(e.ksglsj).getTime(),a=(new Date).getTime(),n=(a-t)/1e3/60/60;if(n<0)return"未知";if(n<24)return Math.floor(n)+"小时";var i=Math.floor(n%24);return n=Math.floor(n/24),n+"天"+i+"小时"}}),e.tableListData.tableKeys.push({id:"ksglsj",label:"开始隔离时间",minWidth:160})),o.columns.forEach((function(t){if(t.show){if("jdid"===t.storeFiled)return;e.tableListData.tableKeys.push({id:t.storeFiled,label:t.fieldName,minWidth:30*t.fieldName.length,searchable:t.searchable,allways:["sfzhzhm","lxdh","xm"].includes(t.storeFiled),formatter:function(e){var a;return e.hasOwnProperty(t.storeFiled)?a=e[t.storeFiled]:e.GAData&&e.GAData.hasOwnProperty(t.storeFiled)&&(a=e.GAData[t.storeFiled]),!a||"createTime"!==t.storeFiled&&"updateTime"!==t.storeFiled||(a=r()(a).format("YYYY-MM-DD HH:mm:ss")),a}})}t.searchable&&e.$set(e.filter,t.storeFiled,"")})),e.tableListData.tableKeys.sort((function(e,a){return t.indexOf(a.id)-t.indexOf(e.id)})),e.tableShow=!0,n){i.next=14;break}return s(),i.abrupt("return");case 14:e.resetSearch(),s();case 16:case"end":return i.stop()}}),l)})));return function(e){return l.apply(this,arguments)}}())}}}},a3a8:function(e,t,a){},b575:function(e,t,a){"use strict";t["a"]={data:function(){return{multiData:[]}},methods:{tableSelectionChange:function(e){this.multiData=e},sizeChange:function(e){this.filter.pageSize=e,this.getData()},currentChange:function(e){this.filter.pageNum=e,this.getData()},sortChange:function(e){e.column;var t=e.prop,a=e.order;a?(this.filter.sortOrder="ascending"===a?"ASC":"DESC",this.filter.sortName=t):(this.filter.sortOrder="",this.filter.sortName=""),this.getData()},search:function(){this.filter.pageNum=1,this.getData()},resetSearch:function(){var e=this.filter.pageNum,t=this.filter.pageSize,a=this.filter.rowTotal;this.filter=this.$options.data().filter,this.filter.pageNum=e,this.filter.pageSize=t,this.filter.rowTotal=a,this.getData()}}}},b592:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{on:{change:e.change},model:{value:e.selectData,callback:function(t){e.selectData=t},expression:"selectData"}},[a("el-option",{attrs:{value:"9",label:"待追踪"}}),a("el-option",{attrs:{value:"8",label:"待转运"}}),a("el-option",{attrs:{value:"5",label:"已扫码登车"}}),a("el-option",{attrs:{value:"1",label:"待分派酒店"}}),a("el-option",{attrs:{value:"6",label:"已分派酒店"}}),a("el-option",{attrs:{value:"4",label:"待分派房间"}}),a("el-option",{attrs:{value:"7",label:"已分派房间"}}),a("el-option",{attrs:{value:"3",label:"隔离中"}}),a("el-option",{attrs:{value:"2",label:"已解除"}}),a("el-option",{attrs:{value:"0",label:"全部"}})],1)],1)},i=[],l={name:"status-select",props:["value"],data:function(){return{selectData:""}},watch:{value:{handler:function(e){this.selectData=e},immediate:!0}},methods:{change:function(e){this.$emit("input",e)}}},r=l,s=a("2877"),o=Object(s["a"])(r,n,i,!1,null,null,null);t["a"]=o.exports},c6cf:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"健康信息",visible:!0,"append-to-body":"",width:"400px",top:"30px"},on:{close:function(t){return e.$emit("close")}}},[a("el-tabs",{attrs:{type:"card"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("el-tab-pane",{attrs:{label:"核酸检查",name:"0"}},[e._l(e.nucleicData,(function(t,n){return a("el-card",{key:"healtyData"+n,staticClass:"box-card"},[a("div",[e._v(" 核酸采样时间 : "+e._s(t.examinationTime)+" ")]),a("div",[e._v(" 核酸检测结果 : "+e._s("0"===t.result?"阴性":"阳性")+" ")]),a("div",[e._v(" 备注 : "+e._s(t.remarks)+" ")])])})),0===e.nucleicData.length?a("el-card",{staticClass:"box-card"},[a("div",[e._v(" 暂无数据 ")])]):e._e()],2),a("el-tab-pane",{attrs:{label:"健康监测",name:"1"}},[e._l(e.healtyData,(function(t,n){return a("el-card",{key:"healtyData"+n,staticClass:"box-card"},[a("div",[e._v(" 健康监测时间 : "+e._s(t.examinationTime)+" ")]),a("div",[e._v(" 体温 : "+e._s(t.temperature)+" 症状 : "+e._s("1"===t.symptom?"有":"无")+" ")]),a("div",[e._v(" 备注 : "+e._s(t.remarks)+" ")])])})),0===e.healtyData.length?a("el-card",{staticClass:"box-card"},[a("div",[e._v(" 暂无数据 ")])]):e._e()],2)],1)],1)},i=[],l=a("4795"),r=a.n(l);function s(e,t,a,n,i,l,r){try{var s=e[l](r),o=s.value}catch(c){return void a(c)}s.done?t(o):Promise.resolve(o).then(n,i)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var l=e.apply(t,a);function r(e){s(l,n,i,r,o,"next",e)}function o(e){s(l,n,i,r,o,"throw",e)}r(void 0)}))}}var c={name:"healty-info",props:["data"],data:function(){return{healtyData:{},nucleicData:{}}},mounted:function(){var e=this;return o(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Api().HealthExaminationController.get_searchExamination.request({path:{personId:e.data.id}});case 2:return e.healtyData=t.sent,t.next=5,e.$Api().NucleicAcidExaminationController.get_searchExamination.request({path:{personId:e.data.id}});case 5:e.nucleicData=t.sent;case 6:case"end":return t.stop()}}),t)})))()}},u=c,d=(a("5069"),a("2877")),f=Object(d["a"])(u,n,i,!1,null,null,null);t["a"]=f.exports}}]);