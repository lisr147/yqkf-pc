(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00aad6d4","chunk-2d0d3e74","chunk-2d0d3e74"],{"003f":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("f2e0");class i{constructor(){this.id=Object(n["a"])()}unload(){}}},"0278":function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));var n=r("b2b2"),i=r("1153"),s=r("8a44"),o=r("0b2d"),a=r("e431");class c{constructor(t,e,r,n){this.primitiveIndices=t,this._numIndexPerPrimitive=e,this.indices=r,this.position=n,this.center=Object(o["e"])(),Object(i["a"])(t.length>=1),Object(i["a"])(r.length%this._numIndexPerPrimitive==0),Object(i["a"])(r.length>=t.length*this._numIndexPerPrimitive),Object(i["a"])(3===n.size||4===n.size);const{data:s,size:c}=n,f=t.length;let l=c*r[this._numIndexPerPrimitive*t[0]];u.clear(),u.push(l),this.bbMin=Object(o["g"])(s[l],s[l+1],s[l+2]),this.bbMax=Object(o["d"])(this.bbMin);for(let i=0;i<f;++i){const e=this._numIndexPerPrimitive*t[i];for(let t=0;t<this._numIndexPerPrimitive;++t){l=c*r[e+t],u.push(l);let n=s[l];this.bbMin[0]=Math.min(n,this.bbMin[0]),this.bbMax[0]=Math.max(n,this.bbMax[0]),n=s[l+1],this.bbMin[1]=Math.min(n,this.bbMin[1]),this.bbMax[1]=Math.max(n,this.bbMax[1]),n=s[l+2],this.bbMin[2]=Math.min(n,this.bbMin[2]),this.bbMax[2]=Math.max(n,this.bbMax[2])}}Object(a["h"])(this.center,this.bbMin,this.bbMax,.5),this.radius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);let d=this.radius*this.radius;for(let i=0;i<u.length;++i){l=u.getItemAt(i);const t=s[l]-this.center[0],e=s[l+1]-this.center[1],r=s[l+2]-this.center[2],n=t*t+e*e+r*r;if(n<=d)continue;const o=Math.sqrt(n),a=.5*(o-this.radius);this.radius=this.radius+a,d=this.radius*this.radius;const c=a/o;this.center[0]+=t*c,this.center[1]+=e*c,this.center[2]+=r*c}u.clear()}getCenter(){return this.center}getBSRadius(){return this.radius}getBBMin(){return this.bbMin}getBBMax(){return this.bbMax}getChildren(){if(this._children)return this._children;if(Object(a["k"])(this.bbMin,this.bbMax)>1){const t=Object(a["h"])(Object(o["e"])(),this.bbMin,this.bbMax,.5),e=this.primitiveIndices.length,r=new Uint8Array(e),n=new Array(8);for(let o=0;o<8;++o)n[o]=0;const{data:i,size:s}=this.position;for(let o=0;o<e;++o){let e=0;const a=this._numIndexPerPrimitive*this.primitiveIndices[o];let c=s*this.indices[a],u=i[c],f=i[c+1],l=i[c+2];for(let t=1;t<this._numIndexPerPrimitive;++t){c=s*this.indices[a+t];const e=i[c],r=i[c+1],n=i[c+2];e<u&&(u=e),r<f&&(f=r),n<l&&(l=n)}u<t[0]&&(e|=1),f<t[1]&&(e|=2),l<t[2]&&(e|=4),r[o]=e,++n[e]}let u=0;for(let o=0;o<8;++o)n[o]>0&&++u;if(u<2)return;const f=new Array(8);for(let o=0;o<8;++o)f[o]=n[o]>0?new Uint32Array(n[o]):void 0;for(let o=0;o<8;++o)n[o]=0;for(let o=0;o<e;++o){const t=r[o];f[t][n[t]++]=this.primitiveIndices[o]}this._children=new Array(8);for(let o=0;o<8;++o)void 0!==f[o]&&(this._children[o]=new c(f[o],this._numIndexPerPrimitive,this.indices,this.position))}return this._children}static prune(){u.prune()}}const u=new s["a"]({deallocator:null});var f=r("003f"),l=r("1038");class d extends f["a"]{constructor(t,e=[],r=0,n=-1){super(),this._primitiveType=r,this.edgeIndicesLength=n,this.type=2,this._vertexAttributes=new Map,this._indices=new Map,this._boundingInfo=null;for(const[i,s]of t)s&&this._vertexAttributes.set(i,{...s});if(null==e||0===e.length){const t=h(this._vertexAttributes),e=Object(l["d"])(t);this.edgeIndicesLength=this.edgeIndicesLength<0?t:this.edgeIndicesLength;for(const r of this._vertexAttributes.keys())this._indices.set(r,e)}else for(const[i,s]of e)s&&(this._indices.set(i,b(s)),"position"===i&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._indices.get(i).length:this.edgeIndicesLength))}get vertexAttributes(){return this._vertexAttributes}getMutableAttribute(t){const e=this._vertexAttributes.get(t);return e&&!e.exclusive&&(e.data=Array.from(e.data),e.exclusive=!0),e}get indices(){return this._indices}get indexCount(){const t=this._indices.values().next().value;return t?t.length:0}get primitiveType(){return this._primitiveType}get faceCount(){return this.indexCount/3}get boundingInfo(){return Object(n["j"])(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(t){return 0===this.primitiveType?this.computeAttachmentOriginTriangles(t):this.computeAttachmentOriginPoints(t)}computeAttachmentOriginTriangles(t){const e=this.indices.get("position"),r=this.vertexAttributes.get("position");return Object(l["c"])(r,e,t)}computeAttachmentOriginPoints(t){const e=this.indices.get("position"),r=this.vertexAttributes.get("position");return Object(l["b"])(r,e,t)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const t=this.indices.get("position");if(0===t.length)return null;const e=0===this.primitiveType?3:1;Object(i["a"])(t.length%e==0,"Indexing error: "+t.length+" not divisible by "+e);const r=Object(l["d"])(t.length/e),n=this.vertexAttributes.get("position");return new c(r,e,t,n)}}function h(t){const e=t.values().next().value;return null==e?0:e.data.length/e.size}function b(t){if(t.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return t;for(const e of t)if(e>=65536)return t;return new Uint16Array(t)}},"04f0":function(t,e,r){"use strict";r.d(e,"a",(function(){return v})),r.d(e,"b",(function(){return l})),r.d(e,"c",(function(){return y})),r.d(e,"d",(function(){return R}));var n=r("0b2d"),i=r("4212"),s=r("e431"),o=r("dae5"),a=r("b139"),c=r("7577");function u(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function f(t,e,r){r*=.5;const n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function l(t,e){const r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>i["a"]?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function d(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3],a=r[0],c=r[1],u=r[2],f=r[3];return t[0]=n*f+o*a+i*u-s*c,t[1]=i*f+o*c+s*a-n*u,t[2]=s*f+o*u+n*c-i*a,t[3]=o*f-n*a-i*c-s*u,t}function h(t,e,r){r*=.5;const n=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(r),c=Math.cos(r);return t[0]=n*c+o*a,t[1]=i*c+s*a,t[2]=s*c-i*a,t[3]=o*c-n*a,t}function b(t,e,r){r*=.5;const n=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(r),c=Math.cos(r);return t[0]=n*c-s*a,t[1]=i*c+o*a,t[2]=s*c+n*a,t[3]=o*c-i*a,t}function p(t,e,r){r*=.5;const n=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(r),c=Math.cos(r);return t[0]=n*c+i*a,t[1]=i*c-n*a,t[2]=s*c+o*a,t[3]=o*c-s*a,t}function m(t,e){const r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t}function g(t,e,r,n){const s=e[0],o=e[1],a=e[2],c=e[3];let u,f,l,d,h,b=r[0],p=r[1],m=r[2],g=r[3];return f=s*b+o*p+a*m+c*g,f<0&&(f=-f,b=-b,p=-p,m=-m,g=-g),1-f>i["a"]?(u=Math.acos(f),l=Math.sin(u),d=Math.sin((1-n)*u)/l,h=Math.sin(n*u)/l):(d=1-n,h=n),t[0]=d*s+h*b,t[1]=d*o+h*p,t[2]=d*a+h*m,t[3]=d*c+h*g,t}function _(t){const e=Object(i["b"])(),r=Object(i["b"])(),n=Object(i["b"])(),s=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=s*Math.sin(2*Math.PI*r),t[1]=s*Math.cos(2*Math.PI*r),t[2]=o*Math.sin(2*Math.PI*n),t[3]=o*Math.cos(2*Math.PI*n),t}function y(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=r*r+n*n+i*i+s*s,a=o?1/o:0;return t[0]=-r*a,t[1]=-n*a,t[2]=-i*a,t[3]=s*a,t}function v(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function O(t,e){const r=e[0]+e[4]+e[8];let n;if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);const i=(r+1)%3,s=(r+2)%3;n=Math.sqrt(e[3*r+r]-e[3*i+i]-e[3*s+s]+1),t[r]=.5*n,n=.5/n,t[3]=(e[3*i+s]-e[3*s+i])*n,t[i]=(e[3*i+r]+e[3*r+i])*n,t[s]=(e[3*s+r]+e[3*r+s])*n}return t}function x(t,e,r,n){const i=.5*Math.PI/180;e*=i,r*=i,n*=i;const s=Math.sin(e),o=Math.cos(e),a=Math.sin(r),c=Math.cos(r),u=Math.sin(n),f=Math.cos(n);return t[0]=s*c*f-o*a*u,t[1]=o*a*f+s*c*u,t[2]=o*c*u-s*a*f,t[3]=o*c*f+s*a*u,t}function T(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const j=c["c"],S=c["l"],A=c["a"],M=d,w=c["b"],E=c["d"],P=c["j"],F=c["e"],B=F,D=c["f"],I=D,L=c["k"],C=c["g"],U=c["h"];function R(t,e,r){const n=Object(s["g"])(e,r);return n<-.999999?(Object(s["f"])(N,z,e),Object(s["m"])(N)<1e-6&&Object(s["f"])(N,V,e),Object(s["q"])(N,N),f(t,N,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(Object(s["f"])(N,e,r),t[0]=N[0],t[1]=N[1],t[2]=N[2],t[3]=1+n,L(t,t))}const N=Object(n["e"])(),z=Object(n["g"])(1,0,0),V=Object(n["g"])(0,1,0);function k(t,e,r,n,i,s){return g(H,e,i,s),g(W,r,n,s),g(t,H,W,2*s*(1-s)),t}const H=Object(a["a"])(),W=Object(a["a"])();function q(t,e,r,n){const i=G;return i[0]=r[0],i[3]=r[1],i[6]=r[2],i[1]=n[0],i[4]=n[1],i[7]=n[2],i[2]=-e[0],i[5]=-e[1],i[8]=-e[2],L(t,O(t,i))}const G=Object(o["a"])();Object.freeze({__proto__:null,identity:u,setAxisAngle:f,getAxisAngle:l,multiply:d,rotateX:h,rotateY:b,rotateZ:p,calculateW:m,slerp:g,random:_,invert:y,conjugate:v,fromMat3:O,fromEuler:x,str:T,copy:j,set:S,add:A,mul:M,scale:w,dot:E,lerp:P,length:F,len:B,squaredLength:D,sqrLen:I,normalize:L,exactEquals:C,equals:U,rotationTo:R,sqlerp:k,setAxes:q})},"0d9f":function(t,e,r){"use strict";r.d(e,"a",(function(){return it})),r.d(e,"b",(function(){return C}));r("c120");var n=r("e92d"),i=r("38a4"),s=r("0b2d"),o=r("e431"),a=r("680b"),c=r("d791"),u=r("2119"),f=r("afe1"),l=r("f091"),d=r("2047"),h=r("8d95"),b=r("4054"),p=r("70ab");const m=n["a"].getLogger("esri.views.3d.support.geometryUtils.boundedPlane");class g{constructor(){this.plane=Object(p["c"])(),this.origin=Object(s["e"])(),this.basis1=Object(s["e"])(),this.basis2=Object(s["e"])()}}function _(t=K){return{plane:Object(p["c"])(t.plane),origin:Object(s["d"])(t.origin),basis1:Object(s["d"])(t.basis1),basis2:Object(s["d"])(t.basis2)}}function y(t,e,r){const n=tt.get();return n.origin=t,n.basis1=e,n.basis2=r,n.plane=Object(p["s"])(0,0,0,0),T(n),n}function v(t,e=_()){return x(t.origin,t.basis1,t.basis2,e)}function O(t,e){Object(o["j"])(e.origin,t.origin),Object(o["j"])(e.basis1,t.basis1),Object(o["j"])(e.basis2,t.basis2),Object(p["a"])(t.plane,e.plane)}function x(t,e,r,n=_()){return Object(o["j"])(n.origin,t),Object(o["j"])(n.basis1,e),Object(o["j"])(n.basis2,r),T(n),$(n,"fromValues()"),n}function T(t){Object(p["f"])(t.basis2,t.basis1,t.origin,t.plane)}function j(t,e,r){t!==r&&v(t,r);const n=Object(o["d"])(l["d"].get(),H(t),e);return Object(o["e"])(r.origin,r.origin,n),r.plane[3]-=e,r}function S(t,e,r){return A(e,r),j(r,R(t,t.origin),r),r}function A(t,e=_()){const r=(t[2]-t[0])/2,n=(t[3]-t[1])/2;return Object(o["v"])(e.origin,t[0]+r,t[1]+n,0),Object(o["v"])(e.basis1,r,0,0),Object(o["v"])(e.basis2,0,n,0),Object(p["b"])(0,0,1,0,e.plane),e}function M(t,e,r){return!!Object(p["i"])(t.plane,e,r)&&q(t,r)}function w(t,e,r){if(M(t,e,r))return r;const n=E(t,e,l["d"].get());return Object(o["e"])(r,e.origin,Object(o["d"])(l["d"].get(),e.direction,Object(o["n"])(e.origin,n)/Object(o["o"])(e.direction))),r}function E(t,e,r){const n=Z.get();Y(t,e,n,Z.get());let s=Number.POSITIVE_INFINITY;for(const c of et){const u=X(t,c,J.get()),f=l["d"].get();if(Object(p["d"])(n,u,f)){const t=Object(a["d"])(l["d"].get(),e.origin,f),n=Math.abs(Object(i["a"])(Object(o["g"])(e.direction,t)));n<s&&(s=n,Object(o["j"])(r,f))}}return s===Number.POSITIVE_INFINITY?P(t,e,r):r}function P(t,e,r){if(M(t,e,r))return r;const n=Z.get(),i=Z.get();Y(t,e,n,i);let s=Number.POSITIVE_INFINITY;for(const a of et){const c=X(t,a,J.get()),u=l["d"].get();if(Object(p["e"])(n,c,u)){const t=Object(b["c"])(e,u);if(!Object(p["g"])(i,u))continue;t<s&&(s=t,Object(o["j"])(r,u))}}return D(t,e.origin)<s&&F(t,e.origin,r),r}function F(t,e,r){const n=Object(p["p"])(t.plane,e,l["d"].get()),i=Object(h["e"])(G(t,t.basis1),n,-1,1,l["d"].get()),s=Object(h["e"])(G(t,t.basis2),n,-1,1,l["d"].get());return Object(o["i"])(r,Object(o["e"])(l["d"].get(),i,s),t.origin),r}function B(t,e,r){const{origin:n,basis1:i,basis2:s}=t,a=Object(o["i"])(l["d"].get(),e,n),c=Object(d["c"])(i,a),u=Object(d["c"])(s,a),f=Object(d["c"])(H(t),a);return Object(o["v"])(r,c,u,f)}function D(t,e){const r=B(t,e,l["d"].get()),{basis1:n,basis2:i}=t,s=Object(o["o"])(n),a=Object(o["o"])(i),c=Math.max(Math.abs(r[0])-s,0),u=Math.max(Math.abs(r[1])-a,0),f=r[2];return c*c+u*u+f*f}function I(t,e){return Math.sqrt(D(t,e))}function L(t,e){let r=Number.NEGATIVE_INFINITY;for(const n of et){const i=X(t,n,J.get()),s=Object(h["b"])(i,e);s>r&&(r=s)}return Math.sqrt(r)}function C(t,e){return Object(p["g"])(t.plane,e)&&q(t,e)}function U(t,e,r,n){return W(t,r,n)}function R(t,e){const r=-t.plane[3];return Object(d["c"])(H(t),e)-r}function N(t,e,r,n){const i=R(t,e),s=Object(o["d"])(Q,H(t),r-i);return Object(o["e"])(n,e,s),n}function z(t,e){return Object(o["p"])(t.basis1,e.basis1)&&Object(o["p"])(t.basis2,e.basis2)&&Object(o["p"])(t.origin,e.origin)}function V(t,e,r){return t!==r&&v(t,r),Object(c["a"])(rt,e),Object(c["b"])(rt,rt),Object(o["l"])(r.basis1,t.basis1,rt),Object(o["l"])(r.basis2,t.basis2,rt),Object(o["l"])(Object(p["n"])(r.plane),Object(p["n"])(t.plane),rt),Object(o["l"])(r.origin,t.origin,e),Object(p["r"])(r.plane,r.origin,r.plane),r}function k(t,e,r,n){return t!==n&&v(t,n),Object(c["p"])(nt,Object(c["i"])(nt),e,r),Object(o["l"])(n.basis1,t.basis1,nt),Object(o["l"])(n.basis2,t.basis2,nt),T(n),n}function H(t){return Object(p["n"])(t.plane)}function W(t,e,r){switch(e){case 0:Object(o["j"])(r,t.basis1),Object(o["q"])(r,r);break;case 1:Object(o["j"])(r,t.basis2),Object(o["q"])(r,r);break;case 2:Object(o["j"])(r,H(t))}return r}function q(t,e){const r=Object(o["i"])(l["d"].get(),e,t.origin),n=Object(o["r"])(t.basis1),i=Object(o["r"])(t.basis2),s=Object(o["g"])(t.basis1,r),a=Object(o["g"])(t.basis2,r);return-s-n<0&&s-n<0&&-a-i<0&&a-i<0}function G(t,e){const r=J.get();return Object(o["j"])(r.origin,t.origin),Object(o["j"])(r.vector,e),r}function X(t,e,r){const{basis1:n,basis2:i,origin:s}=t,a=Object(o["d"])(l["d"].get(),n,e.origin[0]),c=Object(o["d"])(l["d"].get(),i,e.origin[1]);Object(o["e"])(r.origin,a,c),Object(o["e"])(r.origin,r.origin,s);const u=Object(o["d"])(l["d"].get(),n,e.direction[0]),f=Object(o["d"])(l["d"].get(),i,e.direction[1]);return Object(o["d"])(r.vector,Object(o["e"])(u,u,f),2),r}function $(t,e){Math.abs(Object(o["g"])(t.basis1,t.basis2)/(Object(o["o"])(t.basis1)*Object(o["o"])(t.basis2)))>1e-6&&m.warn(e,"Provided basis vectors are not perpendicular"),Math.abs(Object(o["g"])(t.basis1,H(t)))>1e-6&&m.warn(e,"Basis vectors and plane normal are not perpendicular"),Math.abs(-Object(o["g"])(H(t),t.origin)-t.plane[3])>1e-6&&m.warn(e,"Plane offset is not consistent with plane origin")}function Y(t,e,r,n){const i=H(t);Object(p["f"])(i,e.direction,e.origin,r),Object(p["f"])(Object(p["n"])(r),i,e.origin,n)}const K={plane:Object(p["c"])(),origin:Object(s["g"])(0,0,0),basis1:Object(s["g"])(1,0,0),basis2:Object(s["g"])(0,1,0)},Z=new u["a"](p["c"]),J=new u["a"](h["a"]),Q=Object(s["e"])(),tt=new u["a"](()=>({origin:null,basis1:null,basis2:null,plane:null})),et=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],rt=Object(f["b"])(),nt=Object(f["b"])();var it=Object.freeze({__proto__:null,BoundedPlaneClass:g,create:_,wrap:y,copy:v,copyWithoutVerify:O,fromValues:x,updateUnboundedPlane:T,elevate:j,setExtent:S,fromAABoundingRect:A,intersectRay:M,intersectRayClosestSilhouette:w,closestPointOnSilhouette:E,closestPoint:P,projectPoint:F,projectPointLocal:B,distance2:D,distance:I,distanceToSilhouette:L,extrusionContainsPoint:C,axisAt:U,altitudeAt:R,setAltitudeAt:N,equals:z,transform:V,rotate:k,normal:H,UP:K})},"0fa6":function(t,e,r){"use strict";var n=r("b2b2"),i=r("8539");class s{constructor(t,e,r,n,i){this._context=t,this._locations=e,this._layout=r,this._buffers=n,this._indexBuffer=i,this._glName=null,this._initialized=!1,t.instanceCounter.increment(2,this)}get glName(){return this._glName}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get size(){return Object.keys(this._buffers).reduce((t,e)=>t+this._buffers[e].size,this._indexBuffer?this._indexBuffer.size:0)}get layout(){return this._layout}get locations(){return this._locations}dispose(t=!0){if(!this._context)return;const e=this._context.capabilities.vao;if(e&&this._glName&&(e.deleteVertexArray(this._glName),this._glName=null),this._context.getBoundVAO()===this&&this._context.bindVAO(null),t){for(const t in this._buffers)this._buffers[t].dispose(),delete this._buffers[t];this._indexBuffer=Object(n["f"])(this._indexBuffer)}this._context.instanceCounter.decrement(2,this),this._context=null}initialize(){if(this._initialized)return;const t=this._context.capabilities.vao;if(t){const e=t.createVertexArray();t.bindVertexArray(e),this._bindLayout(),t.bindVertexArray(null),this._glName=e}this._initialized=!0}bind(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())}_bindLayout(){const t=this._buffers,e=!!this._context.capabilities.vao,r=this._layout,n=this._indexBuffer;t||console.error("Vertex buffer dictionary is empty!");const s=this._context.gl;for(const o in t){const e=t[o];e||console.error("Vertex buffer is uninitialized!");const n=r[o];n||console.error("Vertex element descriptor is empty!"),Object(i["a"])(this._context,this._locations,e,n)}n&&(e?s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,n.glName):this._context.bindBuffer(n))}unbind(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(null):this._unbindLayout()}_unbindLayout(){const t=this._buffers,e=this._layout;t||console.error("Vertex buffer dictionary is empty!");for(const r in t){const n=t[r];n||console.error("Vertex buffer is uninitialized!");const s=e[r];Object(i["e"])(this._context,this._locations,n,s)}this._indexBuffer&&this._context.unbindBuffer(this._indexBuffer.bufferType)}}e["a"]=s},"0fc4":function(t,e,r){"use strict";function n(){return[0,0,0,0]}function i(t){return[t[0],t[1],t[2],t[3]]}function s(t,e,r,n){return[t,e,r,n]}function o(t){const e=n(),r=Math.min(4,t.length);for(let n=0;n<r;++n)e[n]=t[n];return e}function a(t,e){return new Float64Array(t,e,4)}function c(){return n()}function u(){return s(1,1,1,1)}function f(){return s(1,0,0,0)}function l(){return s(0,1,0,0)}function d(){return s(0,0,1,0)}function h(){return s(0,0,0,1)}r.d(e,"a",(function(){return p})),r.d(e,"b",(function(){return b})),r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return s})),r.d(e,"e",(function(){return a})),r.d(e,"f",(function(){return i})),r.d(e,"g",(function(){return o}));const b=c(),p=u(),m=f(),g=l(),_=d(),y=h();Object.freeze({__proto__:null,create:n,clone:i,fromValues:s,fromArray:o,createView:a,zeros:c,ones:u,unitX:f,unitY:l,unitZ:d,unitW:h,ZEROS:b,ONES:p,UNIT_X:m,UNIT_Y:g,UNIT_Z:_,UNIT_W:y})},1038:function(t,e,r){"use strict";r.d(e,"a",(function(){return d})),r.d(e,"b",(function(){return l})),r.d(e,"c",(function(){return f})),r.d(e,"d",(function(){return u}));var n=r("0b2d"),i=r("e431"),s=r("a125");let o=(()=>{const t=new Uint32Array(131072);for(let e=0;e<t.length;++e)t[e]=e;return t})();const a=new Uint16Array([0]),c=(()=>{const t=new Uint16Array(65536);for(let e=0;e<t.length;++e)t[e]=e;return t})();function u(t){if(1===t)return a;if(t<c.length)return new Uint16Array(c.buffer,0,t);if(t>o.length){const e=Math.max(2*o.length,t);o=new Uint32Array(e);for(let t=0;t<o.length;t++)o[t]=t}return new Uint32Array(o.buffer,0,t)}function f(t,e,r){if(!t)return!1;const{size:n,data:o}=t;Object(i["v"])(r,0,0,0),Object(i["v"])(m,0,0,0);let a=0,c=0;for(let u=0;u<e.length-2;u+=3){const t=e[u+0]*n,f=e[u+1]*n,l=e[u+2]*n;Object(i["v"])(h,o[t+0],o[t+1],o[t+2]),Object(i["v"])(b,o[f+0],o[f+1],o[f+2]),Object(i["v"])(p,o[l+0],o[l+1],o[l+2]);const d=Object(s["a"])(h,b,p);d?(Object(i["e"])(h,h,b),Object(i["e"])(h,h,p),Object(i["d"])(h,h,1/3*d),Object(i["e"])(r,r,h),a+=d):(Object(i["e"])(m,m,h),Object(i["e"])(m,m,b),Object(i["e"])(m,m,p),c+=3)}return(0!==c||0!==a)&&(0!==a?(Object(i["d"])(r,r,1/a),!0):0!==c&&(Object(i["d"])(r,m,1/c),!0))}function l(t,e,r){if(!t||!e)return!1;const{size:n,data:s}=t;Object(i["v"])(r,0,0,0);let o=-1,a=0;for(let i=0;i<e.length;i++){const t=e[i]*n;o!==t&&(r[0]+=s[t+0],r[1]+=s[t+1],r[2]+=s[t+2],a++),o=t}return a>1&&Object(i["d"])(r,r,1/a),a>0}function d(t,e,r,n){if(!t)return!1;const{size:s,data:o}=t;Object(i["v"])(n,0,0,0),Object(i["v"])(m,0,0,0);let a=0,c=0;const u=e?e.length-1:o.length/s-1,f=u+(r?2:0);for(let l=0;l<f;l+=2){const t=l<u?l:u,r=l<u?l+1:0,f=(e?e[t]:t)*s,d=(e?e[r]:r)*s;h[0]=o[f+0],h[1]=o[f+1],h[2]=o[f+2],b[0]=o[d+0],b[1]=o[d+1],b[2]=o[d+2],Object(i["d"])(h,Object(i["e"])(h,h,b),.5);const p=Object(i["z"])(h,b);p>0?(Object(i["e"])(n,n,Object(i["d"])(h,h,p)),a+=p):(Object(i["e"])(m,m,h),c++)}return 0!==a?(Object(i["d"])(n,n,1/a),!0):0!==c&&(Object(i["d"])(n,m,1/c),!0)}const h=Object(n["e"])(),b=Object(n["e"])(),p=Object(n["e"])(),m=Object(n["e"])()},1153:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return h})),r.d(e,"c",(function(){return b})),r.d(e,"d",(function(){return l})),r.d(e,"e",(function(){return d})),r.d(e,"f",(function(){return O})),r.d(e,"g",(function(){return f})),r.d(e,"h",(function(){return p})),r.d(e,"i",(function(){return c})),r.d(e,"j",(function(){return u})),r.d(e,"k",(function(){return m}));var n=r("38a4"),i=(r("0b2d"),r("d791"),r("02f1"),r("0fc4")),s=r("3349");r("7577");Object(i["c"])();class o{constructor(t){this.message=t}toString(){return"AssertException: "+this.message}}function a(t,e){if(!t){e=e||"assert";const t=new Error(e);throw t.stack&&console.log(t.stack),new o(e)}}function c(t,e,r,n){let i,s=(r[0]-t[0])/e[0],o=(n[0]-t[0])/e[0];s>o&&(i=s,s=o,o=i);let a=(r[1]-t[1])/e[1],c=(n[1]-t[1])/e[1];if(a>c&&(i=a,a=c,c=i),s>c||a>o)return!1;a>s&&(s=a),c<o&&(o=c);let u=(r[2]-t[2])/e[2],f=(n[2]-t[2])/e[2];return u>f&&(i=u,u=f,f=i),!(s>f||u>o)&&(f<o&&(o=f),!(o<0))}function u(t,e,r,n){t[12]=e,t[13]=r,t[14]=n}function f(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&1===t[15]}function l(t,e,r){return 2*Math.atan(Math.sqrt(e*e+r*r)*Math.tan(.5*t)/e)}function d(t,e,r){return 2*Math.atan(Math.sqrt(e*e+r*r)*Math.tan(.5*t)/r)}function h(t,e,r){return 2*Math.atan(e*Math.tan(.5*t)/Math.sqrt(e*e+r*r))}function b(t,e,r){return 2*Math.atan(r*Math.tan(.5*t)/Math.sqrt(e*e+r*r))}function p(t,e,r=0){const i=Object(n["c"])(t,0,y);for(let n=0;n<4;n++)e[r+n]=Math.floor(256*v(i*g[n]))}function m(t,e=0){let r=0;for(let n=0;n<4;n++)r+=t[e+n]*_[n];return r}const g=[1,256,65536,16777216],_=[1/256,1/65536,1/16777216,1/4294967296],y=m(new Uint8ClampedArray([255,255,255,255]));function v(t){return t-Math.floor(t)}function O(t,e,r,n,i){const o=t;0===t[11]?(n[0]=2/(e*o[0]),n[1]=2/(r*o[5]),n[2]=(1+o[12])/o[0],n[3]=(1+o[13])/o[5],Object(s["r"])(i,0,1)):(n[0]=-2/(e*o[0]),n[1]=-2/(r*o[5]),n[2]=(1-o[8])/o[0],n[3]=(1-o[9])/o[5],Object(s["r"])(i,1,0))}},"17b0":function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("38862"),i=r("2f98");function s(t,e){const r=t.vertex.code;e.verticalOffsetEnabled?(t.vertex.uniforms.add("verticalOffset","vec4"),e.screenSizePerspectiveEnabled&&(t.include(i["a"]),t.vertex.uniforms.add("screenSizePerspectiveAlignment","vec4")),r.add(n["a"]`
    vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {
      float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);
      ${1===e.viewingMode?n["a"]`vec3 worldNormal = normalize(worldPos + localOrigin);`:n["a"]`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}
      ${e.screenSizePerspectiveEnabled?n["a"]`
          float cosAngle = dot(worldNormal, normalize(worldPos - camPos));
          float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);`:n["a"]`
          float verticalOffsetScreenHeight = verticalOffset.x;`}
      // Screen sized offset in world space, used for example for line callouts
      float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);
      return worldNormal * worldOffset;
    }

    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {
      return worldPos + calculateVerticalOffset(worldPos, localOrigin);
    }
    `)):r.add(n["a"]`
    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }
    `)}function o(t,e,r,n=a){return n.screenLength=t.screenLength,n.perDistance=Math.tan(.5*e)/(.5*r),n.minWorldLength=t.minWorldLength,n.maxWorldLength=t.maxWorldLength,n}!function(t){function e(t,e,r){if(!e.verticalOffset)return;const n=o(e.verticalOffset,r.camera.fovY,r.camera.fullViewport[3]),i=r.camera.pixelRatio||1;t.setUniform4f("verticalOffset",n.screenLength*i,n.perDistance,n.minWorldLength,n.maxWorldLength)}t.bindUniforms=e}(s||(s={}));const a={screenLength:0,perDistance:0,minWorldLength:0,maxWorldLength:0}},"189c":function(t,e,r){"use strict";function n(t,e,r=32774,n=[0,0,0,0]){return{srcRgb:t,srcAlpha:t,dstRgb:e,dstAlpha:e,opRgb:r,opAlpha:r,color:{r:n[0],g:n[1],b:n[2],a:n[3]}}}function i(t,e,r,n,i=32774,s=32774,o=[0,0,0,0]){return{srcRgb:t,srcAlpha:e,dstRgb:r,dstAlpha:n,opRgb:i,opAlpha:s,color:{r:o[0],g:o[1],b:o[2],a:o[3]}}}r.d(e,"a",(function(){return C})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return s})),r.d(e,"d",(function(){return p})),r.d(e,"e",(function(){return i})),r.d(e,"f",(function(){return n}));const s={zNear:0,zFar:1},o={r:!0,g:!0,b:!0,a:!0};function a(t){return _.intern(t)}function c(t){return v.intern(t)}function u(t){return x.intern(t)}function f(t){return j.intern(t)}function l(t){return A.intern(t)}function d(t){return w.intern(t)}function h(t){return P.intern(t)}function b(t){return B.intern(t)}function p(t){return I.intern(t)}class m{constructor(t,e){this.makeKey=t,this.makeRef=e,this.interns=new Map}intern(t){if(!t)return null;const e=this.makeKey(t),r=this.interns;return r.has(e)||r.set(e,this.makeRef(t)),r.get(e)}}function g(t){return"["+t.join(",")+"]"}const _=new m(y,t=>({__tag:"Blending",...t}));function y(t){return t?g([t.srcRgb,t.srcAlpha,t.dstRgb,t.dstAlpha,t.opRgb,t.opAlpha,t.color.r,t.color.g,t.color.b,t.color.a]):null}const v=new m(O,t=>({__tag:"Culling",...t}));function O(t){return t?g([t.face,t.mode]):null}const x=new m(T,t=>({__tag:"PolygonOffset",...t}));function T(t){return t?g([t.factor,t.units]):null}const j=new m(S,t=>({__tag:"DepthTest",...t}));function S(t){return t?g([t.func]):null}const A=new m(M,t=>({__tag:"StencilTest",...t}));function M(t){return t?g([t.function.func,t.function.ref,t.function.mask,t.operation.fail,t.operation.zFail,t.operation.zPass]):null}const w=new m(E,t=>({__tag:"DepthWrite",...t}));function E(t){return t?g([t.zNear,t.zFar]):null}const P=new m(F,t=>({__tag:"ColorWrite",...t}));function F(t){return t?g([t.r,t.g,t.b,t.a]):null}const B=new m(D,t=>({__tag:"StencilWrite",...t}));function D(t){return t?g([t.mask]):null}const I=new m(L,t=>({blending:a(t.blending),culling:c(t.culling),polygonOffset:u(t.polygonOffset),depthTest:f(t.depthTest),stencilTest:l(t.stencilTest),depthWrite:d(t.depthWrite),colorWrite:h(t.colorWrite),stencilWrite:b(t.stencilWrite)}));function L(t){return t?g([y(t.blending),O(t.culling),T(t.polygonOffset),S(t.depthTest),M(t.stencilTest),E(t.depthWrite),F(t.colorWrite),D(t.stencilWrite)]):null}class C{constructor(t){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=t}setPipeline(t){(this._pipelineInvalid||t!==this._pipeline)&&(this.setBlending(t.blending),this.setCulling(t.culling),this.setPolygonOffset(t.polygonOffset),this.setDepthTest(t.depthTest),this.setStencilTest(t.stencilTest),this.setDepthWrite(t.depthWrite),this.setColorWrite(t.colorWrite),this.setStencilWrite(t.stencilWrite),this._pipeline=t),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}setBlending(t){this._blending=this.setSubState(t,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}setCulling(t){this._culling=this.setSubState(t,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}setPolygonOffset(t){this._polygonOffset=this.setSubState(t,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}setDepthTest(t){this._depthTest=this.setSubState(t,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}setStencilTest(t){this._stencilTest=this.setSubState(t,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}setDepthWrite(t){this._depthWrite=this.setSubState(t,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}setColorWrite(t){this._colorWrite=this.setSubState(t,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}setStencilWrite(t){this._stencilWrite=this.setSubState(t,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}setSubState(t,e,r,n){return(r||t!==e)&&(n(t),this._pipelineInvalid=!0),t}}},1956:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("c120");var n=r("e92d");r("ce50");function i(t){}n["a"].getLogger("esri/views/webgl")},"19b9":function(t,e,r){"use strict";r.d(e,"a",(function(){return h})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return _})),r.d(e,"d",(function(){return p})),r.d(e,"e",(function(){return l})),r.d(e,"f",(function(){return b}));var n=r("e431"),i=r("2119"),s=r("f091"),o=r("4054");function a(t){return t?{ray:Object(o["b"])(t.ray),c0:t.c0,c1:t.c1}:{ray:Object(o["b"])(),c0:0,c1:Number.MAX_VALUE}}function c(t,e,r){const n=g.get();return n.ray=t,n.c0=e,n.c1=r,n}function u(t,e=a()){return f(t.ray,t.c0,t.c1,e)}function f(t,e,r,n=a()){return Object(o["a"])(t,n.ray),n.c0=e,n.c1=r,n}function l(t,e=a()){return Object(o["a"])(t,e.ray),e.c0=0,e.c1=Number.MAX_VALUE,e}function d(t,e=a()){return h(t,Object(n["q"])(s["d"].get(),t.vector),e)}function h(t,e,r=a()){const i=Object(n["o"])(t.vector);return Object(o["d"])(t.origin,e,r.ray),r.c0=0,r.c1=i,r}function b(t,e){return m(t,t.c0,e)}function p(t,e){return m(t,t.c1,e)}function m(t,e,r){return Object(n["e"])(r,t.ray.origin,Object(n["d"])(r,t.ray.direction,e))}const g=new i["a"](()=>({c0:0,c1:0,ray:null}));var _=Object.freeze({__proto__:null,create:a,wrap:c,copy:u,fromValues:f,fromRay:l,fromLineSegment:d,fromLineSegmentAndDirection:h,getStart:b,getEnd:p,getAt:m})},"1e2c":function(t,e,r){"use strict";r.d(e,"a",(function(){return Y}));var n=r("6c97"),i=r("a21b"),s=r("b2b2"),o=r("ce50"),a=r("e041"),c=r("f4cc"),u=r("ce6d"),f=r("38a4"),l=r("228a"),d=r("2db0"),h=r("1153"),b=r("003f"),p=r("c514"),m=r("a1ff"),g=r("8539"),_=r("d5f7"),y=r("d267"),v=r("b2cd");function O(){if(Object(s["j"])(x)){const t=t=>Object(v["a"])("esri/libs/basisu/"+t);x=r.e("chunk-0d03357f").then(r.bind(null,"a58f")).then((function(t){return t.b})).then(({default:e})=>e({locateFile:t}).then(t=>(t.initializeBasis(),delete t.then,t)))}return x}let x,T=null,j=null;async function S(){return Object(s["j"])(j)&&(j=O(),T=await j),j}function A(t){if(Object(s["j"])(T))return t.byteLength;const e=new T.BasisFile(new Uint8Array(t));if(e.getNumImages()<1)return 0;const r=e.getNumLevels(0),n=e.getHasAlpha(),i=e.getImageWidth(0,0),o=e.getImageHeight(0,0);e.close(),e.delete();const a=Object(g["b"])(n?37496:37492),c=(4**r-1)/(3*4**(r-1));return Math.ceil(i*o*a*c)}async function M(t,e,r){Object(s["j"])(T)&&(T=await S());const n=new T.BasisFile(new Uint8Array(r));if(n.getNumImages()<1)return null;const i=n.getNumLevels(0),o=n.getHasAlpha(),a=n.getImageWidth(0,0),c=n.getImageHeight(0,0),{compressedTextureETC:u,compressedTextureS3TC:f}=t.capabilities,[l,d]=u?o?[1,37496]:[0,37492]:f?o?[3,33779]:[2,33776]:[13,6408];n.startTranscoding();const h=[];for(let s=0;s<i;s++)h.push(new Uint8Array(n.getImageTranscodedSizeInBytes(0,s,l))),n.transcodeImage(h[s],0,s,l,0,0);n.close(),n.delete();const b={...e,samplingMode:i>1?9987:9729,hasMipmap:i>1,internalFormat:d,width:a,height:c};return new m["a"](t,b,{type:"compressed",levels:h})}var w=r("e92d");const E=w["a"].getLogger("esri.views.3d.webgl-engine.lib.DDSUtil"),P=542327876,F=131072,B=4;function D(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}function I(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)}const L=D("DXT1"),C=D("DXT3"),U=D("DXT5"),R=31,N=0,z=1,V=2,k=3,H=4,W=7,q=20,G=21;function X(t,e,r,n){const{textureData:i,internalFormat:s,width:o,height:a}=$(r,n);e.samplingMode=i.levels.length>1?9987:9729,e.hasMipmap=i.levels.length>1,e.internalFormat=s,e.width=o,e.height=a;const c=new m["a"](t,e,i);return t.bindTexture(c,0),c}function $(t,e){const r=new Int32Array(t,0,R);if(r[N]!==P)return E.error("Invalid magic number in DDS header"),null;if(!(r[q]&B))return E.error("Unsupported format, must contain a FourCC code"),null;const n=r[G];let i,s;switch(n){case L:i=8,s=33776;break;case C:i=16,s=33778;break;case U:i=16,s=33779;break;default:return E.error("Unsupported FourCC code:",I(n)),null}let o=1,a=r[H],c=r[k];0==(3&a)&&0==(3&c)||(E.warn("Rounding up compressed texture size to nearest multiple of 4."),a=a+3&-4,c=c+3&-4);const u=a,l=c;let d,h;r[V]&F&&!1!==e&&(o=Math.max(1,r[W])),1===o||Object(f["h"])(a)&&Object(f["h"])(c)||(E.warn("Ignoring mipmaps of non power of two sized compressed texture."),o=1);let b=r[z]+4;const p=[];for(let f=0;f<o;++f)h=(a+3>>2)*(c+3>>2)*i,d=new Uint8Array(t,b,h),p.push(d),b+=h,a=Math.max(1,a>>1),c=Math.max(1,c>>1);return{textureData:{type:"compressed",levels:p},internalFormat:s,width:u,height:l}}class Y extends b["a"]{constructor(t,e){super(),this.data=t,this.type=4,this.glTexture=null,this.powerOfTwoStretchInfo=null,this.loadingPromise=null,this.loadingController=null,this.events=new u["a"],this.params=e||{},this.params.mipmap=!1!==this.params.mipmap,this.params.noUnpackFlip=this.params.noUnpackFlip||!1,this.params.preMultiplyAlpha=this.params.preMultiplyAlpha||!1,this.params.wrap=this.params.wrap||{s:10497,t:10497},this.params.powerOfTwoResizeMode=this.params.powerOfTwoResizeMode||1,this.estimatedTexMemRequired=Y.estimateTexMemRequired(this.data,this.params),this.startPreload()}startPreload(){const t=this.data;Object(s["j"])(t)||(t instanceof HTMLVideoElement?this.startPreloadVideoElement(t):t instanceof HTMLImageElement&&this.startPreloadImageElement(t))}startPreloadVideoElement(t){Object(a["t"])(t.src)||"auto"===t.preload&&t.crossOrigin||(t.preload="auto",t.crossOrigin="anonymous",t.src=t.src)}startPreloadImageElement(t){Object(a["u"])(t.src)||Object(a["t"])(t.src)||t.crossOrigin||(t.crossOrigin="anonymous",t.src=t.src)}static getDataDimensions(t){return t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t}static estimateTexMemRequired(t,e){if(Object(s["j"])(t))return 0;if(Object(i["c"])(t)||Object(i["k"])(t))return e.encoding===Y.BASIS_ENCODING?A(t):t.byteLength;const{width:r,height:n}=t instanceof Image||t instanceof ImageData||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement?Y.getDataDimensions(t):e;return(e.mipmap?4/3:1)*r*n*(e.components||4)||0}dispose(){this.data=void 0}get width(){return this.params.width}get height(){return this.params.height}createDescriptor(t){const e=this.params.mipmap&&!this.params.disableAnisotropy;return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:this.params.wrap,flipped:!this.params.noUnpackFlip,samplingMode:this.params.mipmap?9987:9729,hasMipmap:this.params.mipmap,preMultiplyAlpha:this.params.preMultiplyAlpha,maxAnisotropy:e?t.parameters.maxMaxAnisotropy:void 0}}load(t,e){if(Object(s["k"])(this.glTexture))return this.glTexture;if(Object(s["k"])(this.loadingPromise))return this.loadingPromise;const r=this.data;return Object(s["j"])(r)?(this.glTexture=new m["a"](t,this.createDescriptor(t),null),t.bindTexture(this.glTexture,0),this.glTexture):"string"==typeof r?this.loadFromURL(t,e,r):r instanceof Image?this.loadFromImageElement(t,e,r):r instanceof HTMLVideoElement?this.loadFromVideoElement(t,e,r):r instanceof ImageData||r instanceof HTMLCanvasElement?this.loadFromImage(t,r,e):(Object(i["c"])(r)||Object(i["k"])(r))&&this.params.encoding===Y.DDS_ENCODING?this.loadFromDDSData(t,r):(Object(i["c"])(r)||Object(i["k"])(r))&&this.params.encoding===Y.BASIS_ENCODING?this.loadFromBasis(t,r):Object(i["k"])(r)?this.loadFromPixelData(t,r):Object(i["c"])(r)?this.loadFromPixelData(t,new Uint8Array(r)):null}get requiresFrameUpdates(){return this.data instanceof HTMLVideoElement}frameUpdate(t,e,r){if(!(this.data instanceof HTMLVideoElement)||Object(s["j"])(this.glTexture))return r;if(this.data.readyState<2||r===this.data.currentTime)return r;if(Object(s["k"])(this.powerOfTwoStretchInfo)){const{framebuffer:r,vao:n,sourceTexture:i}=this.powerOfTwoStretchInfo;i.setData(this.data),this.drawStretchedTexture(t,e,r,n,i,this.glTexture)}else{const{width:t,height:e}=this.data,{width:r,height:n}=this.glTexture.descriptor;t!==r||e!==n?this.glTexture.updateData(0,0,0,Math.min(t,r),Math.min(e,n),this.data):this.glTexture.setData(this.data)}return this.glTexture.descriptor.hasMipmap&&this.glTexture.generateMipmap(),this.data.currentTime}loadFromDDSData(t,e){return this.glTexture=X(t,this.createDescriptor(t),e,this.params.mipmap),t.bindTexture(this.glTexture,0),this.glTexture}loadFromBasis(t,e){return this.loadAsync(()=>M(t,this.createDescriptor(t),e).then(t=>(this.glTexture=t,t)))}loadFromPixelData(t,e){Object(h["a"])(this.params.width>0&&this.params.height>0);const r=this.createDescriptor(t);return r.pixelFormat=1===this.params.components?6409:3===this.params.components?6407:6408,r.width=this.params.width,r.height=this.params.height,this.glTexture=new m["a"](t,r,e),t.bindTexture(this.glTexture,0),this.glTexture}async loadAsync(t){const e=Object(c["d"])();this.loadingController=e;const r=t(e.signal);this.loadingPromise=r;const n=()=>{this.loadingController===e&&(this.loadingController=null),this.loadingPromise===r&&(this.loadingPromise=null)};return r.then(n,n),r}loadFromURL(t,e,r){return this.loadAsync(async n=>{const i=await Object(d["a"])(r,{signal:n});return this.loadFromImage(t,i,e)})}loadFromImageElement(t,e,r){return r.complete?this.loadFromImage(t,r,e):this.loadAsync(async n=>{const i=await Object(l["a"])(r,r.src,!1,n);return this.loadFromImage(t,i,e)})}loadFromVideoElement(t,e,r){return r.readyState>=2?this.loadFromImage(t,r,e):this.loadFromVideoElementAsync(t,e,r)}loadFromVideoElementAsync(t,e,r){return this.loadAsync(n=>new Promise((i,a)=>{const u=()=>{r.removeEventListener("loadeddata",f),r.removeEventListener("error",l),Object(s["k"])(d)&&d.remove()},f=()=>{r.readyState>=2&&(u(),i(this.loadFromImage(t,r,e)))},l=t=>{u(),a(t||new o["a"]("Failed to load video"))};r.addEventListener("loadeddata",f),r.addEventListener("error",l);const d=Object(c["p"])(n,()=>l(Object(c["e"])()))}))}loadFromImage(t,e,r){const n=Y.getDataDimensions(e);this.params.width=n.width,this.params.height=n.height;const i=this.createDescriptor(t);return i.pixelFormat=3===this.params.components?6407:6408,!this.requiresPowerOfTwo(t,i)||Object(f["h"])(n.width)&&Object(f["h"])(n.height)?(i.width=n.width,i.height=n.height,this.glTexture=new m["a"](t,i,e),t.bindTexture(this.glTexture,0),this.glTexture):(this.glTexture=this.makePowerOfTwoTexture(t,e,n,i,r),t.bindTexture(this.glTexture,0),this.glTexture)}requiresPowerOfTwo(t,e){const r=33071,n="number"==typeof e.wrapMode?e.wrapMode===r:e.wrapMode.s===r&&e.wrapMode.t===r;return!Object(p["a"])(t.gl)&&(e.hasMipmap||!n)}makePowerOfTwoTexture(t,e,r,i,s){const{width:o,height:a}=r,c=Object(f["k"])(o),u=Object(f["k"])(a);let l;switch(i.width=c,i.height=u,this.params.powerOfTwoResizeMode){case 2:i.textureCoordinateScaleFactor=[o/c,a/u],l=new m["a"](t,i),l.updateData(0,0,0,o,a,e);break;case 1:case null:case void 0:l=this.stretchToPowerOfTwo(t,e,i,s);break;default:Object(n["a"])(this.params.powerOfTwoResizeMode)}return i.hasMipmap&&l.generateMipmap(),l}stretchToPowerOfTwo(t,e,r,n){const i=new m["a"](t,r),s=new y["a"](t,{colorTarget:0,depthStencilTarget:0},i),o=new m["a"](t,{target:3553,pixelFormat:r.pixelFormat,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!!r.flipped,maxAnisotropy:8,preMultiplyAlpha:r.preMultiplyAlpha},e),a=Object(_["b"])(t);return this.drawStretchedTexture(t,n,s,a,o,i),this.requiresFrameUpdates?this.powerOfTwoStretchInfo={vao:a,sourceTexture:o,framebuffer:s}:(a.dispose(!0),o.dispose(),s.detachColorTexture(),t.bindFramebuffer(null),s.dispose()),i}drawStretchedTexture(t,e,r,n,i,s){t.bindFramebuffer(r);const o=t.getViewport();t.setViewport(0,0,s.descriptor.width,s.descriptor.height);const a=e.program;t.bindProgram(a),a.setUniform4f("color",1,1,1,1),a.setUniform1i("tex",0),t.bindTexture(i,0),t.bindVAO(n),t.setPipelineState(e.pipeline),t.drawArrays(5,0,Object(g["f"])(n,"geometry")),t.bindFramebuffer(null),t.setViewport(o.x,o.y,o.width,o.height)}unload(){if(Object(s["k"])(this.powerOfTwoStretchInfo)){const{framebuffer:t,vao:e,sourceTexture:r}=this.powerOfTwoStretchInfo;e.dispose(!0),r.dispose(),t.dispose(),this.glTexture=null,this.powerOfTwoStretchInfo=null}if(Object(s["k"])(this.glTexture)&&(this.glTexture.dispose(),this.glTexture=null),Object(s["k"])(this.loadingController)){const t=this.loadingController;this.loadingController=null,this.loadingPromise=null,t.abort()}this.events.emit("unloaded")}}Y.DDS_ENCODING="image/vnd-ms.dds",Y.BASIS_ENCODING="image/x.basis"},2047:function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return u})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return d}));var n=r("38a4"),i=r("0b2d"),s=r("e431");function o(t,e,r){const n=Object(s["g"])(t,e)/Object(s["g"])(t,t);return Object(s["d"])(r,t,n)}function a(t,e){return Object(s["g"])(t,e)/Object(s["o"])(t)}function c(t,e){const r=Object(s["g"])(t,e)/(Object(s["o"])(t)*Object(s["o"])(e));return-Object(n["a"])(r)}function u(t,e,r){Object(s["q"])(f,t),Object(s["q"])(l,e);const i=Object(s["g"])(f,l),o=Object(n["a"])(i),a=Object(s["f"])(f,f,l);return Object(s["g"])(a,r)<0?2*Math.PI-o:o}const f=Object(i["e"])(),l=Object(i["e"])();var d=Object.freeze({__proto__:null,projectPoint:o,projectPointSignedLength:a,angle:c,angleAroundAxis:u})},2119:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("b2b2"),i=r("2ab7");class s{constructor(t){this.allocator=t,this.items=[],this.itemsPtr=0,this.tickHandle=i["a"].before(()=>this.reset()),this.grow()}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=Object(n["o"])(this.tickHandle)),this.items=Object(n["o"])(this.items)}get(){return 0===this.itemsPtr&&Object(i["a"])(()=>{}),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]}reset(){const t=Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*o);this.items.length=Math.min(t,this.items.length),this.itemsPtr=0}grow(){for(let t=0;t<Math.max(8,Math.min(this.items.length,o));t++)this.items.push(this.allocator())}}const o=1024},"2db0":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("2eab");async function i(t,e){const{data:r}=await Object(n["default"])(t,{responseType:"image",...e});return r}},"2f98":function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("38862"),i=r("7c51");function s(t){t.vertex.code.add(n["a"]`
    float screenSizePerspectiveMinSize(float size, vec4 factor) {
      float nonZeroSize = 1.0 - step(size, 0.0);

      return (
        factor.z * (
          1.0 +
          // Multiply by nzs ensures if size is 0, then we ignore proportionally scaled padding
          nonZeroSize *
          2.0 * factor.w / (
            size + (1.0 - nonZeroSize) // Adding 1 - nzs ensures we divide either by size, or by 1
          )
        )
      );
    }
  `),t.vertex.code.add(n["a"]`
    float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {
      return absCosAngle * absCosAngle * absCosAngle;
    }
  `),t.vertex.code.add(n["a"]`
    vec4 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec4 params) {
      return vec4(
        min(params.x / (distanceToCamera - params.y), 1.0),
        screenSizePerspectiveViewAngleDependentFactor(absCosAngle),
        params.z,
        params.w
      );
    }
  `),t.vertex.code.add(n["a"]`
    float applyScreenSizePerspectiveScaleFactorFloat(float size, vec4 factor) {
      return max(mix(size * factor.x, size, factor.y), screenSizePerspectiveMinSize(size, factor));
    }
  `),t.vertex.code.add(n["a"]`
    float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec4 params) {
      return applyScreenSizePerspectiveScaleFactorFloat(
        size,
        screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)
      );
    }
  `),t.vertex.code.add(n["a"]`
    vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec4 factor) {
      return mix(size * clamp(factor.x, screenSizePerspectiveMinSize(size.y, factor) / size.y, 1.0), size, factor.y);
    }
  `),t.vertex.code.add(n["a"]`
    vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec4 params) {
      return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));
    }
  `)}!function(t){function e(t,e){if(e.screenSizePerspective){Object(i["a"])(e.screenSizePerspective,t,"screenSizePerspective");const r=e.screenSizePerspectiveAlignment||e.screenSizePerspective;Object(i["a"])(r,t,"screenSizePerspectiveAlignment")}}t.bindUniforms=e}(s||(s={}))},"35b3":function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return u})),r.d(e,"c",(function(){return c}));var n=r("b2b2"),i=r("fa1e"),s=r("003f"),o=r("7c51");class a extends s["a"]{constructor(t,e){super(),this.type=3,this.supportsEdges=!1,this._visible=!0,this._renderPriority=0,this._insertOrder=0,this._vertexAttributeLocations=i["a"],this._params=Object(o["c"])(t,e),this.validateParameterValues(this._params)}dispose(){}get params(){return this._params}update(t){return!1}setParameterValues(t){Object(o["f"])(this._params,t)&&(this.validateParameterValues(this._params),this.parametersChanged())}validateParameterValues(t){}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this.parametersChanged())}isVisibleInPass(t){return!0}get renderOccluded(){return this.params.renderOccluded}get renderPriority(){return this._renderPriority}set renderPriority(t){t!==this._renderPriority&&(this._renderPriority=t,this.parametersChanged())}get insertOrder(){return this._insertOrder}set insertOrder(t){t!==this._insertOrder&&(this._insertOrder=t,this.parametersChanged())}get vertexAttributeLocations(){return this._vertexAttributeLocations}isVisible(){return this._visible}parametersChanged(){Object(n["k"])(this.materialRepository)&&this.materialRepository.materialChanged(this)}}function c(t,e){return t.isVisible()&&t.isVisibleInPass(e.pass)&&0!=(t.renderOccluded&e.renderOccludedMask)}const u={renderOccluded:1}},38862:function(t,e,r){"use strict";function n(t,...e){let r="";for(let n=0;n<e.length;n++)r+=t[n]+e[n];return r+=t[t.length-1],r}r.d(e,"a",(function(){return n})),function(t){function e(t){return Math.round(t).toString()}function r(t){return t.toPrecision(8)}t.int=e,t.float=r}(n||(n={}))},4054:function(t,e,r){"use strict";r.d(e,"a",(function(){return d})),r.d(e,"b",(function(){return f})),r.d(e,"c",(function(){return y})),r.d(e,"d",(function(){return b})),r.d(e,"e",(function(){return g})),r.d(e,"f",(function(){return O})),r.d(e,"g",(function(){return j}));var n=r("b2b2"),i=r("a915"),s=r("0b2d"),o=r("e431"),a=r("2119"),c=r("3349"),u=r("f091");function f(t){return t?{origin:Object(s["d"])(t.origin),direction:Object(s["d"])(t.direction)}:{origin:Object(s["e"])(),direction:Object(s["e"])()}}function l(t,e){const r=T.get();return r.origin=t,r.direction=e,r}function d(t,e=f()){return b(t.origin,t.direction,e)}function h(t,e,r=f()){return Object(o["j"])(r.origin,t),Object(o["i"])(r.direction,e,t),r}function b(t,e,r=f()){return Object(o["j"])(r.origin,t),Object(o["j"])(r.direction,e),r}function p(t,e,r=f()){return m(t,t.screenToRender(e,Object(i["b"])(u["d"].get())),r)}function m(t,e,r=f()){const s=Object(i["b"])(Object(c["c"])(u["d"].get(),e));if(s[2]=0,!t.unprojectFromRenderScreen(s,r.origin))return null;const a=Object(i["b"])(Object(c["c"])(u["d"].get(),e));a[2]=1;const l=t.unprojectFromRenderScreen(a,u["d"].get());return Object(n["j"])(l)?null:(Object(o["i"])(r.direction,l,r.origin),r)}function g(t,e,r=f()){return _(t,t.screenToRender(e,Object(i["b"])(u["d"].get())),r)}function _(t,e,r=f()){Object(o["j"])(r.origin,t.eye);const i=Object(o["v"])(u["d"].get(),e[0],e[1],1),s=t.unprojectFromRenderScreen(i,u["d"].get());return Object(n["j"])(s)?null:(Object(o["i"])(r.direction,s,r.origin),r)}function y(t,e){const r=Object(o["f"])(u["d"].get(),Object(o["q"])(u["d"].get(),t.direction),Object(o["i"])(u["d"].get(),e,t.origin));return Object(o["g"])(r,r)}function v(t,e){return Math.sqrt(y(t,e))}function O(t,e,r){const n=Object(o["g"])(t.direction,Object(o["i"])(r,e,t.origin));return Object(o["e"])(r,t.origin,Object(o["d"])(r,t.direction,n)),r}function x(){return{origin:null,direction:null}}const T=new a["a"](x);var j=Object.freeze({__proto__:null,create:f,wrap:l,copy:d,fromPoints:h,fromValues:b,fromScreen:p,fromRender:m,fromScreenAtEye:g,fromRenderAtEye:_,distance2:y,distance:v,closestPoint:O,createWrapper:x})},4377:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("38862");function i(t){t.code.add(n["a"]`
    vec4 premultiplyAlpha(vec4 v) {
      return vec4(v.rgb * v.a, v.a);
    }

    // Note: the min in the last line has been added to fix an instability in chrome.
    // See https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/23911
    // With proper floating point handling, the value could never be >1.
    vec3 rgb2hsv(vec3 c) {
      vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
      vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
      vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);

      float d = q.x - min(q.w, q.y);
      float e = 1.0e-10;
      return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
    }

    vec3 hsv2rgb(vec3 c) {
      vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
      vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
      return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
    }

    float rgb2v(vec3 c) {
      return max(c.x, max(c.y, c.z));
    }
  `)}},"47f8":function(t,e,r){"use strict";function n(){return new Float32Array(3)}function i(t){const e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(t,e,r){const n=new Float32Array(3);return n[0]=t,n[1]=e,n[2]=r,n}function o(t,e){return new Float32Array(t,e,3)}function a(){return n()}function c(){return s(1,1,1)}function u(){return s(1,0,0)}function f(){return s(0,1,0)}function l(){return s(0,0,1)}r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return s}));const d=a(),h=c(),b=u(),p=f(),m=l();Object.freeze({__proto__:null,create:n,clone:i,fromValues:s,createView:o,zeros:a,ones:c,unitX:u,unitY:f,unitZ:l,ZEROS:d,ONES:h,UNIT_X:b,UNIT_Y:p,UNIT_Z:m})},"4db9":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("38862");function i(t,e){e.linearDepth?t.vertex.code.add(n["a"]`
    vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {
      vec4 eye = view * vec4(pos, 1.0);
      depth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;
      return proj * eye;
    }
    `):t.vertex.code.add(n["a"]`
    vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {
      // Make sure the order of operations is the same as in transformPositionWithDepth.
      return proj * (view * vec4(pos, 1.0));
    }
    `)}},"501b":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("38862");function i(t){t.code.add(n["a"]`
    // This is the maximum float value representable as 32bit fixed point,
    // it is rgba2float(vec4(1)) inlined.
    const float MAX_RGBA_FLOAT =
      255.0 / 256.0 +
      255.0 / 256.0 / 256.0 +
      255.0 / 256.0 / 256.0 / 256.0 +
      255.0 / 256.0 / 256.0 / 256.0 / 256.0;

    // Factors to convert to fixed point, i.e. factors (256^0, 256^1, 256^2, 256^3)
    const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);

    vec4 float2rgba(const float value) {
      // Make sure value is in the domain we can represent
      float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);

      // Decompose value in 32bit fixed point parts represented as
      // uint8 rgba components. Decomposition uses the fractional part after multiplying
      // by a power of 256 (this removes the bits that are represented in the previous
      // component) and then converts the fractional part to 8bits.
      vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);

      // Convert uint8 values (from 0 to 255) to floating point representation for
      // the shader
      const float toU8AsFloat = 1.0 / 255.0;

      return fixedPointU8 * toU8AsFloat;
    }

    // Factors to convert rgba back to float
    const vec4 RGBA_2_FLOAT_FACTORS = vec4(
      255.0 / (256.0),
      255.0 / (256.0 * 256.0),
      255.0 / (256.0 * 256.0 * 256.0),
      255.0 / (256.0 * 256.0 * 256.0 * 256.0)
    );

    float rgba2float(vec4 rgba) {
      // Convert components from 0->1 back to 0->255 and then
      // add the components together with their corresponding
      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)
      return dot(rgba, RGBA_2_FLOAT_FACTORS);
    }
  `)}},"55e6":function(t,e,r){"use strict";r.d(e,"a",(function(){return d})),r.d(e,"b",(function(){return v})),r.d(e,"c",(function(){return z})),r.d(e,"d",(function(){return W})),r.d(e,"e",(function(){return C})),r.d(e,"f",(function(){return m})),r.d(e,"g",(function(){return g})),r.d(e,"h",(function(){return _})),r.d(e,"i",(function(){return y})),r.d(e,"j",(function(){return w})),r.d(e,"k",(function(){return B})),r.d(e,"l",(function(){return j})),r.d(e,"m",(function(){return h})),r.d(e,"n",(function(){return O})),r.d(e,"o",(function(){return V})),r.d(e,"p",(function(){return q})),r.d(e,"q",(function(){return U})),r.d(e,"r",(function(){return E})),r.d(e,"s",(function(){return D})),r.d(e,"t",(function(){return S})),r.d(e,"u",(function(){return b})),r.d(e,"v",(function(){return x})),r.d(e,"w",(function(){return k})),r.d(e,"x",(function(){return G})),r.d(e,"y",(function(){return R})),r.d(e,"z",(function(){return P})),r.d(e,"A",(function(){return I})),r.d(e,"B",(function(){return A})),r.d(e,"C",(function(){return p})),r.d(e,"D",(function(){return T})),r.d(e,"E",(function(){return H})),r.d(e,"F",(function(){return X})),r.d(e,"G",(function(){return N})),r.d(e,"H",(function(){return F})),r.d(e,"I",(function(){return L})),r.d(e,"J",(function(){return M}));class n{constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.elementCount=9;const s=this.TypedArrayConstructor;void 0===n&&(n=9*s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getMat(t,e){const r=t*this.typedBufferStride;for(let n=0;n<9;n++)e[n]=this.typedBuffer[r+n];return e}setMat(t,e){const r=t*this.typedBufferStride;for(let n=0;n<9;n++)this.typedBuffer[r+n]=e[n]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}copyFrom(t,e,r){const n=this.typedBuffer,i=e.typedBuffer,s=t*this.typedBufferStride,o=r*e.typedBufferStride;for(let a=0;a<9;++a)n[s+a]=i[o+a]}get buffer(){return this.typedBuffer.buffer}}n.ElementCount=9;class i{constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.elementCount=16;const s=this.TypedArrayConstructor;void 0===n&&(n=16*s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getMat(t,e){const r=t*this.typedBufferStride;for(let n=0;n<16;n++)e[n]=this.typedBuffer[r+n];return e}setMat(t,e){const r=t*this.typedBufferStride;for(let n=0;n<16;n++)this.typedBuffer[r+n]=e[n]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}copyFrom(t,e,r){const n=this.typedBuffer,i=e.typedBuffer,s=t*this.typedBufferStride,o=r*e.typedBufferStride;for(let a=0;a<16;++a)n[s+a]=i[o+a]}get buffer(){return this.typedBuffer.buffer}}i.ElementCount=16;class s{constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.elementCount=1;const s=this.TypedArrayConstructor;void 0===n&&(n=s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}get(t){return this.typedBuffer[t*this.typedBufferStride]}set(t,e){this.typedBuffer[t*this.typedBufferStride]=e}get buffer(){return this.typedBuffer.buffer}}s.ElementCount=1;var o=r("3349");class a{constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.elementCount=2;const s=this.TypedArrayConstructor;void 0===n&&(n=2*s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getVec(t,e){return Object(o["r"])(e,this.typedBuffer[t*this.typedBufferStride],this.typedBuffer[t*this.typedBufferStride+1])}setVec(t,e){this.typedBuffer[t*this.typedBufferStride]=e[0],this.typedBuffer[t*this.typedBufferStride+1]=e[1]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r){this.typedBuffer[t*this.typedBufferStride]=e,this.typedBuffer[t*this.typedBufferStride+1]=r}copyFrom(t,e,r){const n=this.typedBuffer,i=e.typedBuffer,s=t*this.typedBufferStride,o=r*e.typedBufferStride;n[s]=i[o],n[s+1]=i[o+1]}get buffer(){return this.typedBuffer.buffer}}a.ElementCount=2;var c=r("e431");class u{constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.elementCount=3;const s=this.TypedArrayConstructor;void 0===n&&(n=3*s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getVec(t,e){return Object(c["v"])(e,this.typedBuffer[t*this.typedBufferStride],this.typedBuffer[t*this.typedBufferStride+1],this.typedBuffer[t*this.typedBufferStride+2])}setVec(t,e){this.typedBuffer[t*this.typedBufferStride]=e[0],this.typedBuffer[t*this.typedBufferStride+1]=e[1],this.typedBuffer[t*this.typedBufferStride+2]=e[2]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r,n){this.typedBuffer[t*this.typedBufferStride]=e,this.typedBuffer[t*this.typedBufferStride+1]=r,this.typedBuffer[t*this.typedBufferStride+2]=n}copyFrom(t,e,r){const n=this.typedBuffer,i=e.typedBuffer,s=t*this.typedBufferStride,o=r*e.typedBufferStride;n[s]=i[o],n[s+1]=i[o+1],n[s+2]=i[o+2]}get buffer(){return this.typedBuffer.buffer}}u.ElementCount=3;var f=r("7577");class l{constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.elementCount=4;const s=this.TypedArrayConstructor;void 0===n&&(n=4*s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getVec(t,e){return Object(f["l"])(e,this.typedBuffer[t*this.typedBufferStride],this.typedBuffer[t*this.typedBufferStride+1],this.typedBuffer[t*this.typedBufferStride+2],this.typedBuffer[t*this.typedBufferStride+3])}setVec(t,e){this.typedBuffer[t*this.typedBufferStride]=e[0],this.typedBuffer[t*this.typedBufferStride+1]=e[1],this.typedBuffer[t*this.typedBufferStride+2]=e[2],this.typedBuffer[t*this.typedBufferStride+3]=e[3]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r,n,i){this.typedBuffer[t*this.typedBufferStride]=e,this.typedBuffer[t*this.typedBufferStride+1]=r,this.typedBuffer[t*this.typedBufferStride+2]=n,this.typedBuffer[t*this.typedBufferStride+3]=i}copyFrom(t,e,r){const n=this.typedBuffer,i=e.typedBuffer,s=t*this.typedBufferStride,o=r*e.typedBufferStride;n[s]=i[o],n[s+1]=i[o+1],n[s+2]=i[o+2],n[s+3]=i[o+3]}get buffer(){return this.typedBuffer.buffer}}l.ElementCount=4;class d extends s{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}static fromTypedArray(t,e){return new d(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}d.ElementType="f32";class h extends a{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}static fromTypedArray(t,e){return new h(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}h.ElementType="f32";class b extends u{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}static fromTypedArray(t,e){return new b(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}b.ElementType="f32";class p extends l{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}static fromTypedArray(t,e){return new p(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}p.ElementType="f32";class m extends n{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}static fromTypedArray(t,e){return new m(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}m.ElementType="f32";class g extends n{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}static fromTypedArray(t,e){return new g(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}g.ElementType="f64";class _ extends i{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}static fromTypedArray(t,e){return new _(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}_.ElementType="f32";class y extends i{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}static fromTypedArray(t,e){return new y(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}y.ElementType="f64";class v extends s{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}static fromTypedArray(t,e){return new v(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}v.ElementType="f64";class O extends a{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}static fromTypedArray(t,e){return new O(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}O.ElementType="f64";class x extends u{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}static fromTypedArray(t,e){return new x(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}x.ElementType="f64";class T extends l{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}static fromTypedArray(t,e){return new T(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}T.ElementType="f64";class j extends s{constructor(t,e=0,r,n){super(Uint8Array,t,e,r,n),this.elementType="u8"}static fromTypedArray(t,e){return new j(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}j.ElementType="u8";class S extends a{constructor(t,e=0,r,n){super(Uint8Array,t,e,r,n),this.elementType="u8"}static fromTypedArray(t,e){return new S(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}S.ElementType="u8";class A extends u{constructor(t,e=0,r,n){super(Uint8Array,t,e,r,n),this.elementType="u8"}static fromTypedArray(t,e){return new A(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}A.ElementType="u8";class M extends l{constructor(t,e=0,r,n){super(Uint8Array,t,e,r,n),this.elementType="u8"}static fromTypedArray(t,e){return new M(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}M.ElementType="u8";class w extends s{constructor(t,e=0,r,n){super(Uint16Array,t,e,r,n),this.elementType="u16"}static fromTypedArray(t,e){return new w(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}w.ElementType="u16";class E extends a{constructor(t,e=0,r,n){super(Uint16Array,t,e,r,n),this.elementType="u16"}static fromTypedArray(t,e){return new E(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}E.ElementType="u16";class P extends u{constructor(t,e=0,r,n){super(Uint16Array,t,e,r,n),this.elementType="u16"}static fromTypedArray(t,e){return new P(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}P.ElementType="u16";class F extends l{constructor(t,e=0,r,n){super(Uint16Array,t,e,r,n),this.elementType="u16"}static fromTypedArray(t,e){return new F(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}F.ElementType="u16";class B extends s{constructor(t,e=0,r,n){super(Uint32Array,t,e,r,n),this.elementType="u32"}static fromTypedArray(t,e){return new B(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}B.ElementType="u32";class D extends a{constructor(t,e=0,r,n){super(Uint32Array,t,e,r,n),this.elementType="u32"}static fromTypedArray(t,e){return new D(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}D.ElementType="u32";class I extends u{constructor(t,e=0,r,n){super(Uint32Array,t,e,r,n),this.elementType="u32"}static fromTypedArray(t,e){return new I(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}I.ElementType="u32";class L extends l{constructor(t,e=0,r,n){super(Uint32Array,t,e,r,n),this.elementType="u32"}static fromTypedArray(t,e){return new L(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}L.ElementType="u32";class C extends s{constructor(t,e=0,r,n){super(Int8Array,t,e,r,n),this.elementType="i8"}static fromTypedArray(t,e){return new C(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}C.ElementType="i8";class U extends a{constructor(t,e=0,r,n){super(Int8Array,t,e,r,n),this.elementType="i8"}static fromTypedArray(t,e){return new U(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}U.ElementType="i8";class R extends u{constructor(t,e=0,r,n){super(Int8Array,t,e,r,n),this.elementType="i8"}static fromTypedArray(t,e){return new R(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}R.ElementType="i8";class N extends l{constructor(t,e=0,r,n){super(Int8Array,t,e,r,n),this.elementType="i8"}static fromTypedArray(t,e){return new N(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}N.ElementType="i8";class z extends s{constructor(t,e=0,r,n){super(Int16Array,t,e,r,n),this.elementType="i16"}static fromTypedArray(t,e){return new z(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}z.ElementType="i16";class V extends a{constructor(t,e=0,r,n){super(Int16Array,t,e,r,n),this.elementType="i16"}static fromTypedArray(t,e){return new V(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}V.ElementType="i16";class k extends u{constructor(t,e=0,r,n){super(Int16Array,t,e,r,n),this.elementType="i16"}static fromTypedArray(t,e){return new k(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}k.ElementType="i16";class H extends l{constructor(t,e=0,r,n){super(Int16Array,t,e,r,n),this.elementType="i16"}static fromTypedArray(t,e){return new H(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}H.ElementType="i16";class W extends s{constructor(t,e=0,r,n){super(Int32Array,t,e,r,n),this.elementType="i32"}static fromTypedArray(t,e){return new W(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}W.ElementType="i32";class q extends a{constructor(t,e=0,r,n){super(Int32Array,t,e,r,n),this.elementType="i32"}static fromTypedArray(t,e){return new q(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}q.ElementType="i32";class G extends u{constructor(t,e=0,r,n){super(Int32Array,t,e,r,n),this.elementType="i32"}static fromTypedArray(t,e){return new G(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}G.ElementType="i32";class X extends l{constructor(t,e=0,r,n){super(Int32Array,t,e,r,n),this.elementType="i32"}static fromTypedArray(t,e){return new X(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}X.ElementType="i32"},5957:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return f})),r.d(e,"c",(function(){return l})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return c}));var n=r("55e6"),i=r("1153");function s(t,e,r,n){const i=r.typedBuffer,s=r.typedBufferStride,o=t.length;n*=s;for(let a=0;a<o;++a){const r=2*t[a];i[n]=e[r],i[n+1]=e[r+1],n+=s}}function o(t,e,r,n,i){const s=r.typedBuffer,o=r.typedBufferStride,a=t.length;if(n*=o,null==i||1===i)for(let c=0;c<a;++c){const r=3*t[c];s[n]=e[r],s[n+1]=e[r+1],s[n+2]=e[r+2],n+=o}else for(let c=0;c<a;++c){const r=3*t[c];for(let t=0;t<i;++t)s[n]=e[r],s[n+1]=e[r+1],s[n+2]=e[r+2],n+=o}}function a(t,e,r,n,i=1){const s=r.typedBuffer,o=r.typedBufferStride,a=t.length;if(n*=o,1===i)for(let c=0;c<a;++c){const r=4*t[c];s[n]=e[r],s[n+1]=e[r+1],s[n+2]=e[r+2],s[n+3]=e[r+3],n+=o}else for(let c=0;c<a;++c){const r=4*t[c];for(let t=0;t<i;++t)s[n]=e[r],s[n+1]=e[r+1],s[n+2]=e[r+2],s[n+3]=e[r+3],n+=o}}function c(t,e,r,n,i,s=1){if(r){const o=n.typedBuffer,a=n.typedBufferStride,c=t.length,u=r[0],f=r[1],l=r[2],d=r[4],h=r[5],b=r[6],p=r[8],m=r[9],g=r[10],_=r[12],y=r[13],v=r[14];if(i*=a,1===s)for(let r=0;r<c;++r){const n=3*t[r],s=e[n],c=e[n+1],O=e[n+2];o[i]=u*s+d*c+p*O+_,o[i+1]=f*s+h*c+m*O+y,o[i+2]=l*s+b*c+g*O+v,i+=a}else for(let r=0;r<c;++r){const n=3*t[r],c=e[n],O=e[n+1],x=e[n+2],T=u*c+d*O+p*x+_,j=f*c+h*O+m*x+y,S=l*c+b*O+g*x+v;for(let t=0;t<s;++t)o[i]=T,o[i+1]=j,o[i+2]=S,i+=a}}else o(t,e,n,i,s)}function u(t,e,r,n,i,s){if(r){const o=r,a=n.typedBuffer,c=n.typedBufferStride,u=t.length,f=o[0],l=o[1],d=o[2],h=o[4],b=o[5],p=o[6],m=o[8],g=o[9],_=o[10],y=Math.abs(1-f*f+h*h+m*m)>1e-5||Math.abs(1-l*l+b*b+g*g)>1e-5||Math.abs(1-d*d+p*p+_*_)>1e-5,v=1e-6,O=1-v;if(i*=c,1===s)for(let r=0;r<u;++r){const n=3*t[r],s=e[n],o=e[n+1],u=e[n+2];let x=f*s+h*o+m*u,T=l*s+b*o+g*u,j=d*s+p*o+_*u;if(y){const t=x*x+T*T+j*j;if(t<O&&t>v){const e=Math.sqrt(t);x/=e,T/=e,j/=e}}a[i+0]=x,a[i+1]=T,a[i+2]=j,i+=c}else for(let r=0;r<u;++r){const n=3*t[r],o=e[n],u=e[n+1],x=e[n+2];let T=f*o+h*u+m*x,j=l*o+b*u+g*x,S=d*o+p*u+_*x;if(y){const t=T*T+j*j+S*S;if(t<O&&t>v){const e=Math.sqrt(t);T/=e,j/=e,S/=e}}for(let t=0;t<s;++t)a[i+0]=T,a[i+1]=j,a[i+2]=S,i+=c}}else o(t,e,n,i,s)}function f(t,e,r,n,i,s=1){const o=n.typedBuffer,a=n.typedBufferStride,c=t.length;if(i*=a,1===s){if(4===r)for(let u=0;u<c;++u){const r=4*t[u];o[i]=e[r],o[i+1]=e[r+1],o[i+2]=e[r+2],o[i+3]=e[r+3],i+=a}else if(3===r)for(let u=0;u<c;++u){const r=3*t[u];o[i]=e[r],o[i+1]=e[r+1],o[i+2]=e[r+2],o[i+3]=255,i+=a}}else if(4===r)for(let u=0;u<c;++u){const r=4*t[u];for(let t=0;t<s;++t)o[i]=e[r],o[i+1]=e[r+1],o[i+2]=e[r+2],o[i+3]=e[r+3],i+=a}else if(3===r)for(let u=0;u<c;++u){const r=3*t[u];for(let t=0;t<s;++t)o[i]=e[r],o[i+1]=e[r+1],o[i+2]=e[r+2],o[i+3]=255,i+=a}}function l(t,e,r,o,l,d){for(const h of e.fieldNames){const e=t.vertexAttributes.get(h),b=t.indices.get(h);if(e&&b)switch(h){case"position":{Object(i["a"])(3===e.size);const t=l.getField(h,n["u"]);t&&c(b,e.data,r,t,d);break}case"normal":{Object(i["a"])(3===e.size);const t=l.getField(h,n["u"]);t&&u(b,e.data,o,t,d,1);break}case"uv0":{Object(i["a"])(2===e.size);const t=l.getField(h,n["m"]);t&&s(b,e.data,t,d);break}case"color":{Object(i["a"])(3===e.size||4===e.size);const t=l.getField(h,n["J"]);t&&f(b,e.data,e.size,t,d);break}case"symbolColor":{Object(i["a"])(3===e.size||4===e.size);const t=l.getField(h,n["J"]);t&&f(b,e.data,e.size,t,d);break}case"tangent":{Object(i["a"])(4===e.size);const t=l.getField(h,n["C"]);t&&a(b,e.data,t,d);break}}}}},"5a22":function(t,e,r){"use strict";r.d(e,"a",(function(){return g}));var n=r("b2b2"),i=r("0b2d"),s=r("e431"),o=r("680b"),a=r("d791"),c=r("afe1"),u=r("f895"),f=r("1153"),l=r("003f"),d=r("ecd7"),h=r("f2e0");class b{constructor(){this._disposed=!1}get disposed(){return this._disposed}get shaderTransformation(){return this._shaderTransformation}acquire(t,e,r,n,i,s){this.id=Object(h["a"])(),this.geometry=t,this.material=e,this.transformation=r,this.instanceParameters=n,this.origin=i,this._shaderTransformation=s,this._disposed=!1}release(){this._disposed=!1}dispose(){this._disposed=!0}getStaticTransformation(){return this.transformation}getShaderTransformation(){return Object(n["k"])(this._shaderTransformation)?this._shaderTransformation(this.transformation):this.transformation}computeAttachmentOrigin(t){return!!(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,t):this.geometry.computeAttachmentOrigin(t))&&(Object(s["l"])(t,t,this.getStaticTransformation()),!0)}}b.pool=new d["a"](b);var p=r("bea9"),m=r("b623");class g extends l["a"]{constructor(t={}){super(),this.type=1,this._geometryRecords=new Array,this._geometries=new Array,this._objectTransformation=Object(c["b"])(),this._bvObjectSpace=new y,this._bvWorldSpace=new y,this._bvDirty=!0,this._hasVolatileTransformation=!1,this._visible=!0,this.castShadow=null==t.castShadow||t.castShadow,this.metadata=t.metadata,this.metadata&&this.metadata.isElevationSource&&(this.metadata.lastValidElevationBB=new _),this.transformation=Object(c["b"])();const{geometries:e,materials:r,transformations:n,origins:i}=t;if(Array.isArray(e)){Object(f["a"])(r.length===e.length,"Object3D: materials don't match geometries"),Object(f["a"])(n.length===e.length,"Object3D: transformations don't match geometries"),this._geometryRecords.length=e.length,this._geometries.length=e.length;for(let t=0;t<e.length;t++)this._geometries[t]=e[t],this._geometryRecords[t]=b.pool.acquire(e[t],r[t],Object(c["c"])(n[t]),{highlights:null,occludees:null,visible:!0},i&&i[t])}}get geometryRecords(){return this._geometryRecords}get geometries(){return this._geometries}get transformation(){return this._objectTransformation}set transformation(t){Object(a["c"])(this._objectTransformation,t),this._invalidateBoundingVolume(),this._emit("objectTransformation",this)}dispose(){this._geometryRecords.length=0,this._geometries.length=0}get parentLayer(){return this._parentLayer}set parentLayer(t){Object(f["a"])(null==this._parentLayer||null==t,"Object3D can only be added to a single Layer"),this._parentLayer=t}getNumGeometryRecords(){return this._geometryRecords.length}getGeometryRecord(t){return Object(f["a"])(t>=0&&t<this._geometryRecords.length,"Object3d.getGeometryDataByIndex: index out of range"),this._geometryRecords[t]}addGeometry(t,e,r,i,s,o){r=r||c["a"],this._geometries.push(t);const a=b.pool.acquire(t,e,r,i||{highlights:null,occludees:null,visible:!0},s,o);return this._geometryRecords.push(a),this._hasVolatileTransformation=this._hasVolatileTransformation||Object(n["k"])(a.shaderTransformation),this._emit("objectGeometryAdded",{object:this,record:a}),this._invalidateBoundingVolume(),a}removeGeometry(t){const e=this._geometryRecords.splice(t,1)[0];return this._hasVolatileTransformation=Object(n["k"])(e.shaderTransformation)?this._geometryRecords.some(t=>Object(n["k"])(t.shaderTransformation)):this._hasVolatileTransformation,e.dispose(),this._geometries.splice(t,1),this._emit("objectGeometryRemoved",{object:this,record:e}),this._invalidateBoundingVolume(),e}removeAllGeometries(){for(;this.getNumGeometryRecords()>0;)this.removeGeometry(0)}geometryVertexAttrsUpdated(t){this._emit("vertexAttrsUpdated",{object:this,record:this._geometryRecords[t]}),this._invalidateBoundingVolume()}get isVisible(){return this._visible}setVisible(t){this._visible=t;for(const e of this._geometryRecords)e.instanceParameters.visible=this._visible;this._emit("visibilityChanged",this)}maskOccludee(){const t=new p["a"](1);for(const e of this._geometryRecords)e.instanceParameters.occludees=Object(m["b"])(e.instanceParameters.occludees,t);return this._emit("occlusionChanged",this),t}removeOcclude(t){for(const e of this._geometryRecords)e.instanceParameters.occludees=Object(m["f"])(e.instanceParameters.occludees,t);this._emit("occlusionChanged",this)}highlight(){const t=new p["a"](0);for(const e of this._geometryRecords)e.instanceParameters.highlights=Object(m["b"])(e.instanceParameters.highlights,t);return this._emit("highlightChanged",this),t}removeHighlight(t){for(const e of this._geometryRecords)e.instanceParameters.highlights=Object(m["f"])(e.instanceParameters.highlights,t);this._emit("highlightChanged",this)}getCombinedStaticTransformation(t,e){return Object(a["l"])(Object(n["r"])(e,Object(c["b"])()),this.transformation,t.getStaticTransformation())}getCombinedShaderTransformation(t,e){return e=e||Object(c["b"])(),Object(a["l"])(e,this.transformation,t.getShaderTransformation()),e}hasVolativeTransformation(){return this._hasVolatileTransformation}getBBMin(t){return this._validateBoundingVolume(),t?this._bvObjectSpace.bbMin:this._bvWorldSpace.bbMin}getBBMax(t){return this._validateBoundingVolume(),t?this._bvObjectSpace.bbMax:this._bvWorldSpace.bbMax}getBounds(t){return this._validateBoundingVolume(),t?this._bvObjectSpace.bounds:this._bvWorldSpace.bounds}_validateBoundingVolume(){if(!this._bvDirty&&!this._hasVolatileTransformation)return;this._bvObjectSpace.init(),this._bvWorldSpace.init();for(let i=0;i<this._geometryRecords.length;++i){const t=this._geometries[i],e=this._geometryRecords[i],r=t.boundingInfo;Object(n["k"])(r)&&(this._calculateTransformedBoundingVolume(r,this._bvObjectSpace,e.getShaderTransformation()),this._calculateTransformedBoundingVolume(r,this._bvWorldSpace,this.getCombinedShaderTransformation(e)))}Object(s["h"])(this._bvObjectSpace.bounds,this._bvObjectSpace.bbMin,this._bvObjectSpace.bbMax,.5),Object(s["h"])(this._bvWorldSpace.bounds,this._bvWorldSpace.bbMin,this._bvWorldSpace.bbMax,.5);const t=Object(i["e"])(),e=Object(i["e"])(),r=Object(o["e"])(this.transformation);for(let i=0;i<this._geometryRecords.length;++i){const a=this._geometries[i].boundingInfo;if(Object(n["j"])(a))continue;const c=this._geometryRecords[i].getShaderTransformation(),u=Object(o["e"])(c);Object(s["l"])(t,a.getCenter(),c);const f=Object(s["n"])(t,this._bvObjectSpace.bounds),l=a.getBSRadius()*u;this._bvObjectSpace.bounds[3]=Math.max(this._bvObjectSpace.bounds[3],f+l),Object(s["l"])(e,t,this.transformation);const d=Object(s["n"])(e,this._bvWorldSpace.bounds),h=l*r;this._bvWorldSpace.bounds[3]=Math.max(this._bvWorldSpace.bounds[3],d+h)}this._bvDirty=!1}_calculateTransformedBoundingVolume(t,e,r){const n=t.getBBMin(),o=t.getBBMax(),a=Object(i["d"])(n),c=Object(i["d"])(o);Object(s["l"])(a,a,r),Object(s["l"])(c,c,r);for(let i=0;i<3;++i)e.bbMin[i]=Math.min(e.bbMin[i],a[i],c[i]),e.bbMax[i]=Math.max(e.bbMax[i],a[i],c[i]);for(let i=0;i<3;++i){Object(s["j"])(a,n),Object(s["j"])(c,o),a[i]=o[i],c[i]=n[i],Object(s["l"])(a,a,r),Object(s["l"])(c,c,r);for(let t=0;t<3;++t)e.bbMin[t]=Math.min(e.bbMin[t],a[t],c[t]),e.bbMax[t]=Math.max(e.bbMax[t],a[t],c[t])}}_invalidateBoundingVolume(){this._bvDirty=!0,Object(n["k"])(this._parentLayer)&&this._parentLayer.notifyObjectBBChanged(this,this._bvWorldSpace.bounds)}_emit(t,e){Object(n["k"])(this._parentLayer)&&this._parentLayer.events.emit(t,e)}get test(){const t=this;return{hasGeometry:e=>t._geometries.indexOf(e)>-1,getGeometryIndex:e=>t._geometries.indexOf(e)}}}class _{constructor(){this.bbMin=Object(i["g"])(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.bbMax=Object(i["g"])(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}isEmpty(){return this.bbMax[0]<this.bbMin[0]&&this.bbMax[1]<this.bbMin[1]&&this.bbMax[2]<this.bbMin[2]}}class y extends _{constructor(){super(...arguments),this.bounds=Object(u["b"])()}init(){Object(s["v"])(this.bbMin,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),Object(s["v"])(this.bbMax,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),Object(u["a"])(this.bounds)}}},"5f6c":function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return n}));"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t||"undefined"!=typeof self&&self;function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function i(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return s(t,null==e?r.path:e)}},r.exports),r.exports}function s(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}}).call(this,r("c8ba"))},"68af":function(t,e,r){"use strict";var n=r("b2b2"),i=r("8dd3"),s=r("d7f7");class o extends s["a"]{constructor(t){super(t),this._textureIDs=new Set,this._textureRepository=t.textureRep,this._textureId=t.textureId,this._initTransparent=!!t.initTextureTransparent,this._texture=this._acquireIfNotUndefined(this._textureId),this._textureNormal=this._acquireIfNotUndefined(t.normalTextureId),this._textureEmissive=this._acquireIfNotUndefined(t.emissiveTextureId),this._textureOcclusion=this._acquireIfNotUndefined(t.occlusionTextureId),this._textureMetallicRoughness=this._acquireIfNotUndefined(t.metallicRoughnessTextureId)}dispose(){this._textureIDs.forEach(t=>this._textureRepository.release(t)),this._textureIDs.clear()}updateTexture(t){t!==this._textureId&&(this._releaseIfNotUndefined(this._textureId),this._textureId=t,this._texture=this._acquireIfNotUndefined(this._textureId))}bindTexture(t,e){Object(n["k"])(this._texture)&&(e.setUniform1i("tex",i["a"].DIFFUSE),t.bindTexture(this._texture.glTexture,i["a"].DIFFUSE)),Object(n["k"])(this._textureNormal)&&(e.setUniform1i("normalTexture",i["a"].NORMAL),t.bindTexture(this._textureNormal.glTexture,i["a"].NORMAL)),Object(n["k"])(this._textureEmissive)&&(e.setUniform1i("texEmission",i["a"].EMISSION),t.bindTexture(this._textureEmissive.glTexture,i["a"].EMISSION)),Object(n["k"])(this._textureOcclusion)&&(e.setUniform1i("texOcclusion",i["a"].OCCLUSION),t.bindTexture(this._textureOcclusion.glTexture,i["a"].OCCLUSION)),Object(n["k"])(this._textureMetallicRoughness)&&(e.setUniform1i("texMetallicRoughness",i["a"].METALLIC_ROUGHNESS),t.bindTexture(this._textureMetallicRoughness.glTexture,i["a"].METALLIC_ROUGHNESS))}bindTextureScale(t,e){const r=Object(n["k"])(this._texture)&&this._texture.glTexture;r&&r.descriptor.textureCoordinateScaleFactor?e.setUniform2fv("textureCoordinateScaleFactor",r.descriptor.textureCoordinateScaleFactor):e.setUniform2f("textureCoordinateScaleFactor",1,1)}_acquireIfNotUndefined(t){if(!Object(n["j"])(t))return this._textureIDs.add(t),this._textureRepository.acquire(t,this._initTransparent)}_releaseIfNotUndefined(t){Object(n["j"])(t)||(this._textureIDs.delete(t),this._textureRepository.release(t))}}e["a"]=o},"690a":function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("e92d");const i=n["a"].getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class s{constructor(){this.includedModules=new Map}include(t,e){this.includedModules.has(t)?this.includedModules.get(t)!==e&&i.error("Trying to include shader module multiple times with different sets of options."):(this.includedModules.set(t,e),t(this.builder,e))}}class o extends s{constructor(){super(...arguments),this.vertex=new u,this.fragment=new u,this.attributes=new f,this.varyings=new l,this.extensions=new d,this.constants=new h}get builder(){return this}generateSource(t){const e=this.extensions.generateSource(t),r=this.attributes.generateSource(t),n=this.varyings.generateSource(),i="vertex"===t?this.vertex:this.fragment,s=i.uniforms.generateSource(),o=i.code.generateSource(),a="vertex"===t?p:b,c=this.constants.generateSource().concat(i.constants.generateSource());return`\n${e.join("\n")}\n\n${a}\n\n${c.join("\n")}\n\n${s.join("\n")}\n\n${r.join("\n")}\n\n${n.join("\n")}\n\n${o.join("\n")}`}}class a{constructor(){this._entries=new Array,this._set=new Set}add(t,e,r){const n=`${t}_${e}_${r}`;return this._set.has(n)||(this._entries.push([t,e,r]),this._set.add(n)),this}generateSource(){const t=t=>t?`[${t}]`:"";return this._entries.map(e=>`uniform ${e[1]} ${e[0]}${t(e[2])};`)}}class c{constructor(){this._entries=new Array}add(t){this._entries.push(t)}generateSource(){return this._entries}}class u extends s{constructor(){super(...arguments),this.uniforms=new a,this.code=new c,this.constants=new h}get builder(){return this}}class f{constructor(){this._entries=new Array}add(t,e){this._entries.push([t,e])}generateSource(t){return"fragment"===t?[]:this._entries.map(t=>`attribute ${t[1]} ${t[0]};`)}}class l{constructor(){this._entries=new Array}add(t,e){this._entries.push([t,e])}generateSource(){return this._entries.map(t=>`varying ${t[1]} ${t[0]};`)}}class d{constructor(){this._entries=new Set}add(t){this._entries.add(t)}generateSource(t){const e="vertex"===t?d.ALLOWLIST_VERTEX:d.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter(t=>e.includes(t)).map(t=>`#extension ${t} : enable`)}}d.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],d.ALLOWLIST_VERTEX=[];class h{constructor(){this._entries=[]}add(t,e,r){let n="ERROR_CONSTRUCTOR_STRING";switch(e){case"float":n=h.numberToFloatStr(r);break;case"int":n=h.numberToIntStr(r);break;case"bool":n=r.toString();break;case"vec2":n=`vec2(${h.numberToFloatStr(r[0])},                            ${h.numberToFloatStr(r[1])})`;break;case"vec3":n=`vec3(${h.numberToFloatStr(r[0])},                            ${h.numberToFloatStr(r[1])},                            ${h.numberToFloatStr(r[2])})`;break;case"vec4":n=`vec4(${h.numberToFloatStr(r[0])},                            ${h.numberToFloatStr(r[1])},                            ${h.numberToFloatStr(r[2])},                            ${h.numberToFloatStr(r[3])})`;break;case"ivec2":n=`ivec2(${h.numberToIntStr(r[0])},                             ${h.numberToIntStr(r[1])})`;break;case"ivec3":n=`ivec3(${h.numberToIntStr(r[0])},                             ${h.numberToIntStr(r[1])},                             ${h.numberToIntStr(r[2])})`;break;case"ivec4":n=`ivec4(${h.numberToIntStr(r[0])},                             ${h.numberToIntStr(r[1])},                             ${h.numberToIntStr(r[2])},                             ${h.numberToIntStr(r[3])})`;break;case"bvec2":n=`bvec2(${r[0].toString()},                             ${r[1].toString()})`;break;case"bvec3":n=`bvec3(${r[0].toString()},                             ${r[1].toString()},                             ${r[2].toString()})`;break;case"bvec4":n=`bvec4(${r[0].toString()},                             ${r[1].toString()},                             ${r[2].toString()},                             ${r[3].toString()})`;break;case"mat2":case"mat3":case"mat4":n=`${e}(${Array.prototype.map.call(r,t=>h.numberToFloatStr(t)).join(", ")})`}return this._entries.push(`const ${e} ${t} = ${n};`),this}static numberToIntStr(t){return t.toFixed(0)}static numberToFloatStr(t){return Number.isInteger(t)?t.toFixed(1):t.toString()}generateSource(){return Array.from(this._entries)}}const b="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif",p="precision highp float;\nprecision highp sampler2D;"},"6a07":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r("0fc4"),i=r("38862");const s=Object(n["d"])(1,1,0,1),o=Object(n["d"])(1,0,1,1);function a(t){t.fragment.uniforms.add("depthTex","sampler2D"),t.fragment.uniforms.add("highlightViewportPixelSz","vec4"),t.fragment.constants.add("occludedHighlightFlag","vec4",s).add("unoccludedHighlightFlag","vec4",o),t.fragment.code.add(i["a"]`
    void outputHighlight() {
      vec4 fragCoord = gl_FragCoord;

      float sceneDepth = texture2D(depthTex, (fragCoord.xy - highlightViewportPixelSz.xy) * highlightViewportPixelSz.zw).r;
      if (fragCoord.z > sceneDepth + 5e-7) {
        gl_FragColor = occludedHighlightFlag;
      }
      else {
        gl_FragColor = unoccludedHighlightFlag;
      }
    }
  `)}!function(t){function e(t,e,r){t.bindTexture(r.highlightDepthTexture,5),e.setUniform1i("depthTex",5),e.setUniform4f("highlightViewportPixelSz",0,0,r.inverseViewport[0],r.inverseViewport[1])}t.bindOutputHighlight=e}(a||(a={}))},"6d5b":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("38862");function i(t,e){e.attributeColor?(t.attributes.add("color","vec4"),t.varyings.add("vColor","vec4"),t.vertex.code.add(n["a"]`
      void forwardVertexColor() { vColor = color; }
    `),t.vertex.code.add(n["a"]`
      void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }
    `)):t.vertex.code.add(n["a"]`
      void forwardVertexColor() {}
      void forwardNormalizedVertexColor() {}
    `)}},"70a2":function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return s}));const n=t=>{class e extends t{constructor(){super(...arguments),this._isDisposed=!1}dispose(){for(const e of null!=(t=this._managedDisposables)?t:[]){var t;const r=this[e];this[e]=null,r&&"function"==typeof r.dispose&&r.dispose()}this._isDisposed=!0}get isDisposed(){return this._isDisposed}}return e};class i extends(n(class{})){}function s(){return(t,e)=>{var r,n;t.hasOwnProperty("_managedDisposables")||(t._managedDisposables=null!=(r=null==(n=t._managedDisposables)?void 0:n.slice())?r:[]),t._managedDisposables.unshift(e)}}},"70ab":function(t,e,r){"use strict";r.d(e,"a",(function(){return l})),r.d(e,"b",(function(){return d})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return w})),r.d(e,"e",(function(){return E})),r.d(e,"f",(function(){return A})),r.d(e,"g",(function(){return B})),r.d(e,"h",(function(){return W})),r.d(e,"i",(function(){return M})),r.d(e,"j",(function(){return p})),r.d(e,"k",(function(){return P})),r.d(e,"l",(function(){return C})),r.d(e,"m",(function(){return z})),r.d(e,"n",(function(){return k})),r.d(e,"o",(function(){return I})),r.d(e,"p",(function(){return U})),r.d(e,"q",(function(){return L})),r.d(e,"r",(function(){return j})),r.d(e,"s",(function(){return f}));var n=r("b2b2"),i=r("38a4"),s=r("0b2d"),o=r("e431"),a=r("f091"),c=r("f895");function u(t=H){return[t[0],t[1],t[2],t[3]]}function f(t,e,r,n){return d(t,e,r,n,a["e"].get())}function l(t,e=u()){return d(t[0],t[1],t[2],t[3],e)}function d(t,e,r,n,i=u()){return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function h(t,e,r=u()){return Object(o["j"])(r,t),r[3]=e,r}function b(t,e,r=u()){Object(o["j"])(r,e);const n=Object(o["g"])(e,e);return Math.abs(n-1)>1e-5&&n>1e-12&&Object(o["d"])(r,r,1/Math.sqrt(n)),j(r,t,r),r}function p(t,e,r,n=u()){return A(Object(o["i"])(a["d"].get(),t,e),Object(o["i"])(a["d"].get(),r,e),t,n)}function m(t,e){return g(t,e,0,1,2)}function g(t,e,r,n,i){if(t.count<3)return!1;t.getVec(r,y);let s=n,a=!1;for(;s<t.count-1&&!a;)t.getVec(s,v),s++,a=!Object(o["p"])(y,v);if(!a)return!1;for(s=Math.max(s,i),a=!1;s<t.count&&!a;)t.getVec(s,O),s++,Object(o["i"])(x,y,v),Object(o["q"])(x,x),Object(o["i"])(T,v,O),Object(o["q"])(T,T),a=!Object(o["p"])(y,O)&&!Object(o["p"])(v,O)&&Math.abs(Object(o["g"])(x,T))<_;return a?(p(y,v,O,e),!0):(0!==r||1!==n||2!==i)&&g(t,e,0,1,2)}const _=.99619469809,y=Object(s["e"])(),v=Object(s["e"])(),O=Object(s["e"])(),x=Object(s["e"])(),T=Object(s["e"])();function j(t,e,r){return t!==r&&l(t,r),r[3]=-Object(o["g"])(k(r),e),r}function S(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function A(t,e,r,n=u()){return b(r,Object(o["f"])(a["d"].get(),e,t),n)}function M(t,e,r){return!!Object(n["k"])(e)&&V(t,e.origin,e.direction,!0,!1,r)}function w(t,e,r){return V(t,e.origin,e.vector,!1,!1,r)}function E(t,e,r){return V(t,e.origin,e.vector,!1,!0,r)}function P(t,e){return z(t,Object(c["c"])(e))-e[3]>=0}function F(t,e){return z(t,Object(c["c"])(e))+e[3]<0}function B(t,e){return z(t,e)>=0}function D(t,e){return z(t,e)<0}function I(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5];return t[0]*(t[0]>0?r:s)+t[1]*(t[1]>0?n:o)+t[2]*(t[2]>0?i:a)+t[3]>=0}function L(t,e){const r=Object(o["g"])(k(t),e.ray.direction),n=-z(t,e.ray.origin);if(n<0&&r>=0)return!1;if(r>-1e-6&&r<1e-6)return n>0;if((n<0||r<0)&&!(n<0&&r<0))return!0;const i=n/r;return r>0?i<e.c1&&(e.c1=i):i>e.c0&&(e.c0=i),e.c0<=e.c1}function C(t,e){const r=Object(o["g"])(k(t),e.ray.direction),n=-z(t,e.ray.origin);if(r>-1e-6&&r<1e-6)return n>0;const i=n/r;return r>0?i<e.c1&&(e.c1=i):i>e.c0&&(e.c0=i),e.c0<=e.c1}function U(t,e,r){const n=Object(o["d"])(a["d"].get(),k(t),-t[3]),i=R(t,Object(o["i"])(a["d"].get(),e,n),a["d"].get());return Object(o["e"])(r,i,n),r}function R(t,e,r){const n=Object(o["d"])(a["d"].get(),k(t),Object(o["g"])(k(t),e));return Object(o["i"])(r,e,n),r}function N(t,e){return Math.abs(z(t,e))}function z(t,e){return Object(o["g"])(k(t),e)+t[3]}function V(t,e,r,n,s,a){const c=Object(o["g"])(k(t),r);if(0===c)return!1;let u=-(Object(o["g"])(k(t),e)+t[3])/c;return s&&(u=n?Math.max(0,u):Object(i["c"])(u,0,1)),!(u<0||!n&&u>1)&&(Object(o["e"])(a,e,Object(o["d"])(a,r,u)),!0)}function k(t){return t}const H=[0,0,1,0];var W=Object.freeze({__proto__:null,create:u,wrap:f,copy:l,fromValues:d,fromNormalAndOffset:h,fromPositionAndNormal:b,fromPoints:p,fromManyPoints:m,fromManyPointsSampleAt:g,setOffsetFromPoint:j,negate:S,fromVectorsAndPoint:A,intersectRay:M,intersectLineSegment:w,intersectLineSegmentClamp:E,isSphereFullyInside:P,isSphereFullyOutside:F,isPointInside:B,isPointOutside:D,isAABBFullyInside:I,clip:L,clipInfinite:C,projectPoint:U,projectVector:R,distance:N,signedDistance:z,normal:k,UP:H})},7438:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return d})),r.d(e,"c",(function(){return c})),r.d(e,"d",(function(){return f})),r.d(e,"e",(function(){return u})),r.d(e,"f",(function(){return i})),r.d(e,"g",(function(){return l}));var n=r("189c");const i=Object(n["e"])(770,1,771,771),s=Object(n["f"])(1,1),o=Object(n["f"])(0,771);function a(t){return 2===t?null:1===t?o:s}function c(t){return 2===t?n["c"]:null}const u=5e5,f={factor:-1,units:-2};function l(t){return t?f:null}function d(t){return 3===t||2===t?513:515}},7577:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return p})),r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return j})),r.d(e,"e",(function(){return y})),r.d(e,"f",(function(){return v})),r.d(e,"g",(function(){return P})),r.d(e,"h",(function(){return F})),r.d(e,"i",(function(){return _})),r.d(e,"j",(function(){return S})),r.d(e,"k",(function(){return T})),r.d(e,"l",(function(){return s})),r.d(e,"m",(function(){return M}));var n=r("4212");function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function s(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function o(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function c(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function u(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function f(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function l(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function d(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function h(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function b(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function p(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function m(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function g(t,e){const r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+s*s)}function _(t,e){const r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],s=e[3]-t[3];return r*r+n*n+i*i+s*s}function y(t){const e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}function v(t){const e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function O(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function x(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function T(t,e){const r=e[0],n=e[1],i=e[2],s=e[3];let o=r*r+n*n+i*i+s*s;return o>0&&(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=i*o,t[3]=s*o),t}function j(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function S(t,e,r,n){const i=e[0],s=e[1],o=e[2],a=e[3];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t[2]=o+n*(r[2]-o),t[3]=a+n*(r[3]-a),t}function A(t,e){let r,i,s,o,a,c;e=e||1;do{r=2*Object(n["b"])()-1,i=2*Object(n["b"])()-1,a=r*r+i*i}while(a>=1);do{s=2*Object(n["b"])()-1,o=2*Object(n["b"])()-1,c=s*s+o*o}while(c>=1);const u=Math.sqrt((1-a)/c);return t[0]=e*r,t[1]=e*i,t[2]=e*s*u,t[3]=e*o*u,t}function M(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*o,t}function w(t,e,r){const n=e[0],i=e[1],s=e[2],o=r[0],a=r[1],c=r[2],u=r[3],f=u*n+a*s-c*i,l=u*i+c*n-o*s,d=u*s+o*i-a*n,h=-o*n-a*i-c*s;return t[0]=f*u+h*-o+l*-c-d*-a,t[1]=l*u+h*-a+d*-o-f*-c,t[2]=d*u+h*-c+f*-a-l*-o,t[3]=e[3],t}function E(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function P(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function F(t,e){const r=t[0],i=t[1],s=t[2],o=t[3],a=e[0],c=e[1],u=e[2],f=e[3];return Math.abs(r-a)<=n["a"]*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-c)<=n["a"]*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(s-u)<=n["a"]*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(o-f)<=n["a"]*Math.max(1,Math.abs(o),Math.abs(f))}const B=a,D=c,I=u,L=g,C=_,U=y,R=v;Object.freeze({__proto__:null,copy:i,set:s,add:o,subtract:a,multiply:c,divide:u,ceil:f,floor:l,min:d,max:h,round:b,scale:p,scaleAndAdd:m,distance:g,squaredDistance:_,length:y,squaredLength:v,negate:O,inverse:x,normalize:T,dot:j,lerp:S,random:A,transformMat4:M,transformQuat:w,str:E,exactEquals:P,equals:F,sub:B,mul:D,div:I,dist:L,sqrDist:C,len:U,sqrLen:R})},"7c51":function(t,e,r){"use strict";r.d(e,"a",(function(){return S})),r.d(e,"b",(function(){return P})),r.d(e,"c",(function(){return A})),r.d(e,"d",(function(){return w})),r.d(e,"e",(function(){return d})),r.d(e,"f",(function(){return M})),r.d(e,"g",(function(){return j}));var n=r("b2b2"),i=r("38a4"),s=r("0b2d"),o=r("e431"),a=r("4261"),c=r("1153"),u=r("b623"),f=r("da1c");const l=Object(a["d"])();function d(t,e,r,n,i,s,o){const a=Object(u["d"])(e),f=r.tolerance;if(!a)if(t.boundingInfo)Object(c["a"])(0===t.primitiveType),b(t.boundingInfo,n,i,f,s,o);else{const e=t.indices.get("position"),r=t.vertexAttributes.get("position");m(n,i,0,e.length/3,e,r,void 0,s,o)}}const h=Object(s["e"])();function b(t,e,r,i,s,o){if(Object(n["j"])(t))return;const c=O(e,r,h);if(Object(a["s"])(l,t.getBBMin()),Object(a["r"])(l,t.getBBMax()),Object(n["k"])(s)&&s.applyToAabb(l),x(l,e,c,i)){const{primitiveIndices:n,indices:a,position:c}=t,u=n?n.length:a.length/3;if(u>F){const n=t.getChildren();if(void 0!==n){for(let t=0;t<8;++t)void 0!==n[t]&&b(n[t],e,r,i,s,o);return}}m(e,r,0,u,a,c,n,s,o)}}const p=Object(s["e"])();function m(t,e,r,i,s,o,a,c,u){if(a)return g(t,e,r,i,s,o,a,c,u);const f=o.data,l=o.stride||o.size,d=t[0],h=t[1],b=t[2],m=e[0]-d,_=e[1]-h,y=e[2]-b;for(let g=r,O=3*r;g<i;++g){let t=l*s[O++],e=f[t++],r=f[t++],i=f[t];t=l*s[O++];let o=f[t++],a=f[t++],x=f[t];t=l*s[O++];let T=f[t++],j=f[t++],S=f[t];Object(n["k"])(c)&&([e,r,i]=c.applyToVertex(e,r,i,g),[o,a,x]=c.applyToVertex(o,a,x,g),[T,j,S]=c.applyToVertex(T,j,S,g));const A=o-e,M=a-r,w=x-i,E=T-e,P=j-r,F=S-i,B=_*F-P*y,D=y*E-F*m,I=m*P-E*_,L=A*B+M*D+w*I;if(Math.abs(L)<=Number.EPSILON)continue;const C=d-e,U=h-r,R=b-i,N=C*B+U*D+R*I;if(L>0){if(N<0||N>L)continue}else if(N>0||N<L)continue;const z=U*w-M*R,V=R*A-w*C,k=C*M-A*U,H=m*z+_*V+y*k;if(L>0){if(H<0||N+H>L)continue}else if(H>0||N+H<L)continue;const W=(E*z+P*V+F*k)/L;W>=0&&u(W,v(A,M,w,E,P,F,p),g)}}function g(t,e,r,i,s,o,a,c,u){const f=o.data,l=o.stride||o.size,d=t[0],h=t[1],b=t[2],m=e[0]-d,g=e[1]-h,_=e[2]-b;for(let y=r;y<i;++y){const t=a[y];let e=3*t,r=l*s[e++],i=f[r++],o=f[r++],O=f[r];r=l*s[e++];let x=f[r++],T=f[r++],j=f[r];r=l*s[e];let S=f[r++],A=f[r++],M=f[r];Object(n["k"])(c)&&([i,o,O]=c.applyToVertex(i,o,O,y),[x,T,j]=c.applyToVertex(x,T,j,y),[S,A,M]=c.applyToVertex(S,A,M,y));const w=x-i,E=T-o,P=j-O,F=S-i,B=A-o,D=M-O,I=g*D-B*_,L=_*F-D*m,C=m*B-F*g,U=w*I+E*L+P*C;if(Math.abs(U)<=Number.EPSILON)continue;const R=d-i,N=h-o,z=b-O,V=R*I+N*L+z*C;if(U>0){if(V<0||V>U)continue}else if(V>0||V<U)continue;const k=N*P-E*z,H=z*w-P*R,W=R*E-w*N,q=m*k+g*H+_*W;if(U>0){if(q<0||V+q>U)continue}else if(q>0||V+q<U)continue;const G=(F*k+B*H+D*W)/U;G>=0&&u(G,v(w,E,P,F,B,D,p),t)}}const _=Object(s["e"])(),y=Object(s["e"])();function v(t,e,r,n,i,s,a){return Object(o["v"])(_,t,e,r),Object(o["v"])(y,n,i,s),Object(o["f"])(a,_,y),Object(o["q"])(a,a),a}function O(t,e,r){return Object(o["v"])(r,1/(e[0]-t[0]),1/(e[1]-t[1]),1/(e[2]-t[2]))}function x(t,e,r,n){return T(t,e,r,n,1/0)}function T(t,e,r,n,i){const s=(t[0]-n-e[0])*r[0],o=(t[3]+n-e[0])*r[0];let a=Math.min(s,o),c=Math.max(s,o);const u=(t[1]-n-e[1])*r[1],f=(t[4]+n-e[1])*r[1];if(c=Math.min(c,Math.max(u,f)),c<0)return!1;if(a=Math.max(a,Math.min(u,f)),a>c)return!1;const l=(t[2]-n-e[2])*r[2],d=(t[5]+n-e[2])*r[2];return c=Math.min(c,Math.max(l,d)),!(c<0)&&(a=Math.max(a,Math.min(l,d)),!(a>c)&&a<i)}function j(t,e,r,n,s){let o=(r.screenLength||0)*t.pixelRatio;s&&(o=Object(f["d"])(o,n,e,s));const a=o*Math.tan(.5*t.fovY)/(.5*t.fullHeight);return Object(i["f"])(a*e,r.minWorldLength||0,null!=r.maxWorldLength?r.maxWorldLength:1/0)}function S(t,e,r){if(!t)return;const n=t.parameters,i=t.paddingPixelsOverride;e.setUniform4f(r,n.divisor,n.offset,n.minPixelSize,i)}function A(t,e){const r=e?A(e):{};for(const n in t){let e=t[n];e&&e.forEach&&(e=E(e)),null==e&&n in r||(r[n]=e)}return r}function M(t,e){let r=!1;for(const n in e){const i=e[n];void 0!==i&&(r=!0,Array.isArray(i)?t[n]=i.slice():t[n]=i)}return r}function w(t,e,r,n,s){if(!e.options.selectionMode)return;const o=t.vertexAttributes.get("position").data,a=t.vertexAttributes.get("size"),c=a&&a.data[0],u=r[0],f=r[1],l=((c+n)/2+4)*t.screenToWorldRatio;let d=Number.MAX_VALUE;for(let h=0;h<o.length-5;h+=3){const t=o[h],e=o[h+1],r=u-t,n=f-e,s=o[h+3]-t,a=o[h+4]-e,c=Object(i["c"])((s*r+a*n)/(s*s+a*a),0,1),l=s*c-r,b=a*c-n,p=l*l+b*b;p<d&&(d=p)}d<l*l&&s()}function E(t){const e=[];return t.forEach(t=>e.push(t)),e}const P={multiply:1,ignore:2,replace:3,tint:4},F=1e3},"7ce4":function(t,e,r){"use strict";var n=r("a21b"),i=r("1956");class s{constructor(t,e,r,n,s){this._context=t,this.bufferType=e,this.usage=r,this._glName=null,this._size=-1,this._indexType=void 0,t.instanceCounter.increment(1,this),this._glName=this._context.gl.createBuffer(),Object(i["a"])(this._context.gl),n&&this.setData(n,s)}static createIndex(t,e,r,n){return new s(t,34963,e,r,n)}static createVertex(t,e,r){return new s(t,34962,e,r)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get byteSize(){return 34962===this.bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}dispose(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(1,this),this._context=null)}setData(t,e){if(!t)return;if("number"==typeof t){if(t<0&&console.error("Buffer size cannot be negative!"),34963===this.bufferType&&e)switch(this._indexType=e,this._size=t,e){case 5123:t*=2;break;case 5125:t*=4}}else{let e=t.byteLength;Object(n["i"])(t)&&(e/=2,this._indexType=5123),Object(n["j"])(t)&&(e/=4,this._indexType=5125),this._size=e}const r=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this),this._context.gl.bufferData(this.bufferType,t,this.usage),this._context.bindVAO(r)}setSubData(t,e=0,r=0,i=t.byteLength){if(!t)return;(e<0||e>=this._size)&&console.error("offset is out of range!");let s=e,o=r,a=i,c=t.byteLength;Object(n["i"])(t)&&(c/=2,s*=2,o*=2,a*=2),Object(n["j"])(t)&&(c/=4,s*=4,o*=4,a*=4),void 0===i&&(i=c-1),r>=i&&console.error("end must be bigger than start!"),e+r-i>this._size&&console.error("An attempt to write beyond the end of the buffer!");const u=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this);const f=this._context.gl,l=ArrayBuffer.isView(t)?t.buffer:t,d=0===o&&a===t.byteLength?l:l.slice(o,a);f.bufferSubData(this.bufferType,s,d),this._context.bindVAO(u)}}e["a"]=s},"82b9":function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return o}));r("c120");function n(t){switch(t){case"u8":return 1;case"u16":return 2;case"u32":return 4;case"i8":return 1;case"i16":return 2;case"i32":case"f32":return 4;case"f64":return 8;default:return}}function i(t){switch(t){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function s(t){switch(t){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function o(t){switch(t){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}},8539:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return c})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return s})),r.d(e,"e",(function(){return a})),r.d(e,"f",(function(){return i}));r("c120");var n=r("b2b2");function i(t,e){return t.vertexBuffers[e].size/s(t.layout[e])}function s(t){return t[0].stride}function o(t,e,r,n,i){const s=t.gl,o=t.capabilities.instancing;t.bindBuffer(r);for(const a of n){const t=e[a.name],r=(i||(0+a.baseInstance?a.baseInstance:0))*a.stride;if(void 0===t&&console.error(`There is no location for vertex attribute '${a.name}' defined.`),a.baseInstance&&!a.divisor&&console.error(`Vertex attribute '${a.name}' uses baseInstanceOffset without divisor.`),a.count<=4)s.vertexAttribPointer(t,a.count,a.type,a.normalized,a.stride,a.offset+r),s.enableVertexAttribArray(t),a.divisor&&a.divisor>0&&o&&o.vertexAttribDivisor(t,a.divisor);else if(9===a.count)for(let e=0;e<3;e++)s.vertexAttribPointer(t+e,3,a.type,a.normalized,a.stride,a.offset+12*e+r),s.enableVertexAttribArray(t+e),a.divisor&&a.divisor>0&&o&&o.vertexAttribDivisor(t+e,a.divisor);else if(16===a.count)for(let e=0;e<4;e++)s.vertexAttribPointer(t+e,4,a.type,a.normalized,a.stride,a.offset+16*e+r),s.enableVertexAttribArray(t+e),a.divisor&&a.divisor>0&&o&&o.vertexAttribDivisor(t+e,a.divisor);else console.error("Unsupported vertex attribute element count: "+a.count)}}function a(t,e,r,n){const i=t.gl,s=t.capabilities.instancing;t.bindBuffer(r);for(const o of n){const t=e[o.name];if(o.count<=4)i.disableVertexAttribArray(t),o.divisor&&o.divisor>0&&s&&s.vertexAttribDivisor(t,0);else if(9===o.count)for(let e=0;e<3;e++)i.disableVertexAttribArray(t+e),o.divisor&&o.divisor>0&&s&&s.vertexAttribDivisor(t+e,0);else if(16===o.count)for(let e=0;e<4;e++)i.disableVertexAttribArray(t+e),o.divisor&&o.divisor>0&&s&&s.vertexAttribDivisor(t+e,0);else console.error("Unsupported vertex attribute element count: "+o.count)}t.unbindBuffer(34962)}function c(t){switch(t){case 6406:case 6409:case 36168:return 1;case 6410:case 32854:case 33325:case 32854:case 33189:return 2;case 6407:case 6402:return 3;case 6408:case 34041:case 33326:case 35898:case 33327:case 34041:return 4;case 33328:case 34842:return 8;case 34836:return 16;case 33776:case 33777:return.5;case 33778:case 33779:return 1;case 37488:case 37489:case 37492:case 37493:case 37494:case 37495:return.5;case 37490:case 37491:case 37496:case 37497:return 1}return 0}function u(t){if(Object(n["j"])(t))return 0;if("colorAttachment"in t)return t.glName?u(t.colorAttachment)+u(t.depthStencilAttachment):0;if("descriptor"in t)return t.glName?u(t.descriptor):0;const e=t.internalFormat||"pixelFormat"in t&&t.pixelFormat;if(!e)return 0;const r="hasMipmap"in t&&t.hasMipmap?1.3:1,i=t.width*t.height;return c(e)*i*r}},"87b7":function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return c})),r.d(e,"e",(function(){return u})),r.d(e,"f",(function(){return f})),r.d(e,"g",(function(){return o})),r.d(e,"h",(function(){return s}));const n={func:513},i={func:519},s={mask:255},o={mask:0},a={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:0}},c={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7681}},u={function:{func:514,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}},f={function:{func:517,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}}},"8d95":function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return h})),r.d(e,"c",(function(){return l})),r.d(e,"d",(function(){return j})),r.d(e,"e",(function(){return g}));var n=r("38a4"),i=r("0b2d"),s=r("e431"),o=r("2119"),a=r("f091");function c(t){return t?{origin:Object(i["d"])(t.origin),vector:Object(i["d"])(t.vector)}:{origin:Object(i["e"])(),vector:Object(i["e"])()}}function u(t,e){const r=T.get();return r.origin=t,r.vector=e,r}function f(t,e=c()){return l(t.origin,t.vector,e)}function l(t,e,r=c()){return Object(s["j"])(r.origin,t),Object(s["j"])(r.vector,e),r}function d(t,e,r=c()){return Object(s["j"])(r.origin,t),Object(s["i"])(r.vector,e,t),r}function h(t,e){const r=Object(s["i"])(a["d"].get(),e,t.origin),i=Object(s["g"])(t.vector,r),o=Object(s["g"])(t.vector,t.vector),c=Object(n["c"])(i/o,0,1),u=Object(s["i"])(a["d"].get(),Object(s["d"])(a["d"].get(),t.vector,c),r);return Object(s["g"])(u,u)}function b(t,e){return Math.sqrt(h(t,e))}function p(t,e,r){return g(t,e,0,1,r)}function m(t,e,r){return Object(s["e"])(r,t.origin,Object(s["d"])(r,t.vector,e))}function g(t,e,r,i,o){const{vector:c,origin:u}=t,f=Object(s["i"])(a["d"].get(),e,u),l=Object(s["g"])(c,f)/Object(s["r"])(c);return Object(s["d"])(o,c,Object(n["c"])(l,r,i)),Object(s["e"])(o,o,t.origin)}function _(t,e){if(O(t,u(e.origin,e.direction),!1,x)){const{tA:e,pB:r,distance2:n}=x;if(e>=0&&e<=1)return n;if(e<0)return Object(s["k"])(t.origin,r);if(e>1)return Object(s["k"])(Object(s["e"])(a["d"].get(),t.origin,t.vector),r)}return null}function y(t,e,r){return!!O(t,e,!0,x)&&(Object(s["j"])(r,x.pA),!0)}function v(t,e){return O(t,e,!0,x)?x.distance2:null}function O(t,e,r,i){const o=1e-6,c=t.origin,u=Object(s["e"])(a["d"].get(),c,t.vector),f=e.origin,l=Object(s["e"])(a["d"].get(),f,e.vector),d=a["d"].get(),h=a["d"].get();if(d[0]=c[0]-f[0],d[1]=c[1]-f[1],d[2]=c[2]-f[2],h[0]=l[0]-f[0],h[1]=l[1]-f[1],h[2]=l[2]-f[2],Math.abs(h[0])<o&&Math.abs(h[1])<o&&Math.abs(h[2])<o)return!1;const b=a["d"].get();if(b[0]=u[0]-c[0],b[1]=u[1]-c[1],b[2]=u[2]-c[2],Math.abs(b[0])<o&&Math.abs(b[1])<o&&Math.abs(b[2])<o)return!1;const p=d[0]*h[0]+d[1]*h[1]+d[2]*h[2],m=h[0]*b[0]+h[1]*b[1]+h[2]*b[2],g=d[0]*b[0]+d[1]*b[1]+d[2]*b[2],_=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],y=(b[0]*b[0]+b[1]*b[1]+b[2]*b[2])*_-m*m;if(Math.abs(y)<o)return!1;let v=(p*m-g*_)/y,O=(p+m*v)/_;r&&(v=Object(n["c"])(v,0,1),O=Object(n["c"])(O,0,1));const x=a["d"].get(),T=a["d"].get();return x[0]=c[0]+v*b[0],x[1]=c[1]+v*b[1],x[2]=c[2]+v*b[2],T[0]=f[0]+O*h[0],T[1]=f[1]+O*h[1],T[2]=f[2]+O*h[2],i.tA=v,i.tB=O,i.pA=x,i.pB=T,i.distance2=Object(s["k"])(x,T),!0}const x={tA:0,tB:0,pA:Object(i["e"])(),pB:Object(i["e"])(),distance2:0},T=new o["a"](()=>({origin:null,vector:null}));var j=Object.freeze({__proto__:null,create:c,wrap:u,copy:f,fromValues:l,fromPoints:d,distance2:h,distance:b,projectPoint:p,pointAt:m,projectPointClamp:g,closestRayDistance2:_,closestLineSegmentPoint:y,closestLineSegmentDistance2:v})},"8dd3":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n={DIFFUSE:0,NORMAL:1,EMISSION:2,OCCLUSION:3,METALLIC_ROUGHNESS:4,SSAO:6,SHADOW_MAP:7}},"8e374":function(t,e,r){"use strict";r("c120");var n=r("b2b2"),i=["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"],s=i,o=r("9f8b"),a=999,c=9999,u=0,f=1,l=2,d=3,h=4,b=5,p=6,m=7,g=8,_=9,y=10,v=11,O=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function x(){var t,e,r,n=0,i=0,s=a,x=[],T=[],j=1,S=0,A=0,M=!1,w=!1,E="";return function(t){return T=[],null!==t?F(t.replace?t.replace(/\r\n/g,"\n"):t):B()};function P(t){t.length&&T.push({type:O[s],data:t,position:A,line:j,column:S})}function F(e){var o;for(n=0,r=(E+=e).length;t=E[n],n<r;){switch(o=n,s){case u:n=U();break;case f:n=C();break;case l:n=L();break;case d:n=R();break;case h:n=V();break;case v:n=z();break;case b:n=k();break;case c:n=H();break;case _:n=I();break;case a:n=D()}if(o!==n)switch(E[o]){case"\n":S=0,++j;break;default:++S}}return i+=n,E=E.slice(n),T}function B(t){return x.length&&P(x.join("")),s=y,P("(eof)"),T}function D(){return x=x.length?[]:x,"/"===e&&"*"===t?(A=i+n-1,s=u,e=t,n+1):"/"===e&&"/"===t?(A=i+n-1,s=f,e=t,n+1):"#"===t?(s=l,A=i+n,n):/\s/.test(t)?(s=_,A=i+n,n):(M=/\d/.test(t),w=/[^\w_]/.test(t),A=i+n,s=M?h:w?d:c,n)}function I(){return/[^\s]/g.test(t)?(P(x.join("")),s=a,n):(x.push(t),e=t,n+1)}function L(){return"\r"!==t&&"\n"!==t||"\\"===e?(x.push(t),e=t,n+1):(P(x.join("")),s=a,n)}function C(){return L()}function U(){return"/"===t&&"*"===e?(x.push(t),P(x.join("")),s=a,n+1):(x.push(t),e=t,n+1)}function R(){if("."===e&&/\d/.test(t))return s=b,n;if("/"===e&&"*"===t)return s=u,n;if("/"===e&&"/"===t)return s=f,n;if("."===t&&x.length){for(;N(x););return s=b,n}if(";"===t||")"===t||"("===t){if(x.length)for(;N(x););return P(t),s=a,n+1}var r=2===x.length&&"="!==t;if(/[\w_\d\s]/.test(t)||r){for(;N(x););return s=a,n}return x.push(t),e=t,n+1}function N(t){for(var e,r,n=0;;){if(e=o["c"].indexOf(t.slice(0,t.length+n).join("")),r=o["c"][e],-1===e){if(n--+t.length>0)continue;r=t.slice(0,1).join("")}return P(r),A+=r.length,(x=x.slice(r.length)).length}}function z(){return/[^a-fA-F0-9]/.test(t)?(P(x.join("")),s=a,n):(x.push(t),e=t,n+1)}function V(){return"."===t||/[eE]/.test(t)?(x.push(t),s=b,e=t,n+1):"x"===t&&1===x.length&&"0"===x[0]?(s=v,x.push(t),e=t,n+1):/[^\d]/.test(t)?(P(x.join("")),s=a,n):(x.push(t),e=t,n+1)}function k(){return"f"===t&&(x.push(t),e=t,n+=1),/[eE]/.test(t)||"-"===t&&/[eE]/.test(e)?(x.push(t),e=t,n+1):/[^\d]/.test(t)?(P(x.join("")),s=a,n):(x.push(t),e=t,n+1)}function H(){if(/[^\d\w_]/.test(t)){var r=x.join("");return s=o["b"].indexOf(r)>-1?g:o["a"].indexOf(r)>-1?m:p,P(x.join("")),s=a,n}return x.push(t),e=t,n+1}}function T(t){var e=x(),r=[];return(r=r.concat(e(t))).concat(e(null))}function j(t){return T(t)}function S(t){return t.map(t=>"eof"!==t.type?t.data:"").join("")}const A=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];function M(t,e="100",r="300 es"){const n=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const i of t)if("preprocessor"===i.type){const t=n.exec(i.data);if(t){const n=t[1].replace(/\s\s+/g," ");if(n===r)return n;if(n===e)return i.data="#version "+r,e;throw new Error("unknown glsl version: "+n)}}return t.splice(0,0,{type:"preprocessor",data:"#version "+r},{type:"whitespace",data:"\n"}),null}function w(t,e){for(let r=e-1;r>=0;r--){const e=t[r];if("whitespace"!==e.type&&"block-comment"!==e.type){if("keyword"!==e.type)break;if("attribute"===e.data||"in"===e.data)return!0}}return!1}function E(t,e,r,n){n=n||r;for(const i of t)if("ident"===i.type&&i.data===r)return n in e?e[n]++:e[n]=0,E(t,e,n+"_"+e[n],n);return r}function P(t,e,r="afterVersion"){function n(t,e){for(let r=e;r<t.length;r++){const e=t[r];if("operator"===e.type&&";"===e.data)return r}return null}function i(t){let e=-1,i=0,s=-1;for(let o=0;o<t.length;o++){const a=t[o];if("preprocessor"===a.type&&(a.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++i:a.data.match(/\#endif\s*.*/)&&--i),"afterVersion"!==r&&"afterPrecision"!==r||"preprocessor"===a.type&&/^#version/.test(a.data)&&(s=Math.max(s,o)),"afterPrecision"===r&&"keyword"===a.type&&"precision"===a.data){const e=n(t,o);if(null===e)throw new Error("precision statement not followed by any semicolons!");s=Math.max(s,e)}e<s&&0===i&&(e=o)}return e+1}const s={data:"\n",type:"whitespace"},o=e=>e<t.length&&/[^\r\n]$/.test(t[e].data);let a=i(t);o(a-1)&&t.splice(a++,0,s);for(const c of e)t.splice(a++,0,c);o(a-1)&&o(a)&&t.splice(a,0,s)}function F(t,e,r,n="lowp"){P(t,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:n},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:e},{type:"operator",data:";"}],"afterPrecision")}function B(t,e,r,n,i="lowp"){P(t,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"="},{type:"whitespace",data:" "},{type:"integer",data:n.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:i},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:e},{type:"operator",data:";"}],"afterPrecision")}function D(t,e){let r,n,i=-1;for(let s=e;s<t.length;s++){const e=t[s];if("operator"===e.type&&("["===e.data&&(r=s),"]"===e.data)){n=s;break}"integer"===e.type&&(i=parseInt(e.data,10))}return r&&n&&t.splice(r,n-r+1),i}function I(t,e){const r=j(t);if("300 es"===M(r,"100","300 es"))throw new Error("shader is already glsl 300 es");let n=null,i=null;const o={},a={};for(let c=0;c<r.length;++c){const t=r[c];switch(t.type){case"keyword":"vertex"===e&&"attribute"===t.data?t.data="in":"varying"===t.data&&(t.data="vertex"===e?"out":"in");break;case"builtin":if(/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(t.data.trim())&&(t.data=t.data.replace(/(2D|Cube|EXT)/g,"")),"fragment"===e&&"gl_FragColor"===t.data&&(n||(n=E(r,o,"fragColor"),F(r,n,"vec4")),t.data=n),"fragment"===e&&"gl_FragData"===t.data){const e=D(r,c+1),n=E(r,o,"fragData");B(r,n,"vec4",e,"mediump"),t.data=n}else"fragment"===e&&"gl_FragDepthEXT"===t.data&&(i||(i=E(r,o,"gl_FragDepth")),t.data=i);break;case"ident":if(s.indexOf(t.data)>=0){if("vertex"===e&&w(r,c))throw new Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");t.data in a||(a[t.data]=E(r,o,t.data)),t.data=a[t.data]}}}for(let s=r.length-1;s>=0;--s){const t=r[s];if("preprocessor"===t.type){const e=t.data.match(/\#extension\s+(.*)\:/);if(e&&e[1]&&A.indexOf(e[1].trim())>=0){const t=r[s+1];r.splice(s,t&&"whitespace"===t.type?2:1)}const n=t.data.match(/\#ifdef\s+(.*)/);n&&n[1]&&A.indexOf(n[1].trim())>=0&&(t.data="#if 1");const i=t.data.match(/\#ifndef\s+(.*)/);i&&i[1]&&A.indexOf(i[1].trim())>=0&&(t.data="#if 0")}}return S(r)}class L{constructor(t,e,r,n,i={}){if(this._context=null,this._glName=null,this._locations={},this._initialized=!1,this._vShader=null,this._fShader=null,this._defines={},this._nameToUniformLocation={},this._nameToAttribLocation={},this._nameToUniform1={},this._nameToUniform1v={},this._nameToUniform2={},this._nameToUniform3={},this._nameToUniform4={},this._nameToUniformMatrix3={},this._nameToUniformMatrix4={},t||console.error("RenderingContext isn't initialized!"),0===e.length&&console.error("Shaders source should not be empty!"),t.instanceCounter.increment(3,this),this._context=t,this._vertexShaderSource=e,this._fragmentShaderSource=r,Array.isArray(i))for(const s of i)this._defines[s]="1";else this._defines=i;this._locations=n}get glName(){return this._glName}get locations(){return this._locations}getDefine(t){return this._defines[t]}dispose(){if(!this._context)return;const t=this._context.gl;if(this._vShader){const e=this._vShader;t.deleteShader(e),this._vShader=null}if(this._fShader){const e=this._fShader;t.deleteShader(e),this._fShader=null}this._glName&&(t.deleteProgram(this._glName),this._glName=null),this._context.instanceCounter.decrement(3,this),this._context=null}initialize(){if(this._initialized)return;this._vShader=this._loadShader(35633),this._fShader=this._loadShader(35632),this._vShader&&this._fShader||console.error("Error loading shaders!");const t=this._context.gl,e=t.createProgram();t.attachShader(e,this._vShader),t.attachShader(e,this._fShader);for(const r in this._locations){const n=this._locations[r];t.bindAttribLocation(e,n,r)}t.linkProgram(e),this._glName=e,this._initialized=!0}getUniformLocation(t){return this.initialize(),void 0===this._nameToUniformLocation[t]&&(this._nameToUniformLocation[t]=this._context.gl.getUniformLocation(this._glName,t)),this._nameToUniformLocation[t]}hasUniform(t){return null!==this.getUniformLocation(t)}getAttribLocation(t){return this.initialize(),void 0===this._nameToAttribLocation[t]&&(this._nameToAttribLocation[t]=this._context.gl.getAttribLocation(this._glName,t)),this._nameToAttribLocation[t]}setUniform1i(t,e){const r=this._nameToUniform1[t];void 0!==r&&e===r||(this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(t),e),this._nameToUniform1[t]=e)}setUniform1iv(t,e){const r=this._nameToUniform1v[t];C(r,e)&&(this._context.bindProgram(this),this._context.gl.uniform1iv(this.getUniformLocation(t),e),void 0===r?this._nameToUniform1v[t]=L._arrayCopy(e):L._arrayAssign(e,r))}setUniform2iv(t,e){const r=this._nameToUniform2[t];C(r,e)&&(this._context.bindProgram(this),this._context.gl.uniform2iv(this.getUniformLocation(t),e),void 0===r?this._nameToUniform2[t]=L._arrayCopy(e):L._arrayAssign(e,r))}setUniform3iv(t,e){const r=this._nameToUniform3[t];C(r,e)&&(this._context.bindProgram(this),this._context.gl.uniform3iv(this.getUniformLocation(t),e),void 0===r?this._nameToUniform3[t]=L._arrayCopy(e):L._arrayAssign(e,r))}setUniform4iv(t,e){const r=this._nameToUniform4[t];C(r,e)&&(this._context.bindProgram(this),this._context.gl.uniform4iv(this.getUniformLocation(t),e),void 0===r?this._nameToUniform4[t]=L._arrayCopy(e):L._arrayAssign(e,r))}setUniform1f(t,e){const r=this._nameToUniform1[t];void 0!==r&&e===r||(this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(t),e),this._nameToUniform1[t]=e)}setUniform1fv(t,e){const r=this._nameToUniform1v[t];C(r,e)&&(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(t),e),void 0===r?this._nameToUniform1v[t]=L._arrayCopy(e):L._arrayAssign(e,r))}setUniform2f(t,e,r){const n=this._nameToUniform2[t];void 0!==n&&e===n[0]&&r===n[1]||(this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(t),e,r),void 0===n?this._nameToUniform2[t]=[e,r]:(n[0]=e,n[1]=r))}setUniform2fv(t,e){const r=this._nameToUniform2[t];C(r,e)&&(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(t),e),void 0===r?this._nameToUniform2[t]=L._arrayCopy(e):L._arrayAssign(e,r))}setUniform3f(t,e,r,n){const i=this._nameToUniform3[t];void 0!==i&&e===i[0]&&r===i[1]&&n===i[2]||(this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(t),e,r,n),void 0===i?this._nameToUniform3[t]=[e,r,n]:(i[0]=e,i[1]=r,i[2]=n))}setUniform3fv(t,e){const r=this._nameToUniform3[t];C(r,e)&&(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(t),e),void 0===r?this._nameToUniform3[t]=L._arrayCopy(e):L._arrayAssign(e,r))}setUniform4f(t,e,r,n,i){const s=this._nameToUniform4[t];void 0!==s&&e===s[0]&&r===s[1]&&n===s[2]&&i===s[3]||(this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(t),e,r,n,i),void 0===s?this._nameToUniform4[t]=[e,r,n,i]:(s[0]=e,s[1]=r,s[2]=n,s[3]=i))}setUniform4fv(t,e){const r=this._nameToUniform4[t];C(r,e)&&(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(t),e),void 0===r?this._nameToUniform4[t]=L._arrayCopy(e):L._arrayAssign(e,r))}setUniformMatrix3fv(t,e,r=!1){const n=this._nameToUniformMatrix3[t];U(n,e)&&(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(t),r,e),void 0===n?this._nameToUniformMatrix3[t]=L._arrayCopy(e):L._arrayAssign(e,n))}setUniformMatrix4fv(t,e,r=!1){const n=this._nameToUniformMatrix4[t];R(n,e)&&(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(t),r,e),void 0===n?this._nameToUniformMatrix4[t]=L._arrayCopy(e):L._arrayAssign(e,n))}assertCompatibleVertexAttributeLocations(t){const e=t.locations===this.locations;return e||console.error("VertexAttributeLocations are incompatible"),e}static _padToThree(t){let e=t.toString();return t<1e3&&(e=("  "+t).slice(-3)),e}_addLineNumbers(t){let e=2;return t.replace(/\n/g,()=>"\n"+L._padToThree(e++)+":")}_loadShader(t){const e=35633===t;let r=e?this._vertexShaderSource:this._fragmentShaderSource,n="";for(const o in this._defines)n+=`#define ${o} ${this._defines[o]}\n`;r=n+r,"webgl2"===this._context.contextVersion&&(r=I(r,e?"vertex":"fragment"));const i=this._context.gl,s=i.createShader(t);return i.shaderSource(s,r),i.compileShader(s),s}static _arrayCopy(t){const e=[];for(let r=0;r<t.length;++r)e.push(t[r]);return e}static _arrayAssign(t,e){for(let r=0;r<t.length;++r)e[r]=t[r]}}function C(t,e){if(Object(n["j"])(t)||t.length!==e.length)return!0;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!0;return!1}function U(t,e){return!!Object(n["j"])(t)||(9!==t.length?C(t,e):9!==t.length||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[7]!==e[7]||t[8]!==e[8])}function R(t,e){return!!Object(n["j"])(t)||(16!==t.length?C(t,e):16!==t.length||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[7]!==e[7]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10]||t[11]!==e[11]||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[15]!==e[15])}e["a"]=L},"8e97":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var n,i=r("d791"),s=r("970c");!function(t){function e(t,e,r){t.setUniform3f("camPos",r[3]-e[0],r[7]-e[1],r[11]-e[2])}function r(t,e){t.setUniformMatrix4fv("proj",e)}function n(t,e){t.setUniform2fv("nearFar",e)}function s(t,e,r){Object(i["r"])(o,r,e),t.setUniform3fv("localOrigin",e),t.setUniformMatrix4fv("view",o)}function a(t,e){s(t,e.origin,e.camera.viewMatrix)}function c(t,e){t.setUniform4fv("viewport",e.camera.fullViewport)}t.bindCamPosition=e,t.bindProjectionMatrix=r,t.bindNearFar=n,t.bindViewCustomOrigin=s,t.bindView=a,t.bindViewport=c}(n||(n={}));const o=Object(s["a"])()},"91b0":function(t,e,r){"use strict";class n{constructor(t,e){this._context=t,this._desc=e,this._context.instanceCounter.increment(5,this);const r=this._context.gl;this.glName=r.createRenderbuffer(),this._context.bindRenderbuffer(this),r.renderbufferStorage(r.RENDERBUFFER,e.internalFormat,e.width,e.height)}get descriptor(){return this._desc}resize(t,e){const r=this._desc;if(r.width===t&&r.height===e)return;r.width=t,r.height=e;const n=this._context.gl;this._context.bindRenderbuffer(this),n.renderbufferStorage(n.RENDERBUFFER,r.internalFormat,r.width,r.height)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(5,this),this._context=null)}}e["a"]=n},"970c":function(t,e,r){"use strict";function n(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function i(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(t,e,r,n,i,s,o,a,c,u,f,l,d,h,b,p){const m=new Float32Array(16);return m[0]=t,m[1]=e,m[2]=r,m[3]=n,m[4]=i,m[5]=s,m[6]=o,m[7]=a,m[8]=c,m[9]=u,m[10]=f,m[11]=l,m[12]=d,m[13]=h,m[14]=b,m[15]=p,m}function o(t,e){return new Float32Array(t,e,16)}r.d(e,"a",(function(){return n}));const a=n();Object.freeze({__proto__:null,create:n,clone:i,fromValues:s,createView:o,IDENTITY:a})},"9a64":function(t,e,r){"use strict";function n(t,e,r){for(let n=0;n<r;++n)e[2*n]=t[n],e[2*n+1]=t[n]-e[2*n]}function i(t,e,r,i){for(let a=0;a<i;++a)s[0]=t[a],n(s,o,1),e[a]=o[0],r[a]=o[1]}r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i}));const s=new Float64Array(1),o=new Float32Array(2)},"9f8b":function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return s}));var n=r("5f6c"),i=Object(n["b"])((function(t){var e;void 0!==(e=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"])&&(t.exports=e)})),s=Object(n["b"])((function(t){var e;void 0!==(e=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"])&&(t.exports=e)})),o=Object(n["b"])((function(t){var e;void 0!==(e=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"])&&(t.exports=e)}))},a125:function(t,e,r){"use strict";r.d(e,"a",(function(){return g})),r.d(e,"b",(function(){return x}));var n=r("0b2d"),i=r("e431"),s=r("2119"),o=r("3349"),a=r("f091"),c=r("8d95");function u(t){return t?{p0:Object(n["d"])(t.p0),p1:Object(n["d"])(t.p1),p2:Object(n["d"])(t.p2)}:{p0:Object(n["e"])(),p1:Object(n["e"])(),p2:Object(n["e"])()}}function f(t,e,r){const n=y.get();return n.p0=t,n.p1=e,n.p2=r,n}function l(t,e=u()){return d(t.p0,t.p1,t.p2,e)}function d(t,e,r,n=u()){return Object(i["j"])(n.p0,t),Object(i["j"])(n.p1,e),Object(i["j"])(n.p2,r),n}function h(t,e){const r=t.p0,n=t.p1,s=t.p2,o=Object(i["i"])(a["d"].get(),n,r),u=Object(i["i"])(a["d"].get(),s,n),f=Object(i["i"])(a["d"].get(),r,s),l=Object(i["i"])(a["d"].get(),e,r),d=Object(i["i"])(a["d"].get(),e,n),h=Object(i["i"])(a["d"].get(),e,s),b=Object(i["f"])(o,o,f),p=Object(i["g"])(Object(i["f"])(a["d"].get(),o,b),l),m=Object(i["g"])(Object(i["f"])(a["d"].get(),u,b),d),g=Object(i["g"])(Object(i["f"])(a["d"].get(),f,b),h);if(p>0&&m>0&&g>0){const t=Object(i["g"])(b,l);return t*t/Object(i["g"])(b,b)}const y=Object(c["b"])(Object(c["c"])(r,o,_.get()),e),v=Object(c["b"])(Object(c["c"])(n,u,_.get()),e),O=Object(c["b"])(Object(c["c"])(s,f,_.get()),e);return Math.min(y,v,O)}function b(t,e,r){const n=1e-5,{direction:s,origin:o}=e,{p0:a,p1:c,p2:u}=t,f=c[0]-a[0],l=c[1]-a[1],d=c[2]-a[2],h=u[0]-a[0],b=u[1]-a[1],p=u[2]-a[2],m=s[1]*p-b*s[2],g=s[2]*h-p*s[0],_=s[0]*b-h*s[1],y=f*m+l*g+d*_;if(y>-n&&y<n)return!1;const v=1/y,O=o[0]-a[0],x=o[1]-a[1],T=o[2]-a[2],j=v*(O*m+x*g+T*_);if(j<0||j>1)return!1;const S=x*d-l*T,A=T*f-d*O,M=O*l-f*x,w=v*(s[0]*S+s[1]*A+s[2]*M);return!(w<0||j+w>1)&&(r&&(Object(i["d"])(r,s,v*(h*S+b*A+p*M)),Object(i["e"])(r,o,r)),!0)}function p(t,e,r){const n=Object(o["i"])(t,e),i=Object(o["i"])(e,r),s=Object(o["i"])(r,t),a=(n+i+s)/2,c=a*(a-n)*(a-i)*(a-s);return c<=0?0:Math.sqrt(c)}function m(t){return p(t.p0,t.p1,t.p2)}function g(t,e,r){return Object(i["i"])(v,e,t),Object(i["i"])(O,r,t),Object(i["o"])(Object(i["f"])(v,v,O))/2}const _=new s["a"](c["a"]),y=new s["a"](()=>({p0:null,p1:null,p2:null})),v=Object(n["e"])(),O=Object(n["e"])();var x=Object.freeze({__proto__:null,create:u,wrap:f,copy:l,fromValues:d,distance2:h,intersectRay:b,areaPoints2d:p,area2d:m,areaPoints3d:g})},a1ff:function(t,e,r){"use strict";var n=r("b2b2"),i=r("38a4"),s=r("c514");const o=4,a=0;class c{constructor(t,e,r=null){this._context=null,this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,t.instanceCounter.increment(0,this),this._context=t,this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...e},this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}dispose(){if(this._context&&this._context.gl){if(this._glName){const t=this._context.gl;this._context.unbindTextureAllUnits(this),t.deleteTexture(this._glName),this._glName=null}this._context.instanceCounter.decrement(0,this),this._context=null}}release(){this.dispose()}resize(t,e){const r=this._descriptor;r.width===t&&r.height===e||(r.width=t,r.height=e,this.setData(null))}setData(t){if(!this._context||!this._context.gl)return;const e=this._context.gl;this._glName||(this._glName=e.createTexture()),void 0===t&&(t=null),null===t&&(this._descriptor.width=this._descriptor.width||o,this._descriptor.height=this._descriptor.height||o);const r=this._context.getBoundTexture(a);this._context.bindTexture(this,a);const i=this._descriptor;c._validateTexture(this._context,i),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipped?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.preMultiplyAlpha?1:0);const s=i.pixelFormat;let f=i.internalFormat?i.internalFormat:s;if(t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement){let r=t.width,n=t.height;t instanceof HTMLVideoElement&&(r=t.videoWidth,n=t.videoHeight),i.width&&i.height&&console.assert(r===i.width&&n===i.height),e.texImage2D(e.TEXTURE_2D,0,f,s,i.dataType,t),i.hasMipmap&&this.generateMipmap(),void 0===i.width&&(i.width=r),void 0===i.height&&(i.height=n)}else{null!=i.width&&null!=i.height||console.error("Width and height must be specified!"),e.DEPTH24_STENCIL8&&f===e.DEPTH_STENCIL&&(f=e.DEPTH24_STENCIL8);let r=i.width,o=i.height;if(u(t)){const n=Math.round(Math.log(Math.max(r,o))/Math.LN2)+1;i.hasMipmap=i.hasMipmap&&n===t.levels.length;for(let s=0;;++s){const n=t.levels[Math.min(s,t.levels.length-1)];if(e.compressedTexImage2D(e.TEXTURE_2D,s,f,r,o,0,n),1===r&&1===o||!i.hasMipmap)break;r=Math.max(1,r>>1),o=Math.max(1,o>>1)}}else if(Object(n["k"])(t))e.texImage2D(e.TEXTURE_2D,0,f,r,o,0,s,i.dataType,t),i.hasMipmap&&this.generateMipmap();else for(let t=0;e.texImage2D(e.TEXTURE_2D,t,f,r,o,0,s,i.dataType,null),(1!==r||1!==o)&&i.hasMipmap;++t)r=Math.max(1,r>>1),o=Math.max(1,o>>1)}c._applySamplingMode(e,this._descriptor),c._applyWrapMode(e,this._descriptor),c._applyAnisotropicFilteringParameters(this._context,this._descriptor),r&&this._context.bindTexture(r,a)}updateData(t,e,r,n,i,s){s||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const o=this._context.gl,c=this._descriptor,u=this._context.getBoundTexture(a);this._context.bindTexture(this,a),(e<0||r<0||n>c.width||i>c.height||e+n>c.width||r+i>c.height)&&console.error("An attempt to update out of bounds of the texture!"),o.pixelStorei(o.UNPACK_ALIGNMENT,c.unpackAlignment),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,c.flipped?1:0),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.preMultiplyAlpha?1:0),s instanceof ImageData||s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement?o.texSubImage2D(o.TEXTURE_2D,t,e,r,c.pixelFormat,c.dataType,s):o.texSubImage2D(o.TEXTURE_2D,t,e,r,n,i,c.pixelFormat,c.dataType,s),this._context.bindTexture(u,a)}generateMipmap(){const t=this._descriptor;t.hasMipmap||(t.hasMipmap=!0,this._samplingModeDirty=!0,c._validateTexture(this._context,t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);const e=this._context.getBoundTexture(a);this._context.bindTexture(this,a);const r=this._context.gl;r.generateMipmap(r.TEXTURE_2D),this._context.bindTexture(e,a)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,c._validateTexture(this._context,this._descriptor),this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,c._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._context.gl,e=this._descriptor;this._samplingModeDirty&&(c._applySamplingMode(t,e),this._samplingModeDirty=!1),this._wrapModeDirty&&(c._applyWrapMode(t,e),this._wrapModeDirty=!1)}static _validateTexture(t,e){(e.width<0||e.height<0)&&console.error("Negative dimension parameters are not allowed!");const r=Object(i["h"])(e.width)&&Object(i["h"])(e.height);Object(s["a"])(t.gl)||r||("number"==typeof e.wrapMode?33071!==e.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):33071===e.wrapMode.s&&33071===e.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),e.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}static _applySamplingMode(t,e){let r=e.samplingMode,n=e.samplingMode;9985===r||9987===r?(r=9729,e.hasMipmap||(n=9729)):9984!==r&&9986!==r||(r=9728,e.hasMipmap||(n=9728)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n)}static _applyWrapMode(t,e){"number"==typeof e.wrapMode?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapMode),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapMode)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapMode.s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapMode.t))}static _applyAnisotropicFilteringParameters(t,e){if(null==e.maxAnisotropy)return;const r=t.capabilities.textureFilterAnisotropic;if(!r)return;const n=t.gl;n.texParameterf(n.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy)}}function u(t){return Object(n["k"])(t)&&"type"in t&&"compressed"===t.type}e["a"]=c},afe1:function(t,e,r){"use strict";function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function s(t,e,r,n,i,s,o,a,c,u,f,l,d,h,b,p){return[t,e,r,n,i,s,o,a,c,u,f,l,d,h,b,p]}function o(t,e){return new Float64Array(t,e,16)}r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return o}));const a=n();Object.freeze({__proto__:null,create:n,clone:i,fromValues:s,createView:o,IDENTITY:a})},b139:function(t,e,r){"use strict";function n(){return[0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3]]}function s(t,e,r,n){return[t,e,r,n]}function o(t,e){return new Float64Array(t,e,4)}r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o}));const a=n();Object.freeze({__proto__:null,create:n,clone:i,fromValues:s,createView:o,IDENTITY:a})},b623:function(t,e,r){"use strict";r.d(e,"a",(function(){return f})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return d})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return l})),r.d(e,"f",(function(){return c}));var n=r("b2b2"),i=r("d791"),s=r("afe1"),o=r("1153");r("9a64");function a(t,e){return Object(n["j"])(t)&&(t=[]),t.push(e),t}function c(t,e){if(Object(n["j"])(t))return t;const r=t.filter(t=>t!==e);return 0===r.length?null:r}function u(t){return!!Object(n["k"])(t)&&!t.visible}function f(t,e){const r=new Map;return r.set(0,e.acquire(t,0)),r.set(1,e.acquire(t,7)),r.set(4,e.acquire(t,3)),r.set(3,e.acquire(t,2)),r.set(2,e.acquire(t,1)),r.set(5,e.acquire(t,4)),r.set(7,e.acquire(t,3)),r.set(6,e.acquire(t,3)),r}function l(t,e){e.release(t,0),e.release(t,7),e.release(t,3),e.release(t,2),e.release(t,1),e.release(t,4)}function d(t,e,r){const s=t.origin.vec3;Object(o["j"])(h,-s[0],-s[1],-s[2]),Object(n["k"])(t.transformation)?Object(i["l"])(e,h,t.transformation):Object(i["c"])(e,h),r&&(Object(i["a"])(r,e),Object(i["b"])(r,r))}new Float64Array(3),new Float32Array(6);const h=Object(s["b"])()},be24:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("38862");function i(t,e){e.vvInstancingEnabled&&(e.vvSize||e.vvColor)&&t.attributes.add("instanceFeatureAttribute","vec4"),e.vvSize?(t.vertex.uniforms.add("vvSizeMinSize","vec3"),t.vertex.uniforms.add("vvSizeMaxSize","vec3"),t.vertex.uniforms.add("vvSizeOffset","vec3"),t.vertex.uniforms.add("vvSizeFactor","vec3"),t.vertex.uniforms.add("vvSymbolRotationMatrix","mat3"),t.vertex.uniforms.add("vvSymbolAnchor","vec3"),t.vertex.code.add(n["a"]`
      vec3 vvScale(vec4 _featureAttribute) {
        return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);
      }

      vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {
        return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);
      }
    `),t.vertex.code.add(n["a"]`
      const float eps = 1.192092896e-07;
      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {
        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);
        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);
      }

      ${e.vvInstancingEnabled?n["a"]`
      vec4 vvLocalNormal(vec3 _normal) {
        return vvTransformNormal(_normal, instanceFeatureAttribute);
      }

      vec4 localPosition() {
        return vvTransformPosition(position, instanceFeatureAttribute);
      }`:""}
    `)):t.vertex.code.add(n["a"]`
      vec4 localPosition() { return vec4(position, 1.0); }

      vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }
    `),e.vvColor?(t.vertex.constants.add("vvColorNumber","int",8),t.vertex.code.add(n["a"]`
      uniform float vvColorValues[vvColorNumber];
      uniform vec4 vvColorColors[vvColorNumber];

      vec4 vvGetColor(vec4 featureAttribute, float values[vvColorNumber], vec4 colors[vvColorNumber]) {
        float value = featureAttribute.y;
        if (value <= values[0]) {
          return colors[0];
        }

        for (int i = 1; i < vvColorNumber; ++i) {
          if (values[i] >= value) {
            float f = (value - values[i-1]) / (values[i] - values[i-1]);
            return mix(colors[i-1], colors[i], f);
          }
        }
        return colors[vvColorNumber - 1];
      }

      ${e.vvInstancingEnabled?n["a"]`
      vec4 vvColor() {
        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);
      }`:""}
    `)):t.vertex.code.add(n["a"]`
      vec4 vvColor() { return vec4(1.0); }
    `)}!function(t){function e(t,e){e.vvSizeEnabled&&(t.setUniform3fv("vvSizeMinSize",e.vvSizeMinSize),t.setUniform3fv("vvSizeMaxSize",e.vvSizeMaxSize),t.setUniform3fv("vvSizeOffset",e.vvSizeOffset),t.setUniform3fv("vvSizeFactor",e.vvSizeFactor)),e.vvColorEnabled&&(t.setUniform1fv("vvColorValues",e.vvColorValues),t.setUniform4fv("vvColorColors",e.vvColorColors))}function r(t,r){e(t,r),r.vvOpacityEnabled&&(t.setUniform1fv("vvOpacityValues",r.vvOpacityValues),t.setUniform1fv("vvOpacityOpacities",r.vvOpacityOpacities))}function n(t,r){e(t,r),r.vvSizeEnabled&&(t.setUniform3fv("vvSymbolAnchor",r.vvSymbolAnchor),t.setUniformMatrix3fv("vvSymbolRotationMatrix",r.vvSymbolRotationMatrix))}t.bindUniforms=e,t.bindUniformsWithOpacity=r,t.bindUniformsForSymbols=n}(i||(i={}))},bea9:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("f2e0");class i{constructor(t){this.channel=t,this.id=Object(n["a"])()}}},c2d1:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("38862"),i=r("501b");function s(t,e){t.fragment.include(i["a"]),3===e.output?(t.extensions.add("GL_OES_standard_derivatives"),t.fragment.code.add(n["a"]`
      float _calculateFragDepth(const in float depth) {
        // calc polygon offset
        const float SLOPE_SCALE = 2.0;
        const float BIAS = 2.0 * .000015259;    // 1 / (2^16 - 1)
        float m = max(abs(dFdx(depth)), abs(dFdy(depth)));
        float result = depth + SLOPE_SCALE * m + BIAS;
        return clamp(result, .0, .999999);
      }

      void outputDepth(float _linearDepth) {
        gl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));
      }
    `)):1===e.output&&t.fragment.code.add(n["a"]`
      void outputDepth(float _linearDepth) {
        gl_FragColor = float2rgba(_linearDepth);
      }
    `)}},c3a4:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));class n{constructor(t,e){this._module=t,this._loadModule=e}get(){return this._module}async reload(){return this._module=await this._loadModule(),this._module}}},c514:function(t,e,r){"use strict";function n(t){return window.WebGL2RenderingContext&&t instanceof window.WebGL2RenderingContext}e["a"]=n},c51b:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("38862");function i(t){t.vertex.code.add(n["a"]`
    const float PI = 3.141592653589793;
  `),t.fragment.code.add(n["a"]`
    const float PI = 3.141592653589793;
    const float LIGHT_NORMALIZATION = 1.0 / PI;
    const float INV_PI = 0.3183098861837907;
    const float HALF_PI = 1.570796326794897;
    `)}},c6d7:function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return i}));var n=r("38862");function i(t,e){t.fragment.uniforms.add("terrainDepthTexture","sampler2D"),t.fragment.uniforms.add("cameraNearFar","vec2"),t.fragment.uniforms.add("inverseViewport","vec2"),t.fragment.code.add(n["a"]`
    //Compare the linearized depths of the fragment and the terrain. If fragment is on the wrong side of the terrain, discard it.
    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){

      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy * inverseViewport, cameraNearFar);
      if(fragmentDepth ${e.cullAboveGround?">":"<="} terrainDepth){
        discard;
      }
    }
  `)}function s(t,e,r){r.multipassTerrainEnabled&&r.terrainLinearDepthTexture&&(t.setUniform1i("terrainDepthTexture",10),e.bindTexture(r.terrainLinearDepthTexture,10))}},ca98:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));class n{constructor(t,e){e&&(this._config=e.snapshot()),this._program=this.initializeProgram(t),t.commonUniformStore&&(this._commonUniformStore=t.commonUniformStore,this._commonUniformStore.subscribeProgram(this._program)),this._pipeline=this.initializePipeline(t)}dispose(){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose(),this._program=null)}reload(t){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose()),this._program=this.initializeProgram(t),this._commonUniformStore&&this._commonUniformStore.subscribeProgram(this._program)}get program(){return this._program}get pipeline(){return this._pipeline}get key(){return this._config.key}get configuration(){return this._config}bindPass(t,e,r){}bindMaterial(t,e,r){}bindDraw(t,e,r){}bindPipelineState(t){t.setPipelineState(this.pipeline)}ensureAttributeLocations(t){this.program.assertCompatibleVertexAttributeLocations(t)}get primitiveType(){return 4}}},d047:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("38862"),i=r("501b");function s(t){t.include(i["a"]),t.code.add(n["a"]`
    float linearDepthFromFloat(float depth, vec2 nearFar) {
      return -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);
    }

    float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {
      return linearDepthFromFloat(rgba2float(texture2D(depthTex, uv)), nearFar);
    }
  `)}},d0ac:function(t,e,r){"use strict";r.d(e,"a",(function(){return q})),r.d(e,"b",(function(){return $})),r.d(e,"c",(function(){return K})),r.d(e,"d",(function(){return G})),r.d(e,"e",(function(){return W})),r.d(e,"f",(function(){return X})),r.d(e,"g",(function(){return Y})),r.d(e,"h",(function(){return Z}));var n=r("2047"),i=r("e431"),s=r("f091");function o(t=b){return[t[0],t[1],t[2],t[3]]}function a(t,e,r,n){return f(t,e,r,n,s["e"].get())}function c(t,e){return f(t[0],t[1],t[2],e,s["e"].get())}function u(t,e=o()){return f(t[0],t[1],t[2],t[3],e)}function f(t,e,r,n,i=o()){return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function l(t,e,r=o()){return Object(i["j"])(r,t),r[3]=e,r}function d(t,e,r=o()){return Object(i["f"])(r,t,e),Object(i["q"])(r,r),r[3]=Object(n["a"])(t,e),r}function h(t){return t}const b=[0,0,1,0];Object.freeze({__proto__:null,create:o,wrap:a,wrapAxisAngle:c,copy:u,fromValues:f,fromAxisAndAngle:l,fromPoints:d,axis:h,UP:b});var p=r("8d95"),m=r("4054"),g=r("f895"),_=r("70ab"),y=r("0d9f"),v=r("19b9"),O=r("0b2d"),x=r("d791"),T=r("2119"),j=r("0fc4"),S=r("7577");function A(t){return t?[Object(_["c"])(t[0]),Object(_["c"])(t[1]),Object(_["c"])(t[2]),Object(_["c"])(t[3]),Object(_["c"])(t[4]),Object(_["c"])(t[5])]:[Object(_["c"])(),Object(_["c"])(),Object(_["c"])(),Object(_["c"])(),Object(_["c"])(),Object(_["c"])()]}function M(){return[Object(O["e"])(),Object(O["e"])(),Object(O["e"])(),Object(O["e"])(),Object(O["e"])(),Object(O["e"])(),Object(O["e"])(),Object(O["e"])()]}function w(t,e=A()){for(let r=0;r<6;r++)Object(_["a"])(t[r],e[r])}function E(t,e,r,n=V){const o=Object(x["l"])(s["a"].get(),e,t);Object(x["a"])(o,o);for(let a=0;a<8;++a){const t=Object(S["m"])(s["e"].get(),N[a],o);Object(i["v"])(n[a],t[0]/t[3],t[1]/t[3],t[2]/t[3])}P(r,n)}function P(t,e){Object(_["j"])(e[4],e[0],e[3],t[0]),Object(_["j"])(e[1],e[5],e[6],t[1]),Object(_["j"])(e[4],e[5],e[1],t[2]),Object(_["j"])(e[3],e[2],e[6],t[3]),Object(_["j"])(e[0],e[1],e[2],t[4]),Object(_["j"])(e[5],e[4],e[7],t[5])}function F(t,e){for(let r=0;r<6;r++)if(Object(_["k"])(t[r],e))return!1;return!0}function B(t,e){return U(t,Object(v["e"])(e,z.get()))}function D(t,e){for(let r=0;r<6;r++){const n=t[r];if(!Object(_["l"])(n,e))return!1}return!0}function I(t,e,r){return U(t,Object(v["a"])(e,r,z.get()))}function L(t,e){for(let r=0;r<6;r++)if(Object(_["m"])(t[r],e)>0)return!1;return!0}function C(t,e){for(let r=0;r<6;r++)if(Object(_["o"])(t[r],e))return!1;return!0}function U(t,e){for(let r=0;r<6;r++)if(!Object(_["q"])(t[r],e))return!1;return!0}const R={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]},N=[Object(j["d"])(-1,-1,-1,1),Object(j["d"])(1,-1,-1,1),Object(j["d"])(1,1,-1,1),Object(j["d"])(-1,1,-1,1),Object(j["d"])(-1,-1,1,1),Object(j["d"])(1,-1,1,1),Object(j["d"])(1,1,1,1),Object(j["d"])(-1,1,1,1)],z=new T["a"](v["b"]),V=M();var k=Object.freeze({__proto__:null,create:A,createPoints:M,copy:w,fromMatrix:E,computePlanes:P,intersectsSphere:F,intersectsRay:B,intersectClipRay:D,intersectsLineSegment:I,intersectsPoint:L,intersectsAABB:C,planePointIndices:R}),H=r("a125");const W=_["h"],q=y["a"],G=(H["b"],p["d"]),X=m["g"],$=v["c"],Y=g["d"],K=k,Z=n["d"]},d267:function(t,e,r){"use strict";r("c120");var n=r("e92d"),i=r("a1ff"),s=r("91b0");const o=n["a"].getLogger("esri.views.webgl.FrameBufferObject");class a{constructor(t,e,r,n){if(this._context=t,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachments=new Map,this._initialized=!1,this._desc={...e},t.instanceCounter.increment(4,this),r){let e;var o;if(Array.isArray(r))for(const n of r){const{attachmentPoint:r,texture:s}=n,o=s instanceof i["a"]?s:new i["a"](t,s);e=o.descriptor,this._colorAttachments.set(r,o),this._validateColorAttachmentPoint(r),this._validateTextureDimensions(e,this._desc)}else r instanceof i["a"]?(e=r.descriptor,this._colorAttachments.set(36064,r)):(e=r,this._colorAttachments.set(36064,new i["a"](t,r))),0!==(null==(o=this._desc)?void 0:o.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),this._validateTextureDimensions(e,this._desc)}if(n instanceof s["a"]){var c;const t=null!=(c=this._desc.depthStencilTarget)?c:3;2===t?this._stencilAttachment=n:1===t||3===t?this._depthAttachment=n:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),a._validateBufferDimensions(n.descriptor,this._desc)}else if(n){let t;this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),n instanceof i["a"]?(this._depthStencilTexture=n,t=this._depthStencilTexture.descriptor):(t=n,this._depthStencilTexture=new i["a"](this._context,t)),this._validateTextureDimensions(t,this._desc)}}dispose(){if(!this._desc)return;const t=this._context.getBoundFramebufferObject();this._disposeColorAttachments(),this._disposeDepthStencilAttachments(),this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),this._context.bindFramebuffer(t),this._context.instanceCounter.decrement(4,this),this._desc=null}get glName(){return this._glName}get descriptor(){return this._desc}get colorTexture(){const t=this._colorAttachments.get(36064);return t&&t instanceof i["a"]?t:null}get colorAttachment(){return this._colorAttachments.get(36064)}get depthStencilAttachment(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}get depthStencilTexture(){return this._depthStencilTexture}get width(){return this._desc.width}get height(){return this._desc.height}getColorTexture(t){const e=this._colorAttachments.get(t);return e&&e instanceof i["a"]?e:null}attachColorTexture(t,e=36064){if(!t)return;this._validateColorAttachmentPoint(e);const r=t.descriptor;if(this._validateTextureDimensions(r,this._desc),this._disposeColorAttachments(),this._initialized){this._context.bindFramebuffer(this);const r=this._context.gl;r.framebufferTexture2D(r.FRAMEBUFFER,e,r.TEXTURE_2D,t.glName,0)}this._colorAttachments.set(e,t)}detachColorTexture(t=36064){const e=this._colorAttachments.get(t);if(e instanceof i["a"]){const r=e;if(this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,t,e.TEXTURE_2D,null,0)}return this._colorAttachments.delete(t),r}}attachDepthStencilTexture(t){if(!t)return;const e=t.descriptor;if(34041!==e.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),34042!==e.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"),this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),this._validateTextureDimensions(e,this._desc),this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,t.glName,0)}this._depthStencilTexture=t}detachDepthStencilTexture(){const t=this._depthStencilTexture;if(t&&this._initialized){this._context.bindFramebuffer(this);const t=this._context.gl;this._context.gl.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,null,0)}return this._depthStencilTexture=null,t}attachDepthStencilBuffer(t){if(!t)return;const e=t.descriptor;if(34041!==e.internalFormat&&33189!==e.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat"),a._validateBufferDimensions(e,this._desc),this._disposeDepthStencilAttachments(),this._desc.depthStencilTarget=34041===e.internalFormat?3:1,this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl,r=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,r,e.RENDERBUFFER,t.glName)}this._depthAttachment=t}detachDepthStencilBuffer(){const t=this._context.gl,e=this._depthAttachment;if(e&&this._initialized){this._context.bindFramebuffer(this);const e=1===this._desc.depthStencilTarget?t.DEPTH_ATTACHMENT:t.DEPTH_STENCIL_ATTACHMENT;t.framebufferRenderbuffer(t.FRAMEBUFFER,e,t.RENDERBUFFER,null)}return this._depthAttachment=null,e}copyToTexture(t,e,r,n,i,s,o){(t<0||e<0||i<0||s<0)&&console.error("Offsets cannot be negative!"),(r<=0||n<=0)&&console.error("Copy width and height must be greater than zero!");const a=this._desc,c=o.descriptor;3553!==o.descriptor.target&&console.error("Texture target must be TEXTURE_2D!"),(t+r>a.width||e+n>a.height||i+r>c.width||s+n>c.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");const u=this._context;u.bindTexture(o,0),u.bindFramebuffer(this),u.gl.copyTexSubImage2D(3553,0,i,s,t,e,r,n)}readPixels(t,e,r,n,i,s,o){(r<=0||n<=0)&&console.error("Copy width and height must be greater than zero!"),o||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(t,e,r,n,i,s,o)}resize(t,e){const r=this._desc;if(r.width!==t||r.height!==e){if(!this._initialized)return r.width=t,r.height=e,this._colorAttachments.forEach(r=>{r&&r.resize(t,e)}),void(this._depthStencilTexture&&this._depthStencilTexture.resize(t,e));r.width=t,r.height=e,this._colorAttachments.forEach(r=>{r&&r.resize(t,e)}),null!=this._depthStencilTexture?this._depthStencilTexture.resize(t,e):(this._depthAttachment||this._stencilAttachment)&&(this._depthAttachment&&this._depthAttachment.resize(t,e),this._stencilAttachment&&this._stencilAttachment.resize(t,e)),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1}}initializeAndBind(){var t,e,r,n;const o=this._context.gl;if(this._initialized)return void o.bindFramebuffer(o.FRAMEBUFFER,this.glName);this._glName&&o.deleteFramebuffer(this._glName);const a=this._context,u=o.createFramebuffer(),f=this._desc,l=null!=(t=f.colorTarget)?t:1,d=null!=(e=f.width)?e:1,h=null!=(r=f.height)?r:1;if(o.bindFramebuffer(o.FRAMEBUFFER,u),0===this._colorAttachments.size)if(0===l)this._colorAttachments.set(36064,c(a,f));else{const t=new s["a"](a,{internalFormat:32854,width:d,height:h});this._colorAttachments.set(36064,t)}this._colorAttachments.forEach((t,e)=>{t&&(t instanceof i["a"]?o.framebufferTexture2D(o.FRAMEBUFFER,e,o.TEXTURE_2D,t.glName,0):o.framebufferRenderbuffer(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.RENDERBUFFER,t.glName))});const b=null!=(n=f.depthStencilTarget)?n:0;switch(b){case 1:case 3:{this._depthAttachment||(this._depthAttachment=new s["a"](a,{internalFormat:1===f.depthStencilTarget?33189:34041,width:d,height:h}));const t=1===b?o.DEPTH_ATTACHMENT:o.DEPTH_STENCIL_ATTACHMENT;o.framebufferRenderbuffer(o.FRAMEBUFFER,t,o.RENDERBUFFER,this._depthAttachment.glName);break}case 2:this._stencilAttachment||(this._stencilAttachment=new s["a"](a,{internalFormat:36168,width:d,height:h})),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.STENCIL_ATTACHMENT,o.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:if(!this._depthStencilTexture){a.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!");const t={target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:d,height:h};this._depthStencilTexture=new i["a"](a,t)}o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.TEXTURE_2D,this._depthStencilTexture.glName,0)}this._glName=u,this._initialized=!0}_disposeColorAttachments(){this._colorAttachments.forEach((t,e)=>{if(t instanceof i["a"]){if(this._initialized){this._context.bindFramebuffer(this);const t=this._context.gl;t.framebufferTexture2D(t.FRAMEBUFFER,e,t.TEXTURE_2D,null,0)}t.dispose()}else if(t instanceof WebGLRenderbuffer){const r=this._context.gl;this._initialized&&(this._context.bindFramebuffer(this),r.framebufferRenderbuffer(r.FRAMEBUFFER,e,r.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(t)}}),this._colorAttachments.clear()}_disposeDepthStencilAttachments(){const t=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);const e=1===this._desc.depthStencilTarget?t.DEPTH_ATTACHMENT:t.DEPTH_STENCIL_ATTACHMENT;t.framebufferRenderbuffer(t.FRAMEBUFFER,e,t.RENDERBUFFER,null)}this._depthAttachment.dispose(),this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null),this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)}static _validateBufferDimensions(t,e){console.assert(t.width>=0&&t.height>=0),void 0!==e.width&&e.width>=0&&void 0!==e.height&&e.height>=0?e.width===t.width&&e.height===t.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(e.width=t.width,e.height=t.height)}_validateTextureDimensions(t,e){console.assert(t.width>=0&&t.height>=0),3553!==t.target&&console.error("Texture type must be TEXTURE_2D!"),void 0!==e.width&&e.width>=0&&void 0!==e.height&&e.height>=0?e.width===t.width&&e.height===t.height||console.error("Color attachment texture must match the framebuffer's!"):(e.width=t.width,e.height=t.height)}_validateColorAttachmentPoint(t){if(-1===a._MAX_COLOR_ATTACHMENTS){const t=this._context.capabilities.drawBuffers;if(t){const e=this._context.gl;a._MAX_COLOR_ATTACHMENTS=e.getParameter(t.MAX_COLOR_ATTACHMENTS)}else a._MAX_COLOR_ATTACHMENTS=1}const e=t-36064;e+1>a._MAX_COLOR_ATTACHMENTS&&o.error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${e+1}. Implementation supports up to ${a._MAX_COLOR_ATTACHMENTS} color attachments`)}}a._MAX_COLOR_ATTACHMENTS=-1;const c=(t,e)=>new i["a"](t,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height});e["a"]=a},d272:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r("b2b2"),i=r("0b2d"),s=r("e431"),o=r("38862");function a(t,e){if(e.slicePlaneEnabled){t.extensions.add("GL_OES_standard_derivatives"),e.sliceEnabledForVertexPrograms&&(t.vertex.uniforms.add("slicePlaneOrigin","vec3"),t.vertex.uniforms.add("slicePlaneBasis1","vec3"),t.vertex.uniforms.add("slicePlaneBasis2","vec3")),t.fragment.uniforms.add("slicePlaneOrigin","vec3"),t.fragment.uniforms.add("slicePlaneBasis1","vec3"),t.fragment.uniforms.add("slicePlaneBasis2","vec3");const r=o["a"]`
      struct SliceFactors {
        float front;
        float side0;
        float side1;
        float side2;
        float side3;
      };

      SliceFactors calculateSliceFactors(vec3 pos) {
        vec3 rel = pos - slicePlaneOrigin;

        vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
        float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);

        float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
        float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);

        float basis1Dot = dot(slicePlaneBasis1, rel);
        float basis2Dot = dot(slicePlaneBasis2, rel);

        return SliceFactors(
          dot(slicePlaneNormal, pos) + slicePlaneW,
          -basis1Dot - basis1Len2,
          basis1Dot - basis1Len2,
          -basis2Dot - basis2Len2,
          basis2Dot - basis2Len2
        );
      }

      bool sliceByFactors(SliceFactors factors) {
        return factors.front < 0.0
          && factors.side0 < 0.0
          && factors.side1 < 0.0
          && factors.side2 < 0.0
          && factors.side3 < 0.0;
      }

      bool sliceEnabled() {
        // a slicePlaneBasis1 vector of zero length is used to disable slicing in the shader during draped rendering.
        return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
      }

      bool sliceByPlane(vec3 pos) {
        return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
      }

      #define rejectBySlice(_pos_) sliceByPlane(_pos_)
      #define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }
    `,n=o["a"]`
      vec4 applySliceHighlight(vec4 color, vec3 pos) {
        SliceFactors factors = calculateSliceFactors(pos);

        if (sliceByFactors(factors)) {
          return color;
        }

        const float HIGHLIGHT_WIDTH = 1.0;
        const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);

        factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
        factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
        factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
        factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
        factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);

        float highlightFactor = (1.0 - step(0.5, factors.front))
          * (1.0 - step(0.5, factors.side0))
          * (1.0 - step(0.5, factors.side1))
          * (1.0 - step(0.5, factors.side2))
          * (1.0 - step(0.5, factors.side3));

        return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
      }
    `,i=e.sliceHighlightDisabled?o["a"]`#define highlightSlice(_color_, _pos_) (_color_)`:o["a"]`
        ${n}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      `;e.sliceEnabledForVertexPrograms&&t.vertex.code.add(r),t.fragment.code.add(r),t.fragment.code.add(i)}else{const r=o["a"]`
      #define rejectBySlice(_pos_) false
      #define discardBySlice(_pos_) {}
      #define highlightSlice(_color_, _pos_) (_color_)
    `;e.sliceEnabledForVertexPrograms&&t.vertex.code.add(r),t.fragment.code.add(r)}}!function(t){function e(e,r,n){t.bindUniforms(e,r,n.slicePlane,n.origin)}function r(t,e,r,o){e.slicePlaneEnabled&&(Object(n["k"])(r)?(o?(Object(s["i"])(c,r.origin,o),t.setUniform3fv("slicePlaneOrigin",c)):t.setUniform3fv("slicePlaneOrigin",r.origin),t.setUniform3fv("slicePlaneBasis1",r.basis1),t.setUniform3fv("slicePlaneBasis2",r.basis2)):(t.setUniform3fv("slicePlaneBasis1",i["b"]),t.setUniform3fv("slicePlaneBasis2",i["b"]),t.setUniform3fv("slicePlaneOrigin",i["b"])))}t.bindUniformsWithOrigin=e,t.bindUniforms=r}(a||(a={}));const c=Object(i["e"])()},d5f7:function(t,e,r){"use strict";r.d(e,"a",(function(){return f})),r.d(e,"b",(function(){return u}));var n=r("fa1e"),i=r("7ce4"),s=r("a1ff"),o=r("0fa6");const a=[{name:"position",count:2,type:5126,offset:0,stride:8,normalized:!1}],c=[{name:"position",count:2,type:5126,offset:0,stride:16,normalized:!1},{name:"uv0",count:2,type:5126,offset:8,stride:16,normalized:!1}];function u(t,e=a,r=n["a"],s=-1,u=1){let f=null;switch(e){case c:f=new Float32Array([s,s,0,0,u,s,1,0,s,u,0,1,u,u,1,1]);break;case a:default:f=new Float32Array([s,s,u,s,s,u,u,u])}return new o["a"](t,r,{geometry:e},{geometry:i["a"].createVertex(t,35044,f)})}function f(t){return new s["a"](t,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array([255,255,255,255]))}},d7f7:function(t,e,r){"use strict";var n=r("70a2");class i extends n["a"]{constructor(t){super(),this.material=t.material,this.techniqueRep=t.techniqueRep,this.output=t.output}getTechnique(){return this.technique}getPipelineState(t,e){return this.getTechnique().pipeline}ensureResources(t){return 2}ensureParameters(t){}}e["a"]=i},da1c:function(t,e,r){"use strict";r.d(e,"a",(function(){return f})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return l}));var n=r("38a4");function i(t){return Math.abs(t*t*t)}function s(t,e,r){const n=r.parameters,s=r.paddingPixelsOverride;return d.scale=Math.min(n.divisor/(e-n.offset),1),d.factor=i(t),d.minPixelSize=n.minPixelSize,d.paddingPixels=s,d}function o(t,e){return 0===t?e.minPixelSize:e.minPixelSize*(1+2*e.paddingPixels/t)}function a(t,e){return Math.max(Object(n["i"])(t*e.scale,t,e.factor),o(t,e))}function c(t,e,r){const n=s(t,e,r);return n.minPixelSize=0,n.paddingPixels=0,a(1,n)}function u(t,e,r,n){n.scale=c(t,e,r),n.factor=0,n.minPixelSize=r.parameters.minPixelSize,n.paddingPixels=r.paddingPixelsOverride}function f(t,e,r=[0,0]){const n=Math.min(Math.max(e.scale,o(t[1],e)/t[1]),1);return r[0]=t[0]*n,r[1]=t[1]*n,r}function l(t,e,r,n){return a(t,s(e,r,n))}Object(n["d"])(10),Object(n["d"])(12),Object(n["d"])(70),Object(n["d"])(40);const d={scale:0,factor:0,minPixelSize:0,paddingPixels:0}},da35:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return s}));var n=r("38a4");class i{constructor(){this._key="",this._keyDirty=!1,this._parameterBits=this._parameterBits.map(()=>0)}get key(){return this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits)),this._key}snapshot(){const t=this._parameterNames,e={key:this.key};for(const r of t)e[r]=this[r];return e}}function s(t={}){return(e,r)=>{var i,s;e._parameterNames=null!=(i=e._parameterNames)?i:[],e._parameterNames.push(r);const o=e._parameterNames.length-1,a=t.count||2,c=Math.ceil(Object(n["j"])(a)),u=null!=(s=e._parameterBits)?s:[0];let f=0;for(;u[f]+c>16;)f++,f>=u.length&&u.push(0);e._parameterBits=u;const l=u[f],d=(1<<c)-1<<l;u[f]+=c,Object.defineProperty(e,r,{get(){return this[o]},set(t){if(this[o]!==t&&(this[o]=t,this._keyDirty=!0,this._parameterBits[f]=this._parameterBits[f]&~d|+t<<l&d,"number"!=typeof t&&"boolean"!=typeof t))throw"Configuration value for "+r+" must be boolean or number, got "+typeof t}})}}},dae5:function(t,e,r){"use strict";function n(){return[1,0,0,0,1,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function s(t,e,r,n,i,s,o,a,c){return[t,e,r,n,i,s,o,a,c]}function o(t,e){return new Float64Array(t,e,9)}r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o}));Object.freeze({__proto__:null,create:n,clone:i,fromValues:s,createView:o})},ebd5:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return s}));var n=r("38862");const i=.1,s=.001;function o(t,e){const r=t.fragment;switch(e.alphaDiscardMode){case 0:r.code.add(n["a"]`
        #define discardOrAdjustAlpha(color) { if (color.a < ${n["a"].float(s)}) { discard; } }
      `);break;case 1:r.code.add(n["a"]`
        void discardOrAdjustAlpha(inout vec4 color) {
          color.a = 1.0;
        }
      `);break;case 2:r.uniforms.add("textureAlphaCutoff","float"),r.code.add(n["a"]`
        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }
      `);break;case 3:t.fragment.uniforms.add("textureAlphaCutoff","float"),t.fragment.code.add(n["a"]`
        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }
      `)}}},f091:function(t,e,r){"use strict";r.d(e,"a",(function(){return m})),r.d(e,"b",(function(){return g})),r.d(e,"c",(function(){return h})),r.d(e,"d",(function(){return b})),r.d(e,"e",(function(){return p}));var n=r("b2b2"),i=r("2ab7"),s=r("0b2d"),o=r("dae5"),a=r("afe1"),c=r("b139"),u=r("02f1"),f=r("0fc4");class l{constructor(t,e,r){this.itemByteSize=t,this.itemCreate=e,this.buffers=[],this.items=[],this.itemsPerBuffer=0,this.itemsPtr=0,this.itemsPerBuffer=Math.ceil(r/this.itemByteSize),this.tickHandle=i["a"].before(()=>this.reset())}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=Object(n["o"])(this.tickHandle)),this.itemsPtr=0,this.items=Object(n["o"])(this.items),this.buffers=Object(n["o"])(this.buffers)}get(){0===this.itemsPtr&&Object(i["a"])(()=>{});const t=Math.floor(this.itemsPtr/this.itemsPerBuffer);for(;this.buffers.length<=t;){const t=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize);for(let e=0;e<this.itemsPerBuffer;++e)this.items.push(this.itemCreate(t,e*this.itemByteSize));this.buffers.push(t)}return this.items[this.itemsPtr++]}reset(){const t=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);for(;this.buffers.length>t;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0}static createVec2f64(t=d){return new l(16,u["c"],t)}static createVec3f64(t=d){return new l(24,s["c"],t)}static createVec4f64(t=d){return new l(32,f["e"],t)}static createMat3f64(t=d){return new l(72,o["b"],t)}static createMat4f64(t=d){return new l(128,a["d"],t)}static createQuatf64(t=d){return new l(32,c["b"],t)}get test(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}const d=4096,h=l.createVec2f64(),b=l.createVec3f64(),p=l.createVec4f64(),m=(l.createMat3f64(),l.createMat4f64()),g=l.createQuatf64()},f895:function(t,e,r){"use strict";r.d(e,"a",(function(){return v})),r.d(e,"b",(function(){return m})),r.d(e,"c",(function(){return T})),r.d(e,"d",(function(){return H}));r("c120");var n=r("b2b2"),i=r("e92d"),s=r("38a4"),o=r("0b2d"),a=r("e431"),c=r("680b"),u=r("d791"),f=r("0fc4"),l=r("7577"),d=r("f091"),h=r("2047"),b=r("4054");const p=i["a"].getLogger("esri.views.3d.support.geometryUtils.sphere");function m(){return Object(f["c"])()}function g(t,e=m()){return Object(l["c"])(e,t)}function _(t,e){return Object(f["d"])(t[0],t[1],t[2],e)}function y(t){return t}function v(t){t[0]=t[1]=t[2]=t[3]=0}function O(t){return t}function x(t){return Array.isArray(t)?t[3]:t}function T(t){return Array.isArray(t)?t:V}function j(t,e,r,n){return Object(f["d"])(t,e,r,n)}function S(t,e,r){return t!==r&&Object(a["j"])(r,t),r[3]=t[3]+e,r}function A(t,e,r){return p.error("sphere.setExtent is not yet supported"),t===r?r:g(t,r)}function M(t,e,r){if(Object(n["j"])(e))return!1;const i=Object(a["i"])(d["d"].get(),e.origin,T(t)),s=Object(a["g"])(e.direction,e.direction),o=2*Object(a["g"])(e.direction,i),c=o*o-4*s*(Object(a["g"])(i,i)-t[3]*t[3]);if(c<0)return!1;const u=Math.sqrt(c);let f=(-o-u)/(2*s);const l=(-o+u)/(2*s);return(f<0||l<f&&l>0)&&(f=l),!(f<0)&&(r&&Object(a["e"])(r,e.origin,Object(a["d"])(d["d"].get(),e.direction,f)),!0)}function w(t,e,r,n){return M(t,Object(b["e"])(e,r,z),n)}function E(t,e){return M(t,e,null)}function P(t,e,r){if(M(t,e,r))return r;const n=F(t,e,d["d"].get());return Object(a["e"])(r,e.origin,Object(a["d"])(d["d"].get(),e.direction,Object(a["n"])(e.origin,n)/Object(a["o"])(e.direction))),r}function F(t,e,r){const n=d["d"].get(),i=d["a"].get();Object(a["f"])(n,e.origin,e.direction);const s=x(t);Object(a["f"])(r,n,e.origin),Object(a["d"])(r,r,1/Object(a["o"])(r)*s);const o=L(t,e.origin),c=Object(h["a"])(e.origin,r);return Object(u["i"])(i),Object(u["p"])(i,i,c+o,n),Object(a["l"])(r,r,i),r}function B(t,e,r){return M(t,e,r)?r:(Object(b["f"])(e,T(t),r),D(t,r,r))}function D(t,e,r){const n=Object(a["i"])(d["d"].get(),e,T(t)),i=Object(a["d"])(d["d"].get(),n,t[3]/Object(a["o"])(n));return Object(a["e"])(r,i,T(t))}function I(t,e){const r=Object(a["i"])(d["d"].get(),e,T(t)),n=Object(a["r"])(r),i=t[3]*t[3];return Math.sqrt(Math.abs(n-i))}function L(t,e){const r=Object(a["i"])(d["d"].get(),e,T(t)),n=Object(a["o"])(r),i=x(t),o=i+Math.abs(i-n);return Object(s["a"])(i/o)}const C=Object(o["e"])();function U(t,e,r,n){const i=Object(a["i"])(C,e,T(t));switch(r){case 0:{const t=Object(c["a"])(i,C)[2];return Object(a["v"])(n,-Math.sin(t),Math.cos(t),0)}case 1:{const t=Object(c["a"])(i,C),e=t[1],r=t[2],s=Math.sin(e);return Object(a["v"])(n,-s*Math.cos(r),-s*Math.sin(r),Math.cos(e))}case 2:return Object(a["q"])(n,i);default:return}}function R(t,e){const r=Object(a["i"])(k,e,T(t));return Object(a["o"])(r)-t[3]}function N(t,e,r,n){const i=R(t,e),s=U(t,e,2,k),o=Object(a["d"])(k,s,r-i);return Object(a["e"])(n,e,o),n}const z=Object(b["b"])(),V=Object(o["e"])(),k=Object(o["e"])();Object.freeze(V);var H=Object.freeze({__proto__:null,create:m,copy:g,fromCenterAndRadius:_,wrap:y,clear:v,fromRadius:O,getRadius:x,getCenter:T,fromValues:j,elevate:S,setExtent:A,intersectRay:M,intersectScreen:w,intersectsRay:E,intersectRayClosestSilhouette:P,closestPointOnSilhouette:F,closestPoint:B,projectPoint:D,distanceToSilhouette:I,angleToSilhouette:L,axisAt:U,altitudeAt:R,setAltitudeAt:N})},fa1e:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n={position:0,normal:1,uv0:2,color:3,size:4,tangent:4,auxpos1:5,symbolColor:5,auxpos2:6,featureAttribute:6,instanceFeatureAttribute:6,instanceColor:7,model:8,modelNormal:12,modelOriginHi:11,modelOriginLo:15}},fc00:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r("55e6"),i=r("82b9");class s{constructor(t,e){this.layout=t,this.buffer="number"==typeof e?new ArrayBuffer(e*t.stride):e;for(const r of t.fieldNames){const e=t.fields.get(r);this[r]=new e.constructor(this.buffer,e.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(t,e){const r=this[t];return r&&r.elementCount===e.ElementCount&&r.elementType===e.ElementType?r:null}slice(t,e){return new s(this.layout,this.buffer.slice(t*this.stride,e*this.stride))}copyFrom(t,e,r,n){const i=this.stride;if(i%4==0){const s=new Uint32Array(t.buffer,e*i,n*i/4);new Uint32Array(this.buffer,r*i,n*i/4).set(s)}else{const s=new Uint8Array(t.buffer,e*i,n*i);new Uint8Array(this.buffer,r*i,n*i).set(s)}}}class o{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(t,e){return this.appendField(t,n["m"],e),this}vec2f64(t,e){return this.appendField(t,n["n"],e),this}vec3f(t,e){return this.appendField(t,n["u"],e),this}vec3f64(t,e){return this.appendField(t,n["v"],e),this}vec4f(t,e){return this.appendField(t,n["C"],e),this}vec4f64(t,e){return this.appendField(t,n["D"],e),this}mat3f(t,e){return this.appendField(t,n["f"],e),this}mat3f64(t,e){return this.appendField(t,n["g"],e),this}mat4f(t,e){return this.appendField(t,n["h"],e),this}mat4f64(t,e){return this.appendField(t,n["i"],e),this}vec4u8(t,e){return this.appendField(t,n["J"],e),this}f32(t,e){return this.appendField(t,n["a"],e),this}f64(t,e){return this.appendField(t,n["b"],e),this}u8(t,e){return this.appendField(t,n["l"],e),this}u16(t,e){return this.appendField(t,n["j"],e),this}i8(t,e){return this.appendField(t,n["e"],e),this}vec2i8(t,e){return this.appendField(t,n["q"],e),this}vec2i16(t,e){return this.appendField(t,n["o"],e),this}vec2u8(t,e){return this.appendField(t,n["t"],e),this}vec4u16(t,e){return this.appendField(t,n["H"],e),this}u32(t,e){return this.appendField(t,n["k"],e),this}appendField(t,e,r){const n=e.ElementCount*Object(i["a"])(e.ElementType),s=this.stride;this.fields.set(t,{size:n,constructor:e,offset:s,optional:r}),this.stride+=n,this.fieldNames.push(t)}alignTo(t){return this.stride=Math.floor((this.stride+t-1)/t)*t,this}hasField(t){return this.fieldNames.indexOf(t)>=0}createBuffer(t){return new s(this,t)}createView(t){return new s(this,t)}clone(){const t=new o;return t.stride=this.stride,t.fields=new Map,this.fields.forEach((e,r)=>t.fields.set(r,e)),t.fieldNames=this.fieldNames.slice(),t.BufferType=this.BufferType,t}}function a(){return new o}}}]);