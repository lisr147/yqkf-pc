(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c60d94a"],{"00c0":function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("c120"),s=r("7c4b"),i=r("ab4a");const a=Object(n["a"])("mapview-transitions-duration");class o extends s["a"]{constructor(){super(...arguments),this._childrenSet=new Set,this.children=[],this._effectList=null}get blendMode(){return this._blendMode}set blendMode(t){this._blendMode=t,this.requestRender()}get clips(){return this._clips}set clips(t){this._clips=t,this.children.forEach(e=>e.clips=t)}get computedEffects(){var t,e;return null!=(t=null==(e=this._effectList)?void 0:e.effects)?t:null}get effect(){var t,e;return null!=(t=null==(e=this._effectList)?void 0:e.effect)?t:""}set effect(t){(this._effectList||t)&&(this._effectList||(this._effectList=new i["a"](a)),this._effectList.effect=t,this.requestRender())}updateTransitionProperties(t,e){super.updateTransitionProperties(t,e),this._effectList&&(this._effectList.transitionStep(t,e),this._effectList.transitioning&&this.requestRender())}doRender(t){const e=this.createRenderParams(t);this.renderChildren(e)}addChild(t){return this.addChildAt(t,this.children.length)}addChildAt(t,e=this.children.length){if(!t)return t;if(this.contains(t))return t;const r=t.parent;return r&&r!==this&&r.removeChild(t),e>=this.children.length?this.children.push(t):this.children.splice(e,0,t),this._childrenSet.add(t),t.parent=this,t.stage=this.stage,this!==this.stage&&(t.clips=this.clips),this.requestRender(),t}contains(t){return this._childrenSet.has(t)}removeAllChildren(){this._childrenSet.clear();for(const t of this.children)this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null;this.children.length=0}removeChild(t){return this.contains(t)?this.removeChildAt(this.children.indexOf(t)):t}removeChildAt(t){if(t<0||t>=this.children.length)return null;const e=this.children.splice(t,1)[0];return this._childrenSet.delete(e),this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null,e}sortChildren(t){return this.children.sort(t)}onAttach(){super.onAttach();const t=this.stage;for(const e of this.children)e.stage=t}onDetach(){super.onDetach();for(const t of this.children)t.stage=null}renderChildren(t){for(const e of this.children)e.beforeRender(t);for(const e of this.children)e.processRender(t);for(const e of this.children)e.afterRender(t)}createRenderParams(t){return{...t,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:t.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition}}}},"18c6":function(t,e,r){"use strict";r.d(e,"a",(function(){return E})),r.d(e,"b",(function(){return F})),r.d(e,"c",(function(){return I})),r.d(e,"d",(function(){return z})),r.d(e,"e",(function(){return x})),r.d(e,"f",(function(){return L})),r.d(e,"g",(function(){return A})),r.d(e,"h",(function(){return V}));var n=r("ce50"),s=r("c84e"),i=r("9b77");function a(t,e=!1){const r=s["e"].SIZE_FIELD_STOPS|s["e"].SIZE_MINMAX_VALUE|s["e"].SIZE_SCALE_STOPS|s["e"].SIZE_UNIT_VALUE,n=(t&(s["f"].FIELD_TARGETS_OUTLINE|s["f"].MINMAX_TARGETS_OUTLINE|s["f"].SCALE_TARGETS_OUTLINE|s["f"].UNIT_TARGETS_OUTLINE))>>>4;return e?r&n:r&~n}const o=0,c=8,u=7,l=8,h=11,f=11,d=12,p=13,v=14,g=15,m=15,_=16,y=17,b=18,S=19,w=20;function A(t,e,r,n,i){switch(t){case s["d"].FILL:return E.from(e,n);case s["d"].LINE:return I.from(e,r);case s["d"].MARKER:return z.from(e);case s["d"].TEXT:return L.from(e);case s["d"].LABEL:return F.from(e,i);default:throw new Error("Unable to createMaterialKey for unknown geometryType "+t)}}function V(t){switch(x.load(t).geometryType){case s["d"].MARKER:return new z(t);case s["d"].FILL:return new E(t);case s["d"].LINE:return new I(t);case s["d"].TEXT:return new L(t);case s["d"].LABEL:return new F(t)}}class x{constructor(t){this._data=0,this._data=t}static load(t){const e=this.shared;return e.data=t,e}set data(t){this._data=t}get data(){return this._data}get geometryType(){return this.bits(l,h)}set geometryType(t){this.setBits(t,l,h)}get mapAligned(){return!!this.bit(w)}set mapAligned(t){this.setBit(w,t)}get sdf(){return!!this.bit(f)}set sdf(t){this.setBit(f,t)}get pattern(){return!!this.bit(d)}set pattern(t){this.setBit(d,t)}get textureBinding(){return this.bits(o,c)}set textureBinding(t){this.setBits(t,o,c)}get geometryTypeString(){switch(this.geometryType){case s["d"].FILL:return"fill";case s["d"].MARKER:return"marker";case s["d"].LINE:return"line";case s["d"].TEXT:return"text";case s["d"].LABEL:return"label";default:throw new n["a"]("Unable to handle unknown geometryType: "+this.geometryType)}}setBit(t,e){const r=1<<t;e?this._data|=r:this._data&=~r}bit(t){return(this._data&1<<t)>>t}setBits(t,e,r){for(let n=e,s=0;n<r;n++,s++)this.setBit(n,0!=(t&1<<s))}bits(t,e){let r=0;for(let n=t,s=0;n<e;n++,s++)r|=this.bit(n)<<s;return r}hasVV(){return!1}setVV(t,e){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(u&this.textureBinding)}}x.shared=new x(0);const O=t=>class extends t{get vvSizeMinMaxValue(){return 0!==this.bit(_)}set vvSizeMinMaxValue(t){this.setBit(_,t)}get vvSizeScaleStops(){return 0!==this.bit(y)}set vvSizeScaleStops(t){this.setBit(y,t)}get vvSizeFieldStops(){return 0!==this.bit(b)}set vvSizeFieldStops(t){this.setBit(b,t)}get vvSizeUnitValue(){return 0!==this.bit(S)}set vvSizeUnitValue(t){this.setBit(S,t)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(t,e){super.setVV(t,e);const r=a(t,e)&t;this.vvSizeMinMaxValue=!!(r&s["e"].SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(r&s["e"].SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(r&s["e"].SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(r&s["e"].SIZE_SCALE_STOPS)}},R=t=>class extends t{get vvRotation(){return 0!==this.bit(g)}set vvRotation(t){this.setBit(g,t)}hasVV(){return super.hasVV()||this.vvRotation}setVV(t,e){super.setVV(t,e),this.vvRotation=!e&&!!(t&s["e"].ROTATION)}},M=t=>class extends t{get vvColor(){return 0!==this.bit(p)}set vvColor(t){this.setBit(p,t)}hasVV(){return super.hasVV()||this.vvColor}setVV(t,e){super.setVV(t,e),this.vvColor=!e&&!!(t&s["e"].COLOR)}},T=t=>class extends t{get vvOpacity(){return 0!==this.bit(v)}set vvOpacity(t){this.setBit(v,t)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(t,e){super.setVV(t,e),this.vvOpacity=!e&&!!(t&s["e"].OPACITY)}};class E extends(M(T(x))){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const r=this.load(0);return r.geometryType=s["d"].FILL,e?r.dotDensity=!0:r.setVV(t,!1),r.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,vvColor:this.vvColor,vvOpacity:this.vvOpacity}}get dotDensity(){return!!this.bit(m)}set dotDensity(t){this.setBit(m,t)}}E.shared=new E(0);class z extends(M(T(R(O(x))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s["d"].MARKER,e.setVV(t,!1),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}z.shared=new z(0);class I extends(M(T(O(x)))){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const r=this.load(0);return r.geometryType=s["d"].LINE,r.setVV(t,e),r.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}I.shared=new I(0);class L extends(M(T(R(O(x))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(t);return e.geometryType=s["d"].TEXT,e.setVV(t,!1),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}L.shared=new L(0);class F extends(O(x)){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const r=this.load(0);return r.geometryType=s["d"].LABEL,r.setVV(t,!1),r.mapAligned=!!Object(i["a"])(e),r.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}F.shared=new F(0)},"7c4b":function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("c120"),s=r("f4cc"),i=r("ce6d");const a=1/Object(n["a"])("mapview-transitions-duration");class o extends i["a"]{constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this._stage=null,this._visible=!0}get clips(){return this._clips}set clips(t){this._clips=t,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(t){this._opacity!==t&&(this._opacity=Math.min(1,Math.max(t,0)),this.requestRender())}get stage(){return this._stage}set stage(t){if(this._stage===t)return;const e=this._stage;this._stage=t,t?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):e.trashDisplayObject(this)}get visible(){return this._visible}set visible(t){this._visible!==t&&(this._visible=t,this.requestRender())}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=Object(s["g"])(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=Object(s["g"])(),this.requestRender()),this._fadeOutResolver.promise}beforeRender(t){this.updateTransitionProperties(t.deltaTime,t.state.scale)}afterRender(t){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}remove(){var t;null==(t=this.parent)||t.removeChild(this)}setTransform(t){}processRender(t){this.stage&&this.computedVisible&&this.doRender(t)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this.onDetach(),this.emit("detach")}updateTransitionProperties(t,e){if(this.fadeTransitionEnabled){const e=this._fadeOutResolver||!this.visible?0:this.opacity,r=this.computedOpacity;if(r===e)this.computedVisible=this.visible;else{const n=t*a;this.computedOpacity=r>e?Math.max(e,r-n):Math.min(e,r+n),this.computedVisible=this.computedOpacity>0;const s=e===this.computedOpacity;this.inFadeTransition=!s,s||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(t){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}},"970c":function(t,e,r){"use strict";function n(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function s(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function i(t,e,r,n,s,i,a,o,c,u,l,h,f,d,p,v){const g=new Float32Array(16);return g[0]=t,g[1]=e,g[2]=r,g[3]=n,g[4]=s,g[5]=i,g[6]=a,g[7]=o,g[8]=c,g[9]=u,g[10]=l,g[11]=h,g[12]=f,g[13]=d,g[14]=p,g[15]=v,g}function a(t,e){return new Float32Array(t,e,16)}r.d(e,"a",(function(){return n}));const o=n();Object.freeze({__proto__:null,create:n,clone:s,fromValues:i,createView:a,IDENTITY:o})},"9b77":function(t,e,r){"use strict";function n(t){switch(t){case"above-along":case"below-along":case"center-along":return 1;default:return 0}}r.d(e,"a",(function(){return n}))},ab4a:function(t,e,r){"use strict";var n=r("7ffa"),s=r("e92d"),i=r("ce50"),a=r("eb37"),o=r("970c"),c=r("d791");const u=(t,e)=>{const r=Object(c["d"])(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Object(c["b"])(r,r)},l=(t,e)=>{const r=Object(c["d"])(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Object(c["b"])(r,r)},h=(t,e)=>{const r=1-e,n=Object(c["d"])(t,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return Object(c["b"])(n,n)},f=(t,e)=>{const r=Math.sin(e*Math.PI/180),n=Math.cos(e*Math.PI/180),s=Object(c["d"])(t,.213+.787*n-.213*r,.715-.715*n-.715*r,.072-.072*n+.928*r,0,.213-.213*n+.143*r,.715+.285*n+.14*r,.072-.072*n-.283*r,0,.213-.213*n-.787*r,.715-.715*n+.715*r,.072+.928*n+.072*r,0,0,0,0,1);return Object(c["b"])(s,s)},d=(t,e)=>{const r=1-2*e,n=Object(c["d"])(t,r,0,0,e,0,r,0,e,0,0,r,e,0,0,0,1);return Object(c["b"])(n,n)},p=(t,e)=>{const r=Object(c["d"])(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Object(c["b"])(r,r)},v=(t,e)=>{const r=1-e,n=Object(c["d"])(t,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return Object(c["b"])(n,n)};class g{constructor(t,e,r){this.strength=t,this.radius=e,this.threshold=r,this.type="bloom"}interpolate(t,e,r){this.strength=w(t.strength,e.strength,r),this.radius=w(t.radius,e.radius,r),this.threshold=w(t.threshold,e.threshold,r)}clone(){return new g(this.strength,this.radius,this.threshold)}}class m{constructor(t){this.radius=t,this.type="blur"}interpolate(t,e,r){this.radius=Math.round(w(t.radius,e.radius,r))}clone(){return new m(this.radius)}}class _{constructor(t,e){this.type=t,this.amount=e,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,e,r){this.amount=w(t.amount,e.amount,r),this._updateMatrix()}clone(){return new _(this.type,this.amount)}_updateMatrix(){const t=this._colorMatrix||Object(o["a"])();switch(this.type){case"brightness":this._colorMatrix=u(t,this.amount);break;case"contrast":this._colorMatrix=l(t,this.amount);break;case"grayscale":this._colorMatrix=h(t,this.amount);break;case"invert":this._colorMatrix=d(t,this.amount);break;case"saturate":this._colorMatrix=p(t,this.amount);break;case"sepia":this._colorMatrix=v(t,this.amount)}}}class y{constructor(t,e,r,n){this.offsetX=t,this.offsetY=e,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(t,e,r){this.offsetX=w(t.offsetX,e.offsetX,r),this.offsetY=w(t.offsetY,e.offsetY,r),this.blurRadius=w(t.blurRadius,e.blurRadius,r),this.color[0]=Math.round(w(t.color[0],e.color[0],r)),this.color[1]=Math.round(w(t.color[1],e.color[1],r)),this.color[2]=Math.round(w(t.color[2],e.color[2],r)),this.color[3]=w(t.color[3],e.color[3],r)}clone(){return new y(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}}class b{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,e,r){this.angle=w(t.angle,e.angle,r),this._updateMatrix()}clone(){return new b(this.angle)}_updateMatrix(){const t=this._colorMatrix||Object(o["a"])();this._colorMatrix=f(t,this.angle)}}class S{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,e,r){this.amount=w(t.amount,e.amount,r)}clone(){return new S(this.amount)}}function w(t,e,r){return t+(e-t)*r}var A=r("5f6c"),V=Object(A["b"])((function(t){var e;e=function(){function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,r,n,s){this.message=t,this.expected=r,this.found=n,this.location=s,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function r(t,r){r=void 0!==r?r:{};var n,s={},i={start:Yt},a=Yt,o=Nt("none"),c="none",u=Bt("none",!1),l=function(){return[]},h=")",f=Bt(")",!1),d=function(t,e){return{type:"function",name:t,parameters:e||[]}},p=",",v=Bt(",",!1),g=function(t,e){return e.length>0?ce(t,e,3):[t]},m=function(t){return{type:"quantity",value:t.value,unit:t.unit}},_=function(t){return{type:"color",colorType:t.type,value:t.value}},y=Nt("whitespace"),b=/^[ \t\n\r]/,S=qt([" ","\t","\n","\r"],!1,!1),w=Nt("function"),A="(",V=Bt("(",!1),x=function(t){return t},O=Nt("identifier"),R=/^[a-z\-]/,M=qt([["a","z"],"-"],!1,!1),T=function(){return Ut()},E=Nt("percentage"),z="%",I=Bt("%",!1),L=function(t){return{value:t,unit:"%"}},F=Nt("length"),C="px",j=Bt("px",!1),U=function(t){return{value:t,unit:"px"}},B="cm",q=Bt("cm",!1),k=function(t){return{value:t,unit:"cm"}},N="mm",D=Bt("mm",!1),P=function(t){return{value:t,unit:"mm"}},X="in",Z=Bt("in",!1),Y=function(t){return{value:t,unit:"in"}},$="pt",K=Bt("pt",!1),G=function(t){return{value:t,unit:"pt"}},J="pc",H=Bt("pc",!1),Q=function(t){return{value:t,unit:"pc"}},W=Nt("angle"),tt="deg",et=Bt("deg",!1),rt=function(t){return{value:t,unit:"deg"}},nt="rad",st=Bt("rad",!1),it=function(t){return{value:t,unit:"rad"}},at="grad",ot=Bt("grad",!1),ct=function(t){return{value:t,unit:"grad"}},ut="turn",lt=Bt("turn",!1),ht=function(t){return{value:t,unit:"turn"}},ft=Nt("number"),dt=function(t){return{value:t,unit:null}},pt=Nt("color"),vt="#",gt=Bt("#",!1),mt=/^[0-9a-fA-F]/,_t=qt([["0","9"],["a","f"],["A","F"]],!1,!1),yt=function(){return{type:"hex",value:Ut()}},bt=function(t){return{type:"function",value:t}},St=function(){return{type:"named",value:Ut()}},wt=/^[+\-]/,At=qt(["+","-"],!1,!1),Vt=/^[0-9]/,xt=qt([["0","9"]],!1,!1),Ot=".",Rt=Bt(".",!1),Mt="e",Tt=Bt("e",!1),Et=function(){return parseFloat(Ut())},zt=0,It=0,Lt=[{line:1,column:1}],Ft=0,Ct=[],jt=0;if("startRule"in r){if(!(r.startRule in i))throw new Error("Can't start parsing from rule \""+r.startRule+'".');a=i[r.startRule]}function Ut(){return t.substring(It,zt)}function Bt(t,e){return{type:"literal",text:t,ignoreCase:e}}function qt(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function kt(){return{type:"end"}}function Nt(t){return{type:"other",description:t}}function Dt(e){var r,n=Lt[e];if(n)return n;for(r=e-1;!Lt[r];)r--;for(n={line:(n=Lt[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Lt[e]=n,n}function Pt(t,e){var r=Dt(t),n=Dt(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function Xt(t){zt<Ft||(zt>Ft&&(Ft=zt,Ct=[]),Ct.push(t))}function Zt(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}function Yt(){var t;return(t=$t())===s&&(t=Kt()),t}function $t(){var e,r;return jt++,e=zt,Qt()!==s?(t.substr(zt,4)===c?(r=c,zt+=4):(r=s,0===jt&&Xt(u)),r!==s&&Qt()!==s?(It=e,e=l()):(zt=e,e=s)):(zt=e,e=s),jt--,e===s&&0===jt&&Xt(o),e}function Kt(){var t,e;if(t=[],(e=Gt())!==s)for(;e!==s;)t.push(e),e=Gt();else t=s;return t}function Gt(){var e,r,n,i;return e=zt,Qt()!==s&&(r=Wt())!==s&&Qt()!==s?((n=Jt())===s&&(n=null),n!==s&&Qt()!==s?(41===t.charCodeAt(zt)?(i=h,zt++):(i=s,0===jt&&Xt(f)),i!==s&&Qt()!==s?(It=e,e=d(r,n)):(zt=e,e=s)):(zt=e,e=s)):(zt=e,e=s),e}function Jt(){var e,r,n,i,a,o,c,u;if(e=zt,(r=Ht())!==s){for(n=[],i=zt,(a=Qt())!==s?(44===t.charCodeAt(zt)?(o=p,zt++):(o=s,0===jt&&Xt(v)),o===s&&(o=null),o!==s&&(c=Qt())!==s&&(u=Ht())!==s?i=a=[a,o,c,u]:(zt=i,i=s)):(zt=i,i=s);i!==s;)n.push(i),i=zt,(a=Qt())!==s?(44===t.charCodeAt(zt)?(o=p,zt++):(o=s,0===jt&&Xt(v)),o===s&&(o=null),o!==s&&(c=Qt())!==s&&(u=Ht())!==s?i=a=[a,o,c,u]:(zt=i,i=s)):(zt=i,i=s);n!==s?(It=e,e=r=g(r,n)):(zt=e,e=s)}else zt=e,e=s;return e}function Ht(){var t,e;return t=zt,(e=ee())===s&&(e=re())===s&&(e=ne())===s&&(e=se()),e!==s&&(It=t,e=m(e)),(t=e)===s&&(t=zt,(e=ie())!==s&&(It=t,e=_(e)),t=e),t}function Qt(){var e,r;for(jt++,e=[],b.test(t.charAt(zt))?(r=t.charAt(zt),zt++):(r=s,0===jt&&Xt(S));r!==s;)e.push(r),b.test(t.charAt(zt))?(r=t.charAt(zt),zt++):(r=s,0===jt&&Xt(S));return jt--,e===s&&(r=s,0===jt&&Xt(y)),e}function Wt(){var e,r,n;return jt++,e=zt,(r=te())!==s?(40===t.charCodeAt(zt)?(n=A,zt++):(n=s,0===jt&&Xt(V)),n!==s?(It=e,e=r=x(r)):(zt=e,e=s)):(zt=e,e=s),jt--,e===s&&(r=s,0===jt&&Xt(w)),e}function te(){var e,r,n;if(jt++,e=zt,r=[],R.test(t.charAt(zt))?(n=t.charAt(zt),zt++):(n=s,0===jt&&Xt(M)),n!==s)for(;n!==s;)r.push(n),R.test(t.charAt(zt))?(n=t.charAt(zt),zt++):(n=s,0===jt&&Xt(M));else r=s;return r!==s&&(It=e,r=T()),jt--,(e=r)===s&&(r=s,0===jt&&Xt(O)),e}function ee(){var e,r,n;return jt++,e=zt,Qt()!==s&&(r=ae())!==s?(37===t.charCodeAt(zt)?(n=z,zt++):(n=s,0===jt&&Xt(I)),n!==s?(It=e,e=L(r)):(zt=e,e=s)):(zt=e,e=s),jt--,e===s&&0===jt&&Xt(E),e}function re(){var e,r,n;return jt++,e=zt,Qt()!==s&&(r=ae())!==s?(t.substr(zt,2)===C?(n=C,zt+=2):(n=s,0===jt&&Xt(j)),n!==s?(It=e,e=U(r)):(zt=e,e=s)):(zt=e,e=s),e===s&&(e=zt,Qt()!==s&&(r=ae())!==s?(t.substr(zt,2)===B?(n=B,zt+=2):(n=s,0===jt&&Xt(q)),n!==s?(It=e,e=k(r)):(zt=e,e=s)):(zt=e,e=s),e===s&&(e=zt,Qt()!==s&&(r=ae())!==s?(t.substr(zt,2)===N?(n=N,zt+=2):(n=s,0===jt&&Xt(D)),n!==s?(It=e,e=P(r)):(zt=e,e=s)):(zt=e,e=s),e===s&&(e=zt,Qt()!==s&&(r=ae())!==s?(t.substr(zt,2)===X?(n=X,zt+=2):(n=s,0===jt&&Xt(Z)),n!==s?(It=e,e=Y(r)):(zt=e,e=s)):(zt=e,e=s),e===s&&(e=zt,Qt()!==s&&(r=ae())!==s?(t.substr(zt,2)===$?(n=$,zt+=2):(n=s,0===jt&&Xt(K)),n!==s?(It=e,e=G(r)):(zt=e,e=s)):(zt=e,e=s),e===s&&(e=zt,Qt()!==s&&(r=ae())!==s?(t.substr(zt,2)===J?(n=J,zt+=2):(n=s,0===jt&&Xt(H)),n!==s?(It=e,e=Q(r)):(zt=e,e=s)):(zt=e,e=s)))))),jt--,e===s&&0===jt&&Xt(F),e}function ne(){var e,r,n;return jt++,e=zt,(r=ae())!==s?(t.substr(zt,3)===tt?(n=tt,zt+=3):(n=s,0===jt&&Xt(et)),n!==s?(It=e,e=r=rt(r)):(zt=e,e=s)):(zt=e,e=s),e===s&&(e=zt,(r=ae())!==s?(t.substr(zt,3)===nt?(n=nt,zt+=3):(n=s,0===jt&&Xt(st)),n!==s?(It=e,e=r=it(r)):(zt=e,e=s)):(zt=e,e=s),e===s&&(e=zt,(r=ae())!==s?(t.substr(zt,4)===at?(n=at,zt+=4):(n=s,0===jt&&Xt(ot)),n!==s?(It=e,e=r=ct(r)):(zt=e,e=s)):(zt=e,e=s),e===s&&(e=zt,(r=ae())!==s?(t.substr(zt,4)===ut?(n=ut,zt+=4):(n=s,0===jt&&Xt(lt)),n!==s?(It=e,e=r=ht(r)):(zt=e,e=s)):(zt=e,e=s)))),jt--,e===s&&(r=s,0===jt&&Xt(W)),e}function se(){var t,e;return jt++,t=zt,Qt()!==s&&(e=ae())!==s?(It=t,t=dt(e)):(zt=t,t=s),jt--,t===s&&0===jt&&Xt(ft),t}function ie(){var e,r,n,i;if(jt++,e=zt,35===t.charCodeAt(zt)?(r=vt,zt++):(r=s,0===jt&&Xt(gt)),r!==s){if(n=[],mt.test(t.charAt(zt))?(i=t.charAt(zt),zt++):(i=s,0===jt&&Xt(_t)),i!==s)for(;i!==s;)n.push(i),mt.test(t.charAt(zt))?(i=t.charAt(zt),zt++):(i=s,0===jt&&Xt(_t));else n=s;n!==s?(It=e,e=r=yt()):(zt=e,e=s)}else zt=e,e=s;return e===s&&(e=zt,(r=Gt())!==s&&(It=e,r=bt(r)),(e=r)===s&&(e=zt,(r=te())!==s&&(It=e,r=St()),e=r)),jt--,e===s&&(r=s,0===jt&&Xt(pt)),e}function ae(){var e,r,n,i,a,o,c,u;if(e=zt,wt.test(t.charAt(zt))?(r=t.charAt(zt),zt++):(r=s,0===jt&&Xt(At)),r===s&&(r=null),r!==s){for(n=zt,i=[],Vt.test(t.charAt(zt))?(a=t.charAt(zt),zt++):(a=s,0===jt&&Xt(xt));a!==s;)i.push(a),Vt.test(t.charAt(zt))?(a=t.charAt(zt),zt++):(a=s,0===jt&&Xt(xt));if(i!==s)if(46===t.charCodeAt(zt)?(a=Ot,zt++):(a=s,0===jt&&Xt(Rt)),a!==s){if(o=[],Vt.test(t.charAt(zt))?(c=t.charAt(zt),zt++):(c=s,0===jt&&Xt(xt)),c!==s)for(;c!==s;)o.push(c),Vt.test(t.charAt(zt))?(c=t.charAt(zt),zt++):(c=s,0===jt&&Xt(xt));else o=s;o!==s?n=i=[i,a,o]:(zt=n,n=s)}else zt=n,n=s;else zt=n,n=s;if(n===s)if(n=[],Vt.test(t.charAt(zt))?(i=t.charAt(zt),zt++):(i=s,0===jt&&Xt(xt)),i!==s)for(;i!==s;)n.push(i),Vt.test(t.charAt(zt))?(i=t.charAt(zt),zt++):(i=s,0===jt&&Xt(xt));else n=s;if(n!==s){if(i=zt,101===t.charCodeAt(zt)?(a=Mt,zt++):(a=s,0===jt&&Xt(Tt)),a!==s)if(wt.test(t.charAt(zt))?(o=t.charAt(zt),zt++):(o=s,0===jt&&Xt(At)),o===s&&(o=null),o!==s){if(c=[],Vt.test(t.charAt(zt))?(u=t.charAt(zt),zt++):(u=s,0===jt&&Xt(xt)),u!==s)for(;u!==s;)c.push(u),Vt.test(t.charAt(zt))?(u=t.charAt(zt),zt++):(u=s,0===jt&&Xt(xt));else c=s;c!==s?i=a=[a,o,c]:(zt=i,i=s)}else zt=i,i=s;else zt=i,i=s;i===s&&(i=null),i!==s?(It=e,e=r=Et()):(zt=e,e=s)}else zt=e,e=s}else zt=e,e=s;return e}function oe(t,e){return t.map((function(t){return t[e]}))}function ce(t,e,r){return[t].concat(oe(e,r))}if((n=a())!==s&&zt===t.length)return n;throw n!==s&&zt<t.length&&Xt(kt()),Zt(Ct,Ft<t.length?t.charAt(Ft):null,Ft<t.length?Pt(Ft,Ft+1):Pt(Ft,Ft))}return t(e,Error),e.buildMessage=function(t,e){var r={literal:function(t){return'"'+s(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?i(t.parts[e][0])+"-"+i(t.parts[e][1]):i(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function s(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function a(t){return r[t.type](t)}function o(t){var e,r,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=a(t[e]);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}function c(t){return t?'"'+s(t)+'"':"end of input"}return"Expected "+o(t)+" but "+c(e)+" found."},{SyntaxError:e,parse:r}},t.exports&&(t.exports=e())}));function x(t){let e;try{e=t?V.parse(t):[]}catch(n){return{input:t,parsedFunctions:[],effects:[],error:new i["a"]("effect:invalid-syntax","Invalid effect syntax",{input:t,error:n})}}const r={input:t,parsedFunctions:e,effects:[],error:null};try{for(const t of e)r.effects.push(O(t))}catch(n){r.effects.length=0,r.error=n}return r}function O(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return R(t);case"opacity":return M(t);case"hue-rotate":return T(t);case"blur":return E(t);case"drop-shadow":return z(t);case"bloom":return I(t)}}catch(e){throw e.details.filter=t,e}throw new i["a"]("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function R(t){let e=1;return L(t.parameters,1),1===t.parameters.length&&(e=D(t.parameters[0])),new _(t.name,e)}function M(t){let e=1;return L(t.parameters,1),1===t.parameters.length&&(e=D(t.parameters[0])),new S(e)}function T(t){let e=0;return L(t.parameters,1),1===t.parameters.length&&(e=X(t.parameters[0])),new b(e)}function E(t){let e=0;return L(t.parameters,1),1===t.parameters.length&&(e=Z(t.parameters[0]),C(e,t.parameters[0])),new m(e)}function z(t){const e=[];let r;for(const n of t.parameters)if("color"===n.type){if(e.length&&Object.freeze(e),r)throw new i["a"]("effect:type-error","Accepts only one color",{});r=Y(n)}else{const t=Z(n);if(Object.isFrozen(e))throw new i["a"]("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(t),3===e.length&&C(t,n)}if(e.length<2||e.length>3)throw new i["a"]("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new y(e[0],e[1],e[2]||0,r||$("black"))}function I(t){let e=1,r=0,n=0;return L(t.parameters,3),t.parameters[0]&&(e=D(t.parameters[0])),t.parameters[1]&&(r=Z(t.parameters[1]),C(r,t.parameters[1])),t.parameters[2]&&(n=D(t.parameters[2])),new g(e,r,n)}function L(t,e){if(t.length>e)throw new i["a"]("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function F(t){return"color"===t.type?"<color>":k[t.unit]?"<length>":B[t.unit]?"<angle>":"%"===t.unit?"<percentage>":"<double>"}function C(t,e){if(t<0)throw new i["a"]("effect:type-error","Negative values are not allowed, Actual: "+t,{term:e})}function j(t){if("quantity"!==t.type||null!==t.unit)throw new i["a"]("effect:type-error","Expected <double>, Actual: "+F(t),{term:t})}function U(t){if("quantity"!==t.type||null!==t.unit&&"%"!==t.unit)throw new i["a"]("effect:type-error","Expected <double> or <percentage>, Actual: "+F(t),{term:t})}const B={deg:1,grad:.9,rad:180/Math.PI,turn:360};function q(t){if("quantity"!==t.type||(0!==t.value||null!==t.unit)&&null==B[t.unit])throw new i["a"]("effect:type-error","Expected <angle>, Actual: "+F(t),{term:t})}const k={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/73};function N(t){if("quantity"!==t.type||(0!==t.value||null!==t.unit)&&null==k[t.unit])throw new i["a"]("effect:type-error","Expected <length>, Actual: "+F(t),{term:t})}function D(t){U(t);const e=t.value;return C(e,t),"%"===t.unit?.01*e:e}function P(t){return j(t),C(t.value,t),t.value}function X(t){return q(t),t.value*B[t.unit]||0}function Z(t){return N(t),t.value*k[t.unit]||0}function Y(t){switch(t.colorType){case"hex":return Object(a["c"])(t.value);case"named":return $(t.value);case"function":return J(t.value)}}function $(t){const e=Object(a["b"])(t);if(!e)throw new i["a"]("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return e}const K=/^rgba?/i,G=/^hsla?/i;function J(t){if(L(t.parameters,4),K.test(t.name))return[D(t.parameters[0]),D(t.parameters[1]),D(t.parameters[2]),t.parameters[3]?D(t.parameters[3]):1];if(G.test(t.name))return Object(a["d"])(P(t.parameters[0]),D(t.parameters[1]),D(t.parameters[2]),t.parameters[3]?D(t.parameters[3]):1);throw new i["a"]("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}const H=-1;class Q{constructor(t=200){this.duration=t,this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this._effect="",this._effects=[],this._scale=0}get effect(){return this._effect}set effect(t){if(t=t||"",this._effect===t)return;this._effect=t;const e=W(t);Array.isArray(e)?this._transitionTo(e):(this._transitionTo([]),s["a"].getLogger("esri.views.layers.effects.EffectList").warn("Invalid Effect",{effect:t,error:e}))}get hasEffects(){return this.transitioning||!!this._effects.length}get effects(){return this._effects}get scale(){return this._scale}get transitioning(){return null!==this._to}transitionStep(t,e){this._applyTimeTransition(t),this._updateForScale(e)}_transitionTo(t){this.scale>0&&nt(this._current,t,this.scale)?(this._final=t,this._to=Object(n["a"])(t),st(this._current,this._to,this.scale),this._from=Object(n["a"])(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t),this._effects=this._current[0]?Object(n["a"])(this._current[0].effects):[]}_applyTimeTransition(t){if(!this._to)return;this._time+=t;const e=Math.min(1,this._time/this.duration);for(let r=0;r<this._current.length;r++){const t=this._current[r],n=this._from[r],s=this._to[r];t.scale=it(n.scale,s.scale,e);for(let r=0;r<t.effects.length;r++){const i=t.effects[r],a=n.effects[r],o=s.effects[r];i.interpolate(a,o,e)}}1===e&&(this._current=this._final,this._effects=this._current[0]?Object(n["a"])(this._current[0].effects):[],this._from=this._to=this._final=null)}_updateForScale(t){if(0===this._current.length)return;this._scale=t;const e=this._current,r=this._current.length-1;let n,s,i=1;if(1===e.length||t>=e[0].scale)s=n=e[0].effects;else if(t<=e[r].scale)s=n=e[r].effects;else for(let a=0;a<r;a++){const r=e[a],o=e[a+1];if(r.scale>=t&&o.scale<=t){i=(t-r.scale)/(o.scale-r.scale),n=r.effects,s=o.effects;break}}for(let a=0;a<this._effects.length;a++)this._effects[a].interpolate(n[a],s[a],i)}}function W(t){if(!t)return[];if("string"==typeof t){const e=x(t);return e.error?e.error:[{scale:H,effects:e.effects}]}const e=[];for(const r of t){if(!isFinite(r.scale)||r.scale<=0)return new i["a"]("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});const t=x(r.value);if(t.error)return t.error;e.push({scale:r.scale,effects:t.effects})}e.sort((t,e)=>e.effects.length-t.effects.length);for(let r=0;r<e.length-1;r++){if(!et(e[r].effects,e[r+1].effects))return new i["a"]("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[r].effects,b:e[r+1].effects});rt(e[r].effects,e[r+1].effects)}return e.sort((t,e)=>e.scale-t.scale),e}function tt(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new _(t.type,0);case"saturate":case"brightness":case"contrast":return new _(t.type,1);case"opacity":return new S(1);case"hue-rotate":return new b(0);case"blur":return new m(0);case"drop-shadow":return new y(0,0,0,[...Object(a["a"])("transparent")]);case"bloom":return new g(0,0,0)}}function et(t,e){const r=t.length>e.length?t:e;return(t.length>e.length?e:t).every((t,e)=>t.type===r[e].type)}function rt(t,e){const r=t.length>e.length?t:e,n=t.length>e.length?e:t;for(let s=n.length;s<r.length;s++)n.push(tt(r[s]))}function nt(t,e,r){var n,s,i,a;return null==(n=t[0])||!n.effects||null==(s=e[0])||!s.effects||!(((null==(i=t[0])?void 0:i.scale)===H||(null==(a=e[0])?void 0:a.scale)===H)&&(t.length>1||e.length>1)&&r<=0)&&et(t[0].effects,e[0].effects)}function st(t,e,r){var n,s;const i=t.length>e.length?t:e,a=t.length>e.length?e:t,o=a[a.length-1],c=null!=(n=null==o?void 0:o.scale)?n:r,u=null!=(s=null==o?void 0:o.effects)?s:[];for(let l=a.length;l<i.length;l++)a.push({scale:c,effects:[...u]});for(let l=0;l<i.length;l++)a[l].scale=a[l].scale===H?r:a[l].scale,i[l].scale=i[l].scale===H?r:i[l].scale,rt(a[l].effects,i[l].effects)}function it(t,e,r){return t+(e-t)*r}e["a"]=Q}}]);