"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[2432],{62432:(t,e,n)=>{n.r(e),n.d(e,{loadGLTFMesh:()=>w});var o=n(48027),r=n(82058),s=n(91306),i=n(76506),a=n(26923),c=n(45087),u=n(82426),l=n(68681),f=n(81773),p=n(71337),m=n(68225),d=n(40167),g=n(72836),x=n(90779),b=n(84017),h=n(14049),v=n(30752);async function w(t,e,n){const a=new x.D(null!=(w=n)&&w.resolveFile?{busy:!1,request:async(t,e,n)=>{const o=w.resolveFile(t),s="image"===e?"image":"binary"===e?"array-buffer":"json";return(await(0,r.default)(o,{responseType:s,signal:(0,i.i)(n)?n.signal:null})).data}}:null),c=(await(0,x.l)(a,e,n,!0)).model,g=c.lods.shift(),h=new Map,v=new Map;var w;c.textures.forEach(((t,e)=>{return h.set(e,new m.Z({data:(n=t).data,wrap:E(n.parameters.wrap)}));var n})),c.materials.forEach(((t,e)=>v.set(e,function(t,e){const n=new o.Z((s=t.color,a=t.opacity,(0,l.f)(M(s[0]),M(s[1]),M(s[2]),a))),r=t.emissiveFactor?new o.Z(function(t){return(0,u.q)(M(t[0]),M(t[1]),M(t[2]))}(t.emissiveFactor)):null;var s,a;return new p.Z({color:n,colorTexture:(0,i.u)((0,i.m)(t.textureColor,(t=>e.get(t)))),normalTexture:(0,i.u)((0,i.m)(t.textureNormal,(t=>e.get(t)))),emissiveColor:r,emissiveTexture:(0,i.u)((0,i.m)(t.textureEmissive,(t=>e.get(t)))),occlusionTexture:(0,i.u)((0,i.m)(t.textureOcclusion,(t=>e.get(t)))),alphaMode:T(t.alphaMode),alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,metallic:t.metallicFactor,roughness:t.roughnessFactor,metallicRoughnessTexture:(0,i.u)((0,i.m)(t.textureMetallicRoughness,(t=>e.get(t))))})}(t,h))));const R=function(t){let e=0;const n={color:!1,tangent:!1,normal:!1,texCoord0:!1},o=new Map,r=new Map,i=[];for(const a of t.parts){const{attributes:{position:t,normal:c,color:u,tangent:l,texCoord0:f}}=a,p=`\n      ${y(t,o)}/\n      ${y(c,o)}/\n      ${y(u,o)}/\n      ${y(l,o)}/\n      ${y(f,o)}/\n      ${C(a.transform)}\n    `;let m=!1;const d=(0,s.o)(r,p,(()=>(m=!0,{start:e,length:t.count})));m&&(e+=t.count),c&&(n.normal=!0),u&&(n.color=!0),l&&(n.tangent=!0),f&&(n.texCoord0=!0),i.push({gltf:a,writeVertices:m,region:d})}return{vertexAttributes:{position:(0,x.c)(d.e,e),normal:n.normal?(0,x.c)(d.B,e):null,tangent:n.tangent?(0,x.c)(d.a,e):null,color:n.color?(0,x.c)(d.b,e):null,texCoord0:n.texCoord0?(0,x.c)(d.c,e):null},parts:i,components:[]}}(g);for(const t of R.parts)A(R,t,v);const{position:B,normal:$,tangent:F,color:I,texCoord0:P}=R.vertexAttributes,S={position:B.typedBuffer,normal:(0,i.i)($)?$.typedBuffer:null,tangent:(0,i.i)(F)?F.typedBuffer:null,uv:(0,i.i)(P)?P.typedBuffer:null,color:(0,i.i)(I)?I.typedBuffer:null},L=(0,b.a)(S,t,n);return{transform:L.transform,components:R.components,spatialReference:t.spatialReference,vertexAttributes:new f.M({position:L.vertexAttributes.position,normal:L.vertexAttributes.normal,tangent:L.vertexAttributes.tangent,color:S.color,uv:S.uv})}}function y(t,e){if((0,i.b)(t))return"-";const n=t.typedBuffer;return`${(0,s.o)(e,n.buffer,(()=>e.size))}/${n.byteOffset}/${n.byteLength}`}function C(t){return(0,i.i)(t)?t.toString():"-"}function A(t,e,n){e.writeVertices&&function(t,e){const{position:n,normal:o,tangent:r,color:s,texCoord0:u}=t.vertexAttributes,l=e.region.start,{attributes:f,transform:p}=e.gltf,m=f.position.count;if((0,g.t)(n.slice(l,m),f.position,p),(0,i.i)(f.normal)&&(0,i.i)(o)){const t=(0,a.a)((0,c.b)(),p);(0,g.a)(o.slice(l,m),f.normal,t)}else(0,i.i)(o)&&(0,g.f)(o,0,0,1,{dstIndex:l,count:m});if((0,i.i)(f.tangent)&&(0,i.i)(r)){const t=(0,a.a)((0,c.b)(),p);(0,x.t)(r.slice(l,m),f.tangent,t)}else(0,i.i)(r)&&(0,x.f)(r,0,0,1,1,{dstIndex:l,count:m});if((0,i.i)(f.texCoord0)&&(0,i.i)(u)?(0,x.n)(u.slice(l,m),f.texCoord0):(0,i.i)(u)&&(0,x.g)(u,0,0,{dstIndex:l,count:m}),(0,i.i)(f.color)&&(0,i.i)(s)){const t=f.color,e=s.slice(l,m);if(4===t.elementCount)t instanceof d.a?(0,x.s)(e,t,255):t instanceof d.b?(0,x.a)(e,t):t instanceof d.s&&(0,x.h)(e,t,8);else{(0,x.f)(e,255,255,255,255);const n=d.u.fromTypedArray(e.typedBuffer,e.typedBufferStride);t instanceof d.B?(0,g.s)(n,t,255):t instanceof d.u?(0,g.c)(n,t):t instanceof d.v&&(0,g.b)(n,t,8)}}else(0,i.i)(s)&&(0,x.f)(s.slice(l,m),255,255,255,255)}(t,e);const o=e.gltf,r=function(t,e){switch(e){case v.P.TRIANGLES:return(0,x.e)(t,h.d);case v.P.TRIANGLE_STRIP:return(0,x.d)(t);case v.P.TRIANGLE_FAN:return(0,x.b)(t)}}(o.indices||o.attributes.position.count,o.primitiveType),s=e.region.start;if(s)for(let t=0;t<r.length;t++)r[t]+=s;t.components.push(new f.Z({faces:r,material:n.get(o.material),trustSourceNormals:!0}))}function T(t){switch(t){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function E(t){return{horizontal:R(t.s),vertical:R(t.t)}}function R(t){switch(t){case v.f.CLAMP_TO_EDGE:return"clamp";case v.f.MIRRORED_REPEAT:return"mirror";case v.f.REPEAT:return"repeat"}}function M(t){return t**(1/x.C)*255}n(54174),n(29794),n(92143),n(31450),n(71552),n(40642),n(88762),n(32101),n(60991),n(50406),n(74673),n(21972),n(23639),n(60474),n(66396),n(22723),n(17533),n(86656),n(6540),n(91055),n(34250),n(19657),n(6906),n(86787),n(44265),n(97714),n(2906),n(38742),n(47029),n(27726),n(41864),n(48190),n(10738),n(65775),n(35861),n(53785),n(57251),n(95587),n(60947),n(89623),n(1623),n(21801),n(73796),n(91597),n(35132),n(84069),n(12381),n(73173),n(44567),n(98380),n(92896),n(92482),n(92624),n(92847),n(34987),n(84661),n(50766),n(2484),n(79764),n(94446)}}]);