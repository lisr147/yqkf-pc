"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[1866,1864,3443,2163],{21781:(e,t,r)=>{r.d(t,{A:()=>n});var i=r(29768),l=r(34250),o=(r(76506),r(91306),r(17533));const n=e=>{let t=class extends e{get apiKey(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?null==(e=this.portalItem)?void 0:e.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,i._)([(0,l.Cb)({type:String})],t.prototype,"apiKey",null),t=(0,i._)([(0,o.j)("esri.layers.mixins.APIKeyMixin")],t),t}},75025:(e,t,r)=>{r.d(t,{A:()=>u});var i=r(29768),l=r(92143),o=r(76506),n=r(34250),s=(r(91306),r(17533)),a=r(21132);const u=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,a.p)(this.url);if((0,o.i)(e)&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,a.s)(e,l.L.getLogger(this.declaredClass)))}};return(0,i._)([(0,n.Cb)()],t.prototype,"title",null),(0,i._)([(0,n.Cb)({type:String})],t.prototype,"url",null),t=(0,i._)([(0,s.j)("esri.layers.mixins.ArcGISService")],t),t}},62162:(e,t,r)=>{r.d(t,{P:()=>_});var i=r(29768),l=r(88762),o=r(82058),n=r(41864),s=r(60991),a=r(92143),u=r(76506),d=r(50406),p=r(32101),c=r(34250),h=(r(91306),r(97714)),m=r(17533),y=r(2906),v=r(49900),f=r(56420),g=r(74653);const w=a.L.getLogger("esri.layers.mixins.PortalLayer"),_=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var e;null==(e=this.portalItem)||e.destroy(),this.portalItem=null}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new f.default({id:t.itemId,portal:r&&r.portal})}writePortalItem(e,t){e&&e.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem&&this.portalItem.id)try{const i=await r.e(8642).then(r.bind(r,8642)).then((e=>e.l));return(0,d.k_)(t),await i.load({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData},t)}catch(e){throw(0,d.D_)(e)||w.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,d.r9)(e),!0))))}async _fetchUserHasEditingPrivileges(e){const t=this.url?null==l.id?void 0:l.id.findCredential(this.url):null;if(!t)return!0;const r=b.credential===t?b.user:await this._fetchEditingUser(e);return b.credential=t,b.user=r,(0,u.b)(r)||null==r.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(e){var t,r;const i=null==(t=this.portalItem)||null==(r=t.portal)?void 0:r.user;if(i)return i;const s=l.id.findServerInfo(this.url);if(null==s||!s.owningSystemUrl)return null;const a=`${s.owningSystemUrl}/sharing/rest`,d=v.Z.getDefault();if(d&&d.loaded&&(0,p.Fv)(d.restUrl)===(0,p.Fv)(a))return d.user;const c=`${a}/community/self`,h=(0,u.i)(e)?e.signal:null,m=await(0,n.r)((0,o.default)(c,{authMode:"no-prompt",query:{f:"json"},signal:h}));return m.ok?g.default.fromJSON(m.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t&&t.portal,i=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||v.Z.getDefault());return r&&i&&!(0,p.tm)(i.restUrl,r.restUrl)?(t.messages&&t.messages.push(new s.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,i._)([(0,c.Cb)({type:f.default})],t.prototype,"portalItem",null),(0,i._)([(0,h.r)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,i._)([(0,y.w)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,i._)([(0,c.Cb)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,i._)([(0,c.Cb)({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=(0,i._)([(0,m.j)("esri.layers.mixins.PortalLayer")],t),t},b={credential:null,user:null}},41864:(e,t,r)=>{r.d(t,{a:()=>a,f:()=>o,m:()=>n,r:()=>s});var i=r(76506),l=r(50406);function o(e,t,r){return(0,l.as)(e.map(((e,i)=>t.apply(r,[e,i]))))}function n(e,t,r){return(0,l.as)(e.map(((e,i)=>t.apply(r,[e,i])))).then((e=>e.map((e=>e.value))))}function s(e){return(0,i.b)(e)?(0,l.DB)():e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}function a(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>((0,l.r9)(e),{ok:!1,error:e})))}},3482:(e,t,r)=>{var i,l,o;let n;r.d(t,{b:()=>h,g:()=>u,o:()=>p});const s=null!=(i=null==(l=globalThis.esriConfig)?void 0:l.locale)?i:null==(o=globalThis.dojoConfig)?void 0:o.locale;function a(){var e,t;return null!=(e=null!=s?s:null==(t=globalThis.navigator)?void 0:t.language)?e:"en"}function u(){return void 0===n&&(n=a()),n}const d=[];function p(e){return d.push(e),{remove(){d.splice(d.indexOf(e),1)}}}const c=[];function h(e){return c.push(e),{remove(){d.splice(c.indexOf(e),1)}}}null==globalThis.addEventListener||globalThis.addEventListener("languagechange",(function(){const e=null!=undefined?undefined:a();n!==e&&(n=e,[...c].forEach((t=>{t.call(null,e)})),[...d].forEach((t=>{t.call(null,e)})))}))},52228:(e,t,r)=>{var i,l;function o(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function n(e){return null!=e&&!isNaN(e)&&isFinite(e)}function s(e){return e.valueExpression?i.Expression:e.field&&"string"==typeof e.field?i.Field:i.Unknown}function a(e,t){const r=t||s(e),o=e.valueUnit||"unknown";return r===i.Unknown?l.Constant:e.stops?l.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?l.ClampedLinear:"unknown"===o?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?l.Proportional:l.Additive:l.Identity:l.RealWorldSize}r.d(t,{I:()=>i,T:()=>l,a:()=>a,b:()=>n,g:()=>s,i:()=>o}),function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"}(i||(i={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(l||(l={}))},46495:(e,t,r)=>{r.d(t,{Z:()=>p});var i=r(29768),l=r(85339),o=r(57251),n=r(74673),s=r(34250),a=(r(76506),r(91306),r(17533));r(21972),r(23639),r(92143),r(31450),r(71552),r(40642),r(60474),r(66396),r(22723),r(86656),r(91055),r(6540),r(19657),r(6906),r(50406),r(60991);const u=new o.J({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let d=class extends((0,l.C)(n.a)){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};(0,i._)([(0,s.Cb)({json:{write:!0}})],d.prototype,"name",void 0),(0,i._)([(0,s.Cb)({json:{write:!0}})],d.prototype,"description",void 0),(0,i._)([(0,s.Cb)({json:{read:u.read,write:u.write}})],d.prototype,"drawingTool",void 0),(0,i._)([(0,s.Cb)({json:{write:!0}})],d.prototype,"prototype",void 0),(0,i._)([(0,s.Cb)({json:{write:!0}})],d.prototype,"thumbnail",void 0),d=(0,i._)([(0,a.j)("esri.layers.support.FeatureTemplate")],d);const p=d},78303:(e,t,r)=>{r.d(t,{Z:()=>h});var i=r(29768),l=r(85339),o=r(74673),n=r(34250),s=(r(76506),r(91306),r(97714)),a=r(17533),u=r(2906),d=r(9801),p=r(46495);r(21972),r(23639),r(92143),r(31450),r(71552),r(40642),r(60474),r(66396),r(22723),r(86656),r(91055),r(6540),r(19657),r(6906),r(50406),r(60991),r(53523),r(59465),r(57251),r(42911),r(46826),r(45433);let c=class extends((0,l.C)(o.a)){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r of Object.keys(e))t[r]=(0,d.f)(e[r]);return t}writeDomains(e,t){const r={};for(const t of Object.keys(e)){var i;e[t]&&(r[t]=null==(i=e[t])?void 0:i.toJSON())}t.domains=r}};(0,i._)([(0,n.Cb)({json:{write:!0}})],c.prototype,"id",void 0),(0,i._)([(0,n.Cb)({json:{write:!0}})],c.prototype,"name",void 0),(0,i._)([(0,n.Cb)({json:{write:!0}})],c.prototype,"domains",void 0),(0,i._)([(0,s.r)("domains")],c.prototype,"readDomains",null),(0,i._)([(0,u.w)("domains")],c.prototype,"writeDomains",null),(0,i._)([(0,n.Cb)({type:[p.Z],json:{write:!0}})],c.prototype,"templates",void 0),c=(0,i._)([(0,a.j)("esri.layers.support.FeatureType")],c);const h=c},2180:(e,t,r)=>{r.d(t,{Z:()=>d});var i,l=r(29768),o=r(15324),n=r(74673),s=r(34250),a=(r(76506),r(91306),r(17533));r(91055),r(76996),r(21972),r(23639),r(92143),r(31450),r(71552),r(40642),r(60474),r(66396),r(22723),r(86656),r(6540),r(19657),r(6906),r(50406),r(60991);let u=i=class extends n.a{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new o.Z}clone(){return new i({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,l._)([(0,s.Cb)({type:String,json:{write:!0}})],u.prototype,"floorField",void 0),(0,l._)([(0,s.Cb)({json:{read:!1,write:!1}})],u.prototype,"viewAllMode",void 0),(0,l._)([(0,s.Cb)({json:{read:!1,write:!1}})],u.prototype,"viewAllLevelIds",void 0),u=i=(0,l._)([(0,a.j)("esri.layers.support.LayerFloorInfo")],u);const d=u}}]);